title: 发版计划6.15 
date: 2023-10-31 15:54:04 
tags: []
categories: [发版]
password: 7FKBKZrTTTPG2LnC

---
 <!--more-->
# 发版步骤 

1. 完成测试项，评估能否发版
2. 暂停代码提交
3. 数据库备份
4. 打包镜像发到远程
5. 同步数据库变更信息
6. 发版
7. 回归测试
8. 验证通过

 ## 数据库变更操作

### 数据库备份

1. 先将main库全量备份一份。
2. 把现场表railway_tunnel改个名字叫railway_tunnel_bak，然后再执行sql文件

**都在main库**

1. 修改语句

   1. ```
      ALTER TABLE `sxsddsj_main`.`railway_project`
       CHANGE COLUMN `business_length` `line_length` DECIMAL(20,3) UNSIGNED NULL DEFAULT NULL COMMENT '线路长度' AFTER `tunnel_num`,
       DROP COLUMN `train_operation_mode`,
       DROP COLUMN `traction_type`,
       DROP COLUMN `traffic_command_mode`,
       DROP COLUMN `ad_track_effective_length`;
      ```

2. 执行sql文件

   都在sql.zip中。

   

## 服务更新 

 **本次大屏不发版**

| 更新项目     | 更新版本号 |                                            |
| ------------ | ---------- | ------------------------------------------ |
| sxsddsj_web  | **11354**  | 默认最新版本号，如当前不是最新，以最新为准 |
| sxsddsj-main | **11347**  | 默认最新版本号，如当前不是最新，以最新为准 |





```
<div class="form-group subtask-level"><span class="toggle-icon show">&nbsp;</span><div class="subtask-container show"><div> <div class="board draggable" draggable="true" id="asdadasd">asdadasd</div><button class="btn btn-success add-subtask-button">+</button><button class="btn btn-danger remove-subtask-button">X</button></div></div></div>
```


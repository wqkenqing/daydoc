<!DOCTYPE html>
<html lang="zh-Hans">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="x5-fullscreen" content="true">
<meta name="full-screen" content="yes">
<meta name="theme-color" content="#317EFB" />
<meta content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=0" name="viewport">
<meta name="description" content="A light-weight module that brings Fetch API to Node.js.                                             Consider supporting us on our Open Collective:                   You might be looking">
<meta property="og:type" content="article">
<meta property="og:title" content="wang&#39;s dayliy document">
<meta property="og:url" content="http://www.wqkenqing.ren/daydoc/2024/01/06/%E7%8E%8B%E9%98%81/test/node_modules/node-fetch/README/index.html">
<meta property="og:site_name" content="wang&#39;s dayliy document">
<meta property="og:description" content="A light-weight module that brings Fetch API to Node.js.                                             Consider supporting us on our Open Collective:                   You might be looking">
<meta property="og:locale">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="og:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">
<meta property="article:published_time" content="2024-01-06T06:44:19.000Z">
<meta property="article:modified_time" content="2024-01-06T06:44:19.000Z">
<meta property="article:author" content="Kuiq  Wang">
<meta property="article:tag" content="yGin910">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.wqkenqing.ren/daydoc/img/404.jpg">

    <meta name="keywords" content="yGin910">


<title >wang's dayliy document</title>

<!-- Favicon -->

    <link href='/daydoc/img/favicon.svg?v=2.1.6' rel='icon' type='image/png' sizes='16x16' ></link>


    <link href='/daydoc/img/favicon.svg?v=2.1.6' rel='icon' type='image/png' sizes='32x32' ></link>




<!-- Plugin -->




    
<link rel="stylesheet" href="/daydoc/css/plugins/bootstrap.row.css">

    
<link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui@4.0/dist/fancybox.css">

    
    




<!-- Icon -->

    
<link rel="stylesheet" href="/daydoc/css/plugins/font-awesome.min.css">




<!-- Variable -->
<script>window.ASYNC_CONFIG = {"hostname":"www.wqkenqing.ren","author":"Kuiq  Wang","root":"/daydoc/","typed_text":["Data Developer"],"theme_version":"2.1.6","theme":{"switch":true,"default":"style-light"},"favicon":{"logo":"/img/favicon.svg","icon16":"/img/favicon.svg","icon32":"/img/favicon.svg","appleTouchIcon":null,"webmanifest":null,"visibilitychange":false,"hidden":"/failure.ico","showText":"(/≧▽≦/)咦！又好了！","hideText":"(●—●)喔哟，崩溃啦！"},"i18n":{"placeholder":"搜索文章...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）","author":"本文作者：","copyright_link":"本文链接：","copyright_license_title":"版权声明：","copyright_license_content":"本博客所有文章除特别声明外，均默认采用 undefined 许可协议。","copy_success":"复制成功","copy_failure":"复制失败","open_read_mode":"进入阅读模式","exit_read_mode":"退出阅读模式","notice_outdate_message":"距离上次更新已经 undefined 天了, 文章内容可能已经过时。","sticky":"置顶","just":"刚刚","min":"分钟前","hour":"小时前","day":"天前","month":"个月前"},"swup":false,"plugin":{"flickr_justified_gallery":"https://unpkg.com/flickr-justified-gallery@latest/dist/fjGallery.min.js"},"icons":{"sun":"far fa-sun","moon":"far fa-moon","play":"fas fa-play","email":"far fa-envelope","next":"fas fa-arrow-right","calendar":"far fa-calendar-alt","clock":"far fa-clock","user":"far fa-user","back_top":"fas fa-arrow-up","close":"fas fa-times","search":"fas fa-search","reward":"fas fa-hand-holding-usd","user_tag":"fas fa-user-alt","toc_tag":"fas fa-th-list","read":"fas fa-book-reader","arrows":"fas fa-arrows-alt-h","double_arrows":"fas fa-angle-double-down","copy":"fas fa-copy"},"icontype":"font","highlight":{"plugin":"highlighjs","theme":true,"copy":true,"lang":true,"title":"default","height_limit":false},"toc":{"post_title":false},"covers":["https://cdn.pixabay.com/photo/2023/09/18/16/47/leaves-8260967_1280.jpg","https://cdn.pixabay.com/photo/2022/10/28/12/05/halloween-7553022_1280.jpg","https://pixabay.com/link/?ua=cd3%3Dimage%26cd7%3Den%253Anature%253AFRA%26ec%3Dapi_ad%26ea%3Dnavigate%26el%3Dgetty%26tid%3DUA-20223345-1%26dr%3Dhttps%253A%252F%252Fpixabay.com%252Fzh%252F&sp=%2524%3Dadvertisement_clicked%26media_type%3Dimage%26user_action%3Dnavigate%26ad_partner%3Dgetty%26ad_content%3Dapi_ad&next=https%3A%2F%2Fwww.istockphoto.com%2Fphoto%2Fhand-holdig-plant-growing-on-green-background-with-sunshine-gm1394781347-450126535%3Futm_source%3Dpixabay%26utm_medium%3Daffiliate%26utm_campaign%3DSRP_image_sponsored%26utm_content%3Dhttps%253A%252F%252Fpixabay.com%252Fzh%252Fimages%252Fsearch%252F%253Forder%253Dec%26utm_term%3Dnature&hash=83a731925a44749a062f73923a53e8e21a4c6a24&=","https://pixabay.com/zh/photos/eagle-bird-raptor-animal-show-8319555/","https://cdn.pixabay.com/photo/2023/10/13/16/39/coffee-8313090_1280.jpg","https://cdn.pixabay.com/photo/2023/10/21/11/46/sunset-8331285_1280.jpg","https://media.istockphoto.com/id/1225941556/fr/photo/caf%C3%A9-faire-du-caf%C3%A9-de-la-machine-%C3%A0-la-maison.jpg?s=2048x2048&w=is&k=20&c=kdUMGRbdkXVZKYr71E_iEC4tYTDFUWpsbeOcOIOHkUY="]};</script>
<script id="async-page-config">window.PAGE_CONFIG = {"isPost":true,"isHome":false,"postUpdate":"2024-01-06 14:44:19"};</script>

<!-- Theme mode css -->
<link data-swup-theme rel="stylesheet" href="/daydoc/css/index.css?v=2.1.6" id="trm-switch-style">
<script>
    let defaultMode = ASYNC_CONFIG.theme.default !=='auto' ?  ASYNC_CONFIG.theme.default : (window.matchMedia("(prefers-color-scheme: light)").matches ? 'style-light' : 'style-dark')
    let catchMode = localStorage.getItem('theme-mode') || defaultMode;
    let type = catchMode === 'style-dark' ? 'add' : 'remove';
    document.documentElement.classList[type]('dark')
</script>

<!-- CDN -->


    
    



<!-- Site Analytics -->
 
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/daydoc/atom.xml" title="wang's dayliy document" type="application/atom+xml">
</head>

<body>

  <!-- app wrapper -->
  <div class="trm-app-frame">

    <!-- page preloader -->
    <div class="trm-preloader">
    <div class="trm-holder">
        <div class="preloader">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>
    <!-- page preloader end -->

    <!-- change mode preloader -->
    <div class="trm-mode-swich-animation-frame">
    <div class="trm-mode-swich-animation">
        <i class="i-sun"><i class="iconfont far fa-sun"></i></i>
        <div class="trm-horizon"></div>
        <i class="i-moon"><i class="iconfont far fa-moon"></i></i>
    </div>
</div>
    <!-- change mode preloader end -->

      <!-- scroll container -->
      <div id="trm-dynamic-content" class="trm-swup-animation">
        <div id="trm-scroll-container" class="trm-scroll-container" style="opacity: 0">
            <!-- top bar -->
            <header class="trm-top-bar">
	<div class="container">
		<div class="trm-left-side">
			<!-- logo -->
<a href="/daydoc/" class="trm-logo-frame trm-anima-link">
    
        <img alt="logo" src="/daydoc/img/favicon.svg">
    
    
        <div class="trm-logo-text">
            人从<span>两</span>
        </div>
    
</a>
<!-- logo end -->
		</div>
		<div class="trm-right-side">
			<!-- menu -->
<div class="trm-menu">
    <nav>
        <ul>
            
            <li class="menu-item-has-children ">
                <a  href="/daydoc/" target="">
                    首页
                </a>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/daydoc/archives/" target="">
                    归档
                </a>
                
            </li>
            
        </ul>
    </nav>
</div>
<!-- menu end -->
			
    <!-- mode switcher place -->
    <div class="trm-mode-switcher-place">
        <div class="trm-mode-switcher">
            <i class="iconfont far fa-sun"></i>
            <input class="tgl tgl-light" id="trm-swich" type="checkbox">
            <label class="trm-swich" for="trm-swich"></label>
            <i class="iconfont far fa-moon"></i>
        </div>
    </div>
    <!-- mode switcher place end -->

			
		</div>
		<div class="trm-menu-btn">
			<span></span>
		</div>
	</div>
</header>
            <!-- top bar end -->

            <!-- body -->
            
<div class="trm-content-start">
    <!-- banner -->
    <div class="trm-banner">
    
    <!-- banner cover -->
    <img style="object-position:top;object-fit:cover;" alt="banner" class="trm-banner-cover" src="/daydoc/img/banner.png">
    <!-- banner cover end -->
    

    <!-- banner content -->
    <div class="trm-banner-content trm-overlay">
        <div class="container">
            <div class="row">
                
                <div class="col-lg-4"></div>
                
                <div class="col-lg-8">

                    <!-- banner title -->
                    <div class="trm-banner-text ">
                        <div class="trm-label trm-mb-20">
                            NEWS LETTER
                        </div>
                        <h1 class="trm-mb-30 trm-hsmb-font">
                            
                        </h1>

                        
                            <ul class="trm-breadcrumbs trm-label">
                                <li>
                                    <a href="/daydoc/" class="trm-anima-link">Home</a>
                                </li>
                                <li>
                                    <span>
                                        2024
                                    </span>
                                </li>
                            </ul>
                        
                    </div>
                    <!-- banner title end -->

                    <!-- scroll hint -->
                    <span id="scroll-triger" class="trm-scroll-hint-frame">
                        <div class="trm-scroll-hint"></div>
                        <span class="trm-label">Scroll down</span>
                    </span>
                    <!-- scroll hint end -->

                </div>
            </div>
        </div>
    </div>
    <!-- banner content end -->
</div>
    <!-- banner end -->
    <div class="container">
        <div class="row">
            
                <div class="trm-page-sidebar col-lg-4 hidden-sm">
                    <!-- main card -->
                    <div class="trm-main-card-frame trm-sidebar">
    <div class="trm-main-card"> 
        <!-- card header -->
<div class="trm-mc-header">
    <div class="trm-avatar-frame trm-mb-20">
        <img alt="Avatar" class="trm-avatar" src="https://pic.616pic.com/ys_bnew_img/00/04/31/yUPTAXjSKA.jpg">
    </div>
    <h5 class="trm-name trm-mb-15">
        两人从
    </h5>
    
        <div class="trm-label">
            I`m
            <span class="trm-typed-text">
                <!-- Words for theme.user.typedText -->
            </span>
        </div>
    
</div>
<!-- card header end -->
        <!-- sidebar social -->

<div class="trm-divider trm-mb-40 trm-mt-40"></div>
<div class="trm-social">
    
        <a href="https://github.com" title="Github" rel="nofollow" target="_blank">
            <i class="iconfont fab fa-github"></i>
        </a>
    
</div>

<!-- sidebar social end -->
        <!-- info -->
<div class="trm-divider trm-mb-40 trm-mt-40"></div>
<ul class="trm-table trm-mb-20">
    
        <li>
            <div class="trm-label">
                Residence:
            </div>
            <div class="trm-label trm-label-light">
                Mars
            </div>
        </li>
    
</ul>
<!-- info end -->

        
    <div class="trm-divider trm-mb-40 trm-mt-40"></div>
    <!-- action button -->
    <div class="text-center">
        <a href="mailto:wqkenqingto@163.com" class="trm-btn">
            联系我
            <i class="iconfont far fa-envelope"></i>
        </a>
    </div>
    <!-- action button end -->

    </div>
</div>
                    <!-- main card end -->
                </div>
            
            <div class="trm-page-content col-lg-8">
                <div id="trm-content" class="trm-content">
                    <div class="trm-post-info row hidden-sm">
    <div class="col-sm-4">
        <div class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-calendar-alt trm-icon"></i><br>
            01/06
        </div>
    </div>
    <div class="col-sm-4">
        <div class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-clock trm-icon"></i><br>
            14:44
        </div>
    </div>
    <div class="col-sm-4">
        <div id="post-author" class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-user trm-icon"></i><br>
            Kuiq  Wang
        </div>
    </div>
</div>
<div class="trm-card ">
    <article id="article-container" class="trm-publication">
    <div align="center">
    <img src="docs/media/Banner.svg" alt="Node Fetch" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'/>
    <br>
    <p>A light-weight module that brings <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a> to Node.js.</p>
    <a target="_blank" rel="noopener" href="https://github.com/node-fetch/node-fetch/actions"><img src="https://github.com/node-fetch/node-fetch/workflows/CI/badge.svg?branch=master" alt="Build status" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a>
    <a target="_blank" rel="noopener" href="https://coveralls.io/github/node-fetch/node-fetch"><img src="https://img.shields.io/coveralls/github/node-fetch/node-fetch" alt="Coverage status" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a>
    <a target="_blank" rel="noopener" href="https://packagephobia.now.sh/result?p=node-fetch"><img src="https://badgen.net/packagephobia/install/node-fetch" alt="Current version" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a>
    <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/node-fetch"><img src="https://img.shields.io/npm/v/node-fetch" alt="Install size" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a>
    <a target="_blank" rel="noopener" href="https://github.com/sindresorhus/awesome-nodejs"><img src="https://awesome.re/mentioned-badge.svg" alt="Mentioned in Awesome Node.js" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a>
    <a target="_blank" rel="noopener" href="https://discord.gg/Zxbndcm"><img src="https://img.shields.io/discord/619915844268326952?color=%237289DA&label=Discord" alt="Discord" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a>
    <br>
    <br>
    <b>Consider supporting us on our Open Collective:</b>
    <br>
    <br>
    <a target="_blank" rel="noopener" href="https://opencollective.com/node-fetch"><img src="https://opencollective.com/node-fetch/donate/button.png?color=blue" alt="Open Collective" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a>
</div>

<hr>
<p><strong>You might be looking for the <a target="_blank" rel="noopener" href="https://github.com/node-fetch/node-fetch/tree/2.x#readme">v2 docs</a></strong></p>
<!-- TOC -->

<ul>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#difference-from-client-side-fetch">Difference from client-side fetch</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#loading-and-configuring-the-module">Loading and configuring the module</a></li>
<li><a href="#upgrading">Upgrading</a></li>
<li><a href="#common-usage">Common Usage</a><ul>
<li><a href="#plain-text-or-html">Plain text or HTML</a></li>
<li><a href="#json">JSON</a></li>
<li><a href="#simple-post">Simple Post</a></li>
<li><a href="#post-with-json">Post with JSON</a></li>
<li><a href="#post-with-form-parameters">Post with form parameters</a></li>
<li><a href="#handling-exceptions">Handling exceptions</a></li>
<li><a href="#handling-client-and-server-errors">Handling client and server errors</a></li>
<li><a href="#handling-cookies">Handling cookies</a></li>
</ul>
</li>
<li><a href="#advanced-usage">Advanced Usage</a><ul>
<li><a href="#streams">Streams</a></li>
<li><a href="#accessing-headers-and-other-metadata">Accessing Headers and other Metadata</a></li>
<li><a href="#extract-set-cookie-header">Extract Set-Cookie Header</a></li>
<li><a href="#post-data-using-a-file">Post data using a file</a></li>
<li><a href="#request-cancellation-with-abortsignal">Request cancellation with AbortSignal</a></li>
</ul>
</li>
<li><a href="#api">API</a><ul>
<li><a href="#fetchurl-options">fetch(url[, options])</a></li>
<li><a href="#options">Options</a><ul>
<li><a href="#default-headers">Default Headers</a></li>
<li><a href="#custom-agent">Custom Agent</a></li>
<li><a href="#custom-highwatermark">Custom highWaterMark</a></li>
<li><a href="#insecure-http-parser">Insecure HTTP Parser</a></li>
</ul>
</li>
<li><a href="#class-request">Class: Request</a><ul>
<li><a href="#new-requestinput-options">new Request(input[, options])</a></li>
</ul>
</li>
<li><a href="#class-response">Class: Response</a><ul>
<li>[new Response([body[, options]])](#new-responsebody-options)</li>
<li><a href="#responseok">response.ok</a></li>
<li><a href="#responseredirected">response.redirected</a></li>
<li><a href="#responsetype">response.type</a></li>
</ul>
</li>
<li><a href="#class-headers">Class: Headers</a><ul>
<li><a href="#new-headersinit">new Headers([init])</a></li>
</ul>
</li>
<li><a href="#interface-body">Interface: Body</a><ul>
<li><a href="#bodybody">body.body</a></li>
<li><a href="#bodybodyused">body.bodyUsed</a></li>
<li><a href="#bodyarraybuffer">body.arrayBuffer()</a></li>
<li><a href="#bodyblob">body.blob()</a></li>
<li><a href="#formdata">body.formData()</a></li>
<li><a href="#bodyjson">body.json()</a></li>
<li><a href="#bodytext">body.text()</a></li>
</ul>
</li>
<li><a href="#class-fetcherror">Class: FetchError</a></li>
<li><a href="#class-aborterror">Class: AbortError</a></li>
</ul>
</li>
<li><a href="#typescript">TypeScript</a></li>
<li><a href="#acknowledgement">Acknowledgement</a></li>
<li><a href="#team">Team</a><br>          - <a href="#former">Former</a></li>
<li><a href="#license">License</a></li>
</ul>
<!-- /TOC -->

<h2 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h2><p>Instead of implementing <code>XMLHttpRequest</code> in Node.js to run browser-specific <a target="_blank" rel="noopener" href="https://github.com/github/fetch">Fetch polyfill</a>, why not go from native <code>http</code> to <code>fetch</code> API directly? Hence, <code>node-fetch</code>, minimal code for a <code>window.fetch</code> compatible API on Node.js runtime.</p>
<p>See Jason Miller’s <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/isomorphic-unfetch">isomorphic-unfetch</a> or Leonardo Quixada’s <a target="_blank" rel="noopener" href="https://github.com/lquixada/cross-fetch">cross-fetch</a> for isomorphic usage (exports <code>node-fetch</code> for server-side, <code>whatwg-fetch</code> for client-side).</p>
<h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><ul>
<li>Stay consistent with <code>window.fetch</code> API.</li>
<li>Make conscious trade-off when following <a target="_blank" rel="noopener" href="https://fetch.spec.whatwg.org/">WHATWG fetch spec</a> and <a target="_blank" rel="noopener" href="https://streams.spec.whatwg.org/">stream spec</a> implementation details, document known differences.</li>
<li>Use native promise and async functions.</li>
<li>Use native Node streams for body, on both request and response.</li>
<li>Decode content encoding (gzip&#x2F;deflate&#x2F;brotli) properly, and convert string output (such as <code>res.text()</code> and <code>res.json()</code>) to UTF-8 automatically.</li>
<li>Useful extensions such as redirect limit, response size limit, <a target="_blank" rel="noopener" href="https://github.com/node-fetch/node-fetch/blob/master/docs/ERROR-HANDLING.md">explicit errors</a> for troubleshooting.</li>
</ul>
<h2 id="Difference-from-client-side-fetch"><a href="#Difference-from-client-side-fetch" class="headerlink" title="Difference from client-side fetch"></a>Difference from client-side fetch</h2><ul>
<li>See known differences:<ul>
<li><a href="docs/v3-LIMITS.md">As of v3.x</a></li>
<li><a href="docs/v2-LIMITS.md">As of v2.x</a></li>
</ul>
</li>
<li>If you happen to use a missing feature that <code>window.fetch</code> offers, feel free to open an issue.</li>
<li>Pull requests are welcomed too!</li>
</ul>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Current stable release (<code>3.x</code>) requires at least Node.js 12.20.0.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-fetch</span><br></pre></td></tr></table></figure>

<h2 id="Loading-and-configuring-the-module"><a href="#Loading-and-configuring-the-module" class="headerlink" title="Loading and configuring the module"></a>Loading and configuring the module</h2><h3 id="ES-Modules-ESM"><a href="#ES-Modules-ESM" class="headerlink" title="ES Modules (ESM)"></a>ES Modules (ESM)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><p><code>node-fetch</code> from v3 is an ESM-only module - you are not able to import it with <code>require()</code>.</p>
<p>If you cannot switch to ESM, please use v2 which remains compatible with CommonJS. Critical bug fixes will continue to be published for v2.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-fetch@2</span><br></pre></td></tr></table></figure>

<p>Alternatively, you can use the async <code>import()</code> function from CommonJS to load <code>node-fetch</code> asynchronously:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mod.cjs</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fetch</span> = (<span class="params">...args</span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;node-fetch&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">&#123;<span class="keyword">default</span>: fetch&#125;</span>) =&gt;</span> <span class="title function_">fetch</span>(...args));</span><br></pre></td></tr></table></figure>

<h3 id="Providing-global-access"><a href="#Providing-global-access" class="headerlink" title="Providing global access"></a>Providing global access</h3><p>To use <code>fetch()</code> without importing it, you can patch the <code>global</code> object in node:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fetch-polyfill.js</span></span><br><span class="line"><span class="keyword">import</span> fetch, &#123;</span><br><span class="line">  <span class="title class_">Blob</span>,</span><br><span class="line">  blobFrom,</span><br><span class="line">  blobFromSync,</span><br><span class="line">  <span class="title class_">File</span>,</span><br><span class="line">  fileFrom,</span><br><span class="line">  fileFromSync,</span><br><span class="line">  <span class="title class_">FormData</span>,</span><br><span class="line">  <span class="title class_">Headers</span>,</span><br><span class="line">  <span class="title class_">Request</span>,</span><br><span class="line">  <span class="title class_">Response</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!globalThis.<span class="property">fetch</span>) &#123;</span><br><span class="line">  globalThis.<span class="property">fetch</span> = fetch</span><br><span class="line">  globalThis.<span class="property">Headers</span> = <span class="title class_">Headers</span></span><br><span class="line">  globalThis.<span class="property">Request</span> = <span class="title class_">Request</span></span><br><span class="line">  globalThis.<span class="property">Response</span> = <span class="title class_">Response</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./fetch-polyfill&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<h2 id="Upgrading"><a href="#Upgrading" class="headerlink" title="Upgrading"></a>Upgrading</h2><p>Using an old version of node-fetch? Check out the following files:</p>
<ul>
<li><a href="docs/v3-UPGRADE-GUIDE.md">2.x to 3.x upgrade guide</a></li>
<li><a href="docs/v2-UPGRADE-GUIDE.md">1.x to 2.x upgrade guide</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/node-fetch/node-fetch/releases">Changelog</a></li>
</ul>
<h2 id="Common-Usage"><a href="#Common-Usage" class="headerlink" title="Common Usage"></a>Common Usage</h2><p>NOTE: The documentation below is up-to-date with <code>3.x</code> releases, if you are using an older version, please check how to <a href="#upgrading">upgrade</a>.</p>
<h3 id="Plain-text-or-HTML"><a href="#Plain-text-or-HTML" class="headerlink" title="Plain text or HTML"></a>Plain text or HTML</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://github.com/&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> body = <span class="keyword">await</span> response.<span class="title function_">text</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(body);</span><br></pre></td></tr></table></figure>

<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.github.com/users/github&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br></pre></td></tr></table></figure>

<h3 id="Simple-Post"><a href="#Simple-Post" class="headerlink" title="Simple Post"></a>Simple Post</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/post&#x27;</span>, &#123;<span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="attr">body</span>: <span class="string">&#x27;a=1&#x27;</span>&#125;);</span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br></pre></td></tr></table></figure>

<h3 id="Post-with-JSON"><a href="#Post-with-JSON" class="headerlink" title="Post with JSON"></a>Post with JSON</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> body = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/post&#x27;</span>, &#123;</span><br><span class="line">	<span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">	<span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(body),</span><br><span class="line">	<span class="attr">headers</span>: &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br></pre></td></tr></table></figure>

<h3 id="Post-with-form-parameters"><a href="#Post-with-form-parameters" class="headerlink" title="Post with form parameters"></a>Post with form parameters</h3><p><code>URLSearchParams</code> is available on the global object in Node.js as of v10.0.0. See <a target="_blank" rel="noopener" href="https://nodejs.org/api/url.html#url_class_urlsearchparams">official documentation</a> for more usage methods.</p>
<p>NOTE: The <code>Content-Type</code> header is only set automatically to <code>x-www-form-urlencoded</code> when an instance of <code>URLSearchParams</code> is given as such:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>();</span><br><span class="line">params.<span class="title function_">append</span>(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/post&#x27;</span>, &#123;<span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="attr">body</span>: params&#125;);</span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br></pre></td></tr></table></figure>

<h3 id="Handling-exceptions"><a href="#Handling-exceptions" class="headerlink" title="Handling exceptions"></a>Handling exceptions</h3><p>NOTE: 3xx-5xx responses are <em>NOT</em> exceptions, and should be handled in <code>then()</code>, see the next section.</p>
<p>Wrapping the fetch function into a <code>try/catch</code> block will catch <em>all</em> exceptions, such as errors originating from node core libraries, like network errors, and operational errors which are instances of FetchError. See the <a target="_blank" rel="noopener" href="https://github.com/node-fetch/node-fetch/blob/master/docs/ERROR-HANDLING.md">error handling document</a> for more details.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://domain.invalid/&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Handling-client-and-server-errors"><a href="#Handling-client-and-server-errors" class="headerlink" title="Handling client and server errors"></a>Handling client and server errors</h3><p>It is common to create a helper function to check that the response contains no client (4xx) or server (5xx) error responses:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HTTPResponseError</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Error</span> &#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params">response</span>) &#123;</span><br><span class="line">		<span class="variable language_">super</span>(<span class="string">`HTTP Error Response: <span class="subst">$&#123;response.status&#125;</span> <span class="subst">$&#123;response.statusText&#125;</span>`</span>);</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">response</span> = response;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkStatus</span> = response =&gt; &#123;</span><br><span class="line">	<span class="keyword">if</span> (response.<span class="property">ok</span>) &#123;</span><br><span class="line">		<span class="comment">// response.status &gt;= 200 &amp;&amp; response.status &lt; 300</span></span><br><span class="line">		<span class="keyword">return</span> response;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">HTTPResponseError</span>(response);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/status/400&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="title function_">checkStatus</span>(response);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> errorBody = <span class="keyword">await</span> error.<span class="property">response</span>.<span class="title function_">text</span>();</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Error body: <span class="subst">$&#123;errorBody&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Handling-cookies"><a href="#Handling-cookies" class="headerlink" title="Handling cookies"></a>Handling cookies</h3><p>Cookies are not stored by default. However, cookies can be extracted and passed by manipulating request and response headers. See <a href="#extract-set-cookie-header">Extract Set-Cookie Header</a> for details.</p>
<h2 id="Advanced-Usage"><a href="#Advanced-Usage" class="headerlink" title="Advanced Usage"></a>Advanced Usage</h2><h3 id="Streams"><a href="#Streams" class="headerlink" title="Streams"></a>Streams</h3><p>The “Node.js way” is to use streams when possible. You can pipe <code>res.body</code> to another stream. This example uses <a target="_blank" rel="noopener" href="https://nodejs.org/api/stream.html#stream_stream_pipeline_streams_callback">stream.pipeline</a> to attach stream error handlers and wait for the download to complete.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createWriteStream&#125; <span class="keyword">from</span> <span class="string">&#x27;node:fs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;pipeline&#125; <span class="keyword">from</span> <span class="string">&#x27;node:stream&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;promisify&#125; <span class="keyword">from</span> <span class="string">&#x27;node:util&#x27;</span></span><br><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> streamPipeline = <span class="title function_">promisify</span>(pipeline);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://github.githubassets.com/images/modules/logos_page/Octocat.png&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!response.<span class="property">ok</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`unexpected response <span class="subst">$&#123;response.statusText&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> <span class="title function_">streamPipeline</span>(response.<span class="property">body</span>, <span class="title function_">createWriteStream</span>(<span class="string">&#x27;./octocat.png&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>In Node.js 14 you can also use async iterators to read <code>body</code>; however, be careful to catch<br>errors – the longer a response runs, the more likely it is to encounter an error.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/stream/3&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> chunk <span class="keyword">of</span> response.<span class="property">body</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">dir</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(chunk.<span class="title function_">toString</span>()));</span><br><span class="line">	&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">error</span>(err.<span class="property">stack</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In Node.js 12 you can also use async iterators to read <code>body</code>; however, async iterators with streams<br>did not mature until Node.js 14, so you need to do some extra work to ensure you handle errors<br>directly from the stream and wait on it response to fully close.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">read</span> = <span class="keyword">async</span> body =&gt; &#123;</span><br><span class="line">	<span class="keyword">let</span> error;</span><br><span class="line">	body.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">		error = err;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> chunk <span class="keyword">of</span> body) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">dir</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(chunk.<span class="title function_">toString</span>()));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">		body.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">			error ? <span class="title function_">reject</span>(error) : <span class="title function_">resolve</span>();</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/stream/3&#x27;</span>);</span><br><span class="line">	<span class="keyword">await</span> <span class="title function_">read</span>(response.<span class="property">body</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">error</span>(err.<span class="property">stack</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Accessing-Headers-and-other-Metadata"><a href="#Accessing-Headers-and-other-Metadata" class="headerlink" title="Accessing Headers and other Metadata"></a>Accessing Headers and other Metadata</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://github.com/&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">ok</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">status</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">statusText</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">headers</span>.<span class="title function_">raw</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="Extract-Set-Cookie-Header"><a href="#Extract-Set-Cookie-Header" class="headerlink" title="Extract Set-Cookie Header"></a>Extract Set-Cookie Header</h3><p>Unlike browsers, you can access raw <code>Set-Cookie</code> headers manually using <code>Headers.raw()</code>. This is a <code>node-fetch</code> only API.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Returns an array of values, instead of a string of comma-separated values</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">headers</span>.<span class="title function_">raw</span>()[<span class="string">&#x27;set-cookie&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="Post-data-using-a-file"><a href="#Post-data-using-a-file" class="headerlink" title="Post data using a file"></a>Post data using a file</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch, &#123;</span><br><span class="line">  <span class="title class_">Blob</span>,</span><br><span class="line">  blobFrom,</span><br><span class="line">  blobFromSync,</span><br><span class="line">  <span class="title class_">File</span>,</span><br><span class="line">  fileFrom,</span><br><span class="line">  fileFromSync,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mimetype = <span class="string">&#x27;text/plain&#x27;</span></span><br><span class="line"><span class="keyword">const</span> blob = <span class="title function_">fileFromSync</span>(<span class="string">&#x27;./input.txt&#x27;</span>, mimetype)</span><br><span class="line"><span class="keyword">const</span> url = <span class="string">&#x27;https://httpbin.org/post&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, &#123; <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="attr">body</span>: blob &#125;)</span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br></pre></td></tr></table></figure>

<p>node-fetch comes with a spec-compliant <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/FormData">FormData</a> implementations for posting<br>multipart&#x2F;form-data payloads</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch, &#123; <span class="title class_">FormData</span>, <span class="title class_">File</span>, fileFrom &#125; <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> httpbin = <span class="string">&#x27;https://httpbin.org/post&#x27;</span></span><br><span class="line"><span class="keyword">const</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line"><span class="keyword">const</span> binary = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>([ <span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span> ])</span><br><span class="line"><span class="keyword">const</span> abc = <span class="keyword">new</span> <span class="title class_">File</span>([binary], <span class="string">&#x27;abc.txt&#x27;</span>, &#123; <span class="attr">type</span>: <span class="string">&#x27;text/plain&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">formData.<span class="title function_">set</span>(<span class="string">&#x27;greeting&#x27;</span>, <span class="string">&#x27;Hello, world!&#x27;</span>)</span><br><span class="line">formData.<span class="title function_">set</span>(<span class="string">&#x27;file-upload&#x27;</span>, abc, <span class="string">&#x27;new name.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(httpbin, &#123; <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="attr">body</span>: formData &#125;)</span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br></pre></td></tr></table></figure>

<p>If you for some reason need to post a stream coming from any arbitrary place,<br>then you can append a <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Blob">Blob</a> or a <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/File">File</a> look-a-like item.</p>
<p>The minimum requirement is that it has:</p>
<ol>
<li>A <code>Symbol.toStringTag</code> getter or property that is either <code>Blob</code> or <code>File</code></li>
<li>A known size.</li>
<li>And either a <code>stream()</code> method or a <code>arrayBuffer()</code> method that returns a ArrayBuffer.</li>
</ol>
<p>The <code>stream()</code> must return any async iterable object as long as it yields Uint8Array (or Buffer)<br>so Node.Readable streams and whatwg streams works just fine.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;upload&#x27;</span>, &#123;</span><br><span class="line">	[<span class="title class_">Symbol</span>.<span class="property">toStringTag</span>]: <span class="string">&#x27;Blob&#x27;</span>,</span><br><span class="line">	<span class="attr">size</span>: <span class="number">3</span>,</span><br><span class="line">  *<span class="title function_">stream</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">new</span> <span class="title class_">Uint8Array</span>([<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>])</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="title function_">arrayBuffer</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Uint8Array</span>([<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>]).<span class="property">buffer</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;, <span class="string">&#x27;abc.txt&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Request-cancellation-with-AbortSignal"><a href="#Request-cancellation-with-AbortSignal" class="headerlink" title="Request cancellation with AbortSignal"></a>Request cancellation with AbortSignal</h3><p>You may cancel requests with <code>AbortController</code>. A suggested implementation is <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/abort-controller"><code>abort-controller</code></a>.</p>
<p>An example of timing out a request after 150ms could be achieved as the following:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch, &#123; <span class="title class_">AbortError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AbortController was added in node v14.17.0 globally</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AbortController</span> = globalThis.<span class="property">AbortController</span> || <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">&#x27;abort-controller&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span><br><span class="line"><span class="keyword">const</span> timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">	controller.<span class="title function_">abort</span>();</span><br><span class="line">&#125;, <span class="number">150</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com&#x27;</span>, &#123;<span class="attr">signal</span>: controller.<span class="property">signal</span>&#125;);</span><br><span class="line">	<span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">	<span class="keyword">if</span> (error <span class="keyword">instanceof</span> <span class="title class_">AbortError</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;request was aborted&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">	<span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>See <a target="_blank" rel="noopener" href="https://github.com/node-fetch/node-fetch/blob/master/test/">test cases</a> for more examples.</p>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="fetch-url-options"><a href="#fetch-url-options" class="headerlink" title="fetch(url[, options])"></a>fetch(url[, options])</h3><ul>
<li><code>url</code> A string representing the URL for fetching</li>
<li><code>options</code> <a href="#fetch-options">Options</a> for the HTTP(S) request</li>
<li>Returns: <code>Promise&lt;<a href="#class-response">Response</a>&gt;</code></li>
</ul>
<p>Perform an HTTP(S) fetch.</p>
<p><code>url</code> should be an absolute URL, such as <code>https://example.com/</code>. A path-relative URL (<code>/file/under/root</code>) or protocol-relative URL (<code>//can-be-http-or-https.com/</code>) will result in a rejected <code>Promise</code>.</p>
<p><a id="fetch-options"></a></p>
<h3 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h3><p>The default values are shown after each option key.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="comment">// These properties are part of the Fetch Standard</span></span><br><span class="line">	<span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">	<span class="attr">headers</span>: &#123;&#125;,            <span class="comment">// Request headers. format is the identical to that accepted by the Headers constructor (see below)</span></span><br><span class="line">	<span class="attr">body</span>: <span class="literal">null</span>,             <span class="comment">// Request body. can be null, or a Node.js Readable stream</span></span><br><span class="line">	<span class="attr">redirect</span>: <span class="string">&#x27;follow&#x27;</span>,     <span class="comment">// Set to `manual` to extract redirect headers, `error` to reject redirect</span></span><br><span class="line">	<span class="attr">signal</span>: <span class="literal">null</span>,           <span class="comment">// Pass an instance of AbortSignal to optionally abort requests</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// The following properties are node-fetch extensions</span></span><br><span class="line">	<span class="attr">follow</span>: <span class="number">20</span>,             <span class="comment">// maximum redirect count. 0 to not follow redirect</span></span><br><span class="line">	<span class="attr">compress</span>: <span class="literal">true</span>,         <span class="comment">// support gzip/deflate content encoding. false to disable</span></span><br><span class="line">	<span class="attr">size</span>: <span class="number">0</span>,                <span class="comment">// maximum response body size in bytes. 0 to disable</span></span><br><span class="line">	<span class="attr">agent</span>: <span class="literal">null</span>,            <span class="comment">// http(s).Agent instance or function that returns an instance (see below)</span></span><br><span class="line">	<span class="attr">highWaterMark</span>: <span class="number">16384</span>,   <span class="comment">// the maximum number of bytes to store in the internal buffer before ceasing to read from the underlying resource.</span></span><br><span class="line">	<span class="attr">insecureHTTPParser</span>: <span class="literal">false</span>	<span class="comment">// Use an insecure HTTP parser that accepts invalid HTTP headers when `true`.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Default-Headers"><a href="#Default-Headers" class="headerlink" title="Default Headers"></a>Default Headers</h4><p>If no values are set, the following request headers will be sent automatically:</p>
<table>
<thead>
<tr>
<th>Header</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td><code>Accept-Encoding</code></td>
<td><code>gzip, deflate, br</code> (when <code>options.compress === true</code>)</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td><code>*/*</code></td>
</tr>
<tr>
<td><code>Content-Length</code></td>
<td><em>(automatically calculated, if possible)</em></td>
</tr>
<tr>
<td><code>Host</code></td>
<td><em>(host and port information from the target URI)</em></td>
</tr>
<tr>
<td><code>Transfer-Encoding</code></td>
<td><code>chunked</code> <em>(when <code>req.body</code> is a stream)</em></td>
</tr>
<tr>
<td><code>User-Agent</code></td>
<td><code>node-fetch</code></td>
</tr>
</tbody></table>
<p>Note: when <code>body</code> is a <code>Stream</code>, <code>Content-Length</code> is not set automatically.</p>
<h4 id="Custom-Agent"><a href="#Custom-Agent" class="headerlink" title="Custom Agent"></a>Custom Agent</h4><p>The <code>agent</code> option allows you to specify networking related options which are out of the scope of Fetch, including and not limited to the following:</p>
<ul>
<li>Support self-signed certificate</li>
<li>Use only IPv4 or IPv6</li>
<li>Custom DNS Lookup</li>
</ul>
<p>See <a target="_blank" rel="noopener" href="https://nodejs.org/api/http.html#http_new_agent_options"><code>http.Agent</code></a> for more information.</p>
<p>If no agent is specified, the default agent provided by Node.js is used. Note that <a target="_blank" rel="noopener" href="https://github.com/nodejs/node/blob/4267b92604ad78584244488e7f7508a690cb80d0/lib/_http_agent.js#L564">this changed in Node.js 19</a> to have <code>keepalive</code> true by default. If you wish to enable <code>keepalive</code> in an earlier version of Node.js, you can override the agent as per the following code sample. </p>
<p>In addition, the <code>agent</code> option accepts a function that returns <code>http</code>(s)<code>.Agent</code> instance given current <a target="_blank" rel="noopener" href="https://nodejs.org/api/url.html">URL</a>, this is useful during a redirection chain across HTTP and HTTPS protocol.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;node:http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> https <span class="keyword">from</span> <span class="string">&#x27;node:https&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> httpAgent = <span class="keyword">new</span> http.<span class="title class_">Agent</span>(&#123;</span><br><span class="line">	<span class="attr">keepAlive</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> httpsAgent = <span class="keyword">new</span> https.<span class="title class_">Agent</span>(&#123;</span><br><span class="line">	<span class="attr">keepAlive</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">	<span class="attr">agent</span>: <span class="keyword">function</span>(<span class="params">_parsedURL</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (_parsedURL.<span class="property">protocol</span> == <span class="string">&#x27;http:&#x27;</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> httpAgent;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> httpsAgent;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a id="custom-highWaterMark"></a></p>
<h4 id="Custom-highWaterMark"><a href="#Custom-highWaterMark" class="headerlink" title="Custom highWaterMark"></a>Custom highWaterMark</h4><p>Stream on Node.js have a smaller internal buffer size (16kB, aka <code>highWaterMark</code>) from client-side browsers (&gt;1MB, not consistent across browsers). Because of that, when you are writing an isomorphic app and using <code>res.clone()</code>, it will hang with large response in Node.</p>
<p>The recommended way to fix this problem is to resolve cloned response in parallel:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> r1 = response.<span class="title function_">clone</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> results = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([response.<span class="title function_">json</span>(), r1.<span class="title function_">text</span>()]);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(results[<span class="number">0</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(results[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>

<p>If for some reason you don’t like the solution above, since <code>3.x</code> you are able to modify the <code>highWaterMark</code> option:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com&#x27;</span>, &#123;</span><br><span class="line">	<span class="comment">// About 1MB</span></span><br><span class="line">	<span class="attr">highWaterMark</span>: <span class="number">1024</span> * <span class="number">1024</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = <span class="keyword">await</span> res.<span class="title function_">clone</span>().<span class="title function_">arrayBuffer</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(result);</span><br></pre></td></tr></table></figure>

<h4 id="Insecure-HTTP-Parser"><a href="#Insecure-HTTP-Parser" class="headerlink" title="Insecure HTTP Parser"></a>Insecure HTTP Parser</h4><p>Passed through to the <code>insecureHTTPParser</code> option on http(s).request. See <a target="_blank" rel="noopener" href="https://nodejs.org/api/http.html#http_http_request_url_options_callback"><code>http.request</code></a> for more information.</p>
<h4 id="Manual-Redirect"><a href="#Manual-Redirect" class="headerlink" title="Manual Redirect"></a>Manual Redirect</h4><p>The <code>redirect: &#39;manual&#39;</code> option for node-fetch is different from the browser &amp; specification, which<br>results in an <a target="_blank" rel="noopener" href="https://fetch.spec.whatwg.org/#concept-filtered-response-opaque-redirect">opaque-redirect filtered response</a>.<br>node-fetch gives you the typical <a target="_blank" rel="noopener" href="https://fetch.spec.whatwg.org/#concept-filtered-response-basic">basic filtered response</a> instead.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/status/301&#x27;</span>, &#123; <span class="attr">redirect</span>: <span class="string">&#x27;manual&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">301</span> || response.<span class="property">status</span> === <span class="number">302</span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> locationURL = <span class="keyword">new</span> <span class="title function_">URL</span>(response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;location&#x27;</span>), response.<span class="property">url</span>);</span><br><span class="line">	<span class="keyword">const</span> response2 = <span class="keyword">await</span> <span class="title function_">fetch</span>(locationURL, &#123; <span class="attr">redirect</span>: <span class="string">&#x27;manual&#x27;</span> &#125;);</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">dir</span>(response2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a id="class-request"></a></p>
<h3 id="Class-Request"><a href="#Class-Request" class="headerlink" title="Class: Request"></a>Class: Request</h3><p>An HTTP(S) request containing information about URL, method, headers, and the body. This class implements the <a href="#iface-body">Body</a> interface.</p>
<p>Due to the nature of Node.js, the following properties are not implemented at this moment:</p>
<ul>
<li><code>type</code></li>
<li><code>destination</code></li>
<li><code>mode</code></li>
<li><code>credentials</code></li>
<li><code>cache</code></li>
<li><code>integrity</code></li>
<li><code>keepalive</code></li>
</ul>
<p>The following node-fetch extension properties are provided:</p>
<ul>
<li><code>follow</code></li>
<li><code>compress</code></li>
<li><code>counter</code></li>
<li><code>agent</code></li>
<li><code>highWaterMark</code></li>
</ul>
<p>See <a href="#fetch-options">options</a> for exact meaning of these extensions.</p>
<h4 id="new-Request-input-options"><a href="#new-Request-input-options" class="headerlink" title="new Request(input[, options])"></a>new Request(input[, options])</h4><p><small><em>(spec-compliant)</em></small></p>
<ul>
<li><code>input</code> A string representing a URL, or another <code>Request</code> (which will be cloned)</li>
<li><code>options</code> <a href="#fetch-options">Options</a> for the HTTP(S) request</li>
</ul>
<p>Constructs a new <code>Request</code> object. The constructor is identical to that in the <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request">browser</a>.</p>
<p>In most cases, directly <code>fetch(url, options)</code> is simpler than creating a <code>Request</code> object.</p>
<p><a id="class-response"></a></p>
<h3 id="Class-Response"><a href="#Class-Response" class="headerlink" title="Class: Response"></a>Class: Response</h3><p>An HTTP(S) response. This class implements the <a href="#iface-body">Body</a> interface.</p>
<p>The following properties are not implemented in node-fetch at this moment:</p>
<ul>
<li><code>trailer</code></li>
</ul>
<h4 id="new-Response-body-options"><a href="#new-Response-body-options" class="headerlink" title="new Response([body[, options]])"></a>new Response([body[, options]])</h4><p><small><em>(spec-compliant)</em></small></p>
<ul>
<li><code>body</code> A <code>String</code> or <a target="_blank" rel="noopener" href="https://nodejs.org/api/stream.html#stream_readable_streams"><code>Readable</code> stream</a></li>
<li><code>options</code> A <a target="_blank" rel="noopener" href="https://fetch.spec.whatwg.org/#responseinit"><code>ResponseInit</code></a> options dictionary</li>
</ul>
<p>Constructs a new <code>Response</code> object. The constructor is identical to that in the <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Response/Response">browser</a>.</p>
<p>Because Node.js does not implement service workers (for which this class was designed), one rarely has to construct a <code>Response</code> directly.</p>
<h4 id="response-ok"><a href="#response-ok" class="headerlink" title="response.ok"></a>response.ok</h4><p><small><em>(spec-compliant)</em></small></p>
<p>Convenience property representing if the request ended normally. Will evaluate to true if the response status was greater than or equal to 200 but smaller than 300.</p>
<h4 id="response-redirected"><a href="#response-redirected" class="headerlink" title="response.redirected"></a>response.redirected</h4><p><small><em>(spec-compliant)</em></small></p>
<p>Convenience property representing if the request has been redirected at least once. Will evaluate to true if the internal redirect counter is greater than 0.</p>
<h4 id="response-type"><a href="#response-type" class="headerlink" title="response.type"></a>response.type</h4><p><small><em>(deviation from spec)</em></small></p>
<p>Convenience property representing the response’s type. node-fetch only supports <code>&#39;default&#39;</code> and <code>&#39;error&#39;</code> and does not make use of <a target="_blank" rel="noopener" href="https://fetch.spec.whatwg.org/#concept-filtered-response">filtered responses</a>.</p>
<p><a id="class-headers"></a></p>
<h3 id="Class-Headers"><a href="#Class-Headers" class="headerlink" title="Class: Headers"></a>Class: Headers</h3><p>This class allows manipulating and iterating over a set of HTTP headers. All methods specified in the <a target="_blank" rel="noopener" href="https://fetch.spec.whatwg.org/">Fetch Standard</a> are implemented.</p>
<h4 id="new-Headers-init"><a href="#new-Headers-init" class="headerlink" title="new Headers([init])"></a>new Headers([init])</h4><p><small><em>(spec-compliant)</em></small></p>
<ul>
<li><code>init</code> Optional argument to pre-fill the <code>Headers</code> object</li>
</ul>
<p>Construct a new <code>Headers</code> object. <code>init</code> can be either <code>null</code>, a <code>Headers</code> object, an key-value map object or any iterable object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example adapted from https://fetch.spec.whatwg.org/#example-headers-class</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Headers</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> meta = &#123;</span><br><span class="line">	<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/xml&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(meta);</span><br><span class="line"></span><br><span class="line"><span class="comment">// The above is equivalent to</span></span><br><span class="line"><span class="keyword">const</span> meta = [[<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/xml&#x27;</span>]];</span><br><span class="line"><span class="keyword">const</span> headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(meta);</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can in fact use any iterable objects, like a Map or even another Headers</span></span><br><span class="line"><span class="keyword">const</span> meta = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">meta.<span class="title function_">set</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/xml&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(meta);</span><br><span class="line"><span class="keyword">const</span> copyOfHeaders = <span class="keyword">new</span> <span class="title class_">Headers</span>(headers);</span><br></pre></td></tr></table></figure>

<p><a id="iface-body"></a></p>
<h3 id="Interface-Body"><a href="#Interface-Body" class="headerlink" title="Interface: Body"></a>Interface: Body</h3><p><code>Body</code> is an abstract interface with methods that are applicable to both <code>Request</code> and <code>Response</code> classes.</p>
<h4 id="body-body"><a href="#body-body" class="headerlink" title="body.body"></a>body.body</h4><p><small><em>(deviation from spec)</em></small></p>
<ul>
<li>Node.js <a target="_blank" rel="noopener" href="https://nodejs.org/api/stream.html#stream_readable_streams"><code>Readable</code> stream</a></li>
</ul>
<p>Data are encapsulated in the <code>Body</code> object. Note that while the <a target="_blank" rel="noopener" href="https://fetch.spec.whatwg.org/">Fetch Standard</a> requires the property to always be a WHATWG <code>ReadableStream</code>, in node-fetch it is a Node.js <a target="_blank" rel="noopener" href="https://nodejs.org/api/stream.html#stream_readable_streams"><code>Readable</code> stream</a>.</p>
<h4 id="body-bodyUsed"><a href="#body-bodyUsed" class="headerlink" title="body.bodyUsed"></a>body.bodyUsed</h4><p><small><em>(spec-compliant)</em></small></p>
<ul>
<li><code>Boolean</code></li>
</ul>
<p>A boolean property for if this body has been consumed. Per the specs, a consumed body cannot be used again.</p>
<h4 id="body-arrayBuffer"><a href="#body-arrayBuffer" class="headerlink" title="body.arrayBuffer()"></a>body.arrayBuffer()</h4><h4 id="body-formData"><a href="#body-formData" class="headerlink" title="body.formData()"></a>body.formData()</h4><h4 id="body-blob"><a href="#body-blob" class="headerlink" title="body.blob()"></a>body.blob()</h4><h4 id="body-json"><a href="#body-json" class="headerlink" title="body.json()"></a>body.json()</h4><h4 id="body-text"><a href="#body-text" class="headerlink" title="body.text()"></a>body.text()</h4><p><code>fetch</code> comes with methods to parse <code>multipart/form-data</code> payloads as well as<br><code>x-www-form-urlencoded</code> bodies using <code>.formData()</code> this comes from the idea that<br>Service Worker can intercept such messages before it’s sent to the server to<br>alter them. This is useful for anybody building a server so you can use it to<br>parse &amp; consume payloads.</p>
<details>
<summary>Code example</summary>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;node:http&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Response</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;node-fetch&#x27;</span></span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> formData = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Response</span>(req, &#123;</span><br><span class="line">    <span class="attr">headers</span>: req.<span class="property">headers</span> <span class="comment">// Pass along the boundary value</span></span><br><span class="line">  &#125;).<span class="title function_">formData</span>()</span><br><span class="line">  <span class="keyword">const</span> allFields = [...formData]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> file = formData.<span class="title function_">get</span>(<span class="string">&#x27;uploaded-files&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> arrayBuffer = <span class="keyword">await</span> file.<span class="title function_">arrayBuffer</span>()</span><br><span class="line">  <span class="keyword">const</span> text = <span class="keyword">await</span> file.<span class="title function_">text</span>()</span><br><span class="line">  <span class="keyword">const</span> whatwgReadableStream = file.<span class="title function_">stream</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// other was to consume the request could be to do:</span></span><br><span class="line">  <span class="keyword">const</span> json = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Response</span>(req).<span class="title function_">json</span>()</span><br><span class="line">  <span class="keyword">const</span> text = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Response</span>(req).<span class="title function_">text</span>()</span><br><span class="line">  <span class="keyword">const</span> arrayBuffer = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Response</span>(req).<span class="title function_">arrayBuffer</span>()</span><br><span class="line">  <span class="keyword">const</span> blob = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Response</span>(req, &#123;</span><br><span class="line">    <span class="attr">headers</span>: req.<span class="property">headers</span> <span class="comment">// So that `type` inherits `Content-Type`</span></span><br><span class="line">  &#125;.<span class="title function_">blob</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</details>

<p><a id="class-fetcherror"></a></p>
<h3 id="Class-FetchError"><a href="#Class-FetchError" class="headerlink" title="Class: FetchError"></a>Class: FetchError</h3><p><small><em>(node-fetch extension)</em></small></p>
<p>An operational error in the fetching process. See <a target="_blank" rel="noopener" href="https://github.com/node-fetch/node-fetch/blob/master/docs/ERROR-HANDLING.md">ERROR-HANDLING.md</a> for more info.</p>
<p><a id="class-aborterror"></a></p>
<h3 id="Class-AbortError"><a href="#Class-AbortError" class="headerlink" title="Class: AbortError"></a>Class: AbortError</h3><p><small><em>(node-fetch extension)</em></small></p>
<p>An Error thrown when the request is aborted in response to an <code>AbortSignal</code>‘s <code>abort</code> event. It has a <code>name</code> property of <code>AbortError</code>. See <a target="_blank" rel="noopener" href="https://github.com/node-fetch/node-fetch/blob/master/docs/ERROR-HANDLING.md">ERROR-HANDLING.MD</a> for more info.</p>
<h2 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h2><p><strong>Since <code>3.x</code> types are bundled with <code>node-fetch</code>, so you don’t need to install any additional packages.</strong></p>
<p>For older versions please use the type definitions from <a target="_blank" rel="noopener" href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a>:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @types/node-fetch@2.x</span><br></pre></td></tr></table></figure>

<h2 id="Acknowledgement"><a href="#Acknowledgement" class="headerlink" title="Acknowledgement"></a>Acknowledgement</h2><p>Thanks to <a target="_blank" rel="noopener" href="https://github.com/github/fetch">github&#x2F;fetch</a> for providing a solid implementation reference.</p>
<h2 id="Team"><a href="#Team" class="headerlink" title="Team"></a>Team</h2><table>
<thead>
<tr>
<th><a target="_blank" rel="noopener" href="https://github.com/bitinn"><img src="https://github.com/bitinn.png?size=100" alt="David Frank" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a></th>
<th><a target="_blank" rel="noopener" href="https://github.com/jimmywarting"><img src="https://github.com/jimmywarting.png?size=100" alt="Jimmy Wärting" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a></th>
<th><a target="_blank" rel="noopener" href="https://github.com/xxczaki"><img src="https://github.com/xxczaki.png?size=100" alt="Antoni Kepinski" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a></th>
<th><a target="_blank" rel="noopener" href="https://github.com/Richienb"><img src="https://github.com/Richienb.png?size=100" alt="Richie Bendall" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a></th>
<th><a target="_blank" rel="noopener" href="https://github.com/gr2m"><img src="https://github.com/gr2m.png?size=100" alt="Gregor Martynus" loading="lazy" onerror='this.onerror=null;this.src="/daydoc/img/404.jpg"'></a></th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://bitinn.net/">David Frank</a></td>
<td><a target="_blank" rel="noopener" href="https://jimmy.warting.se/">Jimmy Wärting</a></td>
<td><a target="_blank" rel="noopener" href="https://kepinski.ch/">Antoni Kepinski</a></td>
<td><a target="_blank" rel="noopener" href="https://www.richie-bendall.ml/">Richie Bendall</a></td>
<td><a target="_blank" rel="noopener" href="https://twitter.com/gr2m">Gregor Martynus</a></td>
</tr>
</tbody></table>
<h6 id="Former"><a href="#Former" class="headerlink" title="Former"></a>Former</h6><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/timothygu">Timothy Gu</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/jkantr">Jared Kantrowitz</a></li>
</ul>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p><a href="LICENSE.md">MIT</a></p>

</article>
    
    

</div>
<div class="trm-post-next-prev row">
    <div class="col-lg-12">
        <!-- title -->
        <h5 class="trm-title-with-divider">
            其他文章
            <span data-number="02"></span>
        </h5>
    </div>
    
        <div class="col-lg-6">
    <div class="trm-blog-card trm-scroll-animation">
        <a href="/daydoc/2024/01/06/%E7%8E%8B%E9%98%81/test/node_modules/node-fetch/LICENSE/" class="trm-cover-frame trm-anima-link">
            
            
                <div class="trm-cover-img" data-random-img></div>
            
        </a>
        
        <div class="trm-card-descr">
            <div class="trm-label trm-category trm-mb-20">
                <a href=" #.">
                    未分类
                </a>
            </div>
            <h5>
                <a href="/daydoc/2024/01/06/%E7%8E%8B%E9%98%81/test/node_modules/node-fetch/LICENSE/" class="trm-anima-link">
                    
                </a>
            </h5>
            <div class="trm-divider trm-mb-20 trm-mt-20"></div>
            <ul class="trm-card-data trm-label">
                <li>24/01/06</li>
                <li>14:44</li>
                
                
            </ul>
        </div>
    </div>
</div>
    
    
        <div class="col-lg-6">
    <div class="trm-blog-card trm-scroll-animation">
        <a href="/daydoc/2024/01/06/%E7%8E%8B%E9%98%81/test/node_modules/web-streams-polyfill/README/" class="trm-cover-frame trm-anima-link">
            
            
                <div class="trm-cover-img" data-random-img></div>
            
        </a>
        
        <div class="trm-card-descr">
            <div class="trm-label trm-category trm-mb-20">
                <a href=" #.">
                    未分类
                </a>
            </div>
            <h5>
                <a href="/daydoc/2024/01/06/%E7%8E%8B%E9%98%81/test/node_modules/web-streams-polyfill/README/" class="trm-anima-link">
                    
                </a>
            </h5>
            <div class="trm-divider trm-mb-20 trm-mt-20"></div>
            <ul class="trm-card-data trm-label">
                <li>24/01/06</li>
                <li>14:44</li>
                
                
            </ul>
        </div>
    </div>
</div>
    
</div>

    



                    <div class="trm-divider footer-divider"></div>

                    <!-- footer -->
                    <footer class="trm-scroll-animation">

    

    

    
        <div class="trm-footer-item">
            <span>
                由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v6.3.0
            </span>
            <span class="footer-separator" data-separator=" | "></span>
            <span> 
                主题 - 
                <a rel="noopener" href='https://github.com/MaLuns/hexo-theme-async' target='_blank'>Async</a>
                v2.1.6
            </span>
        </div>
      

     

     
</footer>
 
                    <!-- footer end -->

                </div>
            </div>
        </div>
    </div>
</div>
            <!-- body end -->

            

    <div id="post-toc" class="trm-post-toc">
      <div class="trm-post-toc-header">
        目录导航
				<span id="post-toc-top">
					置顶
				</span>
      </div>
      <div class="trm-post-toc-content">
        <ol class="trm-toc"><li class="trm-toc-item trm-toc-level-2" title="Motivation"><a rel="nofollow" class="trm-toc-link" href="#Motivation"><span class="trm-toc-number">1.</span> <span class="trm-toc-text">Motivation</span></a></li><li class="trm-toc-item trm-toc-level-2" title="Features"><a rel="nofollow" class="trm-toc-link" href="#Features"><span class="trm-toc-number">2.</span> <span class="trm-toc-text">Features</span></a></li><li class="trm-toc-item trm-toc-level-2" title="Difference from client-side fetch"><a rel="nofollow" class="trm-toc-link" href="#Difference-from-client-side-fetch"><span class="trm-toc-number">3.</span> <span class="trm-toc-text">Difference from client-side fetch</span></a></li><li class="trm-toc-item trm-toc-level-2" title="Installation"><a rel="nofollow" class="trm-toc-link" href="#Installation"><span class="trm-toc-number">4.</span> <span class="trm-toc-text">Installation</span></a></li><li class="trm-toc-item trm-toc-level-2" title="Loading and configuring the module"><a rel="nofollow" class="trm-toc-link" href="#Loading-and-configuring-the-module"><span class="trm-toc-number">5.</span> <span class="trm-toc-text">Loading and configuring the module</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="ES Modules (ESM)"><a rel="nofollow" class="trm-toc-link" href="#ES-Modules-ESM"><span class="trm-toc-number">5.1.</span> <span class="trm-toc-text">ES Modules (ESM)</span></a></li><li class="trm-toc-item trm-toc-level-3" title="CommonJS"><a rel="nofollow" class="trm-toc-link" href="#CommonJS"><span class="trm-toc-number">5.2.</span> <span class="trm-toc-text">CommonJS</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Providing global access"><a rel="nofollow" class="trm-toc-link" href="#Providing-global-access"><span class="trm-toc-number">5.3.</span> <span class="trm-toc-text">Providing global access</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="Upgrading"><a rel="nofollow" class="trm-toc-link" href="#Upgrading"><span class="trm-toc-number">6.</span> <span class="trm-toc-text">Upgrading</span></a></li><li class="trm-toc-item trm-toc-level-2" title="Common Usage"><a rel="nofollow" class="trm-toc-link" href="#Common-Usage"><span class="trm-toc-number">7.</span> <span class="trm-toc-text">Common Usage</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="Plain text or HTML"><a rel="nofollow" class="trm-toc-link" href="#Plain-text-or-HTML"><span class="trm-toc-number">7.1.</span> <span class="trm-toc-text">Plain text or HTML</span></a></li><li class="trm-toc-item trm-toc-level-3" title="JSON"><a rel="nofollow" class="trm-toc-link" href="#JSON"><span class="trm-toc-number">7.2.</span> <span class="trm-toc-text">JSON</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Simple Post"><a rel="nofollow" class="trm-toc-link" href="#Simple-Post"><span class="trm-toc-number">7.3.</span> <span class="trm-toc-text">Simple Post</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Post with JSON"><a rel="nofollow" class="trm-toc-link" href="#Post-with-JSON"><span class="trm-toc-number">7.4.</span> <span class="trm-toc-text">Post with JSON</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Post with form parameters"><a rel="nofollow" class="trm-toc-link" href="#Post-with-form-parameters"><span class="trm-toc-number">7.5.</span> <span class="trm-toc-text">Post with form parameters</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Handling exceptions"><a rel="nofollow" class="trm-toc-link" href="#Handling-exceptions"><span class="trm-toc-number">7.6.</span> <span class="trm-toc-text">Handling exceptions</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Handling client and server errors"><a rel="nofollow" class="trm-toc-link" href="#Handling-client-and-server-errors"><span class="trm-toc-number">7.7.</span> <span class="trm-toc-text">Handling client and server errors</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Handling cookies"><a rel="nofollow" class="trm-toc-link" href="#Handling-cookies"><span class="trm-toc-number">7.8.</span> <span class="trm-toc-text">Handling cookies</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="Advanced Usage"><a rel="nofollow" class="trm-toc-link" href="#Advanced-Usage"><span class="trm-toc-number">8.</span> <span class="trm-toc-text">Advanced Usage</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="Streams"><a rel="nofollow" class="trm-toc-link" href="#Streams"><span class="trm-toc-number">8.1.</span> <span class="trm-toc-text">Streams</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Accessing Headers and other Metadata"><a rel="nofollow" class="trm-toc-link" href="#Accessing-Headers-and-other-Metadata"><span class="trm-toc-number">8.2.</span> <span class="trm-toc-text">Accessing Headers and other Metadata</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Extract Set-Cookie Header"><a rel="nofollow" class="trm-toc-link" href="#Extract-Set-Cookie-Header"><span class="trm-toc-number">8.3.</span> <span class="trm-toc-text">Extract Set-Cookie Header</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Post data using a file"><a rel="nofollow" class="trm-toc-link" href="#Post-data-using-a-file"><span class="trm-toc-number">8.4.</span> <span class="trm-toc-text">Post data using a file</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Request cancellation with AbortSignal"><a rel="nofollow" class="trm-toc-link" href="#Request-cancellation-with-AbortSignal"><span class="trm-toc-number">8.5.</span> <span class="trm-toc-text">Request cancellation with AbortSignal</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="API"><a rel="nofollow" class="trm-toc-link" href="#API"><span class="trm-toc-number">9.</span> <span class="trm-toc-text">API</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="fetch(url[, options])"><a rel="nofollow" class="trm-toc-link" href="#fetch-url-options"><span class="trm-toc-number">9.1.</span> <span class="trm-toc-text">fetch(url[, options])</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Options"><a rel="nofollow" class="trm-toc-link" href="#Options"><span class="trm-toc-number">9.2.</span> <span class="trm-toc-text">Options</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-4" title="Default Headers"><a rel="nofollow" class="trm-toc-link" href="#Default-Headers"><span class="trm-toc-number">9.2.1.</span> <span class="trm-toc-text">Default Headers</span></a></li><li class="trm-toc-item trm-toc-level-4" title="Custom Agent"><a rel="nofollow" class="trm-toc-link" href="#Custom-Agent"><span class="trm-toc-number">9.2.2.</span> <span class="trm-toc-text">Custom Agent</span></a></li><li class="trm-toc-item trm-toc-level-4" title="Custom highWaterMark"><a rel="nofollow" class="trm-toc-link" href="#Custom-highWaterMark"><span class="trm-toc-number">9.2.3.</span> <span class="trm-toc-text">Custom highWaterMark</span></a></li><li class="trm-toc-item trm-toc-level-4" title="Insecure HTTP Parser"><a rel="nofollow" class="trm-toc-link" href="#Insecure-HTTP-Parser"><span class="trm-toc-number">9.2.4.</span> <span class="trm-toc-text">Insecure HTTP Parser</span></a></li><li class="trm-toc-item trm-toc-level-4" title="Manual Redirect"><a rel="nofollow" class="trm-toc-link" href="#Manual-Redirect"><span class="trm-toc-number">9.2.5.</span> <span class="trm-toc-text">Manual Redirect</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-3" title="Class: Request"><a rel="nofollow" class="trm-toc-link" href="#Class-Request"><span class="trm-toc-number">9.3.</span> <span class="trm-toc-text">Class: Request</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-4" title="new Request(input[, options])"><a rel="nofollow" class="trm-toc-link" href="#new-Request-input-options"><span class="trm-toc-number">9.3.1.</span> <span class="trm-toc-text">new Request(input[, options])</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-3" title="Class: Response"><a rel="nofollow" class="trm-toc-link" href="#Class-Response"><span class="trm-toc-number">9.4.</span> <span class="trm-toc-text">Class: Response</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-4" title="new Response([body[, options]])"><a rel="nofollow" class="trm-toc-link" href="#new-Response-body-options"><span class="trm-toc-number">9.4.1.</span> <span class="trm-toc-text">new Response([body[, options]])</span></a></li><li class="trm-toc-item trm-toc-level-4" title="response.ok"><a rel="nofollow" class="trm-toc-link" href="#response-ok"><span class="trm-toc-number">9.4.2.</span> <span class="trm-toc-text">response.ok</span></a></li><li class="trm-toc-item trm-toc-level-4" title="response.redirected"><a rel="nofollow" class="trm-toc-link" href="#response-redirected"><span class="trm-toc-number">9.4.3.</span> <span class="trm-toc-text">response.redirected</span></a></li><li class="trm-toc-item trm-toc-level-4" title="response.type"><a rel="nofollow" class="trm-toc-link" href="#response-type"><span class="trm-toc-number">9.4.4.</span> <span class="trm-toc-text">response.type</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-3" title="Class: Headers"><a rel="nofollow" class="trm-toc-link" href="#Class-Headers"><span class="trm-toc-number">9.5.</span> <span class="trm-toc-text">Class: Headers</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-4" title="new Headers([init])"><a rel="nofollow" class="trm-toc-link" href="#new-Headers-init"><span class="trm-toc-number">9.5.1.</span> <span class="trm-toc-text">new Headers([init])</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-3" title="Interface: Body"><a rel="nofollow" class="trm-toc-link" href="#Interface-Body"><span class="trm-toc-number">9.6.</span> <span class="trm-toc-text">Interface: Body</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-4" title="body.body"><a rel="nofollow" class="trm-toc-link" href="#body-body"><span class="trm-toc-number">9.6.1.</span> <span class="trm-toc-text">body.body</span></a></li><li class="trm-toc-item trm-toc-level-4" title="body.bodyUsed"><a rel="nofollow" class="trm-toc-link" href="#body-bodyUsed"><span class="trm-toc-number">9.6.2.</span> <span class="trm-toc-text">body.bodyUsed</span></a></li><li class="trm-toc-item trm-toc-level-4" title="body.arrayBuffer()"><a rel="nofollow" class="trm-toc-link" href="#body-arrayBuffer"><span class="trm-toc-number">9.6.3.</span> <span class="trm-toc-text">body.arrayBuffer()</span></a></li><li class="trm-toc-item trm-toc-level-4" title="body.formData()"><a rel="nofollow" class="trm-toc-link" href="#body-formData"><span class="trm-toc-number">9.6.4.</span> <span class="trm-toc-text">body.formData()</span></a></li><li class="trm-toc-item trm-toc-level-4" title="body.blob()"><a rel="nofollow" class="trm-toc-link" href="#body-blob"><span class="trm-toc-number">9.6.5.</span> <span class="trm-toc-text">body.blob()</span></a></li><li class="trm-toc-item trm-toc-level-4" title="body.json()"><a rel="nofollow" class="trm-toc-link" href="#body-json"><span class="trm-toc-number">9.6.6.</span> <span class="trm-toc-text">body.json()</span></a></li><li class="trm-toc-item trm-toc-level-4" title="body.text()"><a rel="nofollow" class="trm-toc-link" href="#body-text"><span class="trm-toc-number">9.6.7.</span> <span class="trm-toc-text">body.text()</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-3" title="Class: FetchError"><a rel="nofollow" class="trm-toc-link" href="#Class-FetchError"><span class="trm-toc-number">9.7.</span> <span class="trm-toc-text">Class: FetchError</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Class: AbortError"><a rel="nofollow" class="trm-toc-link" href="#Class-AbortError"><span class="trm-toc-number">9.8.</span> <span class="trm-toc-text">Class: AbortError</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="TypeScript"><a rel="nofollow" class="trm-toc-link" href="#TypeScript"><span class="trm-toc-number">10.</span> <span class="trm-toc-text">TypeScript</span></a></li><li class="trm-toc-item trm-toc-level-2" title="Acknowledgement"><a rel="nofollow" class="trm-toc-link" href="#Acknowledgement"><span class="trm-toc-number">11.</span> <span class="trm-toc-text">Acknowledgement</span></a></li><li class="trm-toc-item trm-toc-level-2" title="Team"><a rel="nofollow" class="trm-toc-link" href="#Team"><span class="trm-toc-number">12.</span> <span class="trm-toc-text">Team</span></a></li><li class="trm-toc-item trm-toc-level-2" title="License"><a rel="nofollow" class="trm-toc-link" href="#License"><span class="trm-toc-number">13.</span> <span class="trm-toc-text">License</span></a></li></ol>
      </div>
    </div>

            
<div class="trm-fixed-container">
    
        <div class="trm-fixed-btn post-toc-btn" data-title="目录">
            <i class="iconfont fas fa-th-list"></i>
        </div>
    
    
        <div class="trm-fixed-btn" data-title="阅读模式" onclick="asyncFun.switchReadMode()">
            <i class="iconfont fas fa-book-reader"></i>
        </div>
    
    
    <div id="trm-back-top" class="trm-fixed-btn" data-title="回到顶部">
        <i class="iconfont fas fa-arrow-up"></i>
    </div>
</div>
        </div>
      </div>
      <!-- scroll container end -->
  </div>
  <!-- app wrapper end -->

  
  <!-- Plugin -->




    
    
<script src="https://unpkg.com/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>

    

    
        <script src="/daydoc/js/plugins/typing.js?v=2.1.6"></script>
    

    

    <!-- 数学公式 -->
    

    <!-- 评论插件 -->
    
        

        
    



<!-- CDN -->


    

    

    




    <!-- Service Worker -->
    
    <!-- baidu push -->
    


<script id="async-script" src="/daydoc/js/main.js?v=2.1.6"></script>

</body>

</html>
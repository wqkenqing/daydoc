{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"themes/trees/source/404.html","path":"404.html","modified":0,"renderable":1},{"_id":"themes/trees/source/favicon.ico","path":"favicon.ico","modified":0,"renderable":1},{"_id":"themes/trees/source/css/main.css","path":"css/main.css","modified":0,"renderable":1},{"_id":"themes/trees/source/Tree.png","path":"Tree.png","modified":0,"renderable":1},{"_id":"themes/trees/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/trees/source/lib/jquery.pjax.js","path":"lib/jquery.pjax.js","modified":0,"renderable":1},{"_id":"themes/trees/source/lib/jquery-3.4.1.min.js","path":"lib/jquery-3.4.1.min.js","modified":0,"renderable":1},{"_id":"themes/trees/source/lib/highlight/darcula.css","path":"lib/highlight/darcula.css","modified":0,"renderable":1},{"_id":"themes/trees/source/lib/font-awesome/font-awesome.min.css","path":"lib/font-awesome/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/trees/source/lib/highlight/highlight.pack.js","path":"lib/highlight/highlight.pack.js","modified":0,"renderable":1},{"_id":"themes/trees/source/lib/valine/Valine-1.3.10-min.js","path":"lib/valine/Valine-1.3.10-min.js","modified":0,"renderable":1},{"_id":"themes/trees/source/lib/busuanzi/2.3/busuanzi.pure.mini.js","path":"lib/busuanzi/2.3/busuanzi.pure.mini.js","modified":0,"renderable":1},{"_id":"themes/trees/source/lib/valine/av-3.0.4-min.js","path":"lib/valine/av-3.0.4-min.js","modified":0,"renderable":1},{"_id":"themes/fluid/source/css/highlight-dark.styl","path":"css/highlight-dark.styl","modified":1,"renderable":1},{"_id":"themes/fluid/source/css/highlight.styl","path":"css/highlight.styl","modified":1,"renderable":1},{"_id":"themes/fluid/source/js/boot.js","path":"js/boot.js","modified":1,"renderable":1},{"_id":"themes/fluid/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/fluid/source/js/color-schema.js","path":"js/color-schema.js","modified":1,"renderable":1},{"_id":"themes/fluid/source/js/events.js","path":"js/events.js","modified":1,"renderable":1},{"_id":"themes/fluid/source/js/img-lazyload.js","path":"js/img-lazyload.js","modified":1,"renderable":1},{"_id":"themes/fluid/source/js/leancloud.js","path":"js/leancloud.js","modified":1,"renderable":1},{"_id":"themes/fluid/source/js/local-search.js","path":"js/local-search.js","modified":1,"renderable":1},{"_id":"themes/fluid/source/js/plugins.js","path":"js/plugins.js","modified":1,"renderable":1},{"_id":"themes/fluid/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/fluid/source/css/gitalk.css","path":"css/gitalk.css","modified":1,"renderable":1},{"_id":"themes/fluid/source/img/fluid.png","path":"img/fluid.png","modified":1,"renderable":1},{"_id":"themes/fluid/source/img/loading.gif","path":"img/loading.gif","modified":1,"renderable":1},{"_id":"themes/fluid/source/img/avatar.png","path":"img/avatar.png","modified":1,"renderable":1},{"_id":"themes/fluid/source/img/police_beian.png","path":"img/police_beian.png","modified":1,"renderable":1},{"_id":"themes/fluid/source/xml/local-search.xml","path":"xml/local-search.xml","modified":1,"renderable":1},{"_id":"themes/fluid/source/img/default.png","path":"img/default.png","modified":1,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"b466498d27ac8ed01ad49ca5fa84c6bdc1d7d66b","modified":1639031718983},{"_id":"source/CNAME","hash":"160fc677cb4c117e9970f50c384bc5e399104202","modified":1619445155000},{"_id":"themes/trees/README.md","hash":"d86e907c5845e38df019af0eb9869124fc6c22bb","modified":1619445156000},{"_id":"themes/trees/_config.yml","hash":"8622a2dbf1a51a3ebb4a1a3fb7776f884d668bb4","modified":1619445156000},{"_id":"source/tags/index.md","hash":"eccac8fa45f4f0df0158eb43e779e0af47904acd","modified":1619445155000},{"_id":"source/_posts/.DS_Store","hash":"c3d840fb8373648144296aa5d7d85f63b0f7d33c","modified":1639031718977},{"_id":"source/_posts/.Ulysses-Settings.plist","hash":"63228c3d354addefda06bb6e02bbbe5801b6fe56","modified":1619445155000},{"_id":"source/_posts/.Ulysses-Group.plist","hash":"d7000dd72bc33acbcea760c87ff0ab26264e1913","modified":1619445155000},{"_id":"source/categories/index.md","hash":"943b799ede68d50f8fa11c6611069add907b5e7b","modified":1619445155000},{"_id":"themes/trees/source/404.html","hash":"cfa1b96d02d143d77c0ba519dab1c23de0cae6ee","modified":1619445156000},{"_id":"themes/trees/source/favicon.ico","hash":"268be0a863caae7c5a732fb8a911a81434f31117","modified":1619445156000},{"_id":"themes/trees/layout/categories.ejs","hash":"d35dab43aefc3d0f798d8676103345e71caf1e23","modified":1619445156000},{"_id":"themes/trees/layout/index.ejs","hash":"101bd5d563884579882c8caaeafbc3139134bab4","modified":1619445156000},{"_id":"themes/trees/layout/layout.ejs","hash":"b1cbe3e0c52a8fa644a5adb97b31b5ecfdec2162","modified":1619445156000},{"_id":"themes/trees/layout/post.ejs","hash":"eca7b15659367d917b11c627fb30e2fc3a7ebbc0","modified":1619445156000},{"_id":"themes/trees/layout/tags.ejs","hash":"973aa7f435ceba2a2f6c1a5ac7d3677fea5a50b7","modified":1619445156000},{"_id":"source/_posts/王阁/sqltools_20221206170549_58159.log","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670378636000},{"_id":"source/_posts/王阁/.DS_Store","hash":"a5c089e5bab0adf49c9ea118e5925220fff3dae1","modified":1645510503767},{"_id":"themes/trees/source/css/main.css","hash":"a374eb273c29e0c96cdbb11e3e204051c6a3dfcc","modified":1619445156000},{"_id":"themes/trees/source/Tree.png","hash":"e5a30d5edf5aa2dc39fb4db7b4761b516826cf5b","modified":1619445156000},{"_id":"themes/trees/source/js/main.js","hash":"3216da0a4e322b58917a94f9296ddca3823fd3a4","modified":1619445156000},{"_id":"themes/trees/source/lib/jquery.pjax.js","hash":"13485a1e2dc9c8df28267549de1b8af8f39061d9","modified":1619445156000},{"_id":"themes/trees/layout/_partial/footer.ejs","hash":"1bbd6ce41784b3f7011b928b168bf84755a0d9b9","modified":1619445156000},{"_id":"themes/trees/layout/_partial/head.ejs","hash":"733fbbd69615f3161101d0eb2f559d22a43ef276","modified":1619445156000},{"_id":"themes/trees/layout/_partial/header.ejs","hash":"abb98bf2ae182e4988f65b9a8f0f024dbd97185b","modified":1619445156000},{"_id":"themes/trees/layout/_partial/sidebar.ejs","hash":"ea6c595b9a1b0e743930adf395ee66697ff61ab1","modified":1619445156000},{"_id":"themes/trees/layout/_partial/totop.ejs","hash":"a94c4b350b76d21bb530095981049a2647cc6273","modified":1619445156000},{"_id":"themes/trees/source/lib/jquery-3.4.1.min.js","hash":"88523924351bac0b5d560fe0c5781e2556e7693d","modified":1619445156000},{"_id":"source/_posts/王阁/分享/数仓分享.md","hash":"e175ad16ba09bd77549b943a7e641e3d87e0120c","modified":1677120680902},{"_id":"source/_posts/王阁/工作/.DS_Store","hash":"ccd01779f582fb333052f94c22bd7118b21a8bbc","modified":1645511014652},{"_id":"source/_posts/王阁/技术/.DS_Store","hash":"865cb0eba39bedc1c7f1d1d02dbc6f263a74226b","modified":1651124688330},{"_id":"source/_posts/王阁/日常/map.html","hash":"5b313559430d11d4f1100c375c666added1651c9","modified":1634287654762},{"_id":"source/_posts/王阁/日常/test.drawio","hash":"cace4e8f4f70808098c0a37fe65c6ebe41d9678f","modified":1619445155000},{"_id":"themes/trees/source/lib/highlight/darcula.css","hash":"7740224d07375ddc321147dffabbfa83e39f0d8b","modified":1619445156000},{"_id":"themes/trees/source/lib/font-awesome/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1619445156000},{"_id":"source/_posts/王阁/工作/数据基础平台/数据基础平台构建方案.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1644916174818},{"_id":"source/_posts/王阁/工作/数据基础平台/日常运维.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1667873256524},{"_id":"source/_posts/王阁/技术/专题/技术专题.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1650952404560},{"_id":"source/_posts/王阁/技术/考研/C学习笔记.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1667459469847},{"_id":"source/_posts/王阁/日常/vue/vue.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619445155000},{"_id":"source/_posts/王阁/日常/考试/电子科大2019招生收集.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619445155000},{"_id":"themes/trees/source/lib/highlight/highlight.pack.js","hash":"84a7e42dfa8c44a422a8328277d660d9428fcea6","modified":1619445156000},{"_id":"themes/trees/source/lib/valine/Valine-1.3.10-min.js","hash":"e3a340d0c39eee2ae651284fda9d351e752fcbd0","modified":1619445156000},{"_id":"source/_posts/王阁/回顾/hive/hive回顾.md","hash":"a50de81693078b850b04d7defc60145531202efd","modified":1619445155000},{"_id":"source/_posts/王阁/回顾/技能回顾/整体规划思路.md","hash":"174371ad218e3f3de6805f28a1bf036023a76c27","modified":1637156127000},{"_id":"source/_posts/王阁/工作/杂记/汉口源点项目相关信息.md","hash":"355c34824765e05fc69088932238ba815eea06ef","modified":1625123983234},{"_id":"source/_posts/王阁/工作/杂记/汉口项目公司服务操作.md","hash":"91636044ec0c81b5f9aad4d957347cfa08164149","modified":1622171625575},{"_id":"source/_posts/王阁/工作/项目/.DS_Store","hash":"68d4b2819a4731078856dc172bf3f4206590e1e5","modified":1630401586288},{"_id":"source/_posts/王阁/工作/数据基础平台/.DS_Store","hash":"dc19b79510a6b7c6de8798f5d6090d47df2ef3f9","modified":1645511014650},{"_id":"source/_posts/王阁/技术/hexo/.DS_Store","hash":"8b2fa38354c5dc716b16b4203a0de4c0dcdf2c14","modified":1647402127671},{"_id":"source/_posts/王阁/技术/大数据/atlas.md","hash":"4ff2ac79faaa3a5d008a00a5f83538f02dcd224e","modified":1624241629156},{"_id":"source/_posts/王阁/技术/数据库/sql储备&练习.md","hash":"983a97a1cfd1c29c605de6e7fd25a02080025352","modified":1652081517865},{"_id":"source/_posts/王阁/日常/blog_sync_project/plan.md","hash":"cade8ecf043f66ab9281c49e6b27ef738c14908f","modified":1619445155000},{"_id":"source/_posts/王阁/日常/prepare/collect_es.sh","hash":"5602f68038b37fbcfc5ced7b82cca0d6f0c7f642","modified":1619445155000},{"_id":"source/_posts/王阁/日常/prepare/tourist","hash":"2bc298523f2529aadd88efa1dbc5605625bf8761","modified":1619445155000},{"_id":"source/_posts/王阁/日常/prepare/数据储备.md","hash":"c09faacb0831a59b6370b11fd18cecdd18efe073","modified":1619445155000},{"_id":"source/_posts/王阁/日常/考试/考试相关.md","hash":"b5043ddbf7b233c4df0cd3b0e053864a64dbed99","modified":1619445155000},{"_id":"source/_posts/王阁/日常/运维/about云账号密码.md","hash":"b36382fdee3ca9c84db6f65f568caf3aaeb6e066","modified":1619445155000},{"_id":"source/_posts/王阁/日常/运维/docker启动mysql.md","hash":"f2d2c805bd1c53297d3bf0b6d26366c23ad8dc1a","modified":1619445155000},{"_id":"source/_posts/王阁/日常/运维/jumpserver.md","hash":"20922b6335ea6d2a22260fb99fd66b14fed48020","modified":1619445155000},{"_id":"source/_posts/王阁/日常/运维/mac python版本替换.md","hash":"d4da190119ff23ff6b63e416713a3866d58549a4","modified":1619445155000},{"_id":"source/_posts/王阁/日常/运维/tmux上手.md","hash":"0b799cdc0a658a770d711a8ca46bc1b34def5bbd","modified":1619445155000},{"_id":"source/_posts/王阁/日常/运维/京东云.md","hash":"8c1315ccc759495a1afeaa1148a1abfa6c7999f0","modified":1619445155000},{"_id":"source/_posts/王阁/日常/运维/博客不同主题切换.md","hash":"e9778376d2d42cdf125b99f702a536543ce2d234","modified":1619445155000},{"_id":"source/_posts/王阁/日常/运维/操作记录.md","hash":"ab824a4c2eaf65fee0b78fa67a7b5346b6341b23","modified":1619445155000},{"_id":"themes/trees/source/lib/busuanzi/2.3/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1619445156000},{"_id":"source/_posts/王阁/日常/运维/运维操作.md","hash":"4f08b51d27796d9ac78d93f8ad397c532fd5b7ab","modified":1677120680909},{"_id":"source/_posts/王阁/项目/古诗词竞赛/建设思路.md","hash":"91b06aa3b219ae2608e47b3e3db4ce03ae387ec3","modified":1677120680909},{"_id":"source/_posts/王阁/项目/古诗词竞赛/诗词竞赛业务架构.md","hash":"8af6a5f6ba23a3d4bf95a83f9a09af261254b79e","modified":1653097882169},{"_id":"themes/trees/source/lib/valine/av-3.0.4-min.js","hash":"2577e72b52b736d99649f9e95be8976d58563333","modified":1619445156000},{"_id":"source/_posts/王阁/技术/hexo/Thread/多线程.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619445155000},{"_id":"source/_posts/王阁/技术/专题/sql专题/sql基础知识.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1651476409727},{"_id":"source/_posts/王阁/技术/专题/数据建模/数据仓库建设方案.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1651130736342},{"_id":"source/_posts/王阁/技术/大数据/hive/hive20190109.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619445155000},{"_id":"source/_posts/王阁/回顾/技能回顾/大数据相关组件/hadoop发展史.md","hash":"fbe314c7600c4e2aaa7e82d1b34db7773239a3b3","modified":1637225647707},{"_id":"source/_posts/王阁/工作/旸谷数据中心/config/config2.xml","hash":"df88c0e9f82db03b4398dc0eaa10f597802e506f","modified":1619603788310},{"_id":"source/_posts/王阁/回顾/技能回顾/大数据相关组件/存储组件.md","hash":"3aeba652a2c6aba323335bbdb0ccbd32181d829e","modified":1637155491000},{"_id":"source/_posts/王阁/工作/旸谷数据中心/基础/Logstash 部署.md","hash":"e1d8a6a6f49262c275d785d91f126ee666358b2e","modified":1626056937102},{"_id":"source/_posts/王阁/工作/旸谷数据中心/基础/Flink集成CDH.md","hash":"7b1eaf5ceadb1a01906ac51ac8fa494378b0737d","modified":1677120680903},{"_id":"source/_posts/王阁/工作/旸谷数据中心/基础/CDH基础环境部署.md","hash":"caa9fe8c4f4073fd94c1145542137fc311e184bd","modified":1677120680903},{"_id":"source/_posts/王阁/工作/旸谷数据中心/config/clickhouse_server_config.xml","hash":"3500fd2b1b1a66b374056cc6fb88e17d9314daa2","modified":1619603323660},{"_id":"source/_posts/王阁/工作/旸谷数据中心/基础/数据中心组件管理服务封装.md","hash":"d61dee1ab1abbbd0cff5ea796a69f8924a3e9beb","modified":1626056936994},{"_id":"source/_posts/王阁/工作/旸谷数据中心/基础/数据中心服务资源.md","hash":"3f7525d673b0488fcf5d59717ef391a545e4104c","modified":1626056936919},{"_id":"source/_posts/王阁/工作/旸谷数据中心/基础/数据采集服务封装.md","hash":"86a4fa5ccd236bed22654944595c85244cf97846","modified":1626056936717},{"_id":"source/_posts/王阁/工作/旸谷数据中心/安全模块/kerberos部署与使用.md","hash":"95f490286d279ced85982aebdfef4f8c6b3a3d1f","modified":1623059310185},{"_id":"source/_posts/王阁/工作/旸谷数据中心/组件/azkaban的使用.md","hash":"b3f7b102e631d3cf787481b0b4777b9e09a75073","modified":1625644784500},{"_id":"source/_posts/王阁/工作/旸谷数据中心/安全模块/数据中心安全模块设计大纲.md","hash":"c79d00ecd3d12869626ffb6725208d5db456fce5","modified":1622789323305},{"_id":"source/_posts/王阁/工作/旸谷数据中心/数据基础平台/数据基础平台建设思路.md","hash":"ced3b6380ceddfcbe3056da8b6e692f9d542376b","modified":1677120680904},{"_id":"source/_posts/王阁/工作/旸谷数据中心/组件/clickhouse集群版实录.md","hash":"97779aa48ab8458c6f994cae03899230e9f73fc2","modified":1677120680904},{"_id":"source/_posts/王阁/工作/旸谷数据中心/数据基础平台/dataworks.md","hash":"9c51e254643e197f2a01c2e51a6069ab94da2fb6","modified":1638252014103},{"_id":"source/_posts/王阁/工作/旸谷数据中心/数据基础平台/数据安全的构建方案.md","hash":"cf62a6f00921ff474182dc2ce8a9cfe23671b54b","modified":1638330546641},{"_id":"source/_posts/王阁/工作/旸谷数据中心/数据基础平台/数据治理的构建方案.md","hash":"33c5e6fea4bcc141925af4e4b8a24ea215618245","modified":1638350115270},{"_id":"source/_posts/王阁/工作/旸谷数据中心/数据基础平台/数据运维的构建方案.md","hash":"6ce0b700e604c29ee3f9cb6be355c68c85a34195","modified":1638326705023},{"_id":"source/_posts/王阁/工作/旸谷数据中心/数据基础平台/数据集成的构建方案.md","hash":"0df3c5c4c04eb7f5ab423cfc84c3d257963bea06","modified":1638325683972},{"_id":"source/_posts/王阁/工作/旸谷数据中心/数据基础平台/数据管理的构建方案.md","hash":"4bab0e0bc7027354e4a55b220c3d914d0dace182","modified":1638347993939},{"_id":"source/_posts/王阁/工作/项目/济泺路隧道/.DS_Store","hash":"ad8e9263e850cd0aef9589a62aa4784fdee33807","modified":1629102242650},{"_id":"source/_posts/王阁/工作/旸谷数据中心/数据基础平台/数据应用的构建方案.md","hash":"1558333a10046ea8eade4e148cb7c9ffe87a6470","modified":1638350135689},{"_id":"source/_posts/王阁/工作/项目/洪雅/大数据验证.md","hash":"42d15108c35e2c0a1cf0ddd546723b28fd4f197b","modified":1620439390224},{"_id":"source/_posts/王阁/工作/项目/和燕路/demo.txt","hash":"bb9ed75529711fd754a745a5840cf65a6721e9f1","modified":1667211785390},{"_id":"source/_posts/王阁/工作/项目/绥延/采集地址.md","hash":"ab8ec0fa492b87566fafba16600774f5a2a2ef95","modified":1626774493327},{"_id":"source/_posts/王阁/工作/项目/绥延/kafka测试环境.md","hash":"7e4e9eb60fd1437bfc2d06017b77b42ec9e3850f","modified":1620444614600},{"_id":"source/_posts/王阁/技术/hexo/CDH/搭建.md","hash":"c83761940ea352cf876c6debcce4f2bde948900e","modified":1677120680904},{"_id":"source/_posts/王阁/工作/数据基础平台/数据集成/数据采集构建方案.md","hash":"e1b1026311b7782cddc864ac5d882c04b16e4b6e","modified":1677120680903},{"_id":"source/_posts/王阁/工作/数据基础平台/数据运维/数据运维-采集任务模块.md","hash":"fe931d0689ee6da89e67992829ddd8252a9d3ebc","modified":1645435907881},{"_id":"source/_posts/王阁/技术/hexo/flink/Flink.md","hash":"75baf11271d2d1c652a054310f87c94f74297283","modified":1677120680904},{"_id":"source/_posts/王阁/技术/hexo/CDH/cdh集成phoenix.md","hash":"7e806738032ee9bf685ae10c35188ea040d6bcf5","modified":1647674768588},{"_id":"source/_posts/王阁/技术/hexo/hadoop/hadoopHA搭建.md","hash":"2119376e0cd9bcb10f88bed1fbe4e1b745380e3e","modified":1677120680904},{"_id":"source/_posts/王阁/技术/hexo/kafka/kafka实现.md","hash":"1135fefdcba5f6d3ceacdd0a36bb291c44eefad4","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/old/Lamda积累.md","hash":"861f7b5d5ad4d33ada02a734d481709b0c0f3b23","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/old/Yarn配置.md","hash":"0ae26ff179f5f485764b59374fbc17c931137a1d","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/old/hbase积累.md","hash":"da4e75edc5f28bb0d201ad5d58682a9418f443b9","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/old/flume记录.md","hash":"eae71d4c4a6e2f3a22bece4b15504608c0797077","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/old/hive总结.md","hash":"c06086950058bde49d1ff3e32f5a3c725ccc3db1","modified":1677120680905},{"_id":"source/_posts/王阁/技术/hexo/old/kafka.md","hash":"89bc210a375d350c132fa7eedb2ddb7d37aa783c","modified":1677120680905},{"_id":"source/_posts/王阁/技术/hexo/old/mapreduce组件总结.md","hash":"5a0aeac124b43c3b1381651ac82953bfd0db979b","modified":1677120680905},{"_id":"source/_posts/王阁/技术/hexo/old/spark学习2.md","hash":"f1e65f13a193befb0b59e669ead317321dae2699","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/old/spark学习3.md","hash":"b447834f1657e90941d501b35c5e6c9c0241a378","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/old/spark算子.md","hash":"03e50b658aaa48b45b6dff2d284266db4f9e07f0","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/old/spark学习.md","hash":"667e9410164eddbbba770e65267b9a9e3d767419","modified":1677120680905},{"_id":"source/_posts/王阁/技术/hexo/old/sqoop记录.md","hash":"1f329c3712a793ac4d41b77e581c81fe4b3df7da","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/old/大数据相关分享.md","hash":"ddf61eb694f7ad9ff95b9f037e0c885bf0ca5178","modified":1677120680905},{"_id":"source/_posts/王阁/技术/hexo/old/准备小结.md","hash":"71a0e8749cef20a20943b15ddd108260f466578f","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/old/sqoop实现方案.md","hash":"1a809f883cc49f5b99718b16d9ed6dd4f52219ce","modified":1647415163149},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog1.md","hash":"47d55382f66957411b13c4ee9bb2ca83e68d7314","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog10.md","hash":"e7761cf05548cd62125d7ba3c6cc47280b239a37","modified":1677120680905},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog11.md","hash":"b8e69ff57a9a399836ba4ea96eed38eeabba9f00","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog13.md","hash":"da65357065f36be9436bcad5edeecac6774f2196","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog12.md","hash":"bab5c6773666d45fa02a9059c88bbd7d2aca7a95","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog15.md","hash":"0226d721e6b210148f0b209e61f0f62e43ac0bdf","modified":1677120680906},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog17.md","hash":"103c785917ba523091955178f2ad93f661fce884","modified":1677120680906},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog16.md","hash":"a24db979d17656856d0ef2cc84d70ec6d8d49183","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog14.md","hash":"3dd70ebd040a7355868550c7834d2c5176c2c570","modified":1677120680905},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog19.md","hash":"8e1f27b3326733501dc5f5ee0bfdb3945a0c85bc","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog2.md","hash":"c61de9d382b5e766a00e9a937c5d93a037c2dc27","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog20.md","hash":"3ab08d260c55ce28e39d97de918fc989b17c9fc1","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog18.md","hash":"5afda3e77875fd6563adcadd9d5ad547edab4182","modified":1677120680906},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog21.md","hash":"3ee31197784eafa09c201e449ba70b14b90d001c","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog23.md","hash":"db3fce7f1419d37fae8b8fdc59684b9959bde4b6","modified":1677120680906},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog22.md","hash":"c9167686de0fa68b931c4fbb84463b75dddebc03","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog24.md","hash":"cdb826a49d0637ffa8b4937a01b3d4603fcd7991","modified":1677120680906},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog25.md","hash":"05edafe2579ab80afc899594ca8cdec49aac1c2e","modified":1677120680906},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog26.md","hash":"bd0eaf6cf085e44f53c6bfdedd7b367cc20b6eed","modified":1677120680906},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog7.md","hash":"aab107c8f131ec3ec6bc63adbe2ff26ead76128c","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog6.md","hash":"58168b18d603b2ee40e215eb5d03d2efcd29e760","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog4.md","hash":"9c65d63e63b7c6eddfcaec483999fe931b5ef7af","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog3.md","hash":"5e8410e1a88bd2ed5c307a08caad64284905f76f","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog9.md","hash":"644196d39c82ba4963a72fd3597f92f187e41fd3","modified":1677120680907},{"_id":"source/_posts/王阁/技术/hexo/oldblog/blog8.md","hash":"f3c4742e662ce04a1d23954015b1ed729f28d7da","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/spark/stream.md","hash":"d13cf889063e11907ad3c79e383bf030833d4cbc","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/spark/stream2.md","hash":"ff5dcfc7d90f224b6f53c0d1bcc3c2790479bde4","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/spark/spark操作.md","hash":"d165953ebef7f594c023ce9a4162eb2663fdb815","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/spark/宽窄依赖.md","hash":"987ad1b935e8ec4da7eb636974f6625844293edb","modified":1619445155000},{"_id":"source/_posts/王阁/技术/专题/数据建模/数据指标体系.md","hash":"82d258622c5074a172001ae75126b56a2c68db29","modified":1677120680908},{"_id":"source/_posts/王阁/技术/大数据/es/elk使用.md","hash":"09a923ee2ff5691e6ca2e36c2f9c2a03672067e0","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/es/esDSL详解.md","hash":"782a6607503ae04fd6eedb4155ae427e4d4d8029","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/Mongodb/常用命令.md","hash":"6ec61dfe79de4fed1c7af6b5c9ca9f4f37a9d9cf","modified":1652079512590},{"_id":"source/_posts/王阁/技术/大数据/es/es常用命令.md","hash":"c89741069da2e6ee3c137144ff758cef6681f313","modified":1677120680908},{"_id":"source/_posts/王阁/技术/大数据/es/es的docker安装.md","hash":"01871a18ebc3c5da64d344c34bf7d98357d84e68","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/es/es小结.md","hash":"98ff350b1532c441e09c0ab3468211d5317aa10f","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/es/es详细.md","hash":"82520ba00753ac9e11ced6828d353cd4b6c6faf4","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/es/共享数据集合.md","hash":"ff832f2c4ba4d8151e39fe93081d4bf4c45a28b4","modified":1677120680908},{"_id":"source/_posts/王阁/技术/大数据/flink/Flink记录.md","hash":"c826abf7fc0d0ae093e9027ac500908cb1eb7535","modified":1624502154519},{"_id":"source/_posts/王阁/技术/大数据/flink/flink.md","hash":"214c5ddf653e6e22ebb3e55bf1afbcbb981fdbab","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/es/积累.md","hash":"76d2f4d06145aaaad1b5492cc8f5d96413227eb5","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/flume/Dockerfile","hash":"c10775d31a0e83a904ee4fe22e9ec3ff5e804723","modified":1624090084666},{"_id":"source/_posts/王阁/技术/大数据/flink/flink_book.md","hash":"40a193b2ce5a8b79eb33da75d67c875ae2d731b9","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/flume/Flume.md","hash":"f1d40860f4c84b82f6fb933eee6af7fb1fa2b0e7","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/flume/new","hash":"6096bd830b2670319ae8df19da0fcd60a5aac84e","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/flume/docker版flume使用.md","hash":"2a1881b032e7fbad928162bbafc6ee1c86792534","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/hbase/hbase20190109.md","hash":"034801100edb1e74928e9296c1a86e34af70fbcc","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/flink/flink任务提交.md","hash":"e9a8760e2f5f3634387463e009a75a7dd649b06c","modified":1647932157236},{"_id":"source/_posts/王阁/技术/大数据/hive/hivsql","hash":"cad143521dd36bbbbb19527546c2d3b27ac16a70","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/kafka/kafka原理.md","hash":"76312387d91fbfef9244f9400fee3dc1824e9fde","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/kafka/kafka小结.md","hash":"e89ac4d03f692389fc98cfb878a571d71b6488da","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/hbase/hbase_api升级.md","hash":"02670ad7872b331f9c8f9db67116a3d1596c5567","modified":1624089572272},{"_id":"source/_posts/王阁/技术/大数据/kafka/kafka疑问点.md","hash":"9289ad2ca59fbae023817f90f4b56adbdbaccfcd","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/spark/spark-streaming.md","hash":"0da3bc53295f19670abce43778529bf9393e8f7e","modified":1623996539848},{"_id":"source/_posts/王阁/技术/大数据/kafka/kafka极客.md","hash":"49ddcffbf15b1ee38c029a9f43c32df1b43d6df5","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/yarn/YarnState.md","hash":"2835278d616af19e05c096e62f39813bb24a50f4","modified":1677120680908},{"_id":"source/_posts/王阁/技术/大数据/集群/.bashrc","hash":"a068feed27316b5be47dfd02656b198771a1f317","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/集群/私有集群.md","hash":"da1abcdbda9ff007bdb51bbc7903d30a0843738c","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/bash/shell积累.md","hash":"5f08a93942adfc0918b907b56a2ea0ed95d6ffeb","modified":1619445155000},{"_id":"source/_posts/王阁/技术/开发/前端/vue学习.md","hash":"b4b43d0fde5df1baa7e882bc041311dc90784f26","modified":1656484849256},{"_id":"source/_posts/王阁/技术/编程/bash/order.sh","hash":"c42444e19c4c9b00f10cc3fd32413ce256429b3f","modified":1652081497148},{"_id":"source/_posts/王阁/技术/编程/bash/python_learn.md","hash":"192223791b938a3b4d66d09f871b65e0a61701b9","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/scala/scala学习.md","hash":"b219d29cc6e01984fe96516119ef3cc579aa8072","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/java/日期处理.md","hash":"ed2105b5a507cf7bae6ddb0999c0ccae7440a354","modified":1677120718925},{"_id":"source/_posts/王阁/技术/编程/java/并发编程.md","hash":"3537381a42c658dfdeb135472f7d56c33b946925","modified":1654570742000},{"_id":"source/_posts/王阁/技术/编程/java/计算处理.md","hash":"0f19504a9fffdf957112ad80dafe16d20e5e3da5","modified":1677120735293},{"_id":"source/_posts/王阁/技术/考研/代码/demo.c","hash":"371feb30654a34d42a89dfb05e4a089716d1f212","modified":1667460877782},{"_id":"source/_posts/王阁/技术/考研/代码/demo2.c","hash":"b20332769c2e3e5444b84ed256afe3a34a9f4711","modified":1667634212430},{"_id":"source/_posts/王阁/技术/运维/ELK/kibana使用.md","hash":"08d1ad970d592b2dd8101707c48fb159eb54c6cc","modified":1677120680909},{"_id":"source/_posts/王阁/技术/运维/cdh/hue.md","hash":"3c265dd7172db122da06ae44ae5dcd9c2a684f15","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/docker/docker.md","hash":"c1c0f5779f77a59d5154510fcd830667f76a372a","modified":1619445155000},{"_id":"source/_posts/王阁/技术/考研/代码/demo","hash":"3a1e812960ee1bb564524d260966885dddf5ced2","modified":1667460935666},{"_id":"source/_posts/王阁/技术/运维/docker/Dockerfile基础&编写.md","hash":"0e659c4319ceb79642d613b0dfc58e6eec262758","modified":1677120680909},{"_id":"source/_posts/王阁/技术/运维/docker/docker镜像.md","hash":"9bb19dbba9d88dac54ef3dc1909d64814fff85bc","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/front_end/nginx部署.md","hash":"1e2d52b1ab0135205b4db49431cc84cd5458141c","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/docker/docker操作.md","hash":"2c01164e0a786209f30c39707c47747dcddbdbe0","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/hy-sjksh-info-dev/common.env","hash":"eccf42bf56ca8b0f7d56bd7f2c74eaf472b8d61e","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/hy-sjksh-info-dev/docker-compose.yaml","hash":"e187928e3cddeea01a6d36d99ec66bb75c4cdae9","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/front_end/调研.md","hash":"daef2a130c6affc8f890488fd386bacacd3daf8e","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/ubuntu/desk_gui.md","hash":"b7fb00d45fdbf9f7bedcba667fe935dce4b0926d","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/ubuntu/linux自启服务.md","hash":"d20bb5d223f0a68b64f352296f0f501b6da4ce05","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/owncloud/账号.md","hash":"9656647fc6627e915cb8dcf7a98c8811a680f32b","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/yd_server_config/README.md","hash":"b7cf4cbad171ef97615d9c7ce473839ce2dcf0f6","modified":1619445155000},{"_id":"source/_posts/王阁/技术/考研/代码/demo2","hash":"973bc1391701958db879f7e4307b0e69873cf045","modified":1667634215261},{"_id":"source/_posts/王阁/技术/运维/调度/调度组件部署.md","hash":"4a8cfe359ee79575b34fe8f512ed5c9b5611bcd8","modified":1655693729699},{"_id":"source/_posts/王阁/日常/blog_sync_project/bash/git_pull.sh","hash":"a6d1d62cc170957269c8fc8803e8248a80c748bb","modified":1619445155000},{"_id":"source/_posts/王阁/技术/课程记录/es专项/es记录.md","hash":"0a142dfa3a1260adb0f70f03f1723d0edbe18c46","modified":1677120680909},{"_id":"source/_posts/王阁/技术/课程记录/Flink专项/flink记录.md","hash":"36a82f4afbbfd1570e9a17a866e95dcdbca58bde","modified":1651829914372},{"_id":"source/_posts/王阁/技术/hexo/spark/算子/test.py","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/python/learn/pytest.py","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1619445155000},{"_id":"source/_posts/王阁/工作/旸谷数据中心/config/atlas/atlas-application.properties","hash":"80264f92df3d5500e41d1db92793050bb5554b45","modified":1624868887399},{"_id":"source/_posts/王阁/工作/旸谷数据中心/config/flume/avro.conf","hash":"e5d0cfefc1def40977cf4e2ce6ccf81ddfc17af1","modified":1620730785092},{"_id":"source/_posts/王阁/工作/旸谷数据中心/config/flume/gbkkafka.conf","hash":"cb2918d03f62e2045562decc9d7a715e2543fbf0","modified":1620281928007},{"_id":"source/_posts/王阁/工作/旸谷数据中心/config/flume/jsonkeytokafka.conf","hash":"cfadc4bea561427181d0ca00130dab54e4e22f26","modified":1620719248131},{"_id":"source/_posts/王阁/工作/旸谷数据中心/config/datax/hive2myql.json","hash":"e17916e4d78b83dee78f1176a039255d7757b541","modified":1625477657965},{"_id":"source/_posts/王阁/工作/旸谷数据中心/config/flume/gbkkafka2.conf","hash":"6004b981ca953038adc0afc55368e4f5defe31bb","modified":1620466941209},{"_id":"source/_posts/王阁/工作/旸谷数据中心/config/logstash/k8s-logs.conf","hash":"b9b7fbcf55b8dfd4f2152f8d3e2adf40506f68bd","modified":1621587569041},{"_id":"source/_posts/王阁/工作/旸谷数据中心/基础/元数据/数据血缘组件.md","hash":"52924119ac03290a4c8bfd2d6b759de7c91bc823","modified":1648436232403},{"_id":"source/_posts/王阁/工作/旸谷数据中心/基础/元数据/Atlas切换搜索组件.md","hash":"89cd595237213cabdac636637a88126cbb425f2f","modified":1648451994410},{"_id":"source/_posts/王阁/工作/项目/济泺路隧道/flink服务/flink公司环境部署记录.md","hash":"8ff174bfde1242cf5db9417e75f6ea243cf21b84","modified":1622172174717},{"_id":"source/_posts/王阁/工作/项目/济泺路隧道/出差/flink运行参数.md","hash":"5a3de1c0f1cc0783755152384e23237bd21d11bf","modified":1629106732092},{"_id":"source/_posts/王阁/工作/项目/济泺路隧道/出差/test.md","hash":"b10df8f248fcc3b12e09ea8300ccf60f9e5913b8","modified":1643092192282},{"_id":"source/_posts/王阁/工作/项目/铁四院数据平台/数仓/数仓架构设计图.md","hash":"1115718f1094595d06aa6c763605198755921cc0","modified":1677120680904},{"_id":"source/_posts/王阁/工作/项目/济泺路隧道/出差/相关配置地址.md","hash":"a5354394038360067660f017d30d82210fe4fb1a","modified":1629098717771},{"_id":"source/_posts/王阁/技术/hexo/hadoop/hbase/hbase操作.md","hash":"7667bc6213ab0fb8f3de98ca2724eda041ea0d44","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/hadoop/hdfs/hdfs操作.md","hash":"d74376e48e408e11768c9d33bd9caf2288711ccb","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/hadoop/hdfs/hdfs命令.md","hash":"53029b898515be2d9382ff215365926219be211f","modified":1677120680904},{"_id":"source/_posts/王阁/技术/hexo/spark/sql/SparkSql.md","hash":"2d7d0a3edb2a2c8350981875c1b137231f40d826","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/spark/算子/RDD算子.md","hash":"8d34b041ee6ff75b0f862bec6d5cd3bf55c11059","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/spark/算子/Spark-Windos函数.md","hash":"4e579249a0a5e839a0094e782f6a2df8b3f993cb","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/Flink学习历程.md","hash":"6ac9600b2a15c35ebea6260af87c3443fe70d9aa","modified":1677634218910},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/flink_study.md","hash":"5a108bce32ad805035737f3c1ffe15676688358e","modified":1677121767716},{"_id":"source/_posts/王阁/技术/大数据/flume/config/kafka_spool.conf","hash":"41b85fd6c333bc8bb79feb3e30c501140b5b4229","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/flume/config/kafka_test.conf","hash":"59e45268fe4594a7be0efe9e30f730598ce1a5d4","modified":1652079666337},{"_id":"source/_posts/王阁/技术/大数据/集群/hbase/hbase-site.xml","hash":"ff4f104748e5db04e020cac7152a5c3efb972ffa","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/集群/hbase/regionservers","hash":"766750ef731ae4b65be6cce62f5caea41caaf1fe","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/集群/hdfs/core-site.xml","hash":"a33634b73e27bd33fb05bfcaca4a17e524676378","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/集群/hdfs/mapred-site.xml","hash":"4b4a46bef2c62dd83efdcbd69049b1ad94c8c483","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/集群/hdfs/slaves","hash":"766750ef731ae4b65be6cce62f5caea41caaf1fe","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/集群/zookeeper/zoo.cfg","hash":"d2c8575592e4094c88cf98f76123659f87e9d9b1","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/集群/hdfs/yarn-site.xml","hash":"d293153cfeeefb26de22efa34605a07429b8b574","modified":1619445155000},{"_id":"source/_posts/王阁/技术/大数据/集群/hdfs/hdfs-site.xml","hash":"6d343a668cea1959f257d12fec11fd4eb4a0b101","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/bash/awk/awk.md","hash":"a6de788ec5734f01c73c0d829b48fa330c6581a8","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/bash/yd/manager.sh","hash":"96bdd09d1dbc1b80da66010709a70fb68c0d05f0","modified":1652081506624},{"_id":"source/_posts/王阁/技术/编程/python/reptile/python爬虫篇.md","hash":"73b8bae00f1a9fe7868aae724e6c3e444f7a2f7e","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/python/summary/2020.3.17.md","hash":"daaf2c6aab92da999da919edac04efded9437734","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/python/summary/python5小结.md","hash":"1046bea63fb3529aa9da1d7d86c1e7fe38197ac0","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/python/summary/python小结3.md","hash":"a32b45ab2bebd17d49502e08e1b9eec48f072d5a","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/python/summary/python小结4.md","hash":"79b0b4c6c84c5a8e6564d51498c5ad71d9dca24f","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/ELK/logstash/beats.md","hash":"e89fa93620eef4719d6fef3605485a87a35ca9e6","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/ELK/logstash/logstash.md","hash":"9a06f1b4e880327d0e1608269aa79c3b64a8e313","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/front_end/conf/h-ui.conf","hash":"a418c3060155d16d8a8f25642be5b276557b744b","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/front_end/接口规划/data-manager.md","hash":"f9abfb32aead18306a088073b2311f5d168581f2","modified":1651830272126},{"_id":"source/_posts/王阁/技术/运维/yd_server_config/sjksh_store_info/common.env","hash":"330a6bb209e6edbc9a85d865b488a9abba9ab0ea","modified":1619445155000},{"_id":"source/_posts/王阁/技术/运维/yd_server_config/sjksh_store_info/docker-compose.yaml","hash":"3dfccab6992f9d370c559b6726803b52553a161f","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/bash/awk/script/cal.awk","hash":"e8bfd6aed26595de5fd42c4fe15460be4755d606","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/bash/awk/script/number.awk","hash":"5e378c28e2e2f28288e940039e417c6e3a48e74b","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/bash/awk/script/add.awk","hash":"57bc16c323bbfeb4dc2a9875786669d7fa9ee579","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/bash/awk/script/example.txt","hash":"fd58a4c2cf6fb45e166eee156063c346406a6296","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/bash/awk/script/test.awk","hash":"1417a59d4ba4a1567dddafacd957f17779561310","modified":1619445155000},{"_id":"source/_posts/王阁/技术/编程/bash/awk/script/test.txt","hash":"5c93fb28e07fb71e2b1f898471b60e0182e33472","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/Users/wqkenqing/Desktop/qiniu_idea/WSZpdf.png","hash":"fa71d43078812f75743fd86860d45b8c12bb66f0","modified":1619445155000},{"_id":"source/_posts/王阁/技术/hexo/Users/wqkenqing/Desktop/qiniu_idea/GKW7SA.png","hash":"0572ad0bc852ab7226dcccaede7d6134ec815acf","modified":1619445155000},{"_id":"public/atom.xml","hash":"3c9bf8dacf8f61fbfbe42dcde3e1b562209cab7e","modified":1677725267013},{"_id":"public/sitemap.xml","hash":"c7841661e60260952b1f51d89950babb85d92e2d","modified":1677725267013},{"_id":"public/search.xml","hash":"258d947f801111a4731181cd021db7faa4a191f3","modified":1677725267013},{"_id":"public/content.json","hash":"42bcc5a21279b1a1016b788043042893888bbbf9","modified":1677736318086},{"_id":"public/tags/index.html","hash":"52b3ab5678c77b1d6d65a678c66f9c392951cd43","modified":1677736318086},{"_id":"public/categories/index.html","hash":"12c459ab108cdb8f565bf909d38c18306cec93dd","modified":1677736318086},{"_id":"public/2023/02/23/王阁/日常/运维/运维操作/index.html","hash":"57e4a9b2e06462d6060f4d0475f721ec143b878d","modified":1677736318086},{"_id":"public/2023/02/23/王阁/项目/古诗词竞赛/建设思路/index.html","hash":"fbade42efaf1fbb1d41070f654ce96fa23c9863c","modified":1677736318086},{"_id":"public/2023/02/23/王阁/技术/运维/ELK/kibana使用/index.html","hash":"7bb595918d9b289509413c2a97f6e865c4881927","modified":1677736318086},{"_id":"public/2023/02/23/王阁/技术/大数据/es/共享数据集合/index.html","hash":"cdaaaaf934f7d0e3571cfece59870899a903aa1f","modified":1677736318086},{"_id":"public/2023/02/23/王阁/技术/大数据/yarn/YarnState/index.html","hash":"11148bc165187d55b4fa12a5c1b30b0405585ebd","modified":1677736318086},{"_id":"public/2023/02/23/王阁/技术/课程记录/es专项/es记录/index.html","hash":"ce9e46aae78bcf5d195394eb11ff0326364dc7c0","modified":1677736318086},{"_id":"public/2023/02/23/王阁/技术/专题/数据建模/数据指标体系/index.html","hash":"eaafc47fc0f3dddae330a23e924117c381200b5c","modified":1677736318086},{"_id":"public/2023/02/23/王阁/技术/hexo/old/kafka/index.html","hash":"d44cd201112f3967cc2b4db18649bbebc4d10717","modified":1677736318086},{"_id":"public/2023/02/23/王阁/技术/运维/docker/Dockerfile基础&编写/index.html","hash":"ebe81534338fb01e9616f8ae6dd3a8decc4b460f","modified":1677736318086},{"_id":"public/2023/02/23/王阁/技术/hexo/old/mapreduce组件总结/index.html","hash":"b2a723f6f9b8a284bc86332ea67916d04f6244a1","modified":1677736318086},{"_id":"public/2023/02/23/王阁/技术/hexo/old/大数据相关分享/index.html","hash":"bf653708d3b163123b8ecab585a04acc7ad3d733","modified":1677736318086},{"_id":"public/2023/02/23/王阁/工作/旸谷数据中心/组件/clickhouse集群版实录/index.html","hash":"0622dd782d111d3b985c1834eeb680bb43b14bbe","modified":1677736318086},{"_id":"public/2023/02/23/王阁/工作/项目/铁四院数据平台/数仓/数仓架构设计图/index.html","hash":"3ba233302f68567fc15d01a3e48253695fc70e40","modified":1677736318086},{"_id":"public/2023/02/23/王阁/工作/旸谷数据中心/基础/Flink集成CDH/index.html","hash":"74943f4526e89cf1c9f6a2a2fd139a04caa3fcd3","modified":1677736318086},{"_id":"public/2023/02/23/王阁/工作/旸谷数据中心/基础/CDH基础环境部署/index.html","hash":"32c3cd47408b905d37a2ec2dc0581cc01c41720e","modified":1677736318086},{"_id":"public/2023/02/23/王阁/工作/旸谷数据中心/数据基础平台/数据基础平台建设思路/index.html","hash":"4c87cc1b7b4cbbe3238f03d09c20fb525c47a9d5","modified":1677736318086},{"_id":"public/2023/02/23/王阁/分享/数仓分享/index.html","hash":"ae097154b61c468d66955809349c7a43818482b9","modified":1677736318086},{"_id":"public/2023/02/23/王阁/工作/数据基础平台/数据集成/数据采集构建方案/index.html","hash":"3eb74c1c43d2d197329836892abaea12057d3974","modified":1677736318086},{"_id":"public/2023/02/22/王阁/技术/大数据/flink/2023/Flink学习历程/index.html","hash":"19e83cce250fbb19ea77812ee312d974829d42ec","modified":1677736318086},{"_id":"public/2023/02/20/王阁/技术/编程/java/计算处理/index.html","hash":"64230e0b7e8d0d3910a7ec514ab137d5aed1bb57","modified":1677736318086},{"_id":"public/2023/02/20/王阁/技术/编程/java/日期处理/index.html","hash":"238d0ae20f227e6e095ebab73d23cf4b458f2626","modified":1677736318086},{"_id":"public/2023/02/06/王阁/技术/大数据/flink/2023/flink_study/index.html","hash":"175282e39919d93608d8c414e09745c6d64bb9e4","modified":1677736318086},{"_id":"public/2022/11/08/王阁/工作/数据基础平台/日常运维/index.html","hash":"989730cbd5fa2b653b48fd518d67e978d893b467","modified":1677736318086},{"_id":"public/2022/11/03/王阁/技术/考研/C学习笔记/index.html","hash":"d4822db4ef7b86a8ee98dcebca56a47582998dc1","modified":1677736318086},{"_id":"public/2022/06/29/王阁/技术/开发/前端/vue学习/index.html","hash":"e3ea5980b8a4bb996183804b651db2f570762d28","modified":1677736318086},{"_id":"public/2022/06/05/王阁/技术/编程/java/并发编程/index.html","hash":"66e8271bc8f9bc45a71a1d2722d87692de457e01","modified":1677736318086},{"_id":"public/2022/06/19/王阁/技术/运维/调度/调度组件部署/index.html","hash":"36bab139a1103ed7a8ddb1f2f1cb494371f6f67c","modified":1677736318086},{"_id":"public/2022/05/21/王阁/项目/古诗词竞赛/诗词竞赛业务架构/index.html","hash":"73c078d3fdb66e4e458cb929db5b061d3343147a","modified":1677736318086},{"_id":"public/2022/04/26/王阁/技术/专题/技术专题/index.html","hash":"db29de1da3874d73679e7716a2da1dc0e2a60a6d","modified":1677736318086},{"_id":"public/2022/04/28/王阁/技术/专题/数据建模/数据仓库建设方案/index.html","hash":"9eff711dadf6c5dc2ace0e8d14de25fb07d98ee0","modified":1677736318086},{"_id":"public/2022/03/28/王阁/工作/旸谷数据中心/基础/元数据/Atlas切换搜索组件/index.html","hash":"e89c7d72450d3697d71c09f6f71ee411bc137c9c","modified":1677736318086},{"_id":"public/2022/05/02/王阁/技术/专题/sql专题/sql基础知识/index.html","hash":"dee8cdf4ae1ef5589e053334e783fb44ae636c54","modified":1677736318086},{"_id":"public/2022/03/21/王阁/技术/大数据/flink/flink任务提交/index.html","hash":"47a62e7e7c10dbc2e754f26c7360d112e865bbd5","modified":1677736318086},{"_id":"public/2022/03/19/王阁/技术/hexo/CDH/cdh集成phoenix/index.html","hash":"9cc787a91293f2a601c87c1adf9cf030c2809a5d","modified":1677736318086},{"_id":"public/2022/03/16/王阁/技术/hexo/old/sqoop实现方案/index.html","hash":"575f1a06cb334bf2799fc6d5a4a1c93e3136b61b","modified":1677736318086},{"_id":"public/2022/02/15/王阁/工作/数据基础平台/数据基础平台构建方案/index.html","hash":"85c492f130c0543e7fcc30f19730814db4f9a26f","modified":1677736318086},{"_id":"public/2022/02/21/王阁/工作/数据基础平台/数据运维/数据运维-采集任务模块/index.html","hash":"11a9deca879565f2308ff535a49c2bddbbab4b25","modified":1677736318086},{"_id":"public/2022/01/25/王阁/工作/项目/济泺路隧道/出差/test/index.html","hash":"7bba0991f5f1be4ac7db81ba2b96ff3f7fd2fd8c","modified":1677736318086},{"_id":"public/2022/01/04/王阁/技术/课程记录/Flink专项/flink记录/index.html","hash":"25923cd63547035318b4c22717229f49beef3d4a","modified":1677736318086},{"_id":"public/2021/12/01/王阁/工作/旸谷数据中心/数据基础平台/数据运维的构建方案/index.html","hash":"14e1b27eb260623dff8dccd9a209db23e41836be","modified":1677736318086},{"_id":"public/2021/12/01/王阁/工作/旸谷数据中心/数据基础平台/数据应用的构建方案/index.html","hash":"9fe2bf6db637ad51c1ef5e32d39a6be1a67f28c3","modified":1677736318086},{"_id":"public/2021/12/01/王阁/工作/旸谷数据中心/数据基础平台/数据安全的构建方案/index.html","hash":"dbd1b00d92f56f85769502d6a912ecdcb46309d5","modified":1677736318086},{"_id":"public/2021/12/01/王阁/工作/旸谷数据中心/数据基础平台/数据治理的构建方案/index.html","hash":"c2e31d94583b150f718a288222c659a3bd6d88d1","modified":1677736318086},{"_id":"public/2021/11/30/王阁/工作/旸谷数据中心/数据基础平台/数据管理的构建方案/index.html","hash":"a95d497529dbb11da6c4156d413a6a92f3659711","modified":1677736318086},{"_id":"public/2021/11/29/王阁/工作/旸谷数据中心/数据基础平台/数据集成的构建方案/index.html","hash":"decc87f141acb935c9207847cd71312e0fae2aad","modified":1677736318086},{"_id":"public/2021/11/29/王阁/工作/旸谷数据中心/数据基础平台/dataworks/index.html","hash":"b20c12d9b85e8e9541bf34b1f6eeafd4b2434be8","modified":1677736318086},{"_id":"public/2021/11/18/王阁/回顾/技能回顾/大数据相关组件/hadoop发展史/index.html","hash":"6b32d0357ab72858323f7f9ec6785908fa130758","modified":1677736318086},{"_id":"public/2021/11/17/王阁/回顾/技能回顾/整体规划思路/index.html","hash":"30bccac9935f2a3a731a306d7fde0f4b6b48e3f3","modified":1677736318086},{"_id":"public/2021/11/17/王阁/回顾/技能回顾/大数据相关组件/存储组件/index.html","hash":"b6f04cdea80fdfb5acf56bb2be24104e954f111b","modified":1677736318086},{"_id":"public/2021/10/15/王阁/日常/map/index.html","hash":"335d54145b299837f325473b1677fe3e43b43160","modified":1677736318086},{"_id":"public/2021/08/16/王阁/工作/项目/济泺路隧道/出差/flink运行参数/index.html","hash":"c17d6128d66bd9cb52e21cacdbb73eea8b4075bc","modified":1677736318086},{"_id":"public/2021/08/16/王阁/工作/项目/济泺路隧道/出差/相关配置地址/index.html","hash":"a9dcb332dd53804515312c475244fdd7f71fbd00","modified":1677736318086},{"_id":"public/2021/07/06/王阁/工作/旸谷数据中心/组件/azkaban的使用/index.html","hash":"bb8cf7950d9a78508ab94ea7a5093c97e1997b8f","modified":1677736318086},{"_id":"public/2021/07/20/王阁/工作/项目/绥延/采集地址/index.html","hash":"6665246bfc306e18b201144afe1784e60d6d1a44","modified":1677736318086},{"_id":"public/2021/07/05/王阁/工作/旸谷数据中心/config/datax/hive2myql/index.html","hash":"94f1d5faf596973961a0f73a69893816de043c1a","modified":1677736318086},{"_id":"public/2021/06/24/王阁/工作/旸谷数据中心/基础/元数据/数据血缘组件/index.html","hash":"a64030c420bcae52ec3dc45849fa67caafc7e6cd","modified":1677736318086},{"_id":"public/2021/06/21/王阁/技术/大数据/atlas/index.html","hash":"4aa23a8f1ec7ea18b62de449343c4c553a23e93b","modified":1677736318086},{"_id":"public/2021/06/18/王阁/技术/大数据/hbase/hbase_api升级/index.html","hash":"5761b446c5982cf7fc00bdc0530f69ad76dd482f","modified":1677736318086},{"_id":"public/2021/06/07/王阁/技术/大数据/spark/spark-streaming/index.html","hash":"67cd34ce96ec8aa01b6d2ea25d23e0ecee9166c0","modified":1677736318086},{"_id":"public/2021/06/04/王阁/工作/旸谷数据中心/安全模块/kerberos部署与使用/index.html","hash":"c1369142a728b6fc2e7195eac6e320094ce0ebf1","modified":1677736318086},{"_id":"public/2021/06/04/王阁/工作/旸谷数据中心/安全模块/数据中心安全模块设计大纲/index.html","hash":"dff782f9bdd351141e544db991ba2ed4251de840","modified":1677736318086},{"_id":"public/2021/05/28/王阁/工作/项目/济泺路隧道/flink服务/flink公司环境部署记录/index.html","hash":"dff210fe8ade7f05c97a42b27127801ce7de2b8e","modified":1677736318086},{"_id":"public/2021/05/28/王阁/工作/杂记/汉口项目公司服务操作/index.html","hash":"ce4240587b85ae8467d003f2557bd9104a34788d","modified":1677736318086},{"_id":"public/2021/05/28/王阁/工作/杂记/汉口源点项目相关信息/index.html","hash":"c5fafdc51e01d81df6116d9130ba9b8f095f6f37","modified":1677736318086},{"_id":"public/2021/05/21/王阁/工作/旸谷数据中心/基础/Logstash 部署/index.html","hash":"0c3eb3b890a7a3a540bce4a854cd7bb6c70844d2","modified":1677736318086},{"_id":"public/2021/05/14/王阁/工作/旸谷数据中心/基础/数据中心组件管理服务封装/index.html","hash":"6c7039337e725f307bf672739f9e458478c2e1ed","modified":1677736318086},{"_id":"public/2021/05/08/王阁/工作/项目/绥延/kafka测试环境/index.html","hash":"e174da3b09ed8f7993ba990bf6d28adf9fb6d019","modified":1677736318086},{"_id":"public/2021/05/08/王阁/工作/项目/洪雅/大数据验证/index.html","hash":"2cb193a42ea59bd75c8616be72f5d33c3ec1e8b3","modified":1677736318086},{"_id":"public/2021/05/04/王阁/技术/数据库/sql储备&练习/index.html","hash":"bb25dbf51687dbeb37adb6dc0f62add414833390","modified":1677736318086},{"_id":"public/2021/04/28/王阁/工作/旸谷数据中心/基础/数据采集服务封装/index.html","hash":"895e856b2d349627330c5a4b1c33843cf8ffd4c4","modified":1677736318086},{"_id":"public/2021/04/26/王阁/日常/考试/电子科大2019招生收集/index.html","hash":"bbb8b55759b061694522111470ae2d3fb5c24640","modified":1677736318086},{"_id":"public/2021/04/26/王阁/日常/vue/vue/index.html","hash":"57eebbbdeadf6053184f9365503bd2a75fc8bdba","modified":1677736318086},{"_id":"public/2021/04/26/王阁/日常/blog_sync_project/plan/index.html","hash":"12233d3af6992c07384261d5025a1bf36ef04ff9","modified":1677736318086},{"_id":"public/2021/04/26/王阁/日常/prepare/数据储备/index.html","hash":"14bda25ebf500eea8f2ed5fbfe74c754829edb9a","modified":1677736318086},{"_id":"public/2021/04/26/王阁/日常/运维/tmux上手/index.html","hash":"a2124e0e1dd4d46ba80b6467ff1754c83cf63584","modified":1677736318086},{"_id":"public/2021/04/26/王阁/日常/运维/京东云/index.html","hash":"bf267c6eebc0de46fa1faa95d8a1652ae61c2654","modified":1677736318086},{"_id":"public/2021/04/26/王阁/日常/运维/jumpserver/index.html","hash":"4a7c7258cb6dae16f4c54a6930d9d7239b93f584","modified":1677736318086},{"_id":"public/2021/04/26/王阁/日常/运维/操作记录/index.html","hash":"cd7c0e8792a6f079572f16afadd75215120f65f9","modified":1677736318086},{"_id":"public/2021/04/26/王阁/日常/运维/博客不同主题切换/index.html","hash":"b77b9ad580be2addaeb86a12adade3193d158879","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/hexo/Thread/多线程/index.html","hash":"7bf0e0704d5bcd35d88fef8d265fdfb684667300","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/hive/hive20190109/index.html","hash":"f441a1ea794fce99fbb12e9cfd464798fc81763e","modified":1677736318086},{"_id":"public/2021/04/26/王阁/日常/运维/about云账号密码/index.html","hash":"3bbd75b9e1f6ca7996fe43cf4de7301e91cedefd","modified":1677736318086},{"_id":"public/2021/04/26/王阁/工作/旸谷数据中心/基础/数据中心服务资源/index.html","hash":"5a7656fe6ccd5e8e4babfe4559cc7aae1e5d3ee5","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/hexo/kafka/kafka实现/index.html","hash":"f3a6a02f36f869ea1195910537a736fda4ba6d3b","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/hexo/old/Lamda积累/index.html","hash":"0b8e79a04a9ab6cffd73abf1fc0eba8a45cd266c","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/hexo/old/spark学习3/index.html","hash":"b124f8507883fe77f33b45bb51a0f583663c965c","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/hexo/old/准备小结/index.html","hash":"d93c9f2ee5161c43470fbfc4dcf12307aa3f1e1b","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/hexo/oldblog/blog22/index.html","hash":"308641ef276313feccdfac157a2f94f3e5dde2a5","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/Mongodb/常用命令/index.html","hash":"89397d9b45b66b3e8a9d4d8910dae75a3861ae72","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/es/es的docker安装/index.html","hash":"935a270cabe060657e35c372c4055757c558d297","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/es/es详细/index.html","hash":"36f6a483339a95f7feb816ed0bb8e8ab74fb1365","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/es/es小结/index.html","hash":"ae82343d0033ee052c80a408b63f2b321bf6f557","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/flink/Flink记录/index.html","hash":"4384244779288df1b5fcb9b648cd047ae8d45bf5","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/flink/flink/index.html","hash":"124b1a5fc81e4019ee8d99de7095ef16dd754b5b","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/flink/flink_book/index.html","hash":"4f762a7b3f6ec29d57966bd7eabe4f0043076ab1","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/hbase/hbase20190109/index.html","hash":"c21ad59976ab5d85e99e38587026557bbdf2954c","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/flume/docker版flume使用/index.html","hash":"00391a59b3c4395a223de2242a60049f0351aac0","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/kafka/kafka小结/index.html","hash":"1daf9db49a8ea09dab5e6a9af50c3ba52c4a4218","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/kafka/kafka原理/index.html","hash":"c252dad7658f362ce7213dccca2678d0643f19f6","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/kafka/kafka疑问点/index.html","hash":"a1940f6ea40ada0d34e5f4dce9a03479a7411a63","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/es/积累/index.html","hash":"f0d5584a35c64d251203b33723a369bcb4a19e2c","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/编程/bash/shell积累/index.html","hash":"f0dcb5530f8f1f833f1bd33b605866243f92439b","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/大数据/集群/私有集群/index.html","hash":"c475977c2edb5a6875efa34bea2e1892e9ec8c26","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/编程/bash/python_learn/index.html","hash":"9abd9d1d3f7aa53a55b663c48fc7fd9fec7217e2","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/编程/scala/scala学习/index.html","hash":"cb744b5b52b48f3f741bfbf837c3309e9c08eeea","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/front_end/nginx部署/index.html","hash":"eda86a1925d91c451729a2ae3b30d00533ba9017","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/cdh/hue/index.html","hash":"cb272452884450e832dd8e6562cc3384633b5ec2","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/docker/docker操作/index.html","hash":"89c21dc107a9ba0d6e8a61bc71201c7918c34f9d","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/hy-sjksh-info-dev/docker-compose/index.html","hash":"36dd3456f87a080fe9b7440bf1ba6d66366d4283","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/front_end/调研/index.html","hash":"b29d0911695a1782c5e8258f494feb06bc780f56","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/ubuntu/desk_gui/index.html","hash":"33ecaf0f6bcb9cb5809d6c6c10324254298f1de3","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/yd_server_config/README/index.html","hash":"e35d580c625aee86b4938d6a4fd5a43e5a4c4fc0","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/docker/docker/index.html","hash":"1eb5a8a554bb5275b6b269e8f78966dce38c9212","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/owncloud/账号/index.html","hash":"028d0ce48611425317a59701bda054ddef2b2182","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/docker/docker镜像/index.html","hash":"1fa5dbd530f7625589f0291ef656a9d07ce64926","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/ubuntu/linux自启服务/index.html","hash":"5821b3ae8ad08154ca70e6c73de7d856be3be7db","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/hexo/spark/算子/Spark-Windos函数/index.html","hash":"de9754ed34df818eb348066ad709c91c269c47ea","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/编程/bash/awk/awk/index.html","hash":"b14237151f5b0b66148b7b822fa7b0b3947e2159","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/编程/python/summary/2020.3.17/index.html","hash":"596b4a610b05100ebeea601a53aedded4a4020e7","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/front_end/接口规划/data-manager/index.html","hash":"f8726fe74733c7d77bc0232f9c43274fd38fc291","modified":1677736318086},{"_id":"public/2021/04/26/王阁/技术/运维/yd_server_config/sjksh_store_info/docker-compose/index.html","hash":"1576cf50f0de4e501923f566c3fa05475dd0a9d1","modified":1677736318086},{"_id":"public/2020/07/16/王阁/技术/hexo/spark/算子/RDD算子/index.html","hash":"95629fe2c497c3dd6ca5d7f3223a02df7fae2c4e","modified":1677736318086},{"_id":"public/2020/07/10/王阁/技术/运维/ELK/logstash/beats/index.html","hash":"c2354b5f1d451991e625bb0ab8ea1d73084b9213","modified":1677736318086},{"_id":"public/2020/07/09/王阁/技术/运维/ELK/logstash/logstash/index.html","hash":"7c4e733b67e6033d537e70245e46f9f03193a236","modified":1677736318086},{"_id":"public/2020/06/23/王阁/回顾/hive/hive回顾/index.html","hash":"e68eed26fc22c001edcc96c99883a586a4dddaa1","modified":1677736318086},{"_id":"public/2020/06/17/王阁/技术/大数据/es/elk使用/index.html","hash":"fab0b405d4d4b24a648b59e4304d314141771aa0","modified":1677736318086},{"_id":"public/2020/06/16/王阁/技术/大数据/es/esDSL详解/index.html","hash":"bcc876401a7f0a06e36ff110aafc70a9476ccb58","modified":1677736318086},{"_id":"public/2020/06/15/王阁/技术/大数据/kafka/kafka极客/index.html","hash":"b968131a3df441c698cf525cb5bc197cdd685b35","modified":1677736318086},{"_id":"public/2020/06/10/王阁/技术/编程/python/reptile/python爬虫篇/index.html","hash":"7f833d3674f93052932b6208eab6425d81b4838b","modified":1677736318086},{"_id":"public/2020/06/04/王阁/日常/考试/考试相关/index.html","hash":"2423e885021af8a8f1f0b044d056a5e7ef4301f6","modified":1677736318086},{"_id":"public/2020/06/04/王阁/日常/运维/docker启动mysql/index.html","hash":"8a3ac9da8881ff55c19be3b7be307b40a25156a7","modified":1677736318086},{"_id":"public/2020/06/04/王阁/技术/编程/python/summary/python5小结/index.html","hash":"6e21d436882b25effab66f56b912943c4a6e3c3d","modified":1677736318086},{"_id":"public/2020/06/02/王阁/技术/编程/python/summary/python小结4/index.html","hash":"dc6166bcaee2eb9a0d7f4caef55bad2dd519fed9","modified":1677736318086},{"_id":"public/2020/05/29/王阁/技术/编程/python/summary/python小结3/index.html","hash":"81c772e88598d5482ab700652ff5172946f5fee2","modified":1677736318086},{"_id":"public/2020/05/25/王阁/日常/运维/mac python版本替换/index.html","hash":"e176dc329afee6f63ef7c92cc4415ddcc03d4dce","modified":1677736318086},{"_id":"public/2020/02/25/王阁/技术/大数据/es/es常用命令/index.html","hash":"43ed7c36d6e55baf1b681545a2d261d14e5729b0","modified":1677736318086},{"_id":"public/2019/07/31/王阁/技术/hexo/flink/Flink/index.html","hash":"9670e30aa2b89bb5ae9cde2ffc7c49c60247e2d6","modified":1677736318086},{"_id":"public/2019/07/17/王阁/技术/hexo/hadoop/hdfs/hdfs命令/index.html","hash":"cf703aefa1c2f5229f993ac9ed6b3b502bb88a9d","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog1/index.html","hash":"ac4ad679208a87a16fcbf984e4104e86832d7fce","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog10/index.html","hash":"47f740497970da15112dcf85799ca6907041e17d","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog13/index.html","hash":"e25af829454934111023104e990c6bc482048408","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog12/index.html","hash":"6753e8a8e6b578eeebc51478ee0efad8e35d314f","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog17/index.html","hash":"25ea8c451270eb03c71002813697be784eb23e64","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog15/index.html","hash":"73a003b044a8553e9227ae1fb42ea8ab43d8c597","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog19/index.html","hash":"a5f663633227ece90b08464cea622bcc63529da5","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog14/index.html","hash":"d7c47b9858e51fd7dbf5c720a1f9bd7b0c2ea7ff","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog2/index.html","hash":"0f4938593e0bbd0f656a02a216ae7765c984cc8b","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog20/index.html","hash":"69aab0f06c38c3b9960012c92b748df3d430f713","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog11/index.html","hash":"ae7c6152154f8c4eb870daf4709df16c561e4d3b","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog16/index.html","hash":"627c4ba86d6816cda1f85894a9979ec8b7e6a6d1","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog18/index.html","hash":"354e4116fc72b66da26455df00a9c7eb1f76691d","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog23/index.html","hash":"2b150202955faf9740e69333b673bba02b422a21","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog25/index.html","hash":"b1fad85d112480a1a0b02efba602d52e4285cb46","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog7/index.html","hash":"1fab47a23ac9b882bb47a7beb9a4e2469589179b","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog26/index.html","hash":"40c7418a24a65d6e93010c4c81c4b652bc893438","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog6/index.html","hash":"3e10ec12b90475eb7b7f0d7f5468897091ce2763","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog24/index.html","hash":"fb5241bcb5da8be063ed640be30784bff2433394","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog3/index.html","hash":"cc02d108fecd771c3cb6561f673b7e9ffa577439","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog21/index.html","hash":"bc1e96220c8192b1e42b1541999474019ddcfd76","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog4/index.html","hash":"3a4d149cb12dc2e83bf82d4a832a6a8b8240eefa","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog9/index.html","hash":"d14ff9b97a5868af969f5b1a93c4437f88e05c2b","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/oldblog/blog8/index.html","hash":"e2d7a762823fd5a2574b22ff4b8e9765be65e0cd","modified":1677736318086},{"_id":"public/2019/07/15/王阁/技术/hexo/spark/stream/index.html","hash":"3861944583eb30d47a617e18185e55e9fdeaf09b","modified":1677736318086},{"_id":"public/2019/06/19/王阁/技术/大数据/flume/Flume/index.html","hash":"7e6396cb875e46ebd97a61a470e32a7102ae82d7","modified":1677736318086},{"_id":"public/2019/06/13/王阁/技术/hexo/old/Yarn配置/index.html","hash":"47a20aae062ae06b4fc616f99fbba6d89743f917","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/spark/宽窄依赖/index.html","hash":"1deef4e9c565a0ed1f2e3a1cc7c8a19ba781eb8e","modified":1677736318086},{"_id":"public/2019/06/13/王阁/技术/hexo/old/flume记录/index.html","hash":"2cb58159d312928134bfbfd80ad058449d1a3733","modified":1677736318086},{"_id":"public/2019/07/16/王阁/技术/hexo/spark/stream2/index.html","hash":"f8b298f6819378f112e7a55e53681aa00e744b86","modified":1677736318086},{"_id":"public/2019/06/13/王阁/技术/hexo/spark/sql/SparkSql/index.html","hash":"4cde0ad5635ba8693a6bbdfc1a56c2b872f9ee0a","modified":1677736318086},{"_id":"public/2019/05/27/王阁/技术/hexo/CDH/搭建/index.html","hash":"37a42d609c748830608213566d617857d755c455","modified":1677736318086},{"_id":"public/2019/05/17/王阁/技术/hexo/hadoop/hbase/hbase操作/index.html","hash":"6cff581d3941793de7cb63f17a8f8de64d152d4e","modified":1677736318086},{"_id":"public/2019/05/17/王阁/技术/hexo/spark/spark操作/index.html","hash":"b611dd80b88abc003481df83c196436062d255a8","modified":1677736318086},{"_id":"public/2019/05/16/王阁/技术/hexo/hadoop/hadoopHA搭建/index.html","hash":"1fa0b5f98005c56ec9d2bc1c3753c7af99e8a845","modified":1677736318086},{"_id":"public/2019/05/16/王阁/技术/hexo/hadoop/hdfs/hdfs操作/index.html","hash":"3157e5f8687a17d8205d33c6f54ceae5a7b5df7b","modified":1677736318086},{"_id":"public/2018/12/24/王阁/技术/hexo/old/hive总结/index.html","hash":"07b4f6ece0c81d08297351ab4162074b4c2a8267","modified":1677736318086},{"_id":"public/2018/06/04/王阁/技术/hexo/old/hbase积累/index.html","hash":"6178165e52334d37e41ca99c81e8819be48ad8f1","modified":1677736318086},{"_id":"public/2018/03/04/王阁/技术/hexo/old/spark学习2/index.html","hash":"2279a8614d28764151d7ca3e98898f72eb26be1e","modified":1677736318086},{"_id":"public/2018/03/04/王阁/技术/hexo/old/spark学习/index.html","hash":"a06c6ce44941c488cf1062398c635f1f98173a90","modified":1677736318086},{"_id":"public/2018/03/04/王阁/技术/hexo/old/spark算子/index.html","hash":"7f6da34f499d5244e1c3771ae1b891f3a4c0b80c","modified":1677736318086},{"_id":"public/2018/03/04/王阁/技术/hexo/old/sqoop记录/index.html","hash":"f0e633f635b230157e5c8175efcb66a94eace7ee","modified":1677736318086},{"_id":"public/archives/index.html","hash":"411ae5629a79f4ef0485c9c593182b972f1127ac","modified":1677736318086},{"_id":"public/archives/page/2/index.html","hash":"1e19dd6db5a9eb81976d0bd82e31bcd327672729","modified":1677736318086},{"_id":"public/archives/page/3/index.html","hash":"ca2eea78d5c5979b07522d06edc08fab0a1c910c","modified":1677736318086},{"_id":"public/archives/page/4/index.html","hash":"c08419ddb61a694bc9bab94bb3b636b5e248c23b","modified":1677736318086},{"_id":"public/archives/page/5/index.html","hash":"d2fca04103bf9ba73dbc5af4c15acb08dfde7018","modified":1677736318086},{"_id":"public/archives/page/6/index.html","hash":"1b2d3876d9d6e3d4be6d869848be8fc2ea862810","modified":1677736318086},{"_id":"public/archives/page/7/index.html","hash":"6c003269f69c38f84368fe1a4f0d58e66dbbcb53","modified":1677736318086},{"_id":"public/archives/page/10/index.html","hash":"294fad19b430a944883273f43341c704c25633e7","modified":1677736318086},{"_id":"public/archives/page/11/index.html","hash":"5a7c7e7f912632bba30b1e120a2a8968138852ff","modified":1677736318086},{"_id":"public/archives/page/12/index.html","hash":"ca30bfceac54a28d5bf85c7d62afb10e351a515e","modified":1677736318086},{"_id":"public/archives/page/13/index.html","hash":"f1f7dcb08282f64b454468a06dd5338c27cb5314","modified":1677736318086},{"_id":"public/archives/page/14/index.html","hash":"f46946e431410d7168bc6ad1db0509903102f9f6","modified":1677736318086},{"_id":"public/archives/page/9/index.html","hash":"d8c3f6568e530a2b8abb588cc5408717ad58b2ea","modified":1677736318086},{"_id":"public/archives/page/15/index.html","hash":"37c5e58a78b3979128cd4c816f57332e7a5f47c4","modified":1677736318086},{"_id":"public/archives/page/8/index.html","hash":"ec58e4a85828e03018fd54f9387c54d2e99854fd","modified":1677736318086},{"_id":"public/archives/page/16/index.html","hash":"d8e9eca2e1f376a3a1d25b96ead06c1d81848df5","modified":1677736318086},{"_id":"public/archives/page/17/index.html","hash":"0b28a057d529affd0b3afa4901df5ec835ec1618","modified":1677736318086},{"_id":"public/archives/page/18/index.html","hash":"db87edb017d39312f8739a2df0315f0d428d4fae","modified":1677736318086},{"_id":"public/archives/2018/index.html","hash":"40c84126ba152645c60d65a09c3eb72195b9ad79","modified":1677736318086},{"_id":"public/archives/2018/03/index.html","hash":"22feff9e301246a0e762c53da791a6b7ea423da7","modified":1677736318086},{"_id":"public/archives/2018/06/index.html","hash":"93e8d8ea36982e71aa365ea83a82dd6c93a2065c","modified":1677736318086},{"_id":"public/archives/2018/12/index.html","hash":"0bbbd38ede4dbbcf77aab4ad4e1a5f4edac2a500","modified":1677736318086},{"_id":"public/archives/2019/index.html","hash":"7e12ea09b4954df521cbb2d70d91cb18109bf83c","modified":1677736318086},{"_id":"public/archives/2019/page/2/index.html","hash":"23524f4155af8a777dcd62c65054a026ce561e99","modified":1677736318086},{"_id":"public/archives/2019/page/3/index.html","hash":"3f8fc38dd2aa8fe779fe3dc796d5210492bc01d1","modified":1677736318086},{"_id":"public/archives/2019/page/4/index.html","hash":"f78654993d7c9c8141e91b0095ed284b9dee8dc3","modified":1677736318086},{"_id":"public/archives/2019/05/index.html","hash":"580eee1e1fbbf67ec7947c260c1d131892d45363","modified":1677736318086},{"_id":"public/archives/2019/06/index.html","hash":"d584beb80884a33ab79920289e1f912eac4dfa0b","modified":1677736318086},{"_id":"public/archives/2019/07/index.html","hash":"0c8c5965b7d9e0476f58cd6ce16b87e000ebb890","modified":1677736318086},{"_id":"public/archives/2019/07/page/2/index.html","hash":"fe2557686c5d359de1c3acfdb6df9599bf70e91b","modified":1677736318086},{"_id":"public/archives/2019/07/page/3/index.html","hash":"70bd28a76b379b730bdc7e664ddb919e612058d1","modified":1677736318086},{"_id":"public/archives/2020/index.html","hash":"852cc45aef11887a2d0468ce280b4530d30382a1","modified":1677736318086},{"_id":"public/archives/2020/page/2/index.html","hash":"dcafced3b6dba6cf571ae9c72abfd75376d3ecc4","modified":1677736318086},{"_id":"public/archives/2020/02/index.html","hash":"6e4111e4d2a50d17fc18dafdcc3a86c2e65d8be7","modified":1677736318086},{"_id":"public/archives/2020/05/index.html","hash":"639a72548fcb613f6a13b32c64c4493eb89c7259","modified":1677736318086},{"_id":"public/archives/2020/06/index.html","hash":"6dbb0e36e1434d905a17828409324a96e769dd5c","modified":1677736318086},{"_id":"public/archives/2020/07/index.html","hash":"7e3777d33725534bbabd771f0e42e488a828f4bc","modified":1677736318086},{"_id":"public/archives/2021/index.html","hash":"b17bcbfeb75f2a28d269a429c0009b92713ce376","modified":1677736318086},{"_id":"public/archives/2021/page/2/index.html","hash":"d86898d7b02343a4bbe269eab4046911879c41ba","modified":1677736318086},{"_id":"public/archives/2021/page/3/index.html","hash":"d6bc77ff4b8b745d317d669adbd9009fd5791297","modified":1677736318086},{"_id":"public/archives/2021/page/4/index.html","hash":"701de750055068581d8d77351aa44a36df2e3301","modified":1677736318086},{"_id":"public/archives/2021/page/5/index.html","hash":"8efc2dc036d454d0f778e45f94fd49bfb7aa2f6f","modified":1677736318086},{"_id":"public/archives/2021/page/6/index.html","hash":"d8e617f908d18db068d0c7663df9cd690679c351","modified":1677736318086},{"_id":"public/archives/2021/page/7/index.html","hash":"526ab471c82900083a0714c207f81899fc0ad4f7","modified":1677736318086},{"_id":"public/archives/2021/page/8/index.html","hash":"fd466036dffcacccc521e5c4f64133b8b257de21","modified":1677736318086},{"_id":"public/archives/2021/page/9/index.html","hash":"58a03eb9a50fd5c488e0e0a19add5108da9cf542","modified":1677736318086},{"_id":"public/archives/2021/04/index.html","hash":"4f19a3c9e9090c900e6f1f5b2b991760a344cb34","modified":1677736318086},{"_id":"public/archives/2021/04/page/2/index.html","hash":"7d626e9eb75bb56e7df14d6a382a3a36c15f2409","modified":1677736318086},{"_id":"public/archives/2021/04/page/3/index.html","hash":"6a5bbaf15f4e517ce91a95940f760748b5d11e12","modified":1677736318086},{"_id":"public/archives/2021/04/page/4/index.html","hash":"f62ddee4af8855d0a219da4d25b8ec2123a4d0a5","modified":1677736318086},{"_id":"public/archives/2021/04/page/5/index.html","hash":"8e439dcf36128cf82458996079e6ca14cadc53fe","modified":1677736318086},{"_id":"public/archives/2021/04/page/6/index.html","hash":"3f808759962f38e957a0d201915f58e394c5c44c","modified":1677736318086},{"_id":"public/archives/2021/05/index.html","hash":"886fb889bc71e5ea3e8044ce979d7223ebbf53b5","modified":1677736318086},{"_id":"public/archives/2021/07/index.html","hash":"f81ede521c02d404c74b82858ebbda2287ca5ac8","modified":1677736318086},{"_id":"public/archives/2021/08/index.html","hash":"0f0ab793dd071bb89d6122afd2082ed605b2fa2c","modified":1677736318086},{"_id":"public/archives/2021/10/index.html","hash":"24fed81cafa383e9ee1a6e8ade45680298c196c9","modified":1677736318086},{"_id":"public/archives/2021/06/index.html","hash":"cbd96131e733cce9bc4eac6fffd63d314071ba68","modified":1677736318086},{"_id":"public/archives/2021/11/index.html","hash":"c11a6cf53c17656f43844e20e94cb38aedcee4c7","modified":1677736318086},{"_id":"public/archives/2021/12/index.html","hash":"cd0d4f1428c690065a151f05a8495fa1196eb734","modified":1677736318086},{"_id":"public/archives/2022/index.html","hash":"a638ef44e22d930eb942ff17bba68b38889d0a07","modified":1677736318086},{"_id":"public/archives/2022/page/2/index.html","hash":"3ad1c7c46cd84482a887b226e1bebb23f0add7fe","modified":1677736318086},{"_id":"public/archives/2022/01/index.html","hash":"6eb1365900fe06965769f9fa76a84c0e2fe8bfb2","modified":1677736318086},{"_id":"public/archives/2022/02/index.html","hash":"4c5a14e7efc4eb5691b91bdc3029d0fb0cc74e26","modified":1677736318086},{"_id":"public/archives/2022/03/index.html","hash":"6a512a2d089f07190d773349b5a3edece950b94e","modified":1677736318086},{"_id":"public/archives/2022/04/index.html","hash":"717a1d043f4cc210d2a8ad343e830f782d234fb9","modified":1677736318086},{"_id":"public/archives/2022/06/index.html","hash":"dd8ac72984516dba09ff7f8d693dcd6a22756fe1","modified":1677736318086},{"_id":"public/archives/2022/05/index.html","hash":"76204e14af3dad230795579b9fcde4c79526d7d1","modified":1677736318086},{"_id":"public/archives/2022/11/index.html","hash":"598c5be641fdc0e91956d0fcc78cd79ba814b486","modified":1677736318086},{"_id":"public/archives/2023/index.html","hash":"6500e18a0a715a3590de1d234efb859efd078be9","modified":1677736318086},{"_id":"public/archives/2023/page/2/index.html","hash":"1b8fac38e30ae652e2e012e172cc5808fc7d8f9b","modified":1677736318086},{"_id":"public/archives/2023/page/3/index.html","hash":"a365ccfc283375ffc2a11fc30e1cc9cd1b4b127a","modified":1677736318086},{"_id":"public/archives/2023/02/index.html","hash":"bcafa5ba596a5dd302c21ce67218565c59da7225","modified":1677736318086},{"_id":"public/archives/2023/02/page/2/index.html","hash":"e7301434822605aee707e37a5940d09bf8f935fa","modified":1677736318086},{"_id":"public/archives/2023/02/page/3/index.html","hash":"0c000cf884a85e82bf03adccb20325e594f6caaf","modified":1677736318086},{"_id":"public/page/2/index.html","hash":"e204559071744bf9a982a8d1d7b78180885493c2","modified":1677736318086},{"_id":"public/index.html","hash":"76497954dcaf605cd083160cdd29ca2386cc52bc","modified":1677736318086},{"_id":"public/page/3/index.html","hash":"7f0624640715d9f093d99448d946a5849f67ae24","modified":1677736318086},{"_id":"public/page/4/index.html","hash":"bf5607c80b007a2047911d3888787959eceb5655","modified":1677736318086},{"_id":"public/categories/日常/index.html","hash":"e4d098ad61771b2ce0403cda328753805aa16427","modified":1677736318086},{"_id":"public/page/5/index.html","hash":"52e077aa2616f979dbb4d36a6cbeea393f9d6a6a","modified":1677736318086},{"_id":"public/page/6/index.html","hash":"31c109c1b92c37d84d5bbfafe81dd0ca4fb354ac","modified":1677736318086},{"_id":"public/page/7/index.html","hash":"47587fb632a24f1854c81cce37c6ade1b87eb9f8","modified":1677736318086},{"_id":"public/page/8/index.html","hash":"b92ac5f58e5c9519812b8aa745e31471eee03f12","modified":1677736318086},{"_id":"public/page/9/index.html","hash":"322de64036cd1c9ef13a0f98e45c485c019d491a","modified":1677736318086},{"_id":"public/page/10/index.html","hash":"ac86b745e090a4bbbba015e6f9ddd59aeb7b9e75","modified":1677736318086},{"_id":"public/page/11/index.html","hash":"aa4146374181dc3b0d9c449081f55a987d96089c","modified":1677736318086},{"_id":"public/page/12/index.html","hash":"fb66533d353920079fc4975101941d44970a1081","modified":1677736318086},{"_id":"public/page/13/index.html","hash":"55f30d16d147c06748cf657a193be1cfcc9d7af1","modified":1677736318086},{"_id":"public/page/14/index.html","hash":"3450dad5d2b0c46c021825eb094a5a4c21019b4d","modified":1677736318086},{"_id":"public/page/15/index.html","hash":"2ebb0fabe09f4f487c91d2a3557023cfaac4657a","modified":1677736318086},{"_id":"public/page/16/index.html","hash":"693bc7ac605236f5e7804237c87ad00a67377985","modified":1677736318086},{"_id":"public/page/17/index.html","hash":"b227a78efe197cfb182c1741fc3f0b7d3e79f3c0","modified":1677736318086},{"_id":"public/page/18/index.html","hash":"046f1c66901b971627d60dae35222c88cd29dedc","modified":1677736318086},{"_id":"public/tags/数据仓库/index.html","hash":"9929ca5d20f2dc0a7e0c11d0f59139fa0620de5b","modified":1677736318086},{"_id":"public/tags/sql/index.html","hash":"597e26b428c35a69f631ee8f8d4824a234e3880a","modified":1677736318086},{"_id":"public/tags/mysql/index.html","hash":"dcc4f01b92c3ed54b6df827d1498292281a3d0b4","modified":1677736318086},{"_id":"public/tags/docker/index.html","hash":"12d3bbef00ce650b42743d493e7006c5e03512ef","modified":1677736318086},{"_id":"public/tags/atlas/index.html","hash":"c740b9fcb3acdcc425863156592f8a4ce0a15f70","modified":1677736318086},{"_id":"public/tags/运维/index.html","hash":"86055b14f899a00adb292aa8f028a640c2ee8006","modified":1677736318086},{"_id":"public/tags/血缘管理/index.html","hash":"8a4c0682214778b68a30c2ad23868f8b5e7c3ecb","modified":1677736318086},{"_id":"public/tags/mac-python2-python3/index.html","hash":"653d878529cb56a3d00a6cb3c4a0546a09ad0c65","modified":1677736318086},{"_id":"public/tags/hive/index.html","hash":"ef4d6149fe630513182136843850f78fb8bf73f8","modified":1677736318086},{"_id":"public/tags/DDL/index.html","hash":"e7ebd4bfa54c4e22e51bb8e002c14c06b96ce077","modified":1677736318086},{"_id":"public/tags/DML/index.html","hash":"51b22f5728f5745d5ae80eda540e6f34a9cd126f","modified":1677736318086},{"_id":"public/tags/flink、CDH/index.html","hash":"715f9481a5f691b297a4f9b65975078c01577fb4","modified":1677736318086},{"_id":"public/tags/cdh/index.html","hash":"48d14e60470f170623f43f291f54d550e127a5d6","modified":1677736318086},{"_id":"public/tags/cm/index.html","hash":"77cbfac115d6e98cccf048c461f8142b168bcac5","modified":1677736318086},{"_id":"public/tags/数据中心/index.html","hash":"96d16cc3da7e1c9ef8002753744b9bef95d57340","modified":1677736318086},{"_id":"public/tags/kerberos/index.html","hash":"d53ff18882dfe2ad4d6a55255aa184d42f37ac36","modified":1677736318086},{"_id":"public/tags/flume/index.html","hash":"dedeeb79863424df939a36fe111cfc814aa7aa89","modified":1677736318086},{"_id":"public/tags/beats/index.html","hash":"d28e65268971988fbb98faa54825e7996c6e6ec0","modified":1677736318086},{"_id":"public/tags/采集/index.html","hash":"c71eb83e356cd910da0a9b1b7ebabc34c54203d1","modified":1677736318086},{"_id":"public/tags/数据中心，安全，kerberos/index.html","hash":"895fdab956048e5be35c5b916b92da867d7e97f7","modified":1677736318086},{"_id":"public/tags/服务器/index.html","hash":"e75a6f4d9e5e4753fdbfc178fcf0e6a7eb3d50bc","modified":1677736318086},{"_id":"public/tags/sentry/index.html","hash":"647b76593a842fb983d836f10b662ee88103d967","modified":1677736318086},{"_id":"public/tags/ip/index.html","hash":"8e1eee329980b3e3e3832760e6f65809bd21dc11","modified":1677736318086},{"_id":"public/tags/信息/index.html","hash":"8bc4fe786db56de2edffa8ab4adacc8023aec49c","modified":1677736318086},{"_id":"public/tags/clickhouse、数仓/index.html","hash":"3e04afd3ef5c0fd2e968a70c933241543cfc2d1c","modified":1677736318086},{"_id":"public/tags/kafka/index.html","hash":"f95bf5cf81dd83341aa26523f97de90761601841","modified":1677736318086},{"_id":"public/tags/es/index.html","hash":"258b5ad635b95c6e0dbff2318c7fb7589e41c24b","modified":1677736318086},{"_id":"public/tags/dataworks/index.html","hash":"fca4eac49adc3f16b3121761c2e87ec5c1836dde","modified":1677736318086},{"_id":"public/tags/数据运维/index.html","hash":"a8149f8a7fe1166c55d5f40bd69657dea6fdd238","modified":1677736318086},{"_id":"public/tags/数据集成、数据采集、数据存储/index.html","hash":"39644463e8ce0c09407dab084a584570d57316e8","modified":1677736318086},{"_id":"public/tags/数据应用/index.html","hash":"899b9b1c9ac87f202746962bc3b3ee38de15662d","modified":1677736318086},{"_id":"public/tags/数据治理/index.html","hash":"66dc576969fef7be46b0ad494f0942de6567d83c","modified":1677736318086},{"_id":"public/tags/数据管理/index.html","hash":"690758f99c4ee918c102042e65b85019fb2d4305","modified":1677736318086},{"_id":"public/tags/日常总结/index.html","hash":"94ba9cd6487e5ee478d245100774e2faca0ea552","modified":1677736318086},{"_id":"public/tags/bigdata/index.html","hash":"5280497b4cc4fe3ace864c89b4c7315599364091","modified":1677736318086},{"_id":"public/tags/flink/index.html","hash":"692ccc0cfd2aa360fe361e227df4737aaab68dd9","modified":1677736318086},{"_id":"public/tags/学习spark2/index.html","hash":"53b7395612235dd922941f54eeaf817c444b4411","modified":1677736318086},{"_id":"public/tags/学习spark/index.html","hash":"5a20fd19a8b2a187453846a8b75923fbd1782522","modified":1677736318086},{"_id":"public/tags/sparkstream/index.html","hash":"ec31dbc832529f0e23b0eb61ad476a5a3898696b","modified":1677736318086},{"_id":"public/tags/小结/index.html","hash":"19cbf41d672792081caf7d8512770d88a92c6eb4","modified":1677736318086},{"_id":"public/tags/sparkstreaming/index.html","hash":"1e3f56a160395c14deb1aa56d4bf18a6f079f8db","modified":1677736318086},{"_id":"public/tags/spark-dependency/index.html","hash":"08f7257257bd6a78662130b7a8922cabdc7d3b28","modified":1677736318086},{"_id":"public/tags/logstash/index.html","hash":"03e4588a85de6d223ddf8abe1681769635d550be","modified":1677736318086},{"_id":"public/tags/spark学习/index.html","hash":"63a69b8ed22313007ac6b9a8621ddba76b6727fc","modified":1677736318086},{"_id":"public/tags/dsl/index.html","hash":"c8d3769a193762ca40ed97207c0af339e192f86b","modified":1677736318086},{"_id":"public/tags/elasticsearch/index.html","hash":"b306f528a1ea0da8adbe880bbe07bab4b601fbd9","modified":1677736318086},{"_id":"public/tags/hbase/index.html","hash":"020ab4fa6995eb4cd1ac17e33b1e13695959dd6b","modified":1677736318086},{"_id":"public/tags/api升级/index.html","hash":"b717b2c83780414958944c7bedac2a7eea115533","modified":1677736318086},{"_id":"public/tags/流式计算引擎/index.html","hash":"53e142002722163876bda9ba7a0746950b9fbe07","modified":1677736318086},{"_id":"public/tags/kakfa/index.html","hash":"e1980eb0e9a8b58b8de4e05b69671a6da103a27d","modified":1677736318086},{"_id":"public/tags/极客时间/index.html","hash":"df16cdff344732f16fe07b0458a53f3086555d43","modified":1677736318086},{"_id":"public/tags/spark-streaming/index.html","hash":"d486a4737632c5023a1e0ae6ce891a30b20f6866","modified":1677736318086},{"_id":"public/tags/java/index.html","hash":"a47a4870c090dbacfce0e12c4c02c3c3090e51ad","modified":1677736318086},{"_id":"public/tags/math/index.html","hash":"606d965614931a97242e2c726d556416f5184abf","modified":1677736318086},{"_id":"public/tags/BigDecimal/index.html","hash":"0d967a36add74e14b5ee0c224eedac2ee95acd65","modified":1677736318086},{"_id":"public/tags/kibana/index.html","hash":"c890ff7a2932e17881da60502931a44ccbbba684","modified":1677736318086},{"_id":"public/tags/LocalDate/index.html","hash":"f7f75aed07ef13a47fb1cc1d0125f54b3a580d59","modified":1677736318086},{"_id":"public/tags/Duration/index.html","hash":"eb71473cec6295f8de82052af57bc509649555a4","modified":1677736318086},{"_id":"public/tags/flink、极客时间/index.html","hash":"13ea15f6be9a335060b1ddc495ea1020645f4669","modified":1677736318086},{"_id":"public/tags/数据血缘管理/index.html","hash":"714fa4a9a85c98d22614b6e3373f041ae2032f4e","modified":1677736318086},{"_id":"public/tags/altas/index.html","hash":"162e77a61c07208d07edb6abaf9a458fa90e4c80","modified":1677736318086},{"_id":"public/tags/数据仓库、架构设计/index.html","hash":"7dc0e96be01ece3b2376c87a2b7ea600f61b1e60","modified":1677736318086},{"_id":"public/tags/hdfs/index.html","hash":"b93c3b8b81f3de9d4e60c99061cf2cc3d2f61d21","modified":1677736318086},{"_id":"public/tags/spark/index.html","hash":"c9943cd16692b5861b1c2f7606bc2a6ed6db9d7a","modified":1677736318086},{"_id":"public/tags/rdd/index.html","hash":"5a54d3efe93f8be138f12b6c836bc97fde0fec7a","modified":1677736318086},{"_id":"public/tags/算子/index.html","hash":"e4b65c08cc4e5e7c5e9ba05e0109c4c3bfbeb5a1","modified":1677736318086},{"_id":"public/tags/常规api封装/index.html","hash":"daaeacbd3e4fa192659d59f73c233fb9e4dce40b","modified":1677736318086},{"_id":"public/tags/爬虫/index.html","hash":"685872240d61f2db91f386c908c81342e2e480da","modified":1677736318086},{"_id":"public/tags/python/index.html","hash":"786f1b6e3cb31112759db9e1bb53789df77f427d","modified":1677736318086},{"_id":"public/tags/connect/index.html","hash":"950af046761a25930d616f5e4355538fea480f56","modified":1677736318086},{"_id":"public/tags/json/index.html","hash":"4bb3fe03f3b98d70b1c229e448ef84acfcb1b334","modified":1677736318086},{"_id":"public/tags/xml/index.html","hash":"7814b47f87e54ea1e9054eda940057fbf247b62d","modified":1677736318086},{"_id":"public/tags/poi/index.html","hash":"869a033f4e25ff3a62cc8615798d800de2efe802","modified":1677736318086},{"_id":"public/tags/log/index.html","hash":"c42b06ff1cda9b04f87d21058be8f2a37261dbaa","modified":1677736318086},{"_id":"public/CNAME","hash":"160fc677cb4c117e9970f50c384bc5e399104202","modified":1677121339786},{"_id":"public/favicon.ico","hash":"268be0a863caae7c5a732fb8a911a81434f31117","modified":1677121339786},{"_id":"public/lib/blog-encrypt.js","hash":"91fda12d550323056762c5408623eb8a1d201ecc","modified":1677121339786},{"_id":"public/css/blog-encrypt.css","hash":"22e25b0d16ea053d25eb971e038c817a4c9cb584","modified":1677121339786},{"_id":"public/css/main.css","hash":"5012e93d7798c3268198d2820961840a380ce2c0","modified":1677736318086},{"_id":"public/js/main.js","hash":"3216da0a4e322b58917a94f9296ddca3823fd3a4","modified":1677121339786},{"_id":"public/lib/highlight/darcula.css","hash":"7740224d07375ddc321147dffabbfa83e39f0d8b","modified":1677121339786},{"_id":"public/lib/busuanzi/2.3/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1677121339786},{"_id":"public/404.html","hash":"da3348b79164cd60c0b800b01fdcef4a29ef6ab7","modified":1677736318086},{"_id":"public/lib/jquery.pjax.js","hash":"13485a1e2dc9c8df28267549de1b8af8f39061d9","modified":1677121339786},{"_id":"public/lib/font-awesome/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1677121339786},{"_id":"public/lib/jquery-3.4.1.min.js","hash":"88523924351bac0b5d560fe0c5781e2556e7693d","modified":1677121339786},{"_id":"public/lib/highlight/highlight.pack.js","hash":"84a7e42dfa8c44a422a8328277d660d9428fcea6","modified":1677121339786},{"_id":"public/lib/valine/Valine-1.3.10-min.js","hash":"e3a340d0c39eee2ae651284fda9d351e752fcbd0","modified":1677121339786},{"_id":"public/lib/valine/av-3.0.4-min.js","hash":"2577e72b52b736d99649f9e95be8976d58563333","modified":1677121339786},{"_id":"public/Tree.png","hash":"e5a30d5edf5aa2dc39fb4db7b4761b516826cf5b","modified":1677121339786},{"_id":"source/_posts/王阁/技术/大数据/flink/.DS_Store","hash":"293c2b7149a195205570e53d253a82ce601526b1","modified":1677656155685},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/Flink_Process_Function.md","hash":"8fe3cf2875afc6b9686d7274f72c541dba008cfd","modified":1677595512075},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/Flink_Time_Window.md","hash":"24f71e5d334eff5ca13c83b50d298af3f9d0e992","modified":1677592493990},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/FlinkSource.md","hash":"19cece069452792bf5e5c01245a1dd362f554f47","modified":1677567282780},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/flink_transform.md","hash":"468e11a1756c913630c3330b65f593b56e4b6d1d","modified":1677572633953},{"_id":"public/2023/02/28/王阁/技术/大数据/flink/2023/FlinkSource/index.html","hash":"cc021ae9a2ced35421fa10c98e3dee4f97436cee","modified":1677736318086},{"_id":"public/2023/02/28/王阁/技术/大数据/flink/2023/Flink_Time_Window/index.html","hash":"988958d738f305c22522e6a19f75778e5ecf1620","modified":1677736318086},{"_id":"public/2023/02/28/王阁/技术/大数据/flink/2023/flink_transform/index.html","hash":"bd1a587c95f22685185e9086db4debb6386e034b","modified":1677736318086},{"_id":"public/2023/02/28/王阁/技术/大数据/flink/2023/Flink_Process_Function/index.html","hash":"788da88d29d9201d873242e08400612dec9b29ed","modified":1677736318086},{"_id":"public/archives/page/19/index.html","hash":"f30bbb6f77f310c12215ac6c8c118be22041e2d3","modified":1677736318086},{"_id":"public/page/19/index.html","hash":"e4327b9ae090b1651d439e631ceee4fd869f60d5","modified":1677736318086},{"_id":"public/tags/flink、transform/index.html","hash":"16abe982637ea3e615c32ac6786af6ec050df56c","modified":1677736318086},{"_id":"public/tags/flink、transform、process/index.html","hash":"7641eda1906ef8c8fe9d46e7ddfff62e67a7ee5f","modified":1677736318086},{"_id":"public/tags/flink、time、window/index.html","hash":"f0f97beddf4bb12ba9caa7552c1853d0d345fa2b","modified":1677736318086},{"_id":"public/tags/Flink、source/index.html","hash":"ab20c060d5a182b76bda7684eba728adb25b54b5","modified":1677736318086},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/Flink 状态编程.md","hash":"3763068b471e34c8c6bb0c54359402ac31a28aee","modified":1677661422146},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/Flink多流转换.md","hash":"d06dfa509e66467ccb7729d74dd38e6f88a95948","modified":1677650325592},{"_id":"public/2023/03/01/王阁/技术/大数据/flink/2023/Flink 状态编程/index.html","hash":"747a03d92efc40b262fa0de18896156e944ed66c","modified":1677736318086},{"_id":"public/2023/03/01/王阁/技术/大数据/flink/2023/Flink多流转换/index.html","hash":"afeeac2f66900f834f273a7f3ec4b588b7afe965","modified":1677736318086},{"_id":"public/archives/2023/03/index.html","hash":"36f93df7600e7b3af923c33c81cc15a935a1d2b8","modified":1677736318086},{"_id":"public/tags/flink、stream、转换/index.html","hash":"9f385b606fcced1af5237bd4c69c203833db4a61","modified":1677736318086},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/FlinkTable&SQL.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677662349330},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/容错机制.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677662335887},{"_id":"source/_posts/王阁/技术/大数据/flink/2023/Flink Connector.md","hash":"03eb4d9e1145daf5c33c50fcc7a108dc7bd1d28c","modified":1677724568570},{"_id":"public/2023/03/02/王阁/技术/大数据/flink/2023/Flink Connector/index.html","hash":"d1cff878008a764d5648c7256a26f2e5fc025eeb","modified":1677736318086},{"_id":"public/2023/03/01/王阁/技术/大数据/flink/2023/FlinkTable&SQL/index.html","hash":"810d1ff2c0933f3449a07dcc6d5f6656aa07648e","modified":1677736318086},{"_id":"public/2023/03/01/王阁/技术/大数据/flink/2023/容错机制/index.html","hash":"4e67bf125ec220956559b54d858c3c405f350bd0","modified":1677736318086},{"_id":"public/archives/2023/page/4/index.html","hash":"0dd93d3adaee286bec15d3c818da08ad6e4e85c2","modified":1677736318086},{"_id":"public/tags/flink、状态、编程/index.html","hash":"d3f68bf7fc7d5db544a275a2f0c443480c2744e4","modified":1677736318086},{"_id":"themes/fluid/.eslintrc","hash":"4bc2b19ce2b8c4d242f97d4ccf2d741e68ab0097","modified":1677735857665},{"_id":"themes/fluid/.gitattributes","hash":"a54f902957d49356376b59287b894b1a3d7a003f","modified":1677735857665},{"_id":"themes/fluid/.editorconfig","hash":"33218fbd623feb43edf5f99f15965392cecc44a6","modified":1677735857665},{"_id":"themes/fluid/README_en.md","hash":"8c874f309e346fffa392e174385b5cc08510f218","modified":1677735857666},{"_id":"themes/fluid/.gitignore","hash":"ae3bfcb89777657c5dfb5169d91445dcb0e5ab98","modified":1677735857666},{"_id":"themes/fluid/package.json","hash":"30e3f4ccfef8474c05cf0b1eb02e91bd0a152807","modified":1677735857672},{"_id":"themes/fluid/LICENSE","hash":"26f9356fd6e84b5a88df6d9014378f41b65ba209","modified":1677735857666},{"_id":"themes/fluid/_config.yml","hash":"088788e149051fc0a3c6096ba95e35a8344de04b","modified":1677735857666},{"_id":"themes/fluid/README.md","hash":"6d752df6f2278033dc2512a7d5be22c8a8eb665a","modified":1677735857666},{"_id":"themes/fluid/languages/de.yml","hash":"0e7d455d9e004ff15d8924b7a0c35cea25ee5b1d","modified":1677735857667},{"_id":"themes/fluid/languages/en.yml","hash":"cb11b39f44ea069652c9647179606b6cecc98d50","modified":1677735857667},{"_id":"themes/fluid/languages/eo.yml","hash":"a556251cc50a5680578c03f1efbf252b1f4ab860","modified":1677735857667},{"_id":"themes/fluid/languages/es.yml","hash":"7112594259c88c04714be152af7fd377687dad40","modified":1677735857667},{"_id":"themes/fluid/languages/ru.yml","hash":"7dc78f22696649a4c68dc65a9b52d9a992fa82a0","modified":1677735857667},{"_id":"themes/fluid/languages/ja.yml","hash":"3dd6d20f8d26585a7c154a8e59fe8d5d902f4c6a","modified":1677735857667},{"_id":"themes/fluid/languages/zh-HK.yml","hash":"80ed400a7adaa92ea54fc7f5d534c9af795bed00","modified":1677735857667},{"_id":"themes/fluid/languages/zh-CN.yml","hash":"f96a22f989897ecddc69d5867a206e1cf6b8f610","modified":1677735857667},{"_id":"themes/fluid/languages/zh-TW.yml","hash":"596d031dff3826ae8e4ffc8931fff28977b73247","modified":1677735857667},{"_id":"themes/fluid/layout/404.ejs","hash":"b84d575c7b7f778b4cb64e89ad3d0aed4a896820","modified":1677735857667},{"_id":"themes/fluid/layout/categories.ejs","hash":"13859726c27b6c79b5876ec174176d0f9c1ee164","modified":1677735857671},{"_id":"themes/fluid/layout/about.ejs","hash":"163bee643e6a38912d3ae70923c83c48d57222e7","modified":1677735857671},{"_id":"themes/fluid/layout/archive.ejs","hash":"7c1f44005849791feae4abaa10fae4cb983d3277","modified":1677735857671},{"_id":"themes/fluid/layout/category.ejs","hash":"f099161b738a16a32253f42085b5444f902018ed","modified":1677735857671},{"_id":"themes/fluid/layout/links.ejs","hash":"1cac32ec4579aaf7b9fa39d317497331d4c5e1dd","modified":1677735857672},{"_id":"themes/fluid/layout/page.ejs","hash":"ed5007a3feb8f14d3d2843271bfb298eb0c56219","modified":1677735857672},{"_id":"themes/fluid/layout/index.ejs","hash":"db000a6a0cec19d32a6e7e94cd4c478500d9c5ac","modified":1677735857671},{"_id":"themes/fluid/layout/layout.ejs","hash":"7e0023474128fbe4d68c467704c41f1712432415","modified":1677735857671},{"_id":"themes/fluid/layout/post.ejs","hash":"505bcc06e55066b7cc5551d9ac0694e7713bfab5","modified":1677735857672},{"_id":"themes/fluid/layout/tag.ejs","hash":"9d686364c4d16a1a9219471623af452035c5b966","modified":1677735857672},{"_id":"themes/fluid/layout/tags.ejs","hash":"1d06af34b6cf1d8a20d2eb565e309326ceba309f","modified":1677735857672},{"_id":"themes/fluid/.github/ISSUE_TEMPLATE/bug_report_zh.md","hash":"c8b0d49c49e3c88872fd3b37909345ff5b2b6aa0","modified":1677735857665},{"_id":"themes/fluid/.github/ISSUE_TEMPLATE/bug_report.md","hash":"554c0d0e086a0784d83ee71c83f8bceeb60aecc8","modified":1677735857665},{"_id":"themes/fluid/.github/ISSUE_TEMPLATE/feature_request.md","hash":"c134dd57ffd269b93402ccfffe7dbe0f0b583bec","modified":1677735857665},{"_id":"themes/fluid/.github/ISSUE_TEMPLATE/feature_request_zh.md","hash":"ed08574b196447376dd74411cca664ac9227a5d4","modified":1677735857665},{"_id":"themes/fluid/.github/ISSUE_TEMPLATE/question.md","hash":"ab5eab9e3ff889c4ba7fd82846e7f5b7ae15bebc","modified":1677735857665},{"_id":"themes/fluid/.github/ISSUE_TEMPLATE/question_zh.md","hash":"fff07ce0472afc368d388637cb9d438195da9b5b","modified":1677735857665},{"_id":"themes/fluid/.github/workflows/limit.yaml","hash":"f8bd2edeb4424ee7a055b31583445d5d5dff91a4","modified":1677735857666},{"_id":"themes/fluid/.github/workflows/publish.yaml","hash":"6f02e6440d88629229556e3fd47d0280fe2240db","modified":1677735857666},{"_id":"themes/fluid/source/css/highlight-dark.styl","hash":"45695ef75c31a4aa57324dd408b7e2327a337018","modified":1677735857679},{"_id":"themes/fluid/source/css/highlight.styl","hash":"a9efc52a646a9e585439c768557e3e3c9e3326dc","modified":1677735857679},{"_id":"themes/fluid/source/js/boot.js","hash":"38bd26c6b7acdafda86dda3560e6a3ca488d3c76","modified":1677735857681},{"_id":"themes/fluid/source/css/main.styl","hash":"855ae5fe229c51afa57f7645f6997a27a705d7e4","modified":1677735857679},{"_id":"themes/fluid/source/js/color-schema.js","hash":"76a198f8721352ebeaf5b2ef2f4db00612da4796","modified":1677735857682},{"_id":"themes/fluid/source/js/events.js","hash":"89e3561488a618ed0caeb9edf18e441978e29c25","modified":1677735857682},{"_id":"themes/fluid/source/js/img-lazyload.js","hash":"cbdeca434ec4da51f488c821d51b4d23c73294af","modified":1677735857683},{"_id":"themes/fluid/source/js/leancloud.js","hash":"eff77c7a5c399fcaefda48884980571e15243fc9","modified":1677735857684},{"_id":"themes/fluid/source/js/local-search.js","hash":"cebcda5991b6a9ab9307c69542389ce9013f04f7","modified":1677735857684},{"_id":"themes/fluid/source/js/plugins.js","hash":"c34916291e392a774ff3e85c55badb83e8661297","modified":1677735857684},{"_id":"themes/fluid/source/js/utils.js","hash":"45cc86f099db0a2c36ad49711ce66c2d598a2ab1","modified":1677735857685},{"_id":"themes/fluid/source/css/gitalk.css","hash":"a57b3cc8e04a0a4a27aefa07facf5b5e7bca0e76","modified":1677735857679},{"_id":"themes/fluid/source/img/fluid.png","hash":"64b215db2cb3af98fe639e94537cb5209f959c78","modified":1677735857680},{"_id":"themes/fluid/source/img/loading.gif","hash":"2d2fc0f947940f98c21afafef39ecf226a2e8d55","modified":1677735857680},{"_id":"themes/fluid/source/img/avatar.png","hash":"fe739a158cc128f70f780eb5fa96f388b81d478f","modified":1677735857679},{"_id":"themes/fluid/source/img/police_beian.png","hash":"90efded6baa2dde599a9d6b1387973e8e64923ea","modified":1677735857680},{"_id":"themes/fluid/scripts/filters/default-injects.js","hash":"b2013ae8e189cd07ebc8a2ff48a78e153345210f","modified":1677735857673},{"_id":"themes/fluid/scripts/filters/locals.js","hash":"58d0fec976f6b1d35e7ea03edc45414088acf05c","modified":1677735857673},{"_id":"themes/fluid/scripts/filters/post-filter.js","hash":"d516b9db63067f9ea9c72cc75ae4ff358417e77d","modified":1677735857673},{"_id":"themes/fluid/scripts/generators/local-search.js","hash":"fc2c50405b771b06b7f6cfc4e9de97b992691555","modified":1677735857673},{"_id":"themes/fluid/scripts/generators/pages.js","hash":"d9971f15fbb6b775e3d31a1b9b45011959395010","modified":1677735857674},{"_id":"themes/fluid/scripts/events/index.js","hash":"79de5a379b28cad759a49048351c7f6b8915bd7d","modified":1677735857672},{"_id":"themes/fluid/scripts/helpers/date.js","hash":"9bda6382f61b40a20c24af466fe10c8366ebb74c","modified":1677735857674},{"_id":"themes/fluid/scripts/helpers/import.js","hash":"ca53e8dbf7d44cfd372cfa79ac60f35a7d5b0076","modified":1677735857674},{"_id":"themes/fluid/scripts/helpers/export-config.js","hash":"47e6dba7652a621a54067413490a11c8a89e3d7b","modified":1677735857674},{"_id":"themes/fluid/scripts/helpers/injects.js","hash":"1ad2ae6b11bd8806ee7dd6eb7140d8b54a95d613","modified":1677735857674},{"_id":"themes/fluid/scripts/helpers/page.js","hash":"4607607445233b3029ef20ed5e91de0da0a7f9c5","modified":1677735857674},{"_id":"themes/fluid/scripts/helpers/scope.js","hash":"d41d9d658fcb54964b388598e996747aadb85b0f","modified":1677735857674},{"_id":"themes/fluid/scripts/helpers/url.js","hash":"2a6a8288176d0e0f6ec008056bf2745a86e8943e","modified":1677735857674},{"_id":"themes/fluid/scripts/helpers/utils.js","hash":"226f99b465ff513de075a8e78b321d6cb62592ca","modified":1677735857675},{"_id":"themes/fluid/scripts/helpers/wordcount.js","hash":"4543b8954c5c2ca91191cc0d53cf071b3f26faaa","modified":1677735857675},{"_id":"themes/fluid/scripts/tags/button.js","hash":"3eb43a8cdea0a64576ad6b31b4df6c2bf5698d4c","modified":1677735857675},{"_id":"themes/fluid/scripts/tags/checkbox.js","hash":"4938610c3543a921a341bc074626d511cb1a4b45","modified":1677735857675},{"_id":"themes/fluid/scripts/helpers/engine.js","hash":"d3a231d106795ce99cb0bc77eb65f9ae44515933","modified":1677735857674},{"_id":"themes/fluid/scripts/tags/group-image.js","hash":"4aeebb797026f1df25646a5d69f7fde79b1bcd26","modified":1677735857675},{"_id":"themes/fluid/scripts/tags/label.js","hash":"f05a6d32cca79535b22907dc03edb9d3fa2d8176","modified":1677735857675},{"_id":"themes/fluid/scripts/tags/note.js","hash":"f52f3a005b41f48b4da274ac64710177c8d4502f","modified":1677735857675},{"_id":"themes/fluid/scripts/utils/compare-versions.js","hash":"dbbc928c914fc2bd242cd66aa0c45971aec13a5d","modified":1677735857675},{"_id":"themes/fluid/scripts/utils/object.js","hash":"33b57e4decdc5e75c518859f168c8ba80b2c665b","modified":1677735857675},{"_id":"themes/fluid/scripts/utils/resolve.js","hash":"8c4a8b62aa8608f12f1e9046231dff04859dc3e9","modified":1677735857675},{"_id":"themes/fluid/scripts/utils/url-join.js","hash":"718aab5e7b2059a06b093ca738de420d9afa44ba","modified":1677735857675},{"_id":"themes/fluid/source/xml/local-search.xml","hash":"8c96ba6a064705602ce28d096fd7dd9069630a55","modified":1677735857685},{"_id":"themes/fluid/scripts/tags/mermaid.js","hash":"75160561e1ef3603b6d2ad2938464ab1cb77fd38","modified":1677735857675},{"_id":"themes/fluid/layout/_partials/category-chains.ejs","hash":"18309584aab83bc4deb20723ebad832149dd2e24","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/archive-list.ejs","hash":"7520fbf91f762207c2ab06b2c293235cd5b23905","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/category-list.ejs","hash":"f8d2f1907450e61968e6d54443e9be8138196a77","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/comments.ejs","hash":"d707c47b2638c94e489bc43d4cfd098b7c58447f","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/css.ejs","hash":"85f6e051550907681ab4ed2e268ac8f6e9ebf931","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/footer.ejs","hash":"10ccfb8eef4e16182183c9a3e175c90d5b6397d3","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/head.ejs","hash":"7b7b1d098726e86687a15fe3d520d178577ffcae","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/header.ejs","hash":"0d5e397d30051e5fbabe7b47cfd1f1e6a5820af1","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/markdown-plugins.ejs","hash":"fc4bdf7de0cf1a66d0e5e4fba1b31d6f7ed49468","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/paginator.ejs","hash":"0f38a2c238169edcb63fc46c23bfc529ff3859b7","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/search.ejs","hash":"70e1c929e084ca8a2648cedabf29b372511ea2b8","modified":1677735857671},{"_id":"themes/fluid/layout/_partials/scripts.ejs","hash":"da5810785105e5075861593c7ac22c7aa9665a72","modified":1677735857671},{"_id":"themes/fluid/source/css/_functions/base.styl","hash":"2e46f3f4e2c9fe34c1ff1c598738fc7349ae8188","modified":1677735857676},{"_id":"themes/fluid/source/css/_mixins/base.styl","hash":"542e306ee9494e8a78e44d6d7d409605d94caeb3","modified":1677735857676},{"_id":"themes/fluid/source/css/_pages/pages.styl","hash":"b8e887bc7fb3b765a1f8ec9448eff8603a41984f","modified":1677735857679},{"_id":"themes/fluid/source/css/_variables/base.styl","hash":"4ed5f0ae105ef4c7dd92eaf652ceda176c38e502","modified":1677735857679},{"_id":"themes/fluid/scripts/events/lib/compatible-configs.js","hash":"ef474d1fa5bbafc52619ced0f9dc7eaf2affb363","modified":1677735857672},{"_id":"themes/fluid/scripts/events/lib/footnote.js","hash":"2ec2ae03c79bb1ae7ac3fcf7e00fb52d1af2898d","modified":1677735857673},{"_id":"themes/fluid/scripts/events/lib/hello.js","hash":"44c5eb97b98813a07c659d6afedd17fad63b1821","modified":1677735857673},{"_id":"themes/fluid/scripts/events/lib/highlight.js","hash":"0f02df2244e275595e72163498d42f42bcf0de5e","modified":1677735857673},{"_id":"themes/fluid/scripts/events/lib/injects.js","hash":"5ae4b07204683e54b5a1b74e931702bbce2ac23e","modified":1677735857673},{"_id":"themes/fluid/scripts/events/lib/lazyload.js","hash":"9ba0d4bc224e22af8a5a48d6ff13e5a0fcfee2a4","modified":1677735857673},{"_id":"themes/fluid/scripts/events/lib/merge-configs.js","hash":"7c944c43b2ece5dd84859bd9d1fe955d13427387","modified":1677735857673},{"_id":"themes/fluid/layout/_partials/comments/changyan.ejs","hash":"c9b2d68ed3d375f1953e7007307d2a3f75ed6249","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/comments/cusdis.ejs","hash":"5f9dc012be27040bbe874d0c093c0d53958cc987","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/comments/disqus.ejs","hash":"aab4a4d24c55231a37db308ae94414319cecdd9b","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/comments/giscus.ejs","hash":"95f8b866b158eff9352c381c243b332a155a5110","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/comments/livere.ejs","hash":"2264758fed57542a7389c7aa9f00f1aefa17eb87","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/comments/gitalk.ejs","hash":"843bc141a4545eb20d1c92fb63c85d459b4271ec","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/comments/remark42.ejs","hash":"d4e9532feeb02aed61bd15eda536b5b631454dac","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/comments/twikoo.ejs","hash":"e6820fb7f13662c42f8433ec95404238f4c1860c","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/comments/valine.ejs","hash":"19ba937553dddd317f827d682661a1066a7b1f30","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/comments/waline.ejs","hash":"12727da7cf3ac83443270f550be4d1c06135b52b","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/comments/utterances.ejs","hash":"c7ccf7f28308334a6da6f5425b141a24b5eca0e2","modified":1677735857668},{"_id":"themes/fluid/layout/_partials/footer/statistics.ejs","hash":"454d8dd4c39f9494ebeb03ca0746f5bc122af76a","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/footer/beian.ejs","hash":"4fb9b5dd3f3e41a586d6af44e5069afe7c81fff2","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/plugins/anchorjs.ejs","hash":"40181442d3a2b8734783a0ad7caf2d2522e3f2ab","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/header/navigation.ejs","hash":"870db75e4e403a840c4463dfeed2c9114846e7cc","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/plugins/analytics.ejs","hash":"1327395a4dde1ea06c476b047fb110bcd269149f","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/plugins/code-widget.ejs","hash":"3a505cba37942badf62a56bbb8b605b72af330aa","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/header/banner.ejs","hash":"e07757b59e7b89eea213d0e595cb5932f812fd32","modified":1677735857669},{"_id":"themes/fluid/layout/_partials/plugins/encrypt.ejs","hash":"e3713fa78e0fc14a239360b020068d8513573ae4","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/plugins/highlight.ejs","hash":"7529dd215b09d3557804333942377b9e20fa554e","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/plugins/fancybox.ejs","hash":"9d1ea2a46b8c8ad8c168594d578f40764818ef13","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/plugins/mermaid.ejs","hash":"e49506e9895e255e0e53f34a11d325f83109c1b0","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/plugins/nprogress.ejs","hash":"4c2d39ce816b8a6dcd6b53113c8695f8bd650a23","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/plugins/math.ejs","hash":"dcbf9a381ee76f2f1f75fcbc22c50a502ec85023","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/plugins/typed.ejs","hash":"51faef29f8e464bcb2e73049b428b88c8dd8b40a","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/post/copyright.ejs","hash":"9d13392cea94b66d86422ad17c66e5ae67ce1d32","modified":1677735857670},{"_id":"themes/fluid/layout/_partials/post/meta-top.ejs","hash":"ce6e9f578f4faa45840abddf8f46af3f4b69c177","modified":1677735857671},{"_id":"themes/fluid/layout/_partials/post/sidebar-left.ejs","hash":"9992c99b3eb728ad195970e1b84d665f2c8691c4","modified":1677735857671},{"_id":"themes/fluid/layout/_partials/post/meta-bottom.ejs","hash":"7079b27a7bc15a7dfa9209f6be6051bdec49ebad","modified":1677735857671},{"_id":"themes/fluid/layout/_partials/post/sidebar-right.ejs","hash":"d5fcc9b60e02f869a29a8c17a16a6028ecc1e6d8","modified":1677735857671},{"_id":"themes/fluid/layout/_partials/post/toc.ejs","hash":"635a89060fbf72eeda066fc4bd0a97462f069417","modified":1677735857671},{"_id":"themes/fluid/layout/_partials/post/category-bar.ejs","hash":"8772bce97ed297e7a88523f4e939ed6436c22f87","modified":1677735857670},{"_id":"themes/fluid/source/css/_pages/_tag/tag.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677735857679},{"_id":"themes/fluid/source/css/_pages/_archive/archive.styl","hash":"c475e6681546d30350eaed11f23081ecae80c375","modified":1677735857676},{"_id":"themes/fluid/source/css/_pages/_about/about.styl","hash":"97fe42516ea531fdad771489b68aa8b2a7f6ae46","modified":1677735857676},{"_id":"themes/fluid/source/css/_pages/_category/category-bar.styl","hash":"cc6df43fef6bb3efecbfdd8b9e467424a1dea581","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_category/category-chain.styl","hash":"0cdf7ef50dfd0669d3b257821384ff31cd81b7c9","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_category/category-list.styl","hash":"7edfe1b571ecca7d08f5f4dbcf76f4ffdcfbf0b5","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_base/base.styl","hash":"643284c567665f96915f0b64e59934dda315f74d","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_base/inline.styl","hash":"411a3fa3f924a87e00ff04d18b5c83283b049a4d","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_base/color-schema.styl","hash":"61279540c2623ea4bf93e40613d41380839b92d3","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_base/keyframes.styl","hash":"94065ea50f5bef7566d184f2422f6ac20866ba22","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_links/links.styl","hash":"5c7f2044e3f1da05a3229537c06bd879836f8d6e","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_post/comment.styl","hash":"780f3788e7357bcd3f3262d781cb91bb53976a93","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_index/index.styl","hash":"0acbd71633bcc7191672ea4e1b2277bea350d73b","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_post/highlight.styl","hash":"4df764d298fe556e501db4afc2b05686fe6ebcfb","modified":1677735857678},{"_id":"themes/fluid/source/css/_pages/_post/markdown.styl","hash":"1e3d3a82721e7c10bcfcecec6d81cf2979039452","modified":1677735857679},{"_id":"themes/fluid/source/css/_pages/_tag/tags.styl","hash":"65bfc01c76abc927fa1a23bf2422892b0d566c3f","modified":1677735857679},{"_id":"themes/fluid/source/css/_pages/_post/post-page.styl","hash":"127bb5391370afe7fef2a297084d76406bc5e902","modified":1677735857679},{"_id":"themes/fluid/source/css/_pages/_post/post-tag.styl","hash":"27f70062415ccf66a9b6f4952db124fc1471fda5","modified":1677735857679},{"_id":"themes/fluid/source/css/_pages/_base/_widget/anchorjs.styl","hash":"e0cebda4a6f499aff75e71417d88caa7ceb13b94","modified":1677735857676},{"_id":"themes/fluid/source/css/_pages/_base/_widget/banner.styl","hash":"7a0bd629bc234fc75e3cc8e3715ffada92f09e73","modified":1677735857676},{"_id":"themes/fluid/source/css/_pages/_base/_widget/board.styl","hash":"4397037fc3f0033dbe546c33cd9dbdabd8cb1632","modified":1677735857676},{"_id":"themes/fluid/source/css/_pages/_base/_widget/code-widget.styl","hash":"b66ab013f0f37d724a149b85b3c7432afcf460ad","modified":1677735857676},{"_id":"themes/fluid/source/css/_pages/_base/_widget/copyright.styl","hash":"26f71a9cd60d96bb0cb5bbdf58150b8e524d9707","modified":1677735857676},{"_id":"themes/fluid/source/css/_pages/_base/_widget/footer.styl","hash":"2caaca71dd1ff63d583099ed817677dd267b457e","modified":1677735857676},{"_id":"themes/fluid/source/css/_pages/_base/_widget/footnote.styl","hash":"ae9289cc89649af2042907f8a003303b987f3404","modified":1677735857677},{"_id":"themes/fluid/source/css/_pages/_base/_widget/header.styl","hash":"c4459248c66ea1326feed021179b847ae91d465f","modified":1677735857677},{"_id":"themes/fluid/source/css/_pages/_base/_widget/modal.styl","hash":"adf6c1e5c8e1fb41c77ce6e2258001df61245aa2","modified":1677735857677},{"_id":"themes/fluid/source/css/_pages/_base/_widget/noscript.styl","hash":"0cf2f2bb44f456150d428016675d5876a9d2e2aa","modified":1677735857677},{"_id":"themes/fluid/source/css/_pages/_base/_widget/pagination.styl","hash":"8bb1b68e5f3552cb48c2ffa31edbc53646a8fb4c","modified":1677735857677},{"_id":"themes/fluid/source/css/_pages/_base/_widget/ngrogress.styl","hash":"5d225357b4a58d46118e6616377168336ed44cb2","modified":1677735857677},{"_id":"themes/fluid/source/css/_pages/_base/_widget/qrcode.styl","hash":"78704a94c0436097abfb0e0a57abeb3429c749b7","modified":1677735857677},{"_id":"themes/fluid/source/css/_pages/_base/_widget/search.styl","hash":"10f7e91a91e681fb9fe46f9df7707b9ef78707c8","modified":1677735857677},{"_id":"themes/fluid/source/css/_pages/_base/_widget/scroll-btn.styl","hash":"f0e429a27fa8a7658fcbddbb4d4dbe4afa12499a","modified":1677735857677},{"_id":"themes/fluid/source/css/_pages/_base/_widget/toc.styl","hash":"9e7452aa2372153f25d7a4675c9d36d281a65d24","modified":1677735857677},{"_id":"themes/fluid/source/img/default.png","hash":"167a12978d80371cf578c8a2e45c24a2eb25b6fb","modified":1677735857680},{"_id":"public/local-search.xml","hash":"0d1256bffd692ed64d8be2da9e70cab61ead93ae","modified":1677736318086},{"_id":"public/links/index.html","hash":"b7119109901dcdf189a8c88395ac4a69399d8a2a","modified":1677736318086},{"_id":"public/img/avatar.png","hash":"fe739a158cc128f70f780eb5fa96f388b81d478f","modified":1677736318086},{"_id":"public/img/police_beian.png","hash":"90efded6baa2dde599a9d6b1387973e8e64923ea","modified":1677736318086},{"_id":"public/xml/local-search.xml","hash":"8c96ba6a064705602ce28d096fd7dd9069630a55","modified":1677736318086},{"_id":"public/img/fluid.png","hash":"64b215db2cb3af98fe639e94537cb5209f959c78","modified":1677736318086},{"_id":"public/img/loading.gif","hash":"2d2fc0f947940f98c21afafef39ecf226a2e8d55","modified":1677736318086},{"_id":"public/css/highlight.css","hash":"6e2f8edcc875b4d8e0cf5f2610e6e908bf9b51b1","modified":1677736318086},{"_id":"public/css/highlight-dark.css","hash":"fdaf3f62244b6518f7dc5b7e22c7521213f2081e","modified":1677736318086},{"_id":"public/js/color-schema.js","hash":"76a198f8721352ebeaf5b2ef2f4db00612da4796","modified":1677736318086},{"_id":"public/js/boot.js","hash":"38bd26c6b7acdafda86dda3560e6a3ca488d3c76","modified":1677736318086},{"_id":"public/js/local-search.js","hash":"cebcda5991b6a9ab9307c69542389ce9013f04f7","modified":1677736318086},{"_id":"public/js/plugins.js","hash":"c34916291e392a774ff3e85c55badb83e8661297","modified":1677736318086},{"_id":"public/js/events.js","hash":"89e3561488a618ed0caeb9edf18e441978e29c25","modified":1677736318086},{"_id":"public/js/utils.js","hash":"45cc86f099db0a2c36ad49711ce66c2d598a2ab1","modified":1677736318086},{"_id":"public/js/leancloud.js","hash":"eff77c7a5c399fcaefda48884980571e15243fc9","modified":1677736318086},{"_id":"public/css/gitalk.css","hash":"a57b3cc8e04a0a4a27aefa07facf5b5e7bca0e76","modified":1677736318086},{"_id":"public/js/img-lazyload.js","hash":"cbdeca434ec4da51f488c821d51b4d23c73294af","modified":1677736318086},{"_id":"public/img/default.png","hash":"167a12978d80371cf578c8a2e45c24a2eb25b6fb","modified":1677736318086}],"Category":[{"name":"日常","_id":"clegiqsbx000xu6pw742f5f10"}],"Data":[],"Page":[{"title":"tags","date":"2020-05-22T02:42:26.000Z","type":"tags","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2020-05-22 10:42:26\ntype: tags\nlayout: \"tags\"\n---\n","updated":"2021-04-26T13:52:35.000Z","path":"tags/index.html","comments":1,"_id":"clegiqs6c0000u6pw13zkbgap","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"categories","date":"2020-05-22T02:41:30.000Z","type":"categories","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2020-05-22 10:41:30\ntype: \"categories\"\nlayout: \"categories\"\n---\n","updated":"2021-04-26T13:52:35.000Z","path":"categories/index.html","comments":1,"_id":"clegiqs6r0001u6pwgni09ude","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"_content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>echarts.js案例一</title>\n    <script type=\"text/javascript\" src='echarts.js'></script>\n</head>\n<body>\n    <div id=\"chart\" style=\"width:800px;height:500px;background:pink;\"></div>\n</body>\n<script type=\"text/javascript\">\n    // 初始化图表标签\n    var myChart = echarts.init(document.getElementById('chart'));\n\t\n\t\n\toption = {\n    xAxis: {\n        data : ['aaa','bbb']\n    },\n    yAxis: {},\n    series: [{\n        symbolSize: 20,\n        data: [\n            ['aaa', 8.04],\n            ['bbb', 9.04],\n        ],\n        type: 'line',\n        markLine: {\n                symbol: ['none', 'none'],//去掉箭头\n                itemStyle: {\n                    normal: { \n\t\t\t\t\t\tlineStyle: {\n\t\t\t\t\t\t\ttype: 'solid',\n\t\t\t\t\t\t\tcolor:{//设置渐变\n                                  type: 'linear',\n                                  x: 0,\n                                  y: 0,\n                                  x2: 0,\n                                  y2: 1,\n                                  colorStops: [{\n                                      offset: 0, color: 'red '// 0% 处的颜色\n                                  }, {\n                                      offset: 1, color: 'blue' // 100% 处的颜色\n                                  }],\n                                  global: false // 缺省为 false\n                              }\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlabel: { \n\t\t\t\t\t\t\tshow: true, \n\t\t\t\t\t\t\tposition:'middle' \n\t\t\t\t\t\t} \n\t\t\t\t\t}\n                },\n                data: [{\n                            yAxis : 7,//这里设置false是隐藏不了的，可以设置为-1\n                      },]\n        }\n    }]\n};\n \n \n    myChart.setOption(option);\n</script>\n</html>","source":"_posts/王阁/日常/map.html","raw":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>echarts.js案例一</title>\n    <script type=\"text/javascript\" src='echarts.js'></script>\n</head>\n<body>\n    <div id=\"chart\" style=\"width:800px;height:500px;background:pink;\"></div>\n</body>\n<script type=\"text/javascript\">\n    // 初始化图表标签\n    var myChart = echarts.init(document.getElementById('chart'));\n\t\n\t\n\toption = {\n    xAxis: {\n        data : ['aaa','bbb']\n    },\n    yAxis: {},\n    series: [{\n        symbolSize: 20,\n        data: [\n            ['aaa', 8.04],\n            ['bbb', 9.04],\n        ],\n        type: 'line',\n        markLine: {\n                symbol: ['none', 'none'],//去掉箭头\n                itemStyle: {\n                    normal: { \n\t\t\t\t\t\tlineStyle: {\n\t\t\t\t\t\t\ttype: 'solid',\n\t\t\t\t\t\t\tcolor:{//设置渐变\n                                  type: 'linear',\n                                  x: 0,\n                                  y: 0,\n                                  x2: 0,\n                                  y2: 1,\n                                  colorStops: [{\n                                      offset: 0, color: 'red '// 0% 处的颜色\n                                  }, {\n                                      offset: 1, color: 'blue' // 100% 处的颜色\n                                  }],\n                                  global: false // 缺省为 false\n                              }\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlabel: { \n\t\t\t\t\t\t\tshow: true, \n\t\t\t\t\t\t\tposition:'middle' \n\t\t\t\t\t\t} \n\t\t\t\t\t}\n                },\n                data: [{\n                            yAxis : 7,//这里设置false是隐藏不了的，可以设置为-1\n                      },]\n        }\n    }]\n};\n \n \n    myChart.setOption(option);\n</script>\n</html>","slug":"王阁/日常/map","published":1,"date":"2021-10-15T08:47:02.485Z","updated":"2021-10-15T08:47:34.762Z","title":"王阁/日常/map","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqs9t0002u6pw27at8if4","content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>echarts.js案例一</title>\n    <script type=\"text/javascript\" src='echarts.js'></script>\n<meta name=\"generator\" content=\"Hexo 4.2.1\"><link rel=\"alternate\" href=\"/daydoc/atom.xml\" title=\"wang's dayliy document\" type=\"application/atom+xml\">\n</head>\n<body>\n    <div id=\"chart\" style=\"width:800px;height:500px;background:pink;\"></div>\n</body>\n<script type=\"text/javascript\">\n    // 初始化图表标签\n    var myChart = echarts.init(document.getElementById('chart'));\n\t\n\t\n\toption = {\n    xAxis: {\n        data : ['aaa','bbb']\n    },\n    yAxis: {},\n    series: [{\n        symbolSize: 20,\n        data: [\n            ['aaa', 8.04],\n            ['bbb', 9.04],\n        ],\n        type: 'line',\n        markLine: {\n                symbol: ['none', 'none'],//去掉箭头\n                itemStyle: {\n                    normal: { \n\t\t\t\t\t\tlineStyle: {\n\t\t\t\t\t\t\ttype: 'solid',\n\t\t\t\t\t\t\tcolor:{//设置渐变\n                                  type: 'linear',\n                                  x: 0,\n                                  y: 0,\n                                  x2: 0,\n                                  y2: 1,\n                                  colorStops: [{\n                                      offset: 0, color: 'red '// 0% 处的颜色\n                                  }, {\n                                      offset: 1, color: 'blue' // 100% 处的颜色\n                                  }],\n                                  global: false // 缺省为 false\n                              }\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlabel: { \n\t\t\t\t\t\t\tshow: true, \n\t\t\t\t\t\t\tposition:'middle' \n\t\t\t\t\t\t} \n\t\t\t\t\t}\n                },\n                data: [{\n                            yAxis : 7,//这里设置false是隐藏不了的，可以设置为-1\n                      },]\n        }\n    }]\n};\n \n \n    myChart.setOption(option);\n</script>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>echarts.js案例一</title>\n    <script type=\"text/javascript\" src='echarts.js'></script>\n<meta name=\"generator\" content=\"Hexo 4.2.1\"><link rel=\"alternate\" href=\"/daydoc/atom.xml\" title=\"wang's dayliy document\" type=\"application/atom+xml\">\n</head>\n<body>\n    <div id=\"chart\" style=\"width:800px;height:500px;background:pink;\"></div>\n</body>\n<script type=\"text/javascript\">\n    // 初始化图表标签\n    var myChart = echarts.init(document.getElementById('chart'));\n\t\n\t\n\toption = {\n    xAxis: {\n        data : ['aaa','bbb']\n    },\n    yAxis: {},\n    series: [{\n        symbolSize: 20,\n        data: [\n            ['aaa', 8.04],\n            ['bbb', 9.04],\n        ],\n        type: 'line',\n        markLine: {\n                symbol: ['none', 'none'],//去掉箭头\n                itemStyle: {\n                    normal: { \n\t\t\t\t\t\tlineStyle: {\n\t\t\t\t\t\t\ttype: 'solid',\n\t\t\t\t\t\t\tcolor:{//设置渐变\n                                  type: 'linear',\n                                  x: 0,\n                                  y: 0,\n                                  x2: 0,\n                                  y2: 1,\n                                  colorStops: [{\n                                      offset: 0, color: 'red '// 0% 处的颜色\n                                  }, {\n                                      offset: 1, color: 'blue' // 100% 处的颜色\n                                  }],\n                                  global: false // 缺省为 false\n                              }\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlabel: { \n\t\t\t\t\t\t\tshow: true, \n\t\t\t\t\t\t\tposition:'middle' \n\t\t\t\t\t\t} \n\t\t\t\t\t}\n                },\n                data: [{\n                            yAxis : 7,//这里设置false是隐藏不了的，可以设置为-1\n                      },]\n        }\n    }]\n};\n \n \n    myChart.setOption(option);\n</script>\n</html>"},{"date":"2023-02-23T02:51:20.902Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n[TOC]\n\n # 数据仓库分享\n\n## 1. 数仓基础理论\n\n### Q1: 什么叫数据仓库？\n\n这本书里对数据仓库的定义是为了构建新的分析处理环境而出现的一种**数据存储和组织技术**\n\n![img](http://img.wqkenqing.ren/typora_img/20210716151756.png)\n\n### Q2: 数仓与数据库的区别是什么？\n\n1. 业务场景不同，数据库主要用于支撑基本的、日常的事务处理。如银行交易流水，电商交易订单等，承担存储功能，支持修改，而数据仓库主要是用于OLAP等复杂的分析操作，侧重决策支持，并辅以可视化技术，将查询结果直观的，易化展示\n2. 前者数据的写入，修改等操作随时发生，而后者一般是一次写入，写入后很少修改。\n\n### Q3:数仓有什么特点？\n\n1. 面向主题\n2. 集成的\n3. 相对稳定的\n4. 反映历史变化 \n\n### 补充说明\n\n数据仓库中的数据是按照一定的主题域进行组织。主题是一个抽象的概念，是指用户使用数据仓库进行决策时所关心的重点方面，一个主题通常与多个操作型信息系统相关。\n\n数据仓库中的数据是在对原有分散的数据库数据抽取、清理的基础上经过系统加工、汇总和整理得到的，必须消除源数据中的不一致性，以保证数据仓库内的信息是关于整个企业的一致的全局信息。\n\n数据仓库的数据主要供企业决策分析之用，所涉及的数据操作主要是数据查询，一旦某个数据进入数据仓库以后，一般情况下将被长期保留，也就是数据仓库中一般有大量的查询操作，但修改和删除操作很少，通常只需要定期的加载、刷新。\n\n操作型数据库主要关心当前某一个时间段内的数据，而数据仓库中的数据通常包含历史信息，系统记录了企业从过去某一时点(如开始应用数据仓库的时点)到目前的各个阶段的信息，通过这些信息，可以对企业的发展历程和未来趋势做出定量分析和预测。\n\n## 2、如何构建一个数仓\n\n### 2.1 **先介绍下数仓的分层**\n\n数据仓库一般采用三层分层法\n\n1. ODS层（数据操作层）直接接入的原始数据，简单清洗，从业务库直接同步而来\n2. DW层（数据仓库层）DW内部又可以分层，但DW层主要就是ODS ETL后的数据\n3. APP层 (数据应用层）应用DW层的数据\n\n此外还有一个比较重的层DIM （维表层）\n\n1. 高基数维度数据：一般是用户资料表、商品资料表类似的资料表。数据量可能是千万级或者上亿级别。\n2. 低基数维度数据：一般是配置表，比如枚举值对应的中文含义，或者日期维表。数据量可能是个位数或者几千几万。\n\nDW层的分层\n\n1. DWS层 （数据服务层）\n2. DWM层 （中间数据层）\n3. DWD层 （数据明细层）\n\n![image-20210716112822786](http://img.wqkenqing.ren/typora_img/image-20210716112822786.png)\n\n### 2.2 **数据仓库的构建**\n\n#### **2.2.1 确定一个引擎** \n\n建立数仓，必定是基于某个引擎载体来实现的，不同的引擎载体，对应的特点也会有一些区别，所以建立数仓，根据自己的需求选取对应的数仓引擎\n\n**现在来讲一般确定使用那些存储后计算引擎，基本也就确定了数仓的架构设计，这里后面再说明。**\n\n根据实时性，可以分为两个方向\n\n1. 离线数仓\n2. 实时数仓 \n\n离线数仓组成组件\n\n* hive on hivesql\n* hive on sparksql\n* hbase\n* mapreduce\n* azkaban\n* oozie\n* hdfs\n* ....\n\n实时数仓\n\n* spark-streaming\n* flink-streaming\n* spark-core \n* hbase\n* elasticsearch\n* redis\n* clickhouse\n* ....\n\n#### **2.2.1 确定一个主题**\n\n确定主题的思路一般自下向上自顶向下。\n\n**自顶向下是先有需求**\n\n比如产品经理结合现在的市场，或产品定位，需要一个金融方向在数据来支撑决策，或与产品功能相结合。也就是说不管公司数据如何的ETL，而产出的数据仓库的主题已经确定，后面的工作主要是想尽办法从数据中挖掘出相关数据集，支撑生成数据仓库。 一般来讲拥有大量、丰富数据的企业来实现，对量级有较高要求。\n\n**自下向上是先挖掘数据**\n\n自下向上则是，先从已有的数据集本身出发，通过对已有业务系统数据的分析，或聚类归纳等方向，先确定出现有数据集主要有哪些类型的数据，可以怎么结合从而输出哪些维度，从而构建出哪种类型的数仓。\n\n#### **2.2.3 确定建表模型**\n\n数据仓库的数据建模大致分为四个阶段\n\n1. 业务建模\n2. 领域概念（主题域）建模\n3. 逻辑建模\n4. 物理建模\n\n数据仓库建模的方法\n\n1. 实体建模法\n2. 范式建模法\n3. 纬度建模法\n\n这里重点介绍下纬度建模\n\n纬度建模中的一些概念说明\n\n##### 事实表\n\n事实表是维度模型的基本表，存放有大量的业务性能度量值。\n\n事实表的设计中要解决几个重要问题：\n\n1. 确定粒度（记录事实的细节级）\n2. 相加性：事实的可加性是至关重要的，因为数据仓库应用几乎从不仅仅只检索事实表的单行数据。\n3. 键选择\n4. 一致性事实\n\n事实表的分类：\n\n1. 事务事实表\n2. 周期快照事实表、 \n3. 积累快照事实表。\n\n##### **维度表**\n\n维度属性是**查询约束条件**、成组与**报表标签生成**的基本来源。\n\n度表包含有业务的文字描述。在一个设计合理的维度模型中，维度表有许多列或者属性，这些属性给出对维度表的行所进行的描述。\n\n##### **事实与维度的融合**\n\n由数字型度量值组成的事实表连接到一组填满描述属性的维度表上。这个星型特征结构通常被叫做星型连接方案。\n\n**纬度建模过程**\n\n维度建模具有一定顺序，分别是：①**业务处理**②**粒度**③**维度**④**事实**。\n\n维度建模的三种模式\n\n##### **星形模式**\n\n星形模式(Star Schema)是最常用的维度建模方式\n\n具有以下的特点\n\n1. 维表只和事实表关联，维表之间没有关联；\n2. 每个维表的主码为单列，且该主码放置在事实表中，作为两边连接的外码；\n3. 以事实表为核心，维表围绕核心呈星形分布；\n\n![image-20210716112804525](http://img.wqkenqing.ren/typora_img/image-20210716112804525.png)\n\n##### **雪花模式**\n\n对星形模式的扩展，每个维表可继续向外连接多个子维表。\n\n下图为使用雪花模式进行维度建模的关系结构：\n\n![image-20210716112812742](http://img.wqkenqing.ren/typora_img/image-20210716112812742.png)\n\n##### **星座模式**\n\n星座模式(Fact Constellations Schema)也是星型模式的扩展。基于这种思想就有了星座模式：\n\n![image-20210716112726249](http://img.wqkenqing.ren/typora_img/image-20210716112726249.png)\n\n星形模式/雪花模式/星座模式的关系\n\n![image-20210716112733244](http://img.wqkenqing.ren/typora_img/image-20210716112733244.png)\n\n\n\n### 2.3 构建数仓\n\n#### 2.3.1 按层级划分存储组件\n\n1. 数据源：通过消息组件kafka来实时传输消息\n2. 数据明细层: 根据量级而动，涉及和组件有kafka、druid、hbase等\n3. 应用层：clickhouse、kylin、mysql、elasticsearch等\n\n#### 2.3.2 计算引擎组件\n\n按不同架构区分：\n\n1. 离线大数据架构 hdfs、hive on mr 、hive on spark\n2. lambda架构： 在离线大数据架构的基础上增加新的实时链路，需要维护离线与实时两套代码 spark(主要指spark-streaming)\n3. kappa架构： 批流合一，离线处理和实时处理整合成一套代码，运维成本小，目前发展旺盛，大有直接成为数仓架构的趋势 采用的是flink\n\n#### 2.3.3 **架构设计示意图**\n\n1、离线式数仓\n\n![image-20210716112742727](http://img.wqkenqing.ren/typora_img/image-20210716112742727.png)\n\n2. 实时数仓架构设计\n\n3. lambda\n\n   ![image-20210716112748310](http://img.wqkenqing.ren/typora_img/image-20210716112748310.png)\n\n   ![image-20210716142722673](http://img.wqkenqing.ren/typora_img/image-20210716142722673.png)\n\n4. kappa\n\n![image-20210716112753527](http://img.wqkenqing.ren/typora_img/image-20210716112753527.png)\n\n![image-20210716142744656](http://img.wqkenqing.ren/typora_img/image-20210716142744656.png)\n\n## 3、数仓的使用场景\n\n1. ETL\n2. OLAP\n3. BI\n4. DMP\n5. 建模\n\n![数据仓库服务的应用场景3](http://img.wqkenqing.ren/typora_img/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF3.jpg)\n\n![数据仓库服务的应用场景4](http://img.wqkenqing.ren/typora_img/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF4.jpg)\n\n## 4、我们数仓的建设思路\n\n   1. 自顶向下的方式\n\n   2. 偏向于技术性\n\n   3. 实时数仓\n\n   4. 要有几个比较突出的应用场景，如可视化，OLAP\n\n      **细节后续讨论**\n\n","source":"_posts/王阁/分享/数仓分享.md","raw":"\n\n# title:  数仓分享\n\ndate: 2021年 7月16日 \ntags: [数据仓库]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n[TOC]\n\n # 数据仓库分享\n\n## 1. 数仓基础理论\n\n### Q1: 什么叫数据仓库？\n\n这本书里对数据仓库的定义是为了构建新的分析处理环境而出现的一种**数据存储和组织技术**\n\n![img](http://img.wqkenqing.ren/typora_img/20210716151756.png)\n\n### Q2: 数仓与数据库的区别是什么？\n\n1. 业务场景不同，数据库主要用于支撑基本的、日常的事务处理。如银行交易流水，电商交易订单等，承担存储功能，支持修改，而数据仓库主要是用于OLAP等复杂的分析操作，侧重决策支持，并辅以可视化技术，将查询结果直观的，易化展示\n2. 前者数据的写入，修改等操作随时发生，而后者一般是一次写入，写入后很少修改。\n\n### Q3:数仓有什么特点？\n\n1. 面向主题\n2. 集成的\n3. 相对稳定的\n4. 反映历史变化 \n\n### 补充说明\n\n数据仓库中的数据是按照一定的主题域进行组织。主题是一个抽象的概念，是指用户使用数据仓库进行决策时所关心的重点方面，一个主题通常与多个操作型信息系统相关。\n\n数据仓库中的数据是在对原有分散的数据库数据抽取、清理的基础上经过系统加工、汇总和整理得到的，必须消除源数据中的不一致性，以保证数据仓库内的信息是关于整个企业的一致的全局信息。\n\n数据仓库的数据主要供企业决策分析之用，所涉及的数据操作主要是数据查询，一旦某个数据进入数据仓库以后，一般情况下将被长期保留，也就是数据仓库中一般有大量的查询操作，但修改和删除操作很少，通常只需要定期的加载、刷新。\n\n操作型数据库主要关心当前某一个时间段内的数据，而数据仓库中的数据通常包含历史信息，系统记录了企业从过去某一时点(如开始应用数据仓库的时点)到目前的各个阶段的信息，通过这些信息，可以对企业的发展历程和未来趋势做出定量分析和预测。\n\n## 2、如何构建一个数仓\n\n### 2.1 **先介绍下数仓的分层**\n\n数据仓库一般采用三层分层法\n\n1. ODS层（数据操作层）直接接入的原始数据，简单清洗，从业务库直接同步而来\n2. DW层（数据仓库层）DW内部又可以分层，但DW层主要就是ODS ETL后的数据\n3. APP层 (数据应用层）应用DW层的数据\n\n此外还有一个比较重的层DIM （维表层）\n\n1. 高基数维度数据：一般是用户资料表、商品资料表类似的资料表。数据量可能是千万级或者上亿级别。\n2. 低基数维度数据：一般是配置表，比如枚举值对应的中文含义，或者日期维表。数据量可能是个位数或者几千几万。\n\nDW层的分层\n\n1. DWS层 （数据服务层）\n2. DWM层 （中间数据层）\n3. DWD层 （数据明细层）\n\n![image-20210716112822786](http://img.wqkenqing.ren/typora_img/image-20210716112822786.png)\n\n### 2.2 **数据仓库的构建**\n\n#### **2.2.1 确定一个引擎** \n\n建立数仓，必定是基于某个引擎载体来实现的，不同的引擎载体，对应的特点也会有一些区别，所以建立数仓，根据自己的需求选取对应的数仓引擎\n\n**现在来讲一般确定使用那些存储后计算引擎，基本也就确定了数仓的架构设计，这里后面再说明。**\n\n根据实时性，可以分为两个方向\n\n1. 离线数仓\n2. 实时数仓 \n\n离线数仓组成组件\n\n* hive on hivesql\n* hive on sparksql\n* hbase\n* mapreduce\n* azkaban\n* oozie\n* hdfs\n* ....\n\n实时数仓\n\n* spark-streaming\n* flink-streaming\n* spark-core \n* hbase\n* elasticsearch\n* redis\n* clickhouse\n* ....\n\n#### **2.2.1 确定一个主题**\n\n确定主题的思路一般自下向上自顶向下。\n\n**自顶向下是先有需求**\n\n比如产品经理结合现在的市场，或产品定位，需要一个金融方向在数据来支撑决策，或与产品功能相结合。也就是说不管公司数据如何的ETL，而产出的数据仓库的主题已经确定，后面的工作主要是想尽办法从数据中挖掘出相关数据集，支撑生成数据仓库。 一般来讲拥有大量、丰富数据的企业来实现，对量级有较高要求。\n\n**自下向上是先挖掘数据**\n\n自下向上则是，先从已有的数据集本身出发，通过对已有业务系统数据的分析，或聚类归纳等方向，先确定出现有数据集主要有哪些类型的数据，可以怎么结合从而输出哪些维度，从而构建出哪种类型的数仓。\n\n#### **2.2.3 确定建表模型**\n\n数据仓库的数据建模大致分为四个阶段\n\n1. 业务建模\n2. 领域概念（主题域）建模\n3. 逻辑建模\n4. 物理建模\n\n数据仓库建模的方法\n\n1. 实体建模法\n2. 范式建模法\n3. 纬度建模法\n\n这里重点介绍下纬度建模\n\n纬度建模中的一些概念说明\n\n##### 事实表\n\n事实表是维度模型的基本表，存放有大量的业务性能度量值。\n\n事实表的设计中要解决几个重要问题：\n\n1. 确定粒度（记录事实的细节级）\n2. 相加性：事实的可加性是至关重要的，因为数据仓库应用几乎从不仅仅只检索事实表的单行数据。\n3. 键选择\n4. 一致性事实\n\n事实表的分类：\n\n1. 事务事实表\n2. 周期快照事实表、 \n3. 积累快照事实表。\n\n##### **维度表**\n\n维度属性是**查询约束条件**、成组与**报表标签生成**的基本来源。\n\n度表包含有业务的文字描述。在一个设计合理的维度模型中，维度表有许多列或者属性，这些属性给出对维度表的行所进行的描述。\n\n##### **事实与维度的融合**\n\n由数字型度量值组成的事实表连接到一组填满描述属性的维度表上。这个星型特征结构通常被叫做星型连接方案。\n\n**纬度建模过程**\n\n维度建模具有一定顺序，分别是：①**业务处理**②**粒度**③**维度**④**事实**。\n\n维度建模的三种模式\n\n##### **星形模式**\n\n星形模式(Star Schema)是最常用的维度建模方式\n\n具有以下的特点\n\n1. 维表只和事实表关联，维表之间没有关联；\n2. 每个维表的主码为单列，且该主码放置在事实表中，作为两边连接的外码；\n3. 以事实表为核心，维表围绕核心呈星形分布；\n\n![image-20210716112804525](http://img.wqkenqing.ren/typora_img/image-20210716112804525.png)\n\n##### **雪花模式**\n\n对星形模式的扩展，每个维表可继续向外连接多个子维表。\n\n下图为使用雪花模式进行维度建模的关系结构：\n\n![image-20210716112812742](http://img.wqkenqing.ren/typora_img/image-20210716112812742.png)\n\n##### **星座模式**\n\n星座模式(Fact Constellations Schema)也是星型模式的扩展。基于这种思想就有了星座模式：\n\n![image-20210716112726249](http://img.wqkenqing.ren/typora_img/image-20210716112726249.png)\n\n星形模式/雪花模式/星座模式的关系\n\n![image-20210716112733244](http://img.wqkenqing.ren/typora_img/image-20210716112733244.png)\n\n\n\n### 2.3 构建数仓\n\n#### 2.3.1 按层级划分存储组件\n\n1. 数据源：通过消息组件kafka来实时传输消息\n2. 数据明细层: 根据量级而动，涉及和组件有kafka、druid、hbase等\n3. 应用层：clickhouse、kylin、mysql、elasticsearch等\n\n#### 2.3.2 计算引擎组件\n\n按不同架构区分：\n\n1. 离线大数据架构 hdfs、hive on mr 、hive on spark\n2. lambda架构： 在离线大数据架构的基础上增加新的实时链路，需要维护离线与实时两套代码 spark(主要指spark-streaming)\n3. kappa架构： 批流合一，离线处理和实时处理整合成一套代码，运维成本小，目前发展旺盛，大有直接成为数仓架构的趋势 采用的是flink\n\n#### 2.3.3 **架构设计示意图**\n\n1、离线式数仓\n\n![image-20210716112742727](http://img.wqkenqing.ren/typora_img/image-20210716112742727.png)\n\n2. 实时数仓架构设计\n\n3. lambda\n\n   ![image-20210716112748310](http://img.wqkenqing.ren/typora_img/image-20210716112748310.png)\n\n   ![image-20210716142722673](http://img.wqkenqing.ren/typora_img/image-20210716142722673.png)\n\n4. kappa\n\n![image-20210716112753527](http://img.wqkenqing.ren/typora_img/image-20210716112753527.png)\n\n![image-20210716142744656](http://img.wqkenqing.ren/typora_img/image-20210716142744656.png)\n\n## 3、数仓的使用场景\n\n1. ETL\n2. OLAP\n3. BI\n4. DMP\n5. 建模\n\n![数据仓库服务的应用场景3](http://img.wqkenqing.ren/typora_img/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF3.jpg)\n\n![数据仓库服务的应用场景4](http://img.wqkenqing.ren/typora_img/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF4.jpg)\n\n## 4、我们数仓的建设思路\n\n   1. 自顶向下的方式\n\n   2. 偏向于技术性\n\n   3. 实时数仓\n\n   4. 要有几个比较突出的应用场景，如可视化，OLAP\n\n      **细节后续讨论**\n\n","slug":"王阁/分享/数仓分享","published":1,"updated":"2023-02-23T02:51:20.902Z","title":"王阁/分享/数仓分享","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqs9y0003u6pw4laoecny","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"3e31889de8ab0135b676225e98f0f6cb08fb26313b12e8712e993b3fea41fd78\">f29c680708acd02cbb1b6cceaba061920205039d9d493a944d09740c5853a91ad39af5bf3ed869629704ee67316e4fc20f651f57674b0c0200a23a63b11908f9f7b35024f726757406b744cafce6c064f76e26626defe7d2014e6a5b2f03ba587ddfb1a3107a22d687b28a3fa6430260798aeb84a4229db556e9221271134c540f242de1ffc7b9a8c419ca71e8cae657ebfb567e18cb2a32d1ea425cca9a1a1c4816a5f30381f9b6b36fb415f0a7f91f9152def4b4ed635041a6c62ec8246ccf20ec1d94a19f2958e932fbe7aa44d19370c69608b4ffb95b8ee13f505d0105ed79bc8f80256616ede3f7a737121addab459035f5960c64d0f20304f90585545c212fddabaad17b7056ec545c9ba4a2eb6f120c18d7aaf21711537eeeaf39a2b9e77618288a5cb504a3ece214b24ec7c0f27a4b48599d5f84dcc824db2ec58e1da4a7e87a84835b703e8942f883291a1fded6ff898169bd68b9dc801fd5e0e5ccf184646df790c4983b4f4b6901280b65dbb61efe2d05d474b89b0f08d547ae686db3bf900facc3d5b536ad0142ccd560c22550623d5ee60e6ba3480fde1d98455d7e4e8937ec07cd6de292cdc94d2215f35df3a7078f7b4d8da6b4e51132144f6bfde9f5e2b1d70ee14e1b312505ed9c883aff181bc94933e926bccdf67fa6b69292a68bac17929977c4bc771aa365358baa1b4cd125528c8b98a4372a9531de75118dda9af1c031e0d65c41d539598ee7a904b420be5c45e8145bab891de5081164ef92e4bb8da8c0250faa186c49a6c0c2b00beafe478d7e522de9b9e6d2c0c5eb1124b105213dda24b955505adc2772dd0be042094c8627bd68d6a5314ccfddb26a929e2f856f7ea022dac32e0e328c4a8592cb6891b8b82c3eb51b7043edea1019d5589ea7d8ea18600283e0a61266403b0e4891bdf9a86ea1e3d21e5c2f4bb50befd144e667c9181a23c4fc7b17dce8e4d6d3c64b07f6ca926b7f70d6f6914aec07f5b8a9bd8d0f1f744e731a4e62925d00480190cfeeee1b58e6eefe3caae67ffeeef8f61415e9e78a3483a26277003b887df6b350d444d0c08874c5658c5046353d4e70e36cb3c3b889c89a3dfefb12f3f33a08089ef3552785df3bccf1af42f34f30a7f85c449f2735dc20d10593447187c883af18cc9a5026071ac0e373bcd933dc17c4848ea1deac63060fea01d6f63ba5ad40e3faa6f60a72602f041cd6b5f5182eae6d06a0c24b94271ba91f1a18e8d019903064a56a95b709c28fa6bff1102099ee1f1b728c4eeecc093112774442c53df22683ebfb0a35b09cd9f22972d6cfafadbda5284755a889b1b83dfa2bf422992b8e8e9132876daacf9b6049d8a64359a3ee85a38cd6f4312eee1a3bd99a35ca1c7cab42dff0dcc66936969611e6124268aa48387f4e90724da0e4931c07eed002413526fdf1b0e649870f24fdef418aabec65e3b4eb6c27b31937c9ec44c80b08be8f91e58534c9ef71ffcb7c8040e6e4ef5fb7ea2d6c3fa6ece14cb531d36192ea2c3b623a688cf14ac34fe0f5ff26e79c59e786db0ee6dec471ca0229a055b1e19cca3fcfdb81d6be24bfa2418666a9d18cc8e0296e27141a11fcf79eb3b35c18d63a1d2850a1ce2b6f6606ea413331061a28818a9e1568342dd43b8c595b3ab47c4a78d90b47151c5f1639087c48c0b9e266065dd067a4691159d7ccd278512f3f2cf05118408b9c5dda7b0afa18cb1694338a895bf017ea7654e97ef569301a2670096e35fba574b9213daff9ab97ec855dd679f924d51967bb0c2a3f41a6c5db3faf52f01447d999615d89b7d6b72f04d0493bfdea0cd2523ae7457ad76b2b9a7d31374ff8154d081636fe529aa220aab350e58e394fd4fdf069890402aa8b03793eaddea5ebc20c894962a3a4c49ccd721392398ad6293e823acf90f3b256b502010052ebecfcf6bd0a37a1787b62b4a5761a947fb954f5afdd9c9fbd1d20bc77bea21528ba48942d09e12adfd6ec1549ae908c20b7fbd68da059e0e50865beb55ff356bea1858456799a1fe87cd5f88aee812c69ac36f2df6202c70ca79b0805aa95f10b671f38c9936f9285761814df5ff17bda7f6c541ed509c46388ff87dc1a2b8013078bc7f81f95f7fd6065df3d37446cee67012f05331ee5e9d8fefe4c4410f1c6e312bca14d2e68b70dbcdaabbff2f919e01fb8800f8dbb92904037564e241297ad28ae70f117c2de8568bb28dc0dcd6c014a82740b97b9ffde1bf13b39113b3b64ef60b5ec4e6838b74f214e8ae73520b05974ca9efd535ccbefdf4739141d807a6cd954323f1a7f027a35b1ce30e2358007abc1a3f67b26d5908de53c35c78ab03c6e8d67cb6f8bbf0186b305daaa7cf555f26fc672760b7c002e2bbcbd81f8b4c3dffbd93618762a164030e08c8bbbd53dee9af3d6e9ffa4de3a02a90b7219f91cbe6b71e8b7c23732a350beec786032d6f9a0750c81bd8eb29952e4bfe135734e6882159a10e397683d3b2dc297bc21c2f2c49faaccb5ec285840528dcfb258ecb9e359c40969b80c0ce3175810a46bf18ffb400084ce4f0dd5d900f96cb4622b35381fcfd2e9f0dfe14ce6d4762656d8b2f0dd1e1bf79773498ab185bc287fde6242b28293ad08700667e3d91a494df3b951fdab0e4bd9897205724736224751c325e88e5770db5bf631882a58b0fd1f7d734fe587d0a7c0e550a11b79d46201f34857b4ecd934f50b56218526b6779555cbe8869eb0802d304c51b48af308f8248a26278ffdc7fbc732a4889e8def2c1cde414cd977fda2e7c229e4e26466da07c481a75b153bdd18cf9141ce46fe0f3a558de59b2f92a41892939ab5b20a716b1a661c19237eca9549f9ab332aecd22fb441bf51196566fdc995463631edbd945c6767f761adfd5dd3259c137f4a16bedc8d646a2ad7a737916390f189e1a4b4e4fffdb2b8e61a7527b85890f86a097cd2b22c296b92c9ab4a8a3287e62d17d9039f29a656ca2d85efae684cfbe0d68a73cc23dda86c45f7f7e8eed6263afd1bfd7c846e611077a23cc5c90c3eabd26f702b1940fe68816c5cf8a6e01df24c4b71af4e8808c680df53d88985f6da363bd4eede76426fa5a32293f4fdccc5a6e7d55b5c6d36d73f58704d4693e68bd596ad2964f56d2f5acc900c8502e6448824fa4280b72c3f3ae29a0b7dd915bc1e4e5bbeb758b4c54651bd318803046893b1ad17a0ae3aa7f78317295f46eeb74c5996f56fa2e83d577d240a1c1d8f9e6fbed7e26abd2aae11eb946b0143138990213990a4bdc4af350b43fc0fb8587367c49815a11692a19690af47adc500b85c63584faa964f12408cc4faae2265dec69a5b7d8c604ece3331b42110eaf7bea6881e942118daa00e709d15bc4b0e74361357e7746d37e070eb2a4ceb27d013931face2cecaaa9ef2ef43839f140d4579393e48bfb6a5ec37c905a55ce69d52366e1c50e99974ff5b6a1fda272f8caec00946362265782e42fe29b79cab97e3c754bed749bb485c6ff2c51ba71471f633f634caebd7caf25cf081d594a653e79520b2717819eaf86df24a0449f3a7aaae260ef3ce5b8e5efdbb061b808a9bc7fae2223f811cff3db37497760f7299d95936a813f96628ef4a6ca09eb22072b4a4c20310212638ec266189b5af85ad5eea8e85eba37acaf7934f9581025577dfcb56029b28dc37722445d3abf5de6062462b120b81c6cc76274d50f882c1347413b9144b4c7d5517a59cb5fea8eb9ae1671fcb411e4948ae4d7ebd373de4f4de7aa72ebcd3ea25bafae59ea2b5f0ffd97cdf954cf11dbd05be666357dc7fb11b3a918296af661b60d0f8a6e3840b325ebe27e21040002f421cee710a61a0a7d8f73541fbb3d32b715fef547818b93013d1d507fcd04fede17624cd461a04661ccad334765c86db61788db8c405fbdb51f5df471b88d29c1ab60b78e9cc6238556c1336fe54dd9b098ba8b697983d785c2d900143397443e0ac039618069a1b496c74f3079deb42575d22159d24300e8691208f863ae646ac6c787038ab4274dc59483eed575cd4f24786fc8b8fad7f1ebcdde326eb6b206045df1edb6d7518fca88ad647743530ac0892b371c837dbe43a970a6fa0449e0e30741072af5ebda39601e55125bb8129b272da4fe3fb18b55ad9d02f630f85300f70ebd089ef5b27a731cd99166ed2197000a3eb9f465ebe022955b14a3a15c5684862a2909eb1ec5530539e43d1746117718e062e136a3aa46f6e2b629fd85e744bf8db7a428cafbc288d003b9f1b14e5d3ed4678b26f5f52022d56f15b9fd1771c91c13589ee3100f7e69e253259d1d6cdc7e9edb5759b676019700de01c51ffc6246baac53523678d3a13f5b7472e2e64340be5a7ae152be054001eecaf8df6c16c03f7c2efaa46c74104e620e8da6891a34743507fc5a3f2be55661c95e0094661c56394fe6b0e90acb7a67bb2b9ed35fbe76f6309332e11c3f41fb823cebe150979b739ffcef02c2236d2e7789da97f610d1cb1ac89aaecd9f23687f23b37362791290e8589533a5132735b297fb541145f77c90428010ecba680a041b8565b8a6a9bdb95473b700b58a66a784b14bf79444d43add3307f80dbe68b1a2cc61c67ade81c418403df96aefd5e595ce5a45c304c3e6a6efe93a49d6e8463d27e220c779acc5b4876db27841581afa51d5301cdf9be6ad67f41d1e488508f2d0e73bb05e88d995e84dd10e3dd76a9bfe4a13837712a8ecb761e41935b4f0d1d25ea4e60fdfb06b77122750f404d32a1fc6a1cbfcdaece3ed12158d9bd1fcb310884956b5eb196fcf3512da4c9997e5b5b89a178aae8c6d80825643774d1da1ad13b87a02adc3082f5d5c06f9f7c39abbf3415484ad761db9ae19a37d6f05316dccf3005a7d2a0771ffe34c094bae530213be7a128a01cc7f39f106de6e845350c2ff2695ef53e9361d801a94e800b2f24a87319c1b11af064fb656004cd1b249b55db224bc5f89644b5b103fee6fa51232b78ca6b48c74a6ff3b6b06435ef0fc69657a37d4ad2233c7f4799df53fbd09de1b19cb3021570fe6debd793d5de0ec00918085f48216fa25b5c147c27aebeb61ad51f6ce1a5941dea1b63ba1ddf172d6a544d240a9e57f4a59234b5e7c9b91048a3aea91a52e23b4a11a028ed85549c81e187a42f2d05a6a132f6ae3233046bcaad743c3b59d321718710bfd8c9a6466f1e87e5f910e11b1e11a1328ca748d2f7d6fae1a5e95fffdd8c261f8d164c83f9b779d0743360bb3338b28f2f711bf5ee0df466f6fa368fa1151857c47adc7980d03dce2545363dc61f37e710544022b302591024fe363faf7a83e94b8f1f5df23eb2644a2cd54be214d600905fdf6fd691fed2766cdbfa0dc55590c54e74fb2e8a895351158d168ed26bd528cbfae7ce036f2399acba4da13197b27fd18b5e3e21b7e8da1266217f8f752ac15e2f7759e22cd9ece53db95d5cb375c90eab29429f08da92ea2438c6b830b24e93fc609c70d17f1668c5ff186530f7a425d834ab43c9d6b94b260360026717471bf95e11cf9d6c30b1d807c883f3aeb3c1f2c4be7a6c989942fa1a6d27a1c0ce6f5020aa1f3bd8e3c79325567d7a9813af0b1e7ed80725f421908be05294c1c8bb9797f310265204ae33aa0cc1426ec2e7222e8c39908805ca60bcac60b3e2bff00de65ad03fa2e7ee8c97be8260344b18586dcbf380450ab4c64ecd8c95993c74e50444722df3ff4a01a635d18c16c3f196495887854f386992afa69e1e8b1e7c174f5f0c9a15d6abb07d1e4af307ffbe257996a81745611edaac85e379dd2b46ec9832de6b229b8145b0e910cfe016366736527539daf258f0273c24d809a5b60cbb8d4e04d814a84a9d28d421dd8b9227a9bbbf5f6ebb3e151eef6b6f88d42cc729e22624b21abf9748afdf240cb8561d937045c2490e633ece1e4336867b0f3e1a8810dfb2b79911cd16dc3217efb9ecc6da1e779c1cc84f7126b757e823e27893383ef6380258bf47cd277d7a1f307e45c7d1e94882ced705b8007f848c5207d049745edd548e3fbea12dce3cbfb4010ddd361c5024e0db478cd3ba30c4c9bc556116942ffc26917495df564ed53750e07e6d65299c86b7d33a7f4d4da1ae45bc660225849ee094299a649404f121d8ec944ce582ca2726a4994fa408724e01a584f1f75896685795da0c447b85ee856733633a44446779d66d9197ff6ce2be920d87a165281162ac5a9c8f1348c6b414eaf547f23310f8be0ff3263aa98549948d65ddec31f9d80139e8f408a4520540128eae5d75a51c765a5fdda4e58a419e67bb59c25efd570ca486ba8831706c40d17bfe0990ef56b8dbf4b2874b0fb565aacb5ca6a120be47a0ff9da831a36ce30da7abb1b785dd1fe0efecc65cfd6b1bb5bd160fc3991b633ea75bb32df9a70d29e32deef6a8135b0b46b8e45d4c39d463d7fd6129f9d9176221e1b3e6e08ca3a533c563175e4f1a9a81278cfa8439e6798fdd66540ad7b32e5e780711f5fc017e4eedd7d5f40a2f7888dda96cce2a48c3c0f4f5347697516f2f29039b4d5c789e275fc34e9cc5811210297a66c3e38f56ec1e6260555af3b644fbb05a59fa3b9ec1334f076840daf5b59b69641349561c13ad6355fc543cb1699b92ad7d857ba7442d4030160903306f5dcea72759fa98839727e26c14540c14f91f5ebb2dec2a99ef60f09f36959231609d3c44f6023d8019742265b862c275ab3ab125b948a4ed0e681b75cb418a73eab710b889ec1c916fd18fb46da6210a43cb9beb10f78dd485e5485a097f066b5bbfbc99fc55ce1ebff533ee93b5d5cf6bc36a4b2743a6b9f70e46bc37cc8a48df669ed69d9b3f75ba522986f6bbbd4c67366a785d1a3af99ae74227e0736bcc785c60b49a91cadadd8cd3c8f8dac6e90a391e798d26fb51262d7665484c26e4a73ffbfc5040aee79155cad902c95fd954b5fcc74cb278d267063e5bca54d18f5d4a22a5f9eafc91a82178694830f211a0c1308677e6807b4ea5f47923b2a8c6bae4f39d58f2ea59ee9f7eb562bd3e5d88f67179707bb0b10d14f93cd5b5f8f1426514314a93efe6ad0ca47c9e298d4cf91be07065bee3d1fc1e5d2ef566d5dc529ad462dc552c64440bd9f38db565a856175ed761f7b39012cef926cfd8661eb1cd21f932b234d6ae1d16219fd635ebd95f74fc08149ce7b40fcefcfd6e5cb3628b5752422ea83ed9a52479d0197bcbb2947a5f436e19eaf779d2e485839a69314cd4b7a0df2d22f2b97358c4903ed48485e84c37d7d0bd35678490efed125ac7876685ccf2b8bfe663cea3c6ba608d92c31a69e2dc747cead3fbe29211e32c6955cba403ff2f44fe0a8e713b0d2e7edc34ea03baa9292ed4cae437677c8cf15daec334279688f33c1d61de83889fadaee3eb096e0593d14444d0a8bfb37474cbb755406d54c37de336a8ef043607240eb824dc62ce3f08859e76045d0d67711ed4d3f6fc0f7e5cb5fc8a888573f749ea129b24cdb31526d9ee647775a6d51682bb04f207a5154f23e07afcc852744faec7d8bdfa3dae967466769b8e40b814888a5e23180e3011ff5d2c5b00efb85d3c62afc890e5534a2e762ae7bb268f5a2e284976b3a1bfe129f3f716ae94f4bb653b3dec8a5c1176efedc799ee11f8820188a1af7869fee97085a9244d8aec7c9fa7d81515a33068441b6dca41f5972652c140c73668043927595b1ab58f8f31e96a7e287a2fbc593f700841c2d4d32c73ec927308d895da493ce22a16abc27a3cfc754a9f470595b5af30afcfd15f266a0a0e4c8c197e42c346a095eef8ddb50b42b0aee2a5f627f98869446adf12be25fd86801c531359db5b8186f4e70b5a154b3a3ee618e2d0eea9a5f24ac465803d9b3f47c0be2ef818076acac534c5e0dc589d02ce667f01cd4911c05c7bf91097e0d98939fe4442c7c7965e0641954e364c8b1eb625e8981b1c70f4836f2c9853212848e9bc3c5eb72458a3f38a51552e135e966d3c2247966e67f664b2262e8a60290c563f9345737d4ad86c8a360fad3c2fbcbaf66ce5090dee40d35026f036906a4ba77bb6f5d1b0a9ba5d310bc0cddc510242a2d2d8ef1c918fdd04f2561a93d3a2bebb1211d78fdb41b6f45ccd99b649752bc9bf18042157b63b7f3f5f932a8adc2eae52731ff3af6edeff712feede18b876e4daffd161359449719cc23ed2a17c34ef6fd96e41753b21c395d9091157285039fa6e8be6e4b70cb56d80487019909b82d7b22e0fff217db6102a29f5365a51222aea351d2d81246cc4076b00299e382a79b8c1da2536aed5282e91339065adcdcab4142669524d02ba3f4a223618ee56d1fca232851ac0ee55f921ee1b1d98fd8eae926f42ec4260c6a4aa8437ab40bf58d0f3cceddb5d02671b4afb51b716660450fb85133d616380403ccb50bf0ff1c40532e3fd3ad6642dd8d93f2d8dce86cd4ee21b3562d695afca893b3c947b6f20b6abfc40686af44d15979dc9eb55a74f25d167d322d72edbc0d922ab1638b249a058b9394708d6f4d54d9d47e5fa524e756a86c55c11e548dce8bb89315150b33ec0660847ad251d23731a238fd01e7fbb8491cf28602265e7e9cf0d3eb65cf101fa37e8d1c91c29af97a26c9123272be381b66765fb6d8b41d83c24dadd477fe89ff10a4042ad0c35c5410b5b60df21f52c8c55d99ff728e6277639d372ec53548ec5cebe7907d74c61964859a33302895d8cc62d76e40fb9c0489404b4bcbbc9cf190a7f26ae3b455ce4a674eda05b1bc5addda8045f9311f906677f401be8d14312801cda8dba1e69d49945dbe8646d18887f37f3c666f5ba871e8b57c1238b44bc91196c6e3022ee2101b085ce021cd0051f74270b8f000ed227c1e1d6cb054550a52f8a86c960a057fe60e5567d8068b9ab028f60c80a4ef733909b73c6522b9091c8c19e3d0d6736b0f296b3751e321a20a9ea45869d8e1c0ce2a48264a27421280b1cca09d6bfd296c3c619187c5af92fb5c153af12d6142321aed80e2200c4935cd6427885bbb7f590bfde6719cf385f8a169ace8d4091db32edd4ac0762b64008c70ad9b167bc0bb63a0e12ac501ad88e078d5bfe696aa1408cfceba3e50d341b4c0a31327228295f7406d66b3f69325a5ebb28d89beb50a2f4c72efd20871dfa5f1375b2ed259a9f9bdf31c6d1ac22f633caf2c75427491392899e6d506bd51284502925ede66749c31bf9ab33815effdfaa2d9be2a0f3d4d1271078c0730df0e25d5ef41991f2a8e40cbe0affca60e9f7a27cf9d9553c9ba248ad586b085b54e671963c418e79948aff63588ebc0229e11f7c48fadfc4d756c8299b8efe10641e16bfd7c594f0e217beb3421891bf1ecfd361aaa913d0a6cc70bcbf66570911d430a66717c624d7638a8218a0f20c5f57fbc4731d4f00ee12d2857347857494093a0d66c96b36a0f25c2998dab75d619688dd0e8b5f9cc6b5a05f1f7e3ede15da8d3efd8ff9a3161ee579dfd6cf27712bd8187d2939353cefd4a3b0d848ce4525eb1b053274108f6206ede1491e08f4371864faa578bc7df22818b181853a29dcc37be1b4329d36d4b6033bc4e567aa0639446064d88281c856d1a0bd41cb1aa33926333faaadab1635068042464a9d62d466cf271a8ff9adcb60e586602a44a820cf433596c953da412633f037dcf6634e73166c7a709d94e06c5765d684683db4f060e64be613e922c2908849ad3a0e0bb2c719ab70e6761882633b6d0bcf7100d65a284fa0745f80fc7d0631aa9349fc72274e75ec87fe80eb89d73ce74c1d6312e0a4b367e58fb80fc71aebb00ab7b77e6acc8c09a3629f6d1e3551388dc92c719178a93a36ad41a71fdead566a522c018f32f4d669bc182ca486082d2a174b41a8d9a166cbe2d03f0a0643936a38d4d6cd366d478715669a0bfa464ba56d0076c4e53f65d1affcc32124795af852f7d907f30797e65b6dbbe8846c2fe3ec80ab859605c17743bdfe2a4b8cbea9269182bf6b154a6f0217730c656053e9ecccfc9b87259a7c41a9e9526fcaa4514edd9e6de79823378601aae9db8163247c7560d91a73197139e892f629d915706f69e1a90ed4ba1659258e2369fae3b5809d4d58e25587a835db2e50eea3042d09b2b5d40963b96e829d894cff5a82711555870e77898123dabf509e5200da320be70a8e052d10173698a56836cf0cd9e41da868c6c43ca53dbb5bcd8a2c86ae6c84cdea5c78e8cf88a6664b0c9fc6aa021f3234f194cb9fc703572a740f6e8bde0e8f16fa5c6f04da147a16331f5455fe171ee4ebe96daecda8a104a94f8940115e7787a3008876219287a145b470403ae66a317219878e8b374465d805b913ce822e25c52704613f96aa9dfba1c89ff8b86952de8d830af136727459856cf283acf75c8093ca66c2916a4a706679e81cd5364b693f37df56bba93430dc8c0471aca924017054e8c154e98be4b8d6331cbc5f3bed0bfa88c8829f07fe17549d8e387945cb532616ea77a7ffdf235631870443f14e82a8976041b98af43f47d0f774408f8ee9d316b671a7daab7c85177871cda2b343a91c365c7443dd18b7961478073e179504a67299bb7f754101d85191abedb7b29fb0b11df4f33a5260469565510cfe6e248ee80f264b193cdf7e290b38d0efd18a4b623188e8c36f1598c64f5a2c2953a723bf7ca5c36268b432c16eee19b6bcc3910e38f0b8ac183dc9427a497f46b8a1823a26e3070e6feb0f319b773732ec310a58701837a81b715dda438d9dba2fb98631346bffe4fdf4f1414b75510fa1853729ea27c348cf2ee7de179790debc802d5ebe03fea1a24077b590b1acfdde152b1fd59e394b84c25ba8caa8de3e27152ba4a8d2b126edd4c3238cb8a1fc6fba05e63cc112db9c0f7f0e3a9d612c224ee20d7259f9d4576f797cad6d49a9f9ee4aa6bf9a26aa8377cdb5fbf5ff9b49b5ff992893314712c5e4626a2404904d092153d7486f5c02f443f98112bd3edd8c0a2dd65a9ff4481f382b8189845012e06eb2e3de6426ec27c155d8887988c6bb889546ceaaef1737a0bda658f246b795c21acbc14e9d411b97e558f5553fac1d2c100c3837f6c19a0ef216f5b83275deeae2a469db38bf10efdc4f42142033b1ee143cd7ee96d442276bf21c7a32215321d7a0e5c2339fcf67b64e62378bb859e8e36e5519869fa164c18f8db9c96728e8550663b1bda60339ce690eb7f06d7cf449db154dd426bef771d0d46b24358c16ea655286ddc795f49b2ad33c89d51ba305e6b9908c5c5f078fab76ac913d6f569bb33295df989107a0ec6ecf91ad65316de4142b49faf8d0f405fcb6d5c36c8f8c45156424686e30d42b366348c781fe40132f75beb92a0858bb7ae97133441b39d971a0c76922a6519c02e21780135b07065fd38359c7517fa52083142fa23fa5b8f45beda7d33212875a90815352287d4e7930309564b7a5ab572bb495851bf48ce0907f1608f2fac7c9ad4eb2c7295887ce3073d6649ab9f698b9c5217128206a4b06208c906ec4b4704b0acda9a69f06c9536ac8ca067f32d80411362901e1c9796fa954a20b384f19af08c79cc3bff3254b8a1ff0babf055618afe77459323c3f8c9ebb391dd0f5140bde71fef001636ba5be44e86fcb5e66315a795f3addac3b2a20bf1df5d672237e2b90cfb148b7edea5f8a5f76f902a823a9c766e6f44f8fa3a36f47d33a823fef25c62121e466c9e680825c6aa132b7d6aa34b31e2b3af403b0f34db8b16a0c53015106c6f7b33921e795694895c1373e9d1162964f682a32be3eb4dda42818aad33502574f89ca9484d9e1bd2dd7a6de8599732936d1c87d8bb7c3ef6167974c5c4b0bff3cadb4dd00b79149baa096d543274e396cf6db634fa166a7f1fbae8b1acce3e8f5448617657bdb981e0890a68b67d906e7f437f6da282588c3546df6f9f848ab4ea453b49068d02f1e455acf04b4cc170065e8f1f59106ddf73250fdfdef98804719af3fbee88f1744f255c9848aaee7fce2af0f61d4a0488ec3eb292c5e1c3ea2fcafbf90a4889cb6715468554ef6f685590af4f84126733d7ab35f04268e8826f84b3fc956f6492d2cd277243954642727b7f6b3e585335ae6f14ee47b8a279dc1a852b8405346eb05bbab85f8b7b311a80a743b4f3c0d0bb61bdad549c63e8b7c6677376e0dfb9d2455cfe8c374b5ec0f9dd18f93f7e7948959cf89c056c3f3e476257a0e10a091b3868f44bbf0b9ebc82cba7f1e1bceb8e4e464e11c410ae3996373826ceaac4139f5dc9cbe0166b1a2e66bf701a481fcab45a418183ac4a9ecef1ac39b373584a580c4e5b5c96049574c980ac409fa8fff2cb74e300ceb5d5122c0b6c543d7560ff23cb568ac9a32ee785710062440a4dc113deaf7896a7f7ac6e54b090815bf30a08b73e2395329806b329de93233a550d85f431f810e05a9017c1dda99593990d070b1b5b6865b437d687132f1f3fe3fcafa200e9a0f61b53d04aa77b2a878afafdec16c2b6f0a1a5f1cb1640daea46eae8aa89aab975fb08e8c953a975e60f2f27d6295ab55ed24638de125db0a97f0794f244c0e8d3ce8b566b90215761fa27822845f117e9ee56234f1a87dcebb82d23e14847bd0cbc01ea01b309966be0731445d2d36f2a4fd1cd38223b168375410baf8dfe62cfbf127945c0ce5ef1964148ccdc186dfc80b5aec95df9dc86a2d8919471b94d71e99ffb617122c822ca46ad35db3f064f6dcb8861723407278b1986e4551157e8db65d782e1c27abb793f32d556c367dc9ae2a289453af489f5efb624fd304dee18d514f23968f736a96bf1ee96ddb50be8f17daf39e1467e1f68c8480ba2ad208534bfa837ef463d92f72b1e075b44c8916dbd34c206f37b7718582be9c55a855438bdb682dbce9b8a2d2592138df098565d6ee662e954d25f2b9fd2473cf815aac0021b833ce6234bddafc1c4dd0cd5b4e0cd3e08a861f1af3ef4d890adf821a2f57bd132ab30d582b31e548caeb5cdafb3095fecd06a7b93a088a05b112e15b26e4b4c46a8be5c47f55023d6128650c39dc32f6d09c5f61e2508d4f0a705e7b7c973093fe8fd902402072de097037e2893fecd31e9b64b838220cc6d3fac90a7f032c1e43ea3732deda707e94118324cb16cbb3f51e36b575f06ea1ff0149b415f1fc43e56c190260d47aaf519fc6cc19bfabb3df3bb5d4ebe4186f93b3b11303f06bcf0fbcd717dad1e3ff4fb84fb5521fa1f6148dfe57335040e636f9582c6ce809956f1bd6fc9493c2440facff094682fe40fec0f9a00820b756371027c15d81cd78eed1dabedf027b9e2cb3e69006760e38c23fa70418568f7720e1990adc7d47e2e2bd62ff959aad9deb38392455f992d35e3397219fc4bfd1e131da6b2a04833e6d3c32bdd4660eaa55cd833034f5e23ed6b104b0a63e207245a089055795af56a5952828ffad0f91b77082818b2cee2074dcdd12228898f3d66bea92bccbc47a0ca96d79db1ff7b99f9703511d23cb53ceb43f681da58e4790dd510d64055fa1f4fa41a7ac0c3e241a20af86829c60f903b0e20f7348f66b71a5329560adad35e8c532586d7330ae602c7fe5a64877f52d6b58682533b2e7481279fd6df88cbce2971f2f842dc651eb3039c5c6de261af3711f8bf9c328d7b441014f2e54355c735a7e57d425d730e7804a5437e25d6c12ab0f130bab1a5412caf307538f3ed6afb69c024cf1e1d17e5e86cb8b9a699234e24803678050e9f382bd0724a630988e34be7c946e2ca5c84d6fef8d61f4d588c35175c7c3a468e109ca78decfaa72ca86ae5f9787b7bf5bfc97a0784df6732d39021377532e0115bffaa2e2c1bfdb7b918a93b97909b1d85e2b07cfb66e9301ae0f7465833070c19f1caa67331d3edc5e8e75b3bae885f4f45bcdbf2d8f47d9ca9e19ea7b9350eac9f314e8d640b28747e19a6a73d5fdba366b64576db8c8390ac836b53c6c1c42fa58ff4d74a3e569bb11d8c0ad905216a8a0648025e4c4b7433a98c540554e1dfe1b93a4c2d39e9fe029fbd05bd8067fc032d36ebd57c6612f1b18f7963aaac8abdbc4c497f3387dcbe0791cba418e97fff74306e119461ea55caa6b25fd86036f04193fe4b54ef3008975acf7cadc3603bf27e3ace77d91e45f2915f66b2bf4169497b9ca4657b720353a8af9da002d836721499cb4b27e6e42aa9ff77569aa2a4997f4b4a094941a53051818a18c69b85ca631466ab825dc149e2e86a14028d76696be740dad7fef2be180ed49323e705f9ae25b1e1e2ad3ab52bd32140e81d67207d6b3aa8ca634aa6e49d0432506f1f1e90068acb6c241dedcced1f58a6bf81abce3a1c72fa2245ad3e4fb81fed55f4eb84839e3f4fa88b941da690a5511563c743f2d5a399b4193bffb6efe40c984217bc9ea96bde7e8275137566e52dc3e8e571a2b3cd5c3555892de83532db467478fe879e1833b06cddcca0a75eac72c8ae647d5842d999f5306a5436df514f3ea3336c3b4f13db587e1c3c71408ee643dc6a1ec37035919e5fdca69838ebea081a7aa2b67be8c8a0fd9005573196aa46e640c27badcea49674c6dbfb70afa5be8a5ab15f16e4b29b80d86d350e838abc60a025ee9457accc5ff10343a0c795b61782dcf8e4e1934cbd91b50a45250ed3b9e35a11533e2bbd2c2196133a1c8b693e7636f6442f27d8a56d65f0ad4de8025c38800c612096b80e428be42fd1e58b1c67dcb1c8626571183888e24440e0d93986213419622560243d0b0b3b06656a5cba06a76526065669183d9527c955cb0298154791f757438a931bcf7a757d23a0df40d5bc70684d3c0788a5bbcd41b9de5d41eb023c0408b7217aa2a466735cda05ea1785a094a7521d5ed84633ea4be7bf5d0982fdea6f9f7d159a11d636265dd9309c2a00abc1bb3990d3ba344a6838204ca8af6f126ab6f69e719540e69f68cdfb281410d0c682fce49fffb6a92b635d6feddf7d0083949324e0c7ddbade824ccc6aa54c5dfd2372f38dcceafa8ff1ed4f1b33e4bce864fc41a136d1f3a2f10be03334b3073bb52a3a19d10fe4c5830c99227e0077454c2b45edec2f2838d2cc380b844c35707a98fd935c202dadcc759a7a89558eaf4f483164162fdae84a4f9ac04236a256fee8450000a3fe1dc7041b991eb8ddb270a148fca1ca154bd8a21ed7fec80760abaa6d6699260dc87fb256c4ed71bbd3255d47af2d7a7edbf7892778cfb5fb13962cc02d0602087348d49494af4bede1383f750275506bb608ae386bf12bac1bcea0cceb6d4940c61fec8edc45eeca7a65374e9f52c9abca35e6ea6bc4cd11fbea87c7b38c1182852ba8f67da0faf9c2444e2e64bd1c1141e2db5240b77eae022e0227a71b8b4a213d664c216be9180488c9100fa95f87d914b51499ace5aa6f25ccd667a54b69c5e8fd4edf07bfc51bf8d63a1c78ffacac9b85174a269c1bfa149aa1b4ff6308de385048a2e11251578a7a470c75240065cb659d6d14bae8f58c96be33d09ea3dd5f71782f23d75bafbe5ffda92b225d38cb42020945985a5e3581b38a7b4d117bcd7f1883236a7f3dc3d6c85ac07a523ea4e4dcfe351eb29256f860e8440423ce9d7bdf0183266177f5e76858297512d5543eb67e22a8b7be5306b90ee70336be5ef5392d386d3ce952e3d6596ea55077f49d8553d393ad3eb10467e32f8f0666afc6312d64dd74a02917b31b8cc88259113f297de05d27760f1412e5a2c6fa4b2ae390e58d9b81430518f49785e8b9ac247b1962e72932e18a2d45066d33b8aba251ddc22b7e4d9081df773b96627d599ee85c39c3fa6d55522875c7d2f6eb0892c0f8913233de53e56900ef234983aa6637c5fa0a9689156611bbfe95885ae964974348c7e75e677b10fca472006eb4f22e76fd3d55dcd9e9902edbb51114b30b39740907ad5dd8993ca9c1608925385918cbf3b97d58514a045d5aa67d9ea3c90e4a86b548b81a6338fcaf3f386dfe53af4ca0b4d918bb57c275bb0c5c3d1b6f2b7528a8be01772d86f77326062496ab3362236e08e20a5ef163745ddc9d1e9a7625e4b78aad2b4954a19a8bc0847cec6bf588b8dcb21ccaab24f67adeb1a60294b61186a9060b83388dbb327ebccb5af1337a364a7bcfa0090ba83adc8912f288cbf0d53ce3364c590c44919da9162cff479a88ced26586b0d06c6c49b0833a2e197e5da1ddf6f02cd91399fb585cd8089a6a4038478a95db2093651d4b7cd62a7651cede059c4a6c8fad102ae4be2899c0a5b6f19f05d2f27283d11e983ac28be2fd2506dd640ce565a6b1f352faa258d35e065e9c7490612ef1a834d698f16374fd5876027b2824cd89e29cc17c14168624b087d65b7a27732f3148d0100535db45854d350941e782aa568d152e8060a823878f84575f91746b5df13e747f78b3f0638d241878dbd887d14f74ec0852e798ffb288eb3764c75748bb8d521722d2b964172fe00ac1297534c7fa622aba80b4cf3118dfe214ed5e25565997d9a7cf4572b6df67fa03c7f3c766ef70dc472fce52d9e6596fd9275022f4152ae08b5988d0740050c8dac1cac5bfb4d6502350bb2b72973f81086c0ffc3d661ffbc1477be7c94d9b34a9f663efdb1d9cc8ae823394b646e6b06daf1f211e15560b4403159aed532fdc55f52c6f3077f3d2de7a928379e7dbc3dcf197832d91892b0b5dad6687c514840b99836857a68b9bd255937a6f2ba0e49b67ff40b7a2e99a3e437d4afd9eef00c4c3553585f27b57fce9992fb4591390db10859394a9c09ee2937f8b870d12d7426a0c0bd959b6a861156099239ab718d864109199c822fa50120957fc3051cd1375b63cd1f09c25fe2b53bb9230229c8053677b3ace286007017ee76e59e6c6c62b3b34862db704a9b651c3133b0a42a936f5ba7359b810fcbc16466ec77107498d5b82de43c7964c3d9c2d27856b93acee160f3aa27c00bc227895af84b83436b6f46263a2db412507ee599176b2c483037e59b23ad266a64eb88f0dae92632cb565a55ed8e70134bc9f5dc97b2681016f36681ebb741019919d93ed38e7cbff4ab099952fe012c5bc57607eb5e1ee9e74b19dd8b441a5ef32a4fa5c6e520ba9e44c0fef9ef2fb5896b96db7d7bc37dbdf9e318a298deac3e29f789520bf9cf764d02cd48065e1a002c561f5298dca529c84265419ae614d56896ea8c24e4db8069e6d65afe8686721f28d2681e624cdca31e67b819ddd310eec189df6882de5ee18bc61878c467d0810f6f504724a0af3a5658496da584219ecdc93770054fd1da7045e2e21ee6dabe5eb7106fb117ced06e0b64866708d861b8fb07be5407685352ccc40ae50b74ac62d9a32eb4ebc0f7bc3c662fb858113bb7f09d5dee8622bdfacf1ff8de0f405a96ef473368e4010cd7cc1cf4cc6582273ecfc50c76203590ef2792575273c4f4d47844076a90624ab7740054162a56512c25567ad05626a4f923c3b68de965c46b7e33227ae5d1d75fbf1dab3e9f676840fd41aad1f8c7097870086f9541b73af921f7cee496ee3162ced5d1ef94ff801c7d75a02b47f73ec4826559fa2553cc5a88d5531ba8a43de8647609e7bae47165586f1b385e39461865b81b8c79db51b39cd2476fb03941846e0f3cb5ecf649c7404982c7f96e67b4a8cdae2aa9f95489c1b0a302a616626f6dacf99c1a9751261afcf07d29f1a24e7b23669411d9c22e4d882a0c2b785afaea43a89a629516898b6422d2c5ccc196a909abd51f1cf57afdea972632e24bf92163009d55da98fb81c4a2e70f9a4b1575633d998fffe3938442a11caa5f3376377fd621d82ce5944ccb68c8ae989d2bc9a5833946d71e7cf9fc772ff288a074d6397b7c0a54b700ffb90d5c2d79df47379481447780bc1c3036dbf4fd138763d2c6462d7c0ab81079b21d33b67d757328f521b930d44fd83e462c48757adec18b49882b7d7e2783210fcb86d83d1ecfb9ab5439693bd95d6788f95ab67235e486766db889075cfd35ba0368085d4cf615c442232a0b9860b51490b6c8c2886fa2d025a506ba4846b0a826cef36a5cf60f95ec4c9e528d49336fb718283f6f3f68bf2ec28e16bf0398ab28b42099612c2027d02f416934756061b7ee815407fcbaf7a0f028a8f7b55cd4186a9975edc1760f143e76c8713e19b1f5a5ed52bec0468fcec28199a14f484c86379aec1c0d31855e9911cfc99332e8b637248b258ab51c2780532d447fb9aeaed34d09228239fb3339669cc450d15a8b0b2c0669b2630a3c125aefe79158f9b7f12b379090e4816afb1f445867d46a4214eb26805b8042b4146f6915b93ab2a0f3d1d17ab090bfc001c0ae58b283f035f94060e42fed76f326978428e25d01a0b37859dce300d59cc3666eb163356b4b42490474a9f25aae0a0527bdfd6c0821b3bf0faa3b4bc00086df5fda21f60c2c624893bdb80954c5cc1acaa90485ab694a5febf51375e7723d4957632cc8ed7511dbf199f48bd1dde02b1a31780c1485707f84ce2e182ef3f361d166cffc20bc8160438add542b6f37106a0fd3d9a10002c138111232a2d4ef046503b0753a929ac5185e56ff4acaeca316bd910bacfc0589de9dccbfca1ffe4b92ba4c327a52b1ba09524a6ef69ac342d92f599224c6d82428555bdf7889524374c6872e58291b99a8a882c52254f0dc6c3516285ff3eae180c6bc358b5ad67dcbaddecbcbe9ec00e74b981c43b680bffbf32816049ec08055c23a19863d41fba7c4cfd6668d1657447f4396b31f0fa6e2682f71171dacc2</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<p>[TOC]</p>\n<h1 id=\"数据仓库分享\"><a href=\"#数据仓库分享\" class=\"headerlink\" title=\"数据仓库分享\"></a>数据仓库分享</h1><h2 id=\"1-数仓基础理论\"><a href=\"#1-数仓基础理论\" class=\"headerlink\" title=\"1. 数仓基础理论\"></a>1. 数仓基础理论</h2><h3 id=\"Q1-什么叫数据仓库？\"><a href=\"#Q1-什么叫数据仓库？\" class=\"headerlink\" title=\"Q1: 什么叫数据仓库？\"></a>Q1: 什么叫数据仓库？</h3><p>这本书里对数据仓库的定义是为了构建新的分析处理环境而出现的一种<strong>数据存储和组织技术</strong></p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/20210716151756.png\" alt=\"img\"></p>\n<h3 id=\"Q2-数仓与数据库的区别是什么？\"><a href=\"#Q2-数仓与数据库的区别是什么？\" class=\"headerlink\" title=\"Q2: 数仓与数据库的区别是什么？\"></a>Q2: 数仓与数据库的区别是什么？</h3><ol>\n<li>业务场景不同，数据库主要用于支撑基本的、日常的事务处理。如银行交易流水，电商交易订单等，承担存储功能，支持修改，而数据仓库主要是用于OLAP等复杂的分析操作，侧重决策支持，并辅以可视化技术，将查询结果直观的，易化展示</li>\n<li>前者数据的写入，修改等操作随时发生，而后者一般是一次写入，写入后很少修改。</li>\n</ol>\n<h3 id=\"Q3-数仓有什么特点？\"><a href=\"#Q3-数仓有什么特点？\" class=\"headerlink\" title=\"Q3:数仓有什么特点？\"></a>Q3:数仓有什么特点？</h3><ol>\n<li>面向主题</li>\n<li>集成的</li>\n<li>相对稳定的</li>\n<li>反映历史变化 </li>\n</ol>\n<h3 id=\"补充说明\"><a href=\"#补充说明\" class=\"headerlink\" title=\"补充说明\"></a>补充说明</h3><p>数据仓库中的数据是按照一定的主题域进行组织。主题是一个抽象的概念，是指用户使用数据仓库进行决策时所关心的重点方面，一个主题通常与多个操作型信息系统相关。</p>\n<p>数据仓库中的数据是在对原有分散的数据库数据抽取、清理的基础上经过系统加工、汇总和整理得到的，必须消除源数据中的不一致性，以保证数据仓库内的信息是关于整个企业的一致的全局信息。</p>\n<p>数据仓库的数据主要供企业决策分析之用，所涉及的数据操作主要是数据查询，一旦某个数据进入数据仓库以后，一般情况下将被长期保留，也就是数据仓库中一般有大量的查询操作，但修改和删除操作很少，通常只需要定期的加载、刷新。</p>\n<p>操作型数据库主要关心当前某一个时间段内的数据，而数据仓库中的数据通常包含历史信息，系统记录了企业从过去某一时点(如开始应用数据仓库的时点)到目前的各个阶段的信息，通过这些信息，可以对企业的发展历程和未来趋势做出定量分析和预测。</p>\n<h2 id=\"2、如何构建一个数仓\"><a href=\"#2、如何构建一个数仓\" class=\"headerlink\" title=\"2、如何构建一个数仓\"></a>2、如何构建一个数仓</h2><h3 id=\"2-1-先介绍下数仓的分层\"><a href=\"#2-1-先介绍下数仓的分层\" class=\"headerlink\" title=\"2.1 先介绍下数仓的分层\"></a>2.1 <strong>先介绍下数仓的分层</strong></h3><p>数据仓库一般采用三层分层法</p>\n<ol>\n<li>ODS层（数据操作层）直接接入的原始数据，简单清洗，从业务库直接同步而来</li>\n<li>DW层（数据仓库层）DW内部又可以分层，但DW层主要就是ODS ETL后的数据</li>\n<li>APP层 (数据应用层）应用DW层的数据</li>\n</ol>\n<p>此外还有一个比较重的层DIM （维表层）</p>\n<ol>\n<li>高基数维度数据：一般是用户资料表、商品资料表类似的资料表。数据量可能是千万级或者上亿级别。</li>\n<li>低基数维度数据：一般是配置表，比如枚举值对应的中文含义，或者日期维表。数据量可能是个位数或者几千几万。</li>\n</ol>\n<p>DW层的分层</p>\n<ol>\n<li>DWS层 （数据服务层）</li>\n<li>DWM层 （中间数据层）</li>\n<li>DWD层 （数据明细层）</li>\n</ol>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/image-20210716112822786.png\" alt=\"image-20210716112822786\"></p>\n<h3 id=\"2-2-数据仓库的构建\"><a href=\"#2-2-数据仓库的构建\" class=\"headerlink\" title=\"2.2 数据仓库的构建\"></a>2.2 <strong>数据仓库的构建</strong></h3><h4 id=\"2-2-1-确定一个引擎\"><a href=\"#2-2-1-确定一个引擎\" class=\"headerlink\" title=\"2.2.1 确定一个引擎\"></a><strong>2.2.1 确定一个引擎</strong></h4><p>建立数仓，必定是基于某个引擎载体来实现的，不同的引擎载体，对应的特点也会有一些区别，所以建立数仓，根据自己的需求选取对应的数仓引擎</p>\n<p><strong>现在来讲一般确定使用那些存储后计算引擎，基本也就确定了数仓的架构设计，这里后面再说明。</strong></p>\n<p>根据实时性，可以分为两个方向</p>\n<ol>\n<li>离线数仓</li>\n<li>实时数仓 </li>\n</ol>\n<p>离线数仓组成组件</p>\n<ul>\n<li>hive on hivesql</li>\n<li>hive on sparksql</li>\n<li>hbase</li>\n<li>mapreduce</li>\n<li>azkaban</li>\n<li>oozie</li>\n<li>hdfs</li>\n<li>….</li>\n</ul>\n<p>实时数仓</p>\n<ul>\n<li>spark-streaming</li>\n<li>flink-streaming</li>\n<li>spark-core </li>\n<li>hbase</li>\n<li>elasticsearch</li>\n<li>redis</li>\n<li>clickhouse</li>\n<li>….</li>\n</ul>\n<h4 id=\"2-2-1-确定一个主题\"><a href=\"#2-2-1-确定一个主题\" class=\"headerlink\" title=\"2.2.1 确定一个主题\"></a><strong>2.2.1 确定一个主题</strong></h4><p>确定主题的思路一般自下向上自顶向下。</p>\n<p><strong>自顶向下是先有需求</strong></p>\n<p>比如产品经理结合现在的市场，或产品定位，需要一个金融方向在数据来支撑决策，或与产品功能相结合。也就是说不管公司数据如何的ETL，而产出的数据仓库的主题已经确定，后面的工作主要是想尽办法从数据中挖掘出相关数据集，支撑生成数据仓库。 一般来讲拥有大量、丰富数据的企业来实现，对量级有较高要求。</p>\n<p><strong>自下向上是先挖掘数据</strong></p>\n<p>自下向上则是，先从已有的数据集本身出发，通过对已有业务系统数据的分析，或聚类归纳等方向，先确定出现有数据集主要有哪些类型的数据，可以怎么结合从而输出哪些维度，从而构建出哪种类型的数仓。</p>\n<h4 id=\"2-2-3-确定建表模型\"><a href=\"#2-2-3-确定建表模型\" class=\"headerlink\" title=\"2.2.3 确定建表模型\"></a><strong>2.2.3 确定建表模型</strong></h4><p>数据仓库的数据建模大致分为四个阶段</p>\n<ol>\n<li>业务建模</li>\n<li>领域概念（主题域）建模</li>\n<li>逻辑建模</li>\n<li>物理建模</li>\n</ol>\n<p>数据仓库建模的方法</p>\n<ol>\n<li>实体建模法</li>\n<li>范式建模法</li>\n<li>纬度建模法</li>\n</ol>\n<p>这里重点介绍下纬度建模</p>\n<p>纬度建模中的一些概念说明</p>\n<h5 id=\"事实表\"><a href=\"#事实表\" class=\"headerlink\" title=\"事实表\"></a>事实表</h5><p>事实表是维度模型的基本表，存放有大量的业务性能度量值。</p>\n<p>事实表的设计中要解决几个重要问题：</p>\n<ol>\n<li>确定粒度（记录事实的细节级）</li>\n<li>相加性：事实的可加性是至关重要的，因为数据仓库应用几乎从不仅仅只检索事实表的单行数据。</li>\n<li>键选择</li>\n<li>一致性事实</li>\n</ol>\n<p>事实表的分类：</p>\n<ol>\n<li>事务事实表</li>\n<li>周期快照事实表、 </li>\n<li>积累快照事实表。</li>\n</ol>\n<h5 id=\"维度表\"><a href=\"#维度表\" class=\"headerlink\" title=\"维度表\"></a><strong>维度表</strong></h5><p>维度属性是<strong>查询约束条件</strong>、成组与<strong>报表标签生成</strong>的基本来源。</p>\n<p>度表包含有业务的文字描述。在一个设计合理的维度模型中，维度表有许多列或者属性，这些属性给出对维度表的行所进行的描述。</p>\n<h5 id=\"事实与维度的融合\"><a href=\"#事实与维度的融合\" class=\"headerlink\" title=\"事实与维度的融合\"></a><strong>事实与维度的融合</strong></h5><p>由数字型度量值组成的事实表连接到一组填满描述属性的维度表上。这个星型特征结构通常被叫做星型连接方案。</p>\n<p><strong>纬度建模过程</strong></p>\n<p>维度建模具有一定顺序，分别是：①<strong>业务处理</strong>②<strong>粒度</strong>③<strong>维度</strong>④<strong>事实</strong>。</p>\n<p>维度建模的三种模式</p>\n<h5 id=\"星形模式\"><a href=\"#星形模式\" class=\"headerlink\" title=\"星形模式\"></a><strong>星形模式</strong></h5><p>星形模式(Star Schema)是最常用的维度建模方式</p>\n<p>具有以下的特点</p>\n<ol>\n<li>维表只和事实表关联，维表之间没有关联；</li>\n<li>每个维表的主码为单列，且该主码放置在事实表中，作为两边连接的外码；</li>\n<li>以事实表为核心，维表围绕核心呈星形分布；</li>\n</ol>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/image-20210716112804525.png\" alt=\"image-20210716112804525\"></p>\n<h5 id=\"雪花模式\"><a href=\"#雪花模式\" class=\"headerlink\" title=\"雪花模式\"></a><strong>雪花模式</strong></h5><p>对星形模式的扩展，每个维表可继续向外连接多个子维表。</p>\n<p>下图为使用雪花模式进行维度建模的关系结构：</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/image-20210716112812742.png\" alt=\"image-20210716112812742\"></p>\n<h5 id=\"星座模式\"><a href=\"#星座模式\" class=\"headerlink\" title=\"星座模式\"></a><strong>星座模式</strong></h5><p>星座模式(Fact Constellations Schema)也是星型模式的扩展。基于这种思想就有了星座模式：</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/image-20210716112726249.png\" alt=\"image-20210716112726249\"></p>\n<p>星形模式/雪花模式/星座模式的关系</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/image-20210716112733244.png\" alt=\"image-20210716112733244\"></p>\n<h3 id=\"2-3-构建数仓\"><a href=\"#2-3-构建数仓\" class=\"headerlink\" title=\"2.3 构建数仓\"></a>2.3 构建数仓</h3><h4 id=\"2-3-1-按层级划分存储组件\"><a href=\"#2-3-1-按层级划分存储组件\" class=\"headerlink\" title=\"2.3.1 按层级划分存储组件\"></a>2.3.1 按层级划分存储组件</h4><ol>\n<li>数据源：通过消息组件kafka来实时传输消息</li>\n<li>数据明细层: 根据量级而动，涉及和组件有kafka、druid、hbase等</li>\n<li>应用层：clickhouse、kylin、mysql、elasticsearch等</li>\n</ol>\n<h4 id=\"2-3-2-计算引擎组件\"><a href=\"#2-3-2-计算引擎组件\" class=\"headerlink\" title=\"2.3.2 计算引擎组件\"></a>2.3.2 计算引擎组件</h4><p>按不同架构区分：</p>\n<ol>\n<li>离线大数据架构 hdfs、hive on mr 、hive on spark</li>\n<li>lambda架构： 在离线大数据架构的基础上增加新的实时链路，需要维护离线与实时两套代码 spark(主要指spark-streaming)</li>\n<li>kappa架构： 批流合一，离线处理和实时处理整合成一套代码，运维成本小，目前发展旺盛，大有直接成为数仓架构的趋势 采用的是flink</li>\n</ol>\n<h4 id=\"2-3-3-架构设计示意图\"><a href=\"#2-3-3-架构设计示意图\" class=\"headerlink\" title=\"2.3.3 架构设计示意图\"></a>2.3.3 <strong>架构设计示意图</strong></h4><p>1、离线式数仓</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/image-20210716112742727.png\" alt=\"image-20210716112742727\"></p>\n<ol start=\"2\">\n<li><p>实时数仓架构设计</p>\n</li>\n<li><p>lambda</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/image-20210716112748310.png\" alt=\"image-20210716112748310\"></p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/image-20210716142722673.png\" alt=\"image-20210716142722673\"></p>\n</li>\n<li><p>kappa</p>\n</li>\n</ol>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/image-20210716112753527.png\" alt=\"image-20210716112753527\"></p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/image-20210716142744656.png\" alt=\"image-20210716142744656\"></p>\n<h2 id=\"3、数仓的使用场景\"><a href=\"#3、数仓的使用场景\" class=\"headerlink\" title=\"3、数仓的使用场景\"></a>3、数仓的使用场景</h2><ol>\n<li>ETL</li>\n<li>OLAP</li>\n<li>BI</li>\n<li>DMP</li>\n<li>建模</li>\n</ol>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF3.jpg\" alt=\"数据仓库服务的应用场景3\"></p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF4.jpg\" alt=\"数据仓库服务的应用场景4\"></p>\n<h2 id=\"4、我们数仓的建设思路\"><a href=\"#4、我们数仓的建设思路\" class=\"headerlink\" title=\"4、我们数仓的建设思路\"></a>4、我们数仓的建设思路</h2><ol>\n<li><p>自顶向下的方式</p>\n</li>\n<li><p>偏向于技术性</p>\n</li>\n<li><p>实时数仓</p>\n</li>\n<li><p>要有几个比较突出的应用场景，如可视化，OLAP</p>\n<p><strong>细节后续讨论</strong></p>\n</li>\n</ol>\n","encrypt":true},{"_content":"","source":"_posts/王阁/工作/数据基础平台/数据基础平台构建方案.md","raw":"","slug":"王阁/工作/数据基础平台/数据基础平台构建方案","published":1,"date":"2022-02-15T09:09:26.087Z","updated":"2022-02-15T09:09:34.818Z","title":"王阁/工作/数据基础平台/数据基础平台构建方案","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsb00006u6pw59uy1sga","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"","source":"_posts/王阁/技术/专题/技术专题.md","raw":"","slug":"王阁/技术/专题/技术专题","published":1,"date":"2022-04-26T05:53:15.568Z","updated":"2022-04-26T05:53:24.560Z","title":"王阁/技术/专题/技术专题","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsb10007u6pw1kcn5orh","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"","source":"_posts/王阁/工作/数据基础平台/日常运维.md","raw":"","slug":"王阁/工作/数据基础平台/日常运维","published":1,"date":"2022-11-08T02:07:36.524Z","updated":"2022-11-08T02:07:36.524Z","title":"王阁/工作/数据基础平台/日常运维","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsb20008u6pw8gl789t3","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"","source":"_posts/王阁/技术/考研/C学习笔记.md","raw":"","slug":"王阁/技术/考研/C学习笔记","published":1,"date":"2022-11-03T07:11:09.847Z","updated":"2022-11-03T07:11:09.847Z","title":"王阁/技术/考研/C学习笔记","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsb30009u6pwgxqverow","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"","source":"_posts/王阁/日常/考试/电子科大2019招生收集.md","raw":"","slug":"王阁/日常/考试/电子科大2019招生收集","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/日常/考试/电子科大2019招生收集","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsb4000au6pw8soofy6c","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"","source":"_posts/王阁/日常/vue/vue.md","raw":"","slug":"王阁/日常/vue/vue","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/日常/vue/vue","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsb4000bu6pwdeo4h0il","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"整体规划思路","date":"2021-11-16T16:00:00.000Z","password":"7FKBKZrTTTPG2LnC","_content":"整体的规划思路\n <!--more-->\n\n ## 相关技能项\n \n 1. 大数据相关组件\n\t1.1 存储组件\n\t\t1.1.1 hdfs\n\t\t1.1.2 hbase\n\t\t1.1.3 hive\n\t\t1.1.4 elasticsearch\n\t1.2 计算组件\n\t1.3 采集组件\n\t1.4 调度组件\n\t1.5 管理组件\n\t1.6 olap组件\n \n 2. 大数据相关业务\n\n 3. 结合项目分析\n 4. 工程开发能力\n 5. 编程能力\n 6. 运维能力\n 7. 回顾与分析\n 8. 刷题\n 9. 调优心得\n\n\n","source":"_posts/王阁/回顾/技能回顾/整体规划思路.md","raw":"title:  整体规划思路\ndate:  2021-11-17\ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n整体的规划思路\n <!--more-->\n\n ## 相关技能项\n \n 1. 大数据相关组件\n\t1.1 存储组件\n\t\t1.1.1 hdfs\n\t\t1.1.2 hbase\n\t\t1.1.3 hive\n\t\t1.1.4 elasticsearch\n\t1.2 计算组件\n\t1.3 采集组件\n\t1.4 调度组件\n\t1.5 管理组件\n\t1.6 olap组件\n \n 2. 大数据相关业务\n\n 3. 结合项目分析\n 4. 工程开发能力\n 5. 编程能力\n 6. 运维能力\n 7. 回顾与分析\n 8. 刷题\n 9. 调优心得\n\n\n","slug":"王阁/回顾/技能回顾/整体规划思路","published":1,"updated":"2021-11-17T13:35:27.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbc000cu6pw3je05auw","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"8c91b7c74f17bfa90a59aa57a0e313e18c1e3ad9dd8aa1840e23805e0c68294e\">c317fd37314d2af89c3eab77fecef36547a749cfc13699ae68bd4f71e9e6d19d5b518d851ae1da3f7400e72e07a4ea81f1e65bd504be43c97528b977677740419af9a510c5877e92698fa6f6a0be16bc2304533580987757c5150c6dc8123cdf3727e7f6892de9539fd2cd2727d0ddba1fd638d1c75ab799478df609e81bf95c551d37d66f4a1a91f7d4012f1c17d23e531345915c1f96828763bf0a60893349bf1488573a301beecb520da0be43e0ed7e5f77892a87491d0d28d15626ba7bfcce3d76ce2586cbbd1bc01f84e65613c1ad02bc0efea390d3a0a69d0938078d07bac23022a4e5c522a300e799aca030320a09f9087b84b5264c386751b979c917df0403fa39e823b8b33971b85ed5383c3696bd7e4aa8fa45e8015c30f671f8ca6afea2fb650687aa050a7f08ee1839140559becd3e19327e24abb173b18dcc43efb510bf7a8e0a95e329ce290bc2bfccbcf2e7de341fd75c223efd4b4bf79755063f24fcf5a2a571b0ea4fffa1218f4b53c86d9736a4b64fc33cceb59ac9d90c0504df9f531f2a53e834066f527e80b4c239f070ebe7f2084a2dbe26845864892d4b70d043c37c4c90b8a8e19afd175d7a077bb4d058b1b8b2f940d0e94ba340b90804005a74f15a70fbef38dc8d74dc8eba046c95b9fc56a1ece99fb44b51c2f88ac8135a7d9968912cf6140a572e8b7ff651ad8caa255d0d204ad7b3650885637caf7469e9e9b99442c365b1ea73924da723a2bae904ead1e8658e454c84ce2caca5fdf50294b8ee64669163dfeaeb09dc137230303a816b9ec9ba1b6346a0a7b17fe766a809278f346d650de0d702ef4183b4634e43ff96ca9071abce71f1f502410b771d51077c8d44449474fbc91f823a93e8097e7279834b1c4f345716f16032a23f3f763044fa5a9de60c4b7cbc6c85706c63be5b3ecaa72c247359eae058c9504d95dbdc048cb80369bbcb44</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":"<p>整体的规划思路<br> <a id=\"more\"></a></p>\n<h2 id=\"相关技能项\"><a href=\"#相关技能项\" class=\"headerlink\" title=\"相关技能项\"></a>相关技能项</h2><ol>\n<li><p>大数据相关组件<br>1.1 存储组件</p>\n<pre><code>1.1.1 hdfs\n1.1.2 hbase\n1.1.3 hive\n1.1.4 elasticsearch</code></pre><p>1.2 计算组件<br>1.3 采集组件<br>1.4 调度组件<br>1.5 管理组件<br>1.6 olap组件</p>\n</li>\n<li><p>大数据相关业务</p>\n</li>\n<li><p>结合项目分析</p>\n</li>\n<li><p>工程开发能力</p>\n</li>\n<li><p>编程能力</p>\n</li>\n<li><p>运维能力</p>\n</li>\n<li><p>回顾与分析</p>\n</li>\n<li><p>刷题</p>\n</li>\n<li><p>调优心得</p>\n</li>\n</ol>\n","encrypt":true},{"title":"sql储备&练习","date":"2021-05-04T03:05:56.000Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n\n # sql储备&练习 \n ","source":"_posts/王阁/技术/数据库/sql储备&练习.md","raw":"title:  sql储备&练习\ndate:  2021年 5月 4日\ntags: [sql]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n\n # sql储备&练习 \n ","slug":"王阁/技术/数据库/sql储备&练习","published":1,"updated":"2022-05-09T07:31:57.865Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbd000du6pw1gkc17b1","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"6624cf441a9f8d213eb8f6dcf1d608df4232b2c0dfd347c54385cbe73759555a\">f29c680708acd02cbb1b6cceaba06192ef928afb568f40fbf5a30db53c15eb28faba7f13ec547c4b4c4d6da8da9b0befb108ec694a33301f81770f1e74f8c39dad3869bdb751c7b0eef94048f8399b465125d26d3edfeef1e6ff91e4fd16e014f38c6c04d8e779ea4b1326074997a981121d05d8a52707eb7416927878a2a02eac90f416a9f90cacb4e6ea43b7da56061394fb3d6c6d0a7ffbb9d1a326309888</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"sql储备-amp-练习\"><a href=\"#sql储备-amp-练习\" class=\"headerlink\" title=\"sql储备&amp;练习\"></a>sql储备&amp;练习</h1>","encrypt":true},{"_content":"\nabout two git project\n\none hexo .\nthis project is used to deploy the files;\n\ntwo : dayliy_doc\n\n\nso I just divide the project about these parts\n\n1. pull files from github \n\n2. list the files;\n\n3. choose the files to sync. \n\n4. push and deploy;\n\n","source":"_posts/王阁/日常/blog_sync_project/plan.md","raw":"\nabout two git project\n\none hexo .\nthis project is used to deploy the files;\n\ntwo : dayliy_doc\n\n\nso I just divide the project about these parts\n\n1. pull files from github \n\n2. list the files;\n\n3. choose the files to sync. \n\n4. push and deploy;\n\n","slug":"王阁/日常/blog_sync_project/plan","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/日常/blog_sync_project/plan","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbe000eu6pwcon1as8s","content":"<p>about two git project</p>\n<p>one hexo .<br>this project is used to deploy the files;</p>\n<p>two : dayliy_doc</p>\n<p>so I just divide the project about these parts</p>\n<ol>\n<li><p>pull files from github </p>\n</li>\n<li><p>list the files;</p>\n</li>\n<li><p>choose the files to sync. </p>\n</li>\n<li><p>push and deploy;</p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p>about two git project</p>\n<p>one hexo .<br>this project is used to deploy the files;</p>\n<p>two : dayliy_doc</p>\n<p>so I just divide the project about these parts</p>\n<ol>\n<li><p>pull files from github </p>\n</li>\n<li><p>list the files;</p>\n</li>\n<li><p>choose the files to sync. </p>\n</li>\n<li><p>push and deploy;</p>\n</li>\n</ol>\n"},{"_content":"**汉口内网地址**：\n\n|访问地址    |  目的地 |host ip |\n|  ----  | ----  |----|\n|http://hkem.cdsunrise.net:28666/#/login | 首页 |192.168.10.238 |\n|http://hkembig.cdsunrise.net:28666 | 汉口站能源监测可视化分析 |192.168.10.238 |\n|http://hkemreceive.cdsunrise.net:28666（后端） |                          |192.168.10.238 |\n|http://192.168.10.238:30600 （后端） | service |192.168.10.238 |\n|http://192.168.10.238:23232 （后端） |  | |\n\n\n\n用户：admin\n密码：admin","source":"_posts/王阁/工作/杂记/汉口源点项目相关信息.md","raw":"**汉口内网地址**：\n\n|访问地址    |  目的地 |host ip |\n|  ----  | ----  |----|\n|http://hkem.cdsunrise.net:28666/#/login | 首页 |192.168.10.238 |\n|http://hkembig.cdsunrise.net:28666 | 汉口站能源监测可视化分析 |192.168.10.238 |\n|http://hkemreceive.cdsunrise.net:28666（后端） |                          |192.168.10.238 |\n|http://192.168.10.238:30600 （后端） | service |192.168.10.238 |\n|http://192.168.10.238:23232 （后端） |  | |\n\n\n\n用户：admin\n密码：admin","slug":"王阁/工作/杂记/汉口源点项目相关信息","published":1,"date":"2021-05-28T02:10:03.670Z","updated":"2021-07-01T07:19:43.234Z","title":"王阁/工作/杂记/汉口源点项目相关信息","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbi000gu6pwewra1vek","content":"<p><strong>汉口内网地址</strong>：</p>\n<table>\n<thead>\n<tr>\n<th>访问地址</th>\n<th>目的地</th>\n<th>host ip</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"http://hkem.cdsunrise.net:28666/#/login\" target=\"_blank\" rel=\"noopener\">http://hkem.cdsunrise.net:28666/#/login</a></td>\n<td>首页</td>\n<td>192.168.10.238</td>\n</tr>\n<tr>\n<td><a href=\"http://hkembig.cdsunrise.net:28666\" target=\"_blank\" rel=\"noopener\">http://hkembig.cdsunrise.net:28666</a></td>\n<td>汉口站能源监测可视化分析</td>\n<td>192.168.10.238</td>\n</tr>\n<tr>\n<td><a href=\"http://hkemreceive.cdsunrise.net:28666（后端）\">http://hkemreceive.cdsunrise.net:28666（后端）</a></td>\n<td></td>\n<td>192.168.10.238</td>\n</tr>\n<tr>\n<td><a href=\"http://192.168.10.238:30600\" target=\"_blank\" rel=\"noopener\">http://192.168.10.238:30600</a> （后端）</td>\n<td>service</td>\n<td>192.168.10.238</td>\n</tr>\n<tr>\n<td><a href=\"http://192.168.10.238:23232\" target=\"_blank\" rel=\"noopener\">http://192.168.10.238:23232</a> （后端）</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p>用户：admin<br>密码：admin</p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>汉口内网地址</strong>：</p>\n<table>\n<thead>\n<tr>\n<th>访问地址</th>\n<th>目的地</th>\n<th>host ip</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"http://hkem.cdsunrise.net:28666/#/login\" target=\"_blank\" rel=\"noopener\">http://hkem.cdsunrise.net:28666/#/login</a></td>\n<td>首页</td>\n<td>192.168.10.238</td>\n</tr>\n<tr>\n<td><a href=\"http://hkembig.cdsunrise.net:28666\" target=\"_blank\" rel=\"noopener\">http://hkembig.cdsunrise.net:28666</a></td>\n<td>汉口站能源监测可视化分析</td>\n<td>192.168.10.238</td>\n</tr>\n<tr>\n<td><a href=\"http://hkemreceive.cdsunrise.net:28666（后端）\">http://hkemreceive.cdsunrise.net:28666（后端）</a></td>\n<td></td>\n<td>192.168.10.238</td>\n</tr>\n<tr>\n<td><a href=\"http://192.168.10.238:30600\" target=\"_blank\" rel=\"noopener\">http://192.168.10.238:30600</a> （后端）</td>\n<td>service</td>\n<td>192.168.10.238</td>\n</tr>\n<tr>\n<td><a href=\"http://192.168.10.238:23232\" target=\"_blank\" rel=\"noopener\">http://192.168.10.238:23232</a> （后端）</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p>用户：admin<br>密码：admin</p>\n"},{"_content":"```\n采集数据,留作备用\n\n```\n\n\n所涉组件\n\n采集\n\n+ flume\n+ logstash\n+ beats\n+ elasticsearch-dump\n\n传输\n\n+ kafka\n+ flume\n\n存储\n\n+ elasticsearch\n+ hbase\n+ hdfs\n\n\nstep one : 采集数据到elasticsearch\n","source":"_posts/王阁/日常/prepare/数据储备.md","raw":"```\n采集数据,留作备用\n\n```\n\n\n所涉组件\n\n采集\n\n+ flume\n+ logstash\n+ beats\n+ elasticsearch-dump\n\n传输\n\n+ kafka\n+ flume\n\n存储\n\n+ elasticsearch\n+ hbase\n+ hdfs\n\n\nstep one : 采集数据到elasticsearch\n","slug":"王阁/日常/prepare/数据储备","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/日常/prepare/数据储备","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbk000hu6pweu8ac121","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">采集数据,留作备用</span><br></pre></td></tr></table></figure>\n\n\n<p>所涉组件</p>\n<p>采集</p>\n<ul>\n<li>flume</li>\n<li>logstash</li>\n<li>beats</li>\n<li>elasticsearch-dump</li>\n</ul>\n<p>传输</p>\n<ul>\n<li>kafka</li>\n<li>flume</li>\n</ul>\n<p>存储</p>\n<ul>\n<li>elasticsearch</li>\n<li>hbase</li>\n<li>hdfs</li>\n</ul>\n<p>step one : 采集数据到elasticsearch</p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">采集数据,留作备用</span><br></pre></td></tr></table></figure>\n\n\n<p>所涉组件</p>\n<p>采集</p>\n<ul>\n<li>flume</li>\n<li>logstash</li>\n<li>beats</li>\n<li>elasticsearch-dump</li>\n</ul>\n<p>传输</p>\n<ul>\n<li>kafka</li>\n<li>flume</li>\n</ul>\n<p>存储</p>\n<ul>\n<li>elasticsearch</li>\n<li>hbase</li>\n<li>hdfs</li>\n</ul>\n<p>step one : 采集数据到elasticsearch</p>\n"},{"title":"考试相关","date":"2020-06-04T00:00:00.000Z","_content":" <!--more-->\n\n## 一般专业：\n\n思想政治理论\n外国语\n业务课一\n业务课二；\n\n## 管理类联考专业：\n\n\n外国语\n\n\n---\n\n\n非全日制\n\n* 金融\n* 翻译\n* 工程\n* 护理\n* 药学\n* 工商管理\n* 公共管理\n","source":"_posts/王阁/日常/考试/考试相关.md","raw":"---\n\ntitle: 考试相关  \ndate: \"2020-06-04\"\ntags: []\n\n---\n <!--more-->\n\n## 一般专业：\n\n思想政治理论\n外国语\n业务课一\n业务课二；\n\n## 管理类联考专业：\n\n\n外国语\n\n\n---\n\n\n非全日制\n\n* 金融\n* 翻译\n* 工程\n* 护理\n* 药学\n* 工商管理\n* 公共管理\n","slug":"王阁/日常/考试/考试相关","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbl000iu6pw72ncd8oa","content":" <a id=\"more\"></a>\n\n<h2 id=\"一般专业：\"><a href=\"#一般专业：\" class=\"headerlink\" title=\"一般专业：\"></a>一般专业：</h2><p>思想政治理论<br>外国语<br>业务课一<br>业务课二；</p>\n<h2 id=\"管理类联考专业：\"><a href=\"#管理类联考专业：\" class=\"headerlink\" title=\"管理类联考专业：\"></a>管理类联考专业：</h2><p>外国语</p>\n<hr>\n<p>非全日制</p>\n<ul>\n<li>金融</li>\n<li>翻译</li>\n<li>工程</li>\n<li>护理</li>\n<li>药学</li>\n<li>工商管理</li>\n<li>公共管理</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"一般专业：\"><a href=\"#一般专业：\" class=\"headerlink\" title=\"一般专业：\"></a>一般专业：</h2><p>思想政治理论<br>外国语<br>业务课一<br>业务课二；</p>\n<h2 id=\"管理类联考专业：\"><a href=\"#管理类联考专业：\" class=\"headerlink\" title=\"管理类联考专业：\"></a>管理类联考专业：</h2><p>外国语</p>\n<hr>\n<p>非全日制</p>\n<ul>\n<li>金融</li>\n<li>翻译</li>\n<li>工程</li>\n<li>护理</li>\n<li>药学</li>\n<li>工商管理</li>\n<li>公共管理</li>\n</ul>"},{"_content":"> 将采集回来的数据导入进去\n\n## elasticsearch\n\n思路：先建立其它名称的索引，导入新数据。再通过别名等形式将索引进行更改操作\n\n```\nPOST _reindex\n{\n  \"source\": {\n    \"index\": \"hkem_electricity_data\"\n  },\n  \"dest\": {\n    \"index\": \"hkem_electricity_data_new\"\n  }\n}\n```\n\n\n\n```\nPOST _reindex\n{\n  \"source\": {\n    \"index\": \"hkem_electricity_device_status\"\n  },\n  \"dest\": {\n    \"index\": \"hkem_electricity_device_status_new\"\n  }\n}\n```\n\n\n\n## mysql\n\n导入新的db数据\n\n```\n\n```\n\n\n\n\n\n\n\nbootstrap.servers=kafka01:9092,kafka02:9092,kafka03:9092\ngroup.id=liuyin-flink-01","source":"_posts/王阁/工作/杂记/汉口项目公司服务操作.md","raw":"> 将采集回来的数据导入进去\n\n## elasticsearch\n\n思路：先建立其它名称的索引，导入新数据。再通过别名等形式将索引进行更改操作\n\n```\nPOST _reindex\n{\n  \"source\": {\n    \"index\": \"hkem_electricity_data\"\n  },\n  \"dest\": {\n    \"index\": \"hkem_electricity_data_new\"\n  }\n}\n```\n\n\n\n```\nPOST _reindex\n{\n  \"source\": {\n    \"index\": \"hkem_electricity_device_status\"\n  },\n  \"dest\": {\n    \"index\": \"hkem_electricity_device_status_new\"\n  }\n}\n```\n\n\n\n## mysql\n\n导入新的db数据\n\n```\n\n```\n\n\n\n\n\n\n\nbootstrap.servers=kafka01:9092,kafka02:9092,kafka03:9092\ngroup.id=liuyin-flink-01","slug":"王阁/工作/杂记/汉口项目公司服务操作","published":1,"date":"2021-05-28T02:47:36.296Z","updated":"2021-05-28T03:13:45.575Z","title":"王阁/工作/杂记/汉口项目公司服务操作","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbn000ku6pw2rnghts0","content":"<blockquote>\n<p>将采集回来的数据导入进去</p>\n</blockquote>\n<h2 id=\"elasticsearch\"><a href=\"#elasticsearch\" class=\"headerlink\" title=\"elasticsearch\"></a>elasticsearch</h2><p>思路：先建立其它名称的索引，导入新数据。再通过别名等形式将索引进行更改操作</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST _reindex</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;source&quot;: &#123;</span><br><span class=\"line\">    &quot;index&quot;: &quot;hkem_electricity_data&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;dest&quot;: &#123;</span><br><span class=\"line\">    &quot;index&quot;: &quot;hkem_electricity_data_new&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST _reindex</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;source&quot;: &#123;</span><br><span class=\"line\">    &quot;index&quot;: &quot;hkem_electricity_device_status&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;dest&quot;: &#123;</span><br><span class=\"line\">    &quot;index&quot;: &quot;hkem_electricity_device_status_new&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"mysql\"><a href=\"#mysql\" class=\"headerlink\" title=\"mysql\"></a>mysql</h2><p>导入新的db数据</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n<p>bootstrap.servers=kafka01:9092,kafka02:9092,kafka03:9092<br>group.id=liuyin-flink-01</p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>将采集回来的数据导入进去</p>\n</blockquote>\n<h2 id=\"elasticsearch\"><a href=\"#elasticsearch\" class=\"headerlink\" title=\"elasticsearch\"></a>elasticsearch</h2><p>思路：先建立其它名称的索引，导入新数据。再通过别名等形式将索引进行更改操作</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST _reindex</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;source&quot;: &#123;</span><br><span class=\"line\">    &quot;index&quot;: &quot;hkem_electricity_data&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;dest&quot;: &#123;</span><br><span class=\"line\">    &quot;index&quot;: &quot;hkem_electricity_data_new&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST _reindex</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;source&quot;: &#123;</span><br><span class=\"line\">    &quot;index&quot;: &quot;hkem_electricity_device_status&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;dest&quot;: &#123;</span><br><span class=\"line\">    &quot;index&quot;: &quot;hkem_electricity_device_status_new&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"mysql\"><a href=\"#mysql\" class=\"headerlink\" title=\"mysql\"></a>mysql</h2><p>导入新的db数据</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n<p>bootstrap.servers=kafka01:9092,kafka02:9092,kafka03:9092<br>group.id=liuyin-flink-01</p>\n"},{"_content":"account: wqkenqing\npassword:125323wkQ$\n","source":"_posts/王阁/日常/运维/about云账号密码.md","raw":"account: wqkenqing\npassword:125323wkQ$\n","slug":"王阁/日常/运维/about云账号密码","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/日常/运维/about云账号密码","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbn000lu6pw4kq6bhtg","content":"<p>account: wqkenqing<br>password:125323wkQ$</p>\n","site":{"data":{}},"excerpt":"","more":"<p>account: wqkenqing<br>password:125323wkQ$</p>\n"},{"title":"docker启动mysql","date":"2020-06-03T16:00:00.000Z","_content":"docker 的方式快速安装mysql\n\n <!--more-->\n```docker\n  \n  docker run --net host -p 3306:3306 --name jd_user -e MYSQL_ROOT_PASSWORD=jd123456 -d mysql\n\n ```","source":"_posts/王阁/日常/运维/docker启动mysql.md","raw":"title:  docker启动mysql\ndate:   2020-06-04\ntags: [mysql,docker,运维]\n---\ndocker 的方式快速安装mysql\n\n <!--more-->\n```docker\n  \n  docker run --net host -p 3306:3306 --name jd_user -e MYSQL_ROOT_PASSWORD=jd123456 -d mysql\n\n ```","slug":"王阁/日常/运维/docker启动mysql","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbp000mu6pw5s9u6rzu","content":"<p>docker 的方式快速安装mysql</p>\n <a id=\"more\"></a>\n<figure class=\"highlight docker\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">docker <span class=\"keyword\">run</span><span class=\"bash\"> --net host -p 3306:3306 --name jd_user -e MYSQL_ROOT_PASSWORD=jd123456 -d mysql</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<p>docker 的方式快速安装mysql</p>","more":"<figure class=\"highlight docker\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">docker <span class=\"keyword\">run</span><span class=\"bash\"> --net host -p 3306:3306 --name jd_user -e MYSQL_ROOT_PASSWORD=jd123456 -d mysql</span></span><br></pre></td></tr></table></figure>"},{"title":"atlas血缘管理","date":"2021-06-21T02:12:29.239Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n ","source":"_posts/王阁/技术/大数据/atlas.md","raw":"title:  atlas血缘管理\ndate:  2021年 6月21日\ntags: [atlas,血缘管理]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n ","slug":"王阁/技术/大数据/atlas","published":1,"updated":"2021-06-21T02:13:49.156Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbr000nu6pwhgqg175x","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"2b3577516f3e20553709db79f06399904180d573741a658aebcda1c1ddd05eee\">f29c680708acd02cbb1b6cceaba06192d34048633918d15832047c414baf92a4</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n","encrypt":true},{"_content":" ---\n title:  jumpserver体验\n date: 2020-07-28\n tags: [jumpserver,资产管理]\n ---\n\n <!--more-->\n\n \\# jumpserver体验\n\n \\#\\# 一体化安装\n\n\nmysql -uroot -e \"create database jumpserver default charset 'utf8'; grant all on jumpserver.\\* to 'jumpserver'@'127.0.0.1' identified by '$DB\\_PASSWORD'; flush privileges;\"\n\n\n\nm6GgXgemmBw5B7om9uYqFSz3erVo0JCLO7Trxpo8S2bxazXk2Y\n\nVv42qLmxsEPUO4Kf\n\n\nxLnAOS5Mc8cqRZ8QDxUzVQvZgxIRnJl73c0rE56WCSq8tYZQFG\n\nETNhIk9zu3fgN2pG\n\n\n","source":"_posts/王阁/日常/运维/jumpserver.md","raw":" ---\n title:  jumpserver体验\n date: 2020-07-28\n tags: [jumpserver,资产管理]\n ---\n\n <!--more-->\n\n \\# jumpserver体验\n\n \\#\\# 一体化安装\n\n\nmysql -uroot -e \"create database jumpserver default charset 'utf8'; grant all on jumpserver.\\* to 'jumpserver'@'127.0.0.1' identified by '$DB\\_PASSWORD'; flush privileges;\"\n\n\n\nm6GgXgemmBw5B7om9uYqFSz3erVo0JCLO7Trxpo8S2bxazXk2Y\n\nVv42qLmxsEPUO4Kf\n\n\nxLnAOS5Mc8cqRZ8QDxUzVQvZgxIRnJl73c0rE56WCSq8tYZQFG\n\nETNhIk9zu3fgN2pG\n\n\n","slug":"王阁/日常/运维/jumpserver","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/日常/运维/jumpserver","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbr000pu6pwbrqtaonb","content":"<hr>\n<p> title:  jumpserver体验<br> date: 2020-07-28<br> tags: [jumpserver,资产管理]</p>\n<hr>\n <a id=\"more\"></a>\n\n<p> # jumpserver体验</p>\n<p> ## 一体化安装</p>\n<p>mysql -uroot -e “create database jumpserver default charset ‘utf8’; grant all on jumpserver.* to ‘jumpserver’@’127.0.0.1’ identified by ‘$DB_PASSWORD’; flush privileges;”</p>\n<p>m6GgXgemmBw5B7om9uYqFSz3erVo0JCLO7Trxpo8S2bxazXk2Y</p>\n<p>Vv42qLmxsEPUO4Kf</p>\n<p>xLnAOS5Mc8cqRZ8QDxUzVQvZgxIRnJl73c0rE56WCSq8tYZQFG</p>\n<p>ETNhIk9zu3fgN2pG</p>\n","site":{"data":{}},"excerpt":"<hr>\n<p> title:  jumpserver体验<br> date: 2020-07-28<br> tags: [jumpserver,资产管理]</p>\n<hr>","more":"<p> # jumpserver体验</p>\n<p> ## 一体化安装</p>\n<p>mysql -uroot -e “create database jumpserver default charset ‘utf8’; grant all on jumpserver.* to ‘jumpserver’@’127.0.0.1’ identified by ‘$DB_PASSWORD’; flush privileges;”</p>\n<p>m6GgXgemmBw5B7om9uYqFSz3erVo0JCLO7Trxpo8S2bxazXk2Y</p>\n<p>Vv42qLmxsEPUO4Kf</p>\n<p>xLnAOS5Mc8cqRZ8QDxUzVQvZgxIRnJl73c0rE56WCSq8tYZQFG</p>\n<p>ETNhIk9zu3fgN2pG</p>"},{"title":"mac python版本替换","date":"2020-05-24T16:00:00.000Z","_content":"\n\n<!--more-->\n\n```\nmac python版本替换\n```\n\n\n","source":"_posts/王阁/日常/运维/mac python版本替换.md","raw":"title: mac python版本替换\ndate: 2020-05-25\ntags: mac python2 python3\n\n---\n\n\n<!--more-->\n\n```\nmac python版本替换\n```\n\n\n","slug":"王阁/日常/运维/mac python版本替换","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbs000qu6pw5d3432l0","content":"<a id=\"more\"></a>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mac python版本替换</span><br></pre></td></tr></table></figure>\n\n\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mac python版本替换</span><br></pre></td></tr></table></figure>"},{"_content":"## 使用tmux\n\nmac os 通过 brew install tmux\n\n```\ntmux 接收快捷键的指令是 ^ + B 即mac中的control + B\n```\n\n窗格的操作\n\n```\n这些操作都是通过 ^+b 来接收\n\n```\n\n| 操作符 | 作用     |\n| :------------- | :------------- |\n| %      |     左右创建两个窗格  |\n| ''    |     左右创建两个窗格  |\n| x    |    关闭当前窗格  |\n| {    |    前移当前窗格  |\n| }    |    后移当前窗格  |\n| ;    |    选择上次用的窗格  |\n| o    |    选择下一个窗格  |\n| space   |    切换窗格布局  |\n| z   |     放大窗格 |\n| q   |    显示序号 |\n","source":"_posts/王阁/日常/运维/tmux上手.md","raw":"## 使用tmux\n\nmac os 通过 brew install tmux\n\n```\ntmux 接收快捷键的指令是 ^ + B 即mac中的control + B\n```\n\n窗格的操作\n\n```\n这些操作都是通过 ^+b 来接收\n\n```\n\n| 操作符 | 作用     |\n| :------------- | :------------- |\n| %      |     左右创建两个窗格  |\n| ''    |     左右创建两个窗格  |\n| x    |    关闭当前窗格  |\n| {    |    前移当前窗格  |\n| }    |    后移当前窗格  |\n| ;    |    选择上次用的窗格  |\n| o    |    选择下一个窗格  |\n| space   |    切换窗格布局  |\n| z   |     放大窗格 |\n| q   |    显示序号 |\n","slug":"王阁/日常/运维/tmux上手","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/日常/运维/tmux上手","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbs000ru6pwabitdvi6","content":"<h2 id=\"使用tmux\"><a href=\"#使用tmux\" class=\"headerlink\" title=\"使用tmux\"></a>使用tmux</h2><p>mac os 通过 brew install tmux</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tmux 接收快捷键的指令是 ^ + B 即mac中的control + B</span><br></pre></td></tr></table></figure>\n\n<p>窗格的操作</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">这些操作都是通过 ^+b 来接收</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\">操作符</th>\n<th align=\"left\">作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">%</td>\n<td align=\"left\">左右创建两个窗格</td>\n</tr>\n<tr>\n<td align=\"left\">‘’</td>\n<td align=\"left\">左右创建两个窗格</td>\n</tr>\n<tr>\n<td align=\"left\">x</td>\n<td align=\"left\">关闭当前窗格</td>\n</tr>\n<tr>\n<td align=\"left\">{</td>\n<td align=\"left\">前移当前窗格</td>\n</tr>\n<tr>\n<td align=\"left\">}</td>\n<td align=\"left\">后移当前窗格</td>\n</tr>\n<tr>\n<td align=\"left\">;</td>\n<td align=\"left\">选择上次用的窗格</td>\n</tr>\n<tr>\n<td align=\"left\">o</td>\n<td align=\"left\">选择下一个窗格</td>\n</tr>\n<tr>\n<td align=\"left\">space</td>\n<td align=\"left\">切换窗格布局</td>\n</tr>\n<tr>\n<td align=\"left\">z</td>\n<td align=\"left\">放大窗格</td>\n</tr>\n<tr>\n<td align=\"left\">q</td>\n<td align=\"left\">显示序号</td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"使用tmux\"><a href=\"#使用tmux\" class=\"headerlink\" title=\"使用tmux\"></a>使用tmux</h2><p>mac os 通过 brew install tmux</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tmux 接收快捷键的指令是 ^ + B 即mac中的control + B</span><br></pre></td></tr></table></figure>\n\n<p>窗格的操作</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">这些操作都是通过 ^+b 来接收</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\">操作符</th>\n<th align=\"left\">作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">%</td>\n<td align=\"left\">左右创建两个窗格</td>\n</tr>\n<tr>\n<td align=\"left\">‘’</td>\n<td align=\"left\">左右创建两个窗格</td>\n</tr>\n<tr>\n<td align=\"left\">x</td>\n<td align=\"left\">关闭当前窗格</td>\n</tr>\n<tr>\n<td align=\"left\">{</td>\n<td align=\"left\">前移当前窗格</td>\n</tr>\n<tr>\n<td align=\"left\">}</td>\n<td align=\"left\">后移当前窗格</td>\n</tr>\n<tr>\n<td align=\"left\">;</td>\n<td align=\"left\">选择上次用的窗格</td>\n</tr>\n<tr>\n<td align=\"left\">o</td>\n<td align=\"left\">选择下一个窗格</td>\n</tr>\n<tr>\n<td align=\"left\">space</td>\n<td align=\"left\">切换窗格布局</td>\n</tr>\n<tr>\n<td align=\"left\">z</td>\n<td align=\"left\">放大窗格</td>\n</tr>\n<tr>\n<td align=\"left\">q</td>\n<td align=\"left\">显示序号</td>\n</tr>\n</tbody></table>\n"},{"_content":"114.67.107.246\nwangkuiqing\neExfeTmKkgRJ255SRRZq\n","source":"_posts/王阁/日常/运维/京东云.md","raw":"114.67.107.246\nwangkuiqing\neExfeTmKkgRJ255SRRZq\n","slug":"王阁/日常/运维/京东云","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/日常/运维/京东云","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbv000tu6pw56wn4r6q","content":"<p>114.67.107.246<br>wangkuiqing<br>eExfeTmKkgRJ255SRRZq</p>\n","site":{"data":{}},"excerpt":"","more":"<p>114.67.107.246<br>wangkuiqing<br>eExfeTmKkgRJ255SRRZq</p>\n"},{"title":"hive回顾","date":"2020-06-22T16:00:00.000Z","_content":"DDL ,DML\n\n <!--more-->\n\n\n `hive 创建hbase内部表`\n\n\n ```sql\n create table ods_uba.lin_test\n(\n   operate_no           string,\n   dev_no               string,\n   user_id              string,\n   start_time           string\n)\nPARTITIONED BY (start_date string) \n CLUSTERED BY (start_time)\n INTO 16 BUCKETS\n STORED AS ORC tblproperties(\"parquet.compress\"=\"SNAPPY\");\n\n ```\n\n\n\n```\n\ncreate external table bigdata17_user(\nuserid int,\nusername string,\nfullname string)  \nrow format delimited fields terminated by ','   \nlines terminated by '\\n';\n\n```\n\n\n## 基本组成\n\n1. database\n2. 表\n3. 分区\n4. 桶\n\n## 表结构支持类型\nhive是一个数据仓库,采用了一些类数据库的设计,但底层通过java实现,因此它各字段主要能支持的类型,基本与java的基本数据类型和一些常用对象一致.如\n Integers\n   * TINYINT-1位的整型\n   * SMALLINT-2位的整型\n   * INT-4位的整型\n   * BIGINT-8位的整型\n\n布尔类型\n   * BOOLEAN-TRUE/FALSE\n\n浮点类型\n   * FLOAT\n   * DOUBLE\n\n定点数\n   DECIMAL\n\n字符串\n   STRING\n   VARCHAR\n   CHAR\n\n日期和时间\n   TIMESTAMP\n   DATE\n二进制\n   BINARY\n\n 复杂类型\n- 结构体类型\n- MAP\n- 数组\n\n\n## HIVE表的创建,管理\n\n### 创建表\n\n#### 内部表\n\n```sql\nCREATE TABLE page_view(viewTime INT, userid BIGINT,\n                page_url STRING, referrer_url STRING,\n                ip STRING COMMENT 'IP Address of the User')\nCOMMENT 'This is the page view table'\nPARTITIONED BY(dt STRING, country STRING)\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY '1'\nSTORED AS SEQUENCEFILE;\n```\n\n\n#### 外部表\n\n\n### 展示表和分区\n\n#### 查看所有表\n\n```\nshow tables\n```\n\n#### 查看所有表的分区\n```\nSHOW PARTITIONS table_name\n```\n\n#### 查看表和表的列信息\n\n```\ndescribe table_name\n```\n\n#### 列出表的列和表的其它信息\n\n```\ndescribe extended table_name\n```\n#### 列出表和分区的隐藏信息\n\n```\n\ndescribe extended table_name PARTITION(rowName='')\n\n```\n\n### 修改表\n\n#### 对表重命名\n\n```\nALTER TABLE old_table_name RENAME TO new_table_name;\n```\n#### 对已有表的列名进行重命名\n\n```\nALTER TABLE old_table_name REPLACE COLUMNS (col1 TYPE, ...);\n```\n需要保持位置与类型相同,不然会有列丢失\n\n#### 对已创建的表增加列\n\n```\n\nALTER TABLE tab1 ADD COLUMNS (c1 INT COMMENT 'a new int column', c2 STRING DEFAULT 'def val');\n\n```\n### 删除表和分区\n#### 删除表\n\n```\ndrop table table_name\n```\n#### 删除分区\n\n``` \ndrop table table_name drop PARTITION()\n```\n\n### 加载数据\n\n\n\n","source":"_posts/王阁/回顾/hive/hive回顾.md","raw":"title: \"hive回顾\"   \ndate: 2020-06-23\ntags: [ hive ,DDL,DML]\ncategories:\n- 日常 \n---\nDDL ,DML\n\n <!--more-->\n\n\n `hive 创建hbase内部表`\n\n\n ```sql\n create table ods_uba.lin_test\n(\n   operate_no           string,\n   dev_no               string,\n   user_id              string,\n   start_time           string\n)\nPARTITIONED BY (start_date string) \n CLUSTERED BY (start_time)\n INTO 16 BUCKETS\n STORED AS ORC tblproperties(\"parquet.compress\"=\"SNAPPY\");\n\n ```\n\n\n\n```\n\ncreate external table bigdata17_user(\nuserid int,\nusername string,\nfullname string)  \nrow format delimited fields terminated by ','   \nlines terminated by '\\n';\n\n```\n\n\n## 基本组成\n\n1. database\n2. 表\n3. 分区\n4. 桶\n\n## 表结构支持类型\nhive是一个数据仓库,采用了一些类数据库的设计,但底层通过java实现,因此它各字段主要能支持的类型,基本与java的基本数据类型和一些常用对象一致.如\n Integers\n   * TINYINT-1位的整型\n   * SMALLINT-2位的整型\n   * INT-4位的整型\n   * BIGINT-8位的整型\n\n布尔类型\n   * BOOLEAN-TRUE/FALSE\n\n浮点类型\n   * FLOAT\n   * DOUBLE\n\n定点数\n   DECIMAL\n\n字符串\n   STRING\n   VARCHAR\n   CHAR\n\n日期和时间\n   TIMESTAMP\n   DATE\n二进制\n   BINARY\n\n 复杂类型\n- 结构体类型\n- MAP\n- 数组\n\n\n## HIVE表的创建,管理\n\n### 创建表\n\n#### 内部表\n\n```sql\nCREATE TABLE page_view(viewTime INT, userid BIGINT,\n                page_url STRING, referrer_url STRING,\n                ip STRING COMMENT 'IP Address of the User')\nCOMMENT 'This is the page view table'\nPARTITIONED BY(dt STRING, country STRING)\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY '1'\nSTORED AS SEQUENCEFILE;\n```\n\n\n#### 外部表\n\n\n### 展示表和分区\n\n#### 查看所有表\n\n```\nshow tables\n```\n\n#### 查看所有表的分区\n```\nSHOW PARTITIONS table_name\n```\n\n#### 查看表和表的列信息\n\n```\ndescribe table_name\n```\n\n#### 列出表的列和表的其它信息\n\n```\ndescribe extended table_name\n```\n#### 列出表和分区的隐藏信息\n\n```\n\ndescribe extended table_name PARTITION(rowName='')\n\n```\n\n### 修改表\n\n#### 对表重命名\n\n```\nALTER TABLE old_table_name RENAME TO new_table_name;\n```\n#### 对已有表的列名进行重命名\n\n```\nALTER TABLE old_table_name REPLACE COLUMNS (col1 TYPE, ...);\n```\n需要保持位置与类型相同,不然会有列丢失\n\n#### 对已创建的表增加列\n\n```\n\nALTER TABLE tab1 ADD COLUMNS (c1 INT COMMENT 'a new int column', c2 STRING DEFAULT 'def val');\n\n```\n### 删除表和分区\n#### 删除表\n\n```\ndrop table table_name\n```\n#### 删除分区\n\n``` \ndrop table table_name drop PARTITION()\n```\n\n### 加载数据\n\n\n\n","slug":"王阁/回顾/hive/hive回顾","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbv000uu6pw0lcz5m71","content":"<p>DDL ,DML</p>\n <a id=\"more\"></a>\n\n\n<p> <code>hive 创建hbase内部表</code></p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> ods_uba.lin_test</span><br><span class=\"line\">(</span><br><span class=\"line\">   operate_no           <span class=\"keyword\">string</span>,</span><br><span class=\"line\">   dev_no               <span class=\"keyword\">string</span>,</span><br><span class=\"line\">   user_id              <span class=\"keyword\">string</span>,</span><br><span class=\"line\">   start_time           <span class=\"keyword\">string</span></span><br><span class=\"line\">)</span><br><span class=\"line\">PARTITIONED <span class=\"keyword\">BY</span> (start_date <span class=\"keyword\">string</span>) </span><br><span class=\"line\"> CLUSTERED <span class=\"keyword\">BY</span> (start_time)</span><br><span class=\"line\"> <span class=\"keyword\">INTO</span> <span class=\"number\">16</span> BUCKETS</span><br><span class=\"line\"> <span class=\"keyword\">STORED</span> <span class=\"keyword\">AS</span> ORC tblproperties(<span class=\"string\">\"parquet.compress\"</span>=<span class=\"string\">\"SNAPPY\"</span>);</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">create external table bigdata17_user(</span><br><span class=\"line\">userid int,</span><br><span class=\"line\">username string,</span><br><span class=\"line\">fullname string)  </span><br><span class=\"line\">row format delimited fields terminated by &#39;,&#39;   </span><br><span class=\"line\">lines terminated by &#39;\\n&#39;;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"基本组成\"><a href=\"#基本组成\" class=\"headerlink\" title=\"基本组成\"></a>基本组成</h2><ol>\n<li>database</li>\n<li>表</li>\n<li>分区</li>\n<li>桶</li>\n</ol>\n<h2 id=\"表结构支持类型\"><a href=\"#表结构支持类型\" class=\"headerlink\" title=\"表结构支持类型\"></a>表结构支持类型</h2><p>hive是一个数据仓库,采用了一些类数据库的设计,但底层通过java实现,因此它各字段主要能支持的类型,基本与java的基本数据类型和一些常用对象一致.如<br> Integers</p>\n<ul>\n<li>TINYINT-1位的整型</li>\n<li>SMALLINT-2位的整型</li>\n<li>INT-4位的整型</li>\n<li>BIGINT-8位的整型</li>\n</ul>\n<p>布尔类型</p>\n<ul>\n<li>BOOLEAN-TRUE/FALSE</li>\n</ul>\n<p>浮点类型</p>\n<ul>\n<li>FLOAT</li>\n<li>DOUBLE</li>\n</ul>\n<p>定点数<br>   DECIMAL</p>\n<p>字符串<br>   STRING<br>   VARCHAR<br>   CHAR</p>\n<p>日期和时间<br>   TIMESTAMP<br>   DATE<br>二进制<br>   BINARY</p>\n<p> 复杂类型</p>\n<ul>\n<li>结构体类型</li>\n<li>MAP</li>\n<li>数组</li>\n</ul>\n<h2 id=\"HIVE表的创建-管理\"><a href=\"#HIVE表的创建-管理\" class=\"headerlink\" title=\"HIVE表的创建,管理\"></a>HIVE表的创建,管理</h2><h3 id=\"创建表\"><a href=\"#创建表\" class=\"headerlink\" title=\"创建表\"></a>创建表</h3><h4 id=\"内部表\"><a href=\"#内部表\" class=\"headerlink\" title=\"内部表\"></a>内部表</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> page_view(viewTime <span class=\"built_in\">INT</span>, userid <span class=\"built_in\">BIGINT</span>,</span><br><span class=\"line\">                page_url <span class=\"keyword\">STRING</span>, referrer_url <span class=\"keyword\">STRING</span>,</span><br><span class=\"line\">                ip <span class=\"keyword\">STRING</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'IP Address of the User'</span>)</span><br><span class=\"line\"><span class=\"keyword\">COMMENT</span> <span class=\"string\">'This is the page view table'</span></span><br><span class=\"line\">PARTITIONED <span class=\"keyword\">BY</span>(dt <span class=\"keyword\">STRING</span>, country <span class=\"keyword\">STRING</span>)</span><br><span class=\"line\"><span class=\"keyword\">ROW</span> <span class=\"keyword\">FORMAT</span> <span class=\"keyword\">DELIMITED</span></span><br><span class=\"line\"><span class=\"keyword\">FIELDS</span> <span class=\"keyword\">TERMINATED</span> <span class=\"keyword\">BY</span> <span class=\"string\">'1'</span></span><br><span class=\"line\"><span class=\"keyword\">STORED</span> <span class=\"keyword\">AS</span> SEQUENCEFILE;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"外部表\"><a href=\"#外部表\" class=\"headerlink\" title=\"外部表\"></a>外部表</h4><h3 id=\"展示表和分区\"><a href=\"#展示表和分区\" class=\"headerlink\" title=\"展示表和分区\"></a>展示表和分区</h3><h4 id=\"查看所有表\"><a href=\"#查看所有表\" class=\"headerlink\" title=\"查看所有表\"></a>查看所有表</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show tables</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"查看所有表的分区\"><a href=\"#查看所有表的分区\" class=\"headerlink\" title=\"查看所有表的分区\"></a>查看所有表的分区</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW PARTITIONS table_name</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"查看表和表的列信息\"><a href=\"#查看表和表的列信息\" class=\"headerlink\" title=\"查看表和表的列信息\"></a>查看表和表的列信息</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">describe table_name</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"列出表的列和表的其它信息\"><a href=\"#列出表的列和表的其它信息\" class=\"headerlink\" title=\"列出表的列和表的其它信息\"></a>列出表的列和表的其它信息</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">describe extended table_name</span><br></pre></td></tr></table></figure>\n<h4 id=\"列出表和分区的隐藏信息\"><a href=\"#列出表和分区的隐藏信息\" class=\"headerlink\" title=\"列出表和分区的隐藏信息\"></a>列出表和分区的隐藏信息</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">describe extended table_name PARTITION(rowName&#x3D;&#39;&#39;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改表\"><a href=\"#修改表\" class=\"headerlink\" title=\"修改表\"></a>修改表</h3><h4 id=\"对表重命名\"><a href=\"#对表重命名\" class=\"headerlink\" title=\"对表重命名\"></a>对表重命名</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE old_table_name RENAME TO new_table_name;</span><br></pre></td></tr></table></figure>\n<h4 id=\"对已有表的列名进行重命名\"><a href=\"#对已有表的列名进行重命名\" class=\"headerlink\" title=\"对已有表的列名进行重命名\"></a>对已有表的列名进行重命名</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE old_table_name REPLACE COLUMNS (col1 TYPE, ...);</span><br></pre></td></tr></table></figure>\n<p>需要保持位置与类型相同,不然会有列丢失</p>\n<h4 id=\"对已创建的表增加列\"><a href=\"#对已创建的表增加列\" class=\"headerlink\" title=\"对已创建的表增加列\"></a>对已创建的表增加列</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">ALTER TABLE tab1 ADD COLUMNS (c1 INT COMMENT &#39;a new int column&#39;, c2 STRING DEFAULT &#39;def val&#39;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除表和分区\"><a href=\"#删除表和分区\" class=\"headerlink\" title=\"删除表和分区\"></a>删除表和分区</h3><h4 id=\"删除表\"><a href=\"#删除表\" class=\"headerlink\" title=\"删除表\"></a>删除表</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drop table table_name</span><br></pre></td></tr></table></figure>\n<h4 id=\"删除分区\"><a href=\"#删除分区\" class=\"headerlink\" title=\"删除分区\"></a>删除分区</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drop table table_name drop PARTITION()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"加载数据\"><a href=\"#加载数据\" class=\"headerlink\" title=\"加载数据\"></a>加载数据</h3>","site":{"data":{}},"excerpt":"<p>DDL ,DML</p>","more":"<p> <code>hive 创建hbase内部表</code></p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> ods_uba.lin_test</span><br><span class=\"line\">(</span><br><span class=\"line\">   operate_no           <span class=\"keyword\">string</span>,</span><br><span class=\"line\">   dev_no               <span class=\"keyword\">string</span>,</span><br><span class=\"line\">   user_id              <span class=\"keyword\">string</span>,</span><br><span class=\"line\">   start_time           <span class=\"keyword\">string</span></span><br><span class=\"line\">)</span><br><span class=\"line\">PARTITIONED <span class=\"keyword\">BY</span> (start_date <span class=\"keyword\">string</span>) </span><br><span class=\"line\"> CLUSTERED <span class=\"keyword\">BY</span> (start_time)</span><br><span class=\"line\"> <span class=\"keyword\">INTO</span> <span class=\"number\">16</span> BUCKETS</span><br><span class=\"line\"> <span class=\"keyword\">STORED</span> <span class=\"keyword\">AS</span> ORC tblproperties(<span class=\"string\">\"parquet.compress\"</span>=<span class=\"string\">\"SNAPPY\"</span>);</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">create external table bigdata17_user(</span><br><span class=\"line\">userid int,</span><br><span class=\"line\">username string,</span><br><span class=\"line\">fullname string)  </span><br><span class=\"line\">row format delimited fields terminated by &#39;,&#39;   </span><br><span class=\"line\">lines terminated by &#39;\\n&#39;;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"基本组成\"><a href=\"#基本组成\" class=\"headerlink\" title=\"基本组成\"></a>基本组成</h2><ol>\n<li>database</li>\n<li>表</li>\n<li>分区</li>\n<li>桶</li>\n</ol>\n<h2 id=\"表结构支持类型\"><a href=\"#表结构支持类型\" class=\"headerlink\" title=\"表结构支持类型\"></a>表结构支持类型</h2><p>hive是一个数据仓库,采用了一些类数据库的设计,但底层通过java实现,因此它各字段主要能支持的类型,基本与java的基本数据类型和一些常用对象一致.如<br> Integers</p>\n<ul>\n<li>TINYINT-1位的整型</li>\n<li>SMALLINT-2位的整型</li>\n<li>INT-4位的整型</li>\n<li>BIGINT-8位的整型</li>\n</ul>\n<p>布尔类型</p>\n<ul>\n<li>BOOLEAN-TRUE/FALSE</li>\n</ul>\n<p>浮点类型</p>\n<ul>\n<li>FLOAT</li>\n<li>DOUBLE</li>\n</ul>\n<p>定点数<br>   DECIMAL</p>\n<p>字符串<br>   STRING<br>   VARCHAR<br>   CHAR</p>\n<p>日期和时间<br>   TIMESTAMP<br>   DATE<br>二进制<br>   BINARY</p>\n<p> 复杂类型</p>\n<ul>\n<li>结构体类型</li>\n<li>MAP</li>\n<li>数组</li>\n</ul>\n<h2 id=\"HIVE表的创建-管理\"><a href=\"#HIVE表的创建-管理\" class=\"headerlink\" title=\"HIVE表的创建,管理\"></a>HIVE表的创建,管理</h2><h3 id=\"创建表\"><a href=\"#创建表\" class=\"headerlink\" title=\"创建表\"></a>创建表</h3><h4 id=\"内部表\"><a href=\"#内部表\" class=\"headerlink\" title=\"内部表\"></a>内部表</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> page_view(viewTime <span class=\"built_in\">INT</span>, userid <span class=\"built_in\">BIGINT</span>,</span><br><span class=\"line\">                page_url <span class=\"keyword\">STRING</span>, referrer_url <span class=\"keyword\">STRING</span>,</span><br><span class=\"line\">                ip <span class=\"keyword\">STRING</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'IP Address of the User'</span>)</span><br><span class=\"line\"><span class=\"keyword\">COMMENT</span> <span class=\"string\">'This is the page view table'</span></span><br><span class=\"line\">PARTITIONED <span class=\"keyword\">BY</span>(dt <span class=\"keyword\">STRING</span>, country <span class=\"keyword\">STRING</span>)</span><br><span class=\"line\"><span class=\"keyword\">ROW</span> <span class=\"keyword\">FORMAT</span> <span class=\"keyword\">DELIMITED</span></span><br><span class=\"line\"><span class=\"keyword\">FIELDS</span> <span class=\"keyword\">TERMINATED</span> <span class=\"keyword\">BY</span> <span class=\"string\">'1'</span></span><br><span class=\"line\"><span class=\"keyword\">STORED</span> <span class=\"keyword\">AS</span> SEQUENCEFILE;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"外部表\"><a href=\"#外部表\" class=\"headerlink\" title=\"外部表\"></a>外部表</h4><h3 id=\"展示表和分区\"><a href=\"#展示表和分区\" class=\"headerlink\" title=\"展示表和分区\"></a>展示表和分区</h3><h4 id=\"查看所有表\"><a href=\"#查看所有表\" class=\"headerlink\" title=\"查看所有表\"></a>查看所有表</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show tables</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"查看所有表的分区\"><a href=\"#查看所有表的分区\" class=\"headerlink\" title=\"查看所有表的分区\"></a>查看所有表的分区</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW PARTITIONS table_name</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"查看表和表的列信息\"><a href=\"#查看表和表的列信息\" class=\"headerlink\" title=\"查看表和表的列信息\"></a>查看表和表的列信息</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">describe table_name</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"列出表的列和表的其它信息\"><a href=\"#列出表的列和表的其它信息\" class=\"headerlink\" title=\"列出表的列和表的其它信息\"></a>列出表的列和表的其它信息</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">describe extended table_name</span><br></pre></td></tr></table></figure>\n<h4 id=\"列出表和分区的隐藏信息\"><a href=\"#列出表和分区的隐藏信息\" class=\"headerlink\" title=\"列出表和分区的隐藏信息\"></a>列出表和分区的隐藏信息</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">describe extended table_name PARTITION(rowName&#x3D;&#39;&#39;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改表\"><a href=\"#修改表\" class=\"headerlink\" title=\"修改表\"></a>修改表</h3><h4 id=\"对表重命名\"><a href=\"#对表重命名\" class=\"headerlink\" title=\"对表重命名\"></a>对表重命名</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE old_table_name RENAME TO new_table_name;</span><br></pre></td></tr></table></figure>\n<h4 id=\"对已有表的列名进行重命名\"><a href=\"#对已有表的列名进行重命名\" class=\"headerlink\" title=\"对已有表的列名进行重命名\"></a>对已有表的列名进行重命名</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER TABLE old_table_name REPLACE COLUMNS (col1 TYPE, ...);</span><br></pre></td></tr></table></figure>\n<p>需要保持位置与类型相同,不然会有列丢失</p>\n<h4 id=\"对已创建的表增加列\"><a href=\"#对已创建的表增加列\" class=\"headerlink\" title=\"对已创建的表增加列\"></a>对已创建的表增加列</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">ALTER TABLE tab1 ADD COLUMNS (c1 INT COMMENT &#39;a new int column&#39;, c2 STRING DEFAULT &#39;def val&#39;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除表和分区\"><a href=\"#删除表和分区\" class=\"headerlink\" title=\"删除表和分区\"></a>删除表和分区</h3><h4 id=\"删除表\"><a href=\"#删除表\" class=\"headerlink\" title=\"删除表\"></a>删除表</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drop table table_name</span><br></pre></td></tr></table></figure>\n<h4 id=\"删除分区\"><a href=\"#删除分区\" class=\"headerlink\" title=\"删除分区\"></a>删除分区</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drop table table_name drop PARTITION()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"加载数据\"><a href=\"#加载数据\" class=\"headerlink\" title=\"加载数据\"></a>加载数据</h3>"},{"_content":"```\n这里的背景是针对博客不同项目生成不同主题类目的方案\n\n```\n\nstep one \n\n 更换wqkenqing.github.io下的github项目\n\n \n","source":"_posts/王阁/日常/运维/博客不同主题切换.md","raw":"```\n这里的背景是针对博客不同项目生成不同主题类目的方案\n\n```\n\nstep one \n\n 更换wqkenqing.github.io下的github项目\n\n \n","slug":"王阁/日常/运维/博客不同主题切换","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/日常/运维/博客不同主题切换","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbw000wu6pwaveqetqf","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">这里的背景是针对博客不同项目生成不同主题类目的方案</span><br></pre></td></tr></table></figure>\n\n<p>step one </p>\n<p> 更换wqkenqing.github.io下的github项目</p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">这里的背景是针对博客不同项目生成不同主题类目的方案</span><br></pre></td></tr></table></figure>\n\n<p>step one </p>\n<p> 更换wqkenqing.github.io下的github项目</p>\n"},{"title":"操作记录","date":"2021-04-26T13:52:35.000Z","_content":" <!--more-->\ndocker run  --name fid_state_new -d -v /data/query_sql:/query  --add-host  data1:10.20.10.136 --add-host  data2:10.20.10.137 --add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_tmp /query/fid_state_tmp.sql    30\ndocker run  --name fid_state_new -d -v /data/query_sql:/query  --add-host  data1:10.20.10.136 --add-host  data2:10.20.10.137 --add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_state_new /query/fid_state_tmp.sql    30\n\n\ndocker run    -v /data/query_sql:/query  --add-host  data1:10.20.10.136 --add-host  data2:10.20.10.137 --add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_state_tmp /query/fid_state_tmp.sql\n\n\n69641199\n\nkafka-console-consumer.sh --bootstrap-server data1:9092 --property print.key=true --topic zhsd_real --partition=0  --offset  69640199 >real.log\n\n\n\nkafka-consumer-groups.sh --bootstrap-server data1:9092 --group jzwsd-camera-real-time-forecast-a --describe\n\nc9656300807b\n\n\ndocker run -d   -v /data/query_sql:/query  --add-host  data1:10.20.10.136 --add-host  data2:10.20.10.137 --add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_tmp /query/fid_info.sql  30\n\n\nselect * from Biz_Roadstae where FID > 186681323\n\n\nssh -o ServerAliveInterval=59 -NfL 0.0.0.0:9092:data1:9092 jzw\n\n\nssh -o ServerAliveInterval=59 -NfL 0.0.0.0:2181:data1:2181 jzw\n\n\nkafka-run-class.sh kafka.tools.GetOaffsetShell  --broker-list localhost:9092 --partitions 0 --topic zhsd_real --time -1\n\n\n71429512\n\n\nkafka-console-consumer.sh --bootstrap-server data1:9092 --property print.key=true --topic zhsd_real --partition=0  --offset 71409512 >real.log\n\n\nkafka-console-consumer.sh --bootstrap-server data1:9092  --from-beginning --topic jzw_toll_island_state   >state.txt\n\n\n\nkafka-run-class.sh kafka.tools.GetOaffsetShell  --broker-list data1:9092  --topic ws_hy_mock_data_five_minute --time -1\n\n\nPUT /_snapshot/my_backup\n{\n  \"type\" : \"fs\",\n  \"settings\": {\n    \"location\": \"/data/snapshot/backup1\"\n    \"max_snapshot_bytes_per_sec\" : \"50mb\",\n    \"max_restore_bytes_per_sec\" :\"50mb\",\n    \"compress\":true}\n  }\n}\n\n\n\ncurl -XPUT 'http://192.168.5.185:9200/_snapshot/el_bak' -d '{\"type\": \"fs\",\"settings\": {\"location\":\"/usr/hadoop/application/el_bak\",\"max_snapshot_bytes_per_sec\" : \"50mb\", \"max_restore_bytes_per_sec\" :\"50mb\",\"compress\":true}}'\n\n————————————————\n版权声明：本文为CSDN博主「warrah」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\n原文链接：https://blog.csdn.net/warrah/article/details/78978244\n\nplugin install elasticsearch/elasticsearch-repository-hdfs/6.7.2\n\n\n\n\n\nPOST /hy_mock_data_five_minute/_delete_by_query\n{\n  \"query\": {\n      \"bool\": {\n        \"must\": [\n          {\n            \"range\": {\n              \"rangeBegin\": {\n                \"gte\": \"2020-04-18 00:00:00\",\n                \"lt\": \"2020-04-22 00:00:00\"\n              }\n            }\n          }\n        ]\n      }\n    }\n}\n\n\n同步hy_mock_data\n\n\nelasticdump --input=http://namenode2:9200/hy_mock_data_five_minute --output=http://yd_data1:9200/hy_mock_data_five_minute_new  --type=settings\nelasticdump --input=http://namenode2:9200/hy_mock_data_five_minute --output=http://yd_data1:9200/hy_mock_data_five_minute_new  --type=mapping\nelasticdump --input=http://namenode2:9200/hy_mock_data_five_minute --output=http://yd_data1:9200/hy_mock_data_five_minute_new  --type=data\n\n\nhy_traffic_baidu_five_minute\n\nelasticdump --input=http://namenode2:9200/hy_traffic_baidu_five_minute --output=http://yd_data1:9200/hy_traffic_baidu_five_minute_new1  --type=settings\nelasticdump --input=http://namenode2:9200/hy_traffic_baidu_five_minute --output=http://yd_data1:9200/hy_traffic_baidu_five_minute_new1  --type=mapping\nelasticdump --input=http://namenode2:9200/hy_traffic_baidu_five_minute --output=http://yd_data1:9200/hy_traffic_baidu_five_minute_new1  --type=data\n\n\n\n\n\ncounty_consumption_city\n\nhotel_tourist_source 不一致\n\ntourist_local_data\ntourist_source_prov\ntourist_source_country\ncounty_consumption\ncounty_consumption_province\nhotel_checkin_record\n\n\n---\n\ntourist_passenger_ticket\ntourist_minute_local_data\n\n\n\nindustry_real-weather_data  26866\nenvironment_bureau-data 12749\n\n\n---\n\nddns\n\ndocker run -d  \\\n\t--restart=always \\\n\t--name ddns-aliyun \\\n    -e \"AKID=LTAI4GBKPp17u31LThucvsab\" \\\n    -e \"AKSCT=mmR4XXXKC1QG9KeiHCAuWktMq50UyF\" \\\n    -e \"DOMAIN=home.kuiq.wang\" \\\n    -e \"REDO=600\" \\\n    chenhw2/aliyun-ddns-cli\n\n\n\n\ncurl -X GET http://jd_cloud:9200/_search?v\n\n\n\n\ncounty_consumption_city\ncounty_industry_consumption\ncounty_consumption_province\ncounty_consumption\ncounty_business_circle_consumption\n\n\n\ntourist_local_data\ntourist_source_prov\ntourist_source_country\ntourist_source_city\n\n\n---\nreturns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String.class, Integer.class)).groupBy(0).sum(1)\n\n2020-07-29\n\n\nflink run -c org.example.stream.SocketTextStreamWordCount /Users/wqkenqing/Desktop/gitfiles/flink-demo/target/original-flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000\nflink run -c org.example.stream.SocketTextStreamWordCount original-flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000\n\n\n\n/Users/wqkenqing/Desktop/gitfiles/flink-demo/target/original-flink-demo-1.0-SNAPSHOT.jar\n\n\ndocker run -d \\\n\t--restart=always \\\n\t--name ddns-aliyun \\\n    -e \"AKID=LTAI4GBKPp17u31LThucvsab\" \\\n    -e \"AKSCT=mmR4XXXKC1QG9KeiHCAuWktMq50UyF\" \\\n    -e \"DOMAIN=home.kuiq.wang\" \\\n    -e \"REDO=600\" \\\nchenhw2/aliyun-ddns-cli\n\nLTAI4GBKPp17u31LThucvsab\n","source":"_posts/王阁/日常/运维/操作记录.md","raw":"title: 操作记录 \ndate:  \ntags: []\n\n---\n <!--more-->\ndocker run  --name fid_state_new -d -v /data/query_sql:/query  --add-host  data1:10.20.10.136 --add-host  data2:10.20.10.137 --add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_tmp /query/fid_state_tmp.sql    30\ndocker run  --name fid_state_new -d -v /data/query_sql:/query  --add-host  data1:10.20.10.136 --add-host  data2:10.20.10.137 --add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_state_new /query/fid_state_tmp.sql    30\n\n\ndocker run    -v /data/query_sql:/query  --add-host  data1:10.20.10.136 --add-host  data2:10.20.10.137 --add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_state_tmp /query/fid_state_tmp.sql\n\n\n69641199\n\nkafka-console-consumer.sh --bootstrap-server data1:9092 --property print.key=true --topic zhsd_real --partition=0  --offset  69640199 >real.log\n\n\n\nkafka-consumer-groups.sh --bootstrap-server data1:9092 --group jzwsd-camera-real-time-forecast-a --describe\n\nc9656300807b\n\n\ndocker run -d   -v /data/query_sql:/query  --add-host  data1:10.20.10.136 --add-host  data2:10.20.10.137 --add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_tmp /query/fid_info.sql  30\n\n\nselect * from Biz_Roadstae where FID > 186681323\n\n\nssh -o ServerAliveInterval=59 -NfL 0.0.0.0:9092:data1:9092 jzw\n\n\nssh -o ServerAliveInterval=59 -NfL 0.0.0.0:2181:data1:2181 jzw\n\n\nkafka-run-class.sh kafka.tools.GetOaffsetShell  --broker-list localhost:9092 --partitions 0 --topic zhsd_real --time -1\n\n\n71429512\n\n\nkafka-console-consumer.sh --bootstrap-server data1:9092 --property print.key=true --topic zhsd_real --partition=0  --offset 71409512 >real.log\n\n\nkafka-console-consumer.sh --bootstrap-server data1:9092  --from-beginning --topic jzw_toll_island_state   >state.txt\n\n\n\nkafka-run-class.sh kafka.tools.GetOaffsetShell  --broker-list data1:9092  --topic ws_hy_mock_data_five_minute --time -1\n\n\nPUT /_snapshot/my_backup\n{\n  \"type\" : \"fs\",\n  \"settings\": {\n    \"location\": \"/data/snapshot/backup1\"\n    \"max_snapshot_bytes_per_sec\" : \"50mb\",\n    \"max_restore_bytes_per_sec\" :\"50mb\",\n    \"compress\":true}\n  }\n}\n\n\n\ncurl -XPUT 'http://192.168.5.185:9200/_snapshot/el_bak' -d '{\"type\": \"fs\",\"settings\": {\"location\":\"/usr/hadoop/application/el_bak\",\"max_snapshot_bytes_per_sec\" : \"50mb\", \"max_restore_bytes_per_sec\" :\"50mb\",\"compress\":true}}'\n\n————————————————\n版权声明：本文为CSDN博主「warrah」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\n原文链接：https://blog.csdn.net/warrah/article/details/78978244\n\nplugin install elasticsearch/elasticsearch-repository-hdfs/6.7.2\n\n\n\n\n\nPOST /hy_mock_data_five_minute/_delete_by_query\n{\n  \"query\": {\n      \"bool\": {\n        \"must\": [\n          {\n            \"range\": {\n              \"rangeBegin\": {\n                \"gte\": \"2020-04-18 00:00:00\",\n                \"lt\": \"2020-04-22 00:00:00\"\n              }\n            }\n          }\n        ]\n      }\n    }\n}\n\n\n同步hy_mock_data\n\n\nelasticdump --input=http://namenode2:9200/hy_mock_data_five_minute --output=http://yd_data1:9200/hy_mock_data_five_minute_new  --type=settings\nelasticdump --input=http://namenode2:9200/hy_mock_data_five_minute --output=http://yd_data1:9200/hy_mock_data_five_minute_new  --type=mapping\nelasticdump --input=http://namenode2:9200/hy_mock_data_five_minute --output=http://yd_data1:9200/hy_mock_data_five_minute_new  --type=data\n\n\nhy_traffic_baidu_five_minute\n\nelasticdump --input=http://namenode2:9200/hy_traffic_baidu_five_minute --output=http://yd_data1:9200/hy_traffic_baidu_five_minute_new1  --type=settings\nelasticdump --input=http://namenode2:9200/hy_traffic_baidu_five_minute --output=http://yd_data1:9200/hy_traffic_baidu_five_minute_new1  --type=mapping\nelasticdump --input=http://namenode2:9200/hy_traffic_baidu_five_minute --output=http://yd_data1:9200/hy_traffic_baidu_five_minute_new1  --type=data\n\n\n\n\n\ncounty_consumption_city\n\nhotel_tourist_source 不一致\n\ntourist_local_data\ntourist_source_prov\ntourist_source_country\ncounty_consumption\ncounty_consumption_province\nhotel_checkin_record\n\n\n---\n\ntourist_passenger_ticket\ntourist_minute_local_data\n\n\n\nindustry_real-weather_data  26866\nenvironment_bureau-data 12749\n\n\n---\n\nddns\n\ndocker run -d  \\\n\t--restart=always \\\n\t--name ddns-aliyun \\\n    -e \"AKID=LTAI4GBKPp17u31LThucvsab\" \\\n    -e \"AKSCT=mmR4XXXKC1QG9KeiHCAuWktMq50UyF\" \\\n    -e \"DOMAIN=home.kuiq.wang\" \\\n    -e \"REDO=600\" \\\n    chenhw2/aliyun-ddns-cli\n\n\n\n\ncurl -X GET http://jd_cloud:9200/_search?v\n\n\n\n\ncounty_consumption_city\ncounty_industry_consumption\ncounty_consumption_province\ncounty_consumption\ncounty_business_circle_consumption\n\n\n\ntourist_local_data\ntourist_source_prov\ntourist_source_country\ntourist_source_city\n\n\n---\nreturns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String.class, Integer.class)).groupBy(0).sum(1)\n\n2020-07-29\n\n\nflink run -c org.example.stream.SocketTextStreamWordCount /Users/wqkenqing/Desktop/gitfiles/flink-demo/target/original-flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000\nflink run -c org.example.stream.SocketTextStreamWordCount original-flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000\n\n\n\n/Users/wqkenqing/Desktop/gitfiles/flink-demo/target/original-flink-demo-1.0-SNAPSHOT.jar\n\n\ndocker run -d \\\n\t--restart=always \\\n\t--name ddns-aliyun \\\n    -e \"AKID=LTAI4GBKPp17u31LThucvsab\" \\\n    -e \"AKSCT=mmR4XXXKC1QG9KeiHCAuWktMq50UyF\" \\\n    -e \"DOMAIN=home.kuiq.wang\" \\\n    -e \"REDO=600\" \\\nchenhw2/aliyun-ddns-cli\n\nLTAI4GBKPp17u31LThucvsab\n","slug":"王阁/日常/运维/操作记录","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbx000yu6pw8uh8dxcz","content":" <a id=\"more\"></a>\n<p>docker run  –name fid_state_new -d -v /data/query_sql:/query  –add-host  data1:10.20.10.136 –add-host  data2:10.20.10.137 –add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_tmp /query/fid_state_tmp.sql    30<br>docker run  –name fid_state_new -d -v /data/query_sql:/query  –add-host  data1:10.20.10.136 –add-host  data2:10.20.10.137 –add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_state_new /query/fid_state_tmp.sql    30</p>\n<p>docker run    -v /data/query_sql:/query  –add-host  data1:10.20.10.136 –add-host  data2:10.20.10.137 –add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_state_tmp /query/fid_state_tmp.sql</p>\n<p>69641199</p>\n<p>kafka-console-consumer.sh –bootstrap-server data1:9092 –property print.key=true –topic zhsd_real –partition=0  –offset  69640199 &gt;real.log</p>\n<p>kafka-consumer-groups.sh –bootstrap-server data1:9092 –group jzwsd-camera-real-time-forecast-a –describe</p>\n<p>c9656300807b</p>\n<p>docker run -d   -v /data/query_sql:/query  –add-host  data1:10.20.10.136 –add-host  data2:10.20.10.137 –add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_tmp /query/fid_info.sql  30</p>\n<p>select * from Biz_Roadstae where FID &gt; 186681323</p>\n<p>ssh -o ServerAliveInterval=59 -NfL 0.0.0.0:9092:data1:9092 jzw</p>\n<p>ssh -o ServerAliveInterval=59 -NfL 0.0.0.0:2181:data1:2181 jzw</p>\n<p>kafka-run-class.sh kafka.tools.GetOaffsetShell  –broker-list localhost:9092 –partitions 0 –topic zhsd_real –time -1</p>\n<p>71429512</p>\n<p>kafka-console-consumer.sh –bootstrap-server data1:9092 –property print.key=true –topic zhsd_real –partition=0  –offset 71409512 &gt;real.log</p>\n<p>kafka-console-consumer.sh –bootstrap-server data1:9092  –from-beginning –topic jzw_toll_island_state   &gt;state.txt</p>\n<p>kafka-run-class.sh kafka.tools.GetOaffsetShell  –broker-list data1:9092  –topic ws_hy_mock_data_five_minute –time -1</p>\n<p>PUT /_snapshot/my_backup<br>{<br>  “type” : “fs”,<br>  “settings”: {<br>    “location”: “/data/snapshot/backup1”<br>    “max_snapshot_bytes_per_sec” : “50mb”,<br>    “max_restore_bytes_per_sec” :”50mb”,<br>    “compress”:true}<br>  }<br>}</p>\n<p>curl -XPUT ‘<a href=\"http://192.168.5.185:9200/_snapshot/el_bak&#39;\" target=\"_blank\" rel=\"noopener\">http://192.168.5.185:9200/_snapshot/el_bak&#39;</a> -d ‘{“type”: “fs”,”settings”: {“location”:”/usr/hadoop/application/el_bak”,”max_snapshot_bytes_per_sec” : “50mb”, “max_restore_bytes_per_sec” :”50mb”,”compress”:true}}’</p>\n<p>————————————————<br>版权声明：本文为CSDN博主「warrah」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=\"https://blog.csdn.net/warrah/article/details/78978244\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/warrah/article/details/78978244</a></p>\n<p>plugin install elasticsearch/elasticsearch-repository-hdfs/6.7.2</p>\n<p>POST /hy_mock_data_five_minute/_delete_by_query<br>{<br>  “query”: {<br>      “bool”: {<br>        “must”: [<br>          {<br>            “range”: {<br>              “rangeBegin”: {<br>                “gte”: “2020-04-18 00:00:00”,<br>                “lt”: “2020-04-22 00:00:00”<br>              }<br>            }<br>          }<br>        ]<br>      }<br>    }<br>}</p>\n<p>同步hy_mock_data</p>\n<p>elasticdump –input=<a href=\"http://namenode2:9200/hy_mock_data_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_mock_data_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_mock_data_five_minute_new\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_mock_data_five_minute_new</a>  –type=settings<br>elasticdump –input=<a href=\"http://namenode2:9200/hy_mock_data_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_mock_data_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_mock_data_five_minute_new\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_mock_data_five_minute_new</a>  –type=mapping<br>elasticdump –input=<a href=\"http://namenode2:9200/hy_mock_data_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_mock_data_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_mock_data_five_minute_new\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_mock_data_five_minute_new</a>  –type=data</p>\n<p>hy_traffic_baidu_five_minute</p>\n<p>elasticdump –input=<a href=\"http://namenode2:9200/hy_traffic_baidu_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_traffic_baidu_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_traffic_baidu_five_minute_new1\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_traffic_baidu_five_minute_new1</a>  –type=settings<br>elasticdump –input=<a href=\"http://namenode2:9200/hy_traffic_baidu_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_traffic_baidu_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_traffic_baidu_five_minute_new1\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_traffic_baidu_five_minute_new1</a>  –type=mapping<br>elasticdump –input=<a href=\"http://namenode2:9200/hy_traffic_baidu_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_traffic_baidu_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_traffic_baidu_five_minute_new1\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_traffic_baidu_five_minute_new1</a>  –type=data</p>\n<p>county_consumption_city</p>\n<p>hotel_tourist_source 不一致</p>\n<p>tourist_local_data<br>tourist_source_prov<br>tourist_source_country<br>county_consumption<br>county_consumption_province<br>hotel_checkin_record</p>\n<hr>\n<p>tourist_passenger_ticket<br>tourist_minute_local_data</p>\n<p>industry_real-weather_data  26866<br>environment_bureau-data 12749</p>\n<hr>\n<p>ddns</p>\n<p>docker run -d  <br>    –restart=always <br>    –name ddns-aliyun <br>    -e “AKID=LTAI4GBKPp17u31LThucvsab” <br>    -e “AKSCT=mmR4XXXKC1QG9KeiHCAuWktMq50UyF” <br>    -e “DOMAIN=home.kuiq.wang” <br>    -e “REDO=600” <br>    chenhw2/aliyun-ddns-cli</p>\n<p>curl -X GET <a href=\"http://jd_cloud:9200/_search?v\" target=\"_blank\" rel=\"noopener\">http://jd_cloud:9200/_search?v</a></p>\n<p>county_consumption_city<br>county_industry_consumption<br>county_consumption_province<br>county_consumption<br>county_business_circle_consumption</p>\n<p>tourist_local_data<br>tourist_source_prov<br>tourist_source_country<br>tourist_source_city</p>\n<hr>\n<p>returns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String.class, Integer.class)).groupBy(0).sum(1)</p>\n<p>2020-07-29</p>\n<p>flink run -c org.example.stream.SocketTextStreamWordCount /Users/wqkenqing/Desktop/gitfiles/flink-demo/target/original-flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000<br>flink run -c org.example.stream.SocketTextStreamWordCount original-flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000</p>\n<p>/Users/wqkenqing/Desktop/gitfiles/flink-demo/target/original-flink-demo-1.0-SNAPSHOT.jar</p>\n<p>docker run -d <br>    –restart=always <br>    –name ddns-aliyun <br>    -e “AKID=LTAI4GBKPp17u31LThucvsab” <br>    -e “AKSCT=mmR4XXXKC1QG9KeiHCAuWktMq50UyF” <br>    -e “DOMAIN=home.kuiq.wang” <br>    -e “REDO=600” <br>chenhw2/aliyun-ddns-cli</p>\n<p>LTAI4GBKPp17u31LThucvsab</p>\n","site":{"data":{}},"excerpt":"","more":"<p>docker run  –name fid_state_new -d -v /data/query_sql:/query  –add-host  data1:10.20.10.136 –add-host  data2:10.20.10.137 –add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_tmp /query/fid_state_tmp.sql    30<br>docker run  –name fid_state_new -d -v /data/query_sql:/query  –add-host  data1:10.20.10.136 –add-host  data2:10.20.10.137 –add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_state_new /query/fid_state_tmp.sql    30</p>\n<p>docker run    -v /data/query_sql:/query  –add-host  data1:10.20.10.136 –add-host  data2:10.20.10.137 –add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_state_tmp /query/fid_state_tmp.sql</p>\n<p>69641199</p>\n<p>kafka-console-consumer.sh –bootstrap-server data1:9092 –property print.key=true –topic zhsd_real –partition=0  –offset  69640199 &gt;real.log</p>\n<p>kafka-consumer-groups.sh –bootstrap-server data1:9092 –group jzwsd-camera-real-time-forecast-a –describe</p>\n<p>c9656300807b</p>\n<p>docker run -d   -v /data/query_sql:/query  –add-host  data1:10.20.10.136 –add-host  data2:10.20.10.137 –add-host  data3:10.20.10.138 registry.lisong.pub:28500/toll_job_tmp /query/fid_info.sql  30</p>\n<p>select * from Biz_Roadstae where FID &gt; 186681323</p>\n<p>ssh -o ServerAliveInterval=59 -NfL 0.0.0.0:9092:data1:9092 jzw</p>\n<p>ssh -o ServerAliveInterval=59 -NfL 0.0.0.0:2181:data1:2181 jzw</p>\n<p>kafka-run-class.sh kafka.tools.GetOaffsetShell  –broker-list localhost:9092 –partitions 0 –topic zhsd_real –time -1</p>\n<p>71429512</p>\n<p>kafka-console-consumer.sh –bootstrap-server data1:9092 –property print.key=true –topic zhsd_real –partition=0  –offset 71409512 &gt;real.log</p>\n<p>kafka-console-consumer.sh –bootstrap-server data1:9092  –from-beginning –topic jzw_toll_island_state   &gt;state.txt</p>\n<p>kafka-run-class.sh kafka.tools.GetOaffsetShell  –broker-list data1:9092  –topic ws_hy_mock_data_five_minute –time -1</p>\n<p>PUT /_snapshot/my_backup<br>{<br>  “type” : “fs”,<br>  “settings”: {<br>    “location”: “/data/snapshot/backup1”<br>    “max_snapshot_bytes_per_sec” : “50mb”,<br>    “max_restore_bytes_per_sec” :”50mb”,<br>    “compress”:true}<br>  }<br>}</p>\n<p>curl -XPUT ‘<a href=\"http://192.168.5.185:9200/_snapshot/el_bak&#39;\" target=\"_blank\" rel=\"noopener\">http://192.168.5.185:9200/_snapshot/el_bak&#39;</a> -d ‘{“type”: “fs”,”settings”: {“location”:”/usr/hadoop/application/el_bak”,”max_snapshot_bytes_per_sec” : “50mb”, “max_restore_bytes_per_sec” :”50mb”,”compress”:true}}’</p>\n<p>————————————————<br>版权声明：本文为CSDN博主「warrah」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href=\"https://blog.csdn.net/warrah/article/details/78978244\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/warrah/article/details/78978244</a></p>\n<p>plugin install elasticsearch/elasticsearch-repository-hdfs/6.7.2</p>\n<p>POST /hy_mock_data_five_minute/_delete_by_query<br>{<br>  “query”: {<br>      “bool”: {<br>        “must”: [<br>          {<br>            “range”: {<br>              “rangeBegin”: {<br>                “gte”: “2020-04-18 00:00:00”,<br>                “lt”: “2020-04-22 00:00:00”<br>              }<br>            }<br>          }<br>        ]<br>      }<br>    }<br>}</p>\n<p>同步hy_mock_data</p>\n<p>elasticdump –input=<a href=\"http://namenode2:9200/hy_mock_data_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_mock_data_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_mock_data_five_minute_new\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_mock_data_five_minute_new</a>  –type=settings<br>elasticdump –input=<a href=\"http://namenode2:9200/hy_mock_data_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_mock_data_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_mock_data_five_minute_new\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_mock_data_five_minute_new</a>  –type=mapping<br>elasticdump –input=<a href=\"http://namenode2:9200/hy_mock_data_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_mock_data_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_mock_data_five_minute_new\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_mock_data_five_minute_new</a>  –type=data</p>\n<p>hy_traffic_baidu_five_minute</p>\n<p>elasticdump –input=<a href=\"http://namenode2:9200/hy_traffic_baidu_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_traffic_baidu_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_traffic_baidu_five_minute_new1\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_traffic_baidu_five_minute_new1</a>  –type=settings<br>elasticdump –input=<a href=\"http://namenode2:9200/hy_traffic_baidu_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_traffic_baidu_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_traffic_baidu_five_minute_new1\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_traffic_baidu_five_minute_new1</a>  –type=mapping<br>elasticdump –input=<a href=\"http://namenode2:9200/hy_traffic_baidu_five_minute\" target=\"_blank\" rel=\"noopener\">http://namenode2:9200/hy_traffic_baidu_five_minute</a> –output=<a href=\"http://yd_data1:9200/hy_traffic_baidu_five_minute_new1\" target=\"_blank\" rel=\"noopener\">http://yd_data1:9200/hy_traffic_baidu_five_minute_new1</a>  –type=data</p>\n<p>county_consumption_city</p>\n<p>hotel_tourist_source 不一致</p>\n<p>tourist_local_data<br>tourist_source_prov<br>tourist_source_country<br>county_consumption<br>county_consumption_province<br>hotel_checkin_record</p>\n<hr>\n<p>tourist_passenger_ticket<br>tourist_minute_local_data</p>\n<p>industry_real-weather_data  26866<br>environment_bureau-data 12749</p>\n<hr>\n<p>ddns</p>\n<p>docker run -d  <br>    –restart=always <br>    –name ddns-aliyun <br>    -e “AKID=LTAI4GBKPp17u31LThucvsab” <br>    -e “AKSCT=mmR4XXXKC1QG9KeiHCAuWktMq50UyF” <br>    -e “DOMAIN=home.kuiq.wang” <br>    -e “REDO=600” <br>    chenhw2/aliyun-ddns-cli</p>\n<p>curl -X GET <a href=\"http://jd_cloud:9200/_search?v\" target=\"_blank\" rel=\"noopener\">http://jd_cloud:9200/_search?v</a></p>\n<p>county_consumption_city<br>county_industry_consumption<br>county_consumption_province<br>county_consumption<br>county_business_circle_consumption</p>\n<p>tourist_local_data<br>tourist_source_prov<br>tourist_source_country<br>tourist_source_city</p>\n<hr>\n<p>returns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String.class, Integer.class)).groupBy(0).sum(1)</p>\n<p>2020-07-29</p>\n<p>flink run -c org.example.stream.SocketTextStreamWordCount /Users/wqkenqing/Desktop/gitfiles/flink-demo/target/original-flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000<br>flink run -c org.example.stream.SocketTextStreamWordCount original-flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000</p>\n<p>/Users/wqkenqing/Desktop/gitfiles/flink-demo/target/original-flink-demo-1.0-SNAPSHOT.jar</p>\n<p>docker run -d <br>    –restart=always <br>    –name ddns-aliyun <br>    -e “AKID=LTAI4GBKPp17u31LThucvsab” <br>    -e “AKSCT=mmR4XXXKC1QG9KeiHCAuWktMq50UyF” <br>    -e “DOMAIN=home.kuiq.wang” <br>    -e “REDO=600” <br>chenhw2/aliyun-ddns-cli</p>\n<p>LTAI4GBKPp17u31LThucvsab</p>"},{"_content":"## Q: 更换ubuntu安装源\ncp /source/apt/source.plist /source/apt/source.list.bak\n\nvim /source/apt/source.plist\n\n添加国内源.\n\nQ: mac 查看目前哪些进程占用哪些端口\n\nlsof -nP  | grep TCP | grep LISTEN\n\nlsof -i :TCP\n\n![查看mac pid进程的端口](http://img.wqkenqing.ren/759a2c6c1c06fc81b9c400060913e93b.png)\n","source":"_posts/王阁/日常/运维/运维操作.md","raw":"## Q: 更换ubuntu安装源\ncp /source/apt/source.plist /source/apt/source.list.bak\n\nvim /source/apt/source.plist\n\n添加国内源.\n\nQ: mac 查看目前哪些进程占用哪些端口\n\nlsof -nP  | grep TCP | grep LISTEN\n\nlsof -i :TCP\n\n![查看mac pid进程的端口](http://img.wqkenqing.ren/759a2c6c1c06fc81b9c400060913e93b.png)\n","slug":"王阁/日常/运维/运维操作","published":1,"date":"2023-02-23T02:51:20.909Z","updated":"2023-02-23T02:51:20.909Z","title":"王阁/日常/运维/运维操作","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsby0010u6pwbi6mhvhl","content":"<h2 id=\"Q-更换ubuntu安装源\"><a href=\"#Q-更换ubuntu安装源\" class=\"headerlink\" title=\"Q: 更换ubuntu安装源\"></a>Q: 更换ubuntu安装源</h2><p>cp /source/apt/source.plist /source/apt/source.list.bak</p>\n<p>vim /source/apt/source.plist</p>\n<p>添加国内源.</p>\n<p>Q: mac 查看目前哪些进程占用哪些端口</p>\n<p>lsof -nP  | grep TCP | grep LISTEN</p>\n<p>lsof -i :TCP</p>\n<p><img src=\"http://img.wqkenqing.ren/759a2c6c1c06fc81b9c400060913e93b.png\" alt=\"查看mac pid进程的端口\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Q-更换ubuntu安装源\"><a href=\"#Q-更换ubuntu安装源\" class=\"headerlink\" title=\"Q: 更换ubuntu安装源\"></a>Q: 更换ubuntu安装源</h2><p>cp /source/apt/source.plist /source/apt/source.list.bak</p>\n<p>vim /source/apt/source.plist</p>\n<p>添加国内源.</p>\n<p>Q: mac 查看目前哪些进程占用哪些端口</p>\n<p>lsof -nP  | grep TCP | grep LISTEN</p>\n<p>lsof -i :TCP</p>\n<p><img src=\"http://img.wqkenqing.ren/759a2c6c1c06fc81b9c400060913e93b.png\" alt=\"查看mac pid进程的端口\"></p>\n"},{"_content":"# 古诗词竞赛\n\n```\n一个趣味小游戏，以诗词竞赛为主题，引入竞赛机制。\n```\n\n\n\n## 一、技术架构\n\n图示：\n\n![CleanShot 2022-05-12 at 10.27.26](http://img.wqkenqing.ren/typora_img/CleanShot%202022-05-12%20at%2010.27.26.png)\n\n涉及技术栈:\n\n1. java\n2. spring全家桶\n3. elasticsearch\n4. mybaits-plus\n5. flink\n6. web\n7. jsoup\n8. kafka\n\n以上主要是一期\n\n二期会主要围绕小端等来进行开发\n\n本应用采用了三层结构：采集层、治理层、应用层。\n\n为此服务体系也采用微服务架构\n\n## 二、实现思路\n\n### 2.1 采集层\n\n通过爬虫服务，抓取相应的诗词数据，并放入暂存层中\n\n### 2.2 清洗转换层\n\n将暂存层中的数据，清洗后、分发至相应的数据库中\n\n### 2.3 应用层\n\n基于抓取的数据进行设计开发web页面\n\n## 三、开发记录\n\n解析步骤\n1.获取到总页数\n2.获取a列表\n3.抓取页面内容\n\t1. class zhuti yuanjiao 获取名称\n\t2. class jjzz 获取年代与作者名\n\t3. class shicineirong 获取诗词内容\n\n\n### 生成全局唯一id\n\n1. 数据库自增长序列或字段生成id\n2. UUID\n3. Redis生成ID\n4. zookeeper生成ID\n5. Twitter的snowflake算法\n\n### 诗歌全局唯一id生成策略\n\n\n\n  ","source":"_posts/王阁/项目/古诗词竞赛/建设思路.md","raw":"# 古诗词竞赛\n\n```\n一个趣味小游戏，以诗词竞赛为主题，引入竞赛机制。\n```\n\n\n\n## 一、技术架构\n\n图示：\n\n![CleanShot 2022-05-12 at 10.27.26](http://img.wqkenqing.ren/typora_img/CleanShot%202022-05-12%20at%2010.27.26.png)\n\n涉及技术栈:\n\n1. java\n2. spring全家桶\n3. elasticsearch\n4. mybaits-plus\n5. flink\n6. web\n7. jsoup\n8. kafka\n\n以上主要是一期\n\n二期会主要围绕小端等来进行开发\n\n本应用采用了三层结构：采集层、治理层、应用层。\n\n为此服务体系也采用微服务架构\n\n## 二、实现思路\n\n### 2.1 采集层\n\n通过爬虫服务，抓取相应的诗词数据，并放入暂存层中\n\n### 2.2 清洗转换层\n\n将暂存层中的数据，清洗后、分发至相应的数据库中\n\n### 2.3 应用层\n\n基于抓取的数据进行设计开发web页面\n\n## 三、开发记录\n\n解析步骤\n1.获取到总页数\n2.获取a列表\n3.抓取页面内容\n\t1. class zhuti yuanjiao 获取名称\n\t2. class jjzz 获取年代与作者名\n\t3. class shicineirong 获取诗词内容\n\n\n### 生成全局唯一id\n\n1. 数据库自增长序列或字段生成id\n2. UUID\n3. Redis生成ID\n4. zookeeper生成ID\n5. Twitter的snowflake算法\n\n### 诗歌全局唯一id生成策略\n\n\n\n  ","slug":"王阁/项目/古诗词竞赛/建设思路","published":1,"date":"2023-02-23T02:51:20.909Z","updated":"2023-02-23T02:51:20.909Z","title":"王阁/项目/古诗词竞赛/建设思路","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsby0012u6pwcrf7gfo4","content":"<h1 id=\"古诗词竞赛\"><a href=\"#古诗词竞赛\" class=\"headerlink\" title=\"古诗词竞赛\"></a>古诗词竞赛</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">一个趣味小游戏，以诗词竞赛为主题，引入竞赛机制。</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"一、技术架构\"><a href=\"#一、技术架构\" class=\"headerlink\" title=\"一、技术架构\"></a>一、技术架构</h2><p>图示：</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/CleanShot%202022-05-12%20at%2010.27.26.png\" alt=\"CleanShot 2022-05-12 at 10.27.26\"></p>\n<p>涉及技术栈:</p>\n<ol>\n<li>java</li>\n<li>spring全家桶</li>\n<li>elasticsearch</li>\n<li>mybaits-plus</li>\n<li>flink</li>\n<li>web</li>\n<li>jsoup</li>\n<li>kafka</li>\n</ol>\n<p>以上主要是一期</p>\n<p>二期会主要围绕小端等来进行开发</p>\n<p>本应用采用了三层结构：采集层、治理层、应用层。</p>\n<p>为此服务体系也采用微服务架构</p>\n<h2 id=\"二、实现思路\"><a href=\"#二、实现思路\" class=\"headerlink\" title=\"二、实现思路\"></a>二、实现思路</h2><h3 id=\"2-1-采集层\"><a href=\"#2-1-采集层\" class=\"headerlink\" title=\"2.1 采集层\"></a>2.1 采集层</h3><p>通过爬虫服务，抓取相应的诗词数据，并放入暂存层中</p>\n<h3 id=\"2-2-清洗转换层\"><a href=\"#2-2-清洗转换层\" class=\"headerlink\" title=\"2.2 清洗转换层\"></a>2.2 清洗转换层</h3><p>将暂存层中的数据，清洗后、分发至相应的数据库中</p>\n<h3 id=\"2-3-应用层\"><a href=\"#2-3-应用层\" class=\"headerlink\" title=\"2.3 应用层\"></a>2.3 应用层</h3><p>基于抓取的数据进行设计开发web页面</p>\n<h2 id=\"三、开发记录\"><a href=\"#三、开发记录\" class=\"headerlink\" title=\"三、开发记录\"></a>三、开发记录</h2><p>解析步骤<br>1.获取到总页数<br>2.获取a列表<br>3.抓取页面内容<br>    1. class zhuti yuanjiao 获取名称<br>    2. class jjzz 获取年代与作者名<br>    3. class shicineirong 获取诗词内容</p>\n<h3 id=\"生成全局唯一id\"><a href=\"#生成全局唯一id\" class=\"headerlink\" title=\"生成全局唯一id\"></a>生成全局唯一id</h3><ol>\n<li>数据库自增长序列或字段生成id</li>\n<li>UUID</li>\n<li>Redis生成ID</li>\n<li>zookeeper生成ID</li>\n<li>Twitter的snowflake算法</li>\n</ol>\n<h3 id=\"诗歌全局唯一id生成策略\"><a href=\"#诗歌全局唯一id生成策略\" class=\"headerlink\" title=\"诗歌全局唯一id生成策略\"></a>诗歌全局唯一id生成策略</h3>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"古诗词竞赛\"><a href=\"#古诗词竞赛\" class=\"headerlink\" title=\"古诗词竞赛\"></a>古诗词竞赛</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">一个趣味小游戏，以诗词竞赛为主题，引入竞赛机制。</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"一、技术架构\"><a href=\"#一、技术架构\" class=\"headerlink\" title=\"一、技术架构\"></a>一、技术架构</h2><p>图示：</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/CleanShot%202022-05-12%20at%2010.27.26.png\" alt=\"CleanShot 2022-05-12 at 10.27.26\"></p>\n<p>涉及技术栈:</p>\n<ol>\n<li>java</li>\n<li>spring全家桶</li>\n<li>elasticsearch</li>\n<li>mybaits-plus</li>\n<li>flink</li>\n<li>web</li>\n<li>jsoup</li>\n<li>kafka</li>\n</ol>\n<p>以上主要是一期</p>\n<p>二期会主要围绕小端等来进行开发</p>\n<p>本应用采用了三层结构：采集层、治理层、应用层。</p>\n<p>为此服务体系也采用微服务架构</p>\n<h2 id=\"二、实现思路\"><a href=\"#二、实现思路\" class=\"headerlink\" title=\"二、实现思路\"></a>二、实现思路</h2><h3 id=\"2-1-采集层\"><a href=\"#2-1-采集层\" class=\"headerlink\" title=\"2.1 采集层\"></a>2.1 采集层</h3><p>通过爬虫服务，抓取相应的诗词数据，并放入暂存层中</p>\n<h3 id=\"2-2-清洗转换层\"><a href=\"#2-2-清洗转换层\" class=\"headerlink\" title=\"2.2 清洗转换层\"></a>2.2 清洗转换层</h3><p>将暂存层中的数据，清洗后、分发至相应的数据库中</p>\n<h3 id=\"2-3-应用层\"><a href=\"#2-3-应用层\" class=\"headerlink\" title=\"2.3 应用层\"></a>2.3 应用层</h3><p>基于抓取的数据进行设计开发web页面</p>\n<h2 id=\"三、开发记录\"><a href=\"#三、开发记录\" class=\"headerlink\" title=\"三、开发记录\"></a>三、开发记录</h2><p>解析步骤<br>1.获取到总页数<br>2.获取a列表<br>3.抓取页面内容<br>    1. class zhuti yuanjiao 获取名称<br>    2. class jjzz 获取年代与作者名<br>    3. class shicineirong 获取诗词内容</p>\n<h3 id=\"生成全局唯一id\"><a href=\"#生成全局唯一id\" class=\"headerlink\" title=\"生成全局唯一id\"></a>生成全局唯一id</h3><ol>\n<li>数据库自增长序列或字段生成id</li>\n<li>UUID</li>\n<li>Redis生成ID</li>\n<li>zookeeper生成ID</li>\n<li>Twitter的snowflake算法</li>\n</ol>\n<h3 id=\"诗歌全局唯一id生成策略\"><a href=\"#诗歌全局唯一id生成策略\" class=\"headerlink\" title=\"诗歌全局唯一id生成策略\"></a>诗歌全局唯一id生成策略</h3>"},{"_content":"# 诗词竞赛业务架构\n\n现有业务模块梳理\n\n1. 消费从而生成诗词源\n2. 任务生成，并绑定对应的诗词\n3. 生成试题\n4. 测验\n5. 批改\n6. 判胜负\n","source":"_posts/王阁/项目/古诗词竞赛/诗词竞赛业务架构.md","raw":"# 诗词竞赛业务架构\n\n现有业务模块梳理\n\n1. 消费从而生成诗词源\n2. 任务生成，并绑定对应的诗词\n3. 生成试题\n4. 测验\n5. 批改\n6. 判胜负\n","slug":"王阁/项目/古诗词竞赛/诗词竞赛业务架构","published":1,"date":"2022-05-21T01:45:12.065Z","updated":"2022-05-21T01:51:22.169Z","title":"王阁/项目/古诗词竞赛/诗词竞赛业务架构","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsbz0015u6pwhckpf68k","content":"<h1 id=\"诗词竞赛业务架构\"><a href=\"#诗词竞赛业务架构\" class=\"headerlink\" title=\"诗词竞赛业务架构\"></a>诗词竞赛业务架构</h1><p>现有业务模块梳理</p>\n<ol>\n<li>消费从而生成诗词源</li>\n<li>任务生成，并绑定对应的诗词</li>\n<li>生成试题</li>\n<li>测验</li>\n<li>批改</li>\n<li>判胜负</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"诗词竞赛业务架构\"><a href=\"#诗词竞赛业务架构\" class=\"headerlink\" title=\"诗词竞赛业务架构\"></a>诗词竞赛业务架构</h1><p>现有业务模块梳理</p>\n<ol>\n<li>消费从而生成诗词源</li>\n<li>任务生成，并绑定对应的诗词</li>\n<li>生成试题</li>\n<li>测验</li>\n<li>批改</li>\n<li>判胜负</li>\n</ol>\n"},{"_content":"","source":"_posts/王阁/技术/hexo/Thread/多线程.md","raw":"","slug":"王阁/技术/hexo/Thread/多线程","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/hexo/Thread/多线程","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsda001iu6pw2ao63d3z","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"","source":"_posts/王阁/技术/专题/sql专题/sql基础知识.md","raw":"","slug":"王阁/技术/专题/sql专题/sql基础知识","published":1,"date":"2022-05-02T07:26:49.727Z","updated":"2022-05-02T07:26:49.727Z","title":"王阁/技术/专题/sql专题/sql基础知识","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsdc001ju6pwdgww4tnk","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"","source":"_posts/王阁/技术/专题/数据建模/数据仓库建设方案.md","raw":"","slug":"王阁/技术/专题/数据建模/数据仓库建设方案","published":1,"date":"2022-04-28T07:25:36.342Z","updated":"2022-04-28T07:25:36.342Z","title":"王阁/技术/专题/数据建模/数据仓库建设方案","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsdd001ku6pwbpu7bezy","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"","source":"_posts/王阁/技术/大数据/hive/hive20190109.md","raw":"","slug":"王阁/技术/大数据/hive/hive20190109","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/hive/hive20190109","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsdw001lu6pw1q9l5fqf","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"hadoop发展史","date":"2021-11-18T08:53:43.964Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n ","source":"_posts/王阁/回顾/技能回顾/大数据相关组件/hadoop发展史.md","raw":"title:  hadoop发展史\ndate:  2021年11月18日\ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n ","slug":"王阁/回顾/技能回顾/大数据相关组件/hadoop发展史","published":1,"updated":"2021-11-18T08:54:07.707Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsdy001mu6pwf6h0fifn","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"2b3577516f3e20553709db79f06399904180d573741a658aebcda1c1ddd05eee\">f29c680708acd02cbb1b6cceaba06192d34048633918d15832047c414baf92a4</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n","encrypt":true},{"title":"存储组件","date":"2021-11-16T16:00:00.000Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n ## 存储组件\n\n ```\nhdfs\nhbase\nhive\nelasticsearch\n ```\n\n###  hdfs\n\n#### hdfs介绍\n\n\n#### hdfs特点\n\n#### hdfs使用\n\n#### hdfs编程","source":"_posts/王阁/回顾/技能回顾/大数据相关组件/存储组件.md","raw":"title: 存储组件 \ndate:  2021-11-17\ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n ## 存储组件\n\n ```\nhdfs\nhbase\nhive\nelasticsearch\n ```\n\n###  hdfs\n\n#### hdfs介绍\n\n\n#### hdfs特点\n\n#### hdfs使用\n\n#### hdfs编程","slug":"王阁/回顾/技能回顾/大数据相关组件/存储组件","published":1,"updated":"2021-11-17T13:24:51.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsdy001nu6pw3onk4ox1","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"13a6c53a6c02692a864d5a2d6761eaf3a54585bfde21fd382600194fb1fc0298\">f29c680708acd02cbb1b6cceaba06192fd37d7ccac54b433cec09979d6b3568416ecdbe16c4ca664c50a55169a72aa9c5f6f14bf3a1d1e8949f5dbbe936e54b69e34916ff1af43d605c29093be8b98840c69c3652a0d1ae1adfd4a62d3af169dc909e80979a3ddc5dfa0247a76124a305da0ac9aa7d185c377db5568c8d3f5ed8233487cd273f613c2fc9d430940a04e94ae4393561b109b673e127cabcbf04e09e21df30634424430cd0605ca325fde0c44e803a01f94b503a5fb2561692381a6803181191867bc1b925dd466a56fb700d3810447bb96df8a11a7a7e12c2162151413471ca929eb84f8b1ff8595d2e134d49058bf9dbcf456776c0584a488e30746c182f36965354a242e239d00ec524d4218c804951d841686cdec030ee281fc18ffb282eaf899ec937c68260b667cb6a9a766f58e6ce076baaeb3409645d91db0e0fa457fae625ba1aefd824b92d31a12528310765a6c1c53c77f7f66ee9e287179f90de14fb2d236629a03044c4c48356a2eee04bf069cf7821199a797b8a858d801c926242185bf3b443425a357ce547d05389deaa2d4472894d713bab87180cbff8f0738e4141230eed028c35734528c5f3697c09d9b35ffbe7770fbfcf649032504ed5c7b80133db9edf13fc3a62bde8e1e14acb88d233baa08d0f802ac88708cf781db19dcbe6ea2016d66695623c36a71798767e0a8126559360868d4b8978f65f8213e8e9c4dc8cf438dc014c780d9e83583b6ab6df03a039439a1544a0ab1267514c22ad0fa94c3be693b7d40332922764df8e4ee94969a6c0cca17c85dc10d27a53f9dbb2773a4347f8a90932ef76d17ac347be0bd5cf066eeca8940b7a5187a04adbba74b6038f42fb3681bf0ed1741af2e95bbfb8cf938b7a9c40ec58c37bff3d172ba6198128e1ac2a2ffe443666318f8f911513b003946ec71d3e50cf072e06d69e94988b11090a50e623a2b8ddd26027a3ec159ad87dcc40c2507ae33aa56d45ba8335c20d23feb0ace1f78c628ff2d571ecdb167f7121fa81c76c06e022ffa9b22bff01231df09cd6c0e374858b9ba958305016ae1fd3f76cf9a74dcac41a6ea46340c494b6ec202da813a09b98b0c1cfc800cce8e8249cd054e4b258e3718c634cdf6a06f9ea4f5ba0075ded4de89453a5bb4389cdccc0308f0fcfd70fcf8294e80b31f63a585e9889db00537743208c3a5f637ff26128546bbf863183e88b705c48ac77007c7f9a9ce277b1fc4a0eae3fbe19b23f0d7200c88ba7fe3a773cfc31be8afe4f74cb4effea86467acdaa61222f7307e930555b18f40aa304abc92e7e5ad36905e0d7fabdae33588763609b4942d3665212a6d96f9844f7b9cd9725347ebcafedc212a5c518418303ae76e257eb1810b43e065c6714e2b9d639f28f35d931f1f539b</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n<h2 id=\"存储组件\"><a href=\"#存储组件\" class=\"headerlink\" title=\"存储组件\"></a>存储组件</h2> <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs</span><br><span class=\"line\">hbase</span><br><span class=\"line\">hive</span><br><span class=\"line\">elasticsearch</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"hdfs\"><a href=\"#hdfs\" class=\"headerlink\" title=\"hdfs\"></a>hdfs</h3><h4 id=\"hdfs介绍\"><a href=\"#hdfs介绍\" class=\"headerlink\" title=\"hdfs介绍\"></a>hdfs介绍</h4><h4 id=\"hdfs特点\"><a href=\"#hdfs特点\" class=\"headerlink\" title=\"hdfs特点\"></a>hdfs特点</h4><h4 id=\"hdfs使用\"><a href=\"#hdfs使用\" class=\"headerlink\" title=\"hdfs使用\"></a>hdfs使用</h4><h4 id=\"hdfs编程\"><a href=\"#hdfs编程\" class=\"headerlink\" title=\"hdfs编程\"></a>hdfs编程</h4>","encrypt":true},{"title":"logstash 安装","date":"2021-05-21T07:12:52.972Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n## 安装 logstash7.9.0\n因为我们的 elasticsearch是 7.9.0 的所以这里我们 logstash也打算下载 7.9.0\n\n## conf 配置\n\nk8s logs to kafka\n\n```\ninput {\n    tcp{\n        port=>7777\n    }\n }\noutput {\n     kafka {\n        codec => json\n        topic_id => \"k8s-logs\"\n        bootstrap_servers => \"kafka01:9092,kafka02:9092,kafka03:9092\"\n     }\n }\n\n```","source":"_posts/王阁/工作/旸谷数据中心/基础/Logstash 部署.md","raw":"title:  logstash 安装\ndate:  2021年 5月21日\ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n## 安装 logstash7.9.0\n因为我们的 elasticsearch是 7.9.0 的所以这里我们 logstash也打算下载 7.9.0\n\n## conf 配置\n\nk8s logs to kafka\n\n```\ninput {\n    tcp{\n        port=>7777\n    }\n }\noutput {\n     kafka {\n        codec => json\n        topic_id => \"k8s-logs\"\n        bootstrap_servers => \"kafka01:9092,kafka02:9092,kafka03:9092\"\n     }\n }\n\n```","slug":"王阁/工作/旸谷数据中心/基础/Logstash 部署","published":1,"updated":"2021-07-12T02:28:57.102Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqse1001ou6pw4ekgczim","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"e694b3d4caa4f1b06aa56e2b1a3bf631660af53836cfa50cd091b006a6ac08cb\">f29c680708acd02cbb1b6cceaba06192c69a5170d774c3c7841ba1be5a58d4df439424f5a8858c881f343be741a8f215d8b42a13f77bb82c23ebf2c8153784ccb046a91d0223cc2b9e4e33a194b32085cc716f7b5a2fdc181f21ba2c28d70ea8caec76393ea25ccc490a23a6f771cc6394a1e9bc68c4016085253c8e224ec8669436b3a2ac0ab1d3e0a60e23b87acf2bcf3d56184cd0944a8bce544a2389aea97328f98be2ec740bd9f6c665825bbc0e3cbe881c9af0621861dd3e4af8fe7fb88c4f6123111957107c40a3e09021238b6848107d6e6d20767d1b2efa48d68f99a4cd3eefc8be04dcceb1959a777540eec0862d14d457a394cf2539bea1fb640ef39fcf132c4774573a278317b51dbb260f404668ebedb597fe96cb37d73c0cda748c8238ffd8ac4136955126a47ab891e892cf4c91f7153806fc5df16854a11ab9a20e1bab588a085e3254216909194ceb3e8b9c2ec9a87b3ff8792eb72fdef6ae5f658dc32f4927572ddf43b8b163ee8ac18b4d36a901ea5274077b0595961b36ce56d19ebc8b7a87092f7221abf1e27411ee02ea2f76bfda2fbda881375c1ac89ecc7e616c5027dd93c56d67bb6e9274f404dcedcbe565809a5847d7c2d04e980add1fdf532b459853bb5e00d7bd16098baa6439f6bbe26c4e7aa22db4d34917eb7b0d84b409257267019f13e01b67a5bfba413217ab6acb35cf5f08b259bff344062dca85127cbbe0fade7dcca4fa1abda8ba5ad800591e5c221b539c9de147ecb5f2fd305f7fd435ae3ff118e5d74ae558e3eb02263d4099e16f22cac34ab2406f37e00399a7e0c4fdb565d9e376b8b686c5ff9907148695f6f664148239785192d338f7556cd25586ce01f70d2c7bf81c938ee9e85d905f233a0443d4c151ddff422d9f6520afdd5690d850d8856054f1b3d17a3c298d3971c5c2eb2a2fe6808b3b87a306644e881d3aee5b59e516e9c1d36214ded0eb37783e93f3287431c61b627018fe6f0bc1766495806c4c563327539e24d83de3940cc98d2139eb61718b45598112f39445a3ea37e2c0c60453690236c15403f664bb59a602aae8c48fc79a1f68804edd04a348580dfbbf5035aa53230adab36a3213e87bf39e48e6ab659ce47a8394ca46be39f68f81986c3e078718f862a87d73b8ef734ad864c9f41a8566adae9a81203787eca22abdf7cd206ff01a87800148eda355faf991365df5674029e7607fcf4f0ee35e0e151eb959370492a9add3f1dad79b9bdfc98ed5c6274933fbc3b9093af0dc5d7cb955029925df48222cc8d2cd34efb99393b82a2728807a7b439d6dd69233124b74cf3424ef9c18a705500aa7a8362d99d923c675a490754d2ed06066edfddd0d4ff736503491b42b1faf49be6a2ab455def8921d0abf0277f1eaec5fe68ed80335bb42a4e2f7f52b8503b3ba44e3487159a183300ad7d552949342b1372ac956d37aede686ac0805ff0a4b06bc518608fa1dfb6711155b1543426c398656c31188c1d21abf15246057dbac0ed3c130c9cab28772f0c5832cd58493a57daa4d8ee659d0430ae957ca367cbd1e041919af0ef885c965b2dd40b09aa7cef3fb5dda2d793c3c434aff87a8ee0bbbbf301ef518c20c6a69a2538a35f96431d1361854080b29403e8070836bc922b897d035fb9870604f289e788899414f70c1542b35e97698f817e91adebe163e38744d0734a139d13929a3cbda45c9b2a69e1b5f4d318f718edb0321c7170cd74e3daefad29d58434f63cdf2d4fbcd70d551deb2cc26545851edcb102203e41b6a8582b627592be3cae60ef841cad7a33462d161d01f59bb5b3b84d52bf41a9b1a83606c660ac0fedcbb671aae47e44d6e49b87eced19e6dd5d456337d0ea02dd28dfd6ce98dbd5d595fd2f06b28c9917fc153f812f902597238e5bf7374675f7378b8267ff7f87a6fa19b20843710730e476dfb0ed985024ae4a316bc4ed51378bc4d1566f2ea9baf5e25fd9fd947e1de1801aedd1b046ac6d141a5f97997249df4b6f7444ab87995fb4911b1cac369df7d347dbbe74e6bd9b9babfe0349db9a118d76c5bb1bf96b4d3fd3376927677b37cc81eebe5f70d35402657a8d4539ae58215cfa5355804d8ad48a6fc5938dd6b76a27645df67542edb1aba85392225b291c36c296a</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h2 id=\"安装-logstash7-9-0\"><a href=\"#安装-logstash7-9-0\" class=\"headerlink\" title=\"安装 logstash7.9.0\"></a>安装 logstash7.9.0</h2><p>因为我们的 elasticsearch是 7.9.0 的所以这里我们 logstash也打算下载 7.9.0</p>\n<h2 id=\"conf-配置\"><a href=\"#conf-配置\" class=\"headerlink\" title=\"conf 配置\"></a>conf 配置</h2><p>k8s logs to kafka</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">input &#123;</span><br><span class=\"line\">    tcp&#123;</span><br><span class=\"line\">        port&#x3D;&gt;7777</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">output &#123;</span><br><span class=\"line\">     kafka &#123;</span><br><span class=\"line\">        codec &#x3D;&gt; json</span><br><span class=\"line\">        topic_id &#x3D;&gt; &quot;k8s-logs&quot;</span><br><span class=\"line\">        bootstrap_servers &#x3D;&gt; &quot;kafka01:9092,kafka02:9092,kafka03:9092&quot;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>","encrypt":true},{"title":"Flink集成安装至CDH","date":"2023-02-23T02:51:20.903Z","<!-- password":"7FKBKZrTTTPG2LnC -->","_content":"\n <!--more-->\n\n> 集成flink至CDH中\n\n# CDH集中flink\n\n## 准备工作\n\n需要准备的相关内容有：\n1. java （已有）\n2. maven （已有）\n3. flink 安装包\n4. 制作parcel\n\nflink相关下载\n\n```\n注：可不需要提前下载\n\nflink下载地址：https://archive.apache.org/dist/flink/flink-1.12.0/flink-1.12.0-bin-scala_2.12.tgz\n\nparcel制作工具下载地址：https://github.com/pkeropen/flink-parcel.git（github提供的工具包）\n\n```\n\n\n## flink镜像制作\n\n```\ncd /root/flink-parcel\n## 修改flink-parcel.properties\nvim flink-parcel.properties\n## 再按图修改CDH支持版本\n\n## 制镜像\n./build.sh parcel\n## 生成文件夹 FLINK-1.12.4-BIN-SCALA_2.11_build\n## 制作yarn形式的csd文件\n./build.sh csd_on_yarn\n## 生成FLINK_ON_YARN-1.12.4.jar包\n## 将FLINK_ON_YARN-1.12.4.jar 挪动至scm-server的 /opt/cloudera/csd 路径下\nmv FLINK_ON_YARN-1.12.4.jar  /opt/cloudera/csd/\n## FLINK-1.12.4-BIN-SCALA_2.11_build 挪到至之前的/var/www/html/路径下，作为局域网安装源\n\nmv FLINK-1.12.4-BIN-SCALA_2.11_build /var/www/html/flink\n\ncd  /var/www/html/flink\n## 创建成repo仓库\ncreaterepo .\n\n\n\n```\n![2021-05-27-14-28-35](http://img.wqkenqing.ren/2021-05-27-14-28-35.png)\n\n\n### cloudera manager中添加flink\n\n![2021-05-27-14-38-15](http://img.wqkenqing.ren/2021-05-27-14-38-15.png)\n![2021-05-27-14-39-13](http://img.wqkenqing.ren/2021-05-27-14-39-13.png)\n![2021-05-27-14-39-49](http://img.wqkenqing.ren/2021-05-27-14-39-49.png)\n![2021-05-27-14-40-44](http://img.wqkenqing.ren/2021-05-27-14-40-44.png)\n\n出现flink parcel ，点击下载，分配、激活\n![2021-05-27-14-41-04](http://img.wqkenqing.ren/2021-05-27-14-41-04.png)\n\n### 添加对应服务\n \n这里在上面步骤中生成了 FLINK_ON_YARN-1.12.4.jar后添加到路径后，若在添加服务中看不到内容，则在这里要\n\n\n```\n## 重启cloudera-server\nsystemctl restart cloudera-scm-server\n## 重启agent\nsystemctl restart cloudera-scm-agent\n## 查看日志\n\ntail -f /var/log/cloudera-scm-server/cloudera-scm-server.log\n\n```\n\n经过上述操作后，一般即可在添加服务中找到flink-yarn的添加选项\nTips:\n```\n\n这里其实有一些暗坑，就是前面的选择cdh区间的操作中，要注意，即如图示进行配置，我这里是6.3.2，则要配置成如上图才行。不然可能会出现cdh版本适配区间不一致的问题\n\n```\n\n接下来，像正常安装cdh组件一样安装flink-yarn服务\n\n![2021-05-27-15-23-31](http://img.wqkenqing.ren/2021-05-27-15-23-31.png)\n\n但要真的让flink服务成功添加还要进行一些参数配置和修改\n\n1. 修改 Kerberos\n因为集群中暂时还未集成Kerberos所以这里的配置内容要删除，不然，会出现启动问题。\n\n2. 添加hadoop环境变量\n\n![2021-05-27-15-26-53](http://img.wqkenqing.ren/2021-05-27-15-26-53.png)\n\n因为flink1.10后开始应该就不用再集中hadoop的包，而是直接配置hadoop环境变量或从1.11分支上拉项目，自己打包。\n\n大致这里两个参数设置后，服务应该就能正常添加了。\n\n添加成功后的效果\n![2021-05-27-15-28-45](http://img.wqkenqing.ren/2021-05-27-15-28-45.png)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/王阁/工作/旸谷数据中心/基础/Flink集成CDH.md","raw":"title:  Flink集成安装至CDH\ndate:  2021年 5月24日\ntags: [flink、CDH]\n<!-- password: 7FKBKZrTTTPG2LnC -->\n---\n\n <!--more-->\n\n> 集成flink至CDH中\n\n# CDH集中flink\n\n## 准备工作\n\n需要准备的相关内容有：\n1. java （已有）\n2. maven （已有）\n3. flink 安装包\n4. 制作parcel\n\nflink相关下载\n\n```\n注：可不需要提前下载\n\nflink下载地址：https://archive.apache.org/dist/flink/flink-1.12.0/flink-1.12.0-bin-scala_2.12.tgz\n\nparcel制作工具下载地址：https://github.com/pkeropen/flink-parcel.git（github提供的工具包）\n\n```\n\n\n## flink镜像制作\n\n```\ncd /root/flink-parcel\n## 修改flink-parcel.properties\nvim flink-parcel.properties\n## 再按图修改CDH支持版本\n\n## 制镜像\n./build.sh parcel\n## 生成文件夹 FLINK-1.12.4-BIN-SCALA_2.11_build\n## 制作yarn形式的csd文件\n./build.sh csd_on_yarn\n## 生成FLINK_ON_YARN-1.12.4.jar包\n## 将FLINK_ON_YARN-1.12.4.jar 挪动至scm-server的 /opt/cloudera/csd 路径下\nmv FLINK_ON_YARN-1.12.4.jar  /opt/cloudera/csd/\n## FLINK-1.12.4-BIN-SCALA_2.11_build 挪到至之前的/var/www/html/路径下，作为局域网安装源\n\nmv FLINK-1.12.4-BIN-SCALA_2.11_build /var/www/html/flink\n\ncd  /var/www/html/flink\n## 创建成repo仓库\ncreaterepo .\n\n\n\n```\n![2021-05-27-14-28-35](http://img.wqkenqing.ren/2021-05-27-14-28-35.png)\n\n\n### cloudera manager中添加flink\n\n![2021-05-27-14-38-15](http://img.wqkenqing.ren/2021-05-27-14-38-15.png)\n![2021-05-27-14-39-13](http://img.wqkenqing.ren/2021-05-27-14-39-13.png)\n![2021-05-27-14-39-49](http://img.wqkenqing.ren/2021-05-27-14-39-49.png)\n![2021-05-27-14-40-44](http://img.wqkenqing.ren/2021-05-27-14-40-44.png)\n\n出现flink parcel ，点击下载，分配、激活\n![2021-05-27-14-41-04](http://img.wqkenqing.ren/2021-05-27-14-41-04.png)\n\n### 添加对应服务\n \n这里在上面步骤中生成了 FLINK_ON_YARN-1.12.4.jar后添加到路径后，若在添加服务中看不到内容，则在这里要\n\n\n```\n## 重启cloudera-server\nsystemctl restart cloudera-scm-server\n## 重启agent\nsystemctl restart cloudera-scm-agent\n## 查看日志\n\ntail -f /var/log/cloudera-scm-server/cloudera-scm-server.log\n\n```\n\n经过上述操作后，一般即可在添加服务中找到flink-yarn的添加选项\nTips:\n```\n\n这里其实有一些暗坑，就是前面的选择cdh区间的操作中，要注意，即如图示进行配置，我这里是6.3.2，则要配置成如上图才行。不然可能会出现cdh版本适配区间不一致的问题\n\n```\n\n接下来，像正常安装cdh组件一样安装flink-yarn服务\n\n![2021-05-27-15-23-31](http://img.wqkenqing.ren/2021-05-27-15-23-31.png)\n\n但要真的让flink服务成功添加还要进行一些参数配置和修改\n\n1. 修改 Kerberos\n因为集群中暂时还未集成Kerberos所以这里的配置内容要删除，不然，会出现启动问题。\n\n2. 添加hadoop环境变量\n\n![2021-05-27-15-26-53](http://img.wqkenqing.ren/2021-05-27-15-26-53.png)\n\n因为flink1.10后开始应该就不用再集中hadoop的包，而是直接配置hadoop环境变量或从1.11分支上拉项目，自己打包。\n\n大致这里两个参数设置后，服务应该就能正常添加了。\n\n添加成功后的效果\n![2021-05-27-15-28-45](http://img.wqkenqing.ren/2021-05-27-15-28-45.png)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"王阁/工作/旸谷数据中心/基础/Flink集成CDH","published":1,"updated":"2023-02-23T02:51:20.903Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqse4001pu6pw9vbq73vs","content":" <a id=\"more\"></a>\n\n<blockquote>\n<p>集成flink至CDH中</p>\n</blockquote>\n<h1 id=\"CDH集中flink\"><a href=\"#CDH集中flink\" class=\"headerlink\" title=\"CDH集中flink\"></a>CDH集中flink</h1><h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><p>需要准备的相关内容有：</p>\n<ol>\n<li>java （已有）</li>\n<li>maven （已有）</li>\n<li>flink 安装包</li>\n<li>制作parcel</li>\n</ol>\n<p>flink相关下载</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">注：可不需要提前下载</span><br><span class=\"line\"></span><br><span class=\"line\">flink下载地址：https:&#x2F;&#x2F;archive.apache.org&#x2F;dist&#x2F;flink&#x2F;flink-1.12.0&#x2F;flink-1.12.0-bin-scala_2.12.tgz</span><br><span class=\"line\"></span><br><span class=\"line\">parcel制作工具下载地址：https:&#x2F;&#x2F;github.com&#x2F;pkeropen&#x2F;flink-parcel.git（github提供的工具包）</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"flink镜像制作\"><a href=\"#flink镜像制作\" class=\"headerlink\" title=\"flink镜像制作\"></a>flink镜像制作</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;root&#x2F;flink-parcel</span><br><span class=\"line\">## 修改flink-parcel.properties</span><br><span class=\"line\">vim flink-parcel.properties</span><br><span class=\"line\">## 再按图修改CDH支持版本</span><br><span class=\"line\"></span><br><span class=\"line\">## 制镜像</span><br><span class=\"line\">.&#x2F;build.sh parcel</span><br><span class=\"line\">## 生成文件夹 FLINK-1.12.4-BIN-SCALA_2.11_build</span><br><span class=\"line\">## 制作yarn形式的csd文件</span><br><span class=\"line\">.&#x2F;build.sh csd_on_yarn</span><br><span class=\"line\">## 生成FLINK_ON_YARN-1.12.4.jar包</span><br><span class=\"line\">## 将FLINK_ON_YARN-1.12.4.jar 挪动至scm-server的 &#x2F;opt&#x2F;cloudera&#x2F;csd 路径下</span><br><span class=\"line\">mv FLINK_ON_YARN-1.12.4.jar  &#x2F;opt&#x2F;cloudera&#x2F;csd&#x2F;</span><br><span class=\"line\">## FLINK-1.12.4-BIN-SCALA_2.11_build 挪到至之前的&#x2F;var&#x2F;www&#x2F;html&#x2F;路径下，作为局域网安装源</span><br><span class=\"line\"></span><br><span class=\"line\">mv FLINK-1.12.4-BIN-SCALA_2.11_build &#x2F;var&#x2F;www&#x2F;html&#x2F;flink</span><br><span class=\"line\"></span><br><span class=\"line\">cd  &#x2F;var&#x2F;www&#x2F;html&#x2F;flink</span><br><span class=\"line\">## 创建成repo仓库</span><br><span class=\"line\">createrepo .</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://img.wqkenqing.ren/2021-05-27-14-28-35.png\" alt=\"2021-05-27-14-28-35\"></p>\n<h3 id=\"cloudera-manager中添加flink\"><a href=\"#cloudera-manager中添加flink\" class=\"headerlink\" title=\"cloudera manager中添加flink\"></a>cloudera manager中添加flink</h3><p><img src=\"http://img.wqkenqing.ren/2021-05-27-14-38-15.png\" alt=\"2021-05-27-14-38-15\"><br><img src=\"http://img.wqkenqing.ren/2021-05-27-14-39-13.png\" alt=\"2021-05-27-14-39-13\"><br><img src=\"http://img.wqkenqing.ren/2021-05-27-14-39-49.png\" alt=\"2021-05-27-14-39-49\"><br><img src=\"http://img.wqkenqing.ren/2021-05-27-14-40-44.png\" alt=\"2021-05-27-14-40-44\"></p>\n<p>出现flink parcel ，点击下载，分配、激活<br><img src=\"http://img.wqkenqing.ren/2021-05-27-14-41-04.png\" alt=\"2021-05-27-14-41-04\"></p>\n<h3 id=\"添加对应服务\"><a href=\"#添加对应服务\" class=\"headerlink\" title=\"添加对应服务\"></a>添加对应服务</h3><p>这里在上面步骤中生成了 FLINK_ON_YARN-1.12.4.jar后添加到路径后，若在添加服务中看不到内容，则在这里要</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 重启cloudera-server</span><br><span class=\"line\">systemctl restart cloudera-scm-server</span><br><span class=\"line\">## 重启agent</span><br><span class=\"line\">systemctl restart cloudera-scm-agent</span><br><span class=\"line\">## 查看日志</span><br><span class=\"line\"></span><br><span class=\"line\">tail -f &#x2F;var&#x2F;log&#x2F;cloudera-scm-server&#x2F;cloudera-scm-server.log</span><br></pre></td></tr></table></figure>\n\n<p>经过上述操作后，一般即可在添加服务中找到flink-yarn的添加选项<br>Tips:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">这里其实有一些暗坑，就是前面的选择cdh区间的操作中，要注意，即如图示进行配置，我这里是6.3.2，则要配置成如上图才行。不然可能会出现cdh版本适配区间不一致的问题</span><br></pre></td></tr></table></figure>\n\n<p>接下来，像正常安装cdh组件一样安装flink-yarn服务</p>\n<p><img src=\"http://img.wqkenqing.ren/2021-05-27-15-23-31.png\" alt=\"2021-05-27-15-23-31\"></p>\n<p>但要真的让flink服务成功添加还要进行一些参数配置和修改</p>\n<ol>\n<li><p>修改 Kerberos<br>因为集群中暂时还未集成Kerberos所以这里的配置内容要删除，不然，会出现启动问题。</p>\n</li>\n<li><p>添加hadoop环境变量</p>\n</li>\n</ol>\n<p><img src=\"http://img.wqkenqing.ren/2021-05-27-15-26-53.png\" alt=\"2021-05-27-15-26-53\"></p>\n<p>因为flink1.10后开始应该就不用再集中hadoop的包，而是直接配置hadoop环境变量或从1.11分支上拉项目，自己打包。</p>\n<p>大致这里两个参数设置后，服务应该就能正常添加了。</p>\n<p>添加成功后的效果<br><img src=\"http://img.wqkenqing.ren/2021-05-27-15-28-45.png\" alt=\"2021-05-27-15-28-45\"></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>集成flink至CDH中</p>\n</blockquote>\n<h1 id=\"CDH集中flink\"><a href=\"#CDH集中flink\" class=\"headerlink\" title=\"CDH集中flink\"></a>CDH集中flink</h1><h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><p>需要准备的相关内容有：</p>\n<ol>\n<li>java （已有）</li>\n<li>maven （已有）</li>\n<li>flink 安装包</li>\n<li>制作parcel</li>\n</ol>\n<p>flink相关下载</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">注：可不需要提前下载</span><br><span class=\"line\"></span><br><span class=\"line\">flink下载地址：https:&#x2F;&#x2F;archive.apache.org&#x2F;dist&#x2F;flink&#x2F;flink-1.12.0&#x2F;flink-1.12.0-bin-scala_2.12.tgz</span><br><span class=\"line\"></span><br><span class=\"line\">parcel制作工具下载地址：https:&#x2F;&#x2F;github.com&#x2F;pkeropen&#x2F;flink-parcel.git（github提供的工具包）</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"flink镜像制作\"><a href=\"#flink镜像制作\" class=\"headerlink\" title=\"flink镜像制作\"></a>flink镜像制作</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;root&#x2F;flink-parcel</span><br><span class=\"line\">## 修改flink-parcel.properties</span><br><span class=\"line\">vim flink-parcel.properties</span><br><span class=\"line\">## 再按图修改CDH支持版本</span><br><span class=\"line\"></span><br><span class=\"line\">## 制镜像</span><br><span class=\"line\">.&#x2F;build.sh parcel</span><br><span class=\"line\">## 生成文件夹 FLINK-1.12.4-BIN-SCALA_2.11_build</span><br><span class=\"line\">## 制作yarn形式的csd文件</span><br><span class=\"line\">.&#x2F;build.sh csd_on_yarn</span><br><span class=\"line\">## 生成FLINK_ON_YARN-1.12.4.jar包</span><br><span class=\"line\">## 将FLINK_ON_YARN-1.12.4.jar 挪动至scm-server的 &#x2F;opt&#x2F;cloudera&#x2F;csd 路径下</span><br><span class=\"line\">mv FLINK_ON_YARN-1.12.4.jar  &#x2F;opt&#x2F;cloudera&#x2F;csd&#x2F;</span><br><span class=\"line\">## FLINK-1.12.4-BIN-SCALA_2.11_build 挪到至之前的&#x2F;var&#x2F;www&#x2F;html&#x2F;路径下，作为局域网安装源</span><br><span class=\"line\"></span><br><span class=\"line\">mv FLINK-1.12.4-BIN-SCALA_2.11_build &#x2F;var&#x2F;www&#x2F;html&#x2F;flink</span><br><span class=\"line\"></span><br><span class=\"line\">cd  &#x2F;var&#x2F;www&#x2F;html&#x2F;flink</span><br><span class=\"line\">## 创建成repo仓库</span><br><span class=\"line\">createrepo .</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://img.wqkenqing.ren/2021-05-27-14-28-35.png\" alt=\"2021-05-27-14-28-35\"></p>\n<h3 id=\"cloudera-manager中添加flink\"><a href=\"#cloudera-manager中添加flink\" class=\"headerlink\" title=\"cloudera manager中添加flink\"></a>cloudera manager中添加flink</h3><p><img src=\"http://img.wqkenqing.ren/2021-05-27-14-38-15.png\" alt=\"2021-05-27-14-38-15\"><br><img src=\"http://img.wqkenqing.ren/2021-05-27-14-39-13.png\" alt=\"2021-05-27-14-39-13\"><br><img src=\"http://img.wqkenqing.ren/2021-05-27-14-39-49.png\" alt=\"2021-05-27-14-39-49\"><br><img src=\"http://img.wqkenqing.ren/2021-05-27-14-40-44.png\" alt=\"2021-05-27-14-40-44\"></p>\n<p>出现flink parcel ，点击下载，分配、激活<br><img src=\"http://img.wqkenqing.ren/2021-05-27-14-41-04.png\" alt=\"2021-05-27-14-41-04\"></p>\n<h3 id=\"添加对应服务\"><a href=\"#添加对应服务\" class=\"headerlink\" title=\"添加对应服务\"></a>添加对应服务</h3><p>这里在上面步骤中生成了 FLINK_ON_YARN-1.12.4.jar后添加到路径后，若在添加服务中看不到内容，则在这里要</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 重启cloudera-server</span><br><span class=\"line\">systemctl restart cloudera-scm-server</span><br><span class=\"line\">## 重启agent</span><br><span class=\"line\">systemctl restart cloudera-scm-agent</span><br><span class=\"line\">## 查看日志</span><br><span class=\"line\"></span><br><span class=\"line\">tail -f &#x2F;var&#x2F;log&#x2F;cloudera-scm-server&#x2F;cloudera-scm-server.log</span><br></pre></td></tr></table></figure>\n\n<p>经过上述操作后，一般即可在添加服务中找到flink-yarn的添加选项<br>Tips:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">这里其实有一些暗坑，就是前面的选择cdh区间的操作中，要注意，即如图示进行配置，我这里是6.3.2，则要配置成如上图才行。不然可能会出现cdh版本适配区间不一致的问题</span><br></pre></td></tr></table></figure>\n\n<p>接下来，像正常安装cdh组件一样安装flink-yarn服务</p>\n<p><img src=\"http://img.wqkenqing.ren/2021-05-27-15-23-31.png\" alt=\"2021-05-27-15-23-31\"></p>\n<p>但要真的让flink服务成功添加还要进行一些参数配置和修改</p>\n<ol>\n<li><p>修改 Kerberos<br>因为集群中暂时还未集成Kerberos所以这里的配置内容要删除，不然，会出现启动问题。</p>\n</li>\n<li><p>添加hadoop环境变量</p>\n</li>\n</ol>\n<p><img src=\"http://img.wqkenqing.ren/2021-05-27-15-26-53.png\" alt=\"2021-05-27-15-26-53\"></p>\n<p>因为flink1.10后开始应该就不用再集中hadoop的包，而是直接配置hadoop环境变量或从1.11分支上拉项目，自己打包。</p>\n<p>大致这里两个参数设置后，服务应该就能正常添加了。</p>\n<p>添加成功后的效果<br><img src=\"http://img.wqkenqing.ren/2021-05-27-15-28-45.png\" alt=\"2021-05-27-15-28-45\"></p>"},{"title":"CDH基础环境部署","date":"2023-02-23T02:51:20.903Z","password":"7FKBKZrTTTPG2LnC","_content":"进行CDH基础环境部署\n\n <!--more-->\n\n ## 基础准备\n#### 时区更改\npssh -h \"timedatectl set-timezone Asia/Shanghai\"\n### 各服务资源的免密钥登录\n\n服务器资源参见 [数据中心服务资源](../数据中心服务资源/数据中心服务资源.md)\n\n\n#### 修改hostname\ndone\n\n#### 配置免密钥登录\n\ndone\n\n### 切换yum源,这里设置为阿里源\n\n```bash\ncd /etc/yum.repos.d/\n\nmv CentOS-Base.repo CentOS-Base.repo.backup\n\nwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n\nyum clean all\n\nyum makecache\n\n```\n\n\n```bash\n#1.安装vim编辑器 \nyum install -y vim\n\n#2.安装lrzsz文件传输工具 \nyum -y install lrzsz\n\n#3.安装wget文件下载工具 \nyum -y install wget\n\n#4.安装netstat，查看端口监听状况：\n\nyum -y install net-tools\n\nnetstat -ntlp | grep 端口号\n\n#5.下载unzip解压工具，解压命令：\n\nyum install -y unzip zip\n\nuzip 压缩包.zip -d 解压目录\n```\n\n### 配置pssh 批操作工具\n\n```\nwget https://pypi.python.org/packages/60/9a/8035af3a7d3d1617ae2c7c174efa4f154e5bf9c24b36b623413b38be8e4a/pssh-2.3.1.tar.gz\n\ntar xf pssh-2.3.1.tar.gz -C /usr/local/pssh/\n\ncd /usr/local/pssh/pssh-2.3.1/\n\npython setup.py install\n\n```\n\n\n\n### 配置tod别名\n\n```\necho \"alias tog='cd /data/gitfiles/\" >>  ~/.bashrc\necho \"alias tod='cd /data/\" >>  ~/.bashrc\n```\n\n### 安装mysql\n\n```bash\n## 创建mysql镜像的存放文件夹\n\nmkdir -p /data/soft_install/mysql_rpm\n\n## wget 获取mysql rpm 文件\n\nwget https://repo.mysql.com//mysql80-community-release-el7-3.noarch.rpm\n\n## 安装mysql源\nyum localinstall -y mysql80-community-release-el7-3.noarch.rpm\n## 3.检查MySQL源是否安装成功，此时查到的安装包的版本都是mysql5.8版本的 \nyum repolist enabled | grep \"mysql.*-community.*\"\n\n## 4.修改yum源配置文件，获取自己想要安装的mysql5.7版本\n\n##  #5.检查MySQL源是否选择的是5.7版本，此时查到的安装包的版本都是mysql5.7版本的\nyum repolist enabled | grep \"mysql.*-community.*\"\n\n##安装mysql\nyum -y install mysql-community-server\n## 启动mysql服务\n\n```\n![2021-04-25-14-30-38](http://img.wqkenqing.ren/2021-04-25-14-30-38.png)\n\n### 启动mysql服务\n\n``` bash\n#1.临时启动mysql服务 \nsystemctl start mysqld\n\n#2.开机启动mysql服务 \nsystemctl enable mysqld\n\n#3.查看MySQL的启动状态 \nsystemctl status mysqld\n\n#4.查看mysql进程是否正常开启 \nps -le | grep mysqld\n```\n### 修改mysql中root本地登录密码\n\n```bash\ngrep 'temporary password' /var/log/mysqld.log\n\n# temp password\nk2PqXCarz-BS\n# 登录\nmysql -u root -p\n再用temp密码登录\n\n## 修改密码\nALTER USER 'root'@'localhost' IDENTIFIED BY 'ER62-fP()hs1OoFW>';\n\n###重启使密码生效\nsystemctl restart mysqld\n```\n![2021-04-25-14-35-25](http://img.wqkenqing.ren/2021-04-25-14-35-25.png)\n\n### 允许root用户远程登录\n\n```bash\nGRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION; \nFLUSH PRIVILEGES;\n\n\n## 指定特定的IP，开启root用户远程连接 \nGRANT ALL PRIVILEGES ON *.* TO 'root'@'指定的IP' IDENTIFIED BY 'root用户的密码' WITH GRANT OPTION; \n## 一般为了安全起见，会创建专用的远程访问用户\n GRANT ALL PRIVILEGES ON *.* TO 'dadeity'@'%' IDENTIFIED BY 'daDeity@163.com' WITH GRANT OPTION;\n\n```\n### 创建CDH源数据库、用户、服务的数据库\n\n```bash \nCREATE DATABASE scm DEFAULT CHARACTER SET utf8; \nCREATE USER 'scm'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; \nGRANT ALL PRIVILEGES ON scm.* TO 'scm'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; \nGRANT ALL PRIVILEGES ON *.* TO 'scm'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\nCREATE DATABASE amon DEFAULT CHARACTER SET utf8; CREATE USER 'amon'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON amon.* TO 'amon'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON *.* TO 'amon'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\nCREATE DATABASE hive DEFAULT CHARACTER SET utf8; CREATE USER 'hive'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON hive.* TO 'hive'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON *.* TO 'hive'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\nCREATE DATABASE hue DEFAULT CHARACTER SET utf8; CREATE USER 'hue'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON hue.* TO 'hue'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON *.* TO 'hue'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\nCREATE DATABASE oozie DEFAULT CHARACTER SET utf8; CREATE USER 'oozie'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON oozie.* TO 'oozie'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\nCREATE DATABASE sentry DEFAULT CHARACTER SET utf8; CREATE USER 'sentry'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON sentry.* TO 'sentry'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON *.* TO 'sentry'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\n## 刷新mysql的权限列表 \nFLUSH PRIVILEGES;\n\n## 查看用户\n##设置密码等级\n#密码强度设为最低等级\nset global validate_password_policy=0; \n#密码允许最小长度为2\nset global validate_password_length=2; \nset global validate_password_number_count=0; \n\n#更新授权表，生效\nflush privileges;                      \n\n```\n\n### 创建本地YUM仓库\n\n``` bash\n##安装createrepo包\nyum install -y createrepo\n\ncd /root/cloudera_install/cm6.3.1\ncreaterepo . \n cd /root/cloudera_install/cdh6.3.2\ncreaterepo . \n\n## 创建/var/www/html 地址\nmkdir -p /var/www/html\n\n## 修改cdh6.3.2中的校验文件\nCDH-6.3.2-1.cdh6.3.2.p0.1605554-el6.parcel.sha256 CDH-6.3.2-1.cdh6.3.2.p0.1605554- el6.parcel.sha\n##移动文件至/var/www/html\nmv cdh6.3.2 /var/www/html\nmv cm6.3.1 /var/www/html\n#安装httpd服务 \nyum install -y httpd \n#启动httpd服务 \nsystemctl start httpd \n#设置httpd服务开机启动 \nsystemctl enable httpd \n#查看httpd服务是否启动\n ps -ef | grep httpd\n\nvim /etc/yum.repos.d/os.repo\n\n#以下为文件内容 \n[osrepo] name=os_repo \nbaseurl=http://hadoop01.baicdt.com/cm6.3.1 \nenabled=true \ngpgcheck=false\n\npscp -h host.txt  /etc/yum.repos.d/os.repo /etc/yum.repos.d/\n\nyum repolist\n\nvim /etc/httpd/conf/httpd.conf \n#在<IfModule mime_module>中修改以下内容 #把第284行的 \nAddType application/x-gzip .gz .tgz \n修改为: AddType application/x-gzip .gz .tgz .parcel\n#重启httpd服务\nsystemctl restart httpd\n\n```\n\n### 所有服务器安装jdk\n\n```\n\npssh -h host.txt \" yum install -y oracle-j2sdk1.8-1.8.0+update181-1.x86_64\"\n\n```\n\n### 配置jdk的环境变量\n\n```\n\nvim /etc/profile\n\nexport JAVA_HOME=/usr/java/jdk1.8.0_181-cloudera \nexport CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar export PATH=:$JAVA_HOME/bin:$PATH\n\npscp -h host.txt /etc/profile /etc\n\npssh -h host.txt  \"source /etc/profile\"\n\n```\n\n### 添加mysql驱动包\n\n```\nmkdir -p /usr/share/java \nmv /root/cloudera_install/mysql-connector-java-5.1.46.jar /usr/share/java/ \ncd /usr/share/java/ \nmv mysql-connector-java-5.1.46.jar mysql-connector-java.jar\n\npssh -h host2.txt \"mkdir -p  /usr/share/java \"\npscp -h host2.txt /usr/share/java/mysql-connector-java.jar /usr/share/java/\n\n```\n\n## Cloudera Manager部署\n### 安装CM server及agent\n\n```\n#安装python27，解决安装过程中Hue无法访问数据库问题\npssh -h host.txt  \"yum install -y centos-release-scl \"\npssh -h host.txt \"yum install -y python27 python27-devel\"\n## server安装\nyum install -y cloudera-manager-server cloudera-manager-daemons cloudera-manager-agent\n## 安装agent and damons\npssh -h host.txt \"yum -y install cloudera-manager-daemons\"\npssh -h host.txt \"yum -y install cloudera-manager-agent\"\npssh -h host2.txt yum -y install cloudera-manager-daemons\npssh -h host2.txt yum -y install cloudera-manager-agent\n\n```\n\n#### 所有节点修改agent配置\n\n```\nvim /etc/cloudera-scm-agent/config.ini \n#修改文件中server_host的属性值 \nserver_host=scm-server\n\n\npscp -h host2.txt /etc/cloudera-scm-agent/config.ini /etc/cloudera-scm-agent/\n\n```\n\n#### 初始化scm数据库\n\n```\n/opt/cloudera/cm/schema/scm_prepare_database.sh mysql scm scm ER62-fP()hs1OoFW>\n\n添加mysql驱动包\npscp -h host2.txt /usr/share/java/mysql-connector-java.jar  /opt/cloudera/cm/lib\n\n```\n\n#### 启动CM server及agent\n\n```\n#hadoop01主节点启动CM  server \nsystemctl start cloudera-scm-server\n\n#启动日志目录为\n/var/log/cloudera-scm-server/ cd /var/log/cloudera-scm-server/ \ntail cloudera-scm-server.log\n\n#所有节点启动CM agent \n\nsystemctl start cloudera-scm-agent\n```\n\n### 重启 scm服务\n\nsystemctl restart cloudera-scm-server\n\npssh -h host.txt  \"systemctl restart cloudera-scm-agent  \"\n\nQ:这里有出现了agent安装失败的情况\nA:分析日志基本可知,是agent和server服务启动时,运行的监听问题.解决思路是对/etc/hosts文件进行处理\n![2021-04-26-11-41-22](http://img.wqkenqing.ren/2021-04-26-11-41-22.png)\n事实证明确实如此。\n后续2:\n在运维同事进行处理后,又在/etc/hosts 文件里添加了新的内容。\n\n\npssh -h host.txt 'mkdir -p /data/colony/hdfs'\n\n### elasticearch 集中安装\n1. 将es的parcel包移动到/var/www/html/elasticearch中\n2. 在parcel配置页面添加es镜像的添加地址: http://server/elasticsearch\n3. 在parcel页面刷新,直至elasticearch栏加载出来,点击下载,分配.\n4. 分配完成后,点击激活,这一步常是要退出分配页面,重新点击.\n5. 激活完成后一般就可以安装elasticsearch了.按CDH安装其它主机一样,进行安装\n6. 安装时elasticearch的配置内容一般不可能更改,这里要elastiscearch安装完成后再进行配置.\n要配置的内容主要有如下图\n![2021-04-28-14-36-25](http://img.wqkenqing.ren/2021-04-28-14-36-25.png)\n#### es内存设置\n\n```\n-Xms8g\n-Xmx8g\n```\n两个参数要设置成一样大,不然会有报错。\n\n\nelasticearch.yml添加监听配置\n\n```\naction.destructive_requires_name: true\naction.auto_create_index: .security,.monitoring*,.watches,.triggered_watches,.watcher-history*\nxpack.monitoring.enabled: true\nxpack.graph.enabled: false\nxpack.watcher.enabled: false\nxpack.ml.enabled: false\n```\n\n\n\n\n### kibana部署\n\n#### docker-compose.yml\n\n```yml\nversion: '2.4'\nservices:\n  kibana:\n   image: kibana:7.9.0\n   container_name: kibana\n   restart: always\n   volumes:\n       - ./config:/usr/share/kibana/config\n   network_mode: host\n\n```\n\n### sentry 鉴权\n\n### clickhouse集群\n\n\n\n#### 部署单机版\n1. 先查看支不支持sse4指令集\ngrep -q sse4_2 /proc/cpuinfo && echo “SSE 4.2 supported” || echo “SSE 4.2 not supported.\n![2021-04-28-17-34-28](http://img.wqkenqing.ren/2021-04-28-17-34-28.png)\n现有服务器不支持sse4。在此种情况下，先安装一个集群试用\n\n\n2. \n\npssh -h ck.txt \"yum install -y yum-utils\"\npssh -h ck.txt \"rpm --import https://repo.clickhouse.tech/CLICKHOUSE-KEY.GPG\"\npssh -h ck.txt \"yum-config-manager --add-repo https://repo.clickhouse.tech/rpm/stable/x86_64\"\npssh -h ck.txt \"yum install -y clickhouse-server clickhouse-client\"\n\n3. \n启动server\n\nsystemctl start clickhouse-server\n\npssh -h ck.txt \"systemctl start clickhouse-server\"\n\n4. 修改config.xml\n\n修改以下几个参数\n```\n    <path>/var/lib/clickhouse/</path>\n    <tmp_path>/var/lib/clickhouse/tmp/</tmp_path>\n    <user_files_path>/var/lib/clickhouse/user_files/</user_files_path>\n\n    全局替换\n    /var/lib ===> /data/colony/\n    /var/log ===> /data/colony/log\n    \n```\n\n## flink手动安装\n\n复制flink至其它节点\npscp -h host2.txt flink-1.12.4-bin-scala_2.11.tgz ~\n解压flink压缩包\npssh -h host2.txt \"tar -zxvf ~/flink-1.12.4-bin-scala_2.11.tgz\"\n\n安装scala环境\npscp  -r  -h host2.txt scala-2.11.8 ~/\n\n\n复制 flink包至所有节点\n\npscp -h hos t.txt  /root/upload/flink-shaded-hadoop-2-uber-3.0.0-cdh6.2.0-7.0.jar   /opt/cloudera/parcels/FLINK/lib\n\ndemo 示例\n\npscp -h hos t.txt  /root/upload/flink-shaded-hadoop-2-uber-3.0.0-cdh6.2.0-7.0.jar   /opt/cloudera/parcels/FLINK/lib\n","source":"_posts/王阁/工作/旸谷数据中心/基础/CDH基础环境部署.md","raw":"title:  CDH基础环境部署\ndate:  2021年 4月25日\ntags: [cdh,cm,数据中心]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n进行CDH基础环境部署\n\n <!--more-->\n\n ## 基础准备\n#### 时区更改\npssh -h \"timedatectl set-timezone Asia/Shanghai\"\n### 各服务资源的免密钥登录\n\n服务器资源参见 [数据中心服务资源](../数据中心服务资源/数据中心服务资源.md)\n\n\n#### 修改hostname\ndone\n\n#### 配置免密钥登录\n\ndone\n\n### 切换yum源,这里设置为阿里源\n\n```bash\ncd /etc/yum.repos.d/\n\nmv CentOS-Base.repo CentOS-Base.repo.backup\n\nwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n\nyum clean all\n\nyum makecache\n\n```\n\n\n```bash\n#1.安装vim编辑器 \nyum install -y vim\n\n#2.安装lrzsz文件传输工具 \nyum -y install lrzsz\n\n#3.安装wget文件下载工具 \nyum -y install wget\n\n#4.安装netstat，查看端口监听状况：\n\nyum -y install net-tools\n\nnetstat -ntlp | grep 端口号\n\n#5.下载unzip解压工具，解压命令：\n\nyum install -y unzip zip\n\nuzip 压缩包.zip -d 解压目录\n```\n\n### 配置pssh 批操作工具\n\n```\nwget https://pypi.python.org/packages/60/9a/8035af3a7d3d1617ae2c7c174efa4f154e5bf9c24b36b623413b38be8e4a/pssh-2.3.1.tar.gz\n\ntar xf pssh-2.3.1.tar.gz -C /usr/local/pssh/\n\ncd /usr/local/pssh/pssh-2.3.1/\n\npython setup.py install\n\n```\n\n\n\n### 配置tod别名\n\n```\necho \"alias tog='cd /data/gitfiles/\" >>  ~/.bashrc\necho \"alias tod='cd /data/\" >>  ~/.bashrc\n```\n\n### 安装mysql\n\n```bash\n## 创建mysql镜像的存放文件夹\n\nmkdir -p /data/soft_install/mysql_rpm\n\n## wget 获取mysql rpm 文件\n\nwget https://repo.mysql.com//mysql80-community-release-el7-3.noarch.rpm\n\n## 安装mysql源\nyum localinstall -y mysql80-community-release-el7-3.noarch.rpm\n## 3.检查MySQL源是否安装成功，此时查到的安装包的版本都是mysql5.8版本的 \nyum repolist enabled | grep \"mysql.*-community.*\"\n\n## 4.修改yum源配置文件，获取自己想要安装的mysql5.7版本\n\n##  #5.检查MySQL源是否选择的是5.7版本，此时查到的安装包的版本都是mysql5.7版本的\nyum repolist enabled | grep \"mysql.*-community.*\"\n\n##安装mysql\nyum -y install mysql-community-server\n## 启动mysql服务\n\n```\n![2021-04-25-14-30-38](http://img.wqkenqing.ren/2021-04-25-14-30-38.png)\n\n### 启动mysql服务\n\n``` bash\n#1.临时启动mysql服务 \nsystemctl start mysqld\n\n#2.开机启动mysql服务 \nsystemctl enable mysqld\n\n#3.查看MySQL的启动状态 \nsystemctl status mysqld\n\n#4.查看mysql进程是否正常开启 \nps -le | grep mysqld\n```\n### 修改mysql中root本地登录密码\n\n```bash\ngrep 'temporary password' /var/log/mysqld.log\n\n# temp password\nk2PqXCarz-BS\n# 登录\nmysql -u root -p\n再用temp密码登录\n\n## 修改密码\nALTER USER 'root'@'localhost' IDENTIFIED BY 'ER62-fP()hs1OoFW>';\n\n###重启使密码生效\nsystemctl restart mysqld\n```\n![2021-04-25-14-35-25](http://img.wqkenqing.ren/2021-04-25-14-35-25.png)\n\n### 允许root用户远程登录\n\n```bash\nGRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION; \nFLUSH PRIVILEGES;\n\n\n## 指定特定的IP，开启root用户远程连接 \nGRANT ALL PRIVILEGES ON *.* TO 'root'@'指定的IP' IDENTIFIED BY 'root用户的密码' WITH GRANT OPTION; \n## 一般为了安全起见，会创建专用的远程访问用户\n GRANT ALL PRIVILEGES ON *.* TO 'dadeity'@'%' IDENTIFIED BY 'daDeity@163.com' WITH GRANT OPTION;\n\n```\n### 创建CDH源数据库、用户、服务的数据库\n\n```bash \nCREATE DATABASE scm DEFAULT CHARACTER SET utf8; \nCREATE USER 'scm'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; \nGRANT ALL PRIVILEGES ON scm.* TO 'scm'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; \nGRANT ALL PRIVILEGES ON *.* TO 'scm'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\nCREATE DATABASE amon DEFAULT CHARACTER SET utf8; CREATE USER 'amon'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON amon.* TO 'amon'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON *.* TO 'amon'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\nCREATE DATABASE hive DEFAULT CHARACTER SET utf8; CREATE USER 'hive'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON hive.* TO 'hive'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON *.* TO 'hive'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\nCREATE DATABASE hue DEFAULT CHARACTER SET utf8; CREATE USER 'hue'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON hue.* TO 'hue'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON *.* TO 'hue'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\nCREATE DATABASE oozie DEFAULT CHARACTER SET utf8; CREATE USER 'oozie'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON oozie.* TO 'oozie'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\nCREATE DATABASE sentry DEFAULT CHARACTER SET utf8; CREATE USER 'sentry'@'%'IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON sentry.* TO 'sentry'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>'; GRANT ALL PRIVILEGES ON *.* TO 'sentry'@'%' IDENTIFIED BY 'ER62-fP()hs1OoFW>' WITH GRANT OPTION;\n\n## 刷新mysql的权限列表 \nFLUSH PRIVILEGES;\n\n## 查看用户\n##设置密码等级\n#密码强度设为最低等级\nset global validate_password_policy=0; \n#密码允许最小长度为2\nset global validate_password_length=2; \nset global validate_password_number_count=0; \n\n#更新授权表，生效\nflush privileges;                      \n\n```\n\n### 创建本地YUM仓库\n\n``` bash\n##安装createrepo包\nyum install -y createrepo\n\ncd /root/cloudera_install/cm6.3.1\ncreaterepo . \n cd /root/cloudera_install/cdh6.3.2\ncreaterepo . \n\n## 创建/var/www/html 地址\nmkdir -p /var/www/html\n\n## 修改cdh6.3.2中的校验文件\nCDH-6.3.2-1.cdh6.3.2.p0.1605554-el6.parcel.sha256 CDH-6.3.2-1.cdh6.3.2.p0.1605554- el6.parcel.sha\n##移动文件至/var/www/html\nmv cdh6.3.2 /var/www/html\nmv cm6.3.1 /var/www/html\n#安装httpd服务 \nyum install -y httpd \n#启动httpd服务 \nsystemctl start httpd \n#设置httpd服务开机启动 \nsystemctl enable httpd \n#查看httpd服务是否启动\n ps -ef | grep httpd\n\nvim /etc/yum.repos.d/os.repo\n\n#以下为文件内容 \n[osrepo] name=os_repo \nbaseurl=http://hadoop01.baicdt.com/cm6.3.1 \nenabled=true \ngpgcheck=false\n\npscp -h host.txt  /etc/yum.repos.d/os.repo /etc/yum.repos.d/\n\nyum repolist\n\nvim /etc/httpd/conf/httpd.conf \n#在<IfModule mime_module>中修改以下内容 #把第284行的 \nAddType application/x-gzip .gz .tgz \n修改为: AddType application/x-gzip .gz .tgz .parcel\n#重启httpd服务\nsystemctl restart httpd\n\n```\n\n### 所有服务器安装jdk\n\n```\n\npssh -h host.txt \" yum install -y oracle-j2sdk1.8-1.8.0+update181-1.x86_64\"\n\n```\n\n### 配置jdk的环境变量\n\n```\n\nvim /etc/profile\n\nexport JAVA_HOME=/usr/java/jdk1.8.0_181-cloudera \nexport CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar export PATH=:$JAVA_HOME/bin:$PATH\n\npscp -h host.txt /etc/profile /etc\n\npssh -h host.txt  \"source /etc/profile\"\n\n```\n\n### 添加mysql驱动包\n\n```\nmkdir -p /usr/share/java \nmv /root/cloudera_install/mysql-connector-java-5.1.46.jar /usr/share/java/ \ncd /usr/share/java/ \nmv mysql-connector-java-5.1.46.jar mysql-connector-java.jar\n\npssh -h host2.txt \"mkdir -p  /usr/share/java \"\npscp -h host2.txt /usr/share/java/mysql-connector-java.jar /usr/share/java/\n\n```\n\n## Cloudera Manager部署\n### 安装CM server及agent\n\n```\n#安装python27，解决安装过程中Hue无法访问数据库问题\npssh -h host.txt  \"yum install -y centos-release-scl \"\npssh -h host.txt \"yum install -y python27 python27-devel\"\n## server安装\nyum install -y cloudera-manager-server cloudera-manager-daemons cloudera-manager-agent\n## 安装agent and damons\npssh -h host.txt \"yum -y install cloudera-manager-daemons\"\npssh -h host.txt \"yum -y install cloudera-manager-agent\"\npssh -h host2.txt yum -y install cloudera-manager-daemons\npssh -h host2.txt yum -y install cloudera-manager-agent\n\n```\n\n#### 所有节点修改agent配置\n\n```\nvim /etc/cloudera-scm-agent/config.ini \n#修改文件中server_host的属性值 \nserver_host=scm-server\n\n\npscp -h host2.txt /etc/cloudera-scm-agent/config.ini /etc/cloudera-scm-agent/\n\n```\n\n#### 初始化scm数据库\n\n```\n/opt/cloudera/cm/schema/scm_prepare_database.sh mysql scm scm ER62-fP()hs1OoFW>\n\n添加mysql驱动包\npscp -h host2.txt /usr/share/java/mysql-connector-java.jar  /opt/cloudera/cm/lib\n\n```\n\n#### 启动CM server及agent\n\n```\n#hadoop01主节点启动CM  server \nsystemctl start cloudera-scm-server\n\n#启动日志目录为\n/var/log/cloudera-scm-server/ cd /var/log/cloudera-scm-server/ \ntail cloudera-scm-server.log\n\n#所有节点启动CM agent \n\nsystemctl start cloudera-scm-agent\n```\n\n### 重启 scm服务\n\nsystemctl restart cloudera-scm-server\n\npssh -h host.txt  \"systemctl restart cloudera-scm-agent  \"\n\nQ:这里有出现了agent安装失败的情况\nA:分析日志基本可知,是agent和server服务启动时,运行的监听问题.解决思路是对/etc/hosts文件进行处理\n![2021-04-26-11-41-22](http://img.wqkenqing.ren/2021-04-26-11-41-22.png)\n事实证明确实如此。\n后续2:\n在运维同事进行处理后,又在/etc/hosts 文件里添加了新的内容。\n\n\npssh -h host.txt 'mkdir -p /data/colony/hdfs'\n\n### elasticearch 集中安装\n1. 将es的parcel包移动到/var/www/html/elasticearch中\n2. 在parcel配置页面添加es镜像的添加地址: http://server/elasticsearch\n3. 在parcel页面刷新,直至elasticearch栏加载出来,点击下载,分配.\n4. 分配完成后,点击激活,这一步常是要退出分配页面,重新点击.\n5. 激活完成后一般就可以安装elasticsearch了.按CDH安装其它主机一样,进行安装\n6. 安装时elasticearch的配置内容一般不可能更改,这里要elastiscearch安装完成后再进行配置.\n要配置的内容主要有如下图\n![2021-04-28-14-36-25](http://img.wqkenqing.ren/2021-04-28-14-36-25.png)\n#### es内存设置\n\n```\n-Xms8g\n-Xmx8g\n```\n两个参数要设置成一样大,不然会有报错。\n\n\nelasticearch.yml添加监听配置\n\n```\naction.destructive_requires_name: true\naction.auto_create_index: .security,.monitoring*,.watches,.triggered_watches,.watcher-history*\nxpack.monitoring.enabled: true\nxpack.graph.enabled: false\nxpack.watcher.enabled: false\nxpack.ml.enabled: false\n```\n\n\n\n\n### kibana部署\n\n#### docker-compose.yml\n\n```yml\nversion: '2.4'\nservices:\n  kibana:\n   image: kibana:7.9.0\n   container_name: kibana\n   restart: always\n   volumes:\n       - ./config:/usr/share/kibana/config\n   network_mode: host\n\n```\n\n### sentry 鉴权\n\n### clickhouse集群\n\n\n\n#### 部署单机版\n1. 先查看支不支持sse4指令集\ngrep -q sse4_2 /proc/cpuinfo && echo “SSE 4.2 supported” || echo “SSE 4.2 not supported.\n![2021-04-28-17-34-28](http://img.wqkenqing.ren/2021-04-28-17-34-28.png)\n现有服务器不支持sse4。在此种情况下，先安装一个集群试用\n\n\n2. \n\npssh -h ck.txt \"yum install -y yum-utils\"\npssh -h ck.txt \"rpm --import https://repo.clickhouse.tech/CLICKHOUSE-KEY.GPG\"\npssh -h ck.txt \"yum-config-manager --add-repo https://repo.clickhouse.tech/rpm/stable/x86_64\"\npssh -h ck.txt \"yum install -y clickhouse-server clickhouse-client\"\n\n3. \n启动server\n\nsystemctl start clickhouse-server\n\npssh -h ck.txt \"systemctl start clickhouse-server\"\n\n4. 修改config.xml\n\n修改以下几个参数\n```\n    <path>/var/lib/clickhouse/</path>\n    <tmp_path>/var/lib/clickhouse/tmp/</tmp_path>\n    <user_files_path>/var/lib/clickhouse/user_files/</user_files_path>\n\n    全局替换\n    /var/lib ===> /data/colony/\n    /var/log ===> /data/colony/log\n    \n```\n\n## flink手动安装\n\n复制flink至其它节点\npscp -h host2.txt flink-1.12.4-bin-scala_2.11.tgz ~\n解压flink压缩包\npssh -h host2.txt \"tar -zxvf ~/flink-1.12.4-bin-scala_2.11.tgz\"\n\n安装scala环境\npscp  -r  -h host2.txt scala-2.11.8 ~/\n\n\n复制 flink包至所有节点\n\npscp -h hos t.txt  /root/upload/flink-shaded-hadoop-2-uber-3.0.0-cdh6.2.0-7.0.jar   /opt/cloudera/parcels/FLINK/lib\n\ndemo 示例\n\npscp -h hos t.txt  /root/upload/flink-shaded-hadoop-2-uber-3.0.0-cdh6.2.0-7.0.jar   /opt/cloudera/parcels/FLINK/lib\n","slug":"王阁/工作/旸谷数据中心/基础/CDH基础环境部署","published":1,"updated":"2023-02-23T02:51:20.903Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqseb001qu6pw7afud8le","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"e5e33b5621db20eb5de883557688d5a020ab058ec49346a9797623e3dd7d848d\">edd8afdf4667b8f9e926b90c6c83788d255817a6bc0538177c55f5e7b97162bac3277dc4fdc4289df2be7e5084fd59183b6571f3ebbb4d125d825056272e8d0c63873be0d67b16ad7c9399e404710e19884590ea3a5426b97520915b01ce1f926eeb3de2e8a3dc0ba07491b1ee70cee54eb39c744e23b54f16e0c05f7b7ac56e92db31278785642e7eb06b66a646eae6f6b08466a7f03721ca53f7f366c1bf65bc0da72d5334b5e6367c761d23044ab584f9906a08da39459522c49177ae54b35b11c95b383313c1fa8c22b2367701257789d5de1b0a3040dc7357f75085343304177feac8b2a42d13d4bac22cab2f060cb7d2d1ad46f37e95ad1fd5ca51bff5e032c0b5ba7286629969e5dd8badf0602a36e35586baf29cc9583d2877549684cb484a000ea7f3ae60333ba4e28674ece5fa9757c4ddfbfa1113d1c7eec5a09f79aecf9d2315d6f65d7aae4d462f91e3634ba78b5113bc2a73e55b7983418b3c0f3ac9b4d283c7ae258b984b71a10a18bc9d6a1a642c622a22c13b2a3ab28a61b23b2d9f67c82f0fdbb112ff8d2bf7a670239ec1162d00edfa48376c85f3360b67442e4b8490713963ad2ac622a3266fa5e91b06df1eaab718bd38ee740c132b473e13da93758dee393f29eeb4334730138f0be0d265616f451b156a2250e7c74ac7a4b22fe276ec4612250444304b3e7fbcfca4fbb767c3b9eec54071ab46d568dcf7de96d2d48928be66b1ef3d3e3f28e05a2f9fb5c12815ed42e4d1551f3ed837205fcb18bd4b355ab52f78e86f1cf763501f66ff09adc3282d72605f71d44c761a36d3236f34e45851d75806be254039006b0398144a37f21b5d9b94ae7bb4da59e531aa8c4cc2ab2818b650ac77ff6f0936725eedbddf69e6094ee035e96722e9a4635f20486cea4f7e2f8f7bfebe84db760d465470a5dd22ce3055f4520cc6cd2826d2c0cf7383135206a4df662540949f60d95e86b838532256706e8e40edf17a99b86b18c9b8209eaf682c371014bebcdcd47f80ae04bffdc3b3ee1296ef1ab98aea5d7f1600a7005c72d5d9c77ab17c2f6ab3c822fd0824ec10a90f50294f0de168cf4d02cd5f770e3877268f2dab51da19e663dd61a9287dda2a38e825d69d45738df6e030a49abc63cac90b7b27d49f68848c6908eec657701b5b7867d4d4fb04c04340cd502b003e9a356a671d951f678851205ce27562c606701834e143ded4b4fc7a149bd86b5ae6c68d86fda1c8cb51af8adb10157161b06a489a3f6866adae9be98fc756d0ea10446f1d0c524b4b645574597e1df3a06af7f8e31fd2a93369152ae70c7cf377842fab63399cd482e3b90fca53886577bf22ca462558fb98ace9146f1116b89d9b17bbd23a73e226b3fa7eec3ebada1e0a52eac92c8a69a15b5aac947909b85b7b394088c530448d1772371c8013f943862d0643817da83dde8708813e7a1da83f64133367a43e18235d94e2cf160e17b863eafc7a5b237e45338ef8aba60c2e29b888d4e1d1b9c7c12641ca9697ba2a5fe21451328612d84c32aca08a8bc978098be8342081fa8ee6e93ec0d2d627a94a2c722e5a75cbbb493aeb87dc93fdc61a0e1ae2ef240c8159a5918b295bb8cb8145f1223751bb458061b65419c9967bf62a7c1b3cb30be9d27e7175788b690b8e2fca28a8d19ab62dd13c38a11a8ea873fc4857ad4e711e0eb0daa6dc6a0d83ffd14c81f8e3c6cbfab489dbe20b9ccb3dfbad768796a2b3e71d1e9e96d0c718d0ca399a54ccd96dea8a49daf25c1832aaf4e163291f7055f9ae7a81e17c778df39979a6395d00cb58eda393edd1834458677082f4bcdada009b29032377940fd2ffa3b13ed6e520ca8fd9da91c6556a9e2cd6f3f2f74a0104b9ba04d73ccce664f33fa932d32842f7118360006bb22995cd6f19ecb72da19794e6f8b80bd8b876c63cc138526ea1f64abaaa0062a5f7bcd71d7a4fe7b615c9f2dc2952806d68f4812aa60a2b28c74f188b3cfcade9c388b989c7c6b04579dced735ef08aa6a9ad4542072e2ebc5f54af2675fe7ffe13d8d2fb5be7121477ee661e0ba469b6fc17be6d0dbdb03104936f7808062ca0f1e753a172393b236ae79fadf9447b8cca2eb2d1cd7e69086201f62f0bc3c17756ac45bf191fc2f77aed074b010171f9f42a29b466931f268a692aecdfd8f2903c7dd8c36cd3e92b74066f67c906b67641f9110584bfc4b115bae7c19a21790bab74a4906f89b8da7b576faa8f7c71ba2daed21ac22a5778e53a1cc19d0cd08d64099b52fd004b0f3772b317c854d07e51c303a5ea4cad16b0bc2bf1f134474ae9fc852d6792e33851bee6e9185888401f4fb7bbfeac52b6d3e934e68490126e1d1a2ee262be43d61372f8c06ed5a0c687b2d9c2abc738993832af4ce60864d84b1136efe634ba25e9a0eadcbaa127b60d1613c7651ec23cb9ecdb0cd72cfeebe7cf5caa39f0a772f78aae03c34a1f1fec696d439927064b41496326e0667840422fc525a02d60fd1b73d5450da11dba1d3ed029257af172d0aafe29cb2cd8fd6264b155a7bb9e4d5070637e666fc960ef95d702658e4ef9279a72c78e79359ce1edb1f75fc244bb9df86dc8dc44c4b121e96d826baec941fd3e69e93a64451b0d01bba854e878b01fc2285d216a47ab37f57ebd1aa682908e94060c066214bf3fcfa353d75f388f42b62bde55e2227de4765b0cf1989c2bc795e237c4ee4039b70d1b469f262609e629f9bfb8ca27cce6f36ea37924755878a550e2ef5d2229cf432b91122c4487a0a07ed503e2d87e1e9c364eaae327c3662272d335287b71bc99817d43bcebd12b202f902f3ba88fb8260aba6cbef21a5870c070cddf80f15ddb0ea376594face7535f550bacf1c6a008958584d547ec0b28770f6b390baffa651e89e922754ead45558463e21507152154ef2a3f42cbcd89d0e14338be3def85064c9342da9250641450c2d891c52d7fd0c1f73e4c0367af46fe1e777227d3a094b8658700bb78d559dbbb3229a5d9225a3d04136f7daaf8408d08f63342fb6071be6483d112ffcef6feb79e7b2c051e8dca5311bef31705460480032253df5467631765c847960e118078c47e209c8e30941d79b1c475a379dfb647cc835dca6087e50a8726125a5a1eb0ad93b32930f974bc244a29a35e2578a9d6869530bdf3256de6fed532bf9ed7bbaa1c3f8c5257d41033ce37b2142c7204171d49d5363fefa66565b46ed5374274b914814a39a1336729d8a7ee26eaf317afa23e0c68c052b471cec44ae70c20d5c4b50c5097858d46eea735fe1c6203a2fa2d78f1c8be1369153811d3c82c6ad169a2f0f71f4e5ba482b851458c61dbb2ef88cd386ed72c5ae9d26ed6452fc7b870680636c9baa21c08e32e8c68d6944cf23e697fbb0d9108420873aa55f0eb23d5619da8fd695fa7f72d70f47aa53d0e01422c73905afe449e91d12fc0b28766b6f4f3723106e866d3f120ea85e7a344ca9db7746d3a10cb73e7397d75fd7748cb92025ab1eea3b0548cd4f421563ea24e951e3e86b2cfa2ba87a16b271473c0b3b046a708489cf3eae1d877b36006c4600b04199cd6b561a523f7fe6ceac4d51eea0927bfa3d9e285c96dfbd1cd970df24f59b273f5968abd03d67eb81fc8aa3b22beebc2f6e9b6adcd4332254f5fceb2ae320b0d6a691ae38ac65ec44b6e8231c90017ffef35fb2bb45aeed81f47104265756ace00451737417b9b7f1e7e18da5634f36754ae9e87b8d55212b5b173627c44a5b453fb953005470064f6e548c9f516404454182ba66ff331fe596ab3e284b5483672e72ddbd8d208e16bbb7a840959acdcdf8afcb844a3707cb1445e13ef6077dd9fddcfa4dcd1581dc4d5166fb2e16ed63add00dec017721caec66a9db847509f49dbe163889aef6aa66c1efaab7fc2c0906f85282ee3cf5afd854d5007841ef58a48d05e020fc7b4f83632d790013e67624379595f80a6e5f23ae62acc434ad4f566ded85f3e1ee445a047040cad6dd8d50a5e343c6c3f5778cd6c4fa9da717cff45280b016b530ec2d003388dbd5645ebeb032495a49f5196b19738afa138426ea3243435bd30f04c6f49d088bb8cd9547933fbead3f6034eee91f6b70b729d474765e022da6a9b3e3bb5f246502c546c4bda27b9c800e9a04595532032c7fe7ba8aeddaa147699e1c5dade408622b508eeda498196c17f26e7c033188d2b639677ec0c54c0894094d1b83e2663b6d2d85b233e3e679b121b16911a0269adb152f71519007c9681f1e59b080f9844ed7178833038ef45db5ffe298931e3630c6a149759a49ff29c6a9c8febe0ce9a37b60f53f375daff14a35b508d3e0b7fa501d3765e6a58fc3be5a9ccd12d234654e45a2672ecd5b656f77ea2a68a5b34cd6b12983482caa50b23d3964689e41f2479ad99cc4f049f9c6faf0a55d27e40243bda2d5ecafd88c1000e685d57beed0d152b73c577b6dbe3e52402d4013d0465417274640db49f6285cb891a6c5ec986faf2bc7b711ae4098073dce871fd476217f30fa8f94cb3ab41791ffcba2b290789c2cb52bfb01e62cc5ae2a8bc1390da28b579d2f48f9b71ca45a5b22ea0ff8e6775d020e3305f7eeb0c2516bf4f24015afda395b7a62ee514ff9cb69e629ce4d112f903108524bc6908ccf65f2ca42437868a6907b7dcd1fbcff43e466fce8a9538f036462777ea59deb1b5f752b1f2ff080cb129252379348e0d6639245c9c3dcd5ed6e120a3a22c7d02623539e54c55cbfa7266748dc6fd1264fcb6a0e0f009df1cd9fe2f8a033cf5d09b94d2e95a59640765b7161e448e65a51a2fc30ca7178664f4c459e37bf4db62e12e415b1f91b57b5858a3918514cb8edb8ce253d72a4160aedfcf462edbf933a1a04b66c2d3c187ff6d51545f04192adbadcf0f1bfa48323522c1e8e5b93f9820b38987f9f076305172be32468ba9c2337a2d5f476e879cfb6bba3600413b3d42709badd71713545324d225c50df397715250d8d904dc15634c187fe97d22fa2328b9be74fd2ff04c750403c5525eaddbdc1ee4253ef45ef8c9ae6fa4af748e97b51e866ef13f20949b80ee162bdda1afe0a55ce7df32477abeb2753fa3cafc75258c15cfb929561f6134f541109dd7a97196ddb262423d6a0f0ae7a4fad122afb27454437324e0f2838e817303f99ef36fdc80c845c33c2c1f426cdee97d540a14bdf2330fe3ff83559a95dcae709be119274a8039ad4bba0bb2109008d7c87550ba1a4fe211e6dd1648c34cc374c67063cb56b7470538041f4386f301cc25cff3803ad08093d795aa0977a838a01f4d00ac78e4707fcbcad033e3addee72b9c8f1b7d12476bab615db7b4d575b655cb8ab25a841a22af4694a041d71b1508fa0df961cbd77f239d4cfe4f8448b4ea6dca3eb7f5582fa9186011426e8e56429da3fec680c195017df652ccf4552ce46b74830e83c89b1a026b1147a361e5c72af3103ed162009510637847d5304800c510f9ba3ff3ec6f3ec8b96000af03a52a7e89739176a6e887ea2201305d5a8ab3282e591c8ec0fb735c8ebd3ada5ca70b7f8994657a313cc6c2e1731044256885c6cacc891ff946863d03f6c2d911a3d0bb0a6caa66b5369cd07a0d6e85f2ae064b309488c9085ae923c06b71b05b827fba2d6598f126b0a96ee05fa559c9c52449cf8e2e1a33892bdabe070be877d49d96291ed81eeb401b881c0142786034a7a22ecd437144c90227675e73703362526d3359d1c66e872b03648a44fbff2212a04a2649198eaf1a50816998b50ed7703f0089669856b5eeb40df9b7e094b73939bee7aeaab9bea988d47912d8a84de10b50701c1cf884f75ff1edfa8fb5ec31032137a07c716ad5fd514f9adcf17fbacc7843fa45d493376cb9e8742073aa978d08fb6be5a544fcdf6919838141dac095f0666f8a9a4296a08f6322a20b8e6ee94ce1e51ba8097258c945796be44a49db7fbe54acc59bfd8d6aec051a7d0190a0b53ec5b1804cb2780ed1a17f7c236b0eca8e228618311f786992836cf6819cb3a7bea6c6df667d3ec5e81bd256604a722824e7e3dc01cbb92e5857d1bc36fecfad84f6b9dd870d64980506c0ce7d5497532c342bff6ccf825ee0edb30e4dea6251882f4e2f092209cd40317abad9b4cc5542e1cb4c8c1281721697b73e5d2c14a34944e79c59a4f451f1a42f7a97f355ab45ff35d05a95518138687de5e84707d8a4c188f7cf6d666aa895d8c7e52a0e0ec593a92e6c2db298f101c92b6dfaab988c7d773e23752c258d49275b7b90363eba61a9ceb54094dca0b0050d990a90835382e2bc3caf7a99a7f6650afac68824869e4d1af5ddd17a35f745508a7202ecac9cd88c31b7d5d095a67636be1b37b33c81ec7183658713af0353f81656e9bd1e6bc64b953fbd4bd663a0419a3963370c30e01389f7f5c98284d535b366790646ce61fa4f79ef4c8d15b3052d9afb96ba46cafb477c7e02ea9d39c62e86b6c668680190bd8e6796616fa17e5703ec63f64949118f01427c5debac345c769ef47949cd8fab825df7c4383753096913878e544dcb54358053a785bdd0fb6c1d2687a11449f60779d5e18558e563cc831ebdc90334684de782382971edfbfa75ed261091994ef780619a94df7b0b123ebaa9c311de80ff240fb5b2bdb82a576c3d8c50df857b1d0f2ac83a3b6a364a38a9727e22071465392024ec00faffe44b1c11e815ca7b8bd99e81c3f4773fa9a783a1adad524c861f1e2556c469457bc103a234f949dc16bb7b55dd920b65b208906cb0ee567ca6aa81aa11fe9d9210c222cc580683855279d322de619eec33adc25ea7adf09643d13ba19f8662d18f706d77506f377e5b19f9a4ae4f975413164d1b54b59b7b95a80b5a93feb3df4ad1b6837f21a2187a502332964601c9ba7ac96e2ca59441e34324ae4a8fe93d06048fc26320d1664bebf515845c2ed3317e1acfa27d0171db3c6f802e938d70477e2ce9c8031a24f731eded84f180a3acd337605e489d02bafd970333934dd7c09af58c3d35592f1b81ce572a073892e9b4d39416ebbb5d42373005eef0984f23694a1b8ac1737ad644c541fbdcc983eb1aca48a34832b2004673d1ff5af4b605c95749e3d37f9c08d6c45c7b5d9d80f7a73f9f8a9e0dbb164439c7dfffeb98ee473b3acc6948ba897e8845854b10ff450795367ac003909a7379ccf21e8a67b88c8b68ea7344411729cccdbe93c6c264a7899f7af418993586a59d8bb2a4aed777eef587bb27a73d542b7a5b6b0ec203323ee7c01fedda22e3ec23038cdddbc9963a0221f027dd7229bf164c3db62f995ddb349df323b4c1119622f62b1d36d0573c4747ba090a64d4268809c62f269bfa615bded34e0e79254735babed64c5b3fd8bf6b12f76d95d3e4b481a6a16c205d865e193a66885435ccaeeca2cfc7228c2b3bc321106994076d1c58e6fd545caf0d36ded0dd159e90e7a3a54a9299179ce8b2484051e457707cb52df582f799ab7960abc3ff3ff33de69ec0c1233d72def6324e3951daf918397e7007aa776b463aa6049324175ed6bd64309cd753254033162d7b5489c91877c4ee270823c7f6a3fc58598b6eee3243ebb563080764c63518c0133522f972aaefb617a858fa213689fc689a469cb7dfde68f8e8e0aaf785b438c7e95d3a815d5771a0e3313a74dc12f259c969efdd42c42f5c2ea05bf4a939491619f34f10637bb86a05e08cd8c6cdefc7628350cf31d9a2fd7f69e88c9a8b443b1f8a2c79c4c8e032b413d0e7c184f651bafd5048a40bf09fb4e86de75c3f3ac48397e7883850f2e85fafcb055aa3152e792be3fc16ad2d7ddcfb2dd5bf2d5774ab2471be258c5d80667bb9c9c3bbb95c7bc3cbaf229b06b1b2e65305ea1524fc7cff2a32cc379603cafd608a323d6637533cef6f37c5d4ec6ea3fa611aaeaaf9f8068d7ef47470af7481ef24f7d4f96ae447403048f1b733bdaf12edeab72e939b60c6f327a4aeb3ae91e55f35bb83c110e056f122e8bd3ec75107261cfb6b1a1bf6f54346d82faafe094a3961e415a2e16df0fc4dee9d179e834892a9ac668b188312d2df827574dc4a87c86d82a668ca86708596bc605ee9745511c0701076b93f3d3ba344b732a89e4d2f1b5792bc5ac67fb364b36b19d3790a793d0fcc1a415686fcf612453e1d147e48ad6eeb218279c1e378c6b467184cc8f21a58a0ed5fd7542572fd36afa8c5af794a818f2c3ef369da58085b8331d908812501cba9ec9c5eeab1d4b8bea525eddd06387a64151ec5f951b157ebb225e99930b759f558661c35ea8dec62fd97de58a1a049c82303569f0cb5a665ca8628ee837fda8ced951d72c066da434a9e6b9c58c3fc39af62a380c62d3db59103806315800d8aec3bfd196abb14937a1311760704f8d3dad10687db51f6e2c45d61441e29ec72aa1d4ee3f928087accf5355d081a76116aa687d6a9df47e1b344d302a1ea5b2d3faaa3fdfcdc12745681bb88c43c188fc21400242afbee1907d6d4fb09e05fc963e07d17ce1f5eb38e35b0086022829f9342cf5ece296950243995b8f576fe9636c1a43f569119794af2b1db6af885c13aeaa035dd947e41291858caf566ba1f6499f7c06ae7f2c337896e97d3f51590ba59d5524b6e6ded9b1f06be1ffe448e3fbdf6bcd32025e8ec0afb658f965fa566554f8fc90c05801c78769db6700ab5adbf1ca149975d1ffe68b033ecd6ecd410ee97ddae81c2684bf508d9c8aadaf0fc905e61b442a4548e6eafc468319a6060a9d01e8153e4a9a7c615c7c9af4b20ff0aa3d44b2ef5117130d101212b7ba020e808d5975ae9f08b028fae36ab8ef6157acd930e1ef40cc6eb9cb130ff72c1175b61652ed7f2b8fd5b8073f127208d3ac4e36388bb39a7c66361beb8624402fce2f402106ae6feadeafefe3c5de4a0234ee22b57b6cb3f71652e42f27ea287e91c48df0c89d15bd63080c407514c88297bc1d35c0f3a4f4c0e5e359e72db4aa10ba83bd192b8883653ccdfee723ce59d138a4aa30c5e46b09d4188014f23dcf8e2b3ff14f1d080f7c1332d41ede30dd96f985c1e809440157bc896a03f45e636a358175abd53fd583902086e547f24ed91c8e55a35782cfb8f5dc55e0446eb444e627bd0a30921ba97117e543a9b294c434b9f476b9224702d41c4678d03e01e7139c7dfbeacb113d19f4f4b91e452d0aceebe45dea5154bddfacf4492f7aa93e68d59c91c9992950334ceb619db61d01d71352264984de1f838d99cbe9f32005bc02388aa30d7724ec43ba3bd7ab96a8fbf3a02d0bbc4825c9c32dc23d3cee188c592548cf956160f8ccadd6b71a7dfb6a888fdd181877fe1ec3f4d0458f3a8ba31ac413d405cc332effa66733fe7ef17aba83c0c28945d26e32b226838b6593f5968cd2d6ca2f4ad5d4cd20964d9dd84f6cbe3b59f4e8b13ee1a34b1740d1166f0e8de6d83612179453fe342e94e314615b80ec84846fb25cb4dc5ae2ad7f1703c4162c741aa7daccb1b60e452e12ed5ba8c48908274aaccaa27a9bdf53b8bc0309548a14fdae45c206fd605d44823623bb50fb98304e27c49a3ddd926d40fb136c9dfd28b466a4781edacca0ef7192647bb27b7ed9ac6fd6c6f096c14970828d740fc2376f351bd96c9acbfe4b2c0288361080b03a73524605410b9be4a6b47978cd6cdfb9dae76a1f3a0b313a7667b60217a83f3a34528b92dc0704a51b1853587d604a91e0e431312a5edf22048983a3398faa78feb1b4f18c24a6d3cf0faab7e47b0ff90c0b6e09eb4a56af011efe72ed4baaaa3b5d3df3b99b15904d7efa5a4c7fe446cd98c2c3dba1c64d3c5c3cc584c8fff2958fecf5d92a6bd7212a6a2c3b839c991f295ba3314f98606a385fe72c35dbff567c8ec0450658f43f4939077c97e509bffb4f2fb56a37a1296b9e4271b9ee5f613d70fc7eeb5aab850a3509e53875e25b218f3b4c3cf00c94a1a20271fbb961f199440de43606eea1be3390cff3085eec3c8d84ba77fdefee6b93986e61c8b2e4bf0f4c8b55e0c1a74b2593b9d363bd64c8b8402184e06f49a01641aecab750043209315b18c61d27a7a599484faeaf9b440167e6bf29fa26776cee751d4040f4c024e6ecc16507c6d7784f6d5d5bf6b64028ba502fe3716c92c3459b63e21c5c9d14af2012818a361297defaa45218e07fb78dc6035d25c9c2f3cfccf8492ddb1de61047028cd941ea63cdb81bb719a615598d06d4587ac4dede7df9540702b135341dc7d6e031200409d95f9e93f50cd1260162bb5f9cf82ed8ed9ad5792b18a0615787768eda88a94dfff132311bf48c9c0762d0722fa01ce1b472811045df2c0a7020ffe8cad38f377d8019ae68e962c01585e09fe5ccec61412c93ad0e7e6654350a641a4840395f52f7d0c7ba374c12d385448c495c0dacd80e9f177be8e67e967bb06910095684446a423f941480d7717044951cde8327a0782a16c0827b4a32b31c05d3292a53c11e6a9ae567fb3d69f58496f4882173b19a897f38c5567933677996956cf8b176330b53bf944e0b09e799fc7070fcb34d30848ffa8940c7a8b63fff01a0e0964b591661e45d472116680ae612f75d2e4b32640df61c4ab8070b9784fb259bfacf114412714585d06bd4f7aef450335a1084049b8495d74c0db254717436bb1836915de0b20b1bca17bc3b9b9bd39dffee9d2dc7e005158d7ba70e5ec34e65e7521f937400bee0afce9298b2fa374dcd65cb3a26912d4bd3ebe5084218a0f9cd3cf2c46de6c9abeed4fb00d2fc929270b04345efc9a13cc931b0a0d00271fc4d83b895a0873320fa79d9094c165d8836286d10bf9364e8cdd7dd69000239bb011d10a92ac310aeb15c4c1b67a75d4c0f14904600f47065161405adc8a71506300993cbad982ac9adeb3b64cc005d859155bcb74006cbf188afc9114519fbe64902b2f9922892c8c86d58d1bd141ba8971c3050210c3fa2367b6ca221f3243965d24755eebc7a35209aaf52a1e30603ac1450b5a06cb15ffee665902ce089ab33cf666bce9da5f311694962e149ba30a3ec0b91fb6f03fc52750f3208ed838c6dd5cd67b98485a060e61853fb42704497d8e121842801f34e34ec9a587fb3cf1db9a680eadf33d92a75dc7b874fa1c5110c30f9ba6074f9c419652e487afac12c85311eda1af9d6ed80a39df7bd728625e7b718d4e00095247d0f5649f439f65560a09be84921d520c3ac8da386c11e85a3e1ed4fd380dcdfef5d69f77a54d2ea09fda153244eb7494df296ae9805472f6185ce0f5903544c83ff4aa311d122a834b1da4a8bc48d06e2790fcb89367928dfe2bcdcddd7d85d078bd89388140f1554ba0f10bd9921413c61954ae591417ec5128e8ad3f1cf405c7895388ced4ceef69379df7b20bbe23b38aee40beef0f109b3cf89e67a8a9579ca9178a42a2a3c2ee2641ba80c547812cfd8d568bb1fd96a6a1faadbb33dd0e092d1543fdf209a42122dfb2e7f6975776c5a5ce9f0e422fcfb6e4587ec22d572687f26fba81a8a518f7be3bcd5af388df5e2a216cec124328dcf645d0bf3c98d599e6a3d5363ec43b35ca8462030ec7807c795b3b4f2c1b3ed01cca03e01050863efbe9f02f577788022a3bab6afea5c4a7ca807b2307975c1d758610f44a9872d62b0c0af5b5bd2dafef822e0b51c92dac140ece039b6083bb84bed06c860a836bc114c34661ba57d3f3655a58d240b3908f567248599b8cf75d24c856d1a29eafb9a70d4df784f511088bb2b5986cc9f818cec10b5b7b63d90738964e1b514fa4348945fede5e517ada35498c33ec282c5970fad882daf5fb14699e268705eb09c7a539c4b85e55b9ae293b05fc1c1ac144ef3a38f47fed798472556a8c24fe8d9262de7c346e4aea49db18f084a3763b56df102ce2073aa7033bcd5a0926e1d9b0713320641f4978cd982dca219dde72cd1e8863778db2d436def71bf987eaa3138211b633001ae6edcff2f0cb38b9d08afe0807439ec2df31e0eb4738af84bc3df83eabae1c578cd483a4eae38b8b702934dd14f49b9794a7d9df3d3591276ff2d7090d9f449515ffb05b2b05721acf2f688cca10b36e962a5e4abc8f5a5838e4059628b3be9c8b835644d0beb2ed681f9a65054ade1ef1c7c6ea22785638ecbaf688a4ca8c9832bb977444757ee556f593d56b229feef17673c7af569a4d7966da48aadbcaee2bccc0a56f85ceaf5a9ade76a93b6f258695067c66a262b8d70bbb870c9e9c2fdaa8fa4ed86892f283c6bb9ecd3f442a3cb000bc431676111ab5a2c1c0a02108525b1da547de8a233e654e3935af6c29486a0b3a1d71e8d87c0eeb3ab2550edf66e3be895ce02cc1e61aed7ba97a61cc8096ec979a506669a8cafb36ad781b5dcc574f17f3d656c214121c578400fe107cd7db69aa1c51ba8ccc2809307194ebc855a2636eb48049c907a288689b88180c360cd7f60a54cf3fe6715fca9a66dfb519286e5eaa26f84a1068fcfe3702ffd2e104696d7d7251ecc2fa605b21345c6454d96f200f2556b0bc45f750042b503b27d2803d4ea15d5b9a11459be0a4a83a9025aff59d15179016668ebc632a4ae20fcf313864df688033fa05a04121e380e5ae7fcda9ee37d571919d9842c947737796a923b9d43914d3773f17f2c37d091c57c0819fbdd95d7ce0925dbb0c436b9dab08eac088c576e93369ebfa747220326432a3b57f00284ebf3a53bd9514164f0318c4fd82894a01abc57a11adf3b1c49b5c67d9410566b1915b591a5976a5e7ea2f2c93aaed3a34ef65425c8d325eb32a87d7351ade35fff44d611c4f8f6ba7d03f1fc0f37961bb492c23a1d624b6e50fd0556a834bd8f414fd8c692cbec8fb052273de212c9212abfcf791fa4fd8fe0fbbc4883ee4829bb44072651f4660e7bd3f45aaad40f6ca4c11be3b2b7163ffac275977547a6f569585bcb57692af0b65c1db0fbe1120fa9cc5214fbce8f43c80c7345e4006d64cca898dbfe602d3ded8bc92504a2ece38a21cf30dc0be3ede6b585a39dea9c03e0396dc12397bbed656af14ada3883a54c95b17b877d434e2d64a1e03d368e8cf291260f0008050d5f403ed5ab45683a9ee6c2f516a3e354e3a1f6a39f553cdf69d40ac7bab1c9c342ec7b876c6424070eceaaec43b33f91122d719f3e5d5a292dde2014c5d123f4f4d0fe1d8fc758de5550f42b9e2dc6631c505152aa52d2c8ae9145da771f6d63a50d9647a3e6bc00e17af714126af3065c7c68131a9cd1cd233a10be85cf8701349bddd20730639a762896967801f2171ad183313927f0568145dcf025aa3ebe14cbc83529c53f93141359412c76042ae6b999d6160e7c0327a82e6a300987c4a80fd614f22f531049a348b774b6ec09f2f6fdcea88035565b9cee8e9bca190dbdbea0ef1d7e4006389cd17d527765008722c4d06462c9650e357165fcbb737452f97f6ebacf8894909bd70b2db42f4f5919a929198f6e29843deb447a9c83339ffc981a2eb3ffc5092df9eca8a34f854f87452f0c8bac55237c622299b1f20efe9113676c30d2ffd71e8693feb87c0a4472af6abb2244d1a62a1eb630cef51efd75d41a5ba7c337e004cae47090dbb13000c72ad25f2cdaef3a5f421ea74302a0f7052c1dbc3b8c8688a69006f7c665d41d2686324e17d2ad50fcb1ab0fd302ddf6fd8c187e1b2c6f6454cf07ea5d18363215d77acc4067d66a956b4ada60f226edacc8ac8a8c4129ef1caa97cd977c9823039aa53b8663242b5951be9fcf79aef69215d41b18f1d32c3137d3cfc8869883a39d1de8e9f8a08b4de94dad2d2fa1f4047723906d6e2a973f6755922d03dec8f1b3a3c84fcafdc00dfdc348a81c9df3d8bce4e3b6a7115502760192394f198db5570f0b354f94d9561e71ffe0fd2b0034c2d3914348be97027c3a6a43025ba574902d27e3d2d64c9ae0a5bb76e041747ceba22c2c8745bfc602ffbab7d4915897650ebc293e493167999332850f434a2654220bdb5f3db8ae32dd8d650adfe7578f1b665ed78c492decb633c9f96bf4c610890277e01042f797fae4dc602edda4453a547922995abd5707ee95594007d1ea7d6797c4ba5d6124b5df4d1d2b18c2af8e1252593626c3dc83f3ef9b4d0e6d1dcb621fe4490399103bad6aeb8023666615399de9351fbc5d9fdbd52ee566cce4b9f62f7366cfa2395046d8a36b5cbeb0339c69a51c8af4b9800959f22f720645ecb0c7335fdd94c853698a594395c4b880cdb3aae9ced38c6f61754dfb9f13e421aefdd2064d621d90e9b1721539656b0086f1819d913125dc1f0631402f6e752ee9b24ffe704c19e99158f214191230314a042054dcca24896cb9b5615b3b05a312c8d5bcb6c2ddc01e51bf8053ffb3af1fb49c6c65f6d7874d4c55b4c93f5171f62b7619d9fb2f47a6d59fc5b84774834acb663eb9e4e5bd0ba415b89c11211c348888297ef6c43822339d54ae57402599d6c27b1196c4de80abe966896c762a99b51a125477afddbfe52434d1e07195fe741efaddf26df2708b1c8191a4840d82e09a5c33e0ae423919ff9b57b4b3d8ad8508bfe09d46948763aff462bccf81e46e7df0228db71d2c6bc039c0f4f1662109851932b11a616386840f22ded4504a63a0ca502f8d7fe50b07d6f4edfb85fe80c1b73a07aa6f39fc0bbca2e18804cde976b9efb093fcb149f3f9af3524ca1c9939b67814e32b1a0974f59014ef7abde43337f4af9c7aaeda9a94e86d015e02ce096d83c62e1119bc5a1afe7481d9b64fe3ff723b0ab9132f9f17bb8c6665603fd8ba74dea819d6b6f37d57430b2cfc04514ab63e3e6b5ab22f4d547b2058e641878d71bd3480f7908fdac58ad39b0196e4b1ea37bb0778aeffcd6d4b62c38057829aef22d365667dece071c271b21518ea91cbedb3f4e026a4141ccc6bed699fba8a3bd50ee8e3e73647c212646552e0f6888f7817a0d14018365ffcec37cddfc3b8492346073e1350a2187516eebb362523cb96a9367834d86109fab27ec4e01a92cfe2926b72c38a080c07b67a6463e8e93bbdf8e3132091f71f8f4b9b0bd0142ce234de1aab4ec32aa84c5b1fc5a75b3664116c206a8dd6a1727dd512417da38e80e9eb37b0282abe2154e4122b7f0f938186ad5eaf30ffae37671fd99d793e6a69c64f5fca929b44a3ad26937ec9532a3f6a00916a0e84363bff98e0adc1965197525dfebe91c2124e448823108a16cee48a5be8d4f67a4d175615dc69faf3e1a9bb198800b379daae77a52144ccde3834f3b4de2db8146f6503bb22fcb31266b79409d3af344fab0454b3912bc660365cc032a0c2b9f536cfd2d8111ae410f08aa75890f6a07fe7ba372701878fb776f3e37ec913c79e72a27bdcbb790e2b597a14c8c839257cc073a7a302c457c43473c9ef5db1c36175b51eb2e054c0a15cc7a0180d5359873fa7e435ba063d27566c73e44bee3ab3f7c23b48409d8b2af221c5007db76c0af2e01c850339ee0021bdadfc4c2cf8d06985ca0853c491f96ac59b47dfbcf0f117421202c967eaa1351d00c8829f7c333f58073faaa2c99aa88191d309e46af9d2196a6270d6b8ab9d382e58d7780c621083f82bf3aaad676ad9e8336252ab10ac7f9f29776804d438e37421d89c33fde50e59be91c65f8ce4a097f8a358ed2b17924e2fd120366815dbea62142c19340de298a71354932896adc7c1c6f8a93a911b807a210495ec00644476b08982c499b9dc9f541156abb45c64ef836e608fc25beea067c4387063d7f915c6e8f5dbad84e2788edf5fec1423835b7fa7ea5874836d43890eb5a14898bf84bf392d10554c99f2d6fc8d1423cc3b7522f83df4f395457119260b34284d99b6af01fff668efcff15c0f71a7c48df6710b45b96d8f11617e46ce349b428911242d41736ba284c9f25d33ed0a31bb2a069d9fa436b07e72125c59a34ab5e553de6ee83192a9b402533277813245ec6e4bf9cac2313f1cf2608f9d8446cf53e3acc661b611a56b68dfb0703796f63c69af8916939f25ec240cc3531ad6400ee18adaefffae52e5aa21823a0908414d843116d1bd86c4f3a9ec85a43c409eb3aa42886bea487b61ac0931a7e02dc81e0f876e2572f60a5b42570a18ba880f2eb9249d977b232cba6a4f18c8a8dc27dbc9ddb4f86b0e9475e9b9c880f0ec8a252f06a4933ec3ec87da8d71704ddb3dcdb18e8fcbf65008005b6da9d18a8e2d746c6bdc167dc114a58458da024b2033abfefbe8585db856c1eaf1ee74e00e99dc03870aeddc5297492849ff17e09bf6fddb76141342546bc8d77ed21c0133c8d7261eeb7ba48122d26348026901bb671a3160a31471fadbfb17c4b0176f7bcc95fa611500c90b043dd3e49c5e9c00e4d4439689218540571b6ce91c1edeccfaa9c7f0f6e3b1ee1b31464b8a5e3c61e77c760d1cf87f274873c05ecc4ed615765382c92e96f036ba63703ed14826aff898ed228e46c0031f1d467186d21500a39403174cc96b984086991b88b2bad90ece93ee39bf711bb6de6549e1939989ae09dad2ca8b8997224966b8668e94e80f34e3600674623799325f6e4f7374e4a27e2194b7c5aca999c25df598fb624e9947c59e0ee5187c15b60de529508d1585b3a4bc4fe56b26cd9c257e2b20d1e119e7fc1c2422e29678d71b93aeba0226768f88c755ebbdd32a59075ce145aea5e6f72e17fa95c7f8f7ddd4a72861c85a652bf1d42cf50825460fa85601b194802297dc3f8cd86aced4108424b4333c7bffa6fa58eda9191628ed72b10ff7dcbb12db04c7842c72130cb7f18c85438500810054694479a5b678b2399a439361f87c55545bb122d7568df75db924f011b59c40c5b92a6f568676856acc1f8c7802063cd0c0f59de6e9f2d6ef0e29ecc6474a32bed1805598f02629fadac173bc552ab73a84a800a3d0d36e13a568b3b508e297e796a95420fe1869268b9225d11e8182baea1e77bd34c6f93a16e0ef691efb8702d2a98356098bfa088b52eac927ad4ba3eb0158c0f0e902f383b5e303e8dcf392f3a30c58161d65d8e9258c5f380743a4d7294f9711d7b24e455c8726bc0750dd5bcd08b1eca9d74063bdc436dc232763f222692668565910b188abd7adff645af03dd58b78a07839f806523b07e701bce36a32f097f52200c13f09e45b39660243b1536e33af23da08989e97c3ab406b7164e8d4e81c332480b119015400c486f62ed542081c15c27f1a4ffcef40fe32f300f24c913e843637ff3d6e6e10c6b1a6132b47ea329da73afff4ece771924501ad692507dfc33573884b1a52dfe92018e210df4108ff603508bee8bcae37e117fd31a289b412c676962c9b6d60e3fdbaf6570bb93f89ec65e42bec3fcb3ad7a079c3832aa95d519f5f316f7f02dc1a923d5dca57a135d2932c836482ed3808499ba488cbe384c574deb41a12d4ab38c01101e3bd1893c11928e47239aa83d6fdbae9b7834d890a47695e9504469903021258f5c7c7d840e40080517a77f04d54dfba03b27f9276bd1baa974620185a6f0c20b78d7867ca9c63d2a507dc61f7640f705d12092e785c8f01ded09e5e827b51bc819a0622efccd02fefc278e62696a597d858ae4055cc745c727292c96659290f011b33874cfea1b8068e790fe766e31d481019398277981b26152aa8c0036a677f90edb6c66235e547691eef86ec79ce542d0c1346b263a41bce399601497852a1ab3dd214deba29b714c5c9f822469442557c4d47025343eac3f75776ff56e5b9a0d43415fb496e1e4e22225c5acd0bff8a63a3dc5e907aa29a7e9705a92bcad6a749d36947fd77747ea163361ef8dc20375f622f4dcb79b6eccd116eaf0b498f1c44ec2427fca7a528c2da5bf7f39bee652cccebb9d393126be3ae4534b26b8ccb307c8fa6e0b2a9a2f1d90ba7fac8c0721ff255e03cee13c6e5a88b6322756ac76ba252752c285955ceb834d065822afe6d4d31fa98c2d0cbea407f895a3492271f5a77ffd88a36a4959bc78de9917e80e1228e478f78f0e67436eac70aa17680fe4dc157a9508574ad785fd0cd7c4b2fe9ab9e033dbd77527c85682d018eda625291d3f90aeb90c99a63c26bb12638b815520dd0931b8269b321af859ba050960a14fe655a7ba5ad3eacd15038020ab9cb9bddd9fd9d9b9afa2e3482ce104f4a98b20c1f8ac8d718ca3219c967489235df451cf15cbb880019bac0ce2ea574952b81245249e060634932362b76371f0d3cd8d0a7a49906ee0b33626ecc56ea74d1647a5a0cbcf4cc099c70af63989031fe2749aff1fe14d57fe2077144b04a09876e16b9bc3a3c1f42338ea643806672110e8225aa0dc7da156b51dd625a63419083b275885724f06a87bb82f116786c0c30ff7114922bb1468875e3fe87587aa01d86d1ea73db9f40fdd8cee35556abe9c1567d9dcd6057eb26944f917567c71730965226cce38e8bf770cf77a814ec71cc75871f7b284e9ddb3aeed489d0c667a88f3dda9f480a3acd04e8f6deefec4fd8d6a52a2cb22d59f055c68e67560275d7e85213ef5d578276c40766db1eae17b02e12b2ea48111e21e53b099c604f4724a5c2a54d8497a7c7a7cae5a9d8e3e382f43de2dbda2a1e81154893f5fdce73e275ade4438e340fedab7d9598470ca7004b573fbb044faabcf2938325aec9ebc1cc149e4b4df866a653bd532ea86644b45065f33a8e3da52e8ec3d3f62ba227f03c59cb7bac52969af267c42f7c85664eb954582e02588d507f33cb6df3843e6d76865c1eedee79379563ab16363fdebe224fe101be00a76007e1ffb318b4896a2590f347877fa993e1f7d64950d751df1b5103856f723de93bbd775a157eb8e9128cf243d2f9f39dc0c57f2a3865c3163b23ff7b9d144a075454bbb0864349a02f4b5372eacd57d685a0ab94164b8fb0546a84a5cb55a432b3ce2d6790c6f6235644c10928308a1762f7e048495c50f8ff6e36be46fa10df5507ebfa7b56ae8b10e08df42dc1d98d2bef6638c2b6ea953c6f5d62abf112fa689716feed49d4dd728866cc106f2aa64ec45b602f49e320e0d3e9faa435b006b05dbeb5fb5b3622539a3e2ae84bc4dbe7603e09cf19412e43f46500969eaa0a19fa371814317293b489c0dc1cd16aa78b24ec1ce6dd2e49bfffac5d2025768e2269e72c5a9715ca4ddef7c8da7be1257f1779efd0f20edce7b07c7943e0bf72378995e4eb2efa29c55284fc01e30d85a8288dd23ccdef414bfb132466224ebcf89a80e0c3a854da1214fa98f5c5efdb794d434eb0ef96d319573e64e9a8d2cbe7078db9dd4a76ea3d5533fbb6e72658e686ea9291d06734957e6864f4b66aeaad985b5b11fc42035a54e2182c029031fb071d66288e5a7d98eb240db5b7718b29711db23d6737718f626180ba0c299ee6e62cd428420ae0af729cb9a88369c4eab1a052fbdda64175e1e01cd2279b5c3d80c4831ef3947d796be8d46b9856bae9783c6efc3dd6efa230c248fba597b51839b87ea55d2c774e07d26a690fcd35e781407514b536789f682f621131c8d6c2657e40053f7cd3b7fd3e0d172c842252d04e5241fac1d8320b08a93279dc04b8e4f578bf918c9031f49941ae0d43d745824befb72548a55dbad8fa5f870aba97bd468131bf3f158b9fe57a4ef5d9067ccc1fa125592ce5259206747f9327a80a55ef2c9101b8985a78c868f60b0c00a5e54ac8c6876ba2bbc2995202dd141ebdf67fe97bbacb1f017b415099f97625fef842eb760130305b04f27f2a6cfd23fa63cec57534966acd827d02e13e4cbc5e38e3a1a3d26f431b76fd65cff0a432326af1f8163a1854d1f8bb4a1bef8113f7bc50171c4b89b08b276f7eb273731873d9c0c756717ef2859849e483ba6db50391a15053c2fbc3e656c99e87a23eab174d2e7ddcd50808055d0a37514afcf1a83d4cc70e9098d6c65f84a208698305c887b983bf40e4c8b85c79feccf3bf039dfe22c33ecc014d6600e8f8e308b103ceee98d2239c2a5cae9beb7e9d144b06e5933de2db65cd8f001664de26f8e3d27a936f22a604187f11f2ced074acd74f5940b2ec9b3f09d4c553df75d463fcb53a53acf4c8070b5c280e480f12e24fbeb6821a25ff726ccffd7392468c6a18369c3fbe8dab612dc9cbb0373aed08b581e7ac7a8bbd0cba18c6deb8698a37df0893f7090a204dce98729350e382c035d5c64cdfa6884a88667878232a412be670463fb4ba6d51022d4cf072f90054e7f2c52b40df8ec4fd24d8a4b5d194701e5bea822971e7ea90a0b7ebdb1aab3ef7f11362a3cdbe88cb6f56a52d4b8f2a8378a7b29a6fcb9f563a29bce3dd75802cff15e0c01d5865919f7868a51aa0c65bc72b95bb8fd987244f80b9ddd2616a859542f7be23a48195205bdd3b99d2211947e2f33733f98ab7a1051795a78cc1143e78e60aff3ce4ddf5cc6cdc436c2157d4a1764d8a8d05107d8720e6ff79d484496b85717fdd4ff3bc140a6f9d075284cb82284ee4d871bf5999a7ec6136498cb49a312a7f63551095be7520d2a0cd485550dc3a7d720c4dd63d75e3dee9d2134c24698c50b5f9786287e216b633a7940680f590118881e7793cb6027fc3299944f627428f29458c64a6d1a1ebe2d0acb9c4e15575eccbb528bc482ccb9d343acb28788ea9c9423e76d17e577d7ae2867600ac3c0f4ae6c06ae7c92e4cd3f949e0756103dc2063220c58d1ea13f064d827ea381a35e7cfb04457f21381ff4f05b43d1b1fcfe30dd3c06d65b4a2376a46e57f5f0bf8feb77437a2d5d3c66f315373bc84fce8ef263ee41fd9cef2aeae78f30b04a8aa7542d3b9fe1b9e9c236034b2d474210d594fc4a9ec9908b7ae677cdf3f12bcc35230790c6dd1b7a9c803562a946428d44553de72838b11dfa36dda8fb4ad56c1454c95f2aa99cda69075177ef6911fcd78471f307eed36ed8a23b3e2c256a4bbfad4abe960734539ee12397a890d07a5253c5e9847ed2f5d183c31c96de4ea94f25f25b8c129b4a68fad99aac5f80df24fa0e52876051bde2f22fded42e636ab6857f308adb7e9d1c0ef0a48369fc1955022b12911074fb434fb7829330cc0e69142c73f1d9aca0581ce1892ff413a01cf1762a04c411ff3fb0fd891a39c956a8713e00cddcedf1268a5dd571446978eff1029291a2a2dc93cd7c35c2c8ecd766b651d53939ff9a1f581cbe82cfe68694d17f7e77859bcd01809244fa52c2bf11bd757cf79456a2960146d51a0fed4cd0a3898f395cd3bf2e786a0dac973f4d0f007f2f249ddee0ecb5770befc7c60cf8c5205f8c248147ab676a3e2408ef6acd25c375bcc43f5b043cc1e7a7d1b1534076593c9b0bdcd8dfc2f6b7743fdca1e8a8a1095a5167c78eadd933c8342e9d8d26614b2c446cadb79aaa99f06efd67bab0f131ec512064a4e90a4276518a74fa6e6f57578338ebede7b9fd1a063d853727a0553f804f473a3b01d706cd0bb53e2e502c8a13db6341ead38e91ab012a825619b91237d57341d45cafd58e20f6c75bf937d3ee33162e80ae9afc8ca4042dfcb3cb2efb5201be6ea5147663318efd03059f82d70c09531d849c4c11ef7a56eda26c464f4c9b00edbd04044be8ba7f34cdd17bb653c9e5e3c4183b580fd7fd669fbb57fbed2a96e2b46400311a1add51c2fa8db1cc86fb4048f1f907490e685f728a668a7b04746c14fdc6edd75c1da5ad233e608e2c38145cb69118c2db9d5dfe625085a2dca9a108506ffcc6c688bc02efa8c3ea83fae6edef9b62c418726c9087e13d76d95b2d04d22d9619c0dbd569177a1f8e872f1fe80db63405b51b063060ca18e8e3fc1720879dd5f5ddee954e946f553f55ec14d6ac48c603d2c678f33e4088f0184069244a0e11754ae804553cfc8aa0ab7628f96ebd7df32973afab725b2f6cd44f6b7548ecf74d3c850ae08eb685d8fa70115a7a34edabf8c9f5240c68f412a59f19b35a01cd777f28745911a1e162b5cd3049d780919b430f53494ec5c200bfe9c848ae644a6d30866e81facb10d977e8f89b6ca1fb9fd94900042617e50e51f9d4b25824c7852c09caacb75aad47608cfecc891aa6b57ad3a84b6ef53f82dbfe253d23598e97ba154823987a95e5da656dd9a866fc712ea411cb97bf9a3285c3c9d2e08b4f6b0bda1c2640bdcbc69ce47b5043b98e65ff4892c4144277ba6aa7e3bd113cde18a46a37b48b17e9bad763ba4dd62fb05c8bbd70f29839e8c25bbe8bc745a96a36ab2e0ff17564c9c4e98b510efa500055e5263483c645f2c0647e5f770176f62faecfece8d6e497b0d807d9ecdea3e061d4a6846673e96f41f7f533b96b9104ea1d1fa2a3fbf6ede863735d2d806a791360b01deec523b3c746f4d2daa88c04949bc69b27b311d60257d8ef114c55f380f6817b46646b13c30ab6a34835fa86e020ca17b67221984d7f839e32b638203ccf774ba264a007c47ab0bceab237c70cbfe8317c851140cf4cbefb6f950f443b322566e5b05ccccf0993251cd230fb204b236f98ace0c24de3c3c1af0c1114145989204e7083c3482b1ceaadb6174547f973535011eca13013e8de54b72ae6863ee100d979446533818056d17b11652a3b24b25a30e5b5e3a0d992f42fc21bdb782b3cd7ec30d654496a00c940bff17c67bbb293627ca3b652ec0b05d52238a4c4126817bafc0935062b7813258ed4f91524bbc6aaf73e9441cb038c672ff42db30020cf9502f17548dc06104cc78d88c15e1a404b4598782c823b13709124faafa3914e18cd3323298b0a5123032d6cd57e77dabe343570f45f45e59b82d1a97e5e0798c29aa5bc3fc2f9729cc175cbb1cd58acef1aeccf0b0ff6f61d4d3e8bc43af5bda67e628f38435d03ee1c188bd9e7f668bc115b8a71a1a5e0e9e8aeeaa6f55ce77ddd6f7b14a56aa684daaec9197e4fe2ca2f7dae96d46851250972051f9dec8700384c1a9e1fa15478e80a73e37ca3ece56f76bbff99bcd0741d05e9f12e0d685307dc10d257823b935a22c1be6252d54a285eddf774c322cdffe1b67325a146b78fbb3ad2d45a146f8b67c7e0647a4d85a77ae25509ecb0216c08d21c7ded8bbe331789fe5405717ac5e0c95d6f62c0ba7116d6df3870d1ccdeb60e1568d910c3c6fa09ad384b138a5f48de91331cd90a37c600a2135880189e1b494d571d391a171ceb9e2a332a30c1dd8cc885acbf07f2523511b0e21a3e2987c3900b492203f0f3ece491926402a69e65d1a6cc34b37ecf5e85aa92fef184539c9b6bce42a4c10df781a3bb413b2716b15447d2147cc51cb7c7b0f41b7b6d88b0d3eee1163a40707a5f952808d66e63144d2dca2850cc87a1293984faa5f775af30689ee14df59700e24f961af5df0a2d753c22e02b795b6da8a8553dc7a86d67cd657f9272ca3d315905865dcbc1ba14f68628916331c85cc176a6d96b6f7be77a30dd16074e31627af9cfa67883d1aedef5a6abe2571a89df0ef6746300cac0ea9970de6dcc3e7ef7bb74525d67562f7f89113dd2c6ceb17883171149ab6e11de224010379bbceb10d258857960ccc74087da3a88fe4df39f60dbd96823118bb4f09bab8e7accc803415ac6a53f0bab4beaf2ad578dfffa48bfacbdd3c0fc5991f8df3d61e6a751c297a88cd422197d09f5c8b1fe1babcc07f35742771e3e0e54388e9227d39bd69ed1aa749d645b00d6a7ce151e9f3cdda2a97f799d77980a5eafb644a797ea38780148fbc02484bc98ce87fbc377c123a307cdc0c6a6de5604e96ef1e3dcec57203f0b3bf2263acfb98984bc1508274c30e797cf6033618d3193d80a36aeb75cabdefb24fcb78c253eaf7b9bfb1e7fb2524e0cc114a9604ade89ee76d620f9d727f4e4f1975d5afe1eb22fbc032d51c04a3adfc2fa785bccd1c3b078e445f596b4becc090a45a0bfc893e6395c2183bb64602fe1fd2bab96b5270194e645e51687bbd92f4e2ac146e0fa082ffe2585911b117483164a35b1bd65064759cc320139587270b41726c766e3351d6c0f8e63ca3c807866955a9b287ad194659d265725881b182a127311c57b097f5425622608f0301028ec137aefc072b2b162ff26021c920771ba0f744f8f7a23a8a7be12e3a811fd606c1810101783492f6369fe954e46c41a72a4a15012c17a575101b293ac70d008e38569b4cc8c79d8f159b053f9ab70a341fb387fc239cca660ca7f03cd0ac01ef8333287de8e8b8b76ab34d94d7d5dd6c515359b0aeac81e82ef210f099f7c91c477799eaa59f219fa5f1db9ce3a56321e77f0287121eadb886c91244c6cc7a4d3d6cfa62b4dd01b54e7ef3db7d74e2f6b0a68b95ea4a02d8106b3ffef479dd41f4831c57d1105a08c52afbd385322fc5c9a360beaedb0181fc98d717b9add8c903476a02d6b1f71ab5a7026ebc4256b560a23863e176f6b9b953ad3e197805a8c214dbaabce74f2dfabc7039c9baf3696e9efa6c991473fcce5e6c7ea9d7fe8662a7f657153605ba55352ddef80dec1fd12af1b8a5eb3a161dc1029a59ad6ae8fb4a82a3a333b7a4b9545873b47f8b17c4dcccb585d32fc4d71d738748aa3ea7410878f9b92b1342c1243bbf3d04c70b1a9d974d723aff78f9a0979c73ca143ce3fdee16b29f3baf1c632b730a36d917471444aeb0ddd5108ead2c6ec1ecbdd70b024814332d117e44c5b27531dd43a5f03a6b8993fea05f875e4d892e59d096360269150680886e603028d7f1c01a9b2839e00fccabf1f2c6b626489984b072e1b2ddcccfaad9d6a8628079e27c3019556ed6b21f8c1a54c2ac559c2abcc6dbfee3893462bcb46f6bce93dab14b6bffaa2d6f0465aebbd2cd929be34bc2916906ed27e5026ca2e17e8de54fe71ce23806b920f9a2634b2a1e3deabb623520a764879b5de4e0651daf4fcc746eb26c6060cf6eb5bee7bf1e83491ea1dbd59ff17f2a169b2607aa73417c1a8d9cf81208bfc9763d1b1c89acbc095ee74dab0f88f96e6e291bc21de9ea54c23a41c0b4854c0378c209499e160af9f08534ce72d56c45a77bf5bb5bed9d3a60b0567474a8e65951b51ab3fbd4db98ca7f60b87613ca2b8b866a6c846c9ab0995fb1b9fbfd54e65654cfa2b717c412f849074643682f74ba5c99c233a293758e0a529eadbae5dc8b11fdea242aa9d15862836df50ca711fe5c0c320048f621ea197bc481169a1c07980516a6b68a1e21b6a4bfb58e82bebd846214d916825f7b296304da25498514e69923006054d3503533c4c980f226f3e8f4426663e86cc2a9d38a9e21a47618098c9ebde9de5ff13da7e778d0bce762079da72e3c970540d5e07a0db5c741f135d8c0ceeecbef33fc82fc3e1d142d46d0fd633ae455226ccf4a3910de280d42231fa55f2ce073b6b6ed311d3a3d85a3030b4ba360f94ee1bf788c5370ab378b3079a4fe272e39a90a5968e386adc8764fb9db4165c0f1efdd7d32957769ba6fde0c294b09de388fb403dda7a93d07b6a3c7692954626aba4c49073c55f6eaf8f40645b036b0d693ca2de14b59c4809824efba39d6f7057d3bd1df9fd01f465d8f0a834d64ba0fed29a46d2c866e1f95d6ca18c4e76db9081700c94cbef33cff25810ab5a22f6f4d0270b68c32cde7e3a92f01a786e94f6504c6fee0e6268570525b7c96342a0cb7d45d23fcaa02117dea1aff0eabaad3d76099e38688c85d69e6dcffb6834e2e8965ea9736fe33f5c9e8063f76391ba7ac472ded1578deddc3366493b158acf106bead8e13e0f31fc337bef0e9e53aa2fbaaf83ccf52e841ee38878973e58d2b7d48166f0e4a9f5541f295bf1596b6f8a59b40ebf13e2e754f1247d7d521578522021341924ad98f452ad576bf48c9686d0db67fce2cfaea9ca8ffef6cd06bec14ac61c03500da6241f0606091fb50b739e08e684e2b494a074597a7661ad8c10d68a389f473ec233070c2df89b68464a1957d7108198825b10ee600f9131d7e70431dc3ad4dfc496d002de15ba5db48121283efbbfc9fbc8ab60aecb6aa00b469f98a2ce8257962ff75e911fcf2a2a4d4437cdb2a8f6b59a80618c2cbd8499809c5c5d02644c71ba3c379c66efd6c884bed416a162c6f16458816b0d8b791959a9aaa6e7540ca5a4d1c841d964a342972514702f3b3baaa7054a646dad07b43f90f839efe8be397107306683213201aa233a0d64ff3c8c85b5399f7d822f074a9d49159ffdfc52176786ed0d2feb708c42a301d7084fefe607316b7758ce25fe269101e1768bacb97db8b535819293fcaa0e7dc1ee07791fc1c51c5e3dbee6a6b9a7cb254a650df353cfa9bee82f458661dfd9ced9296aaae10fea7ec99b1fa3d9c1778683a7b5558342444656269bb6a8795274d8c10dfd235ffa4307ceb68bba24ce97eceee490ce7a621a32f9f4e2a54743eaab90743790ae2d2b9852e92f6b3ad69502e3a171b519a5b9de6a53916252362b21e0b6ac46e43439dcde2e84cd9785f0d612118ac09bd3385e48b45245a8a3790541706e387e6931fc79e73292dd435b4c7f52d4ef118ce33257c0b14c9d1f14a3893c16a013a382a91e4dbee85be9af291af2115f4fbc5e7891646c3c33d5c35b6a5b36cfc5a5d2bb3134b6bb324bac60fbade13ff7c3ccaa4840e1f17f950aa19b7514e7a3ea01126c9f9b8d8f9fb387eb315184eeaf7f9d3b7143b836663a894182cf4aafcbeedbf70616537d9816afdf96d954891b4ea1ca13815a2cb9f9631785f62db4c59fc041362f51692223b308fabb72ca34b3d922e5a62b8353c4a827bef77e9edbd1be7454ee3097a07153c886f35a62677856294c0412063479ca40e8e27eddf4fa09bb40e8723424d0062c2f732ebfc3dc1b10742f655701914c532302a639990dc12347e23e0ffaaf2095f16f2e4adb09f7a73a7341279a4aa2f7cafe42be62fe2752fab823b25317258d501d81615e0bde1dea4cfdc781d603f1b9af3aeb4613b76649de7b4f3a477abe6aded29b1e797a1c8f0840f1ad75f60c0718c391c993f2849a3ba74398a680646585009ca16855bb03f87b359e235a86d254fa45b09996768455b1118e8d844866249a5c3bb28927fe00b6876923bee6b1f8e53dda8fa8da01661610821c6d05655975baba477919265b545aa0f405c5d125d0ccb50e6639a1d954b7ca2d6d3dbc34ccc15e28777aa350a518cd107765dee5cd7f544d85d2e82efb7fb12af982186a3f433cec93a2ad38cc725c9e3d9e433db28636b7da375a46f2273b6a72643f4320591d653be7b899288d4de2f7a6a75cb853ff420dc3d963878472c971744022df2e77cfbd8ee5543bd512846a6bd5d6b421d598a12f95be08b8df412e85572d5c02b04382f051e2979cb1b2ee875934b55407a5ef8195bb8952d2003f43441247f405e7f6a381876347075528788ea338c776b08914ce7eb45e3b2e8438cba0e1f15a08e4e2dfe4d8c382bf7f502292c0aa8516412745d0a8129066cded944ce231fcfbdad2cc6850c85b34036efef8d467449c14f0a69d76fc5895f81c5be51102bf8f7f1d5f926e8b34edc0b0da88da45c6bc7ad5fbee4eba438f6c2a55b8d98bd3ef228c9f0bbaca7e862f603649ba35eac8f105d2c4570dbd96ce4304401c94bf2a68211c442c62e250aee3b85c5baa9df7dde0370729fa763b02105f4afedb8dbd44cf131175a3db0ccb4f44b22cfc063c8e0994468d40c09885d13dbb46a27fa6e1339f7621adcab06de21aee31f0af995f41bffacb746826393900ca195be11dc7930f738ed03ef6eed77311382fc7980661911bb25628156fb23e767ecc66a6c187e0d6e24f4ad2aba62271e62bf6c492b9fb553304e1c06302aa2c78b147d4a580e2d23324ce84366251a5a14e59e5692345684d944eb865a15c653f64d16f63d5a9781cbfc0bdba996bc55eb88bf7c202e4051beba0f25d5b4a6ede4ed93eec9ddd41274838cdba583dd5cfadf27ab4166d3a41445cdd09aa620e6cf387a57c6efdeaa4db907aea48dbc65543d4e724bcee5fabea05af3150acab0697cfddfeb11088bd2a2e78eb5db0ff98b2214a86a3295f7991d3db5c65b1f5b99adf6fe7d9cee4bcc713cd5affb858364e9f3ce2e1f614d0defdc4109fd6d31e7d158c95a35e9262fc2d1275460d8b45fd2d0193c477c3750ad24ae4d6a5bde2aaf669d984e731cd685370a9202bf037eab6ee8e3dc4f4456bbaec03650ea2b969c6379febddef92ccf7285d72c14d8537689f45ee5c5fb7ef241be583a0293be3cb87a92eceb6b7a36344d71b5a84b728a5e4e22e297ce709ea21bbd86f220eccd34181533e8eb0b5cf430b16c5f4066fdeb1c850bdf36687ebae06ee757e012ba6bdb293fdfd412f44380400db81651bea10bdfef7e51272f718c9c02216b116cb0e371104986e808a3ff1b3c060fcdc13a02f6b58ecb1bb2ee14b86e60f8348696ca1ac9309b58b801875cbf93e4b0d4ec396ca3dcb8099c54d0480bb8eaa2e770d0b27119e7328e5836e56216182ad4ca0d61c689ad277dc6190b2e3503d844ed2df05142b67b9876e02fd5881aee6b6fce9c0f675b98605f56dd8a53d1ac1ccf01c670e6d241a4aca33abb54081c06ea91f1f89d3bcd15f7c0ba85b317bb1ba5c61fa1e354b55d81ec3354c1eaf45ee259a30b138b35cb70f79ca06d3d9883982240ae3095351700859377635697c60f5a0544204d6a8126cc3f17e8c9ab75985927302d09bca87fe1f4ae5db1233e3431b3e62b5555e6972c7a98e0348134246c657dcbd25903bc878f0237fbdf92bf64fe171f1d2410b0b6146334c517bf8c90343f0f566561b479cea25e39a4949d1f9aa48c5a817dc5daeeb0d1eaa3cef22f3840538dac4686aaccceca560ebd7e080dd6cccd9d54de80f1b026a3d45916b518ddca2d49ae25de4fb9f57c34cdf2022708d1353b8409f4fad89414ed4d0306eb515189e9c3f0f3be2e95e1d8b204efd0afd801deb4fb920262be5683c155c8badd2ce179ea9d24d9d4e094f813f78e1aa37c3a48bfa490b159d916969d3554b54a6d97b85356bd52c632a13b10a3ba0c17229ea97390c2f5d2ebed9254a8c8dd2eb9b77ae9f3446129a6f1d3448c6727ffa0f8e89fb1afc5427ca95d602504eb6ea348586630c6b303fd394fb5694d3d63628d50058f95fd13fa1153355fd119c008e773ebe7bc3f55997692f64dc76fb6a5942f792c532650e8aacaa3261395913882047f2b3278f501e9c9ea5651022451ad0160b33c7b770787c44114a750e54b0c36137ecdb33313cdeab889db7abae3efdb70e9b1017a1aaea0d833db2fcccf0e6cf146180cfd1992aec4bac6e8952871f9053947df78204ea014d72a12651e0d18750ddadb9deacb065580e57023a1cdf3eca1c5ac6215f16feecd1a6675378da92c06020d5fba894409be8caa20a5266291444e7742faf84da08aaaaf358ac1a9498cc8adcbac6d15028ba79cae2cc0ea56557056d0f49c3c116f172130fb14d5409b6c57127b171771597d1c756663d34e34940fc4a3ce1dafe3052838b661451f8a62c77fa989f2081339f12f693171617b708f9e765a9e36738c8e4e27b4e6465e41044a04934839c6876c27b530107cf4be9509148167eddbc23518ef885e0b88fd11ffbaf948d1a4c0b94a5228c73cfa6739a0dbe1282b993cd205f0da2973bf751bd5ec39cf466359e8b639ff7615c117995108ece0464cbd047e6cbae88c66f0510e5ed0f3512e19b0dc6d0c75089289680a95d25a5e1b8dcf04addd84256a1af8a97887e0e89f6d6e68564bb03dd7bbfa57f28f3bf378eb946e51d168f80892cf42e3133085241b67f63ca5ff221ae6d8df920a45a4ca33e0b240bad591a83237a7ac208697304501cf1a0266eef6885aa2d44f0ae94141586c901689a1cd8de7c020665bdc58112d025d50fc397c9a6122bd85860c5ad34c5d5134d1f1553b78bccec24559b1432d506dd0e4e8efba3328684074fd8c98c40b091b96056a0628e7b55e92b37b7c7d3d7d8500b2743d2e039b8ba63ba1648247954dd4d272b288ae57138f3ec086876641006b2db5e5b865bb9cb8d0051a149399cc179ac2b7a411e9d91378dbd58cdf96c0c933be53a65303c0729b265dfa6fdfda9220bab5a66efee2b312ff626aa1ac3397542eb9ecc865fd3e956cdd9bc276b77603e372ca96f5728e6971eab55783136f8826f0c40227de2e4910f2b8f7a4acfa8c642ecb7d9aa636003e29e0505f8b9d8c016641f4d5e00f58f04c8c2bc190b885a2993df7ba92e17f6c4d7299177f916be72207115fb5bf5fe68d348034d67493f5616ce33a54aa8491dfd1c15167de0abd6a950327f8195e15ef808afb189dc3da6525532028c23ef8e6e4b770974bf0e99355a977c78af5d30ab6da56b6921a0fc979d1909f82060f3eb91360712f21433662d875799a88be228e5000624fa5b5391de0398633ce39da4779ed05845b63c29d515932d0052abc3c9066b8f0c0d7eea1eac7b5026baf42cbf7fbd3ef0168929bfaea61a0f89d9052c03bfba6a7bb7930482c9161e54c5acf230f0b60da344425518e0b2df39725c997a0a440796254d2cd8976751eb17ce8f77cec4ab991c3de525a8d7ec223929ed935e36ac65ceed66ae1d050dd342ac419d6c4b6b63b86c7d40cb70eed7729f25728579741fb1777e867f8897f1e11d8a35d1e7ead512e32457c7e39a01d8f9968e9c19f5c9d49695c9b91a0e85e813f1573b9abc9200d01dd289bbc6800f79ccb06eeea187abbf1719239c4d4be1ebecb152dec9b28ed1f367f26f9103c48274052aa2ecf62f20255e22494783d7050d4fcc7c91b6f4e035b83eca967cb24a79690e6abeeef840f54c61514ceac94144132affb59436f738f58444a7934ab25c7b15b3173eb2039c9f91fde2464cbfa0fd37ff76528bce4d136585ab6d61765ccc2161d08d4de9fb4aba6a0090521818e50714a0f6e311d2c1b4601c1df0c913021c103f713457ed8d2bd210e30fd137b2ecd2720207b50c90417c2ee902ac406d030fb4d4efa054a660a145d77699f36b79780d5b99e267f842a26244483aeb9a9b485dd71815eee19d85d8599b699a51b57a53089ba8d6c152a0ffbd5c6e710cf12af2f58c75e917a78fbb597913e11d10ee55eb1db4d2c10d68d37c0935044521769f4188718e3203941087333e08b6f9977cc93dfe2f002ea620b7beac5cd09c129c625ab2cabb70cbc8a5cc22c013f59d365d008a2f3bb0ff83e6197c0f7cd7872410d96fc65b8f8d096418ce34a96a71bfbb0170e85d28698aa8aad61d45443074fd2a389534b1e69cf7d6efa40036cb771ff762b93ac6470af4ee66153e49ec08986ee6f832d868051cbe80e889299e091e30531612defbca0eeb8bdc1992bf341e5761afc115fc9bf8faac9ef58dd340ac52cbe24c702fe1b680677dbf6321e4310390e70ad836e77d9b65e0f1afda196d13228b660dd55bf8f877cc5f5c23e9cab649d19bf5d8a4c264ad3f49debebe7c3efeba143c1b18f4d2ad483a573d263a90db74a07a420921024942bb6e07896a5d75380503d730d963b5500e4e794bde7e6c95a56dad624a8c8e74f6392d4e2102b600246739275a1e00efa83dfeae9f1bb7acfeac8ba1c1dd458afe5cb1a8e5324328fc70b1b4f99f5024d8af48b5deb4a5d05e4c28fae917be2d6d867c4c11f8d472ee9aa71e611325213d7f8fe8cd134c102c362c2e02457ee2dd78ee70021dbf8d9e386e4bffb96fd1278150f666e72886eaae988fae6bcdb4d6f94e916d3e2d649157cfbc0033413b396c54e3614c41f27525dc14ca473c7315816a5ed47aa1a053f17f8fe9a80ea5126db6c74a74aa2d8fd4d4598279bca2c1b73f38a762b4e2c1f9ca43d1924a7ab0a98f6af4db54053dd3a1e8a5a329f323974e0d04123fbb68da3b70c74e88b12af188b5588d52faebc34d879f68d1ad47a0c230bc9be7f7e983cba7755706b667888b99933fca259cd1a1ef7bf2880265e54ab1bb587cc4bae9c97b7e0455b17bc609580baadd04e5103f511d049f8a828eacd46abcf0a7097bb3077b3a7a23d35f7c150d812c69cd92bf4317700da6b9f8dd8953ae8e6f59452b981d372c317b9b12c1ff140399fd0b5702489bd2adc8a636ada881201546d57a5967c25061da813f73c02fabd54fda581f581f9d1660488c73e52a8cb0e538faf78d5391ed4d912d9d18ff8d500a6cc19c8a793255f338914d5f5214ec74c1a715bcb1a1273bafdc36025f254d2bbbba767799c1d3852b74ff6e7fc53afae9f2f2d1ee7783d33c3ace4b38e7b2ffdf5526c89736d36172f3ba0b9fae4aaef83e104f1eeb38900dd720857d0dd63970c25b2624f80a97c45b365eedb9aaf0b49b8da95fcd411376d24bf9ae95e30c170165a62715953dd65799d64c03a02f1dce577b72faa3643a24e45f5a4ca979f7b14f633652befdd4d89b71a1b120317087cd96dbc9ea1fb7b2f563b334afe05a2145d255ce045a8f99feb69712cdf86c3febc16163467646108c2689c404d7ab9d3a5f8ae23f1492992768a7c78d321a87368277eee0bb5ca45479d3729a68313b485063b123318524cd471fbca343ae54812958932f328c5185667c29d35d025d96ea8e0d1be98adbc65f11792cf54a18d248462651fe430a5632fc0ce9b3085d6a91f4ce5bf3900e32827e375305e5084f474d34373106f6f9cb4cbdef772a7726f50837f1db31bf294ea3ae9debc5ea8b41e371531bb9126bdbce5b01bd1c0c0e23af9482e20eb9f5975353aed9db9f3f36d67634f3e8f0a211378b6789fc1673feab1b78c9d91adf3810f2683e21da4b834fe0b7fd4b01946b3223f48f2a15cf7688f620e919283ffee379db4b9627b9d13e35de05055aaa830dc3ad7c2b5685e9dc4b47fa057a6b1514c51902dde42db1b1fb608f1dfc0bf57694cbfb64050a48c508cc4c79df0b161356faa5156ccf188195708db54de668d737164d15ca70a2110173a5ac4814e4fcbf1191a754a71cbbc8529033219b15fdb2fd089c398f3724852f2f502fbd87c58fb2d4a50dd7859493b1f77bec1b7b8aca2b96beabf11d2c457aaca2ab3b2ed2003c2fb5b5f31bd5fb45257f6708ef784d62024abcbb0eba28fd16fc21e0e830b82929912345d6b6b9e6d2654bf9823763b902604ed9933c0fd855416ffa990be5e2a78599c2ee2147f1199894fe71c7a25c071e24c325c4ddc477721565e3f11e3b9a2d825bb47e63dad635b12c76522b7b122c720aea6e0295602c2a2d13db8ecaef1b9d8dcd67a55c906be225728ff0b8fe0f87714a99b718297e300006a5d342605c33d877cb05b8aa951d669aa12857d944461d848b63fe04d5ec9468006e047d74b6c6d1f1895f084592597713bf4393caeac73a7fbdd91eac68c0d2e7f697abcce12db098b20a7341a1320b33f5008cf00e567fe98bdc4bd14307718e1b3e96b16fdb12e7b44c618227c4a9616a8c1d1cb7c02fc9fe9aafdded14c0be472a8732af146fa07b03fd1db714b78b34940e81d5b0be942e33f6b2cd35bed8e638dca79a78ac92beb31e3dd647539f5a1374ccdae10f21c6cfbaf5b5db3a9d41c8145069643c305dfe45a484944c4f1ff59d1cc9a90bba07d727956d6558429980100d7ca2f2699a5b5f1cb5984e8ab0b73631fb0b54fab6b68d63ed60286518e11d5ed154d899f7ef63133ccd865e4ce4785ee578d047dd54ac157a32197791260c38a1231bf6d3772a0bbc8ebb4ef4a2daf0d652ec79425dc3575913f20a6a171e004eed9156502bda94406b9b4e009b77410f1445bc8bd2538c2dad85e8162dc4bddb88ca05bce41295f3f2f7cd7bcde8fd4a8edd6e18fec053d26c3f02705b625724314987d76444b7276c02dc226c3a14aaaccbc1cab5cbf0093caac0c498734f490ab0758744bef32806aef618c370ad0c948d9165db53abedf114e56cb51959894676389904f187c488e92738097403c8a489c7836fc8832b380e60f2bbc9d8ae3ffb6dc384e8b5863e784ca4554ca812735af6da996c057afe0b066723fa045bf57f30bfa79f7b7ac1dd3573cd8b0b521e157b9e222950701249a82556e4fb66691f60ccfcb6dbb42b4482edffd252865c01088de05df6ebf5c4547327ba6fb1dca7225be6e325facdb05604705e230ab2c7dc522dce4abea5a78282e5bdc8db2619be5d85cb18721a2834f778f12c8a083112cdb5b356d764049f47dc9c3865a0cf1e6b26b8902c2c96d7cba2597f3924d78b35b80364748c957acf530a999fa3e1444dada56c3c5a917e701dbe7744e330bbea68a032622640ef7ef2bfaf8587a9ecf71a4917c15edb81bb44668cf57be935c0403e96eb1a2d113b47b6e99f9dc53f2630fcaceb1b650630a2cbc5330ca9e6214fc0457e75886d8b4f7e98d9f49afea9477c1449846b9ce1f6978557780c0f70c26d209d9e4f2ba022216d4e43d63a3bc148ab5838f6a577465fac812fb44d717e2a1911eca93a6d092d5e2ee18d87a6d6ec412aa50a4c58a40859f4ee62e9f4c3f0e86f539c0f3d88381806154d4f202a86d1b00fea8a1d880c1c7490cf1ffd9f4635a0b09aa2fdb4df584beff4c89d04cbd4dfd59279a37f69a20b2a281c39bcd54841a45c95fd28c223af1979ca2214cba716a78329f8c64e841d32b49d782f8a2d1e59bc7db36d8a198cdb2f259677d79ddea221ec308218865184b72b23299fec470589323a8d1d0905648d6a9953db99b3c17b110cc7d781ff39c337ae7fee0e8088b1fa8a607e99690dd3aa6155bf2b90f1fe005bc7e3941881592c62fc18a800ff31c944864d725c9e922454d2fcf5172ca1ecaeefb166cfd36afd2a2ba37149f23265aaa087db3dc8ae1584c8349f0d74e10b7d179c16784b139e5bd24ac73f6211e3e28a6a863da9289aa478f7f5c0d919689191648b01e3694b89452045a23c0278adf9975bd2dbbfb1e01638a024ecafedf3d1e17357034b814a492278797cd6ef3c6ecb93a3646018a0f69b746c09d97cf5efa287211a4a94baa69e3cf6dd7442a2866e9b9fc892849c2af2924277a432989120c58ed7aec650c9fa9d554df8022267107ba404aab2aa37fc6878a311d8fa33c721653417631e2e6f39e7bd5040d6dd3208a543e1fed46359e21491c091815bf43990f0962d6f45abe521a5617ca45665796414d2bf419f45a21093c0f78b0c9251a45a626652ccf53d66a6aefc4925bec9186965c9b9a315396a6e8cfe172994cfd9df133f118fef8ab6e2bece3785e51bd69a11aa60c8894e41cde023b268f0dbc7b98128521a01b2a2bab9b47411d2f5231ebb1726a5f0a65e3d9222d6627c37c54537863dc94f246be08fa5370d717f4a9a4a088094b9d94b4d869fa472cb8dabd37dcb2cde4e5a59817d232471470d7139cda5d62ba875254e9685bf8bb0a2023a81afaf8103a7ba16496324b3639e83c2c867a84513ae4898466f3253dfe59786986d7cb15e900a3a601a5ed1f3a751c3ea7f9559c18972ef18e4fb78f43e4d18b9f579b0e72fddefed40bcacff436585b0e513a9fbf9b27ae408f3be4ec3f605f2f2f1654bfd2c86d96d13b71a535cc992b711bea925069f95a8881f15366da109d3dda74e18c2461323239b46f8ddd2a0948c1dba4afacdfc7ac4824a61d6ea1dbd40d9f430ac5223994f76485e7fdacb6bf75da1ddfb40dc13d2f7bb633f4e925d4b7c8d115a87e5858c1f5a08a0ed6b25a87347595d8197669e3fff50b77ff1938cefd37627a8d2823d54955b1346345f1aaa658d73d4e16762b48c640fba0ba096bd8e5df953c0b8b907b33ad13fa124ab9c74ddda1943ba1a45433eccf5d6e6b32bf0e3c4d9855edd59bae3f7e6ec57295f7b8782653792abb9b138a3d11c10edaa191e07b5630d8267f04b088c9761774d9753055eab1fe0bce9237f77ea637f82d6fe6cfa9a5dc90955d6f72d4538d7027fe7fbd3101fb8463b67a9452fe8142891f3c7dec1903a6fb3dd37f6498f270ce562b6bbe0b8141af0e95ab837e3a82c9e0978158fc516beeaac4cc34bc9d957f5307a0c2bc383d1ff60d1b0596b3f7549e90e196a9e127171afafc97acf87a80714e3c37bbdaf1e31974b8c4de328b27f628c488a368d29b9b1711b7476f63b9c1b364f58bfe7e75f7285bcbfc8784aaef3761548bcbc356fad5ba0e110326ac7909d3366bf3dec361a49868e55273d04243b7674263a6e31b694bb2b51180ebb235c3bbe11e8762307dd15a5031c1100c8c780b8b84f83cfc41addd9c037e21feaffe9bf435466d54e4969c8704dd5f000346efb258169ae79c4f4e9138e795d27480d078de8b52de8113d32bd0e0de6fc5428c6ea08050574379133f64a1e0f353d0e1466c0920d3e7b68127231613a63f6e5ad0050bd2faf5b3b6f34f705febb23ac9d95af8e37ec50535b44ad86f1df7c81448d105b04cd25ddc6d9a128c14fe10f75f2d8ad7041498e2b3fd81206de7ae4e5871968a4292a8da2b27f3fcf2a97dfd2756290933da53b5d5cd6036e0f270557521fe2d1d6c8bba50d3ee1fcfc09c76153407fe2ea8caf1d21d3e3200a819bfedc3a3f86d23a473fccdc5ccf7e80e00a2f6011318e99900089fb63ba210b719e628f9b6a7bb989b74555204b5101c915fd2088da0cf8e0fee9c9ff2241d2000a35491f242bc9b1fde792447c5c137d74558eeb7762b167afb6c878f6b658b3d9087f532eb61da4b12339d62fe88bce1ad5c8e30cf2bbdf871557f4733130611154d930ee9adf99a64911d9065bf911a2d4973ad830c8b241859f9ac557e5db33a6c2816e5a4beca686be6585eb0bd8a818280b4ce586036ced13ac6b7d86a47ae6fcfbfbf26df5ca6c360e43107160792c2ca50fe02cba84e5336315621580011ab265974ab389764b1b6378695b58419b6313697432b6c78571e376b1a8ed77e145838ac1bb6f9f2568ded911f49625c73c3b0879ff0ab8f6af552dd91d549253fec4305c197d5171be3200d8defd6a5b90841aca3f7d7011e89f860179b8725af288cb54b17be3cc0c863aece1700f01d95a23a455a7e86b82b0cdd1f135a27b784e0bf0f81ffe3f1aa7d35c5864f52f7c48257d76cb3c28e606d36326603b4c3bad63489379ed72d4314eec5910806b31582c340006f1f424706ba44711568c81f7b085089ad272cedb908112349861eb39c3d46e8e6600c9cf4d2cedb7120277cc075840dcf19a01e86a7ea01a8360331ab1c788074a84c07161e46a3fc61cb262b07336de84d5864ee8fc6822b7fcbeb82cc2557b613d551fa9e5781fa9c16c2032d88e1e715b36c5b21161acdfb6055302888271374e23194779a226e99abcc2cfefb01013f12c994d056327fd5cd8899fe1ab9db618dc2adacb50f840cdfb29913b75eac65309ac1b9e1e71f0f976a243af6b4e4c991422b2a5726435dd9e9abb9a2159c6fe0bdd42061956ba12afc742211c088b843fbe4b90a94d3c0cf04d2968d29b317c2983afd12675680baad0418935286ede0b1849af7bb5767583e647bd4971de13cdf13590ae9c016aa56827129b28d0975deb080206f7a990d5aea674c61e717d1528979e95caf479e35dcff9ad21d1ed1b724ae576f5ae8a26273f074f619e0a5cfaa1c890308d7ae7bf49c7429e9e5f8b4cca9442457304a7a97c8ae4199c295e415742fe9965c14e111c12db5176f8e7eac404d93b232849fdafa892ca982fea70131795519b36ee68087e24617ae3d5ffac1a187142ec83bd1244b73c2c566dafc5d997a5bebe6adc33ad00678eb47ce2bd91a51eb07bc5cb3bcfe0a0d05ebbf757997f76ee5add8822ebb7ee5069e80956c7b0efe84af3dbda610ca2489eab4d44f7ae7867fed7c7254d78769961e9e5b906d607b4b9a509823b3d1e8c20e9d91f4a3b539be2fa98cefb0f0a7a079aed37d122ada320fd4827e9e711ee1a69abcb05f16ab1b89cd432382deb515177604af58251eaf7ff9e0aea356da3bdce783d43f73e1c9fb51af0275e349bef8656e11a9ad6f5b6106bc04ceaa181466979aff68daa05cda62439f4867348eab40e1e93829fd023e3869fbf2a76d91f163fb5a1b2cbed19208edbd4d4bef56e4a4be204a9b4f554f2e1615db0ce02b0319635bfb19712045d4223cf5204da2b26a79ca9cef96cfcfc380374145ef06e91d07c28c36a6dd0780f68dba9fb500d47b76e7c136f2cf22a44d25fd99b7a5fe227e4667ae0e6b724bfffbbc90cbdfec221c44b29d1a426e9d42d6e3cc02182d7db8c0917d06146b273e3898afb862237dc226b84288c84679d0d265af7c9fbf72fe7909e3490975506ff76bc52fe076144bf9d85e10d4a92384be2348c45885d9a42d47bb7c09203cfbbb3b7432db4eb7aa91321c8eadfe701daf6f6847d686bb76c4b388fb7ccfa6e04d1c236cc10a2dd0ec7bb875c6d7848ca306c6c062653373a98a3eb12e220ef6bea7e0f4065c203c544d092d3bff47c4c4dfa140c9fa14ca266ec419b470f4caeb9b89e0887d5f562482e69667fd6589f4a3015dc8b1e246167c65794896566538acfec731f63e65f5c1da9080817e27bda3831d445caeec628a798b61233b9b8207ca66bc5a1edc44e32e326570628cab954a67f5a38f8666eb14447745e59694a425b22748e63517a507e854a94141abed5b9ae4403beb2b8ca6d7e2223a2f840cdf5b77f215606a6b35f0c22dae18b6cc6834052e77c5ad04efe5a995c2b7dce49dc23fdcd15c296938f28cf8686691a9d2ddaefb4b05cb81e91d3cd20ce2eeb7838eb153ca40d0e4d2af1f7c8d24830c421af9c3c78ea8f93ab78e8b9825e045b7e13e415dfa809ff183963f43e3a8755e170a541cfdb0b9d7f10a8339e3e48c5a73f28abe543d5c7e1e615fa111a49452b78b7e2eba4ee3dc174f677763b99faa3def02c4ccdb491a936d219d20e2b012e59a822290ad39d72b5a1580fcd8208d93eca955b49b5b66de961e3291bb7536fd2855c6badcfac4ca29d2dc36ed9198d2a93062347504e493aad2bcd9050664d50132a0931bc8edf88f819435d87ab31b2626d1175519d003abfcf882abe54ad6f46df8f1611e7ddc81f9c373c2b9462d468a8b4a0dea13116b07eaf2afb4ddb45f348309cd7c50f96c7a01d273c68b51f4927d58307fbf89650ef6b75a49459d210dfcd3ac66827fd8c81ec5cc6fe3e86053d0d7ec3d377cca2bfd55061343c1b3a34f37616e6ec764beb819dc677c242988e5e57de0141b31ed92d705704c3a9df239205df90891120d0abe8feef63c63253bed446d37e3687d996d56761d7d4f40cd67c60c645a62f2de0f0186558e8a00d3f9b5863afdbb4c1b35dc15975eae9fb3ba77e9b7cc9f7a36076ff631bd30b342367069f39b97fc7d7ebe8576f5f13ca031355f06f02dba03a8d25ff35de0999583caaffe8d5bde2d34396eaa1753d449e28bc29d4be52b63e39a36ecba88c6b54b3198e7e0786ba3187c97b75a17632b8665eb9620bfd4c162d8efab797bf5171eefee343ef433d1404792463a1054d0b774e00121b5cad289882c1cea564c0b20fe0eda3f51e153e56efb5d6b88caacabeb855747f15cc3fc29372f59b6247641ab5dd6260c917a7fa25128efb95ba22e7eb6fcea8c88da6722c20d3569390e8baf31f47b22c02f96983e8d0a371b6845cd327d74dbd05107bffdd13d78573f2da1c263b087506ba16996b6c23aa00f9f1883a801cd2929deefacc9695577f899126773960e3d3a81e2c628370f3fc6b37246e2d96c8f86f959cd01a63b3c6de19ff345b99470bb7a9d801e6294d77c2aeb4a73db492ae8e1e1ad484887d3ee82d9c34cef91a65481b212f84bcf41922fa4bac09c38a79e04adc8f1109fd418558cd084eae5d2f7006825e8d8166871b354ed64b3813e4af239ad663adcf6b931aa81ca7d7983bb2b85d86a6636ede133f223f39fd85c91eb1dd1f213022c617be4f3df2bf53fba7363f89648ad4176891ae67a0ff1f6cf9900bb94d56183fbb326b621aad034477c7094261d538e6eb895b1ccaeac74b7a508c511833499bedc457e3cdf16adab31357e202d474f606a1259adf1027b2beb0faef1768f2b884e332e93dadb6a97300abea80e48be2c5ed4fca8848b06a56d49e6f31b4f3d56760124b2a3538a09d7cd2ba7180a13c6c976e41a34dfe4ced2581aa33250c07e2f1938d95238dbd64296542d1c6e97c11f751649d1fce9d807eb419bff155d923aba2622ef9137604ec53594295c7b4a539437219339e5fc85dcc2d41fd792425d4dc542fa98cf619ca4e7f412e23036ac4b8d2e043958419fbb35b111aca8da75f27bf79cbebcef9f4a0a022cc24f985b3ba447876d8db7f6aa70ec27cb1d0274cc41bc50f0cb941b98be9baf9ca64b54dcf38519f1cdecfe1e71987917c61ccc6b155d22cd5698db00f441696c38820cad7c94f99376b8218feaf6ec05860582f35cfde8a98003d6b8e37b883ac371aeefadedce82ff7ee90ad05f128b411f664cc857256a526f258909643bd5950723f5da131248836fb051f0b20437ee06aa416369a820f2071134f58581cdcc30e71045b87a026a4f71a51bd0269cc0f1ef957177df85d1d2bd527edb82bc58f0bbdf0b50d6ca8f353b07e26a1da3bff56b3cc642dd063714499a576ea3d0fc90bedae2c4ac7a006e2c1bd0c2bc60867bfe5e69ec634031223ade7621940e33904a6c892b03a84b8d83a08711abc36e28bff79f3c0f640821accbd5b10c21e03e5633e1e7511c937fbf374df05c08495c822888a0367dad7458325bcf7321bef08e93634d57b3465598f7585d5c54268f10aaeea8df6f6fb839ba630b5138ecf13b0ad8a6cdf486b6e4578172ee8f1815d9534078b7527f10a1a66a87feef35e14093c6d9b5a3a481e943914dc44aa32fd827c432c537f18142027f1d745c63d78b7c49a206ab08ba59b0b3d6b0713fe531339dc0893d646acd4d3e89a6502ead5a19b037c7a923c72d94fdbeb4a7840e56ab2a447f03c5b5121be1b77ccb90c972e9e83afac1c421380ee3caf0f50c5206bd7a069b404259224cc99343e7c9b7d9449e90f643a568b6a527ba53115724c5670b202c18381e6375147c6f8f4be5379e07873777d639ee3e663fbe4ac098a249fe5ec5ac4d7a78d06a320829f088a6c922e56643f5110fcaca11acdf6237865c0c67f8932a0387945ded6b487d9955bfccae23a5c644bab645fee5efd44a2889b0a4e3d98d9e4d47df073a6fe1da1d8edaae15f2029e7fa4ddc26830002790e3c6e06bf992d5d5004b994d4984c1cead5d6e8536ad076ba94998524db1bc30e805962da86cc3690e249d17534663c9de5b1821f1106078d25ef5fd51d02c49144b6be2ef71bdb878a88d36eae0f4eadca084a342a5a3d8f8aab9070a18742ec7431770e78977750c0049a4392ea0499cf08d89055447d3f351276a76929feddaaaa5ab66c8ee10612cb5b82fc72784981f9f852173fe1b4ffff7b4aae860fb9fd83b9bd45cbb251c98c049419451c6723370ac1a434a09545fdbb0525e6d39219cae0934b645126df485966869f942d86931d9e2c60774a06e3f9111e9243a437df707fa87edd20b05d1bfc406fdffe8c905043433217f7c7b27662d86c557ebf754962be3935f69addea8bcbe4e36f1c3fe2d6d4055d06424a950d5bf9b70e0c65cd824830b0fc6294fa596148b1522b96c776e4367e6ccbe393624e2a1158c96ab9e3eed88b10a8ca18b26027b58ff0bd555f07d8261d6ac8ff95726195045dae542153a9de762bb68524df54556365e6f0d5fd193b6bc679348ec1566798a98fd1501b833faed0679e17ee6d5b67e008701322f615486f46182bb5cbc736428a60953699a07f6daa642c365e7da4c31aafabb723010eb4e935ec2a36f52fa9f9277d20666fa007b6aa70573f36279e6393d17b75a6bbaadb3f4acc604b4e4716364570c80573245d8adb31faf3f2f4711de399d2ce705eff4935ecf91e8734cb4950422d5fabceddbe6dc394fb270c24ebcc47ec67fef4cb9f7052d0294bddad95be5ad0593ce2728fa1a178ffbd804799152b95d47849452723986d8086490626e836d4b67c683121c7797a2e4b3d425e56bc82cfda31968706c7e002285cf78d53138e2023adafe500ee9c88a194870d27b43fe7ef6665ae42777a88b3baec21568fc8d5409014c7d9d4b70f329bccff6e0f3595aa03bee9c4ea5f7e9e2adb4dc5efdd98abec442c9beeed65a86c8628dc0e414b22fab40d18c3f4657ce806150e9101a625ccdc2cfa0307b9a616c4be9590e523097c9d838d273a722b01d20b20da35b634d4469e7fb7a6ac08767d80bddce85e8f4e9aa60fadfe60f6d0657772c72ae3f5e231026a1789341d8ce8620258de6f07211d346281083c0d29ca9de890a28fc42fa698141a4de4bbe8dc0972f22803031d62d00ccf99b2404a16afb815fddc1a5d6d9f0fb78a8ed403e4b22b9a444f686de44c45fe076f9d2a1fbfdaf7b0b7391e38420586cde9ff363a5a116e4a321e5415dfa4fafee19ae2cb790023a987f114253a77a4e33ff413259c9aa46986d0f56f3aa2504607e7fa2501a08f0995a15656f4416a05fba43308b421c22c20fe54ac69688355444e2096cca52b7e86fba7ef5529c12a1be7891350c1ee053dbf36362ccbf15a98f1f3eb4c03ef4a3bf51fc71be9aa38632c59e760c26c5ef2335bf4383501e3298ab18852e0dde44c14dd45f7c8a83431c6f61e57012828b0a3b687c9469b72a7641e89537fdda1d400a1ee36be60b44c0cd7c99e0e245adc4f376211abc4208f92fd1ac5258da467fc48379bb650c9c02da7f37b9c1e70ff7161475a8703cac457db63a4c790309af9c805a4c405bea048b940847c9653a36290392ba061a7f8c8dc14beb2e623fa5489c5b08eae807fcef5fa0d78b1970de5eeaee4d8e17fd35f91cdfff8aabefe919da39b96fb3cf3c7968207c31c12f7795be57956af7d29195ceb18681b595b2d2e98b488ad8af71426ec5795a122a10eb82c2f2dcedc4f2d646256c84e67e8e8b18a910c4ef59caf8205b1eb5b1532503b3d64851a001cf1722ae6507f90149d9da2cd163823be932dfaeb068cfd335fafc896788a8b0fffb5091056e40ecc0f4114597ef9a2ad3a09694d3c1eba1c49d562d5933dea1ec8e0b7b1c74e7fb5a521b414f6410418d87efb3d2c5d70e4ca92f30b0ec77bcd0e38b186e248f7ad11d2aa4b275881ac08564078d3e4dafc903cf298741ecb945689a56a0825e645eba3929a7382ec55bf0fed371c9b58666d16e1e2e6eae769356ae3866f78df01f49cfc96d99c016deac0bd87c9d60273cb91c0990b011eae7ba0bdb1eb83ee1a09b69e302359aaa20bd35b40be30fcdf36c22539511b691c40f6d173ba833c7a910beb7545229e3feacf962138ffc3d3253736b0150b0141117cafaeaef2f479eab7d931e43e308e59172575ea24803df1acefdae0d02f6521efab4625b61398c05fdc91100910d921bc3c7c025474adcd6c871948cb6e6f7a0a7927e0b911ec1b9d90f69ae41e3b621b75de5b47ab7b46b668d1d204ab60161db45ad6c3c4f6487954dc031000adcb20346d3b5c367acaba32823254043ae560fbaf12ad7525d56908046e8fe82a7215dea00335e4d2ff778e394a176b35c2534089cbfed9d0b564b3c174177e75e0b18d120e8b7dadc32ef88f7c2cca42af3489616d209e6548ef9df8c8741939bf3f8c14b076ee6fa0222078cf14a227c658df89a6b3f7cb335329fa4807aa4402cdc7a887afe91a1efc59371ed9aa2daf5bbc9132325cc7ea2d94804fe265917e492bcc06fc9c36264d4272fb05d2eaed2ee05239050fc500fc234760d26a2624cb0ebee722b5ca08059080f115138ee9ace7e3b68374f1c9a833220f5e94e3bd67e61ccc64d94cd05170ebee8c57fdce7a0f4c089c57bc17f6831e41da2f5aa978e2c4f5f2e802a0e97a4bd2a32d727e1682de11bec88a081302b4cc88d4b7cca977de8b344efd78f836aec923b0716c11933e790effbf2ff96c77d53e1a51e4c31c5fd2d5be08be6b2ac5734e10025609dabf3ba6cc4e9a217426b1c8f18eb4ff7bc758723c99d007660d3a99dce9c3437bfd5a1f9140b7318d275a58ee0bd466e389259cdf677f9b3a62319614257ad39bfd1a258c1f0832ea9a0e60ca6edc5878b2871ff81c29a88fa9341885d297398dee1ce729095c04b0f7db0e9ce93a461bb94016f5faf8e79f75856d3030ac4fdee322aab9d2d737bbe7c2be27e19b66b6bbc8bf77fce8706ba35091d80a6acb5665b45fba649cd143c430338d7b1df4e75dca396cae2b8e5932d159712ca6edd1a975ffbb99ef742ce3eb252d95321856ecf78991a13d1df5898aec5e7ecb323e98b1e0689b0ba2e44465a41d7714c0f21966c57645a4a15b4589cd22d3793b194147aa50df8a98d4a68912eb5a88248d5c844d77045118c57098a9f17ed9f2fde31860c84eaf5ec88c6fa5c9e3a61c2a1e07b38f491cfc0173182208feb045a54dfcb1c0bc0fc158db165341a60d0be0127e3ef219c6d5cda0d885518eedf156d8f4e996c14268fa4be06d3a6998b717a53925ec06561343be9f4e4b905510b0cc4c5df39694b0acf750bc3b238ff98da907e97065600bddc55a435fd9a7fdd793433e781f144d9484c89c1159312f48f701d65ffdb458cab7dbcd0ec49c1a0ffc57d271a5ed93cf21c467883bffa2c2960540476ac1b184f258329bee6ea447b97cbf5a3c5a7cde77370843f118474f06f17b8f8ef4c16f4cbff2d4a9cbb419e0c66460861291e1fee801513ac32d63249fd431a42d3bc00ceb7e6644aa55b6346996c3cf148718c83aa57d9c4f86a877f057e8ebba7e9b3f55eb3105232e388f5e3d57ce31d2654720724ecab578246e5688096bf4e722fef87bb4ebc73eb75e480975fbd6b7c6b941e237dc5da6143656e261387d416e29b332889c930cff6eddca1506e83f55a86089ad3c4b0846ad33761da671ecfdfbf1175be40dd1cabf20bf073d896a1dfb7cf844a385cfa9b631818c54a2504709de683f11b6a58fbd5c6819e3f28eb695661c123e9d6cb56122ff44f081fbf760a5d5eca8a9b16a606febe993c77b7be317fbab1ac8cf7c140ac4f97738f27c70b1463969dbd1ab4e3ccdab6ec8bfb743ad07ea6df4a88c8c7730b894ff249776d36367ea19a98de6c0f25613bb720c04e3e2d074650adaa2cf0ede66e09c6e4133d03c0ba0944e5da5992ec8b6a3a8d1f0a468c41caa6c67c534c7e23fa9a955917eb73099714befac9662b8bb5ae72bb867d73e7bcbfb65f78cff14de0dabc94b938bd727a957054991de03b58f30c3a2fa68b9324bc4cdb275564af30e53a679f77d82f439a709f006a8453a3bb49dd93f63501615a56c778e2aca7628985906e867e168143a170c0450a5c502c71b47eabdb122e915076baba4bfe05ab62cd33f65c78d93c0f67e404c2539c5493b2b6d10b90af725c38e43753b8659021556f7dd996fb0731519d112c31936207de2c227d10af61bf4788bcf8c8ac7355ce89659bbedf73e62192cd636568265eed0dcd2af25f02e9de2abb7786e80bf7a0af49caea19f26aa864c76c44e85c2ad9a8c1c7eba6bf62b816586f7336fcd2e595a12e4ea5328f615c11be964ed65b2486e93e7dd626eb4d2c8394b3a0bca46ee4c5a82b24568fb0bbeb2eb54e58ba67868d539ffac7ec3a2d098050736ee4aa99098ee3749862afccbd0685abb543c49202cdf1afb823dfa590942cb5f9274e9aaa419c7430c3e45a52563f48c517d0c62a9eda49f7de912cd60d6e0835f1edda11cd02e844d61bd2eb7683ea5a4c2ff7d984a64bd68e4dab23e7637927c34b0e92e772637f9fbe3e8763d57e6074350c0cc386cae328611f8d2084627473c93b70fde4471e58bd1304a23f9a298dc7c1818ac62e2191fd0380ddc83d7457179fef8d424774ab53f2f09557007e0b58b327431b8e8b5de2c1dfc9bb82d6fe99374f662b2e8bfca8f4740d0111d97e6f23145cf1a37b107169aa895e14b416b3883d63945b06a4382fe040a1e5a36a301bf849961348be741b624b674593caed7675d2da67ca8245777ada763fc20f7a5facaf1747a3da88d7fbade79e472d4f1ac200469fad5b22f2156f151d5bc98cf0660dd184a705ef344d929a49d77a1c97050492333f240f1304c67faffb4ebeced848ef33b57eec5bd2eaafeb2acca8350254e0db540f019b96314a69443b4c3122992ea2f01a4f37b6f9c7bfa39371ebbd2b5c2fc6b3a5c42becbb4da3fcbdaf4be546cb5872df5f4d2124e484953c1ad3ec6cb3af6fdcb80792add84acfb32189bdbe98a00f6c97777e884cf744ee08790d049d821b3b286d42ec869969c283f50f61bfc06241221356a7893385fe136f9f258c479a6e4876102b0830ed7007933e22b03624cdfbc3554b001651f036360cfe0bfd86523dc736d3164b9aed3854a6a780ac567cf5ba070f57100447e624fd75d6d2321e3788639fba719f8241571da000efa9ebbdd8cbb38b39c5376d0905fc329ee753904c5f81a4fc6c95e6573ee343507ead8f5df87b9da186f4335b967ed2b6aada708b67a49c39f0d18ff77234ced56c24d39490349be2c0a4136e3cf600fd3dc3ef6771e782cc990c28004b7f3697f9e32189fcbaa8d0a6bc82e6193a28418855d7f9e224b6a726dd0a2af2ed2f87c97bf6e63094ca3006102427cfebc38d44cacfd2e70ffef9fe2b056c15e2d2839e2cf703d7af5ed15a0570348ac3d9346d61c8dec6a6666c4e7a8a2e61d15d5a2b3a4b2150b52d0c8fed00e1376d3c3e624b8a0213780816a616a99cc4f720490fb33e2155a36a948e075600997615ae4677294e11e412e186222752c344ff983ab3fc7588e28c2ade37a5b605d0777a7ebd450254a8cd2ad058e8859fd5ea4a56ca827cad525c9147d8e7ceb85364230660ce03311c1a01cdcae17877ccb466f0f6b6e076644f974411d777dc1e5865e63b5b0541464f8cf062dfc0623bf84f00c17cda0cee6dbb78c884d49313bee9e6135765d6c12cc3054560e5dbe5d849bef7b85f2d5f2f695ffb02e51dc8ab1820c39961db20635347541b2b9d691d45e79ba9b5dbd11f4df8be56047f0f2378e088590ff2674fbabd8be6a0db5944b19790dcf9fa6f97f9d92cb4c88664572549fa3f9f42700a09a7d039a0910eda78daeeb90f6922872af15ba60ad74db274470d16c665ba0a8edfc37278fe6954afe62f6d3aa1f7baf981ac03a5f7e7c8a754a044a92056e61b153888338dbeebaacc0fa1761e5cbaea17010e6314dd413f7f4ae321e81d8d60e5970d576d0bc42e821b83f9d312f0fdcd3d972854dc94262899132886d031820ba5de87c3c29d7ce628cf9688b62653c2457336fb7adf39164f58efaba1ccf55c560678432975e16ea9bb4b84ec8ab74875c2c150172fc7dc73064f1c83906a4d91c4ce97030313b313f0d18465e1c7fe2e515fd0af7a9b88bfbbe0ad6034fb15b81d45036fdadbb4e1942196793ceb03dab5218dd4547c4da3f95c6bd6759edab4e41b6e1665732fa85bd86f3ea87bc9cdfbdc8b45263f0f117214b4838d5c607f9cb9e9c865cdb916e21c3fe094aedabcf233b5401fd7147ddbb4d64a1c9622192d8d650cb403d0622ea4ef5be90e662b985c0d77054093357a46be0f0fef89cc1b5c79fff00ef1d95ca2dcc9caa8ec5f087abdc11d66a8f76aefb92527d72e858f6fdc6bbbaa8e9dbb4923cefc19d9f1971dd09463fea1e46254c216e4558600b35513755afeaaf0552ed9112ab9c4f1f8c007b1ed38d03dfdb3415005cb3b7b9afcb190fea8776acfe64a59e5faad27a0bbf1c5f6ec381ee0635c897d23f53f8ad25ed0358ca5e94f7fa49f29bb83a2d9e34817ef3651ecef74aee45d2bb8684a56b09f4e1832e60eb675089b9b1b5d1e41edf7e83097c233dfa18bad5672e5e8a3a934e202757084202008c37c5642a0098d6370471f300d1833794ccf106eba509349067a34e168978b1a3f6be4c7f9202c262e6ec37ede21bd0cb2585429d24e758b32e9bd001566f6c0587cc3009bfb36964cbb1b0fdf3dcc613457a3b694499d7c37de94ecd57d581be6e3cd08ea4a0223ad6f8d391b5beb46c7a9177e6f6b32e0e22d15088df857611e0fc6986dc53580364e3c9fcc80f63c44ccf6752e981d536baf7dcf37f438ce4b1e743aa07cce3f74ff417abba870b2b45ee204323d83661191a116156477d216ce12e0ee0a0cbc939f42d56cab15e4df49b661bb54eb99717c4cae792dcd4d684fcbc70e9a2b0f90633ca4059a0b0334b437026742deb2057cb7be7765e7dc611e30012894630cf0c75e29ac2578ceb57c29358650a61cf82e8d9068a4e5639696082844b150cdba2e6a165ac4c380309f4ba7f04f10f7e81fb7d67b469bb8cb2a4c557a56c567e0ed0f3c498908748d5d3f48f533a543cbdcaacbeac8c1c7541dd89e20a099b0d3bde00894109253277b6e468301f823ddb44bf0fc3f69f88aeeaabb9b31a77adf0fc4d1b6939ef3680cb00b44a07b8484e05a1d7e132eda0cb5df1b50659b1a9aae96c421d47c570b7c9714fb2c08c03835ea6cdf7c20127170ef568620320cb7b0f9bbca0e2ba95fb46b72d8dcbbda5b94a1bfe0c3209f59d5cc10c823517d08c6b8a69e5a478cd2a6f085843764eafdc0fc7cdf20c0acc2d0b70005bc9b4661387ecc1d6483c5a49bcd29de8fd25830fb0e1f4697e2da5af54a2b7c60a96bfc5d4eddc04c8e9b48d45c1aad51bb84aa4c5e5c42dab09db4527dd0b4be7f8fcb60400ed399b16c7683920da73f3c7e3b6b5fc6dd3feb25003ab2a2a975a0eec059bdf4b9c896ddff94d2c2f5be52c34ac8d74e724a751603a5f8ff4b070e1a9e7a29541091371b0253966354d056355781132de4c18714aabe9fd8456fd89e2c806dca258e9de4d7759e4594dfa57f42774c65378887a926376e934269c60043365242ac65e2ee3be31ece627d7d0a212d09c2fd0dea6d4a8b7391d111203c143c48396a33004b6695dc4ab752a6e31e89512c6af9e012126106ad1a3b9922d322007ddb647c7bb7ee358dbf52a07121756e689f6d1417970aa552e83020f1cd5ecde6212eef1ab0b02716ab2434673c29b3067c520ac5afe5d180bf40ccf25be406d2f2757dc5884d9c55af2f53a2c20120299bcc83efc761b52219d2a780128f6b8cb034466af05da96f559478f5e09d33fed72d9bee48e7ab298e5c4da8ead25db520455309a75414db69b266df61e7b65feffd23c29e9729f628623bb97d51ccc3fa7ad1808ebcbd668caf3dbb22da961b3da07f0034149b6925e25f24e122e393d3115e46f04b6c2a1fc82dd6f4e96a2cd3995edccfce944bcc9f4473fe21474d7ca868f8205e4118307ca9c9191d175587b6e632fa24ba30dd298af5ce7965bd46b46c2edd5d437a78561fb58c19c68cace5f608ce8495611f48a56aa35cbf322341ee22df9d15cc6e159bcd813e56e6d31404679ffadb88c82ea7fcb8ac21b8c6b0e7d64925ad113b8f11450813c63ffccb0b3474556ee270bd0ef775902117b752d748f198434e42e0be4f07b232c47e749a45050b3d418f2078491dac8337182f06fb8663a9093b40f25648c82d909271767e351267074d6780ee5c17c5c65cd03bd82199673ad2f0ffacf94d3e16aecdf2a0e97cb8e018811eba513c7ebfed374089060542b606428577fb20d71d71002460379521adbc63488714c23625000f2405f1a5413221b43e7b5ae175024fb94c7311c0bc9ac935a26c20310d49600357d03cca03a56ef2fda1cc24735a19018d5ef234d81e6642b133d107d1f9442ab37a4c9c1f1f8662ed35ce05cd0ab5d51ebe34e782dcbca0dfe679999ff5211dbef6e7bfc099b9872f7219242e3c08daabdfc3556f0b58b6062b6c3e200bc303d38d5f70b36ebbdd6e7948fa4e429b7f48ccd66aafcf144d76b51ace2a053c38a0abbd2e5d3030388a9bcce9d4946ceec817b3a7b4d8413f8139ec90b78f82dc44d5e4dae019b2a121d0ebaf3df5c58da3c76af7995cddd9b54c18d2959a3df93826c8e4698aea504a82d4e1a615613417746104b541f9bb1468297932dd3e929604052a4bd37fbbfe611ef6b5888a31e12f8c4baa3cdc0108b0ca6ee58eef608f194998f64024b59df5002d962dd9e1cb9c595a5ab3f478c34215ee59510f87740df8d14d7ebb739f112e3d7db1452976ff906c31d04b6c12e1ff862ebae4a480b8ea950c6c07c026b44d6936bf09daba25d76efe8ab6098136f1efc06cd1e1978c8b94e2a03f84a2cfc3ecfa05757a2b7ae7a9e1d45a2895445521d67067c73a0fcb82914a1081a6a58e6426d323c297299025e2b24127ac259583b734497ebe3f3e2316f634b001c5523406db3141d66b2c8b82e4d2bc37799af1b061f75e6ca26a798879f62db6cfee5e133852a330da92ba50f7355b30123f074554c37c7f6a723ae2ac10b5ffef9af13ebbd55a2501b1aadfa621af640b72c1524dc59d1d7f826a5854cae6509ad3c8841ed6ebf60f8eac997813987c336234bf8605105e1396bd5f0083298659b0731c449c7d9d63c19f9be7fe670e406ccefeb6e50d6a58dfb9fa3311472cfa778d2bdfe7de556d19dadc0981c03b945e1f6048ce202df8f866e9d31866e154ebd5b539962a437b37d28a1ee81a29c183bfc5559cafc13a7430d9909cd90ca262a309dfc5e21811a1e6d86c381ffd40215dde24b67e10b9e4b2b21f6da0475234472a392adff778224106c5670a6b327486f753367756975dc54153bd9dc816600bb49fbd4a09df6d9d41f1fc6aed4b30f0f10950ede5fc6d638cdafc8c4111ee0839b01431d9cc82b0b4b07ae43c57b474fddd2d37868e4993313ff708453a9b1a466220d0939940871d926631325937923428ef7924e1dba234f17f7219089b7963fb30129752dd115f0fc371f546cb56c56609dd1be3920491e6520137a8893c0ea67bba4c578a96afb3075ebd058e6f71f4e814072355812c9f72ee6c3d3527e7b580894f7de6ffdf59f946ce7887153581e835cf481bc1690680168f69444c0f7c240a198e315c2f6e82ff9c6ab9aedb2413049ce03dd5e3b0be6e038d24890f843bafdc9d6e568afb7a579c2a8f9dbbfaec894f5b2e5e4b312dc1267829c417ee3e62c4af1ecc2199e43b852e142f13b8d66e54ed80c9f2831142a88c18558ecb07f5ac0233c38243359ad54b2cd2890afc87e169825be5cd6100f712421f6ba991668c18c1de7f826c2c8898e6d5bdadfc99cd8e3535ac98044f986836ec2f0d79c4cb3dc22afd38b13ac540d86a041283c310ac31d864085002aa17a1052a2db91988c6219ee3d49aae1c76ec5387681fd95b9e168641e118158c1fb278e45f38365bf7a8d3ff0486243f5a36fc393b035e6bbee7087fad878d42048de086055e4b07e96cffa7bcd8a3fde0b8f92ef9df23ab2792232a370e5ce78291560da3617451f7bbba42353ddc9b75b314a9f99ae33bef0121f79270ee67cf7bdce8acb2d3cd2152c879d876013e71e682584f494ff7dfcd5f9db0b7f8ab581261a479433b7d99bce80efb52738652a0e1c3dd6190b7de2e699c937d9d41c87d247251f8234f49d6acf0a09dcce049e6b4aef0b08f0d3675025916e03fc58b463fb1dae4bdef4938eb9e01ef3a312fb4f1e9707969e5f730b6474dd5ac0c16a88835e9c2b193be34bd5b26fb8e510c1415983c937eb33f289ec73e750d984c1e6a3cf7a706fac87c63bcea0b106f9ae897dbb57c06ce024663fdf84d7f8817a9394b448a6b8babe523fc94cf19a38d7edf61533adcb432f109018cafadf92cc6f777d1d9635417cf1ce1d5be44e46bad51a137899f98a59d129c6958ffe6aad3fc85e8688158746477be8b9150e0afff56db404baf277d94d1b33740e987fa2f98675763abe52e5b8988d86d5650415f795c30df41478de17e81623d3ebfc54f808c9a476817baa207796e638a4e514e556b0b2256be10895036561460a3a51ac3e9d8d64551dee9ca9a4fd24fb1468d6ab4f52edd3d65bea85f449e3af13030f22826a3e0c44646ba058d605898de8ff9cb7ca05009e0a6669de5d13954a2e1ff512fe8dd8e68ba22e2f5513412b2c60a4115537e30413160c1f81f088e86dbcd0d262ce2cfee85fbcf27c7ff25f464bb2b08d19e869b056e07e3b16b5ec4fb6f21121ac0685b373a1753131bcc8e7a9afd8c09d120866b0977476bb299ae320da61701bb6d747b04499d095707019ccdb3bcf9c39244de961af773ed3d4567ebf0c0d02f09543700e166ed33c82885067d9e1131d09682f084b48d9d29f71f69b723d51bd9538ae7387360ed7861996bbc79f80b7d60ec1b700ffb2babf5956159c27fe0434475a2600a87c3b7237843d3b7e1db4ee1cdce40b8dfeae7b386faff7d7445dc6374ac709afde89df9c5070fe6dd653f29aa22174c72147aed7cd35a24e40e8ce426fa05225bea22b4a0017a6d4588a0d1e65227e7014be95c5a312918c5720f7892beaf93912ca88df275546ef9df75aa71a3359b0a2adb6060afbe4a632e7878a1b1b14af28edcf6ecbaf55e3b358eb54ab8286520b72fdb59c067fae8a14d5cdefa746061812e83e3e3b6f88903c91d081b59efe822cf156f41c9699f2be70aa5755163ecdd83d9accd5e204eabca552a1b226acb1166e0ca6ba4f9359b2bc8422913a0027a9d3a1c660221c90c1aff8e6851c233cf8ff1a2e2c6e270c18855a33646eaed9b6c77b86f03a7e6f22ddcf1b0989b93d45d359ff858d216f6c7b2e912a2d14e71390d158a7cc9c32f887542dd52545e0a297141f335f5444b45d5eefc48d465831c419ea6e3937a488ed386a0a5ebc8cf6b6969eefbe6d0e376afa2d57615fa463f6bfa6b9b425590b541f7b573248954e0b448efcb62b3698d8483683cc131168d4d0c7d9f9be59168024942bf74ace92f3bd671c7f1c4c23befafa726e5f7125ee1127f572915805759e46422b9e164e613d0bd12da6fe09137047e620b854590b7329057a369d49bc1072f070c41aa544f0135b633916253ebdb85352ab4137f85747bf3442598bff75b294e889264d1d3d2248046f95fc50b8f37002f53b749bb49e75753a1643601f840ccbbbe196087d792b5c3f9cac70a684b7b79f461167cc6140a5aa9941e4a9fb2fb598012ac015dba72fae8b1fc944a6ca2fe667dd0433d01f764b524b500ce8a580c38691f26f63108a8be37038911171b064fdbadbef617d7ac57baa893b8b117f4a41469495aca498fd3f3846ca902317ec6b4c639eea85773a4d61a4df2221f50b89a24ebd7f9b1381d51b1696ae548f7d39fa5ed93c0d9dc8f01edd7214c18d5de61c3c52f679cd3c74374c</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":"<p>进行CDH基础环境部署</p>\n <a id=\"more\"></a>\n\n<h2 id=\"基础准备\"><a href=\"#基础准备\" class=\"headerlink\" title=\"基础准备\"></a>基础准备</h2><h4 id=\"时区更改\"><a href=\"#时区更改\" class=\"headerlink\" title=\"时区更改\"></a>时区更改</h4><p>pssh -h “timedatectl set-timezone Asia/Shanghai”</p>\n<h3 id=\"各服务资源的免密钥登录\"><a href=\"#各服务资源的免密钥登录\" class=\"headerlink\" title=\"各服务资源的免密钥登录\"></a>各服务资源的免密钥登录</h3><p>服务器资源参见 <a href=\"../数据中心服务资源/数据中心服务资源.md\">数据中心服务资源</a></p>\n<h4 id=\"修改hostname\"><a href=\"#修改hostname\" class=\"headerlink\" title=\"修改hostname\"></a>修改hostname</h4><p>done</p>\n<h4 id=\"配置免密钥登录\"><a href=\"#配置免密钥登录\" class=\"headerlink\" title=\"配置免密钥登录\"></a>配置免密钥登录</h4><p>done</p>\n<h3 id=\"切换yum源-这里设置为阿里源\"><a href=\"#切换yum源-这里设置为阿里源\" class=\"headerlink\" title=\"切换yum源,这里设置为阿里源\"></a>切换yum源,这里设置为阿里源</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /etc/yum.repos.d/</span><br><span class=\"line\"></span><br><span class=\"line\">mv CentOS-Base.repo CentOS-Base.repo.backup</span><br><span class=\"line\"></span><br><span class=\"line\">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class=\"line\"></span><br><span class=\"line\">yum clean all</span><br><span class=\"line\"></span><br><span class=\"line\">yum makecache</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1.安装vim编辑器 </span></span><br><span class=\"line\">yum install -y vim</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#2.安装lrzsz文件传输工具 </span></span><br><span class=\"line\">yum -y install lrzsz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#3.安装wget文件下载工具 </span></span><br><span class=\"line\">yum -y install wget</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#4.安装netstat，查看端口监听状况：</span></span><br><span class=\"line\"></span><br><span class=\"line\">yum -y install net-tools</span><br><span class=\"line\"></span><br><span class=\"line\">netstat -ntlp | grep 端口号</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#5.下载unzip解压工具，解压命令：</span></span><br><span class=\"line\"></span><br><span class=\"line\">yum install -y unzip zip</span><br><span class=\"line\"></span><br><span class=\"line\">uzip 压缩包.zip -d 解压目录</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置pssh-批操作工具\"><a href=\"#配置pssh-批操作工具\" class=\"headerlink\" title=\"配置pssh 批操作工具\"></a>配置pssh 批操作工具</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;pypi.python.org&#x2F;packages&#x2F;60&#x2F;9a&#x2F;8035af3a7d3d1617ae2c7c174efa4f154e5bf9c24b36b623413b38be8e4a&#x2F;pssh-2.3.1.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">tar xf pssh-2.3.1.tar.gz -C &#x2F;usr&#x2F;local&#x2F;pssh&#x2F;</span><br><span class=\"line\"></span><br><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;pssh&#x2F;pssh-2.3.1&#x2F;</span><br><span class=\"line\"></span><br><span class=\"line\">python setup.py install</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"配置tod别名\"><a href=\"#配置tod别名\" class=\"headerlink\" title=\"配置tod别名\"></a>配置tod别名</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &quot;alias tog&#x3D;&#39;cd &#x2F;data&#x2F;gitfiles&#x2F;&quot; &gt;&gt;  ~&#x2F;.bashrc</span><br><span class=\"line\">echo &quot;alias tod&#x3D;&#39;cd &#x2F;data&#x2F;&quot; &gt;&gt;  ~&#x2F;.bashrc</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装mysql\"><a href=\"#安装mysql\" class=\"headerlink\" title=\"安装mysql\"></a>安装mysql</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 创建mysql镜像的存放文件夹</span></span><br><span class=\"line\"></span><br><span class=\"line\">mkdir -p /data/soft_install/mysql_rpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## wget 获取mysql rpm 文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">wget https://repo.mysql.com//mysql80-community-release-el7-3.noarch.rpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 安装mysql源</span></span><br><span class=\"line\">yum localinstall -y mysql80-community-release-el7-3.noarch.rpm</span><br><span class=\"line\"><span class=\"comment\">## 3.检查MySQL源是否安装成功，此时查到的安装包的版本都是mysql5.8版本的 </span></span><br><span class=\"line\">yum repolist enabled | grep <span class=\"string\">\"mysql.*-community.*\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 4.修改yum源配置文件，获取自己想要安装的mysql5.7版本</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##  #5.检查MySQL源是否选择的是5.7版本，此时查到的安装包的版本都是mysql5.7版本的</span></span><br><span class=\"line\">yum repolist enabled | grep <span class=\"string\">\"mysql.*-community.*\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##安装mysql</span></span><br><span class=\"line\">yum -y install mysql-community-server</span><br><span class=\"line\"><span class=\"comment\">## 启动mysql服务</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"http://img.wqkenqing.ren/2021-04-25-14-30-38.png\" alt=\"2021-04-25-14-30-38\"></p>\n<h3 id=\"启动mysql服务\"><a href=\"#启动mysql服务\" class=\"headerlink\" title=\"启动mysql服务\"></a>启动mysql服务</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1.临时启动mysql服务 </span></span><br><span class=\"line\">systemctl start mysqld</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#2.开机启动mysql服务 </span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> mysqld</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#3.查看MySQL的启动状态 </span></span><br><span class=\"line\">systemctl status mysqld</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#4.查看mysql进程是否正常开启 </span></span><br><span class=\"line\">ps -le | grep mysqld</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改mysql中root本地登录密码\"><a href=\"#修改mysql中root本地登录密码\" class=\"headerlink\" title=\"修改mysql中root本地登录密码\"></a>修改mysql中root本地登录密码</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep <span class=\"string\">'temporary password'</span> /var/<span class=\"built_in\">log</span>/mysqld.log</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># temp password</span></span><br><span class=\"line\">k2PqXCarz-BS</span><br><span class=\"line\"><span class=\"comment\"># 登录</span></span><br><span class=\"line\">mysql -u root -p</span><br><span class=\"line\">再用temp密码登录</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 修改密码</span></span><br><span class=\"line\">ALTER USER <span class=\"string\">'root'</span>@<span class=\"string\">'localhost'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###重启使密码生效</span></span><br><span class=\"line\">systemctl restart mysqld</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://img.wqkenqing.ren/2021-04-25-14-35-25.png\" alt=\"2021-04-25-14-35-25\"></p>\n<h3 id=\"允许root用户远程登录\"><a href=\"#允许root用户远程登录\" class=\"headerlink\" title=\"允许root用户远程登录\"></a>允许root用户远程登录</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GRANT ALL PRIVILEGES ON *.* TO <span class=\"string\">'root'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span> WITH GRANT OPTION; </span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 指定特定的IP，开启root用户远程连接 </span></span><br><span class=\"line\">GRANT ALL PRIVILEGES ON *.* TO <span class=\"string\">'root'</span>@<span class=\"string\">'指定的IP'</span> IDENTIFIED BY <span class=\"string\">'root用户的密码'</span> WITH GRANT OPTION; </span><br><span class=\"line\"><span class=\"comment\">## 一般为了安全起见，会创建专用的远程访问用户</span></span><br><span class=\"line\"> GRANT ALL PRIVILEGES ON *.* TO <span class=\"string\">'dadeity'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'daDeity@163.com'</span> WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建CDH源数据库、用户、服务的数据库\"><a href=\"#创建CDH源数据库、用户、服务的数据库\" class=\"headerlink\" title=\"创建CDH源数据库、用户、服务的数据库\"></a>创建CDH源数据库、用户、服务的数据库</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE DATABASE scm DEFAULT CHARACTER SET utf8; </span><br><span class=\"line\">CREATE USER <span class=\"string\">'scm'</span>@<span class=\"string\">'%'</span>IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; </span><br><span class=\"line\">GRANT ALL PRIVILEGES ON scm.* TO <span class=\"string\">'scm'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; </span><br><span class=\"line\">GRANT ALL PRIVILEGES ON *.* TO <span class=\"string\">'scm'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span> WITH GRANT OPTION;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE DATABASE amon DEFAULT CHARACTER SET utf8; CREATE USER <span class=\"string\">'amon'</span>@<span class=\"string\">'%'</span>IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; GRANT ALL PRIVILEGES ON amon.* TO <span class=\"string\">'amon'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; GRANT ALL PRIVILEGES ON *.* TO <span class=\"string\">'amon'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span> WITH GRANT OPTION;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE DATABASE hive DEFAULT CHARACTER SET utf8; CREATE USER <span class=\"string\">'hive'</span>@<span class=\"string\">'%'</span>IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; GRANT ALL PRIVILEGES ON hive.* TO <span class=\"string\">'hive'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; GRANT ALL PRIVILEGES ON *.* TO <span class=\"string\">'hive'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span> WITH GRANT OPTION;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE DATABASE hue DEFAULT CHARACTER SET utf8; CREATE USER <span class=\"string\">'hue'</span>@<span class=\"string\">'%'</span>IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; GRANT ALL PRIVILEGES ON hue.* TO <span class=\"string\">'hue'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; GRANT ALL PRIVILEGES ON *.* TO <span class=\"string\">'hue'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span> WITH GRANT OPTION;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE DATABASE oozie DEFAULT CHARACTER SET utf8; CREATE USER <span class=\"string\">'oozie'</span>@<span class=\"string\">'%'</span>IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; GRANT ALL PRIVILEGES ON oozie.* TO <span class=\"string\">'oozie'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; GRANT ALL PRIVILEGES ON *.* TO <span class=\"string\">'oozie'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span> WITH GRANT OPTION;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE DATABASE sentry DEFAULT CHARACTER SET utf8; CREATE USER <span class=\"string\">'sentry'</span>@<span class=\"string\">'%'</span>IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; GRANT ALL PRIVILEGES ON sentry.* TO <span class=\"string\">'sentry'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span>; GRANT ALL PRIVILEGES ON *.* TO <span class=\"string\">'sentry'</span>@<span class=\"string\">'%'</span> IDENTIFIED BY <span class=\"string\">'ER62-fP()hs1OoFW&gt;'</span> WITH GRANT OPTION;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 刷新mysql的权限列表 </span></span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 查看用户</span></span><br><span class=\"line\"><span class=\"comment\">##设置密码等级</span></span><br><span class=\"line\"><span class=\"comment\">#密码强度设为最低等级</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> global validate_password_policy=0; </span><br><span class=\"line\"><span class=\"comment\">#密码允许最小长度为2</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> global validate_password_length=2; </span><br><span class=\"line\"><span class=\"built_in\">set</span> global validate_password_number_count=0; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#更新授权表，生效</span></span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建本地YUM仓库\"><a href=\"#创建本地YUM仓库\" class=\"headerlink\" title=\"创建本地YUM仓库\"></a>创建本地YUM仓库</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">##安装createrepo包</span></span><br><span class=\"line\">yum install -y createrepo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /root/cloudera_install/cm6.3.1</span><br><span class=\"line\">createrepo . </span><br><span class=\"line\"> <span class=\"built_in\">cd</span> /root/cloudera_install/cdh6.3.2</span><br><span class=\"line\">createrepo . </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 创建/var/www/html 地址</span></span><br><span class=\"line\">mkdir -p /var/www/html</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## 修改cdh6.3.2中的校验文件</span></span><br><span class=\"line\">CDH-6.3.2-1.cdh6.3.2.p0.1605554-el6.parcel.sha256 CDH-6.3.2-1.cdh6.3.2.p0.1605554- el6.parcel.sha</span><br><span class=\"line\"><span class=\"comment\">##移动文件至/var/www/html</span></span><br><span class=\"line\">mv cdh6.3.2 /var/www/html</span><br><span class=\"line\">mv cm6.3.1 /var/www/html</span><br><span class=\"line\"><span class=\"comment\">#安装httpd服务 </span></span><br><span class=\"line\">yum install -y httpd </span><br><span class=\"line\"><span class=\"comment\">#启动httpd服务 </span></span><br><span class=\"line\">systemctl start httpd </span><br><span class=\"line\"><span class=\"comment\">#设置httpd服务开机启动 </span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> httpd </span><br><span class=\"line\"><span class=\"comment\">#查看httpd服务是否启动</span></span><br><span class=\"line\"> ps -ef | grep httpd</span><br><span class=\"line\"></span><br><span class=\"line\">vim /etc/yum.repos.d/os.repo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#以下为文件内容 </span></span><br><span class=\"line\">[osrepo] name=os_repo </span><br><span class=\"line\">baseurl=http://hadoop01.baicdt.com/cm6.3.1 </span><br><span class=\"line\">enabled=<span class=\"literal\">true</span> </span><br><span class=\"line\">gpgcheck=<span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\">pscp -h host.txt  /etc/yum.repos.d/os.repo /etc/yum.repos.d/</span><br><span class=\"line\"></span><br><span class=\"line\">yum repolist</span><br><span class=\"line\"></span><br><span class=\"line\">vim /etc/httpd/conf/httpd.conf </span><br><span class=\"line\"><span class=\"comment\">#在&lt;IfModule mime_module&gt;中修改以下内容 #把第284行的 </span></span><br><span class=\"line\">AddType application/x-gzip .gz .tgz </span><br><span class=\"line\">修改为: AddType application/x-gzip .gz .tgz .parcel</span><br><span class=\"line\"><span class=\"comment\">#重启httpd服务</span></span><br><span class=\"line\">systemctl restart httpd</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"所有服务器安装jdk\"><a href=\"#所有服务器安装jdk\" class=\"headerlink\" title=\"所有服务器安装jdk\"></a>所有服务器安装jdk</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">pssh -h host.txt &quot; yum install -y oracle-j2sdk1.8-1.8.0+update181-1.x86_64&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置jdk的环境变量\"><a href=\"#配置jdk的环境变量\" class=\"headerlink\" title=\"配置jdk的环境变量\"></a>配置jdk的环境变量</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">vim &#x2F;etc&#x2F;profile</span><br><span class=\"line\"></span><br><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;jdk1.8.0_181-cloudera </span><br><span class=\"line\">export CLASSPATH&#x3D;.:$JAVA_HOME&#x2F;jre&#x2F;lib&#x2F;rt.jar:$JAVA_HOME&#x2F;lib&#x2F;dt.jar:$JAVA_HOME&#x2F;lib&#x2F;tools.jar export PATH&#x3D;:$JAVA_HOME&#x2F;bin:$PATH</span><br><span class=\"line\"></span><br><span class=\"line\">pscp -h host.txt &#x2F;etc&#x2F;profile &#x2F;etc</span><br><span class=\"line\"></span><br><span class=\"line\">pssh -h host.txt  &quot;source &#x2F;etc&#x2F;profile&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加mysql驱动包\"><a href=\"#添加mysql驱动包\" class=\"headerlink\" title=\"添加mysql驱动包\"></a>添加mysql驱动包</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p &#x2F;usr&#x2F;share&#x2F;java </span><br><span class=\"line\">mv &#x2F;root&#x2F;cloudera_install&#x2F;mysql-connector-java-5.1.46.jar &#x2F;usr&#x2F;share&#x2F;java&#x2F; </span><br><span class=\"line\">cd &#x2F;usr&#x2F;share&#x2F;java&#x2F; </span><br><span class=\"line\">mv mysql-connector-java-5.1.46.jar mysql-connector-java.jar</span><br><span class=\"line\"></span><br><span class=\"line\">pssh -h host2.txt &quot;mkdir -p  &#x2F;usr&#x2F;share&#x2F;java &quot;</span><br><span class=\"line\">pscp -h host2.txt &#x2F;usr&#x2F;share&#x2F;java&#x2F;mysql-connector-java.jar &#x2F;usr&#x2F;share&#x2F;java&#x2F;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Cloudera-Manager部署\"><a href=\"#Cloudera-Manager部署\" class=\"headerlink\" title=\"Cloudera Manager部署\"></a>Cloudera Manager部署</h2><h3 id=\"安装CM-server及agent\"><a href=\"#安装CM-server及agent\" class=\"headerlink\" title=\"安装CM server及agent\"></a>安装CM server及agent</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#安装python27，解决安装过程中Hue无法访问数据库问题</span><br><span class=\"line\">pssh -h host.txt  &quot;yum install -y centos-release-scl &quot;</span><br><span class=\"line\">pssh -h host.txt &quot;yum install -y python27 python27-devel&quot;</span><br><span class=\"line\">## server安装</span><br><span class=\"line\">yum install -y cloudera-manager-server cloudera-manager-daemons cloudera-manager-agent</span><br><span class=\"line\">## 安装agent and damons</span><br><span class=\"line\">pssh -h host.txt &quot;yum -y install cloudera-manager-daemons&quot;</span><br><span class=\"line\">pssh -h host.txt &quot;yum -y install cloudera-manager-agent&quot;</span><br><span class=\"line\">pssh -h host2.txt yum -y install cloudera-manager-daemons</span><br><span class=\"line\">pssh -h host2.txt yum -y install cloudera-manager-agent</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"所有节点修改agent配置\"><a href=\"#所有节点修改agent配置\" class=\"headerlink\" title=\"所有节点修改agent配置\"></a>所有节点修改agent配置</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;etc&#x2F;cloudera-scm-agent&#x2F;config.ini </span><br><span class=\"line\">#修改文件中server_host的属性值 </span><br><span class=\"line\">server_host&#x3D;scm-server</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">pscp -h host2.txt &#x2F;etc&#x2F;cloudera-scm-agent&#x2F;config.ini &#x2F;etc&#x2F;cloudera-scm-agent&#x2F;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"初始化scm数据库\"><a href=\"#初始化scm数据库\" class=\"headerlink\" title=\"初始化scm数据库\"></a>初始化scm数据库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;opt&#x2F;cloudera&#x2F;cm&#x2F;schema&#x2F;scm_prepare_database.sh mysql scm scm ER62-fP()hs1OoFW&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">添加mysql驱动包</span><br><span class=\"line\">pscp -h host2.txt &#x2F;usr&#x2F;share&#x2F;java&#x2F;mysql-connector-java.jar  &#x2F;opt&#x2F;cloudera&#x2F;cm&#x2F;lib</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"启动CM-server及agent\"><a href=\"#启动CM-server及agent\" class=\"headerlink\" title=\"启动CM server及agent\"></a>启动CM server及agent</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#hadoop01主节点启动CM  server </span><br><span class=\"line\">systemctl start cloudera-scm-server</span><br><span class=\"line\"></span><br><span class=\"line\">#启动日志目录为</span><br><span class=\"line\">&#x2F;var&#x2F;log&#x2F;cloudera-scm-server&#x2F; cd &#x2F;var&#x2F;log&#x2F;cloudera-scm-server&#x2F; </span><br><span class=\"line\">tail cloudera-scm-server.log</span><br><span class=\"line\"></span><br><span class=\"line\">#所有节点启动CM agent </span><br><span class=\"line\"></span><br><span class=\"line\">systemctl start cloudera-scm-agent</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"重启-scm服务\"><a href=\"#重启-scm服务\" class=\"headerlink\" title=\"重启 scm服务\"></a>重启 scm服务</h3><p>systemctl restart cloudera-scm-server</p>\n<p>pssh -h host.txt  “systemctl restart cloudera-scm-agent  “</p>\n<p>Q:这里有出现了agent安装失败的情况<br>A:分析日志基本可知,是agent和server服务启动时,运行的监听问题.解决思路是对/etc/hosts文件进行处理<br><img src=\"http://img.wqkenqing.ren/2021-04-26-11-41-22.png\" alt=\"2021-04-26-11-41-22\"><br>事实证明确实如此。<br>后续2:<br>在运维同事进行处理后,又在/etc/hosts 文件里添加了新的内容。</p>\n<p>pssh -h host.txt ‘mkdir -p /data/colony/hdfs’</p>\n<h3 id=\"elasticearch-集中安装\"><a href=\"#elasticearch-集中安装\" class=\"headerlink\" title=\"elasticearch 集中安装\"></a>elasticearch 集中安装</h3><ol>\n<li>将es的parcel包移动到/var/www/html/elasticearch中</li>\n<li>在parcel配置页面添加es镜像的添加地址: <a href=\"http://server/elasticsearch\" target=\"_blank\" rel=\"noopener\">http://server/elasticsearch</a></li>\n<li>在parcel页面刷新,直至elasticearch栏加载出来,点击下载,分配.</li>\n<li>分配完成后,点击激活,这一步常是要退出分配页面,重新点击.</li>\n<li>激活完成后一般就可以安装elasticsearch了.按CDH安装其它主机一样,进行安装</li>\n<li>安装时elasticearch的配置内容一般不可能更改,这里要elastiscearch安装完成后再进行配置.<br>要配置的内容主要有如下图<br><img src=\"http://img.wqkenqing.ren/2021-04-28-14-36-25.png\" alt=\"2021-04-28-14-36-25\"><h4 id=\"es内存设置\"><a href=\"#es内存设置\" class=\"headerlink\" title=\"es内存设置\"></a>es内存设置</h4></li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Xms8g</span><br><span class=\"line\">-Xmx8g</span><br></pre></td></tr></table></figure>\n<p>两个参数要设置成一样大,不然会有报错。</p>\n<p>elasticearch.yml添加监听配置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">action.destructive_requires_name: true</span><br><span class=\"line\">action.auto_create_index: .security,.monitoring*,.watches,.triggered_watches,.watcher-history*</span><br><span class=\"line\">xpack.monitoring.enabled: true</span><br><span class=\"line\">xpack.graph.enabled: false</span><br><span class=\"line\">xpack.watcher.enabled: false</span><br><span class=\"line\">xpack.ml.enabled: false</span><br></pre></td></tr></table></figure>\n\n\n\n\n<h3 id=\"kibana部署\"><a href=\"#kibana部署\" class=\"headerlink\" title=\"kibana部署\"></a>kibana部署</h3><h4 id=\"docker-compose-yml\"><a href=\"#docker-compose-yml\" class=\"headerlink\" title=\"docker-compose.yml\"></a>docker-compose.yml</h4><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'2.4'</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">kibana:</span></span><br><span class=\"line\">   <span class=\"attr\">image:</span> <span class=\"string\">kibana:7.9.0</span></span><br><span class=\"line\">   <span class=\"attr\">container_name:</span> <span class=\"string\">kibana</span></span><br><span class=\"line\">   <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">   <span class=\"attr\">volumes:</span></span><br><span class=\"line\">       <span class=\"bullet\">-</span> <span class=\"string\">./config:/usr/share/kibana/config</span></span><br><span class=\"line\">   <span class=\"attr\">network_mode:</span> <span class=\"string\">host</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"sentry-鉴权\"><a href=\"#sentry-鉴权\" class=\"headerlink\" title=\"sentry 鉴权\"></a>sentry 鉴权</h3><h3 id=\"clickhouse集群\"><a href=\"#clickhouse集群\" class=\"headerlink\" title=\"clickhouse集群\"></a>clickhouse集群</h3><h4 id=\"部署单机版\"><a href=\"#部署单机版\" class=\"headerlink\" title=\"部署单机版\"></a>部署单机版</h4><ol>\n<li>先查看支不支持sse4指令集<br>grep -q sse4_2 /proc/cpuinfo &amp;&amp; echo “SSE 4.2 supported” || echo “SSE 4.2 not supported.<br><img src=\"http://img.wqkenqing.ren/2021-04-28-17-34-28.png\" alt=\"2021-04-28-17-34-28\"><br>现有服务器不支持sse4。在此种情况下，先安装一个集群试用</li>\n</ol>\n<ol start=\"2\">\n<li><p>pssh -h ck.txt “yum install -y yum-utils”<br>pssh -h ck.txt “rpm –import <a href=\"https://repo.clickhouse.tech/CLICKHOUSE-KEY.GPG&quot;\" target=\"_blank\" rel=\"noopener\">https://repo.clickhouse.tech/CLICKHOUSE-KEY.GPG&quot;</a><br>pssh -h ck.txt “yum-config-manager –add-repo <a href=\"https://repo.clickhouse.tech/rpm/stable/x86_64&quot;\" target=\"_blank\" rel=\"noopener\">https://repo.clickhouse.tech/rpm/stable/x86_64&quot;</a><br>pssh -h ck.txt “yum install -y clickhouse-server clickhouse-client”</p>\n</li>\n<li><p>启动server</p>\n</li>\n</ol>\n<p>systemctl start clickhouse-server</p>\n<p>pssh -h ck.txt “systemctl start clickhouse-server”</p>\n<ol start=\"4\">\n<li>修改config.xml</li>\n</ol>\n<p>修改以下几个参数</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;path&gt;&#x2F;var&#x2F;lib&#x2F;clickhouse&#x2F;&lt;&#x2F;path&gt;</span><br><span class=\"line\">&lt;tmp_path&gt;&#x2F;var&#x2F;lib&#x2F;clickhouse&#x2F;tmp&#x2F;&lt;&#x2F;tmp_path&gt;</span><br><span class=\"line\">&lt;user_files_path&gt;&#x2F;var&#x2F;lib&#x2F;clickhouse&#x2F;user_files&#x2F;&lt;&#x2F;user_files_path&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">全局替换</span><br><span class=\"line\">&#x2F;var&#x2F;lib &#x3D;&#x3D;&#x3D;&gt; &#x2F;data&#x2F;colony&#x2F;</span><br><span class=\"line\">&#x2F;var&#x2F;log &#x3D;&#x3D;&#x3D;&gt; &#x2F;data&#x2F;colony&#x2F;log</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"flink手动安装\"><a href=\"#flink手动安装\" class=\"headerlink\" title=\"flink手动安装\"></a>flink手动安装</h2><p>复制flink至其它节点<br>pscp -h host2.txt flink-1.12.4-bin-scala_2.11.tgz ~<br>解压flink压缩包<br>pssh -h host2.txt “tar -zxvf ~/flink-1.12.4-bin-scala_2.11.tgz”</p>\n<p>安装scala环境<br>pscp  -r  -h host2.txt scala-2.11.8 ~/</p>\n<p>复制 flink包至所有节点</p>\n<p>pscp -h hos t.txt  /root/upload/flink-shaded-hadoop-2-uber-3.0.0-cdh6.2.0-7.0.jar   /opt/cloudera/parcels/FLINK/lib</p>\n<p>demo 示例</p>\n<p>pscp -h hos t.txt  /root/upload/flink-shaded-hadoop-2-uber-3.0.0-cdh6.2.0-7.0.jar   /opt/cloudera/parcels/FLINK/lib</p>\n","encrypt":true},{"title":"kerberos部署与使用","date":"2021-06-04T03:29:40.000Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n # kerberos部署与使用\n\n ## 1. kerberos部署\n\n ### 1.1 安装\n\n ```\n\nyum -y install krb5-server krb5-libs krb5-auth-dialog krb5-workstation \n\n ```\n### 1.2 修改kdc的配置文件\n#### 1.2.1 修改krb5.conf的配置文件\n\nvim /etc/krb5.conf\n\n``` \n# Configuration snippets may be placed in this directory as well\nincludedir /etc/krb5.conf.d/\n[logging]\n default = FILE:/var/log/krb5libs.log\n kdc = FILE:/var/log/krb5kdc.log\n admin_server = FILE:/var/log/kadmind.log\n[libdefaults]\n dns_lookup_realm = false\n ticket_lifetime = 24h\n renew_lifetime = 7d\n forwardable = true\n rdns = false\n pkinit_anchors = /etc/pki/tls/certs/ca-bundle.crt\n default_realm = SUNRISE.LAN\n #default_ccache_name = KEYRING:persistent:%{uid}\n[realms]\n SUNRISE.LAN = {\n  kdc = 192.168.10.206\n  admin_server = 192.168.10.206\n  # 指定默认的域名\n  default_domain = SUNRISE.LAN\n }\n[domain_realm]\n.sunrise.lan = SUNRISE.LAN\nsunrise.lan = SUNRISE.LAN\n\n```\n\n#### 1.2.2 修改kdc.conf的配置文件\n\nvim /var/kerberos/krb5kdc/kdc.conf\n\n```\n[kdcdefaults]\n # kdc默认端口　\n kdc_ports = 88\n # kdc默认的tcp端口\n kdc_tcp_ports = 88\n\n[realms]\n # 配置每个域的具体信息 (relam 请用大写)\n SUNRISE.LAN = {\n  #和 supported_enctypes 默认使用 aes256-cts。由于，JAVA 使用 aes256-cts 验证方式需要安装额外的 jar 包（后面再做说明）。推荐不使用，并且删除 aes256-cts。（建议注释掉）\n  #master_key_type = aes256-cts\n  #标注admin的用户权限\n  acl_file = /var/kerberos/krb5kdc/kadm5.acl\n  dict_file = /usr/share/dict/words\n  #KDC进行校验的keytab\n  admin_keytab = /var/kerberos/krb5kdc/kadm5.keytab\n  #支持的校验方式\n  supported_enctypes = aes256-cts:normal aes128-cts:normal des3-hmac-sha1:normal arcfour-hmac:normal camellia256-cts:normal camellia128-cts:normal des-hmac-sha1:normal des-cbc-md5:normal des-cbc-crc:normal\n }\n\n```\n\n#### 1.2.3 配置kadm5.acl\n\nvim /var/kerberos/krb5kdc/kadm5.acl\n```\n# 当前用户admin ，* 表示全部权限。可以新增用户和分配权限\n# 配置表示以/admin@WXAMPLE.COM结尾的用户拥有*(all 也就是所有)权限，具体配置可根据项目来是否缩小权限。\n*/admin@SUNRISE.LAN     *\n```\n\n### 1.3  创建Kerberos数据库\n\n```\nkdb5_util create -r SUNRISE.LAN -s\n\n```\n\n密钥存储至个人kee服务\n\n### 1.4 启动Kerberos服务\n\n```\n#  启动服务命令\nsystemctl start krb5kdc\nsystemctl start kadmin\n\n# 加入开机启动项\nsystemctl enable krb5kdc\nsystemctl enable kadmin\n```\n\n### 1.5 创建Kerberos管理员principal\n\n```\nkadmin.local -q \"addprinc root/admin\"\n# 需要先kinit保证已经有principal缓存。\n\nkinit root/admin\nklist \n\n```\n\n### 1.6 客户端安装kerberos\n\n```\n# 在所有服务器上安装kerberos-client\n\npssh -h host.txt  \"yum -y install krb5-devel krb5-workstation\"\n# 将server中的/etc/krb5.conf 拷贝至所有client上\npscp -h host2.txt /etc/krb5.conf /etc\n\n```\n\n","source":"_posts/王阁/工作/旸谷数据中心/安全模块/kerberos部署与使用.md","raw":"title:  kerberos部署与使用\ndate:  2021年 6月 4日\ntags: [kerberos]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n # kerberos部署与使用\n\n ## 1. kerberos部署\n\n ### 1.1 安装\n\n ```\n\nyum -y install krb5-server krb5-libs krb5-auth-dialog krb5-workstation \n\n ```\n### 1.2 修改kdc的配置文件\n#### 1.2.1 修改krb5.conf的配置文件\n\nvim /etc/krb5.conf\n\n``` \n# Configuration snippets may be placed in this directory as well\nincludedir /etc/krb5.conf.d/\n[logging]\n default = FILE:/var/log/krb5libs.log\n kdc = FILE:/var/log/krb5kdc.log\n admin_server = FILE:/var/log/kadmind.log\n[libdefaults]\n dns_lookup_realm = false\n ticket_lifetime = 24h\n renew_lifetime = 7d\n forwardable = true\n rdns = false\n pkinit_anchors = /etc/pki/tls/certs/ca-bundle.crt\n default_realm = SUNRISE.LAN\n #default_ccache_name = KEYRING:persistent:%{uid}\n[realms]\n SUNRISE.LAN = {\n  kdc = 192.168.10.206\n  admin_server = 192.168.10.206\n  # 指定默认的域名\n  default_domain = SUNRISE.LAN\n }\n[domain_realm]\n.sunrise.lan = SUNRISE.LAN\nsunrise.lan = SUNRISE.LAN\n\n```\n\n#### 1.2.2 修改kdc.conf的配置文件\n\nvim /var/kerberos/krb5kdc/kdc.conf\n\n```\n[kdcdefaults]\n # kdc默认端口　\n kdc_ports = 88\n # kdc默认的tcp端口\n kdc_tcp_ports = 88\n\n[realms]\n # 配置每个域的具体信息 (relam 请用大写)\n SUNRISE.LAN = {\n  #和 supported_enctypes 默认使用 aes256-cts。由于，JAVA 使用 aes256-cts 验证方式需要安装额外的 jar 包（后面再做说明）。推荐不使用，并且删除 aes256-cts。（建议注释掉）\n  #master_key_type = aes256-cts\n  #标注admin的用户权限\n  acl_file = /var/kerberos/krb5kdc/kadm5.acl\n  dict_file = /usr/share/dict/words\n  #KDC进行校验的keytab\n  admin_keytab = /var/kerberos/krb5kdc/kadm5.keytab\n  #支持的校验方式\n  supported_enctypes = aes256-cts:normal aes128-cts:normal des3-hmac-sha1:normal arcfour-hmac:normal camellia256-cts:normal camellia128-cts:normal des-hmac-sha1:normal des-cbc-md5:normal des-cbc-crc:normal\n }\n\n```\n\n#### 1.2.3 配置kadm5.acl\n\nvim /var/kerberos/krb5kdc/kadm5.acl\n```\n# 当前用户admin ，* 表示全部权限。可以新增用户和分配权限\n# 配置表示以/admin@WXAMPLE.COM结尾的用户拥有*(all 也就是所有)权限，具体配置可根据项目来是否缩小权限。\n*/admin@SUNRISE.LAN     *\n```\n\n### 1.3  创建Kerberos数据库\n\n```\nkdb5_util create -r SUNRISE.LAN -s\n\n```\n\n密钥存储至个人kee服务\n\n### 1.4 启动Kerberos服务\n\n```\n#  启动服务命令\nsystemctl start krb5kdc\nsystemctl start kadmin\n\n# 加入开机启动项\nsystemctl enable krb5kdc\nsystemctl enable kadmin\n```\n\n### 1.5 创建Kerberos管理员principal\n\n```\nkadmin.local -q \"addprinc root/admin\"\n# 需要先kinit保证已经有principal缓存。\n\nkinit root/admin\nklist \n\n```\n\n### 1.6 客户端安装kerberos\n\n```\n# 在所有服务器上安装kerberos-client\n\npssh -h host.txt  \"yum -y install krb5-devel krb5-workstation\"\n# 将server中的/etc/krb5.conf 拷贝至所有client上\npscp -h host2.txt /etc/krb5.conf /etc\n\n```\n\n","slug":"王阁/工作/旸谷数据中心/安全模块/kerberos部署与使用","published":1,"updated":"2021-06-07T09:48:30.185Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsek001su6pwakmc0ro0","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"aa982888f486bc88181a269998067dbcd50a8147fb7745bce454bedadcaf0b5c\">f29c680708acd02cbb1b6cceaba06192c6dd2f6601d553ce0ff9a9f55531414a7a92d41af602fddb43d3373cc9346848bd3c625c524fde76b042718d8b552109df7609291d47a2e5676caf0c739da666115a1d71bc3e626756993d3581eddb481f6c58d31f949c3f5cce8500ff228b1b3d1683c61f1dc5e4eaf0fd5e9ed77bd0a61a7c06e2a42dbb257ff63397dc029b269fb29a1eb728bbad7729ffddc4005f9a44e0bcfe25dbc8bf378c5f4d00c585ca7bac95d86c8e8c55408f8f19dc24ae4d38c23e8d14dd34ee00f4f09d1f0258b3d6176347ef13ce31c7bf86e1d45ac9dc1556f6bca86e5f2e8f9676eafc8c1299b5b8f22863b1992fa8b01a6ccd818d71922bfbbb0398db092a6d62d762161486b2c883b54eacf6a69c73f78babc97646190c037e5399c3c4276b2c19175a084f806afbb6f72bd6f55c310b258e67a93b7c850ad8acb470db20a8dd3e81aaff362bf2d48cbfbee994437d1fbaa729e4c499348646eede129a3d6fae1374770d3503fdcc6d78a662e148db8327a4e38127a29114774719067fd9aa1c9e8e120689799038ba0f7731ae9347cfdda9919d470b15003a7385a29e12865ead1ed129103b43a4f5687bb46b22822d681e287ad1127d6e6f332a5857336560a07fb1a48be8b63c8275dcd8065a8815a200bf5ae41ec78c0daa8ca4fa5400d25584352b2fbf429d14d72d1b205b10f9004fa37b730efe8de1b62a062cfdbfc89461e2acb09ea07bfb4f21afa420462e5e425685adf2d7b63ee0a617f27f291e1e3407746f460784ba49f0da22a74d63704ef9691ce20ed02fc1d1488532b8dd6087293d6daee0a017cccd7e090c789ec39bf77d7427d3657cb6e64b0f632f4508d977c5db316512e9f6b4d154ef02377333df207e490d9076058d2c2bf77fb7a86183f4a4ca459a857371bccba599a1bf2ae8cf6954f7a979c282743710afe37ec0e9bfb708f0693d049a1c50697c35c67e67687e660a3d69572230fd5dc7daf5044e1cc6ac0f6c96990196fb3621b42cefa2f0b5f0866cef37d71e1b258222f75b3d5dd87fb1f3728fe5aa8f8d348810a37cec09c6222fd74ab1d3ba9965015306f240f3bd8ab3e2be8103b8307caf4a37173bd4700f041e9f05456d52db53cf4aed804e60d678c9b45481d518b2a1d28edb345e944123742e05b1dc5a19dd15dbc37b5ae20461158bf69ec039ab9c676ac527bfb7eb58f99667a73caa47a1324182d2aa0aac92a9cb82cd215af9b495725cac669529acc5e5ab35b5f9e298087eaadd2599f4503e1917075ebb5984190ac84750aba60880ab46b5b79d748d23f687968bcc08de7a413d2ef9d1488833fab93f6f1359e945b2897087a8aa6cd8b93a1cf09ce47aef8bbc4a65b038a5056e9a4098646ef9bcb71cea8036dd06389184a066a8cedbb9be38fc9e79a915300cb8de5623b6cccf8af526409eb32a08906b3351022200b01437efc3af00bb18cfde006063969082f0c8614088ef0379b3781020523d59f458e2b9fc98d93e341b72b5da7bccd0b2c0bf8d597ba001b6a7feda5fe2f3edfe8da9c70429a2a218fdca22261c3126598bafc3efedd118fa9a71d2e552d3e1f4af5cace845574fc035470149f65768a0dada9d21579a2cbd652d3f1a99bf7adce9399ed8629605489a82841d286882d2758109ae59745975cc58e709864620344cc95c1284101cfd3591d854cfd90a897e065c05fb909e258bf5138f4ca1e5df31f11a9653b5396ec2528735858ef44a534e617a7d892d3c98142ee6e0f48f2bec75d5ff8eb32f0be323fa46c0f70ecae5318abec9530c1fb2be061023730a6b15a582eda02183d14b08c955efd2be10f6241142aa2881104d906d296b7608e860bab393590b8a2227967f6cd4f4d65da8c2f47684d981b88155e3e15652b893a1e56e15e9e17ba0b565b4f89e7011ad2840d5b5521e09fbf873f0d6b2988995c26917ada5e1d1708cdec800ee8a7b5f5ae58ce9654ccf248458b70f527443152bc18742ff98619a5a8609de8a94b7883b8e2fac537f8810e73e5e35533e6962e742eed3c235dafc04fd28e461c57e68c456e8ab8eab5722ec5a6a69ccca633ca7c82dd5d93034c081b79bdd20591baf19e9877f5b868e2e915e32fb192c8e1b5af5faeb5ac21637c2c0f86aef09e3f106dcefdfd8b967b7e2ec6a94315265f9f64ebd279420f73b9c2f5c19f93bbbe414552856b52aa0c160ac7cf2efad58a70b4a0bad27f0ae4beabb15d11f5016abfcda2519daa76948dfb122f4e961e30776e889f46e804e4a6260d2864ea244726267538e0bbaedd918b92a1f061534b52b517e63f2dbed8266e6015bb7880e5007842a00a4a718a19dd7d02aa2adaf6bc3fb76d0818db5d051aa65b049fc9a71055bf9d7253f1c7d48d34ccfe38932ccbf97eb70b8abaa8d9b1bf785857b315a34402a14908dc6b5cdffde523799c3b7109afc5d21aee92f7496550716e49c4e1912d27d1caf3e65914c25ba1e4e1d55aebf6ea1a23dfe97bc4e4292cc1a0d600c4b9a1485554d0392b6f98b0949899e6e65d7f9da9cdbeee318da2e4a44a8e58892b7fb730dd78c17958426102c696cf717c825cb7b439f33ecad914bccf296dff1a8ba61c46821f8e14b20adeb066f1ce079669281c37749b8db763253c0e367351a47b7a271e4e20be12d3610048025cf8c619f670b38f78d91fdb4f5294725c3b44d6421d771d135434f9ec70f7d4f52f296086f1ff6f3c39a5c8120733c5ca6149d79a00be828ef029bf25fa2341734dd4d71f7d3e6692b8717e0afc76e2b6b07207d635621266b3af57d1bc3b179d46e768ccc842445b7e751b323366ebf91262e64caebc795eceeccf4c910a3f6621ef43c771767e48db3d7a4e3daff2528e6b17bef5b6acd193bcbf4ca66cabed5c5cb60fec01fd306431a64d61f401a6fe7c73746b7e44a1eb36971aabbb9c9e639b08ddede6fa3596c6251610de82b7e8ca21c3ae6a8920fad03dedaafda7dd7e73fb38a9e49928835fc4d42e8b621dc22038d220951349107ad5e3e13311cc6249a4218d4945206d2e290e96c9382d57a0669b081e9650b8ac1c924e9b81a93add76e51c40391b7c2f03dd34683c337ed8a8ca4530419b93c27183def42a58fd82afbf10ee5000f7318b5f07e407d498cca6be86c6a351def6a0f344eddde8d0f72963aebc4c34aedc54ae12779a7f5ebc4e8f5cb56d83844381531a8fc462a421da96aef7dd93a12aab1c6d684a393b60af3e509e0b74532a0c78d8d28ecc84e35b89be8440b0a00f13f38938795a7834929b4279af1ad28b04dc76476cba8fc8e4ebbb2cd8885f5e83880f4d83e3547e43bb3128c9a0a630115c7c1bec0040b91a9715bce7828058b86e5772dc33c979e343f0d056028ca535983ff63278c5adb067a58113239668417521dcdf5c5f7011217c8da64af4b1fd0678c1a53279ec57df974f356f97dd7cb78afa5eb4938946205b39a0d799b6a4b918525efa8cbd62fba6aea4605c54901a19b11c25644312af35d3f5ba56bfd9b1a2a5344bd576f66bac5bb6c06114cfed43bf3ce39fb278f49af939a29db34803d6dba6960640dcfb30557e4f77f99b359cb67de092b5f0e35042833cd28bb1948c22795143473156dd0a711978a53e77e385d65e82adba89f7f11b7174d0b4faaf85fe0b561e12ffdf8639d793a486cafbe1e71f05d866d1f98a80357534dfb13803fd463ee1616acb51b474928c3b5c98a274dd37d83ddd3bd28f915b5dc342b8bde076a20ee2b979417cb17219051e8dff23237d58833c607fbc7d561d01232ee417560a8f94d792a9d946c83a52f956baa022dc8b86c30bca5a050bf7361db00848a01ef56d76435624edb88e7a8da37b14fdf2898000d97a917b949a2663491dc125810b440ce42885563987812b8dcb259d0afdb7195ca201196e8107bc323fe3442e07489220557ecd0c081f05a99430326f932b0d5c622febe6921ffe4a8bb57bd0421fd77ac9a1bb38d0cda29f05b5d1c2917e35db45f917e68f6f3333ec07b842a7efb999ce8abae1d72b569ead8a2995c7df4a0b49d695f3ab690c50e21b705677c5c6141a83220232d64b2511e8ce33e9dbecb84a8441a09c82d9aeb4c38fb20ab4f6b886c0395d0180cab96b43a6702441c7333af84629745221a88a149fd063767768b57367abd8780b5c1cbbf07591f4a48b89537c7648c26c2d10020299582e68a112f21d1e54de22a885b3f3b84158b50c55d1d6885a50e61249da9d2db3f8c8037248f52728ee5f53caa93852ee10cd8410bbc1d186b457608b0413f6c8e36d55e8cd4eca30065ebff568c575ff399a7fb3892ea83cd115484c5127e9b4675d00dd2e6ae08617c4345ac89bb38554cceb3a39660937c54a38057b130172d37ca5976cdaca34d5bd3b3ce5ad0788ad4653e01922d00bc60d33b4d113364f3a24ea3cee0d2a33e1ad580b99d5bd562259ae4554aaa724456be0f33ae979e37cdd5f5e6e7d1d1eee204d7889934028961734127bad2a171a887ba71590a6266646129f41a754261adfca80b4b99ae8ee4379ba1c06696ae8f8c3decc273dcd21b1dc69d422f3cc0330f87a187424c85ddb5f4a0d01995ec8bc9ce139494d9a33fd084c33d07cce21d3b130507ccec923027acf41d5ce077e823c9cfb25a8ad0b8e84eac792819ec9fa64d2fdc30c53cd7b06f415206fe59361aed9d8fec3adc3b6a257f434633c8d97550268597d6c20d06acf08ddc8b9ff5d80ea6e36f8f7df7b05fe5c699dc9256d864843dfc94c9160dda53de559f36e66305c2e325dcbcfb3faa9ebfb348e977e83ab7a73d681472c1ae5baf3ee987a0af8a81310db656327aaa77919d8ceee60f4a3eab930dde870670fbc5d0adff4fe36123ece1f8d1a87d417e00f333b8a7c7538899e8319a80a7169cf73138b1e504743f1c50858823e72ef063dd8c7bfdea29ba116e97dd84c6da0abfd7cbc96359f3c10b7c48ea12a4b51258aa14f11858b2f2c2e3ae1a2668e08c7d0eddfdc058a3ef8fded163dfc51235c75c0e4e99bcb90c7740e9be55183383655d59db12d21db1619e6d73f58a66f9c0fce93f7c8a0f0d4e8c369a1d84b7a431ac5a5bf3459ca7408410542ad48371d4b8a017ce2b6ff5b6e4fd143c28c1c7c566ffeed2b0dd20be3af7f6481df8e9c1ab0518316859af9a4aa5d6ed6d51c5b41b4b439f013137f254e27705f9aaef9551f1b294f3a34002a96265522bf929e343060e8182379221f8de57ea8fde239fb13922f94378b52803bc9f26954fa3e2af65745056fda503b447f859787b002c41313ffd2c82850aa3ed1402e03105a320f30faa067df2923283c1b740b0694294854830794e08a24edd172ba837c55d3489b4943a894454d25617349522915e947f1238c64e35286cfdd28058166c9d0413328a9a0da1198cc868aa7ad93ca71d87b5279ef8387c6d68475bfca256f35caf18d38bf92e0254551f7384a49449e6871405673af2e806b98889e2d83589b2aec9e8ee9e186a4a7ff76f7125c063c9c4f1933eb3c608ce9b4c0163222c150331c4d0c2575db686f5cb91c5232fa8a292b6bee3b088a14378c11efdd6f3f246c4124f98a94af22a140369df4dc0c1be0b67ece07005e5dadbef8b0f9ce3beee85cdad79d9e928c467cb64ade7b56616ddc6f8471a54e6075db43149d76ba534d49f9df5ed44265f71b13cea8d949433d4ce2176e04e738e3858c3b96f1b0afbc6341a15c273fff9624df13adb0a9a4e5723490da09686501127465f605f3913a652767d30a63018ac14d3b64d47aba81eac99bcdf048c0daf437812acfa7d283d37721fadd54d637e1899ba2ef563c2f2e473343cfe8652a0ff85aad5f159b97d79c9a8d845eca35a2b7c87041194e9425de759567f2f57c0bbbc48a0b05ca95ab6d60b7864f14557a2bfea9386ec36078495bdbb2a139e73b273357021cac9ee6bb7bb9fc10d410e8bc36a1445fad972dcfc8d92b9c4203f3d64aaad0e0e5e0e95e9a7280bfc200da747f158f63a02f8f65bfe44b18e30c616396e397cab5f0e5c7e0fca3ca0fed06c4229a860f1921ec624a59bc32d5eeb4f127fd9177da5f34dedeed7c67d18ae82e5482250772b069a77457f892697c288a9d083d35661a095e25834af1776d5893b0c14e12b3be327bbefbb67baa2f58f22cae150a0ae810a6f4c30d0dd0a35b1ebf79ffd384a4a7577b7708c3b1221b193528d710e2faf9317786063d557f771707478a591939d956bd3367be43be5044211d66ee53d129d098e91da7ab069eee64a4b1eeac1c25ad17ffcc25c5f6ae38e74a9e32bc144f0897e1166d6ba9cd32460938293eedad31d224de450bde62c2b599be815cdca5052604bb972b86e549492e29373327d1a10444bc4997a7a9cd677e67a964c067f05da2f8641145d57f438a5cc78ae95c5256070179da1f113bd8004c543d455b49081938907af1635c86f48f552b700f173bf6897adb353c3324ba7de8c4ffeeb53d594fc64dbdf89b41ff47ceaa34c81a6fa513502606148dd65435cd478a9b06b42fb4ef8e1aee6657803a58c307effc6c97f5f1fbaa9ccf491df79e5aa01cdb6ecac3fa0211e27248943a92ab8bd401d3f8a8ef60214d896aa58e66e9b6b822337ba55f28c834de5f1a483a22c7029df40048ec76ec41928ef34c2c74551b14f00452ae6f664f98894380a29ba9e0b1a84e5c2cb3c5e5d239dec467d94e22b4badadc43ab5a618f57d0094c2b943c5124ceeab0949be7dfd7128cac6002813f1be94d6add7852d4b258fc1f39c6cb7d1a2115920d660de12e7f345b5795231b95befcbbd2308df0bb94d35ee5e43997568f0edbeec17710a1b4a8ea43cc8632ce1507c6f887e17e523349f279fb2dea0b69e33fde44efac41d345cb1fae581de84cc2b52d98740454afa7140e6b7df35d8eb05e311bdf8401212ad701f364a4972b318bbb249b4e530b5dd85d3b35dc6b9498bd1fa305390046d20dabd0c00d95b79895cbd3e2f7837daff297aafff3dca30fb4948f00a87039cd1c9ac5a8b73462fa673fa6dd40cabee904e3e8343da99f3685bb7f4b44e8f5aa6e551790ed3c2441a431ec496abc31590d5b9327101851e3a38ea19e20a77385c040257f6a8473f677d0aa0977ad0447d8cf9c3ad5a777bbad965686241756a585c042eeb70ca746ad9e9cbd35869ec9c9c3c22e9a3204fac54f6d0ea783226d93b6caa33758d8af550c83d07ba24f32f2a681c59db2e03b4665cc8c9af13d98e9d4d8daecea373367e031461ba0bf6531b86f789b449abe4ba0c309572adf4fd4ebf22a95f6559cee503de396420996af50ebaee4064199fa1cda5416fb7ad7496c9cb5979ab59f863c7b904cf821f96fd1981e3e55d5378536fe00f4d10e60bc3b38b0f237fd368b21345926d83db2d4ece0b273e2636665cfa2dea36f979355dcde2342e0af5994d3d36f4bc1f4b627cf076a7710c7a3f2197061a29212f7f8f332b6910988f966e4d4933b37d4ff30197d97c67545cfa26bed61494f2a3e7161bc643e8ae65a249ddd147da5cf4852add20d15458ba8952190f9bb5d8516ecb12af343e5cf21abdafd3dca4a776a4d195c995e40638dad204fff7e6877f0bd33edb95542cc56c42fe7136e843863cd34215244aa1d8d1b081d50271a80db8efde7e0a346a56ce74956a7974fe24c119cf32dac68da8fac4ae1a8df27c929fdc8f06d72867925496a90b52020fb452d2ddbad77a44259e723ee21567a0c8ceaf74ef02c7de8df0fe03cc6bf054b0a917b0c40681fd6718600f66dd3b93609c29841bfa6f63dc267fdbe58d8ee165de7969550a3c121dbe61a99a6ef862821c752d6587be87d5b3a2236babe4a47ea0a7fa4347b55b07baa13d9c55afb5f2254d52eb3703a95a60a55a6e25248279037b5f782973713187d48a4cb1d4b129bd4e5b01d48074032409d7a202c9e3747e0ee247d3b5318d7ca1bfb8448d2a22088691cb92e25ac016fb7067e65052ce727666f9d347b927e206a06e2b1f2c4c40464fd3b2548c4662b9b31c3b0a94edd9cc1d9e3209f5f287ac0b437195ab5c089dc3cc84805f63413b1f94cdf8cc6370024e0c22f430b6c44b5bbbf688926bb469b7c5f81e9c65c503780c45100b8e58c9e37679cc47659c8acf52989014fb187a81a2c980c6fd10a28726e881c77d9dbc7735e9f15745eaa7ce3c4994735eee7d529775823bc6902ef4afa8e63609204d5f1d7007b911081ea9e0eccf0f04db4ee504734dd5dd05cd74b49725325246d1b3ccdc643d27c684ee127a846a255e7d80056d64ed4e991395910faca711eadf53ef6176c3a698ef1c8ddd1baeffc4316d6bf00095fa64256800cb0921bf5b1fc6d0ecfa1465bf0f9c0fb5e626e95d73a11661e919b62c446133b8561fc4b16f2921b03726bd55837f9b942a13e7d60e515a3389c0a2d0863cf112e771f6b2e467eea9ad3a2b8d4591639a26df33b13da3ae1b4315a481db2372c6be4de1b740be93a1e813b40edf451b0dc6a93f33587a2462acd31356da6c6f20546a81812603409f5f9144a1c68f43d89201a1140cc7d712c4b95d45f78eb2b65a6d2fcd8fb07eebdbf87259833703f79655275ed11d68d53e9c352c56b89f2c39424735095d958f5f37cba242d34c6da30c7b5ebe8479101f6b1210b9fab106c4bc43a9031d5e27f6a8fb31a0ca262f5c7425bd56f8696d3a090c9c355290e135b0452499a6fc54197b49d65cabda9858ad6b29ae2b7774827bf9d706090024a905912c1c5869ef399076def3871aa1cb3ac15cf0c177e309e68289ebe74b950318701b661338778117b228a98a2a37f66aeca9090699dfa1dedb532fafae2dcc94facb7f3cc0101c73e02416556891bbcd6396544ebac9c2814ca18d29f5b9edd795cb6e081445e679833a14ed57ab69ef830220042f245db3edb7490de88ac4a1bb499137304840896b4a68b84ee7c55d2edf85b8f5c300efbe6c1bbefcdf1fc062e3e25a3b676b509477597646684949d87d4515a6204363394e56c77130e73304841c0992bedfa61dea71c0da13323ffe6fb8cef1f4e11d824846c5c18af1ce2d1216997abf1061ee9ca995260eb117d8ef3e7181f9c9f59fde77fb95fe107bd14720b33e2e4cc1dddcf0dfa79f2dcfc51f98205cb13aef1d56502b55ace8d79cb3fa28f6956809e5ec69943c11f6d6c1a7d42bc0280110983ad16041660af38cbef2756de3b42571e0538f32cd2c0e5a74433d250cdd2fc06f23a3272cfe176e30e9813e13c963fcfed122edcf4bb7645a9e7b0d0f57f4b983c2a3b102e066c611a468321786a024100171f1f3318615c165cb01e8738a91d6bfc7f8eec22c17d51ca2e131e4369f6847f59589b7cddf1721f0a9ae034654a6e4bf8ce7726df3c168002cc78b8a85eb4db7f73a0b50e18e311ee688a9730a40f332f215fae7b26977d793bb40c05c376e686bd5e1b61c427a25a4121961d08728b956b572fbd7f5c35a4664c6b9c1d2d624decf16eaf3dc665f1a30382ef91c78d149349591b464123c35b39464197dbade828eb6b98462626885ab1ec54810b16682284d581bb69e89c764dfcd70decfd3eea02d268205782a6e832c0ba1419ef75da31f05fb23d0c5bf5ae1f3eb1761d32e2ae118a8824673cb9d21d31fad0f3f1420118a52bf05e89098d6c84898aaf72b584cbca8f317517b83c8110c485ab7ad29d075e20c495b254a5ab5a41d1a9dbb483cb875e9bc13104def84f4e0813a62275c65de615bb92fec4132c959706f8f0e27f81bd84eea72fe7cd29b3be37498c53265596ee95580f040484a4817a3172bb5c0c8e09510c229d2544d85aa3c16129d6f8e433550baa0d8003161488aa89b0bc2cdbfcb0477572f106dec4698f37368f3f189c7d13632cf5f0261105cec5d3d5aee56e92513a310d907c31ce40cba39b2d32d995970610b8f0c557e4e9b98c9189171b34a471776503c651eb4a0e97aa5b30f077114579cc3f6b5655d3e2117d3c626486649d541ecc03c157e0918fcbddd600579a1cbf4f2f528c7db5183c998e19d520ece60618193b0ebac38118ef7ab0796318f377070e4041a3c3ce5f93c91cacb1f5d8206228b2794a9bdef27072376c370738532bc062e929124aa2fbc1d5cd6d86c4e2d6ecc3a7b3f340f12fe58c3608a1ceca77367dee8f7ee4514358cdbb0140f5a2579e5dcabcbb5023ce7191fb24061db5788fbb7361ad300e7b74d3ad9ff654ca541b7824b1cef186c0dec118e0cfd5a9f2a6722d7a2e081fe801a39b8794f8bb853a7a93b9ed3e4aecff6d58cc699200c41e9b89bb3c6594385c4b537b9f70d32edc7d9367dec999af7aa8b09992cbb93f755cb522baa2a296481f3bfaa5eaa7e39b54080f9e95b32554f62db6a2d51b27c76f30e53285e57e5d4d8e269ce930b805cbfada27591fad943125c72d6aadd40bee1bf1a30f6f105ec91044482e22c973e82c27a993ca8402d2a0de5bbdbc6c2c6bbe18909a21888520e96d6569c646907301e0d4563aebd2478c2abba49a5208d70e715ca71d9bbc975eb54624125efe7f1296609e9e5fc0cd4e9ff4b6ce4c479bffeea26aa5946c7253cdeff7a026b96663620026a6b7695bbf931e115da0caa38840a85c3542e83cbf96361673a8cfda3dcebf82edec1132af6f270c7768a6af0c6f781e9a1c7678f3d44ae71622cce28fe032784eb568df4764f910f1363f8386f250a6bf1be4796096a3194b16e09495b399df298774889a8c158d67e4e67b23f216e4b12a23b0c4fd320f2245e44a35748b7057134133ba3d3dafd1940293f8a1af4f1920f8535e0c72547b9365a6e33567d0216215549f39384f47ebd43e65c1dc77bc98dae602111db0f74a7032e56a072d1f6e6e15300b8a1fdd68af1cd4540c5075064de620287311e921df5fbc55ff472bd36db405a0db17ce9716ff15db0efb01e89b7182284800f8acdd48fdacaa5eae26af2671c4da2561c4211974865b3014bd4975bad41d906bdf193e7b08d523bb70dc4cb439c37cb6b06d8e5577779346a1252a1b4efbb8f300abadf92b3e54c0bf54a275fe0096e6a3cddb20add4d7f8a85438dae054e5444e45c7fdc8d813385d96b89abc290b04eecb2977cf00aef68fb091dc8dfcb4e03d8bf63fbe41eacdee2ccbbf551fc0f5aec83f0a36c3ff7a3cf4955e240820f6c01784ad52ac50f856c0d2eb8f152296cd66eb1a26413e4bfc51b2afdf5a64e12d880f7047ab6d38431eea6b2e92a10bb9475f5d9aecd16c491faac983c2b0106a47b41eb2d5eef5e0462b248175e14f6958df6a5bc2045513418a29a3acbf55bd144b9d7516627029fa81a5fb9e5ab14a4153c5e329062528f83e67aece98154502bbebce4332f687fabbf7cb4be6160b610a39af63508390b6e6b7611da7a0657ba7e4223caba7be5845a5fe694e770ac72a879d927301b9e48f7257d3bd3bdc58cd7009da25f56f3312b86d014f4fd156f42c1a093309fb3f18dd6c60d571d784ef395040c8b7f9a7b3b095044fd1526ec292eb8e5590a7c7b077c82f1f80ae05438eeb8927d223c7df8cdf59c3d97df0957325d25d2e67597a755884ddd5668aaa04012a090d4acd3ae8d59086f12c0684d70e96bb7c1db273fa940be3b4165f6dcfac8b526628d29ac39cbeed341d8bea6117c9b7269534a57e8bc64c0723e5913fe7937356744a715a3f4ee74b59ed12a896d17bb2cbd8e4c3876b1187f57d7c817f70128cf610cfa876f9ecb2117ad924afe3c9056c9d5ac2ccc5d21a6a785b7884b5b21588b2a17d8730164f8d654a8c4fb0b4c2266caaabebd0998a1c2eb827f57c85650408faf8b0522c0edf867dd822cc020280c5d61a5a24883a89cdd7bae29c89fe33959cdd5af8c537c5abf5d0f70789d7a367f514bdaa3882f15ebd7e76ec47fae18beb531960710d3e33ffd4e03128f94a4e8f42a98bf82524e584ed5c24492ec6bf05fe060ef026dca749e47637062bb98460d26af5daa0ca462c07286ba5f80338107e3340ebd1c68daaff6d3410b0c9775c2615d667452490057aab82607f6f55ce92489b22a858d30947d08298ce34cb0f46fae4bce4463cbe6c19c4da6ff729b2435e0a2e80e397ef08cdafa80cc5abfb11a3cc7463a03df300531bbabddbefdc9c49ea64aaedc79d11ecfc58152fabef2f22dbfbc31b164f228ff406c9fb433afbd39dde0b81ca5d238c4903bec0a33aeeeff0e10d2ba38b146797805abe5edef36329827a579cc8684e1ff96c9d236c2e40c0cc00b2cc6f94738ac3cc3cece20157acb3da9d8f38e2ff2c85fbc0b56c8b1a46e40fb734d7379248715a571ccdb8d78ba176a36a6cc446fdf0cbfefb3679d72e2df8ee50da9010df12f01461974e9fe05eee19ed3d9fe0def57a0c293975cffbb9fa60abf5f37718ba9039887519803a2c22fb83fb19dc3ecfbb164453408e1c627802f9f1d2cf6fb9054d55142c89f965fa23eaa17d6cb049292cc1b81a3aa0a3f8e91ca8156e15375ebe632921730beed61c7f491d847371f5895a152852b1156772646881e8ea42a9b70ab35b57ce0c905212b53028c49d731229bc226d313ee15acc0e8ce49ebdefae4c30c995a04972210d9841107965bce6f64c9b88d8da2389ec713050c99893ee68efb68b137208da58a77dd5526f10fa3b14b301bb4ebc6e85d91dc8dae2c0c3d4c7bf550908a27f34664af509220b3aa4d8bdb4799d3545014e37ef9c5058644377e184b50abef2df91856003664eff86b2394373a14793788ac984a8ce8501845e243a6974209f7bf685ae62f6fdc5ff8b04c073336c9b59a1d5e2875f2518bda78fa48ab338b7065dd3c89b9287f60a2fe0509c82623ae5a4edb1bcb5cd0fdc14fc18eaccadb7d0872aad5f8c48d53e3bd1318c13fb5e04c635d1e872e989c9cea3f2005dee7b66c826b5b09aaabe20d9734e78b22ff2f669b14d1227d6ae1a78d778aea35c5687822f5e95e539bcd603ea2796aab1893eab71d55b0c2ced7c53d27b1d776a8ececa9e60549265058ecb5950379f07d50e925fa38c5d3931b2c247f7153e45b9dbbe19d10b43cb0c27dd5626915c92434872a915538d98c2b02c76f569fa045b3a7fd8363c5eed4e0021c6f98fe8f0939d278f37062d13c3fb2968606c70ee0f0ef51f21767ae9423697b9e2b4fee5768f3be0e261f27dda6611b98bd6f0f8d1c2278aa38a6d2ea040e59597cae8b6bbfbcce6696d91b54be1bfa79a393694eaba429009754c4dd74403a558913d3ffa7dc7d4ad56b34a472cfd21a93bf6bfb36873b4ef11b4140fbc15472a6fd89230031fecc95fb04f96e51f1136c07130edc6e733913a4f9ca4769393d95de1970777ead0cd85461285804ac88c2cfd70cf69f396809ce0a87be55c286142d6526136d468b0a206a97bed36ce4232f8281af11e3f63113b416a56473831c34dacc68f055738dd0bd3fc2f6801468261f50e5ffa9febe97ccbba9c2db34bba4c10a353628f36b80fe450aa98297ec37f40d0d12c99ead46106cc5e879d1c88f90320b0a5444533d4626c4f6f9daf93c8a011db6077db247344159181db26c773b9dd87f36e2d70e4ec329da12b1d60b93959ff83dae96d072e492072426a89832526b9350c188b25baba9e6b012c6c034d2ebb88b6bc9b8f1c7187dd10602c50846428daceb95223e92c4d0ea9f67a7c92eec2903dded97f774346584a9e906c64750a9cb1ddf305c35c15ee79ea27ea54d5a7c7e15cb0c00924393fb7c9bcfe5853c27acbafd36af8e0a997ec9ee77</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"kerberos部署与使用\"><a href=\"#kerberos部署与使用\" class=\"headerlink\" title=\"kerberos部署与使用\"></a>kerberos部署与使用</h1><h2 id=\"1-kerberos部署\"><a href=\"#1-kerberos部署\" class=\"headerlink\" title=\"1. kerberos部署\"></a>1. kerberos部署</h2><h3 id=\"1-1-安装\"><a href=\"#1-1-安装\" class=\"headerlink\" title=\"1.1 安装\"></a>1.1 安装</h3> <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">yum -y install krb5-server krb5-libs krb5-auth-dialog krb5-workstation</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-2-修改kdc的配置文件\"><a href=\"#1-2-修改kdc的配置文件\" class=\"headerlink\" title=\"1.2 修改kdc的配置文件\"></a>1.2 修改kdc的配置文件</h3><h4 id=\"1-2-1-修改krb5-conf的配置文件\"><a href=\"#1-2-1-修改krb5-conf的配置文件\" class=\"headerlink\" title=\"1.2.1 修改krb5.conf的配置文件\"></a>1.2.1 修改krb5.conf的配置文件</h4><p>vim /etc/krb5.conf</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Configuration snippets may be placed in this directory as well</span><br><span class=\"line\">includedir &#x2F;etc&#x2F;krb5.conf.d&#x2F;</span><br><span class=\"line\">[logging]</span><br><span class=\"line\"> default &#x3D; FILE:&#x2F;var&#x2F;log&#x2F;krb5libs.log</span><br><span class=\"line\"> kdc &#x3D; FILE:&#x2F;var&#x2F;log&#x2F;krb5kdc.log</span><br><span class=\"line\"> admin_server &#x3D; FILE:&#x2F;var&#x2F;log&#x2F;kadmind.log</span><br><span class=\"line\">[libdefaults]</span><br><span class=\"line\"> dns_lookup_realm &#x3D; false</span><br><span class=\"line\"> ticket_lifetime &#x3D; 24h</span><br><span class=\"line\"> renew_lifetime &#x3D; 7d</span><br><span class=\"line\"> forwardable &#x3D; true</span><br><span class=\"line\"> rdns &#x3D; false</span><br><span class=\"line\"> pkinit_anchors &#x3D; &#x2F;etc&#x2F;pki&#x2F;tls&#x2F;certs&#x2F;ca-bundle.crt</span><br><span class=\"line\"> default_realm &#x3D; SUNRISE.LAN</span><br><span class=\"line\"> #default_ccache_name &#x3D; KEYRING:persistent:%&#123;uid&#125;</span><br><span class=\"line\">[realms]</span><br><span class=\"line\"> SUNRISE.LAN &#x3D; &#123;</span><br><span class=\"line\">  kdc &#x3D; 192.168.10.206</span><br><span class=\"line\">  admin_server &#x3D; 192.168.10.206</span><br><span class=\"line\">  # 指定默认的域名</span><br><span class=\"line\">  default_domain &#x3D; SUNRISE.LAN</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">[domain_realm]</span><br><span class=\"line\">.sunrise.lan &#x3D; SUNRISE.LAN</span><br><span class=\"line\">sunrise.lan &#x3D; SUNRISE.LAN</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-2-修改kdc-conf的配置文件\"><a href=\"#1-2-2-修改kdc-conf的配置文件\" class=\"headerlink\" title=\"1.2.2 修改kdc.conf的配置文件\"></a>1.2.2 修改kdc.conf的配置文件</h4><p>vim /var/kerberos/krb5kdc/kdc.conf</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[kdcdefaults]</span><br><span class=\"line\"> # kdc默认端口　</span><br><span class=\"line\"> kdc_ports &#x3D; 88</span><br><span class=\"line\"> # kdc默认的tcp端口</span><br><span class=\"line\"> kdc_tcp_ports &#x3D; 88</span><br><span class=\"line\"></span><br><span class=\"line\">[realms]</span><br><span class=\"line\"> # 配置每个域的具体信息 (relam 请用大写)</span><br><span class=\"line\"> SUNRISE.LAN &#x3D; &#123;</span><br><span class=\"line\">  #和 supported_enctypes 默认使用 aes256-cts。由于，JAVA 使用 aes256-cts 验证方式需要安装额外的 jar 包（后面再做说明）。推荐不使用，并且删除 aes256-cts。（建议注释掉）</span><br><span class=\"line\">  #master_key_type &#x3D; aes256-cts</span><br><span class=\"line\">  #标注admin的用户权限</span><br><span class=\"line\">  acl_file &#x3D; &#x2F;var&#x2F;kerberos&#x2F;krb5kdc&#x2F;kadm5.acl</span><br><span class=\"line\">  dict_file &#x3D; &#x2F;usr&#x2F;share&#x2F;dict&#x2F;words</span><br><span class=\"line\">  #KDC进行校验的keytab</span><br><span class=\"line\">  admin_keytab &#x3D; &#x2F;var&#x2F;kerberos&#x2F;krb5kdc&#x2F;kadm5.keytab</span><br><span class=\"line\">  #支持的校验方式</span><br><span class=\"line\">  supported_enctypes &#x3D; aes256-cts:normal aes128-cts:normal des3-hmac-sha1:normal arcfour-hmac:normal camellia256-cts:normal camellia128-cts:normal des-hmac-sha1:normal des-cbc-md5:normal des-cbc-crc:normal</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-3-配置kadm5-acl\"><a href=\"#1-2-3-配置kadm5-acl\" class=\"headerlink\" title=\"1.2.3 配置kadm5.acl\"></a>1.2.3 配置kadm5.acl</h4><p>vim /var/kerberos/krb5kdc/kadm5.acl</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 当前用户admin ，* 表示全部权限。可以新增用户和分配权限</span><br><span class=\"line\"># 配置表示以&#x2F;admin@WXAMPLE.COM结尾的用户拥有*(all 也就是所有)权限，具体配置可根据项目来是否缩小权限。</span><br><span class=\"line\">*&#x2F;admin@SUNRISE.LAN     *</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-创建Kerberos数据库\"><a href=\"#1-3-创建Kerberos数据库\" class=\"headerlink\" title=\"1.3  创建Kerberos数据库\"></a>1.3  创建Kerberos数据库</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kdb5_util create -r SUNRISE.LAN -s</span><br></pre></td></tr></table></figure>\n\n<p>密钥存储至个人kee服务</p>\n<h3 id=\"1-4-启动Kerberos服务\"><a href=\"#1-4-启动Kerberos服务\" class=\"headerlink\" title=\"1.4 启动Kerberos服务\"></a>1.4 启动Kerberos服务</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#  启动服务命令</span><br><span class=\"line\">systemctl start krb5kdc</span><br><span class=\"line\">systemctl start kadmin</span><br><span class=\"line\"></span><br><span class=\"line\"># 加入开机启动项</span><br><span class=\"line\">systemctl enable krb5kdc</span><br><span class=\"line\">systemctl enable kadmin</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-5-创建Kerberos管理员principal\"><a href=\"#1-5-创建Kerberos管理员principal\" class=\"headerlink\" title=\"1.5 创建Kerberos管理员principal\"></a>1.5 创建Kerberos管理员principal</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kadmin.local -q &quot;addprinc root&#x2F;admin&quot;</span><br><span class=\"line\"># 需要先kinit保证已经有principal缓存。</span><br><span class=\"line\"></span><br><span class=\"line\">kinit root&#x2F;admin</span><br><span class=\"line\">klist</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-6-客户端安装kerberos\"><a href=\"#1-6-客户端安装kerberos\" class=\"headerlink\" title=\"1.6 客户端安装kerberos\"></a>1.6 客户端安装kerberos</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 在所有服务器上安装kerberos-client</span><br><span class=\"line\"></span><br><span class=\"line\">pssh -h host.txt  &quot;yum -y install krb5-devel krb5-workstation&quot;</span><br><span class=\"line\"># 将server中的&#x2F;etc&#x2F;krb5.conf 拷贝至所有client上</span><br><span class=\"line\">pscp -h host2.txt &#x2F;etc&#x2F;krb5.conf &#x2F;etc</span><br></pre></td></tr></table></figure>\n\n","encrypt":true},{"title":"数据采集服务","date":"2021-04-28T01:22:22.000Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n # 数据采集服务\n\n> 针对项目和产品化的构思,数据中心这个载体中的基本组成部件中,数据采集模块是必不可少的,在以往的经历中,数据采集主要是依托于某一两个组件,运行的某些采集服务,比较功能和内容单薄,这次对数据采集服务进行一次升级,封装\n\n可能涉及到的组件和内容\n\n1. flume\n2. beats\n3. python\n4. java\n\n## flume采集\nFlume版本:1.9.0\n\n> 因为结合业务来做,原始采集的这个第一环节，尽量封装度高一些。所以这里对数据源，一是关注采集源种类，二是关注采集协议\n\n### Source\n\ndemo\n\n```\n# example.conf: A single-node Flume configuration\n\n# Name the components on this agent\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\na1.sources.r1.type = netcat\na1.sources.r1.bind = localhost\na1.sources.r1.port = 44444\n##这个参数可以设置对接数据的编码格式。\na1.sources.r1.encoding= gbk \n\n# Describe the sink\na1.sinks.k1.type = logger\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n\n```\n\nflume-ng agent --conf conf --conf-file test.conf --name a1 -Dflume.root.logger=INFO,console\nflume-ng agent --conf conf --conf-file conf/gbkfile.conf --name a1 -Dflume.root.logger=DEBUG,console\nflume-ng agent --conf conf --conf-file conf/gbkkafka.conf --name a1 -Dflume.root.logger=DEBUG,console\n\n\nQ: tcp协议时,发送中文出现乱码\n\nA:思路,修改flume的conf 编码协议\n经过实际操作，通过具体的参数配置解决了这一问题\n```\na1.sources.r1.encoding = gbk\n\n```\n\n采集服务封装思路\n1. 封装几种类型的采集服务\n2. 统一管理\n\n功能方面\n1. 任务的便捷配置&提交\n2. 稳定\n2. 失败自启\n3. 异常通报\n\n---\n\n### 如何实现flume任务的便捷配置与提交\n\n1. 添加key\n\n相关任务语句\n```\nflume-ng agent --conf conf --conf-file conf/gbkkafka2.conf --name a1 -Dflume.root.logger=DEBUG,console\n```\n\ntips:flume采集任务的配置可以动态更改,即直接修改配置文件,而不用再重启服务,服务会监测配置文件,有更新则会自动重新更新。\n\n经过调试,最后实现了直接给kafka数据加key的方案.实现思路是通过拦截器,通过拦截器实现添加key\n1. flume有UUID的拦截器方式加Key\n2. 通过static类型的拦截器方式加key \n\n参考配置如下:\n**uuid**:\n\n```\nagent1.sources.nginxlogSource.interceptors = UUIDi1\nagent1.sources.nginxlogSource.interceptors.UUIDi1.type=org.apache.flume.sink.solr.morphline.UUIDInterceptor$Builder\nagent1.sources.nginxlogSource.interceptors.UUIDi1.headerName=key\nagent1.sources.nginxlogSource.interceptors.UUIDi1.preserveExisting=false\n\n```\n\n**static**:\n\n```\na1.sources.r1.interceptors = i1\na1.sources.r1.interceptors.i1.type = org.apache.flume.interceptor.StaticInterceptor$Builder\n# a1.sources.r1.interceptors.i1.headerName = key\na1.sources.r1.interceptors.i1.key = key\na1.sources.r1.interceptors.i1.value = datacenter\n\n## preserveExisting同名key不覆盖\na1.sources.r1.interceptors.i1.preserveExisting = false \n\n```\n\nAutoMappingKeyInterceptor:\n\n```\n##拦截器\na1.sources.r1.interceptors = i1\na1.sources.r1.interceptors.i1.type = com.flume.interceptor.AutoMappingKeyInterceptor$Builder\na1.sources.r1.interceptors.i1.key= key\n```\n\n\n\n### flume自定义插件开发与部署\n\n新建 flume-customdevolep 项目。\n\n**自定义开发拦截器**\n\n* AutoMappingKeyInterceptor\n\n\n\n|  组件名   | 类型  |作用|备注|\n|  ----  | ----  |----|----|\n|AutoMappingKeyInterceptor|拦截器|自动映射kafka topic key|通过a1.sources.r1.interceptors.i1.key= key 来控制具体按照传入数据的哪个key来进行映射成topic message的key|\n\n\n\n### 模拟不同的协议向采集服务发送数据,进行测试\n\n#### tcp协议发送数据\n\n\n\n\n\n\n","source":"_posts/王阁/工作/旸谷数据中心/基础/数据采集服务封装.md","raw":"title:  数据采集服务\ndate:  2021年 4月28日\ntags: [flume,beats,采集]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n # 数据采集服务\n\n> 针对项目和产品化的构思,数据中心这个载体中的基本组成部件中,数据采集模块是必不可少的,在以往的经历中,数据采集主要是依托于某一两个组件,运行的某些采集服务,比较功能和内容单薄,这次对数据采集服务进行一次升级,封装\n\n可能涉及到的组件和内容\n\n1. flume\n2. beats\n3. python\n4. java\n\n## flume采集\nFlume版本:1.9.0\n\n> 因为结合业务来做,原始采集的这个第一环节，尽量封装度高一些。所以这里对数据源，一是关注采集源种类，二是关注采集协议\n\n### Source\n\ndemo\n\n```\n# example.conf: A single-node Flume configuration\n\n# Name the components on this agent\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\na1.sources.r1.type = netcat\na1.sources.r1.bind = localhost\na1.sources.r1.port = 44444\n##这个参数可以设置对接数据的编码格式。\na1.sources.r1.encoding= gbk \n\n# Describe the sink\na1.sinks.k1.type = logger\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n\n```\n\nflume-ng agent --conf conf --conf-file test.conf --name a1 -Dflume.root.logger=INFO,console\nflume-ng agent --conf conf --conf-file conf/gbkfile.conf --name a1 -Dflume.root.logger=DEBUG,console\nflume-ng agent --conf conf --conf-file conf/gbkkafka.conf --name a1 -Dflume.root.logger=DEBUG,console\n\n\nQ: tcp协议时,发送中文出现乱码\n\nA:思路,修改flume的conf 编码协议\n经过实际操作，通过具体的参数配置解决了这一问题\n```\na1.sources.r1.encoding = gbk\n\n```\n\n采集服务封装思路\n1. 封装几种类型的采集服务\n2. 统一管理\n\n功能方面\n1. 任务的便捷配置&提交\n2. 稳定\n2. 失败自启\n3. 异常通报\n\n---\n\n### 如何实现flume任务的便捷配置与提交\n\n1. 添加key\n\n相关任务语句\n```\nflume-ng agent --conf conf --conf-file conf/gbkkafka2.conf --name a1 -Dflume.root.logger=DEBUG,console\n```\n\ntips:flume采集任务的配置可以动态更改,即直接修改配置文件,而不用再重启服务,服务会监测配置文件,有更新则会自动重新更新。\n\n经过调试,最后实现了直接给kafka数据加key的方案.实现思路是通过拦截器,通过拦截器实现添加key\n1. flume有UUID的拦截器方式加Key\n2. 通过static类型的拦截器方式加key \n\n参考配置如下:\n**uuid**:\n\n```\nagent1.sources.nginxlogSource.interceptors = UUIDi1\nagent1.sources.nginxlogSource.interceptors.UUIDi1.type=org.apache.flume.sink.solr.morphline.UUIDInterceptor$Builder\nagent1.sources.nginxlogSource.interceptors.UUIDi1.headerName=key\nagent1.sources.nginxlogSource.interceptors.UUIDi1.preserveExisting=false\n\n```\n\n**static**:\n\n```\na1.sources.r1.interceptors = i1\na1.sources.r1.interceptors.i1.type = org.apache.flume.interceptor.StaticInterceptor$Builder\n# a1.sources.r1.interceptors.i1.headerName = key\na1.sources.r1.interceptors.i1.key = key\na1.sources.r1.interceptors.i1.value = datacenter\n\n## preserveExisting同名key不覆盖\na1.sources.r1.interceptors.i1.preserveExisting = false \n\n```\n\nAutoMappingKeyInterceptor:\n\n```\n##拦截器\na1.sources.r1.interceptors = i1\na1.sources.r1.interceptors.i1.type = com.flume.interceptor.AutoMappingKeyInterceptor$Builder\na1.sources.r1.interceptors.i1.key= key\n```\n\n\n\n### flume自定义插件开发与部署\n\n新建 flume-customdevolep 项目。\n\n**自定义开发拦截器**\n\n* AutoMappingKeyInterceptor\n\n\n\n|  组件名   | 类型  |作用|备注|\n|  ----  | ----  |----|----|\n|AutoMappingKeyInterceptor|拦截器|自动映射kafka topic key|通过a1.sources.r1.interceptors.i1.key= key 来控制具体按照传入数据的哪个key来进行映射成topic message的key|\n\n\n\n### 模拟不同的协议向采集服务发送数据,进行测试\n\n#### tcp协议发送数据\n\n\n\n\n\n\n","slug":"王阁/工作/旸谷数据中心/基础/数据采集服务封装","published":1,"updated":"2021-07-12T02:28:56.717Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsen001tu6pw0yp68kqc","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"02ca8b5cc317d3cf5f875d1e665fe64acf6d2c5203211a876003bd6a37c0ca4c\">f29c680708acd02cbb1b6cceaba061921c50cd678844d380083157fca95bec920cfe0f4f02e46eb2538bdd3b5775707733f01ab470d6524a0adaa6be3fe5b88c15347e7c9a9ab609cad4130049b14acfdf159e37f7b9724fec0bfae3aceccce1303edc299bd3c0f86aaae1e404e16d06513ad163516e928846046c146c1a6dadc9892cbbad4ae2f412fb30df7447216a7c14cf055b1b3d617f1630ba63cb5bcaf2ab971b6bb5e6dd745cf78a05b12bbb6e3c5f5cb09871fed78f0dc6cb61c45cf9858742678bbfbdda330b43db1e2c079d4dde946dc4181741ef02d2fdf1d02bb570592e47a8c2c602d691b7d6f27372fbcd11bf46e29bd31d99eb12d74c543fbe13b2ad1e53751236719ab506eef8d74d5c53cd9e15587c3385308254ed3250bece05567e72c28e3ca6ccf6b5fcc531a40b54650078ab663c4a9b42d2bad63bd009e8df767732659000cc9fb63850aeca51f2f82c322a038dc3278f1203d70fafb581085c0f8471f15de2ddc5110253f8d781555d6ccfadb5fe1564bc76c26c20bcd9713a400d1948b14df661be03e54f04a05307cc17eebd9e9dc9a8cb2007a331d12e9d2c448796cac9539a03fb56a611e9bb691d53342c4c180c8c86cb8c18fded21b9c7a30d506a624c2ba49d286e8b9adc54e281124f751cadaa0560300706e30e614c27d3070bb301236a3c604a66500ec8a234fdb48d8a5f64234c8a4c17975b5074c056d0a2e64dbedb4858bbdde92e38fb2585c53bba7ce3462e43359c793b272fa1a3139f4ca5051fb7bf87185fe884bffe1a3832a00d3bdc8668b34690d98a385074c3bdb31fd4e195dc8b9125956dc6a56db6a7d4cd9606097094f4b50c0a7b93f4074b947d3a70b0a2ab2c143bbfc2f4448087ede3adcfe9aedde155cdd62a0458d1d0924fd41b311d333572251327fff070a9508a380363589a4a6d01de63332cccc9008c90271d2bd63a75312bad5d763bd74369f2de07fb73c47ba297a34d2b1c088be11a91c6e8980740649c9b69707e4b3cfea1786f1ca8f4f92dcb4ffd492d95617eec9ab740d42d0364a80389e1203823a8ed1f539b22783795bbe370267ad7a43e04ac92eef9df14ce78bc6e8a5a91ec6a5c82e8aa40267077e401e405edf0d46d8b8f495a9e2bceb49afb13f1e90391cbc105f094026bf19629787e92887142893d0f7c2fef35e27725402d75f5bc4be172d396eb65ba99ed71e96198287f113c3e341fe703907ec79644e925a9cf8c5d6fe0d2681cd08976142f7d767e9301658384533518de15e3281a08263d5a584a0ac9e8efb304db3f8bfa8e059f504c2d22c5d30a7e9d045f500863c57ef7154065c78de668bcc99684cb503fb9e75d4891473a9dce87f37d61e710d92b2aa1ffb04ca2eb60a4ccf645bccefa08b00e9cd085d951c1e760f7153217c4abe29d312b5ff8f29d447ec2df3336e72bbc012d78ec9b649b6a9eaa39c394a1380419a2fa1aff3757ea63f3cba18b6a61b7f20cbacf0728a3c1e2ef61f24e4b3afa63e9e4c8b4ae1d33dd9bdf9db60bb2f286335030f3e1031130162197f2c64d81fee956ada5adc264831af06c2c1d3645e15ed95df0c3d8861991d090215e2370bf8df4a0bd117b1e0149724e63ce39f468ab366fa19d8eaea835eac831dea5c33e4336f98349a2238f34e145e721417747793ff8ccc65127a19eeb5e2bc828d8cab599e5b9805788755e545c19ebd41e9dcda8c689180c8d159a200fa2265ee0dfaa300f2cf876e3b363f8bd85ca93e725d6001bfa9cfa13a0c5be2716ef4effed07cdefc2edbf222e93cb1cb35ba8c46cd8285f94fc7c372bc2d2639e42ee513f37bb027f0316c5bf1147572d23acdb032d09b08a0893899cf86f3432e513948a3b9fa7d720cd04cba6c464afcf8b8fcf4a9b7045ecf99fb71ff59f983b981c28b90aba7b22dab5e58145c968161510dfb60b4359fa4eab45818ca28add743c043892bb2e1ed4862ebcfdf570c3f6e1d1b8069d4b0cc57308841fbaed6bb340eae0f731685d038512f70fac7b8006665f0a3500f37c1341cdc805e9012eab94ed47c6f69420d6934d0acb0d3813bdf198757b86b7d05bb02c0b1d016c798e8cc39688093298e227b9f6d8e893e5dffa1ee1f1d417cb764c6010a37d0b386f281787fb5651f3205e980f56ed594f722a86d2bb6cef68dce8dabda52dd92e01aa86bfd9b0700751284a1b4266498ad036a8f3ea7c2c2061dfda59fc8b9aa46caf63152acdd647c59a96c00f793ed9d208b56265daa71ca2b7f81bdc458a5441183288cc0ada30c64e666a26fe10aa4a2d661ce0988d934b0812e1af671ae24f42cf27c4cde78ef25716d09afb821bb29004530eef12f46f3df5922b4221c19551e4a7f629d1a52c9364577cea69f53e9d397afa06f30014174872a890e4f4945954a8f49e8d3a39bc5a39ce1086fb9e2c789edf78213e63596b7446c02c30eeb69347caadd70a1524188c55260f833a6b486abc49abfd651a532b66d696e3d225d09b7a50a8343b0e3a1297922a80278b4c5b16063df628c2e5646141bd6f8fba993ee0792604fa410bd932157403527a253b61c3d6b98299ac6eeaf8af29dc4d6419fe99e68a5bcb98c61cc2a247a1700094e2f2f5518eb8bf660e31850c2dcb52857a37a0e762747f4ef4218a91225050c32430de36bed29d15a1d3ed8ec89bcf89b7628fcf0517a9d836b9fe5c32fca5a3825b2be30b486146862194573f2854e26cc45338fbcb1f12c6e644bc20d69b81af7e64701d0eac62a40e9f6e3c15776f445a75d542f1694ca97d2bfd6f69791e6eee6777a58f6110125249b43a5356d7458f619ac1cb2cb5949fe2fa7139fdbd96dcf2afd3e67651390ee9b6c21ca176890dfcf0291433fd6295fad7fdfbd46239b77a75f8101c84951bbbda1f57ed2858a5f5edd851e1a9a76c71c97653add7c6ccdfa37716144f0ad5e7c85742cc851449dc5de2191252664839e4549e24f15d8e3abd630500be66931b28f97883e231f5c20e51dde949e4227840061b9912c138e82ad6d89c7bfa999977dca326aba3e0abb98306d207f8c6e347ce900057f1527e60aca4b48f576540c1ac8bf6827473fd2e9ef7fa6d39ddc2ceb42f366ce1ae79802c6439d45e5e84e7122e63badbc2b24e24c14b3a5f7dc8030791033678d848a35f53ac7ce70bed6a678e54b8b8d249f582e9ee48237b0caa63f4c5986a458a7f07fc52046fd15d136104a86da474d26816e67bce618e0470208326613971dd63b96cedf9a47b9fedbaf277ba2c988b8dae92131d1f331f89391a58ded51f30d3ef35b43e7032873ffd8c27e82de25279bda92c3e6cbfdf85ca4475c17ac0ca9076740fd7b2c13c3609d649e15b0fc37aee3a0fda23378e08a22e4c156ada81a6870d09cef14bf57521e28144af4e44c80d52cc8853eb9b98d277ae138bbc30a893eef6d60c01e2f7bc061b77943b2b5ad1d02b4bd8f013627381c6c06c4b6a9f1455787f24b469f6608ebfc9411052dfa44354ca9def36f55586e4934b9111a93fc1beea15e5e953617909cdabe7bd713070494c950a89ef329f51ac51c552a1e08a553764ede24a9b5d1a6db480903fe98bd0cc17e7fdb45c7e209dc12741f85529188b9e0a2ed6bda15359ddc1cc00202c1a79d8d9acc258bfaca56be20999a424489d6e3c2b448b5e17f1d35158bdffb9d6e1978d4ac5686098082f7ad230888ee7c4a24398ccf4651862e095c913d8f619503d8462eb5e55083d5f159c17947ab8d81c0b00ac3092a2b0986adff3e66678ae8d5bc21408e55cc18adedfb7ef73a0367aae41c1472746920125282d5673fc97ac2d54d4dc0750b9060bf28e21a2fa005cee5f9b9c3457d2b4d598877fdd58371e3d07fe5746980a7aa97a1c912a3eb6c96cf77fe88b28f8fc514c2e5af760183caa5f737312cdbad3cc4f01813208027893451cac27727391224e38fd8e499cc84c9aec697c6ac14c7d6da91962397cfd15f0dbe4e7c2b6410db6d1555d3679d748467a863c6765c865d8fb7cc9605916a80adb6fef32184620b574ed62a879d7f1b1f87929cd0eb1fa4c185f4bccd2512cc60be7f2de06b151d6f489a03fa92a3037e064acf4f05bd3d045c3ac82dbf49165fff687229ba9178d6e0048411e27a2756992d94684fbafb29e00a646452436314b56a8b025ce65e481ff2e41349e283f359625606f084358ee27e574f166a354c954720775af7249bea02dbf6512c9fc6d39558d9e28d74a461d853ba2c64898c461c533f34780a1e86259e534e837c56888e4cbf4d14a21797977e824fed70f7882a179e17856c185675866d2a29bdfd4a2ec3db7a3685d7aee9a777545e91a9b7f1ce4729bc1116858b901b127e9e7694a789c51ce0822100389b0f7e18f7d1e5323a13994097e5a0eef2c6e30090944f82f7588cceae447ba93899cc26c2553ff68f1436e2d705dd59178a23e7bb6da6c2d70d7e89d3916c21c3c7fe3c8cc1a336d4a632e65dc95817e44ff669f75810bd0907c02c2202a712ab7a942128d7e7631079c334251d3d4328410ef3523d19936c195cee9bb9c42a6b9da603ffa0519bea0805bc1b3207f5956b2c8881c7bfeeced94119f06fdbf83b2507f093ed274c44d76e6a4e8b57163e96aaf147db602675ebd6386925da06ffd0a16e1c97f78cde247a1363249cc06bee6b88d6c8e248ea3e3f11dd1c4fcc444409e3908aa35b2a524b30d672b3b4956d6897c0e17d161af7345759754f109502e1e279638982bbf83bf7bbb02f6fc1a38b4cbd36276502574845701ca0c14e31066032aca809005fdfe9e4f8a39a3125ed4caf97ccb0efb811f8cabc7c135b33d8263f2a228290b92adeb8a7be298ff4470c53fa6ac7f95e725e6f80d7fe6e68e140f4edbeb943ec6acd38073eb2641ae806122435d6d50fa60e4e4c8d60ae300220684e1cfe6f44bde0e9abfee0079caee10240a04a848a0bd63dbe0edf4bf028f0906fa3812e7a3126ee1c50139035c11aff7993e633b677db09876420108f4c9174b133174647c0c3df8630f3fc95f9b5ab1f2c05952ce57c799ead69a7d5170ce35e4c971ab56bb679502742def58cf8fefe3a9661993bce2bf730265684747d84cf687d4ce69590e00086f787bc2e416169b7ea3da945acfa7ec7c0e865cdca44f7602ab7513b44a7d963de54658df0548ddd4fbb7a57240232ca2e38f637a25145751c17f689cb524d76bbb038557349f5087def27b0526e2e1e025667fed195b5c8e7c95997ed931af59b0ccc94e1855242890faa4f5498d335eb2e1f5e3d75a3943821211549735366cf0a4e8b2bb86bf889fab12f88b6d2e07cc5250959057743b821c4a286172780e42247f5e7d6e8d10ee49e4bae25e6d398092916fa086be663f0d04ead80a67e41f05ade4994dd1580391cd4cd55f0442ad193288cdf19cb2bcc271c596767e48421c91b18eee82c3eaa4b03314c8446b614bea6dd9fae4890821eaba16bab0df6c321ce425ff1c366388d73e98da4c39a4b866f2b18f0254994bc63ca8297fc67608e782d6bfe491b320c55f29398a23f2081bfa69526224e9b81804f5c081ed355d96478617246e04aed3e679806d406ca1f868874f22d5b9e45f0e8e28cb87a274b315c469aa73a1db4c4d211d4bdfc3e3373fa17dd43354caa866d015fccad1d8f258a6da76dcbac695db29ec9e194a198866514d0199ac17f9049fb559fcb39bdd3464b59dd62cf08625f0596834385fa3eda9406ebb078c32b36ce06004ec78e0c81f03dc0160e4c9569f4198c960953b0df8869826a9a44045a1f4a29fe97194b053bca6d4885c1e93e415f47e2716c3e11dc318aa519181dc5fecd35694912463ac02db1710dcee8d343d2dd69c88733b7f5d79f8f0ac394076d26c125147255008975d011db8c9ca563f200e53f5cd2723e2efd2a11692099b577d8a470ceec710427e0bf94b2bb59be244d1137529d7de4278267c861fc61c1dc5ca2514d417a5a614dc72c162f9599e3f149f98d268cba0d17847470c198c40cd38fcb5269c4e5ccb74765d309d6ab9bc8aac00f74f58ad221c93187d844f141f2f450f97153081408ee1236e30fb9a4937c59a1773cb0950e061976dc90d4467df91a5e78e946c66356904ad46d6adb9a490db6b0edecd834133b132f9467cb56ee671b1895e53dae381996c2e1fd665f16fa71922f4125489a5004ba277f9c318f2fcdfba016f07f4c12813f66fa7978ae41f52d2448918bda2d035487be5995c8e2fa63c9999a58cf6601996789d4eb8411496cad198270a9f12408f06103980cfde93a4f3a3d10e7bc60e95d62e818322ba7d1eff67310e447c546d284092097d2e3b9bda647576f067c1d2875ace228d37cb65317ba639e455b3d47a84dea63552e6ab50e819ef26265d2b3ef7643c2ee64d303f866c1c5e370786137aa5dca16c98534f53e36b175635459499eca18298b901ea5ac6c8bc57c47daf62396128b225678748fa7100e099db04d5e218793e4589fe3d359419a0c2da2af9f273b299607009249f95f9f23a1b54642873aec9b2436d4168a43d1d3bc4565cf367d2563184099fa4586f4633ba3c9d9cf099100ea0a6958dcd036bb7b26e62292f78472dc60c0d311d6061dd8a615c754be24ccdf5aae9fb579cd028e99f4058d8fd02e6245d32091b83df01e0e18ea8ab8f08bbff40c3e68e8d00615bd7f7f47d510c930acaeeffd0b51dbe52c66dc8bb324fdf05d6b30e7af63a8f8fa3a8c57890ffaec2b19341a4bb3bf744ff221e65f80f0592cc8da6755ec74af6096c55b73105f10f4300d02c0a2ad7ed52e449842393d3b77242a1e1ec80cad4f5bfe87e4b092aad229a0c7af06f928185bd3483f673dfb9d85d5a4037b0e8669ed7e73e3e75d3c562e101ab260dbe877d33867a60f480ed43f3b8832487876272d480006b8574b998e9a589b93f0367169e80fc4f90a761beff95245466d9b07a86af233508b562a444a91d5751d9abaa3a596e27e83dd336766385da28cfc7e7a7828b71a5f71e3d15920f30bbada67a9948840286bac14bba25d4b1855c551e1e5196de2bb2a9efdadd1f17b88f496e7c7ff5066fa342a7b59b6a61df84ee5779fa61a559c887b2789aeb3ab8a2b0663143fcd2a371a137fe2d997bb1780f40c5109f619b76d17534182a554f532eced4e9f1688e3197f7c962157b5de57da5de07efa5c891355d7ef9955f5c2e6c35ea6fd7c480f38ac0b8e60a394f3e1cc11bea485cd5f21550f6f8c30e489f18f8fb98d08e93b00f0851c7341303b02d804185334a7ef19468da5ee3b046346115aa4d8089a045b69126b900d8e705e376042e47579d28aef2a7914a9514ea2b44141ab5f142bfc3d8c38ce27a8f9e4578f18e13e7831dd285b73b75f755cfcedf9d9a3a29b02be54ab456d6219f521de476f4b5d83c0d37b235d5dd1731b6036db4e2b56cd28794ff3a59570bad63910fe246224bee4a8d1a64aa6649f021f415db3f794f68ed5e3b82073d408e8603cd145a9ae5067a5dad97176b43feb3363043c7acafa1a95dc87072b724ac4fd15d338c6e9890be5fd021f9691d92061119a235d39564bccfda72814361f4fa4a45da1f132bd1cd61577f4b8f14163ea6222cb9dfa94a818dec16cef6f707f6e597c6231d6d66c09128d2a9931179a03e3cca51be1e8995c622aa185e8fc15558f9a30e3ef762201fd52281c8ef6a17fd0d2c1dd999205cd65b6534c0049f8d222209e31be52392654cb78401206f7b8f0534e530304b138d1788e34345fa3d8a88616966d3c3a208e742e7bfd7b42b71f719722f157bba7b95ac9ab96fa2af83ea2c399c0f5a58e7bff13a6e8394c397f890da621c17aabf20d5f799da10e271dad82cf3ce36cf72986a13a72de1007745945ee880f502ad0539306e1d2251ca34b2d9b280024b8dcc48ec6234a7678cd06efbe666ef5b1cb22620a690881bbfa004657e4e6799eb44d019a41186706ac0bc0b6414dd5a310a197f74fde641c015f283dc345579390b12c056fcce7a197c2aedd34de135dcaa679256410f737d693669b27b9ebe06543837d5f5744d4512115c958a362625781b7c2cfc21bc4d3a3ff8608515d050dc6f259ea8b521f001ea5d8b1e7c6df452b2d1c10f3439217f088eb8e4aad6c11ed16786c3a49831aab3390a307b9223b9ab6e483dd21ce55c6b451b6d0146d9bf20b9bd07338a23cf45942e8b9589fb9d6e9eb6518457f1d8ad23385514e31cd601e8a88cd5d6e464ea9ea1d7ed619d5eeaa7dcdad2662618baa063f6940c8ad8672cb598e33100e61fa3aa7d5f328e81e5378b9b3d882ad90720d7cbda5b2050b3726dbdb159cc5b335c2c374077eeef4e2f72c7aefbdced159289639691a40b38ab5d4d4048e1b158f45ca4ca786ceb1202f3e00f464513e6fc34f5a5133ea8c3f5874f721470510a243148269da55a492743c766ffa40683640f88351e20fdec134708baf7bb4fe0aa66021d1cfb807bd6906f648041b6c5e0a2ed9b00abea24eff6c70b57936b226d32367e35adacd0fffd6b8f1fd0c3cd5281c1625de528f90f97b6267a273951bf57b9700ec89e4f37d4797af2d8e540f8f4e64ccdc92c98c2acbec162c0f206ef1e0e831b1690c4896a948c2a6d22a58624319be824486cdbe75b199e3d8600762586593dcee6d0aa526109082a1948e19e9aa4fb5e2d623c0c53455bb3994c22c6417c3acb993fad061b111be5e17b839315add963e0f91a1d75f7bfb17138824df412935bfdf9730e961017b6d121b28db07ca480a00793cb23193d20c43d5d60a08f69128d0419c84d209084b30c13e0d15b3caf9616f75dc54e3387126074feede169f0cc1da8781efe70a3179c91865a3ec1d7c0ebee08d7423af6accc41c6a81c365cf48576ca11ced095ec84c60795081831d19cda56eb1be909b36bb0aa53568c5083f139077eb91c3d73abcce674c3b1afa7d41809606eb267097109dd92700446f6fbcf1557e77fb3c8c52b3e7296e1e315df1ef117178a812afcd1d4478102c776bd16ca04258e39e0da32001615a67ed70e2be45d0ca63014c056534fa3c8416835dc87f61286646ea7436d3042172d7f01268a2760be8866a28400e33b2eedc4a66167950ee58f2fad724da5c1a89f99c08523834e7e7166261c142552cfa912b683f756f59da2140a84a00a115ac0c9910f0c6a5ea374e1a699da8c082eb25b812311c2ef6e53672970c4aec81bfedb3f425892b8c5a219490d3f965899414e60cf256ba30fd9461c1e839c69cfee94fbaa1e3b48b0b4306892e0cae40cc23ab2be7d7da84ae1e1cd82c00e20bb503e814be745a5d8b1ea2112879d05ecda463467a64d430aaf612e75824a7c15f33ca00bb4db5cd39b6fbee722393598c3bb20b43f00c527cf48c7eb461fffb9ffd188b0c15c28562d3c602b4a41e38fff2fe20aa0a1b5ae5334d0692411f56cb75ec005e029894e41da2398b370d68b66f926c158bf472ed8efe7cabab8003fded60a4883c52814f92f4ddd28054d13b841e287e40a10ac458dcd1c600a9cbcaaeeb888fe886ab21a477f923193ca9b120b7014933ae08044017ae940adac7137d180d963d5f0174949b68cb0f7280f145e5ab67d4d22f0adbdd8715b9f9b958864fdd91c9ea36e3f3464d2052f1929e79529f43b45c84ce99f6b14c76ebffd28213c58bdda4f50e01ba87fd2d31e18a0797fe848ffb4bc49e1eea1660d667d38d4040c7411695f63e48b79eb03406d7b2ed2ea5251b5b65c7bb0d44705cc0ef85b68306bf6c5f6fa4f35af85c0003df0c061faa91e273809a0a63b8ddb77bf3571d15a52263924f91c0ab65a1f6c3df27e401c652c68f90a3ed6ff05ca2e4449d095adaf70ea83be55761286c91595b6b5b42630a59e0fcef006cb8b9cf39d1d20fbb8ca9fc6c0cbf0bfcdda1355b728dcfda6c835aedb4f9670cfb19f60b2527673503393d99f45263e851fb96f03f44c2cf47c507d20150265fed68d52633f0e3ba6e6f401c1db4b243ab9921baa779a80820d01e0e0b7e47d45478be250a8c822997f87a57423d681f47bcf064e0fac6ccd5faa26567334f7d8092c2b9ca7e7e017b86ae8c150e789c7739fb4ae0ea88cdd1ccca83f18a55c3247409f0dd5a3531a9719473d3eda4b6f0b28115e14260e9aec0ac8a81d42dbcaba44e117c5b09357a17b38aa30a430f988ed8ccf95aa9fb1ebfeafcd2162936251e7699b7e4b86399067e2d32b15f3e55b9aa47a55587e2e9858ec8d6a14ba0ec1ec49953de8c67630dc6e37b9f93bc611f5dc18f30eb8c4750f320babb5b23df7093e3ddcb5ce5d5d7b4f48beb5d7332f12540e54db78adc64113bef8dffa9f74a17a46da3208c237c7175adcbfa12e9acbb8b58547eef13c7c57d90de784f4744533f946715a6c779bf29f291ba04ce2224100b829ef7e9118408ae43916b8fbb2732f00bb5370e02c926c639b7faf505371b6d66e63d58444f619db1c091ec3e8cf5a90fce23d8c154956dc9bb804a086f7a492dca4721b5d49767d933cb0f756b3cd0ee2736391106954e3c273614eb3d3cbef945572bfbf41adfa83cb1dbc1738e4e14e3ac5eb94b69a7987e8513f8fea27c7dd769d054f5747b6b924bd85541fb620109d00533492701341155ed881f693c841d784feeabcebe35ad2c7bc016feb4064ed1f143ac009e73b72b1b7ce60d64aedb62e646836766feaf88d923b09604989bd3ddfcd606ffb25150e404cfbeabad3799ab72745c83adbdbfcb62a3994d26ce4fb0de74f8b6a8325e49d2ca614e0decaa44c1aceea9a83ccb60dcbd672903c7bfef33c5d93042d194bce92e7f58d0f0e44cde8c4f1f044671030f2fb8926fef24a1fcaa967bfe22c2c6a8cedd9d269c0adcf08cb3b99541b1173034743352e80f5587cad8172148d6aaf5b565ef732076a72929a8b44f0e820e77a01262dce7b89d1af0b52409104fa45698afe2865dc079937441c523b24475dd5b9674a50dccab6da36cb3692b42e9c45dcbbe11a097e5750b3943de8380fa9e3333fcda441b71868958b210e4716f0f05573b3bd4d1fc6216e1da946aab1a57a9d587f01310edb063f07607040701e8e4b06f345f2bfe00dec0e36e69a11492b2785b9257cc905b0547c7e0326b155c7b0d28f7b9f9c583a8ed6bcf93bf1e130e843954f58c1bdbabe7eca2e207bf58e0da4127ff7f802645d530f812de72e7474e6ff92bd32d17e559c5303837fd97bba60759f56b4b9ca6c2678c7dde2ea6eca79aeccbe18295b0fab14a0eea7641719c6e87a506d2b1ef9f0927dd6fbba85d5f92586fee036cb52193e8de2d6c60371c77f5946dc68a343140219a511190ace9680031b35506bd5ffa5950c40e78428ba0c8deff0b06f558ac7f14b6844347182450b177d242c413b69043ef9d00609b7263ee3e08fe757a73b5c490cc11eb927c7a2d0163a3e64ba966fc3c1247c8c901e819a5599bbb66a5518b7480c6ee230e1e76b584c8fcb0d66fad38d6b61551e057fdd4863edfa94f0836ae06d41a050342c7195d5913956e541a3ea4466cded90e13fee1e5552e15ecf1ca88bbb1cd2afa71154dd21c03eaf51d7cf32eaab497a3c6be570c7f83690cbfa2ec3dbffb3ee990a2162371b821d45480b818fe9c43f8d7eaed210af823bb5f7f1f0b6087ecf3f040ed004efb22bb3d842a3d7939c7ea0643a17589d8f0574d0f14d41375c95f3d64092ee462314b246e45db6886e9da17cc87f486e871f9cd41a9d942a0cda7534298736dd85f0bcd444d47e0d8fb9213078bea1605f2018ca70c9f7e3989fc689bbc92ce5d6b6497f69866887a9965e0893f82ab82e9a2f93397508426b71c9f1d09306b79a5f0eb68dc692105850b9901c01cdfa91a68ea6487cdc3ad35a9fee05ede759d620b6526005a42a57319640e7f926b9dc603c74423eabb0b8dcaed104e6f0d19a6b964985fff3410931295fd389086660bc0fe5750f723fc4d31be07e6c1a7a49d0935d6c3aed84e15c1fe8038e12e8198b1003b0090b0b9c19a4cb96f071e0700461737dac15c5b927ecce99b86f105fce9549b1024c3236e032be740eefe74fb25191168dd0515b6372446ce87d8854b1cf372536b9d85714b4612c838430f793f42bee3f8994f074d301291e9e00de1d2e52e27249721575771af5f627f6b00955185e8152a3c8c8319df45d926849ea455c8f91c66943e3b631efc9b3c27df4c78b5d23f8b13635af9be90fb7d3e6e56cbffa18476ac453e3dc5376718d5727328d7d4e84f5e1a02c1e9759c326d9f6f9c78413306ae203067992d654cf33a35d209e06d47014a6c5e731daee80d0d45314720ab38b11ce6bf8f0b829c213cefb2d720d6e3b52d5cb73e95eceb63441d0d95e99aa9d2dee718aa3f4fb8ce2de45aefe8b9daf39ec8be82b93c18ef2649b1ed431c99a292bb34297bbaab4cd51719b2d7ebd460420352769b6c6fecb1effa183060b11ff7e6a0c5ac851de943ff5d189afb662295a5ff439603b08aaffddee935ddf8fe25ac4f07fd080892df1ed793f</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"数据采集服务\"><a href=\"#数据采集服务\" class=\"headerlink\" title=\"数据采集服务\"></a>数据采集服务</h1><blockquote>\n<p>针对项目和产品化的构思,数据中心这个载体中的基本组成部件中,数据采集模块是必不可少的,在以往的经历中,数据采集主要是依托于某一两个组件,运行的某些采集服务,比较功能和内容单薄,这次对数据采集服务进行一次升级,封装</p>\n</blockquote>\n<p>可能涉及到的组件和内容</p>\n<ol>\n<li>flume</li>\n<li>beats</li>\n<li>python</li>\n<li>java</li>\n</ol>\n<h2 id=\"flume采集\"><a href=\"#flume采集\" class=\"headerlink\" title=\"flume采集\"></a>flume采集</h2><p>Flume版本:1.9.0</p>\n<blockquote>\n<p>因为结合业务来做,原始采集的这个第一环节，尽量封装度高一些。所以这里对数据源，一是关注采集源种类，二是关注采集协议</p>\n</blockquote>\n<h3 id=\"Source\"><a href=\"#Source\" class=\"headerlink\" title=\"Source\"></a>Source</h3><p>demo</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># example.conf: A single-node Flume configuration</span><br><span class=\"line\"></span><br><span class=\"line\"># Name the components on this agent</span><br><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe&#x2F;configure the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; netcat</span><br><span class=\"line\">a1.sources.r1.bind &#x3D; localhost</span><br><span class=\"line\">a1.sources.r1.port &#x3D; 44444</span><br><span class=\"line\">##这个参数可以设置对接数据的编码格式。</span><br><span class=\"line\">a1.sources.r1.encoding&#x3D; gbk </span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sink</span><br><span class=\"line\">a1.sinks.k1.type &#x3D; logger</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>flume-ng agent –conf conf –conf-file test.conf –name a1 -Dflume.root.logger=INFO,console<br>flume-ng agent –conf conf –conf-file conf/gbkfile.conf –name a1 -Dflume.root.logger=DEBUG,console<br>flume-ng agent –conf conf –conf-file conf/gbkkafka.conf –name a1 -Dflume.root.logger=DEBUG,console</p>\n<p>Q: tcp协议时,发送中文出现乱码</p>\n<p>A:思路,修改flume的conf 编码协议<br>经过实际操作，通过具体的参数配置解决了这一问题</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a1.sources.r1.encoding &#x3D; gbk</span><br></pre></td></tr></table></figure>\n\n<p>采集服务封装思路</p>\n<ol>\n<li>封装几种类型的采集服务</li>\n<li>统一管理</li>\n</ol>\n<p>功能方面</p>\n<ol>\n<li>任务的便捷配置&amp;提交</li>\n<li>稳定</li>\n<li>失败自启</li>\n<li>异常通报</li>\n</ol>\n<hr>\n<h3 id=\"如何实现flume任务的便捷配置与提交\"><a href=\"#如何实现flume任务的便捷配置与提交\" class=\"headerlink\" title=\"如何实现flume任务的便捷配置与提交\"></a>如何实现flume任务的便捷配置与提交</h3><ol>\n<li>添加key</li>\n</ol>\n<p>相关任务语句</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flume-ng agent --conf conf --conf-file conf&#x2F;gbkkafka2.conf --name a1 -Dflume.root.logger&#x3D;DEBUG,console</span><br></pre></td></tr></table></figure>\n\n<p>tips:flume采集任务的配置可以动态更改,即直接修改配置文件,而不用再重启服务,服务会监测配置文件,有更新则会自动重新更新。</p>\n<p>经过调试,最后实现了直接给kafka数据加key的方案.实现思路是通过拦截器,通过拦截器实现添加key</p>\n<ol>\n<li>flume有UUID的拦截器方式加Key</li>\n<li>通过static类型的拦截器方式加key </li>\n</ol>\n<p>参考配置如下:<br><strong>uuid</strong>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">agent1.sources.nginxlogSource.interceptors &#x3D; UUIDi1</span><br><span class=\"line\">agent1.sources.nginxlogSource.interceptors.UUIDi1.type&#x3D;org.apache.flume.sink.solr.morphline.UUIDInterceptor$Builder</span><br><span class=\"line\">agent1.sources.nginxlogSource.interceptors.UUIDi1.headerName&#x3D;key</span><br><span class=\"line\">agent1.sources.nginxlogSource.interceptors.UUIDi1.preserveExisting&#x3D;false</span><br></pre></td></tr></table></figure>\n\n<p><strong>static</strong>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a1.sources.r1.interceptors &#x3D; i1</span><br><span class=\"line\">a1.sources.r1.interceptors.i1.type &#x3D; org.apache.flume.interceptor.StaticInterceptor$Builder</span><br><span class=\"line\"># a1.sources.r1.interceptors.i1.headerName &#x3D; key</span><br><span class=\"line\">a1.sources.r1.interceptors.i1.key &#x3D; key</span><br><span class=\"line\">a1.sources.r1.interceptors.i1.value &#x3D; datacenter</span><br><span class=\"line\"></span><br><span class=\"line\">## preserveExisting同名key不覆盖</span><br><span class=\"line\">a1.sources.r1.interceptors.i1.preserveExisting &#x3D; false</span><br></pre></td></tr></table></figure>\n\n<p>AutoMappingKeyInterceptor:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">##拦截器</span><br><span class=\"line\">a1.sources.r1.interceptors &#x3D; i1</span><br><span class=\"line\">a1.sources.r1.interceptors.i1.type &#x3D; com.flume.interceptor.AutoMappingKeyInterceptor$Builder</span><br><span class=\"line\">a1.sources.r1.interceptors.i1.key&#x3D; key</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"flume自定义插件开发与部署\"><a href=\"#flume自定义插件开发与部署\" class=\"headerlink\" title=\"flume自定义插件开发与部署\"></a>flume自定义插件开发与部署</h3><p>新建 flume-customdevolep 项目。</p>\n<p><strong>自定义开发拦截器</strong></p>\n<ul>\n<li>AutoMappingKeyInterceptor</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>组件名</th>\n<th>类型</th>\n<th>作用</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>AutoMappingKeyInterceptor</td>\n<td>拦截器</td>\n<td>自动映射kafka topic key</td>\n<td>通过a1.sources.r1.interceptors.i1.key= key 来控制具体按照传入数据的哪个key来进行映射成topic message的key</td>\n</tr>\n</tbody></table>\n<h3 id=\"模拟不同的协议向采集服务发送数据-进行测试\"><a href=\"#模拟不同的协议向采集服务发送数据-进行测试\" class=\"headerlink\" title=\"模拟不同的协议向采集服务发送数据,进行测试\"></a>模拟不同的协议向采集服务发送数据,进行测试</h3><h4 id=\"tcp协议发送数据\"><a href=\"#tcp协议发送数据\" class=\"headerlink\" title=\"tcp协议发送数据\"></a>tcp协议发送数据</h4>","encrypt":true},{"title":"azkaban的部署与使用","date":"2021-07-06T06:25:18.819Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n## Azkaban的组成\n三个主要的组件\n* 关系型数据库\n* WebServer\n* executor\n\n\n## Azkaban三种部署模式\n\n ### solo-server\n\n DB使用的是一个内嵌的H2，Web Server和Executor Server运行在同一个进程里。这种模式包含Azkaban的所有特性，但一般用来学习和测试。\n\n### two-server模式\n\nDB使用的是MySQL，MySQL支持master-slave架构，Web Server和Executor Server运行在不同的进程中。\n\n\n### multiple-executor\n\n采用master-slave架构，db用的是mysql, 一个web server ，多个Executor Server\n\n\n## 部署准备\n\n### 环境\n\n安装git\n\n```\nyum install git \n\n```\n\n安装gcc-c++\n\n```\n\nyum install gcc-c++\n```\n### 下载源码包\nazkaban3.90.0.tar.gz\n\n## 安装\n```\n./gradlew build installDist -x test \n\n```\n\n### 建表\n\n```\nCREATE DATABASE azkaban_two_server; #创建数据库\nuse azkaban_two_server;\nCREATE USER 'azkaban'@'%' IDENTIFIED BY 'azkaban';#创建用户\nGRANT SELECT,INSERT,UPDATE,DELETE ON azkaban_two_server.* to 'azkaban'@'%' WITH GRANT OPTION;#给用户授权\nsource create-all-sql-0.1.0-SNAPSHOT.sql;#创建表\n```","source":"_posts/王阁/工作/旸谷数据中心/组件/azkaban的使用.md","raw":"title:  azkaban的部署与使用\ndate:  2021年 7月 6日\ntags: [数据中心]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n## Azkaban的组成\n三个主要的组件\n* 关系型数据库\n* WebServer\n* executor\n\n\n## Azkaban三种部署模式\n\n ### solo-server\n\n DB使用的是一个内嵌的H2，Web Server和Executor Server运行在同一个进程里。这种模式包含Azkaban的所有特性，但一般用来学习和测试。\n\n### two-server模式\n\nDB使用的是MySQL，MySQL支持master-slave架构，Web Server和Executor Server运行在不同的进程中。\n\n\n### multiple-executor\n\n采用master-slave架构，db用的是mysql, 一个web server ，多个Executor Server\n\n\n## 部署准备\n\n### 环境\n\n安装git\n\n```\nyum install git \n\n```\n\n安装gcc-c++\n\n```\n\nyum install gcc-c++\n```\n### 下载源码包\nazkaban3.90.0.tar.gz\n\n## 安装\n```\n./gradlew build installDist -x test \n\n```\n\n### 建表\n\n```\nCREATE DATABASE azkaban_two_server; #创建数据库\nuse azkaban_two_server;\nCREATE USER 'azkaban'@'%' IDENTIFIED BY 'azkaban';#创建用户\nGRANT SELECT,INSERT,UPDATE,DELETE ON azkaban_two_server.* to 'azkaban'@'%' WITH GRANT OPTION;#给用户授权\nsource create-all-sql-0.1.0-SNAPSHOT.sql;#创建表\n```","slug":"王阁/工作/旸谷数据中心/组件/azkaban的使用","published":1,"updated":"2021-07-07T07:59:44.500Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqseq001uu6pwhldt9l4j","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"03c18dec5ae122946c5a373a7637c89f6e83850e0df2f80dabdd4339cf683bcf\">f29c680708acd02cbb1b6cceaba06192e35b994098fbb5186697311e3ce53f953b6f5c92b5c86718357547ec42b34e48fac2373af4ed70281c1673c67ac65be3cc4c51b6773fcaaae6d58c48cda7e6c85e806c4a03a7fddf8f0c6c7288eea0a8b35b0df35cb96c4f032b0307fa6a857f68721c209ff297619624a4533b1292789e6b76f739f94613b4344c028ed7904d78751dd66b48a2936be08acb00f3841498db92ff12b41c3a92d8c5962ac1bde451b567c7b52de3c3e72242f5452e9b7369e5b261e2dba4490d8717de2326a14cd93295c3d7abe02b0dab7cb637dd44ffcb410258770f744aa651a464c58d44e36275e0bb101eb34574eab5ed7308b9c133755b34c9e193c2fdf22dcf7488f57e83cc5b00c9dcc3b1cf0f429c82e28a5873462c04f608b457c889fe4e5a09ea3820812a5bd43f70c501e344b6e9ae661513a5a4e807518932a20e3baeb794e8473e029310fb92ae611566ddc6c5914c292547db3cf820d21613af7287bf5c0aa450cf811cb9e47f7712e426e7c20e36b50865cb7925b56f143d69d720bb158b8b0a34943a7388fd87ca90adda1991682090f2cc877800c007f4f349e045b74ae5d9aa9b71621f0573821d1d0c4c350c495554b09718a2f00438d74d766956304131b09fcf8b8023b338d50c0fbf12addd539c0a950da094cda20a5ff519c9b5a72af50c2e99c8580eb474d6ec6124a84a6e40f7dd6cae4c8cabe539b43f4b099e1e3807ecd48953efcae2c6e664e49a7a692e5dfcf03a0be6eb0ded77eba6c9d31370a7841e1b246f9dc165ce63397351999d5ef1393066800e39f9561aeec673b3f0936bc5f583b6ec8f82d502174faaffa7a6f8f526f791e4c7666687cca707a22873a7963ba1a525f7597a22c35c5863797d3aad2863f8ac43794c3ccfd6054ba177addf7b3e9cf9b35bb9f5c7ffcdb9de0940005635e7d6ceff87cd9cb1212820c46c2107b0936c427eae90dbdfde60728f87bf86e153bd5c4e37b3cd4074c4ed968d18188b185ad0a5fbc96e890c41bf9d1fded9291fc011a48bd10e65544d77a5f43f2809d423c3d6b2d556a1648471ec40e5bd9995b71081a29d65385f4f5b4fdc3a254226c334683bdefee702bbb7cda5f571aece274aa351998d21c3c6891f45b743a860e429547cc87c44bc71e7a6b2405a9d04b0409a0a1cd409bffc20a4abe248165a08a57c961e17753c842bc8ae9890a906dfdf993f10a9b5e3a95f3cdfb83aebee5fd9c29656daca8f141f757c7a84ca27872e9ade4791072608d4f37a88b52e8a40447532bd4bd92db06864e83dc2370f1b0c3953c950fba7e32e1620c214a1e047efff023a74d70a8a5708448ebc54a76723dddba1f917fc91be8a3b1440bc0afee7c4aa0ee7e73fac13d1bb75be229bb98d4033cb37048227457e2f692c6cbf917fc01f791aa8db73d426728f2b649c0f1b2fa779e17ecc788d29a52c53132ab2db32c211f2f8d1b20f4963587a9c0bcb29fda5a3cdec8accef849cb170557d79387863b7377e647762df34e9dd022fc4a713ee6b245dac51bdc2207d1eba3497260c5256f2ae622704f227a2297aab0a8ea44f7f931e5896b9224d0ffad85bb78cb3ba74dd872e4173ecbf13d3c9c8bb5f21048ae4facf356c4190ce149ab66838b8afa8f5c9e00fa75d50b6c26b037ca780257228bf82f4d305bff63fa344871c10f010161468d06d4830fe3e845b21ace8f6fab2d3c2ced963cb18e5355739822fd3eafad5b2510379b8e61ae78d280f90885c6277e64195144f7264b2d3b044138a26d4f5d6d851566e5734200813a776b42befaf2dc9cdd1e0ba4d902e21a7b8de124b7659632cf19e6e8da76f7490eafa4ff3a723c68e96184e6f0d7ac592176b121944e295da36170ae8ab9bc06fdaf2d070c2d2f5d2e8e8a2839790fb68a5aa316165f2179d144f71ce1e76a7fbb62669f229643fa226ffa626c735ca7f49da43ca687afc561ba5629480802febc6f0cbcc79a6c7c00f2b97db82bf388fb65622c1ac11973deed0c6f8f1dbd49721688ec1f102ef7623f2f1514e0349df300e240a44fc3dfbb14c3eb80c33a855b1d1c571c021e00daa7236e3e2d56e2237f42900e400efed965651c9c868e5d3395ce42e49458bf682ade9d61e8e68cf01f165f9397a353db8464a70780f504efa36f738e1799b398fa1df7bb6f04e0d13106ddeb071fd9a438042d7159a640833d90efd52b2c7931e9315666ffebb4222cede2c22e729dbeea921aa5a8635fb831b66c03cc65e55a658beb76c3f9e23014b3c148c77066a0dd021e8d7def7e8d751f8803ecc0ccb4a340a6704272e3b07fe5bee4ba0b860dffd11cf412580da460b700ec5a5dc37b6d6c20075fff6239abdd74e8b450f3ccb34625749dc2135b3df857bfbeb0a8e7bb3f2c3b03eb36b8c3fddc7738698e0d1de8983e00f8b85ac02e137aba2ecab4b8ab94973059b51e9ea720d2db61b6c58bc9fed27b80b6ce7a9f6e62165734c7b017067b6d1f19fa6b86cb542467120cb2c2848ff67ee712fb2da7da30dac10d60dbdf88ca2a8801baf7446d2a80c4bf01b2797159d9bee270ba9187ce246201d51358022092c1395b38a86b47f3790b2750fc2c6898b15d5e3c8f8a5840d0821fa9934fab60930782aa1445467be91037b400e7672c8b34f85837b5e5b0b6da2f1625b23753bcab2c541f75b47a2f0f9c53ad199a130b0898b81f1f9e36c645d87c295842e01c2049f38c326f07e08f89023ea60f3dd2e4b13693daafabcc4a2a5f5e6e6d2fc4ccdd567f52200eaccc9412bc86ca23f888af15e1d72dcd56b22483922156419039865163ab05c7130b74341efb8235023cefa162ac145430e7b2c1ebb38bffc6f7351f429b5c03d52565788785619984a947efe467f3857c4bfa8dbe3b45d4808aa89be01755a0c34a75768dc03ee83fc58f1dce2af715529d68393ceaeaea643cb10f7552c2c1733dc56cc4dfd7ba4cd5a602799466696f7163bdf7f0216f99023c56e3d21f1ae0b687a2e41e5901765c5dfc6945399207ba4cddd251354100bf8ab2f4ff2c48ee2b6c420d37331d8b6548318c9d33e9cf60af4ac0a535594eea0f530f0bd47331637e33f2cfd880e413f2486cdd59f7d0ee709525938d7a57926cf24bd973b94f5afec038665054236daba22d1e2e7cbc478b30b4302fa301d055c93191bf1bede5c4b713386bb60cfb00e8d1d485f1cc7269d23ba5eee41850e06279b292a4c83a453521034811d083498cadac1f516af555348b90a89953e7b8bf0dd901ff4c62fd6cb4a50bae19fabfb1dca77f7103debe919e15316755b032901475409b377b8ee0e1c5e38795fe01c53f724a488ba3cde21dde5789fcd8cca366242e37ab162b3d056a4805cf5f8299bdfd4aee9735671d0110182101c4adbb973f7e7ec757eb73c937079a996cc1ee7e719bdd17c72ed4eb6d7161fcda32f3840fa8bdd5c3defbaef7996818a4193b2fa32ae6e6e0c619c44697b335b3d4b55548ab349078f51bfdd7ee6c9354562903662881f4e0463c6f07ca29f296c58d0ac316524907683863cca78fd332309326960f61f640fd468f31ebaae5831ff32cc0764d0862f9c570b350d52873b9c3db952bd2a335cbf5366022f01b357bff30c6e11d0c948636b26894ee17bcf5178fe91946028032f4220ba6efb98fb568785a4588b511649d7fe3816beda781bb75d52c3cccc5d8f2b7cd619e22c73e7971c92ec3e87fbed6127948a0be7e1ef5037309e551a89bf78465f9d555cd465eefd07e7b0beb4c93acb3708f64080cc1e536c254cace443b8cf3d94e443a4411d6c73a2c893e7793bdef70c607017131669831b45a1e6b341a7397fe812293c6e0e0c0904c3890efcd8942dca82d2d204f712c3f0af6c5e58a560e3ae3437961a68b85e99883ac62721681c7735d8c9ec65dc42ce9950cd210b429799dd8b99da3ba4ddab8472cc8ae25f79fb53dc907dd73df90e0e3f8af6367826c2cfc652071050797406dd3249a0619484eca5a94434a319828f8dfd5565ac735e7952b94496d017b9f1ede39bd2ad9326d88c9aa9a49c78cb187e811b8431259a967ab174cde1b0eb9bfc0d610bf5dc6d58310c89daa65d844a6837af48641c008227ebdf2039c360274bce709fa8425bb19a5e1ec4cc134628bfb3c3f9e2f1bc0cb7b97f266344e1d7235848e22dfd0eab1547a688c6441c77b835c1cedcacacfda98bfddce63c5b66351c392b2ea4a8e62b179aed22ab06d33c60e458a333d3b06fb03b67b226b2d7542ff703f4ac52ce1f4091a5b87e1bed5165481c4fc09d08c7c92e6f49ed92a1a4d44177884dc8727efc5408a3639c3cfda006062a7dfcb209fceeae8ec821548209e1447aac9c88d184dea65abcd8dc7ca707123cdcadfca1872e53afa9479e1e47748f87d1a4c935b447410de88b479d28d38334fb9b69b5008cf4f2c1443f6defbef458e109d9a4d4785067e63c90f4e1b0835a556e59759a56c16145</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h2 id=\"Azkaban的组成\"><a href=\"#Azkaban的组成\" class=\"headerlink\" title=\"Azkaban的组成\"></a>Azkaban的组成</h2><p>三个主要的组件</p>\n<ul>\n<li>关系型数据库</li>\n<li>WebServer</li>\n<li>executor</li>\n</ul>\n<h2 id=\"Azkaban三种部署模式\"><a href=\"#Azkaban三种部署模式\" class=\"headerlink\" title=\"Azkaban三种部署模式\"></a>Azkaban三种部署模式</h2><h3 id=\"solo-server\"><a href=\"#solo-server\" class=\"headerlink\" title=\"solo-server\"></a>solo-server</h3><p> DB使用的是一个内嵌的H2，Web Server和Executor Server运行在同一个进程里。这种模式包含Azkaban的所有特性，但一般用来学习和测试。</p>\n<h3 id=\"two-server模式\"><a href=\"#two-server模式\" class=\"headerlink\" title=\"two-server模式\"></a>two-server模式</h3><p>DB使用的是MySQL，MySQL支持master-slave架构，Web Server和Executor Server运行在不同的进程中。</p>\n<h3 id=\"multiple-executor\"><a href=\"#multiple-executor\" class=\"headerlink\" title=\"multiple-executor\"></a>multiple-executor</h3><p>采用master-slave架构，db用的是mysql, 一个web server ，多个Executor Server</p>\n<h2 id=\"部署准备\"><a href=\"#部署准备\" class=\"headerlink\" title=\"部署准备\"></a>部署准备</h2><h3 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h3><p>安装git</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install git</span><br></pre></td></tr></table></figure>\n\n<p>安装gcc-c++</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">yum install gcc-c++</span><br></pre></td></tr></table></figure>\n<h3 id=\"下载源码包\"><a href=\"#下载源码包\" class=\"headerlink\" title=\"下载源码包\"></a>下载源码包</h3><p>azkaban3.90.0.tar.gz</p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;gradlew build installDist -x test</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"建表\"><a href=\"#建表\" class=\"headerlink\" title=\"建表\"></a>建表</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE DATABASE azkaban_two_server; #创建数据库</span><br><span class=\"line\">use azkaban_two_server;</span><br><span class=\"line\">CREATE USER &#39;azkaban&#39;@&#39;%&#39; IDENTIFIED BY &#39;azkaban&#39;;#创建用户</span><br><span class=\"line\">GRANT SELECT,INSERT,UPDATE,DELETE ON azkaban_two_server.* to &#39;azkaban&#39;@&#39;%&#39; WITH GRANT OPTION;#给用户授权</span><br><span class=\"line\">source create-all-sql-0.1.0-SNAPSHOT.sql;#创建表</span><br></pre></td></tr></table></figure>","encrypt":true},{"title":"数据中心安全模块设计大纲","date":"2021-06-04T03:17:29.252Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n # 数据中心安全模块设计\n\n> 数据中心组件繁多，牵扯甚广。需要一个稳建的安全模块来进行用户认证，权限校验等功能。\n\n初步调研，用户验证可以通过kerberos来实现。权限验证通过sentry来实现。\n\n[数据中心集成kerberos](../kerberos部署与使用/)\n","source":"_posts/王阁/工作/旸谷数据中心/安全模块/数据中心安全模块设计大纲.md","raw":"title:  数据中心安全模块设计大纲\ndate:  2021年 6月 4日\ntags: [数据中心，安全，kerberos,sentry]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n # 数据中心安全模块设计\n\n> 数据中心组件繁多，牵扯甚广。需要一个稳建的安全模块来进行用户认证，权限校验等功能。\n\n初步调研，用户验证可以通过kerberos来实现。权限验证通过sentry来实现。\n\n[数据中心集成kerberos](../kerberos部署与使用/)\n","slug":"王阁/工作/旸谷数据中心/安全模块/数据中心安全模块设计大纲","published":1,"updated":"2021-06-04T06:48:43.305Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqseq001xu6pw9avz0o5l","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"16fda5d430e5be3d0266c7554ba62fa9726b1bc60c51af28f121a39116335303\">f29c680708acd02cbb1b6cceaba061921c50cd678844d380083157fca95bec928aefef60e6a2f6c91d1b34a897187843b0717f46f30d730f533c4fd32ddf013d976bb69956643a601e059b65ce0a4a8446d66cb9047b5fb9d3698138367d6db7a7a0276aba492b2acc42abc22f64a1751b6dc3d1200049c1289b6b0a490d76e237f5de10a88e19b1e10280c3b4e23930e39b256367c5837f9fa2d81cc2fa7a77469e4e97e71006a5170c2f3c8dac3498139256681389793a3c61831df7de7b4d148918b804f0b8f7d45cadfa8f3775067b0398a49b2205ae13bca75781113e44daa8f52a6ee71e4c4074227534fbcddc93300044745aa8eb0c2f1825eadc70aa2917490ed56838af74d9601c8529ac98867b30d6ab9fabde20f75f4fc81e5bc1c44bb72719acf1362e3dbcef9923a6f73e59af8faeeb973dc9d6c0f20ec2bf72040be6dde920f898259a82a2793f26150d91838cd818b333f8fb6408c07c2dadaa6bdb30faf4c108a0c7fc89f97f3dd132330828eee666116778bd7fa43a8cdc5254d4176c83431c5e0c891f6efa4dcf690fe0866234b76a413a3aa2e601c9223a330e38d10750cb7ba7635ccef1db139ed276c4ba9e014d421edf97971fc3f591c7b8ea39f6f3aa51e66b4051cb36b48c122559f335bec154b5840f12364d12d2b0ed113a68720667bdf8a78027ebd982340b15762a5e18db5063168bec2986d8b0a9d82c6b73035bfc726081de6c83305af24d198ff316ea0995c9bc4801db</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"数据中心安全模块设计\"><a href=\"#数据中心安全模块设计\" class=\"headerlink\" title=\"数据中心安全模块设计\"></a>数据中心安全模块设计</h1><blockquote>\n<p>数据中心组件繁多，牵扯甚广。需要一个稳建的安全模块来进行用户认证，权限校验等功能。</p>\n</blockquote>\n<p>初步调研，用户验证可以通过kerberos来实现。权限验证通过sentry来实现。</p>\n<p><a href=\"../kerberos部署与使用/\">数据中心集成kerberos</a></p>\n","encrypt":true},{"title":"数据基础平台建设思路","date":"2023-02-23T02:51:20.903Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n 通过建设各种建设方案与竞品的调研，摸查了下对数据平台建设的现有的大致思路与效果。\n 结合我们的业务现状与产品化的可延深的可能性\n 对我们的数据基础平台的构建有以下思路\n\n1. 大体分两个方向，数据产品方向，这个方向下，整体的进展按产品化的思路构思，整体架构与构思，高抽象化，复用性强，具有高可配，高可用、大而全等多种特性。 \n\n2. 结合四院项目交付目标的产出，尽量能依赖于1的产出，有需要进行一定程度的定制化\n\n## 数据产品方向的构思\n\n对于数据产品，结合调研结果，我建议的构思思路是平台化的产品产出。以我们目前的数据量级、和应用场景，以构建成中台为目标，太大，也太泛。选择以一个平台为目标为迭代基础，是一个相对可行，且可达的方向。\n对于数据平台产品，功能上，我结合调研结果，归纳下来，大体可分为采、管、治、用四个方向。再佐以安全、运维等几个功能。\n\n即分为\n\n1. 数据集成（数据采集+数据存储）[数据集成构建方案](../数据集成的构建方案/)\n2. 数据管理（元数据、数据地图、主数据管理、指标管理、资源管理等）[数据管理的构建方案](../数据管理的构建方案/)\n3. 数据治理（数据质量、任务编排、调度管理、算力管理、资源管理)[数据集成构建方案](../数据治理的构建方案/)\n4. 数据应用（数据仓库、olap、BI、可视化、机器学习、图分析）[数据应用的构建方案](../数据应用的构建方案/)\n5. 数据安全 [数据安全的构建方案](../数据安全的构建方案/)\n6. 数据运维 [数据运维的构建方案](../数据运维的构建方案/)\n\n![2021-12-01-16-09-14](https://img.wqkenqing.ren//2021-12-01-16-09-14.png)\n\n### 数据平台的功能\n\n#### 较多源数据的集成功能\n\n针对结构化数据(excel、关系统数据库、文本数据)、非结构化数据等多种类型数据，构建支持多种采集方式的数据采集功能，并存储到关系型数据库、hive、hdfs、hbase、elasticsearch等中的转储功能，定义为数据集成功能\n\n#### 批、流等数据处理功能\n\n#### 部份数据资产的管理功能\n\n#### 相关场景的应用功能\n\n#### 安全与运维能力\n\n#### 可视化功能\n","source":"_posts/王阁/工作/旸谷数据中心/数据基础平台/数据基础平台建设思路.md","raw":"title:  数据基础平台建设思路\ndate:  2021年 11月 29日\ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n 通过建设各种建设方案与竞品的调研，摸查了下对数据平台建设的现有的大致思路与效果。\n 结合我们的业务现状与产品化的可延深的可能性\n 对我们的数据基础平台的构建有以下思路\n\n1. 大体分两个方向，数据产品方向，这个方向下，整体的进展按产品化的思路构思，整体架构与构思，高抽象化，复用性强，具有高可配，高可用、大而全等多种特性。 \n\n2. 结合四院项目交付目标的产出，尽量能依赖于1的产出，有需要进行一定程度的定制化\n\n## 数据产品方向的构思\n\n对于数据产品，结合调研结果，我建议的构思思路是平台化的产品产出。以我们目前的数据量级、和应用场景，以构建成中台为目标，太大，也太泛。选择以一个平台为目标为迭代基础，是一个相对可行，且可达的方向。\n对于数据平台产品，功能上，我结合调研结果，归纳下来，大体可分为采、管、治、用四个方向。再佐以安全、运维等几个功能。\n\n即分为\n\n1. 数据集成（数据采集+数据存储）[数据集成构建方案](../数据集成的构建方案/)\n2. 数据管理（元数据、数据地图、主数据管理、指标管理、资源管理等）[数据管理的构建方案](../数据管理的构建方案/)\n3. 数据治理（数据质量、任务编排、调度管理、算力管理、资源管理)[数据集成构建方案](../数据治理的构建方案/)\n4. 数据应用（数据仓库、olap、BI、可视化、机器学习、图分析）[数据应用的构建方案](../数据应用的构建方案/)\n5. 数据安全 [数据安全的构建方案](../数据安全的构建方案/)\n6. 数据运维 [数据运维的构建方案](../数据运维的构建方案/)\n\n![2021-12-01-16-09-14](https://img.wqkenqing.ren//2021-12-01-16-09-14.png)\n\n### 数据平台的功能\n\n#### 较多源数据的集成功能\n\n针对结构化数据(excel、关系统数据库、文本数据)、非结构化数据等多种类型数据，构建支持多种采集方式的数据采集功能，并存储到关系型数据库、hive、hdfs、hbase、elasticsearch等中的转储功能，定义为数据集成功能\n\n#### 批、流等数据处理功能\n\n#### 部份数据资产的管理功能\n\n#### 相关场景的应用功能\n\n#### 安全与运维能力\n\n#### 可视化功能\n","slug":"王阁/工作/旸谷数据中心/数据基础平台/数据基础平台建设思路","published":1,"updated":"2023-02-23T02:51:20.904Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqser001yu6pw5zis1jrj","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"2d4451943388531a098684f5882e1232dd3dc43dd5103e90fd33f7f24ec5c2c6\">f29c680708acd02cbb1b6cceaba0619272de531e177edd19252cbc56b81bb0d2c16549492d7e0144c672bec04f66355435d5b577d39ea320bd017919ac556c43e966e3d9d5e94a55335dbf0cf3bf5164096a825efe80adbfeb5bf41d9349b81f6e5c56e1c7c1fc67b9371b0bca2745eddd58ab5bea369ba9e352816abbc59f409a0324c9dc65287c3115fcfc31f8c2dcdd2026097bedcfff09ed3c1f4b1ef9b002e4170eaf7cbb47739171dad94f6e9935cee25c5631e3f651d7c752390e87a5d2d3d2112ac36dc88b899f697b8fdc77a7e515594ddbfd68a39f7cae7b16baf63aa03ea111e97551c413794d98b47b72ed1e0a3be79bb0df676fe45f3e3b7b65977a67ce1d0e53027aaed03d40e0f7873654bd22dcbfc0ab54555551e66eb2abe2dbe27a5dc5e18942a1e5c12432d20aa7b7ab505ae521cc9c0f5da5eeca40e14428ca28f9aae2a25ba08a50ef4d824869a53d30e1a89fa4a00c0a35ab54ef7f3e6d9ac22b8be8aa85419db836b07371e6e853ba884a408b725e2cb8dc0e68f49855a456ab1907ca8b94b30b4efcc5586cd5474c8228961a155101aa68b91cc0c4bda1956b7283908f151388c0343e97cb030d5a86776901089748715d4efa181f43e637626582fca53961edcd89ea0ae1bb17341a8bb9812e82381580a8f9b522d1029b7c251187c88bbdc83d5e96968e3dce89311b8443a954c183513206059d222e8ec39188d32f8325dfe8800aeaf5dd6c2f8e108b20910d3fd02d069ffd27258592f66a25fbf1f0377404769acc018865ce37e6c101f41d52a9e0eaf7171dc511f74803a4673416f31a4f8194ecb72351dab35c51c2c752cdbd0f67e055248f68da778b0ae2ef870a3c9a9cfdde3e6722b327cd14414b50a573819836b212b493bdcb8a6f990caba8b0cae76433ae4fc06a20b54145c8a043f2fc1b68bbb544a66d9f32a8b80ef38f7bde0367ae4726a3d4828461304e648dc4ab6d367ed81bbebb03a2c38b129282936e2f90f5b1e1d135d935519fb800b7c45321861744b31bd0dafec70684ca4f25ebc128b8fa6a5042ba5f8767a665814771f9e5d0673f2d06b2db11458589088e2315fd2f4199fb4b629db4e360b86f424e09881edd7b4f2bad23aae5a776d72765f32ae9f568e001993a8fdec764c921491a5686a40098ac4c73fead7bdc707f0b63b715715bc52c8ca1c5e6d364d7024931f527dd4fcd326824f5449a827c4656b03e2888512c4d6a8ad0b087c539f9a0392820e9c222f9c6a343247cf38ad59f31243afe03c0ed0e695966e5390a6418aad6d7cbd450505654322d88a97923ec239081430c926b57a86f3f08865722cf54d695b689b7bf253fb5312ab32a65547d6a4501abf9419be3fb2eb78ffa8b4b1e4c29d208f6e3a1c5cf65bf2acf68c800e1c39fb8d3ab3f9e4a8f0c33b393f4aae1f689ceccfd217a01918bc463622d9f25b01203b4d84176e1b48714dd7885366aed5c9a846f5cfecde4eff9a45ed3aad65b91ced96f3580299478ea2317fd3f093604d0a05d6a35396715eb46d0167a31e21cb7754467bba74f84ad8c4efc93425dbf3c4cde6573aa683411f0002e4817dec0d71905b16e2fdd9be306e0fa57cc93b3b9ccb118fc580c20a11c77b0ce0fd63213169f19f4f9e34d6b40247c54a22d3287a74fbafbd5dfcd3a8e66741fac1ed6e847ad0141b1b8f08839752d22e5c6fb26161ac6327c9a8db8664deeed6b54aa824feb864e0ecc8763fa4bf894b9487d1a18d015c9e02f881d092c1c4e1147343c8e97a164cc51f4e534a30e08d9394c5fc551c66cbee92c3dab37a64590e4c50e5ee56d223739d01340951d1e12f391df995a8d3f24a0a79a5d825822b32cfa5a0a00fa142e990705a30437a6b66bf951ad822902f713aa4d0fa294292cb5ea048d162f9ba494735c70c4e2293fb40f0ab87d6caee3185a373c16e586718784fade4edd33a7495009a6ddfba0153510923c617faee85abe45689f39f19c1b788e8af1cf38591d980f220ef7b991d8a591403cc19f752d7d4f9195c97a6e20d169b7571ef86102050873f3045d1a7367670c9da48bd93d21824ffbd631645882c0e3663e90a8a961f770e459dd8f8dca1eea1b560f0474afeb6aa1debffabc478eebd8b8dbca4508504b53852ac46e0ca5023bb125abb30cc2592e0a4939202dc0784176349c29403907fc4bc0317633dd30fdc6911012635c72099194ea63cd25d348f310c0b37339c3c44e4293bddd80c86e8e4e0e0ea03b741e16efb0ee0e40e1039adc8ea00ea0af6d18b8c238b1010c435cee45600bdd69dc0a39a915ea1dce18b275b124a5277b15cf60947dd37c7a480a35348b24460459148cde6cb08e4351e18ea012545cb2fed8cf7eff10c997fc5781b385d01ea644e014cfd56f077f2ab54682d84670770f761175f32460f9f6e8dc16fa8f54e3829b6b917c66e37db3a693bcc0de6af81f4d091ff07bb7d85cfd639841f9da19498a2ff59a0cc658414ba4c3c8b1a0bcab4c2291a2c64fab05643b186f7db922608592c5ccfc91c7f89ce2db3a97dd2a4e5a64cf1c9ddbd0ed7bb977ad42673ce2627b30fc75b54815ce45a1fe3dac07ed4ce38ba021d50f4c7b4b01d3161a9b229756beca6b6ae34f556486482c4b80a10d6925e2e1624c492cd2e7cf5714c6416fe05504d7a03198625ee818b81faa5010cf11eb30e6dbca89587e3d7bf761a67b92323c71a18bd94602760d0ed9320c4ed12a48077f053991f5697896b1a48e7e7582b44cbed6959d3e08a93621e207a48bd9053d754d3cd55217d162131f735ff0fca1f96f762331fc1ea0043c059d988b7c27835df83cba7b0624a23ffa73c2ce079a59d08b309c4b1fba593dd162366f5595ee79988be721a02129a50a334016451bc9a84763fe3253b4d2bc96b4f3724f1342a953f3ccb86f8724317a279e8bd4f072823069e078805c3c8fbdedf95a94f36f2fa76f9c5cac38bcfa0d9c5eb34ae2c9f7c7f695d6d48e10d0beb40cfc2fcb82c5cdd8db3f397dfc26fa5c3b93d73fd6d85f7608eac5d0e64e03766b7c5fd80631a5939c8fba4ae847d01f5ec36b26be9c73caea801b18291493b851b22f6e9550cceff37954c11ce1f6f500972ab813f8289cebf29e2d4488d6dc57e662b08e1ad20783975616dfd018eb2ccf837af35c3d3809bf7aee248c2583fce1322bd5b450bbf78b8cc6e9685ac62c9660ca708f65f122dc021ee1db723a080863c16b8125a523fbd695abb5fc400953222f54292bdb54f2b0cc7af656e18a3048e8962dd579d76bfb30a1ed64e5dcab9ba37d9cd70f818cb4816c9043c856998e90056b1e5eaa051091720a7c4b7a5e67850e72c270bf50f4ddd986ef9dc17513b108cd4daed854b6a0db52a7dcfcddc4943cc1cefd7a2baea4fc237067f261bdb568b40058f40deeac067924b5a977107a3116239b16bd4f384de6c0bca7541ad288dbfa4e2ee0dc7ca11206e08cfbd47afdbfd7b14f5b0c6feeddbd4466464d6380bf239cb307da945c31330a01bfbd1f3aea69f35d26b009ba7be37470d720354162e367436950cb303c82124f04b9235c917393533384a181c2e74b0d99cce250e290823f93c308ee87cdfd868156fa726a727798889c89829a101536e6b450f33ffcf05acef84792bb81da19b565141d4234954b3b0791ab9a20738fbb7daedf3c60245573a860f83b51834dc789d39e82659930719b33e9e8b50fdd3bc267d5a5827f7a1e812259d641ea06a9c86653aa88d3fdf673aba96042b2f469041a78ed2d0ce867cf7b536defeadae82f5e2cc1526612257d1ef3f12120ea907c66a06853187a0bf346018c51a0cd8d11e10520001bbfe2bc087193cf44e8399bc0814052469fa6538e1d6c594d7b0c5c68fc5e54d248d7bce915fb208c35e5c0ece8a2710b6f37eaf105b4a068ac282f38f1ceb4ff045c61a41b84f9752a2a272be492b6690c951ca0f01df2594a57df35c32b6496d26c854445ac99243c25859b0ec503bf146f4cf83717f8f11767641395acd91b34bfeb9e6a6b6041b530c116580d520c951206a215673e4ec57318e9712fe3ef223dc50adc4afb3c6871307f44583717ad519012465df81e76230e7d4b97ed1b92ceaec61e2c36ece398f82943f75c70a0ec7536f37fb6dbfed59119ab1654da342529bfa5ac2101832d72da22feb6c2cd11d75c638e21af81fa9a42fd13a158c55ad95309bb43d08ea7f8620b9a3200daf33467fac12f0611839e1de0760e7f0c2d213ce6ad85f74a4074014166fb0b20c1ca0c68531a2b1403d2449c6e0a5c341a1b65b941636edc4003b0687b6a087a38af9b7f6b6d86ef92ed76b4b54bc00fbd6b1e27c5f6970a2f18e6597600d168926e73f9bc97dc42f6a8579942cdeb1ffe289d636942480a8fb0fb2d5deb2d72b8a45446a7c5e9b588ebae54832fe669a571b263c8f400f56e64c9ddc9bac5291f010cf5eacecd6832171e882d877e883e986fa1be8fa700fff88fe242813917a91cf3303756b38808f63afec62d3ad80602c47d9eec573c2d2e0a252dde11312f78dc9330a243548442f8a74acc591bdc2673f4695c5bbcbaccea152b640e985442e3f98c47acef4156790514f57f136a96878414ff4b68245c3ce35b00539d063df01e33b421cb481d5eba682f68fc9e5e2d6537301a7176d8f1771efcff258ecf47514447d0e6adfb85cd715bafc9d8f39d4e13a2cee633657694281a36a2c92f8d0cf26a53c75eb366ea5f26b2f925a2b462f97c90aed35081f43153acf1bab67fafc6096c3a293b15e0e8cffd301f050cc6b3d3494a86ae1c4f9bdcdf19de05f3ced09e549ab34434b5b5b8d144907e4c0345f9c0cbd1c3ca1030c759a9875d804f21f46e590ed56dd88aea0fde250e6438fe0684edc0102a11969c30982a591f00b1515c34395ceb8e2d2673c7f2756864893904e40905a4583df450c3dbc23256b2165e8446efa227fe1f41d79f6dea54adc22fdc98a516e312bed5cb707a337571b1ac881332cc91218a7ed0e94022f4ab67da435096c2376d49aad5a69feb88aa8fbc9f933c21182e476e0b1b410b9064c5d0f7360dd6824a17e8a3fc3ba13117ae7f8417ee35e33f1b4a0426f0ed095e8341acc695cff083bcd19ad48b7c60113bcef411202a</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<p> 通过建设各种建设方案与竞品的调研，摸查了下对数据平台建设的现有的大致思路与效果。<br> 结合我们的业务现状与产品化的可延深的可能性<br> 对我们的数据基础平台的构建有以下思路</p>\n<ol>\n<li><p>大体分两个方向，数据产品方向，这个方向下，整体的进展按产品化的思路构思，整体架构与构思，高抽象化，复用性强，具有高可配，高可用、大而全等多种特性。 </p>\n</li>\n<li><p>结合四院项目交付目标的产出，尽量能依赖于1的产出，有需要进行一定程度的定制化</p>\n</li>\n</ol>\n<h2 id=\"数据产品方向的构思\"><a href=\"#数据产品方向的构思\" class=\"headerlink\" title=\"数据产品方向的构思\"></a>数据产品方向的构思</h2><p>对于数据产品，结合调研结果，我建议的构思思路是平台化的产品产出。以我们目前的数据量级、和应用场景，以构建成中台为目标，太大，也太泛。选择以一个平台为目标为迭代基础，是一个相对可行，且可达的方向。<br>对于数据平台产品，功能上，我结合调研结果，归纳下来，大体可分为采、管、治、用四个方向。再佐以安全、运维等几个功能。</p>\n<p>即分为</p>\n<ol>\n<li>数据集成（数据采集+数据存储）<a href=\"../数据集成的构建方案/\">数据集成构建方案</a></li>\n<li>数据管理（元数据、数据地图、主数据管理、指标管理、资源管理等）<a href=\"../数据管理的构建方案/\">数据管理的构建方案</a></li>\n<li>数据治理（数据质量、任务编排、调度管理、算力管理、资源管理)<a href=\"../数据治理的构建方案/\">数据集成构建方案</a></li>\n<li>数据应用（数据仓库、olap、BI、可视化、机器学习、图分析）<a href=\"../数据应用的构建方案/\">数据应用的构建方案</a></li>\n<li>数据安全 <a href=\"../数据安全的构建方案/\">数据安全的构建方案</a></li>\n<li>数据运维 <a href=\"../数据运维的构建方案/\">数据运维的构建方案</a></li>\n</ol>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-01-16-09-14.png\" alt=\"2021-12-01-16-09-14\"></p>\n<h3 id=\"数据平台的功能\"><a href=\"#数据平台的功能\" class=\"headerlink\" title=\"数据平台的功能\"></a>数据平台的功能</h3><h4 id=\"较多源数据的集成功能\"><a href=\"#较多源数据的集成功能\" class=\"headerlink\" title=\"较多源数据的集成功能\"></a>较多源数据的集成功能</h4><p>针对结构化数据(excel、关系统数据库、文本数据)、非结构化数据等多种类型数据，构建支持多种采集方式的数据采集功能，并存储到关系型数据库、hive、hdfs、hbase、elasticsearch等中的转储功能，定义为数据集成功能</p>\n<h4 id=\"批、流等数据处理功能\"><a href=\"#批、流等数据处理功能\" class=\"headerlink\" title=\"批、流等数据处理功能\"></a>批、流等数据处理功能</h4><h4 id=\"部份数据资产的管理功能\"><a href=\"#部份数据资产的管理功能\" class=\"headerlink\" title=\"部份数据资产的管理功能\"></a>部份数据资产的管理功能</h4><h4 id=\"相关场景的应用功能\"><a href=\"#相关场景的应用功能\" class=\"headerlink\" title=\"相关场景的应用功能\"></a>相关场景的应用功能</h4><h4 id=\"安全与运维能力\"><a href=\"#安全与运维能力\" class=\"headerlink\" title=\"安全与运维能力\"></a>安全与运维能力</h4><h4 id=\"可视化功能\"><a href=\"#可视化功能\" class=\"headerlink\" title=\"可视化功能\"></a>可视化功能</h4>","encrypt":true},{"title":"数据中心服务资源","date":"2021-04-26T13:52:35.000Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n## 资源表 \n\n|编号|  hostname   | cpu  |内存| 系统盘&数据盘   | ip  |云服务部署形式|  * |服务器用途  |使用状态|资源申请人|\n|----|  ----  | ----  |----|  ----  | ----  |----| ----  | ----  |----|----|\n|1|scm-server         |16          |32    |200G 500G        |192.168.10.206  |vm | proxmox |scm-server|*开机* |王奎清|\n|2|ck01               |16          |16    |200G 500G        |192.168.10.207  |vm | proxmox |clickhouse|*开机* |王奎清|\n|3|ck02               |16          |16    |200G 500G        |192.168.10.208  |vm | proxmox |clickhouse|*开机* |王奎清|\n|4|ck03               |16          |16    |200G 500G        |192.168.10.209  |vm | proxmox |clickhouse|*开机* |王奎清|\n|5|kafka01            |8           |8     |100G 300G        |192.168.10.217  |vm | proxmox |kafka集群节点 |*开机*|王奎清|\n|6|kafka02            |8           |8     |100G 300G        |192.168.10.218  |vm | proxmox |kafka集群节点 |*开机*|王奎清|\n|7|kafka03            |8           |8     |100G 300G        |192.168.10.219  |vm | proxmox |kafka集群节点 |*开机*|王奎清|\n|8|es01               |16          |16    |200G 500G        |192.168.10.226  |vm | proxmox |es |*开机*|王奎清|\n|9|es02               |16          |16    |200G 500G        |192.168.10.227  |vm | proxmox |es |*开机*|王奎清|\n|10|es03               |16          |16    |200G 500G        |192.168.10.230  |vm | proxmox |es |*开机*|王奎清|\n|11|calculation01      |16          |16    |100G 200G        |192.168.10.240  |vm | proxmox |计算节点 |*开机*|王奎清|\n|12|calculation02      |16          |16    |100G 200G        |192.168.10.241  |vm | proxmox |计算节点 |*开机*|王奎清|\n|13|flume01            |8           |8     |100G 200G        |192.168.10.247  |vm | proxmox ||*开机*|王奎清|\n|14|flume02            |8           |8     |100G 200G        |192.168.10.249  |vm | proxmox ||*开机*|王奎清|\n\n## hosts\n\n```\n192.168.10.206  scm-server  \n192.168.10.207  ck01        \n192.168.10.208  ck02        \n192.168.10.209  ck03        \n192.168.10.217  kafka01     \n192.168.10.218  kafka02     \n192.168.10.219  kafka03     \n192.168.10.226  es01        \n192.168.10.227  es02        \n192.168.10.230  es03          \n192.168.10.240  calculation01 \n192.168.10.241  calculation02 \n192.168.10.247  flume01       \n192.168.10.249  flume02 \n      \n```\n\n\n192.168.10.206\n192.168.10.207\n192.168.10.208\n192.168.10.209\n192.168.10.217\n192.168.10.218\n192.168.10.219\n192.168.10.226\n192.168.10.227\n192.168.10.230\n192.168.10.240\n192.168.10.241\n192.168.10.247\n192.168.10.249\n192.168.10.226\n192.168.10.227\n\n\n192.168.10.226  es01\n192.168.10.227  es02\n192.168.10.247  flume01\n192.168.10.249  flume02\n\n\n\n","source":"_posts/王阁/工作/旸谷数据中心/基础/数据中心服务资源.md","raw":"title:  \"数据中心服务资源\"\ndate: 2021年 4月25日\ntags: [服务器,ip,信息]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n## 资源表 \n\n|编号|  hostname   | cpu  |内存| 系统盘&数据盘   | ip  |云服务部署形式|  * |服务器用途  |使用状态|资源申请人|\n|----|  ----  | ----  |----|  ----  | ----  |----| ----  | ----  |----|----|\n|1|scm-server         |16          |32    |200G 500G        |192.168.10.206  |vm | proxmox |scm-server|*开机* |王奎清|\n|2|ck01               |16          |16    |200G 500G        |192.168.10.207  |vm | proxmox |clickhouse|*开机* |王奎清|\n|3|ck02               |16          |16    |200G 500G        |192.168.10.208  |vm | proxmox |clickhouse|*开机* |王奎清|\n|4|ck03               |16          |16    |200G 500G        |192.168.10.209  |vm | proxmox |clickhouse|*开机* |王奎清|\n|5|kafka01            |8           |8     |100G 300G        |192.168.10.217  |vm | proxmox |kafka集群节点 |*开机*|王奎清|\n|6|kafka02            |8           |8     |100G 300G        |192.168.10.218  |vm | proxmox |kafka集群节点 |*开机*|王奎清|\n|7|kafka03            |8           |8     |100G 300G        |192.168.10.219  |vm | proxmox |kafka集群节点 |*开机*|王奎清|\n|8|es01               |16          |16    |200G 500G        |192.168.10.226  |vm | proxmox |es |*开机*|王奎清|\n|9|es02               |16          |16    |200G 500G        |192.168.10.227  |vm | proxmox |es |*开机*|王奎清|\n|10|es03               |16          |16    |200G 500G        |192.168.10.230  |vm | proxmox |es |*开机*|王奎清|\n|11|calculation01      |16          |16    |100G 200G        |192.168.10.240  |vm | proxmox |计算节点 |*开机*|王奎清|\n|12|calculation02      |16          |16    |100G 200G        |192.168.10.241  |vm | proxmox |计算节点 |*开机*|王奎清|\n|13|flume01            |8           |8     |100G 200G        |192.168.10.247  |vm | proxmox ||*开机*|王奎清|\n|14|flume02            |8           |8     |100G 200G        |192.168.10.249  |vm | proxmox ||*开机*|王奎清|\n\n## hosts\n\n```\n192.168.10.206  scm-server  \n192.168.10.207  ck01        \n192.168.10.208  ck02        \n192.168.10.209  ck03        \n192.168.10.217  kafka01     \n192.168.10.218  kafka02     \n192.168.10.219  kafka03     \n192.168.10.226  es01        \n192.168.10.227  es02        \n192.168.10.230  es03          \n192.168.10.240  calculation01 \n192.168.10.241  calculation02 \n192.168.10.247  flume01       \n192.168.10.249  flume02 \n      \n```\n\n\n192.168.10.206\n192.168.10.207\n192.168.10.208\n192.168.10.209\n192.168.10.217\n192.168.10.218\n192.168.10.219\n192.168.10.226\n192.168.10.227\n192.168.10.230\n192.168.10.240\n192.168.10.241\n192.168.10.247\n192.168.10.249\n192.168.10.226\n192.168.10.227\n\n\n192.168.10.226  es01\n192.168.10.227  es02\n192.168.10.247  flume01\n192.168.10.249  flume02\n\n\n\n","slug":"王阁/工作/旸谷数据中心/基础/数据中心服务资源","published":1,"updated":"2021-07-12T02:28:56.919Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqser0020u6pwdrn52v3s","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"e6bf93d4ea618a5132518c227d7e44371a34153673f8bf49459542f51aab1095\">f29c680708acd02cbb1b6cceaba06192239b86c4fa364bbce84e63d27e291155dc5a9044f7923fa526825fd6d5e201f8755438714b497e381379775722112eea2825dcca82ffd891553059de6fa1e230a856fcc9d5606f1d2fc340d0f4f5f881599a58e60c68b40cfab90e09530268675529a04a2567976d6885e2c61d0485fcea7a7e9e5aab091c6d1c6c953ba398bfd5559b8edcfc6fea4e99f9dbfae2359ca746cae330d71624283e88db05c961d9a760a40976da832c9921a8fd6470a5d1f77eb352803851cd28831e23654478fed15a2e1fe56b69cd428e903d501e7c0ab267e982ac4479faa91f24cbc46edcf44b3747e67c9e033151718f63e3b5d3afc774940932b2533574c4b7bba9ad10bac8ce8a325be7205c50c9294dedd0d0b2fa8cbe4a2a99459cf8d13c2e77ba5b1879c6b10bee068d21475129c5985d7a47232448bc00b56a5061605d0cdf1b7dcea88dfcf59fa2b084084c1e15c84880f23f146868817fbf772fba738d28a99b83128091a0431a7b0640971677ad56df1ced8e45b97033f1cf0787fb850d90d581bc4520d45659cd1ca76c0cea606dc515ab37317b5bb5e4f0b9cf84d0aa0bcedddf0dff769ea6f25bdb715f618a0a3d43f84364712702a2a82786dccc5817ff7958a54351e16810c67616bad65c36a0569fd8b1243245dfaf404a324929e4a069e934ec292391353e9158f8f1b0bfb7509de8837a675270d9599cb8ccd823bd24a20d8dcd9a30429c08f86bf83d9135f27183da9410d5bbb7f8f7d829f919da38f9dc51b44a8ee94542b0a9237a4424f4e51a690361786446f5d2b0b12a9ea097fa241ce78120f64e300290e0f6c027ac6517565f99de2697c6489846ff25a48e3528dd219bbc07d8a495bc3648b362071c3539023654591394721f56a4fd101ae624f78c02f1142864fa865d6af9bb137cfaf0de8ebb96ddb5338c662206ec5035e2e3b01baea7cba387996f1a4eae641177047166e31032d9e5ef1258f59cb6533859495e0b8c558f42221fb843c5e2dd78ad9b165ae933a4ca511e75ddb7094e8f62f95182357ec56fc5ad115e6cdb0e1c609dcd9aee40e2d70e3fd4b89026bd38a1df61453077aa6c9c16850321447ff136c5ba363481dfb316ab281dc89920f36958de8bf075048f4eeff0d7a883787755a7e60f987604621e6f8db09ddf40cdf18dd313ed23d9aab86e88563b8be0d97655553e6cf0d68f613074dd96a2ac65858616276dd519363aed930c76929c545cf573af960c510f03bb87638e2cf8e91e5b472ba19b80b7a5d0858d3bf6a48c367f712e5b7ac51cdfea15791746ca447aa328203516b3ffa0cf25f64e5e931edc8880b9f6bfcf17ea1863b584877037ce31458e7913684f67b980238b4658cb321617e88450cd597e89730f9b29de034f200158bc19505dbf9ecbcae6dc444486fb869976e978c53c46b0cd8b90fb61055372811e8eea2910f001a1fcc895102a6a5088c37c2c84f0e5bfb6b7b368d055edf9811f70ae631f53bdebde9c636881287b788fd4f719c13144872b7bf34351d61dc82d0e03eb91e1509600e5171186bc52645081c76f78c74567744891f69aadac872c4ed7bd5e8a5538b424460fbb46eb30ccb3f39e4a90b2e9c5767bbd2702e4c79eb8ab6e2c33140fa9397548b1632295a28fbc7b4ea18c846d70e86f8fcf299d5bf1ed108eaf94a48a82dccf381929d87232dedf6fc245f5e3bfbb9c26d3c37d48ffca41b6b67862b79794f7953373f7cc1e0751c51455dcc99946fd06d8e318a269d11a1bd1f35d8119776fb382a262ad5f6098135f0ceb3d4fcada2bc676862e3984798d72b5c319482e549ffd90e35e63bbe290fdf040cd3b7d9e40f91afe53749d3975773d1fd974917ac15fc99d96807de5eee49eb8242de33fe66c3b923f10efe21390f5506a11154273fe08a62af6e74c7def8bf5cf9491b325d93532d3b968d4cc60211ec08742e202545a690925ac9c26c1511835d0caa966b9671211da1ffc577d42c91819cb705820f7eb2a469ab906d1ddc83851548778af75c32ba5f39987afe7f1f73a184058e6a8b70a6f836db068551a663255bfee5728e082fb411f2d5638b23cc8d199c37dde679aa846f145c56373bdb00a2c67fd4fce7490527b0b2f5c8453c0562700f0b3810436ae9fef128db020f3872b34871082175067db2244a87794362d9ffdf15ed27c5c6a4f27867fd48a909a7af0eb3d67f8565b4fa30ca4a7ac00eea0ac82b94968e57bc16fdb545e90ea87da81460dc694480cda55be8f7d7ec6fa2f137169f4cc6170d25cbd45a0e6c2e5e042b427d08132982564bd62b54f8fec289218228cb28096eebd18254ef6569a289c9273beaa8dc60cd7aa33d5dbdbc58618b882864fce978f3a6ea29bfb349b6bfccb3e1cd9d2c58434003e3e52418da0be7cf1129836bae96267648fa4ab7160db6331e56ee7e43019f29598b45497d57c500f90346d559c49d6385689c200a6388f2b1e8569addfe8c5f01b890f2873faac21448a9f90cce8a7171b8f4046f495efacf65d6138e43eb5dbe231dfba16629beb9433f8f9b1fcaf38e8485784e8f625fe2159f72dce7e09f63928091095fdac5da8bd0deeff2c4f396306ec4e16bac4dbd4573a437037c586fcaf99c2763456234248a6f99432d94767c3eaf9979ea444037da1f78c36c02e3bd858b4dadf4eeaa6fa6f84176974ac71b1f02f9110c02a239d3d7e0e428e8f2fdccbe70d43e41c44676ab7374918332d2c28b41fdde6425696dda5ab9a1d8498ae6eb6c8b44ced14c9f64b141494496fe4b200d42aa7a0a8701e7584cb9889f1449fdd079471ccb8b8b542c297cfebed499dd8e42b063aabfda72d69d56d7221c8245e63d5e42f0893b4bda0b9f8867b2b3ed42074f28f7c5c21bf93acce30b8744d2e8f3fa064528c24bd8efc7222845ada093e365058175b77eb7aa679f429eeba60b9756648968e776165e0f9f56796aae4b9095c6edf849f2c27db5f8d4af2ed662154e28f9102ed06acf51d6d6a29c4083cde6ff2f977b177ae23f569875dcf78e150761c0f3d4a234f685c9211f487145be5cdcc724f3857531bedaec84664f350beba4111105c62f19364beeafdf79bf95b69b4b26b4c5b96fa9399c631b38dc3f09f87176f50e61968d135e480ea752cbeec92721c771ca8cb25cf5838472416538c7d9bf3fcfb0eb57a75c36d44c0cffe346538bab07cf0fa2723af0a7da8adafd528033658c0b76f43431e9b7af2bd8e4d1aea55fc7727ecfb177bb3526afad57af2c2e3275f397fb8dfdfae61a079570e7f659d71c8f54c258c018c221a7648683f0da83a89d53c745d7046b426c41fc3435e9f6fbc9cf41183e7baa00f0edf6a9b7974fc9a21e7712027e72cf67c1ec1fa2ae45b34e10946f061df275efd81a51d223ba270ee1ad3d1b91a0ba160a4cecc56b2b516e783e9db469f6524a8b57103d30186757e252cf3b01331e79e71e7867db43db9ad76bd1fbd324552f3e338b1d2566ee385a4a4b16259a91d749786e4494ca2d32312c12076f344383590e23a6f52a61d3b53dd9ad4a81bf835cb93c9847e6b2cf478e4ccea48af4c29ce7e3e53fc96f7f94954358df7dd3c87166ed5512a6f684658cdefca0d15e9e9114095c554122036f4162bdf7db8db375b4beaefe0ac05d8f9e1b476dd061b98859695c6f5894fb10e28d26eebb8c913f04bba7e548b434e5c324a1958deab207b1fcbfb4884368b8f75a735ba30c2a8c24581b02885ad88767e6ba93f32d4a280668f640c37ada813b252f5a64ae635a20e8fa3c62b8c4c150addf2fc9e26f39efcfab1b409a9b522169b3bc2859fb65f7d02dc606acec87372f71dbdd92c818dc0de25d039483255b783a97a78e268218dbde6641b9954d360094189d1b3680c6abf42a44fd9db4fd582f0a6a0ecf346d4c3d902b3c444cb632f468aa505afc3f26f3ba62f4d572dc6ecee6930d15d4df2c7f7101df368a80f17f1a82b9ef6d5928738274859862dbf0c5d0b52e58df8ead152165dcc5e54eb1a86e575485263a24de45f442b04483b3f36ea57ff4c42de91e1088851eab21d6aa7e5f4e96bc2514b53dd5d7d856033ab28453adbec3bb2448e59d242fb15e86142e94bd85a4d5fd1091c551b9309e549e9e76112a4cc9f0c6d523ab8de9391ae7540b36051487417d0ae119eb68148e7731e807380667a59befaf170312fefe44c493f16d670601b7b0155e3f960a36ef4f82d9b140b28ace297f083e83d5071e44101db93ecf412879f01cfff3320c42bc3e1a8948a8c9bab50f0672fb5854d4692d4c177b3b2ecef75d5a46740ca3d72494ef28865dae61c1b2bf345c4a5e077942f16c1c33ee811903156e517bef341f44ac5d5b0d39ae3ac205d478a581a10bf07fea80ace7ff0d67a914ac2b71fb5e03108d0a1b7ee8a99c7d79cd2166fe299387bc1f4bb0a5e527146291c9d39338ef6bb655d3d6596e74f8996f9f2845e199658a752f85e7b45f3e393b8c316f1674e93a29c14f8f09cf19f948b92d36080f7371a2b298de5ebf1b14b083734530d9c247bb8ae7b40d0ea21c67e4e90e3cedb3387902998bbb7fe07c754adea09c0c663e4c407e9af414f5991d253dbd6d7f0e1801500cd461fa9bdc3ec8634e2a1e2652f5d3f7ee0d25b27949a24aabd52f231131b87220057fe430a508272c9ec7ee6d19a6e944d461b4947014b02e1141a91ebd83ec7c54a843e829c85f81dbd1a4733f9fb71322f394423485943fee2c22ce8abd393ad308bb0d0cc48717d243ce378b4113f66199723d2fceadb1f0660a31d57b9aac9d4d164b2165d6dcc080ede74fb6e5ab04bc3dd715fc438dcc59b5b98f6a3e952a6107d87ff0801378bc99fa5a3fab6e4dbe0a6ac108cbe7092f8eb4bc6eaad14b555ee4dd251526ea07070b25f63dfaa52df0d338053a09301a7cfea58621fe5804ae793ea902af5a1075b8e950143cd9b84b32f2ee6235b251b19fdd45d90702cb27459807bc9758d82d52da301c6a82b6213c2740221858267fa55dcf52cdd6609727a6388954c559f96e71f29c21675dcec81e9d3a708edbd45d90509704618033a263af134ebabc7dfc14dfaf8e4166936ba0efaa55ad7f5c38fbca56529dfe5cfa421f87b2d2324bf8eb34f69b8fc13c4017a89ed4c0e9e1aeb0b8ec30db589d8793115677216f2b6ae81f2110f609effde3fc907c9eca8e70d6542dc4732a64a98fe20867d4a0998c26687372a79715b70ef97f62d83b1edc2fdf97e2dc281b419fd2a6b7d6ba35d3e52d4528ca6fe23fe7dc8c4bd885cd2aed0eb407c0be99b3724a283a693da47ac232340a541f2144e71cc448f8b9c164f8fb2a83606edad1c8131e89c0e692921c3f1eaa438c5f68fbeec6dfa4d019e429e9ecea5d4a3e17f7901c79a248ea71441158483d02c1395db913c361c0a276feeadd93600a4b6011ef8addd40b0d0d29d6b5748e1612ec02bd2ee6c3058485375b2004fdfff180a7f560e3d83b9270c792e3911ed7f7840bbb27c5b09f614c0ce87df90df5026cb71030d6393e9a3bea6cf633a21d5aeab4d3fc56642e4ae9941f5cf983f3bb5c8b0ba56fd83c59f5a42822c3a99775eb6b93a378f13f03702ba4470198b6b1a639394550d747d25885e1488c5a14eda9c8c1b7d9197eab7319abc36a38874c736b73f5982aebf2d207e0ac6e2bd0ab07c50a39a9b2f89b6dec7994238e3c1b741e9495ae361489dfbf1fd484c15f6c01b17150e3552daf9f36e19a574bafbf0985d84680d26932b0ba237bef9b36543d9155c8966e722a2779177180aa04021e1eab6fdeac96adc47c8e25c3c183cb75284bbb7cac9837caeb80acb88bc03d795a75e5e0958e966ea304337e462ec0d0fd296f03d5386065d2dc541ec8784463bcc6baf4651d564b692d3eb3258418a436e6255e2e3e9bb6cb76df55bc7453f99e9049c9a295cbbbd7e123814416a672aeda83117d075403cc90fe38553cfb9d18b7be529148f8f35308a71682397ee7705d147bf32b34264745bb12cfbe99f0c9226bc926b81b44eebff0cb934f70a732517da544cf45ecce39141e5e6f33d2ff0424d01b4c6d399cdd757b31ae7ef10059403e4d270acb676f968cf5695a5063d5c2eba20b6c4881ba478e6f57ac7eaae433b7aae7012c43b113f7a4c2de0223b9e17505086ea0c32c83bae30716351c9d7232590ec1cd69b415b2c788e02f4c2306c029626625845773e94b6e189e5f19c165f2d21cc8d718bd971be6cc59589bef92ddef80de7dea55a42a95cc57ede1e531b2ff4e761de1a22327cf0859fb121b7086da1ee9a722edd986699344647f6a5a84a8a226154abccdbac55c8b55ab775e8ca678dff8c79a5515a4067924cf1503e441728f1be6659abe3c5578d8b9796993e2ac7d38276475144713d929ffc0c865dc66735a61228b6ad55a723ff503c123a21f64e0c623660802e349b1810db2a101d172d95bb706f352716cb863e9d30a306786d4abb9265353d8f9218d3c2d016abdb769af4d7497e953f373d17589fc7a9fe736998aa2b69c66654f0f6dece6b45ee5df0d644fb1c62484773df3107ccfa5a84f5daafd68ec7e66113a2c7c36dda0981fb4bc8446f80c48c61d24c1a92d3c855415f9b72e212e1a8989e4865014afc47cc526b13cc0a1716d2f64a4a3c8d2a0f6a6524e7bae1d55cb068535685fd51fb855a1fadd2c49def0379a4600c76b65b35a79a9e6d956ffd7a922bae114e7d24c62d5cf349ff086f998cab9cf8350e3945c4fa47e4d725d14b7ba5907fc613d2608a0ac03e733a4ddf1b7d2c8d33d53d174990a40dfa0a14ffc557e5715d69782494433c6a55ba76324edb3a931abef516c97bbc2e995d490a42ff62223eed66760e9d8b74922d96873b0e19e88438a631d6c6df842b5fc39d521d231624a98ced09a1fdca4422afc5a5586a7aab5197c6109b85b9c3daddf667b0dc93d512d9de8a8b1dcd6ba0611d0108c6083719b88d847ad0c0357c35f7cd9c43eaad58ca4b97c535d91a28f51f1a530aa1cc3c3a4cf08f1ce7263edc25d5d0e49965</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n<h2 id=\"资源表\"><a href=\"#资源表\" class=\"headerlink\" title=\"资源表\"></a>资源表</h2><table>\n<thead>\n<tr>\n<th>编号</th>\n<th>hostname</th>\n<th>cpu</th>\n<th>内存</th>\n<th>系统盘&amp;数据盘</th>\n<th>ip</th>\n<th>云服务部署形式</th>\n<th>*</th>\n<th>服务器用途</th>\n<th>使用状态</th>\n<th>资源申请人</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>scm-server</td>\n<td>16</td>\n<td>32</td>\n<td>200G 500G</td>\n<td>192.168.10.206</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>scm-server</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>2</td>\n<td>ck01</td>\n<td>16</td>\n<td>16</td>\n<td>200G 500G</td>\n<td>192.168.10.207</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>clickhouse</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>3</td>\n<td>ck02</td>\n<td>16</td>\n<td>16</td>\n<td>200G 500G</td>\n<td>192.168.10.208</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>clickhouse</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>4</td>\n<td>ck03</td>\n<td>16</td>\n<td>16</td>\n<td>200G 500G</td>\n<td>192.168.10.209</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>clickhouse</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>5</td>\n<td>kafka01</td>\n<td>8</td>\n<td>8</td>\n<td>100G 300G</td>\n<td>192.168.10.217</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>kafka集群节点</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>6</td>\n<td>kafka02</td>\n<td>8</td>\n<td>8</td>\n<td>100G 300G</td>\n<td>192.168.10.218</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>kafka集群节点</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>7</td>\n<td>kafka03</td>\n<td>8</td>\n<td>8</td>\n<td>100G 300G</td>\n<td>192.168.10.219</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>kafka集群节点</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>8</td>\n<td>es01</td>\n<td>16</td>\n<td>16</td>\n<td>200G 500G</td>\n<td>192.168.10.226</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>es</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>9</td>\n<td>es02</td>\n<td>16</td>\n<td>16</td>\n<td>200G 500G</td>\n<td>192.168.10.227</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>es</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>10</td>\n<td>es03</td>\n<td>16</td>\n<td>16</td>\n<td>200G 500G</td>\n<td>192.168.10.230</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>es</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>11</td>\n<td>calculation01</td>\n<td>16</td>\n<td>16</td>\n<td>100G 200G</td>\n<td>192.168.10.240</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>计算节点</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>12</td>\n<td>calculation02</td>\n<td>16</td>\n<td>16</td>\n<td>100G 200G</td>\n<td>192.168.10.241</td>\n<td>vm</td>\n<td>proxmox</td>\n<td>计算节点</td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>13</td>\n<td>flume01</td>\n<td>8</td>\n<td>8</td>\n<td>100G 200G</td>\n<td>192.168.10.247</td>\n<td>vm</td>\n<td>proxmox</td>\n<td></td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n<tr>\n<td>14</td>\n<td>flume02</td>\n<td>8</td>\n<td>8</td>\n<td>100G 200G</td>\n<td>192.168.10.249</td>\n<td>vm</td>\n<td>proxmox</td>\n<td></td>\n<td><em>开机</em></td>\n<td>王奎清</td>\n</tr>\n</tbody></table>\n<h2 id=\"hosts\"><a href=\"#hosts\" class=\"headerlink\" title=\"hosts\"></a>hosts</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.10.206  scm-server  </span><br><span class=\"line\">192.168.10.207  ck01        </span><br><span class=\"line\">192.168.10.208  ck02        </span><br><span class=\"line\">192.168.10.209  ck03        </span><br><span class=\"line\">192.168.10.217  kafka01     </span><br><span class=\"line\">192.168.10.218  kafka02     </span><br><span class=\"line\">192.168.10.219  kafka03     </span><br><span class=\"line\">192.168.10.226  es01        </span><br><span class=\"line\">192.168.10.227  es02        </span><br><span class=\"line\">192.168.10.230  es03          </span><br><span class=\"line\">192.168.10.240  calculation01 </span><br><span class=\"line\">192.168.10.241  calculation02 </span><br><span class=\"line\">192.168.10.247  flume01       </span><br><span class=\"line\">192.168.10.249  flume02</span><br></pre></td></tr></table></figure>\n\n\n<p>192.168.10.206<br>192.168.10.207<br>192.168.10.208<br>192.168.10.209<br>192.168.10.217<br>192.168.10.218<br>192.168.10.219<br>192.168.10.226<br>192.168.10.227<br>192.168.10.230<br>192.168.10.240<br>192.168.10.241<br>192.168.10.247<br>192.168.10.249<br>192.168.10.226<br>192.168.10.227</p>\n<p>192.168.10.226  es01<br>192.168.10.227  es02<br>192.168.10.247  flume01<br>192.168.10.249  flume02</p>\n","encrypt":true},{"title":"clickhosue集群版实录","date":"2023-02-23T02:51:20.904Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n# clickhouse集群版实录\n因为一些原因之前的clickhouse环境缺失，这里要恢复一下clickhouse。目前三个节点已有clickhosue的环境，这里主要是恢复一下集群版，之前应该是搭建过一次集群版，但目前无法找到相关详细记录，所以这次要详尽记录一下操作流程\n\n\n\n## 操作实录\n\n1. 修改config文件，打开listen_host的注释\n\nvim /etc/clickhouse-server/config.xml\n\n![2021-07-12-10-50-47](http://img.wqkenqing.ren/2021-07-12-10-50-47.png)\n\n2. 创建/etc/metrika.xml\n并添加相应的配置内容\n\n3. 替换config.xml中data path 的路径\n\n%s!/var/lib/clickhouse/!/data/colony/clickhouse/!g\n\n4 重启clickhosue-server\nservice clickhouse-server restart\n5. 设置账号密码\n\n```\n<users>\n    <yanggu>                      <!--用户登录名-->\n        <password>yg123456</password>    <!--用户登录密码-->\n        <networks>\n           <ip>::/0</ip>\n        </networks>   <!--允许登录的网络地址-->\n        <profile>default</profile>  <!--用户使用的profile配置-->\n        <quota>default</quota>      <!--用户能够使用的资源限额/熔断机制-->\n    </yanggu>\n<users>\n\n\n```","source":"_posts/王阁/工作/旸谷数据中心/组件/clickhouse集群版实录.md","raw":"title:  clickhosue集群版实录\ndate:  2021年 07月 12日\ntags: [clickhouse、数仓]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n# clickhouse集群版实录\n因为一些原因之前的clickhouse环境缺失，这里要恢复一下clickhouse。目前三个节点已有clickhosue的环境，这里主要是恢复一下集群版，之前应该是搭建过一次集群版，但目前无法找到相关详细记录，所以这次要详尽记录一下操作流程\n\n\n\n## 操作实录\n\n1. 修改config文件，打开listen_host的注释\n\nvim /etc/clickhouse-server/config.xml\n\n![2021-07-12-10-50-47](http://img.wqkenqing.ren/2021-07-12-10-50-47.png)\n\n2. 创建/etc/metrika.xml\n并添加相应的配置内容\n\n3. 替换config.xml中data path 的路径\n\n%s!/var/lib/clickhouse/!/data/colony/clickhouse/!g\n\n4 重启clickhosue-server\nservice clickhouse-server restart\n5. 设置账号密码\n\n```\n<users>\n    <yanggu>                      <!--用户登录名-->\n        <password>yg123456</password>    <!--用户登录密码-->\n        <networks>\n           <ip>::/0</ip>\n        </networks>   <!--允许登录的网络地址-->\n        <profile>default</profile>  <!--用户使用的profile配置-->\n        <quota>default</quota>      <!--用户能够使用的资源限额/熔断机制-->\n    </yanggu>\n<users>\n\n\n```","slug":"王阁/工作/旸谷数据中心/组件/clickhouse集群版实录","published":1,"updated":"2023-02-23T02:51:20.904Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqses0021u6pw3p8qeljq","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"9c405bfc5e8feab85129346a23afaf521d1202e7e6660edd49e54b27455958dc\">f29c680708acd02cbb1b6cceaba0619209331c91f8b9a83bcf29f00aef115e6b907bc849433922a5198b1819e76959d38de0f3239e78b42b8ff7602f8e3cd6d9b0bc629f718fdef7813e795295d0d872e2dfbcc2990248c75d4dae979b4775bf7dc26c8ba362ec3235ee1eedd11bad961833ace53a548fcb3682ce5ec7318659c95a1658dfb434a7e3a3effb03b79b8101cc698136d366b1b802897ec851efd1f4471b612bf3103ca221231c8ca334a1d6acb23fb8ad88c35ab433516bb90b073e980d5c675b71105b28ae19c5f1c1430ba1a55660a4aef6916ed73637aae13634de589eb2d0b7ce00262951e9ab02099ccbedaf8a81e0b282117392f377a5c7e8aa2835933e90dc41bf602ddfac8a8696bb78604171a9f8c3c7b4f91da61760d73d932dfc7300012bd5d187fa219e01cc645cb0a06cac7057effa80daef41c3df9a2c275f13d44a351dc8418975571ec0e8112c4ba12f26a5c17db9667a6c5ab737b1a574161d05d1ae37ce5e4e5e58960586efc4c53139d88faadba8342327a67e60f2f859e3c72ce8529aa78bad3af17bfae76962cacd5d292c945f021499970c1b8019c02d061f7b380782b054880d215ff9ea212636a6f97a9b89f6a8f7cb553ac58de49dd9de135c8293a2cdd1755fa67f2501a341046bbba962c2b22a95b6e4d30f26f8d53ffa8772ccec168a6f81f98abc18b02573190da2a5c63f3399f27aada48eec528803e3e38d5ae1bd008b689d766a1855e5a579596e7fa8433f9613700bde2069ca63111b469ce7df086bae73952b0ef17a01799af22844ae83029d91c5e1aa9d3f1d7a2fd41cbbeef66a6b1ab2e6685cdaf820df511c59da0fcb0559b6c7b391f5cd1f89ee4df55adcb25ce3dc9254437a293938c541a8e73b0a457764af4407184e7b9aba05a229da47ce706bff764f2ce5d3e1504380fea45c21c212fb29393abc3203513d35ae4dbe0442371519eb45ae7a821f06af1a1a7721baa293a131daf86b84007ac03f907c61f68b31d6b3c946d3badb35497e95bd30a7f33cc1cc914cb8f1f756eb2ffc2ce6491375298926afb77eb35678b973c1a2ea695fd34b945c4cf421e4ff2ea58b99add0b337707a4738ddfc54aac2c524a323205fbc95b57fdbf21bc5a9e96bd8890f5d8392b67869392ec0b03a92cbc0531b4eb07e4bda1333fccab17e59a09c18bba1a4e6de4bf9f1d4840f1933437075965055a10826e3b2ebb2bc07c2ef6e4be60f923baba75aef94de70029144bf48e64588e1528af4f184a0d0df9482ff5965d83a2441897c2b62ac098657482e18eef681df3bd1d7bdf6340c902e8fdf44573d5a226f8e42fd5000f7fe0481080f37d7e49638b476b1b7de9505b55b11729a3909e53dfce6bdf0642a7295073f249dc6afb6f3b414e4c678e0fd2d8fb176d63195a6d8754477fcc1cbfbcec7044214e3e2950a637051e3c0ab2f297c79e42ef24406d20f3e3fe579b81909341c6f71232633884db98acc30f7631f2fa46f4e80e5c446bfefc26a0f00bb0ee13382c37926644d355487da8c27a23d18e48200a0a61ba63333227c70b716814bf0775b1526fc2d212e2a3e86fc8d5022cef6585d8f60bbd4cd2e3ea5c9cfbbc0eadd5cb4d71a11f819cf7c06f304f0218ccf85a00cf530577842bf021fd98d20234ad86c84fc5f51741eac9087cfada330d805e61556a903971f2352b3c1ec79f8542ede4f0562ccd697ec90389f40b7b65fdf99d1f44a68be877d10bb9978aa0a7df22ab33f0e29dab2911da76835fd543a2801dd1947038b505d53a88f592e23d4b4f45fc8e505d8b681efde02dc57d61ec3ee977b74fcfcabf88086342a10ba44d493a501954636ccdb98200ab52848a46b4c426dc53b05c982bce1a8752b373a55899c11422e2cd4d97851bb429dd36d65a37d3d1b1f6155a3781190b0dc454f749cd98d8b9a7269741f17969ea06bc8d1966010356c817e70c837dea22f2f31945ecec390c6394b9fc1493d3087c25022f0b5c6a4cccf8304871cd4df279fc9e66e0e546b120ee9078282afbd9665e6652ca04f961138195e01b4d9ad0370fa6318e383dfd16802e2f54cfb72174c2b0846d72c24ee5fd2c5b02142002fa63b4e7d42c724dc9124d9ebc002a558cb89802bde8f0c408486f4232163a7ee0ac2f17786546d25f8d988885a4e807a0a6da4bc95b5e3965e6a3909982586702332c6e9dd30c3460dc62413bf8c83015dcbe92e4997883477652fec0dd5122a5e17db94955d2c1ca2df7ee056c386e881eeaf2db7269b526123c08e64b7d8831d68f46484e9930f19daa911e6d84ab47499f1bd7f36ef5254b376863d8f7d195d02038725c6646fa817249896d42477f2cf9069fa7da3d8785eaba3e1b21a68a6cf93f206f326e2f8b47d0a6897c22c70d8671d1f337370cc8c7b8de7954c29dbd6aa84a3de5c4fea7f15d631956ab3235c94b733765441154da88c23b6b5a9f04157a275a73a48e31db9cadaf81563a2f952be81888ee66d8717c4a724167b79f3c105dfe517e1bbc9a0a5f0c15caf42df9cfb99183c4b88cb34d1f81fbc721027d97a41b423d2d9f9af8c183d31f3f9d604780b6df49e48b7d1ffb586dbef176ab000706c6c68bdbe3784bfe0d222c3344a248fa2525b1718081e884e67530b7d9fa640ded603e754464d413772c7f99a2db145676c2f6ea21b0ba177edcaeb3645bc92de4693c2be4cc6b7d9dec57d71002ef1666da37b4d473b731ba98d7d357d79703a0b71f339d7702b5bb21b446ed515efe597523acf0f7483ad7259acd0ab5c10b11942bf5d5e641ee668f9797f8ae8f6af31efc1c683cf4bd22f6ed30544f30c223414b26f2209fc4f7f1aea5d09aeb598e05e5964fade8358a6abbff89c37188d3822f13ec9f600b1e10db0ce36737c4cccf7a9ec0bb20fcfd1a88bcfc0c144ee75404cd6123e016fb0d5feb410598cd39b22b1fcb5d258ca03109dbd1b5ed90efa2456ee06cf7708d7c108f40893f558e4f8e66df5c2877e623862dc262b97a71bf27989e4f41f9166fec68e97829095487bf1e02d075cc211c5322173a9e404083efc611271655a87bad2f7692029cf6c94b1ff85171d4b7d61f56b03a704711db36211188211917324ee905cee7591c704bcb4d84c05faf245a3385ef489255afb162416da608a5c20d5addab075d959b0140653e122ae7f315196114e76cc6b1095cef359501728c12e9bd88a25e90993da72c135934815a34c3d943eea153930a3deea7a76490e3c6805b0993aed6bbee153bdb286653f2dd8efdb297296d7fb30f83ffc1ca1a8f58835301abceb15c081be1ede10d9fb1d23261e4bf2513e3cedb2d1b929a465c8804c951e37ec159a9eae861bf4b3917796a3d5376d700108b581377bd9e6b5</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"clickhouse集群版实录\"><a href=\"#clickhouse集群版实录\" class=\"headerlink\" title=\"clickhouse集群版实录\"></a>clickhouse集群版实录</h1><p>因为一些原因之前的clickhouse环境缺失，这里要恢复一下clickhouse。目前三个节点已有clickhosue的环境，这里主要是恢复一下集群版，之前应该是搭建过一次集群版，但目前无法找到相关详细记录，所以这次要详尽记录一下操作流程</p>\n<h2 id=\"操作实录\"><a href=\"#操作实录\" class=\"headerlink\" title=\"操作实录\"></a>操作实录</h2><ol>\n<li>修改config文件，打开listen_host的注释</li>\n</ol>\n<p>vim /etc/clickhouse-server/config.xml</p>\n<p><img src=\"http://img.wqkenqing.ren/2021-07-12-10-50-47.png\" alt=\"2021-07-12-10-50-47\"></p>\n<ol start=\"2\">\n<li><p>创建/etc/metrika.xml<br>并添加相应的配置内容</p>\n</li>\n<li><p>替换config.xml中data path 的路径</p>\n</li>\n</ol>\n<p>%s!/var/lib/clickhouse/!/data/colony/clickhouse/!g</p>\n<p>4 重启clickhosue-server<br>service clickhouse-server restart<br>5. 设置账号密码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;users&gt;</span><br><span class=\"line\">    &lt;yanggu&gt;                      &lt;!--用户登录名--&gt;</span><br><span class=\"line\">        &lt;password&gt;yg123456&lt;&#x2F;password&gt;    &lt;!--用户登录密码--&gt;</span><br><span class=\"line\">        &lt;networks&gt;</span><br><span class=\"line\">           &lt;ip&gt;::&#x2F;0&lt;&#x2F;ip&gt;</span><br><span class=\"line\">        &lt;&#x2F;networks&gt;   &lt;!--允许登录的网络地址--&gt;</span><br><span class=\"line\">        &lt;profile&gt;default&lt;&#x2F;profile&gt;  &lt;!--用户使用的profile配置--&gt;</span><br><span class=\"line\">        &lt;quota&gt;default&lt;&#x2F;quota&gt;      &lt;!--用户能够使用的资源限额&#x2F;熔断机制--&gt;</span><br><span class=\"line\">    &lt;&#x2F;yanggu&gt;</span><br><span class=\"line\">&lt;users&gt;</span><br></pre></td></tr></table></figure>","encrypt":true},{"title":"组件管理","date":"2021-05-14T05:50:03.945Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n # 组件管理 \n\n> 该服务主要用于管理数据中心的组件,如kafka,es等,主要的目的是通过该服务进行topic ,index等的管理\n\n## kafka管理\n\n1. 添加topic,并记录相关信息\n\n\n","source":"_posts/王阁/工作/旸谷数据中心/基础/数据中心组件管理服务封装.md","raw":"title:  组件管理 \ndate:  2021年 5月14日\ntags: [kafka,es]\npassword: 7FKBKZrTTTPG2LnC \n\n---\n <!--more-->\n # 组件管理 \n\n> 该服务主要用于管理数据中心的组件,如kafka,es等,主要的目的是通过该服务进行topic ,index等的管理\n\n## kafka管理\n\n1. 添加topic,并记录相关信息\n\n\n","slug":"王阁/工作/旸谷数据中心/基础/数据中心组件管理服务封装","published":1,"updated":"2021-07-12T02:28:56.994Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqses0023u6pweiex8ean","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"a016913b595516d9bcbe58cc18f9d7f5bb0e157c7cf7464d16f6f32883179c5a\">f29c680708acd02cbb1b6cceaba0619296d3fa78f2e16f88118d9eba949419ac137aed805b0cb037c7a62de37b1082aeaa818ad36ce47a5286d0741863c8f6f167fd9c154328a597c70d125d49be448f51def2aa1c9f37a8f8272a0fa25e2c75059bc5347e3f782ebdd63e4322bd901b7b52bb895f9dae9ad62706eb7b416416f432f9323e6d50782f46c7c61514a609c3613c09dbe875dc1d0078da1598f384a6646aafa0966bed0d74a87c6e239736f65cf5e9f35cf17b3cfd07cd5fbdbbf9afc68ab0fbf4158b06dd09c07f67826dd9a9a9b645de4f6963dec69a516c9667ed55fcb06ef1faafd6be99408f31e108de527559c2c697c06894881ea1a3d47173e4ecea339b831bfcca1b71fcdc24928183d18cba5bf557cad54f2ac9e467e661a4cc4956d79a23989555252023d5663ee547008b439eb593b8b2231c40567b71aeda27fc71e7b08671339be9f10915d75494fd7335953961d14ebe0557d8c0255239bb622eaed99ed8e0772a25ffea05fcc84b5fb89cea3386affd4d641091ebf6f48632eea16e5ceb633d450a92d64632c5a64201c15627d25ad1318a7830b3e40e467c542eb1e13f74dc4aedfdfa5fa3dd159759d7136197b0524511481f</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n<h1 id=\"组件管理\"><a href=\"#组件管理\" class=\"headerlink\" title=\"组件管理\"></a>组件管理</h1><blockquote>\n<p>该服务主要用于管理数据中心的组件,如kafka,es等,主要的目的是通过该服务进行topic ,index等的管理</p>\n</blockquote>\n<h2 id=\"kafka管理\"><a href=\"#kafka管理\" class=\"headerlink\" title=\"kafka管理\"></a>kafka管理</h2><ol>\n<li>添加topic,并记录相关信息</li>\n</ol>\n","encrypt":true},{"title":"数据安全的构建方案","date":"2021-12-01T01:54:54.908Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->","source":"_posts/王阁/工作/旸谷数据中心/数据基础平台/数据安全的构建方案.md","raw":"title:  数据安全的构建方案\ndate:  2021年12月 1日\ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->","slug":"王阁/工作/旸谷数据中心/数据基础平台/数据安全的构建方案","published":1,"updated":"2021-12-01T03:49:06.641Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqses0024u6pwb40gain7","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"2b3577516f3e20553709db79f06399904180d573741a658aebcda1c1ddd05eee\">f29c680708acd02cbb1b6cceaba06192d34048633918d15832047c414baf92a4</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>","encrypt":true},{"title":"dataworks使用","date":"2021-11-29T09:12:01.311Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n\n ## dataworks使用\n\n结合dataworks的深度使用，对数据基础平台的功能进行沉淀\n\n### 数据集成\n\n#### 多种数据源\n1. 关系型数据库\n2. 大型数据存储\n3. 非结构化存储\n4. NoSql数据库等\n\n#### \b\b网络环境\n略\n\n#### 可视化配置与监控\n1. 向导模式\n2. shell + job\n\n#### 支持多种同步方式\n \n 1. 实时或批量\n 2. 全量或增量\n 3. 同步的资源配置\n\n\n","source":"_posts/王阁/工作/旸谷数据中心/数据基础平台/dataworks.md","raw":"title:  dataworks使用\ndate:  2021年 11月 29日\ntags: [dataworks]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n\n ## dataworks使用\n\n结合dataworks的深度使用，对数据基础平台的功能进行沉淀\n\n### 数据集成\n\n#### 多种数据源\n1. 关系型数据库\n2. 大型数据存储\n3. 非结构化存储\n4. NoSql数据库等\n\n#### \b\b网络环境\n略\n\n#### 可视化配置与监控\n1. 向导模式\n2. shell + job\n\n#### 支持多种同步方式\n \n 1. 实时或批量\n 2. 全量或增量\n 3. 同步的资源配置\n\n\n","slug":"王阁/工作/旸谷数据中心/数据基础平台/dataworks","published":1,"updated":"2021-11-30T06:00:14.103Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqset0026u6pw8nnyg80t","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"c15f7f9390328ea45c614d40cdb965ac3e4d16693b7d9a9fa61d43b994535d3c\">f29c680708acd02cbb1b6cceaba061928da978bf03b056566610d96d27323076c7a401c09cebbff008109eed422df791cee8efa61813d2a04ee759be870b2cd9a402881be2cd7ad361a09062e6422fff7e5c2e55e5e247e4306139366c2e1a7c5a75446d87bf03c0d0086d407e47acb895a95a0bd9f524be0baa03625a97ac581853cbdb046d7fed8cb2a051d1167324235cecc3abe0dd35de2822ff81a8d66a134ef1ca7fdd48068c40529dce327cfc96ab011f78ba32afba870e1694e49e8adcce2b6caea7f217f57c54e99f767cbfff0ab56097cb158b953ebc8a78b9d02be632d75287868d4e665944cbe77aa9a191efed9fecbad11b5bdb55e302f6762be385b2f77ff81df599782afe64141db0b337e74c5c507fa923dd2b04e8ef0c7d045dbbab6112918c457973a35828f08f61bbcd6dffc3e7105c218aa6cab2bdd7143068f22319baeb373af1e65b5be0297f4ad9713889a55acbe53a3f69c6e48a7586a8f655fafc6f86b93fb266f2541d5bb482d392a58d4cb4f107cc4b36c59274e8f43047b574b76bb36a906d16e04f1a84b1ea7a3d58cbbdab2a6c8e16e21ae2611d26336601e1375186d7db6caccd0ff122625953baaff5f254f3f75a517d55df0f29b3f92a80cd9f4b4b99348b5b69a47b936d740126ac71174e49a627b4e505b7f654cf85e3437c9da423016a837735eead5f191fc5e3dfd2a34266f4a83d2809aa7697081ba5e3296eb5bcc0091f95dd94c0ed884121327c29199961384c33041744febbb075d03587d04835a3c76c37ae830f3babf6da04f770dd6ea7cadff33bfd60bdafe9d6af359398af90c8096e9020232fdf3ffeafb311ad283ebdd4d898d86271e898af1ca63900946344b162988e040f9ebe9b4586f7934f6e21da6cda95a38e0a7afb6e1d28eabf49f3ec67b1be0ffa069c5c0b96d91d8ae645f183097141aed92e133dba5818c5136a0e53628a13007b3e87ca871e73c6678d490af178397ea24577b0cfbc02010b26e571040b4f7f4bcf7e7559f2f9f4fb3c1819eaa637d61a5f3e190dffbca628a5a6a58246e1269ac078740c19d0906564d49bfc18dbd848d48b94653d082385440692b224797178240de3fd3181ffc1ac57f52fa8be0f29c46399c4562fe7632b1ac1a07d653d2dce3602a34ef0571456348aabd1d7ad8a3e13a8e5f41a93d9b6243e49cb18a1afb7970964caebe5ec76cdef9be14cdbd4e158a32699fc25df1835756be6d95f34e41a8da47ede076487421b8609855079b6988784b1ea38a6d5c9ffc3d9d941ec40ce656575e9c1e09bbbd368c385649e92c3f9337d138db11c3a56e04c94d93aea2214362cfc889fd6984ce4ab6172b9b64b8597bf0ac322e4e2036d69b45919e2798ac0ab788d73f26ba9c1ee24f8e6e5d22379542c23cb239f8314f56f292578881a5e0479cbca693030a6c187c9043c29ade12aed7f39389c1c293c665a2312cd79480b395f83b359a766cf0f4ad82784be1ec2e1f81f3d4ac750d4bfd3d90e3a95d904cb9a5ff93b5c95a7651cb768fea5abc77504df0071eecd196945165a35712f2df0d43d6c94937a7a707821dd89793a5d78919a9a774cc75898f4cd470c32a4a66742e5</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h2 id=\"dataworks使用\"><a href=\"#dataworks使用\" class=\"headerlink\" title=\"dataworks使用\"></a>dataworks使用</h2><p>结合dataworks的深度使用，对数据基础平台的功能进行沉淀</p>\n<h3 id=\"数据集成\"><a href=\"#数据集成\" class=\"headerlink\" title=\"数据集成\"></a>数据集成</h3><h4 id=\"多种数据源\"><a href=\"#多种数据源\" class=\"headerlink\" title=\"多种数据源\"></a>多种数据源</h4><ol>\n<li>关系型数据库</li>\n<li>大型数据存储</li>\n<li>非结构化存储</li>\n<li>NoSql数据库等</li>\n</ol>\n<h4 id=\"网络环境\"><a href=\"#网络环境\" class=\"headerlink\" title=\"\b\b网络环境\"></a>\b\b网络环境</h4><p>略</p>\n<h4 id=\"可视化配置与监控\"><a href=\"#可视化配置与监控\" class=\"headerlink\" title=\"可视化配置与监控\"></a>可视化配置与监控</h4><ol>\n<li>向导模式</li>\n<li>shell + job</li>\n</ol>\n<h4 id=\"支持多种同步方式\"><a href=\"#支持多种同步方式\" class=\"headerlink\" title=\"支持多种同步方式\"></a>支持多种同步方式</h4><ol>\n<li>实时或批量</li>\n<li>全量或增量</li>\n<li>同步的资源配置</li>\n</ol>\n","encrypt":true},{"title":"数据运维的构建方案","date":"2021-12-01T01:55:09.213Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->","source":"_posts/王阁/工作/旸谷数据中心/数据基础平台/数据运维的构建方案.md","raw":"title:  数据运维的构建方案\ndate:  2021年12月 1日\ntags: [数据运维]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->","slug":"王阁/工作/旸谷数据中心/数据基础平台/数据运维的构建方案","published":1,"updated":"2021-12-01T02:45:05.023Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqset0028u6pwbx3qas7g","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"2b3577516f3e20553709db79f06399904180d573741a658aebcda1c1ddd05eee\">f29c680708acd02cbb1b6cceaba06192d34048633918d15832047c414baf92a4</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>","encrypt":true},{"title":"数据集成构建方案","date":"2021-11-29T10:01:35.762Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n \n # 数据集成构建方案\n\n ## 数据采集\n\n ### 实现目标\n 1. 支持一定程度的向导模式式的配置化生成\n 2. 自定义式的集成\n 3. 支持多种形式的采集能力\n\n### 向导式的配置采集\n\n#### 关系型数据库\n1. mysql\n#### 大数据组件\n1. hbase\n2. hive\n#### 常见的采集类型\n1. tcp\n2. udp\n3. http\n4. https\n#### 集成常见的文档型存储组件\n1. elasticsearch\n\n#### 自定义式的集成\n\n\n#### 多种形式的采集能力\n 1. 支持实时或批量的采集\n 2. 全量或增量\n\n\n## 数据存储\n\n将采集进来的数据能过配置暂存或的持续储起来\n### 相关组件有\n1. hdfs\n2. hive\n3. hbase\n4. kafka\n5. elasticsearch\n6. clickhouse\n\n## 元数据采集hook\n在数据采集阶段，还要完成对数据据各流转阶段的元数据勾子埋点从而采集元数据\n\n","source":"_posts/王阁/工作/旸谷数据中心/数据基础平台/数据集成的构建方案.md","raw":"title:  数据集成构建方案\ndate:  2021年 11月 29日\ntags: [数据集成、数据采集、数据存储]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n \n # 数据集成构建方案\n\n ## 数据采集\n\n ### 实现目标\n 1. 支持一定程度的向导模式式的配置化生成\n 2. 自定义式的集成\n 3. 支持多种形式的采集能力\n\n### 向导式的配置采集\n\n#### 关系型数据库\n1. mysql\n#### 大数据组件\n1. hbase\n2. hive\n#### 常见的采集类型\n1. tcp\n2. udp\n3. http\n4. https\n#### 集成常见的文档型存储组件\n1. elasticsearch\n\n#### 自定义式的集成\n\n\n#### 多种形式的采集能力\n 1. 支持实时或批量的采集\n 2. 全量或增量\n\n\n## 数据存储\n\n将采集进来的数据能过配置暂存或的持续储起来\n### 相关组件有\n1. hdfs\n2. hive\n3. hbase\n4. kafka\n5. elasticsearch\n6. clickhouse\n\n## 元数据采集hook\n在数据采集阶段，还要完成对数据据各流转阶段的元数据勾子埋点从而采集元数据\n\n","slug":"王阁/工作/旸谷数据中心/数据基础平台/数据集成的构建方案","published":1,"updated":"2021-12-01T02:28:03.972Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqseu002au6pw63snfyo4","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"6a09d16e42a3a0ba78c7c5b525a0f0e663c08ce99c321cd84c88aad653ac1612\">f29c680708acd02cbb1b6cceaba061921c50cd678844d380083157fca95bec929d16021d9c479e254445d45737e5755022d553c251c0578408d0cc81d0a7b2fbad0d355727c3e36cd4bd2a9ef9e720477184ade484a04f9fe03ba0960375cc4363a34c441293a9f09628deb40a84180bea514f13e24e31187add45620993896828b444f7b6b35d3dfedfdfacf650c20ee66b3f6647d14104915e84c5cb6dcb528bfcbe6a9d3c895648c8a01b83fa86cab964bf3f2176b10a715dffa93a2e6b81cbf6ec7403a638b3c11c040876fb98e9a913612fe27ed6dbf92048bb4bd432d407002c6229799b2802c9c0bb469f1f7020ef5616b9e7e5ef73211a1ca3266aef001808854882ff328f431330953d5ca7bbdd49e41224e5f2f3212066b377a57e55c3f9d1e674eb3b257605ffdabf5f14c41c41cc8b61141e56f2dba10caa8a3101a34fcaf90402d4bc014f151ae18d7429c1253f93f128a7db18e0c6941438399a75e0f29c748df451ce95680f296b99269eac1c6d73305bdfb20222c8b98d5b012b4840ee82b3d0995392e326bf3e32ca664df4fc0e1e22cf881cb3da7c4e4b9bad98c0aa0f51f2ce398a7ce6e1586feaaa64b9a7db77b53aee3e80008cc23f1755c7c147d3dec06af78d062ce5735b41b0dce34b7c7efe36f33c890409b8fa5fdead516a15cd1227187ef936ba104189ec8965f61d82422bec9ad4b71d57ada9c75664143ab755864b91c7377d07ffdfa0d104a6290dfbc043a99a874d75c99f87a9f878042328b8243919f83fedaa31147e9d1092bb8a5d16b5d069284be72c487efd8fca280b5585019e1b1d3dd3dfd1c364cce8a37e382679aabf451b5a6e55887ca2316ff9ffa0adbedaffc5bb07427b647cc78c2b164e5719cacdf4fddd40c2b43d04410cda9eca486efb514ac9c9189c61c8989bf19e53bc9734c9aa0bc00a22228834ed34f62e7a51b1ab20b764cd2e6fb9ff1d0a5db2d68e4f1de6de8b1ab6a1207f2911aa7c22b6a11cea500a0efcebcdadddd32954d6fe9d56123c63ae71695b69ce5d2167c0abbf1572b9dc9df67ff6cd171c9210eacc704b1d1a3ccc403879c4b31beb9e852f455665b075381aad25511e4dfdf3840a3a6740300d3fe2893e9c44bdc252fa7403c6104c20b116f74a39f889f7e2e8d62894c29a034781b9311ffe8c72608c770776bf049efefef4c105449cd343beb5e219f5858b8df41557f71837e885e26d0be136553bcb5536f34faf5e382a7877ca82fb183b32c4be9d00bc3768382dbf173cf3f5ea4693f50ca02780b0fe64300949204068b64780004246d2cdc6ebe5e556661d7702ea8bd8adf0644bdac4f1bcdd4d1de01e6b03eef7ac3d9f790d1a556f62b9d49cddef42c2eaa8aeac5650be03751eec432eca499cf9a88a301d01d25148acff592f75d43a4d3b2c9ebd010dddc45e80bf2e7fcb40811c7f2aceabefc7723b864ff88c7c990169d1c9143509b80143a74de7932fcfded02c6229aef06712b55bd31f131d6ff587085fc47133e8a1884dc222dc25ad804cac692840893d861405b25ccd4ec87fc74fe98ffa35ff125cbbe216f15968938806061722d109c17f98b011a31a8e711e1d86812d02c5d534a65ed7289b2f607382cf1bdea898603e81e4448e92e172696b0248c66ec5a28ac9a913cf24fc42472e3b1e6c588578d34b2655fbc8fb481ed4e237f364f419d4fe04a301b4dbb56d45b92e0e71dff095fe6141e9d7ba9a466dc29343fc3e9bfa43a0cd4635a886a5bf92443af9f621abacc15ec1858da8a5dbeea8a1ac99714bb34c3e1f34015706276fb99ead16a252739dc06891dc8c8ec5dec0551b9af6331433afdc736586252d51a14a54114044c0ddab3d4165681a2d730d7d8862b07a7b5ee7e9dd7235a440419d9680d8db5ffb9ca20deab2c6976548d3861e7d2f14d8c1fcaef2a6f1cdf708ea7a2be0b4f81c8c4cc6d0c0e17f32d28eda38af8448c8e346da279caf7f0c089d62df3183aba2c0c6c2f92acd84d4cb2f2f7b45377fd26a81b4e0410740e2f1f5b62535ab5df3771ede8b656f81e2271c3dd93196ef69f8301b69971d33e27d19b04a33e8b5225978f3e5e04ca9b93cba2d34d3e426ac59d6767e6eb529600580e8e684b4f7b269f25feff2ac608fe2227d73eea737a7adc694ee03f97a8d548e0df4da044f759a15f9b463bbefa813c28624bb69172450195532ea354684ee67c073dfd268dbd459023200a78b2b42ccc2d26971932c42b43c6938cf564463adc5500bf130e6e1822aa6453b51b66c0130922af066f0b4c85a96cc29b493d60ba63d4df0ac3b80affb201d5e29dd15f08d5b19d69a71dd01a4a226c80c943a44f4c9011821bbd91489cb0a17b6749f0a49db473d3ea8740f7c263ef9db2418513a06aba927d20babf4f35dce6b06b3d315a145a55c27b456e207381119eb1cabf4235d2c703f8c6e9bda109a39c51724d557f0dbbfc5dfaf5bf6971c9de448cee164663bc6e1b429c2c8744258d1ae2ee68ac1c608ca1e0cc37b8565c681cad7c758659138b04b559e417b5cf67d4d201446231a7a5a47cb64393ded1d2e12359de3dab6e509ed486cd5f7b0967f2243a475ada289d2807d6a8ef92a2999be828556e7982fca083630ebe9af177c8135a8e27066f2f0af18b468542daa7f5bd15013e2713addcdc6d659c7e2e074d6a3822aa1aa375b178ebea01ece459cdbbc4af4d1b103645390a552390cde7824853d6d965f3ff63e3f0c52d52b6d2942e35801490828bfd91a0c4c97e7968d0277ba3ad18bab70b7ff6e7d1983a99fbcffeb2b434c41ff0778aef1a60bf9a806a25112b7832bb07e9846000f63c163134bb506650ffdd160e2d311b07b137de56e2d20f2394ba9662f859044d13145821586dce1d2f59ed427178461548d0da44f34b45eb5b4baab3c56f01e9bd5c8f5ed5531d79cd5636ef97ad21cbf32a57804ae7341e23f01621737cca3ff01359391edd319aa901f6f3e580ecd0905c11912799c2f472480a672e1896002be27fd29cb89048e073ff7e61fb6c213f8c46d8b007930dc7bd30b137b8183b9da70532d1fc5dfb4c5b2b3bda1569d399816320de72f0344bff1cc857949a01167c81e77898e996564eb1254a385d73ae9b70760d583a50929a785942d03b27e69d80e2fd08479b4635b75d9f47acbc7f01789746a70dcface050368e72d99167790dabaef8b46aa27f9f398bde0ae83bd595de27f4a75ddca05b0b0de744ce72f7ba030f78185c5c0445a6d360e4a640458e49994d3672150a06e822c7dd6858a2904f6141b8f9615bd848a18ba47e7dda27245d6e96cd164ad62c6aa9590db473ac522d72be706ebfd37e0c918e447435cc2b10b655d72a07fbd4bc17a05d1fadf107c8292d918da90b0ad1335e6774ac08f6ee50701fe2b774a0fdfb97dac1225a232be5382b5b92a76c358bff43fcc0e6b5bde4a94403e9b4c70a010ec4108501bad0ec7efd6</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"数据集成构建方案\"><a href=\"#数据集成构建方案\" class=\"headerlink\" title=\"数据集成构建方案\"></a>数据集成构建方案</h1><h2 id=\"数据采集\"><a href=\"#数据采集\" class=\"headerlink\" title=\"数据采集\"></a>数据采集</h2><h3 id=\"实现目标\"><a href=\"#实现目标\" class=\"headerlink\" title=\"实现目标\"></a>实现目标</h3><ol>\n<li>支持一定程度的向导模式式的配置化生成</li>\n<li>自定义式的集成</li>\n<li>支持多种形式的采集能力</li>\n</ol>\n<h3 id=\"向导式的配置采集\"><a href=\"#向导式的配置采集\" class=\"headerlink\" title=\"向导式的配置采集\"></a>向导式的配置采集</h3><h4 id=\"关系型数据库\"><a href=\"#关系型数据库\" class=\"headerlink\" title=\"关系型数据库\"></a>关系型数据库</h4><ol>\n<li>mysql<h4 id=\"大数据组件\"><a href=\"#大数据组件\" class=\"headerlink\" title=\"大数据组件\"></a>大数据组件</h4></li>\n<li>hbase</li>\n<li>hive<h4 id=\"常见的采集类型\"><a href=\"#常见的采集类型\" class=\"headerlink\" title=\"常见的采集类型\"></a>常见的采集类型</h4></li>\n<li>tcp</li>\n<li>udp</li>\n<li>http</li>\n<li>https<h4 id=\"集成常见的文档型存储组件\"><a href=\"#集成常见的文档型存储组件\" class=\"headerlink\" title=\"集成常见的文档型存储组件\"></a>集成常见的文档型存储组件</h4></li>\n<li>elasticsearch</li>\n</ol>\n<h4 id=\"自定义式的集成\"><a href=\"#自定义式的集成\" class=\"headerlink\" title=\"自定义式的集成\"></a>自定义式的集成</h4><h4 id=\"多种形式的采集能力\"><a href=\"#多种形式的采集能力\" class=\"headerlink\" title=\"多种形式的采集能力\"></a>多种形式的采集能力</h4><ol>\n<li>支持实时或批量的采集</li>\n<li>全量或增量</li>\n</ol>\n<h2 id=\"数据存储\"><a href=\"#数据存储\" class=\"headerlink\" title=\"数据存储\"></a>数据存储</h2><p>将采集进来的数据能过配置暂存或的持续储起来</p>\n<h3 id=\"相关组件有\"><a href=\"#相关组件有\" class=\"headerlink\" title=\"相关组件有\"></a>相关组件有</h3><ol>\n<li>hdfs</li>\n<li>hive</li>\n<li>hbase</li>\n<li>kafka</li>\n<li>elasticsearch</li>\n<li>clickhouse</li>\n</ol>\n<h2 id=\"元数据采集hook\"><a href=\"#元数据采集hook\" class=\"headerlink\" title=\"元数据采集hook\"></a>元数据采集hook</h2><p>在数据采集阶段，还要完成对数据据各流转阶段的元数据勾子埋点从而采集元数据</p>\n","encrypt":true},{"title":"数据应用的构建方案","date":"2021-12-01T01:54:40.921Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n# 数据应用的构建方案\n\n> 数据仓库、olap、BI、可视化、机器学习\n\n\n\n## 基于kappa模型构建数据仓库\n\n\n\n## olap\n\n\n\n## BI\n\n\n\n## 可视化\n\n\n\n\n","source":"_posts/王阁/工作/旸谷数据中心/数据基础平台/数据应用的构建方案.md","raw":"title:  数据应用的构建方案\ndate:  2021年12月 1日\ntags: [数据应用]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n# 数据应用的构建方案\n\n> 数据仓库、olap、BI、可视化、机器学习\n\n\n\n## 基于kappa模型构建数据仓库\n\n\n\n## olap\n\n\n\n## BI\n\n\n\n## 可视化\n\n\n\n\n","slug":"王阁/工作/旸谷数据中心/数据基础平台/数据应用的构建方案","published":1,"updated":"2021-12-01T09:15:35.689Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqseu002du6pwhbb1dsk2","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"2bdd0aa082dbba9aa20a32f23cff550fb7d97ca3d2cd002adfefff16b70b2cef\">f29c680708acd02cbb1b6cceaba061921c50cd678844d380083157fca95bec92d3f57e40e4d066bf895f15ad79a72c3dae4b7d1d94ecabec017c56f4995360a3d408c549508676a26d96896b50d4c00e7b95e9ba84c086cc9de2f17f2db1e6490c404c489ab34861149325d659d914bd5e313866e88ae4baca8ffd534a41a2dffa85988c3b77d5f01e1544efb75ab293910027e514ed2f730ba1c08d2c51c680b12ccc1f478656e119252497cda7e3346802c7633ab0289061601a8993d8bf76e87864cd509a8951665a951ba82956ce7def9b2aeea831607fae592c00c2a81118146a4bf2023e1dca446128bbbeb6aa2fc20c560f6d3b84b2cb27dcad26143da3bbe09b0072d5b58cf1af7674c05160bd7dda2fd699fa7d1f89faba0cbc5151f4f295ea4f02fd2232b533c3063db969df2b99133244e74678822af5c78b1d4cc9c9fff4e87de3eccf06dd95a05690cd7a5e48f3cdabe36883d0d7f830b83de4ef7da8094ee177d413dc8f55f4b56758b2ea8c7f005ed8e85899159a67347f1b3b5f6869db73182b1245a7a73e238bed46a6666d6b3dbcbdbcb388dfc47db426e5545720f49dc2c837cb532f6745525ac86d33ac3f26101a9085131628ac7053b5736cd92d3a97b135d74f931c0d57ecdc1e934f1eb6b7e28c6518f62560e941bd93ac1599fcf909beac658b784a1571bb638a7800be32633a7cd13d2dcf37dab6584f203fbcd9460b752d2b25185f14015ff387aef58184054eb78f818d8f6f566a84a9af95da82fa8a8dcae9e7c7cbaacf0f4915b34694e135c2eef7160930092c229e84978177317ec4f2890e0724743f435d8dfc9fd5364e72166d606139e0894cb5018ea4ad9f7eba5853a5b0cf7f3d487a5b2b983cba4706e2c5eb0aecfbb8fb32f723960818f59fad9ff5f30aa3ae8aeb5569d47482190b88869802a152dc05fec6cee63ecac03e1eac618b5dd36b7888b9b4d520a0e7a2343fcb94eb043b67648fc0cc01ceb17e1db6279820</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"数据应用的构建方案\"><a href=\"#数据应用的构建方案\" class=\"headerlink\" title=\"数据应用的构建方案\"></a>数据应用的构建方案</h1><blockquote>\n<p>数据仓库、olap、BI、可视化、机器学习</p>\n</blockquote>\n<h2 id=\"基于kappa模型构建数据仓库\"><a href=\"#基于kappa模型构建数据仓库\" class=\"headerlink\" title=\"基于kappa模型构建数据仓库\"></a>基于kappa模型构建数据仓库</h2><h2 id=\"olap\"><a href=\"#olap\" class=\"headerlink\" title=\"olap\"></a>olap</h2><h2 id=\"BI\"><a href=\"#BI\" class=\"headerlink\" title=\"BI\"></a>BI</h2><h2 id=\"可视化\"><a href=\"#可视化\" class=\"headerlink\" title=\"可视化\"></a>可视化</h2>","encrypt":true},{"title":"数据治理的构建方案","date":"2021-12-01T01:54:07.348Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n# 数据治理的构建方案\n\n> 数据质量、任务编排、调度管理、算力管理、资源管理\n\n## 数据质量规则管理\n\n进行质量规则，提供数据质量管理约束，从而进行管理。\n\n\n## 任务编排\n\n## 调度管理\n\n## 资源的管理\n","source":"_posts/王阁/工作/旸谷数据中心/数据基础平台/数据治理的构建方案.md","raw":"title:  数据治理的构建方案\ndate:  2021年12月 1日\ntags: [数据治理]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n# 数据治理的构建方案\n\n> 数据质量、任务编排、调度管理、算力管理、资源管理\n\n## 数据质量规则管理\n\n进行质量规则，提供数据质量管理约束，从而进行管理。\n\n\n## 任务编排\n\n## 调度管理\n\n## 资源的管理\n","slug":"王阁/工作/旸谷数据中心/数据基础平台/数据治理的构建方案","published":1,"updated":"2021-12-01T09:15:15.270Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqseu002fu6pw1qon3a2h","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"6e47f4864097a23877c4253307dec11f9d25cbf5bfc7c555e390a442a9c79009\">f29c680708acd02cbb1b6cceaba061921c50cd678844d380083157fca95bec92c865c218c7fddae964cd223e71c0ac8c9983eb04611b9932b9fb4fe8fcbaa188201deb44e26ff7630c4e778e21b2650bb96c6c44348720cc9d4f3e6b7fd538c36891151922a6e33af668e45ab8c81c6f41b885c66946a7e2af6389a5083d6212608fd7af0bc312763b4f0dfb8c79bd15472fcce9943ff140689cdefcc1041dc8c3a52410df48db5ba41b2423a35679b9482b33419429ab49429f731b1d3ba2fc54571a106435905ec3a30500804f3bb5ab92bc5ccde469a0aa81aa879001a46e2d311b160d9ff98e8d1ce5d1997875fdc6029e09b4815c6566b357f79f080599cf6cbc810440b344d256f08ff56926fc57df6f092d53d08119b77e0561c705f3f037a5f2468fbd7cf531ca4aa6db9be7a791ce4bbf68cadf7eb7f07fbe36b9b9915a5b602a2a8d633a71b050b187258d63df3b6613ae333fe107d6db3563b0824cb1023604cb535a378ad2998fd68ab232954f21ae7658b50640b81276c426db3d389ac77f1d585872b0657b554c113e7e9a2fe451da8f7ad1508823a9776d320bba1d9e973f6eaa5d425f63e92a20ec68fb5653df82e977e3c4eeb84ddcd8a77067aec6aed173efafcb9c6e554744b6e2bb1548a68a0d1e85f2edf88cb4ff3d15d69214396fd3baf1493deaeca4ff4db6f350727b65fc2891063a90606deb04fb505c53f1e28df30e67f9290b393269fe6a27ae7783177b1d9d3e0b029012609817db9d71164739aad955cbf3cadf8a97a01e939dc7402e098e5116c1fa9b3e61aaadb19612516cf20f224f5338af65e3745696f7c809af10bbabc08280c1cf56a70f3444feae4be51c9efad6df6088784488f654c2ddf246d5a296ea47ba462bbf3e9e85ef8b7b717b6bde9a602ce6df3959fe79fc059e62c8e55761be46d7413c8a1717627edac20c8533e3292a32907eb3869e7274ad961be977d91b1d478278050d7f3574cdb35d0ccf46f4ffce4ebe0591b86dd13d33dbf3e8c777bf36057a13411373fd32f5a2feb9faa3f44f5f6cfb96740f51574e14899c939c4672ebda9a2d5a13d1afdbc187d282d6302d30dfa6b2c7a6ac6fd5b828daeacb4299057398f56f4a4bb9dd1de9ed450c4351424d3ba5ce5c2f196551df01bec33cc18f9053ca0e753b1368ab01deb62c280b52dde8eab623db226764d4cd41c232b8fcd4d894f74727679c3867c91660d69d</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"数据治理的构建方案\"><a href=\"#数据治理的构建方案\" class=\"headerlink\" title=\"数据治理的构建方案\"></a>数据治理的构建方案</h1><blockquote>\n<p>数据质量、任务编排、调度管理、算力管理、资源管理</p>\n</blockquote>\n<h2 id=\"数据质量规则管理\"><a href=\"#数据质量规则管理\" class=\"headerlink\" title=\"数据质量规则管理\"></a>数据质量规则管理</h2><p>进行质量规则，提供数据质量管理约束，从而进行管理。</p>\n<h2 id=\"任务编排\"><a href=\"#任务编排\" class=\"headerlink\" title=\"任务编排\"></a>任务编排</h2><h2 id=\"调度管理\"><a href=\"#调度管理\" class=\"headerlink\" title=\"调度管理\"></a>调度管理</h2><h2 id=\"资源的管理\"><a href=\"#资源的管理\" class=\"headerlink\" title=\"资源的管理\"></a>资源的管理</h2>","encrypt":true},{"_content":"\nQ1:元数据管理\t\t元数据管理包括元数据定义、存储、查询、维护、检查和分析应用。\t\t\n\nQ2:元数据存储\t\t元数据存储的信息管理范围：数据源接口、ETL和前端展现等全部数据处理环节，并提供对技术元数据及业务元数据存储。\t存储在meta:topics,可以通过命名得出对应源接口、ETL服务名等信息.但部份环节无法对应,即缺少完整环节记录。\t\n\nQ3:元数据查询\t\t元数据查询支持对元数据库中的元数据基本信息进行查询与检索的功能，可查询数据库表、维表、指标、过程及参与的输入输出对象信息，以及其它纳入管理的对象基本信息，查询的信息按处理的层次及业务主题进行组织，查询功能返回实体及其所属的相关信息。\n\nQ4:元数据维护\t\t对于元数据的增量维护，可以保留历史版本信息。用户使用元数据基本维护功能，可以统一管理所有系统中的元数据\t\n\nQ5:元数据检查\t\t支持对元数据数据质量的检查手段，在元数据上线时，对元数据进行稽核检查，保证元数据信息的完整性，合理性。\t\n\nQ5:元数据分析\t\t元数据管理能够通过血缘分析和影响分析，定位数据问题产生的路径，并评估出该问题对平台其他数据或应用的影响\t\n\nQ6:模型管理\t\t构建专业的模型设计器创建、修改和设计所有数据对象，例如：事实表、维表、过程、索引和触发器。无需编写复杂的 SQL 来创建、编辑和维护对象\t\nQ7:数据查阅\t\t构建视觉化数据查阅工具使运管团队高效创建和编辑数据查阅方案，而不必拘泥于语法和命令；选择想在数据中心中执行的操作，所见即所得。\n\nQ8:同步与迁移\t\t数据资源迁移主要保证字段对应、代码转换、量纲转换、数据合并、数据拆分等功能。\t\t\n\nQ9:导入导出\t\t从不同格式的文件导入数据到数据中心，例如 Access、Excel、XML、TXT、CSV、JSON 及更多。同样，可以将数据导出到各种格式，如 Excel、TXT、CSV、DBF、XML 等\t分别导入Excel、XML、TXT、CSV、JSON格式的文件数据到数据中心；导入成功。分别从数据中心导出xlxs、CSV、txt、xml格式的文件；导出成功。 没有导入Access、和导出DBF格式的文件截图证名\t\n\nQ10:计划任务\t\t设置计划并在指定的时间运行，不同数据库可以在同一批处理作业中统一调用\t进入Oozie Editor界面，点击添加计划任务；进入任务编辑界面。输入任务名称、任务内容、计划任务执行频次后，点击【保持】；计划任务添加成功。需要描述下怎么实现同数据库可以在同一批处理作业中统一调用\t\n\n\nQ11:日志管理\t\t实现日志信息查询统计与分析管理，包括：登录登出日志、访问日志、操作日志、日志统计、用户状态管理\t进入cloudera manager日志界面；界面有显示包括主机、日志级别、时间、源、消息等相关日志信息。任意选择一条日志，点击可查看日志情。\n\nQ12:运行监测\t\t提供平台系统各种注册服务的实时监控，包括该服务的状态、运行时间，同时可以对平台监控的时间间隔，是否自动启动参数设置和应用\t进入cloudera manager集群界面，界面可查看设备运行状态、运行状况、状态摘要、运行时间。\n进入cloudera manager配置界面；可实现自动启动参数设置和应用。\t\n\nQ13:调度配置\t\t在统一调度平台中以数据流作为驱动，通过控制中心统一进行调度配置、进行作业命令下发、状态收集进行控制\t\t\n\nQ14:调度运行\t\t支持基于shell脚本的调度，简化调度过程并判断任务成功与否；支持基于存储过程的调度\t目前系统使用的是hadoop、yarn工具查看调度情况。\t\n\nQ15:调度策略\t\t依据业务要求，调度策略可分为：时间调度、手工调度、消息\\API接口调度、优先级调度等。\t\n\nQ16:调度监控\t\t系统支持对所有任务按照系统、按日期对任务总体运行情况进行汇总展现，使得总体任务执行情况一目了然\t系统采用Apache Flink Dashboard进行调度监控；可对所有任务按照系统、按日期对任务总体运行情况进行汇总展现\t\n\nQ17:数据整合服务\t\t对原始数据源的关系型数据库、普通日志文件数据等进行抽取，并且对数据按照用户的配置进行数据预处理等操作，然后将数据存储到大数据管理平台中。\t数据整合服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。\t\n\nQ18:资源管理服务\t\t对各种需要用到的分布式开源框架进行整合和封装\t资源管理服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。\t\n\nQ19:数据分析服务\t\t封装各种数据挖掘算法，如聚类、协同过滤推荐、关联规则等，用户可针对不同的数据集选择不同的算法，来完成特定的业务分析任务。\t数据分析服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。\n\nQ20:数据展示服务\t\t将数据分析后的结果通过图表和报表的形式向用户展示，或者直接将结果数据以接口的方式对外提供。\t进入可视化文旅云图界面；界面有展示游客人数检测、旅游交通监测、旅游停车监测、天气环境监测、旅游消费监测、预测预警监测等数据。\n进入数据中心可视化接口服务界面，可通过接口方式将结果数据对外提供。\n\nQ21:多种场景模板\t\t提供区域板块可视化呈现能力，如地区板块、行政区板块等\t进入\t\n\nQ22:多种图表组件\t\t如饼图、线图、柱图、流量图、堆积图、K线图、计数器等\t\t\nQ23:图形化的搭建工具\t\t提供层级结构可视化呈现能力，如树形分支图、冰柱图等\t\t\n\nQ24:多分辨率适配与发布方式\t\t对大屏展示提供兼容\t\t","source":"_posts/王阁/工作/项目/洪雅/大数据验证.md","raw":"\nQ1:元数据管理\t\t元数据管理包括元数据定义、存储、查询、维护、检查和分析应用。\t\t\n\nQ2:元数据存储\t\t元数据存储的信息管理范围：数据源接口、ETL和前端展现等全部数据处理环节，并提供对技术元数据及业务元数据存储。\t存储在meta:topics,可以通过命名得出对应源接口、ETL服务名等信息.但部份环节无法对应,即缺少完整环节记录。\t\n\nQ3:元数据查询\t\t元数据查询支持对元数据库中的元数据基本信息进行查询与检索的功能，可查询数据库表、维表、指标、过程及参与的输入输出对象信息，以及其它纳入管理的对象基本信息，查询的信息按处理的层次及业务主题进行组织，查询功能返回实体及其所属的相关信息。\n\nQ4:元数据维护\t\t对于元数据的增量维护，可以保留历史版本信息。用户使用元数据基本维护功能，可以统一管理所有系统中的元数据\t\n\nQ5:元数据检查\t\t支持对元数据数据质量的检查手段，在元数据上线时，对元数据进行稽核检查，保证元数据信息的完整性，合理性。\t\n\nQ5:元数据分析\t\t元数据管理能够通过血缘分析和影响分析，定位数据问题产生的路径，并评估出该问题对平台其他数据或应用的影响\t\n\nQ6:模型管理\t\t构建专业的模型设计器创建、修改和设计所有数据对象，例如：事实表、维表、过程、索引和触发器。无需编写复杂的 SQL 来创建、编辑和维护对象\t\nQ7:数据查阅\t\t构建视觉化数据查阅工具使运管团队高效创建和编辑数据查阅方案，而不必拘泥于语法和命令；选择想在数据中心中执行的操作，所见即所得。\n\nQ8:同步与迁移\t\t数据资源迁移主要保证字段对应、代码转换、量纲转换、数据合并、数据拆分等功能。\t\t\n\nQ9:导入导出\t\t从不同格式的文件导入数据到数据中心，例如 Access、Excel、XML、TXT、CSV、JSON 及更多。同样，可以将数据导出到各种格式，如 Excel、TXT、CSV、DBF、XML 等\t分别导入Excel、XML、TXT、CSV、JSON格式的文件数据到数据中心；导入成功。分别从数据中心导出xlxs、CSV、txt、xml格式的文件；导出成功。 没有导入Access、和导出DBF格式的文件截图证名\t\n\nQ10:计划任务\t\t设置计划并在指定的时间运行，不同数据库可以在同一批处理作业中统一调用\t进入Oozie Editor界面，点击添加计划任务；进入任务编辑界面。输入任务名称、任务内容、计划任务执行频次后，点击【保持】；计划任务添加成功。需要描述下怎么实现同数据库可以在同一批处理作业中统一调用\t\n\n\nQ11:日志管理\t\t实现日志信息查询统计与分析管理，包括：登录登出日志、访问日志、操作日志、日志统计、用户状态管理\t进入cloudera manager日志界面；界面有显示包括主机、日志级别、时间、源、消息等相关日志信息。任意选择一条日志，点击可查看日志情。\n\nQ12:运行监测\t\t提供平台系统各种注册服务的实时监控，包括该服务的状态、运行时间，同时可以对平台监控的时间间隔，是否自动启动参数设置和应用\t进入cloudera manager集群界面，界面可查看设备运行状态、运行状况、状态摘要、运行时间。\n进入cloudera manager配置界面；可实现自动启动参数设置和应用。\t\n\nQ13:调度配置\t\t在统一调度平台中以数据流作为驱动，通过控制中心统一进行调度配置、进行作业命令下发、状态收集进行控制\t\t\n\nQ14:调度运行\t\t支持基于shell脚本的调度，简化调度过程并判断任务成功与否；支持基于存储过程的调度\t目前系统使用的是hadoop、yarn工具查看调度情况。\t\n\nQ15:调度策略\t\t依据业务要求，调度策略可分为：时间调度、手工调度、消息\\API接口调度、优先级调度等。\t\n\nQ16:调度监控\t\t系统支持对所有任务按照系统、按日期对任务总体运行情况进行汇总展现，使得总体任务执行情况一目了然\t系统采用Apache Flink Dashboard进行调度监控；可对所有任务按照系统、按日期对任务总体运行情况进行汇总展现\t\n\nQ17:数据整合服务\t\t对原始数据源的关系型数据库、普通日志文件数据等进行抽取，并且对数据按照用户的配置进行数据预处理等操作，然后将数据存储到大数据管理平台中。\t数据整合服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。\t\n\nQ18:资源管理服务\t\t对各种需要用到的分布式开源框架进行整合和封装\t资源管理服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。\t\n\nQ19:数据分析服务\t\t封装各种数据挖掘算法，如聚类、协同过滤推荐、关联规则等，用户可针对不同的数据集选择不同的算法，来完成特定的业务分析任务。\t数据分析服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。\n\nQ20:数据展示服务\t\t将数据分析后的结果通过图表和报表的形式向用户展示，或者直接将结果数据以接口的方式对外提供。\t进入可视化文旅云图界面；界面有展示游客人数检测、旅游交通监测、旅游停车监测、天气环境监测、旅游消费监测、预测预警监测等数据。\n进入数据中心可视化接口服务界面，可通过接口方式将结果数据对外提供。\n\nQ21:多种场景模板\t\t提供区域板块可视化呈现能力，如地区板块、行政区板块等\t进入\t\n\nQ22:多种图表组件\t\t如饼图、线图、柱图、流量图、堆积图、K线图、计数器等\t\t\nQ23:图形化的搭建工具\t\t提供层级结构可视化呈现能力，如树形分支图、冰柱图等\t\t\n\nQ24:多分辨率适配与发布方式\t\t对大屏展示提供兼容\t\t","slug":"王阁/工作/项目/洪雅/大数据验证","published":1,"date":"2021-05-08T01:46:14.135Z","updated":"2021-05-08T02:03:10.224Z","title":"王阁/工作/项目/洪雅/大数据验证","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsev002hu6pw7o7j9yli","content":"<p>Q1:元数据管理        元数据管理包括元数据定义、存储、查询、维护、检查和分析应用。        </p>\n<p>Q2:元数据存储        元数据存储的信息管理范围：数据源接口、ETL和前端展现等全部数据处理环节，并提供对技术元数据及业务元数据存储。    存储在meta:topics,可以通过命名得出对应源接口、ETL服务名等信息.但部份环节无法对应,即缺少完整环节记录。    </p>\n<p>Q3:元数据查询        元数据查询支持对元数据库中的元数据基本信息进行查询与检索的功能，可查询数据库表、维表、指标、过程及参与的输入输出对象信息，以及其它纳入管理的对象基本信息，查询的信息按处理的层次及业务主题进行组织，查询功能返回实体及其所属的相关信息。</p>\n<p>Q4:元数据维护        对于元数据的增量维护，可以保留历史版本信息。用户使用元数据基本维护功能，可以统一管理所有系统中的元数据    </p>\n<p>Q5:元数据检查        支持对元数据数据质量的检查手段，在元数据上线时，对元数据进行稽核检查，保证元数据信息的完整性，合理性。    </p>\n<p>Q5:元数据分析        元数据管理能够通过血缘分析和影响分析，定位数据问题产生的路径，并评估出该问题对平台其他数据或应用的影响    </p>\n<p>Q6:模型管理        构建专业的模型设计器创建、修改和设计所有数据对象，例如：事实表、维表、过程、索引和触发器。无需编写复杂的 SQL 来创建、编辑和维护对象<br>Q7:数据查阅        构建视觉化数据查阅工具使运管团队高效创建和编辑数据查阅方案，而不必拘泥于语法和命令；选择想在数据中心中执行的操作，所见即所得。</p>\n<p>Q8:同步与迁移        数据资源迁移主要保证字段对应、代码转换、量纲转换、数据合并、数据拆分等功能。        </p>\n<p>Q9:导入导出        从不同格式的文件导入数据到数据中心，例如 Access、Excel、XML、TXT、CSV、JSON 及更多。同样，可以将数据导出到各种格式，如 Excel、TXT、CSV、DBF、XML 等    分别导入Excel、XML、TXT、CSV、JSON格式的文件数据到数据中心；导入成功。分别从数据中心导出xlxs、CSV、txt、xml格式的文件；导出成功。 没有导入Access、和导出DBF格式的文件截图证名    </p>\n<p>Q10:计划任务        设置计划并在指定的时间运行，不同数据库可以在同一批处理作业中统一调用    进入Oozie Editor界面，点击添加计划任务；进入任务编辑界面。输入任务名称、任务内容、计划任务执行频次后，点击【保持】；计划任务添加成功。需要描述下怎么实现同数据库可以在同一批处理作业中统一调用    </p>\n<p>Q11:日志管理        实现日志信息查询统计与分析管理，包括：登录登出日志、访问日志、操作日志、日志统计、用户状态管理    进入cloudera manager日志界面；界面有显示包括主机、日志级别、时间、源、消息等相关日志信息。任意选择一条日志，点击可查看日志情。</p>\n<p>Q12:运行监测        提供平台系统各种注册服务的实时监控，包括该服务的状态、运行时间，同时可以对平台监控的时间间隔，是否自动启动参数设置和应用    进入cloudera manager集群界面，界面可查看设备运行状态、运行状况、状态摘要、运行时间。<br>进入cloudera manager配置界面；可实现自动启动参数设置和应用。    </p>\n<p>Q13:调度配置        在统一调度平台中以数据流作为驱动，通过控制中心统一进行调度配置、进行作业命令下发、状态收集进行控制        </p>\n<p>Q14:调度运行        支持基于shell脚本的调度，简化调度过程并判断任务成功与否；支持基于存储过程的调度    目前系统使用的是hadoop、yarn工具查看调度情况。    </p>\n<p>Q15:调度策略        依据业务要求，调度策略可分为：时间调度、手工调度、消息\\API接口调度、优先级调度等。    </p>\n<p>Q16:调度监控        系统支持对所有任务按照系统、按日期对任务总体运行情况进行汇总展现，使得总体任务执行情况一目了然    系统采用Apache Flink Dashboard进行调度监控；可对所有任务按照系统、按日期对任务总体运行情况进行汇总展现    </p>\n<p>Q17:数据整合服务        对原始数据源的关系型数据库、普通日志文件数据等进行抽取，并且对数据按照用户的配置进行数据预处理等操作，然后将数据存储到大数据管理平台中。    数据整合服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。    </p>\n<p>Q18:资源管理服务        对各种需要用到的分布式开源框架进行整合和封装    资源管理服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。    </p>\n<p>Q19:数据分析服务        封装各种数据挖掘算法，如聚类、协同过滤推荐、关联规则等，用户可针对不同的数据集选择不同的算法，来完成特定的业务分析任务。    数据分析服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。</p>\n<p>Q20:数据展示服务        将数据分析后的结果通过图表和报表的形式向用户展示，或者直接将结果数据以接口的方式对外提供。    进入可视化文旅云图界面；界面有展示游客人数检测、旅游交通监测、旅游停车监测、天气环境监测、旅游消费监测、预测预警监测等数据。<br>进入数据中心可视化接口服务界面，可通过接口方式将结果数据对外提供。</p>\n<p>Q21:多种场景模板        提供区域板块可视化呈现能力，如地区板块、行政区板块等    进入    </p>\n<p>Q22:多种图表组件        如饼图、线图、柱图、流量图、堆积图、K线图、计数器等<br>Q23:图形化的搭建工具        提供层级结构可视化呈现能力，如树形分支图、冰柱图等        </p>\n<p>Q24:多分辨率适配与发布方式        对大屏展示提供兼容        </p>\n","site":{"data":{}},"excerpt":"","more":"<p>Q1:元数据管理        元数据管理包括元数据定义、存储、查询、维护、检查和分析应用。        </p>\n<p>Q2:元数据存储        元数据存储的信息管理范围：数据源接口、ETL和前端展现等全部数据处理环节，并提供对技术元数据及业务元数据存储。    存储在meta:topics,可以通过命名得出对应源接口、ETL服务名等信息.但部份环节无法对应,即缺少完整环节记录。    </p>\n<p>Q3:元数据查询        元数据查询支持对元数据库中的元数据基本信息进行查询与检索的功能，可查询数据库表、维表、指标、过程及参与的输入输出对象信息，以及其它纳入管理的对象基本信息，查询的信息按处理的层次及业务主题进行组织，查询功能返回实体及其所属的相关信息。</p>\n<p>Q4:元数据维护        对于元数据的增量维护，可以保留历史版本信息。用户使用元数据基本维护功能，可以统一管理所有系统中的元数据    </p>\n<p>Q5:元数据检查        支持对元数据数据质量的检查手段，在元数据上线时，对元数据进行稽核检查，保证元数据信息的完整性，合理性。    </p>\n<p>Q5:元数据分析        元数据管理能够通过血缘分析和影响分析，定位数据问题产生的路径，并评估出该问题对平台其他数据或应用的影响    </p>\n<p>Q6:模型管理        构建专业的模型设计器创建、修改和设计所有数据对象，例如：事实表、维表、过程、索引和触发器。无需编写复杂的 SQL 来创建、编辑和维护对象<br>Q7:数据查阅        构建视觉化数据查阅工具使运管团队高效创建和编辑数据查阅方案，而不必拘泥于语法和命令；选择想在数据中心中执行的操作，所见即所得。</p>\n<p>Q8:同步与迁移        数据资源迁移主要保证字段对应、代码转换、量纲转换、数据合并、数据拆分等功能。        </p>\n<p>Q9:导入导出        从不同格式的文件导入数据到数据中心，例如 Access、Excel、XML、TXT、CSV、JSON 及更多。同样，可以将数据导出到各种格式，如 Excel、TXT、CSV、DBF、XML 等    分别导入Excel、XML、TXT、CSV、JSON格式的文件数据到数据中心；导入成功。分别从数据中心导出xlxs、CSV、txt、xml格式的文件；导出成功。 没有导入Access、和导出DBF格式的文件截图证名    </p>\n<p>Q10:计划任务        设置计划并在指定的时间运行，不同数据库可以在同一批处理作业中统一调用    进入Oozie Editor界面，点击添加计划任务；进入任务编辑界面。输入任务名称、任务内容、计划任务执行频次后，点击【保持】；计划任务添加成功。需要描述下怎么实现同数据库可以在同一批处理作业中统一调用    </p>\n<p>Q11:日志管理        实现日志信息查询统计与分析管理，包括：登录登出日志、访问日志、操作日志、日志统计、用户状态管理    进入cloudera manager日志界面；界面有显示包括主机、日志级别、时间、源、消息等相关日志信息。任意选择一条日志，点击可查看日志情。</p>\n<p>Q12:运行监测        提供平台系统各种注册服务的实时监控，包括该服务的状态、运行时间，同时可以对平台监控的时间间隔，是否自动启动参数设置和应用    进入cloudera manager集群界面，界面可查看设备运行状态、运行状况、状态摘要、运行时间。<br>进入cloudera manager配置界面；可实现自动启动参数设置和应用。    </p>\n<p>Q13:调度配置        在统一调度平台中以数据流作为驱动，通过控制中心统一进行调度配置、进行作业命令下发、状态收集进行控制        </p>\n<p>Q14:调度运行        支持基于shell脚本的调度，简化调度过程并判断任务成功与否；支持基于存储过程的调度    目前系统使用的是hadoop、yarn工具查看调度情况。    </p>\n<p>Q15:调度策略        依据业务要求，调度策略可分为：时间调度、手工调度、消息\\API接口调度、优先级调度等。    </p>\n<p>Q16:调度监控        系统支持对所有任务按照系统、按日期对任务总体运行情况进行汇总展现，使得总体任务执行情况一目了然    系统采用Apache Flink Dashboard进行调度监控；可对所有任务按照系统、按日期对任务总体运行情况进行汇总展现    </p>\n<p>Q17:数据整合服务        对原始数据源的关系型数据库、普通日志文件数据等进行抽取，并且对数据按照用户的配置进行数据预处理等操作，然后将数据存储到大数据管理平台中。    数据整合服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。    </p>\n<p>Q18:资源管理服务        对各种需要用到的分布式开源框架进行整合和封装    资源管理服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。    </p>\n<p>Q19:数据分析服务        封装各种数据挖掘算法，如聚类、协同过滤推荐、关联规则等，用户可针对不同的数据集选择不同的算法，来完成特定的业务分析任务。    数据分析服务是通过代码层面实现，不属于就绪可用软件测试范围，不做验证。</p>\n<p>Q20:数据展示服务        将数据分析后的结果通过图表和报表的形式向用户展示，或者直接将结果数据以接口的方式对外提供。    进入可视化文旅云图界面；界面有展示游客人数检测、旅游交通监测、旅游停车监测、天气环境监测、旅游消费监测、预测预警监测等数据。<br>进入数据中心可视化接口服务界面，可通过接口方式将结果数据对外提供。</p>\n<p>Q21:多种场景模板        提供区域板块可视化呈现能力，如地区板块、行政区板块等    进入    </p>\n<p>Q22:多种图表组件        如饼图、线图、柱图、流量图、堆积图、K线图、计数器等<br>Q23:图形化的搭建工具        提供层级结构可视化呈现能力，如树形分支图、冰柱图等        </p>\n<p>Q24:多分辨率适配与发布方式        对大屏展示提供兼容        </p>\n"},{"title":"CDH搭建细节","date":"2019-05-26T16:00:00.000Z","_content":".....\n<!--more-->\n\n## CDH安装准备\n\n![](http://img.wqkenqing.ren/Ibp691.png)\n\n\nubuntu ulimit","source":"_posts/王阁/技术/hexo/CDH/搭建.md","raw":"---\n\ntitle: CDH搭建细节\ndate: 2019-05-27\ntags: \n\n---\n.....\n<!--more-->\n\n## CDH安装准备\n\n![](http://img.wqkenqing.ren/Ibp691.png)\n\n\nubuntu ulimit","slug":"王阁/技术/hexo/CDH/搭建","published":1,"updated":"2023-02-23T02:51:20.904Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsev002iu6pw4196980g","content":"<p>…..</p>\n<a id=\"more\"></a>\n\n<h2 id=\"CDH安装准备\"><a href=\"#CDH安装准备\" class=\"headerlink\" title=\"CDH安装准备\"></a>CDH安装准备</h2><p><img src=\"http://img.wqkenqing.ren/Ibp691.png\" alt=\"\"></p>\n<p>ubuntu ulimit</p>\n","site":{"data":{}},"excerpt":"<p>…..</p>","more":"<h2 id=\"CDH安装准备\"><a href=\"#CDH安装准备\" class=\"headerlink\" title=\"CDH安装准备\"></a>CDH安装准备</h2><p><img src=\"http://img.wqkenqing.ren/Ibp691.png\" alt=\"\"></p>\n<p>ubuntu ulimit</p>"},{"title":"王阁/工作/项目/绥延/kafka测试环境","date":"2021-05-08T03:27:09.279Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n \n ## ip&hosts\n\n 192.168.10.100 namenode \n 192.168.10.101 datanode1\n 192.168.10.102 datanode2\n\n\n ### kafka 地址\n\n192.168.10.100:9092\n192.168.10.101:9092\n192.168.10.102:9092\n\n### zookeeper地址\n\n192.168.10.100:2181\n192.168.10.101:2181\n192.168.10.102:2181","source":"_posts/王阁/工作/项目/绥延/kafka测试环境.md","raw":"title:  \ndate:  \ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n \n ## ip&hosts\n\n 192.168.10.100 namenode \n 192.168.10.101 datanode1\n 192.168.10.102 datanode2\n\n\n ### kafka 地址\n\n192.168.10.100:9092\n192.168.10.101:9092\n192.168.10.102:9092\n\n### zookeeper地址\n\n192.168.10.100:2181\n192.168.10.101:2181\n192.168.10.102:2181","slug":"王阁/工作/项目/绥延/kafka测试环境","published":1,"updated":"2021-05-08T03:30:14.600Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsev002ku6pwcyj6bvu0","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"2d680f660cfba89b8101c02fe02b2e721ae68d936e3bef8b2915b08352d594c8\">f29c680708acd02cbb1b6cceaba0619208b29a73544e30f4f55f9dfffa3ac11497b9911e232fcc97c1c85290a67dcb0ce896a660d6b8701946dc9cb2971014b94e768a0e6c5b3b111a708b56736a71bde92c84d7a54ec7c4bb0a3529d0819f1b8022e79c1ed27b8bdd5fb29087aaba35a5974237feba63fda6b970bf5e7c306f68aba6d90ecede66e029a1274c394f9fad821748e7d8b3677c05387664b1380a0047984c66aca940fdf97e70c7a66ecba333764197de878c43cc0d0adbc8eb003a12a2f623c762d4d43f097fa3038dd57f60f5bb383d7020944f729c49c7ee6129be651aae2a047419d02c31fad109a93c04977f9497dcb26d77ddca0320a6db645f84e2a7f8ac9abbe0f950f23a11659e8a857b4004f69cac71faec1ed74ecfc10e2cee01cf428e0c3c4e47a17f44e7d01dd3b0b211a440ff7e25545dbeda261d524bd4c9857f366b24b0397aac5a2034b6f26346537cb21140742982d6fa68251a68413f394778a84032c685f1eaaac8575cffa47d6892e0eacd2fd927f96c6b74973767bd72c5d1bd38982558da1cd261f0485176dc00b73c3e1d2c3f1add79112a3e68efbb70842df2fafb8511162c6fb23d30fdcea4b935f778eb5b49ea5b81691fdf6e61a267efc144ee5ab8071a1d58322a6c1ee3af952e9250211b3e19700fe1d8816e256a41fffb18e4b5e5956c7b4094e39e1e9137ffd81889b45de162b52c902e41177604f0f5227874187f1c7132605b16575bdb6238df86d71e7c1f43cc9d65e660d217a6785ee474af10bf5d0e1c45525aed7847699c37b96ebe45f6a5a9e06ab7918ce6b6c8bcb614</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n\n<h2 id=\"ip-amp-hosts\"><a href=\"#ip-amp-hosts\" class=\"headerlink\" title=\"ip&amp;hosts\"></a>ip&amp;hosts</h2><p> 192.168.10.100 namenode<br> 192.168.10.101 datanode1<br> 192.168.10.102 datanode2</p>\n<h3 id=\"kafka-地址\"><a href=\"#kafka-地址\" class=\"headerlink\" title=\"kafka 地址\"></a>kafka 地址</h3><p>192.168.10.100:9092<br>192.168.10.101:9092<br>192.168.10.102:9092</p>\n<h3 id=\"zookeeper地址\"><a href=\"#zookeeper地址\" class=\"headerlink\" title=\"zookeeper地址\"></a>zookeeper地址</h3><p>192.168.10.100:2181<br>192.168.10.101:2181<br>192.168.10.102:2181</p>\n","encrypt":true},{"_content":"# 绥延高速相关数据采集\n地址：\nip :192.168.10.249\nport: 44445\n\n备注:同样需要先用vpn连接。\n","source":"_posts/王阁/工作/项目/绥延/采集地址.md","raw":"# 绥延高速相关数据采集\n地址：\nip :192.168.10.249\nport: 44445\n\n备注:同样需要先用vpn连接。\n","slug":"王阁/工作/项目/绥延/采集地址","published":1,"date":"2021-07-20T09:47:08.349Z","updated":"2021-07-20T09:48:13.327Z","title":"王阁/工作/项目/绥延/采集地址","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsew002lu6pwcfxxhqin","content":"<h1 id=\"绥延高速相关数据采集\"><a href=\"#绥延高速相关数据采集\" class=\"headerlink\" title=\"绥延高速相关数据采集\"></a>绥延高速相关数据采集</h1><p>地址：<br>ip :192.168.10.249<br>port: 44445</p>\n<p>备注:同样需要先用vpn连接。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"绥延高速相关数据采集\"><a href=\"#绥延高速相关数据采集\" class=\"headerlink\" title=\"绥延高速相关数据采集\"></a>绥延高速相关数据采集</h1><p>地址：<br>ip :192.168.10.249<br>port: 44445</p>\n<p>备注:同样需要先用vpn连接。</p>\n"},{"_content":"# 数据运维-采集模块构建方案\n基于docker来构建运行环境。\n即将采集任务基于封装后的docker来运行\n任务的创建，任务状态的监听则都走docker的api来管理与获得","source":"_posts/王阁/工作/数据基础平台/数据运维/数据运维-采集任务模块.md","raw":"# 数据运维-采集模块构建方案\n基于docker来构建运行环境。\n即将采集任务基于封装后的docker来运行\n任务的创建，任务状态的监听则都走docker的api来管理与获得","slug":"王阁/工作/数据基础平台/数据运维/数据运维-采集任务模块","published":1,"date":"2022-02-21T02:47:21.536Z","updated":"2022-02-21T09:31:47.881Z","title":"王阁/工作/数据基础平台/数据运维/数据运维-采集任务模块","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsew002nu6pw7c1n4x00","content":"<h1 id=\"数据运维-采集模块构建方案\"><a href=\"#数据运维-采集模块构建方案\" class=\"headerlink\" title=\"数据运维-采集模块构建方案\"></a>数据运维-采集模块构建方案</h1><p>基于docker来构建运行环境。<br>即将采集任务基于封装后的docker来运行<br>任务的创建，任务状态的监听则都走docker的api来管理与获得</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"数据运维-采集模块构建方案\"><a href=\"#数据运维-采集模块构建方案\" class=\"headerlink\" title=\"数据运维-采集模块构建方案\"></a>数据运维-采集模块构建方案</h1><p>基于docker来构建运行环境。<br>即将采集任务基于封装后的docker来运行<br>任务的创建，任务状态的监听则都走docker的api来管理与获得</p>\n"},{"title":"数据管理的构建方案","date":"2021-11-30T06:51:33.340Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n # 数据管理的构建方案\n\n> 元数据管理、数据地图、主数据管理、指标&索引管理、资源管理、任务编排管理\n\n ## 元数据管理\n\n 这里元数据主要指的是被采集上来的元数据，在这里主要是针对元数据的管理操作。\n\n 相关子模块有\n 1. 元数据采集\n 2. 元数据检索\n 4. 血缘分析\n 5. 影响链分析\n\n### 元数据采集\n\n元数据采集在数据集成阶段会先完成对改类元数据的埋点工作，元数据采集到元数据存储组件后,在元数据管理模块，可以再通过元数据采集按钮，再手动触发采集。\n元数据的采集，大的目标要做到全域元数据采集，通过调研，如在小米的思路，是对针所有使用组件，做了深度二次开发，从而实现了全域元数据采集。\n这里我们结合我们自身情况，可以考虑，先集成一些常见组件，如mysql、hive、hbase、kafka、elasticsearch等部份组件，先实现一定的元数据采集功能。\n而以上组件也可以通过atlas工具来实现，采集埋点，较大程度减少我们自研的成本。\n同时atlas也能一定程度的生成血缘信息\n\n### 元数据检索\n\n顾名思义\n\n### 血缘分析\n\n血缘链路图生成\n\n### 影响链分析\n\n涉及那些模块等的影响链分析\n\n### 待定功能\n\n1. 元数据修改并下发\n改功能实现难度、影响点太大，待定实现。\n2. 元数据迁移与同步\n通过元数据快速迁移，同步一个类似环境\n\n## 数据地图\n\n数据地图主要是以地图的形式，对现在数据进行一个展示，检索等操作，具体实现，可以结合小米等实现方案进行构思\n\n## 任务编排管理\n\n任务调度 、编排等管理。可以参考azkaban、hue等构建思路\n\n## 资源管理\n\n对相关环境与任务的资源进行配置管理。\n\n\n## 标签&索引管理\n\n如题。\n\n","source":"_posts/王阁/工作/旸谷数据中心/数据基础平台/数据管理的构建方案.md","raw":"title:  数据管理的构建方案\ndate:  2021年11月30日\ntags: [数据管理]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n # 数据管理的构建方案\n\n> 元数据管理、数据地图、主数据管理、指标&索引管理、资源管理、任务编排管理\n\n ## 元数据管理\n\n 这里元数据主要指的是被采集上来的元数据，在这里主要是针对元数据的管理操作。\n\n 相关子模块有\n 1. 元数据采集\n 2. 元数据检索\n 4. 血缘分析\n 5. 影响链分析\n\n### 元数据采集\n\n元数据采集在数据集成阶段会先完成对改类元数据的埋点工作，元数据采集到元数据存储组件后,在元数据管理模块，可以再通过元数据采集按钮，再手动触发采集。\n元数据的采集，大的目标要做到全域元数据采集，通过调研，如在小米的思路，是对针所有使用组件，做了深度二次开发，从而实现了全域元数据采集。\n这里我们结合我们自身情况，可以考虑，先集成一些常见组件，如mysql、hive、hbase、kafka、elasticsearch等部份组件，先实现一定的元数据采集功能。\n而以上组件也可以通过atlas工具来实现，采集埋点，较大程度减少我们自研的成本。\n同时atlas也能一定程度的生成血缘信息\n\n### 元数据检索\n\n顾名思义\n\n### 血缘分析\n\n血缘链路图生成\n\n### 影响链分析\n\n涉及那些模块等的影响链分析\n\n### 待定功能\n\n1. 元数据修改并下发\n改功能实现难度、影响点太大，待定实现。\n2. 元数据迁移与同步\n通过元数据快速迁移，同步一个类似环境\n\n## 数据地图\n\n数据地图主要是以地图的形式，对现在数据进行一个展示，检索等操作，具体实现，可以结合小米等实现方案进行构思\n\n## 任务编排管理\n\n任务调度 、编排等管理。可以参考azkaban、hue等构建思路\n\n## 资源管理\n\n对相关环境与任务的资源进行配置管理。\n\n\n## 标签&索引管理\n\n如题。\n\n","slug":"王阁/工作/旸谷数据中心/数据基础平台/数据管理的构建方案","published":1,"updated":"2021-12-01T08:39:53.939Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf0002pu6pw67qf9r65","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"7efa4d3af69a0897fadd0d714d930a3f39ded9701538b5b1468db897ff0302b5\">f29c680708acd02cbb1b6cceaba061920962c2629b7d7d6d29e18db59823a9e76a09578109f564dbcc03fd834f793b3d97b4195ccb49bbc9c0d0e96b8a6449a4deb64f6219e05cfea282ef181b92966f8b3d0b29b313f6e989ea5f460fd3a52099b5c0dfe2e05114182ad86c3553924cc03b1b94981f77ef9ca3292e4eb6e75eeb26a11228b9fc5c1691d0a3f586e5d7144daa1621cb65444ecc9bbcedb907cd0376485d8c85c74413d3879beed229f317b03f8d480f1c5b99fce2f964d93ba6c6c8f6b83080bbe19230f8a154b09a0c19645cadae2961e7729bf115e953e4d1b9c8dab801d2b85daf4f964adc518cdbdd263d0e9fd51411f3b13b3992cc0f12ae613d3773197e9fc0bc203e92ae461e91feaad17f4823832dfe3beb2d4bc6a64251f1c6f232b81de75956acd6436791f63a2d49ff2eacc98e9a828a1494bf56e1f5509513f350023768351bbd5fa6590c7338109960d02ec26ffedde98803b94fe02dc0b6b31ad0fee4a016c4cc3275903d2227b3e113efa03d0a6af2089e9e9e58a2ed4481a4f15e7d3b39c405938d074c70f648f0b3756568213cb496cafd759a59730aaeb110912192c376690ae86830767607ef88b40397cedde2a3fb0ea68e45cd261eb8092aceae8ff6ae4016ac932b572966e3c1fabb398a3cd108b53d36d248dbafc29e9cace1690c7bfd106ae90fe42013228dad4ab4a81a3745ce394d2bd5b239fcb06570457bc318f41e3f1d2cdc9ca023227aa619c62bd1a43f61bdf3b2b4678bdd63997d49e22af6c95ac280494bb5cd07f830f395a3111eb8f3d8f8d255dc819d8bd837c61839ec78c6021339fca899b77f5817a2178e9b905b01c2d607ef1023efb75c92d30fa032819bb90f6dd1912e55165a38195762718b7687d1ac3aaa962cfce535c292582d57f1dc633fd236305d966ac26529203f50cc9bae1072cdeee49da2ffebf0749efb772781b1244c61b3f817797827f379cc68936aafd739a175756170dd72a1a4a06335cf26223f0714c820d9afcb3ce7a2bac4e9d3ea12fbf757c3dfefa9c98295deb4a94bb39ded142333678fa84fcb35a5f5b1fa1692d99b7a9673568e26ea2a9661d02c4609d984db55886115d5a121605b6c783d2722155867d2df69d40a3039d58d79f8a47979d64904e12a054d17b668b5bebb6c5743fd089f8cd15d955c1adadabd94843a1c260e1ffe889714a2e8d40a317debc0b28f4e0b27969b64cfe9ff3149523cdd1d7382c5d3ff0520776d72f28776f3643e8b58260a0e6e79f5afc32588cf93a9926b10af39a1260a357c3c68b563116704f89210ae2531222b4a8346971cb52543c46236410d228f6524493bfd758b6bc9d4240090e48b2ed5563dbc0d9b11866384880c42207a1d23f5a4f0cbd404d90e7ae868b3a833bd7a7cba94e60e442fde93318cabcd12152856de59c5c2f272b497e846b6949f92a42948c2853bfa266c3d427e06d0024dcee26cc9f4fded9f4723f2dd9fa23494eb5c59b6c74e345ad773346dcd1f420484ccfe400f29a1188ab94b540bf3edb7141aefe284c23890d0c4d3cae66c357b8e1b3a1419efd1c2cb065a1029fa5bf13bbb91308929307d6e134425fe101a58bcd1397ae5ef831c817df27b0c0062dbe61446d48cb27abe9ae9074b5bc9afccaf7b9c508aa0e98a2ee657d856c650cb876c9a8e793cff6518e55eedacda0541b971fe274449eb0cd256c6a9f124702a844e36032e5a069a694313e0904e45571be11f0d58eebe51a63cc1826b6074fa1f0dc7ce037704cea316b91fb0a801c980412a0ef50271f434dfefb4faff585bfe99c995511ee958796dca26ad24abc1349334b00f07d594eb7825efda936b01690943fe26b8329eee028dc04d52a88c908ef568371d159c1407e1d3733238ec42451dfba3adfe56f5f0b8f80dd7e538d3c38df614da9792429401065c6f2921304ecf5cca18f5e862849f87f4ea54cf3ac614d70576da7cc8015dc427fbb0f8f1724994809657147023835e7fc1b3bb049dcf7fd7695e943ce58338a9f2d5e7bec9f070a09e6bd657a206bd8f60aff6c67d01b634ebbbea4c7e02e0e03da11cf8192983bc9c6b511af6807d59ebe36320f3039e10dcfcd8dc46f6cd7471b357f497b1baa6061e64c69709eb3443b538c0f25654b65288f99f529f0bfb62b194e54307d711e710e0916dc53873bcef652dbb36e9b7742986cda9fab4f01774834a1b1bca57eeb2c9fe6e6daf99dfc2bb51a19b77ec4266ab99d41992ffd916aa6e5a8383aabc4194085cc7e410a75bd34c907d951a499fb6ef2b5a1e987c3270e2e7c1e8cc854c4875995bbe9757107658137c250dafa806c5e00323e411a3f3a534ebd10dfb60ff3f04ee1f3749346d03a452be4687739a3fd9b539cdd039aea1e99431e12a22f32dc43789f4bfeadfe93d0b6adaa4df0cd9d726cd2976a8897c78bb844f87a02cd1c7b169b6d5f55831048b3aa91e26df85ada33202a113b050fb7efac7eb09235e783be7754178c7fbd569b7360fb027f3f429a5e08b4b8440c04ddb4e0615486058ce6cac96ab8a67f2e5bd7dd2a8d0498ec4fdb8d3c6b4c81049488ff26babb3680cdfb2b60bd976ea93ffe5172b13856a4d721940b97641a43c24e7608d2e1453eabb663c7d20be927e050be1f4742b625c6c91f74e1b87c2853a7f1d06d8fe10641a3cc6f89c1161253dd0e7f0b6047daf0a7c23db5e42c23ece66228071a15e90d641f729f75f683131e0c617b189501076ee4e9da14e73c67f5f49d7f550708726916c755051dcf118d7d024978dd41181afdee9532af0ee83d04fabb966de7b6d3350455747fc8c1a80ca008339863ebd6dcfcc7f6f9e3b64c25ea9dda42476b72a0d26db45940e4ed6f2a75ad2269da071dea04d7554d850f03a07a7ff5fcc6abe62fed2088ebd73985a0d483e148fc8addced66fa09fd7d2902d3f2bc40e0dfbfb4f7e3284c5e54819fd7e956e20148914d4d9af3b1a47b88a4b54a35cd5c15919c1a9b23470aba894a2f3af2fc5d1919a19938f4e07f82fce4ea3c0f08a273bea376601f25b3c615be5d6001bfdf8f3b9be27f2f10c76cfc55a868dc75c7f13a838fd2e38b0f43723367edb2f20e71332cddde6a38d78cfe8f4747fcdd6f5772cec43ef31d94aa82aaf006d46480325f58b54ba51c8e23814e408d138c144a05380ab0551a4bcea755c6044ad5f0c1f06ecda954749fa6ab896f9aa116a74c4d3b46f5872f276bfb7b890965d0a55cc42168833751829ffff48124c819f090a0bc5c612bfcedb2f4a72fff20daab38d2bab4bdf8fdae916d26e11ceff676b0850f78c06e98c804bba2660e4fa24e68d4a3fba534bc78717ad970f03bb712eebc6711ee65e4373f7c4108657db0bce7d4406b35ed34ccaf0b75ac85d8bf4c00551c6cbebbf3ab250448cad14db29a2fe5ac8762a2280f99f540c74d4e439e35d081c92ca509970aa9ca94381fa7ad3856a896c4430b1c804e7a65fcc28cde97d3a984e15c4ca2d007ba77a7c3570a9bc35242c696ce06b910d218d9903b7276d8e5235ec0256bbd889c84d9f7be81711730c4fd7390c9d43ea047fb15c4ec080b815396d4dbac01a2a6e8ea799cad04cdda2551f8e11d7bb150d01b32ccb895589580960fc3f1fe48837f5e0edeadd76040e36feedbc2fdc33568097e37ecd16a57b7492dde0baf61d0644ce0fbed193fc9c15743a6724653d6bd0c5fefc2c6770ce0179ad5fe56e4ed754e121a4d204db0ca3d8ebacf324c75ad47722fd1debd12f40279405a3d1eaf3a94fc18129cf4fd34149ad21180e40ef867f99ae0e8d6753af821fc1af9eb1cd538eb8dcd8d0e6d123bd8944ab326c3fa8fe1283a9db02c8fa4c7fe99ada8a1b346e991f6ec5a098ad0b5a4109884ab488b4a7ad8bb1d8499dd2ca65087d0d9a8e46efdc195c844f2d19ea9c04c3aa7f8f5fd849ebb0c3a8ada46950913e9200c2f2ae478256900b3ce05203f9802950e63c1ca6b6055624e1bfa17c1db189caf4af18150f87b11eef7b73ddebd1a8281ee88a7af45fb67c36e84a78122d4febbfde138f20603a610fce5b7fe03b68b5804505511eb405915cb41ae9a707ee5e76ea321ee302bceaf5c465eee89bb4922c1421f7097fbecd64e80f0f1ed69208149877adbafc33800e7e5a276397846e1fd098dfdc61016e45a581807065dc7f35fd0c5396015d44b3bb2350994ba41703e181b7f3117aa884cdee6acd3adc4db4040d6ed4d83d77a121b8ecd20180b36da7e6682fe3a55544a26ee095fc87ae1c883061208c306d2cacc46050142e44d21644445ff013802fd0a38a70a98bb0997b50b971c762ac28e77f113d7e3ee2af7868ecd2ff129701d236fc06f23cb2f308f62512b88de691b4c62575d51d0d11d666d85a73c237d544e57ddf232666fce951e78d25dcb242c3dacf4704c1dbb49292ac1a98df4947b0a62effca1ad6108d4ae7eb225bb29bc</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n<h1 id=\"数据管理的构建方案\"><a href=\"#数据管理的构建方案\" class=\"headerlink\" title=\"数据管理的构建方案\"></a>数据管理的构建方案</h1><blockquote>\n<p>元数据管理、数据地图、主数据管理、指标&amp;索引管理、资源管理、任务编排管理</p>\n</blockquote>\n<h2 id=\"元数据管理\"><a href=\"#元数据管理\" class=\"headerlink\" title=\"元数据管理\"></a>元数据管理</h2><p> 这里元数据主要指的是被采集上来的元数据，在这里主要是针对元数据的管理操作。</p>\n<p> 相关子模块有</p>\n<ol>\n<li>元数据采集</li>\n<li>元数据检索</li>\n<li>血缘分析</li>\n<li>影响链分析</li>\n</ol>\n<h3 id=\"元数据采集\"><a href=\"#元数据采集\" class=\"headerlink\" title=\"元数据采集\"></a>元数据采集</h3><p>元数据采集在数据集成阶段会先完成对改类元数据的埋点工作，元数据采集到元数据存储组件后,在元数据管理模块，可以再通过元数据采集按钮，再手动触发采集。<br>元数据的采集，大的目标要做到全域元数据采集，通过调研，如在小米的思路，是对针所有使用组件，做了深度二次开发，从而实现了全域元数据采集。<br>这里我们结合我们自身情况，可以考虑，先集成一些常见组件，如mysql、hive、hbase、kafka、elasticsearch等部份组件，先实现一定的元数据采集功能。<br>而以上组件也可以通过atlas工具来实现，采集埋点，较大程度减少我们自研的成本。<br>同时atlas也能一定程度的生成血缘信息</p>\n<h3 id=\"元数据检索\"><a href=\"#元数据检索\" class=\"headerlink\" title=\"元数据检索\"></a>元数据检索</h3><p>顾名思义</p>\n<h3 id=\"血缘分析\"><a href=\"#血缘分析\" class=\"headerlink\" title=\"血缘分析\"></a>血缘分析</h3><p>血缘链路图生成</p>\n<h3 id=\"影响链分析\"><a href=\"#影响链分析\" class=\"headerlink\" title=\"影响链分析\"></a>影响链分析</h3><p>涉及那些模块等的影响链分析</p>\n<h3 id=\"待定功能\"><a href=\"#待定功能\" class=\"headerlink\" title=\"待定功能\"></a>待定功能</h3><ol>\n<li>元数据修改并下发<br>改功能实现难度、影响点太大，待定实现。</li>\n<li>元数据迁移与同步<br>通过元数据快速迁移，同步一个类似环境</li>\n</ol>\n<h2 id=\"数据地图\"><a href=\"#数据地图\" class=\"headerlink\" title=\"数据地图\"></a>数据地图</h2><p>数据地图主要是以地图的形式，对现在数据进行一个展示，检索等操作，具体实现，可以结合小米等实现方案进行构思</p>\n<h2 id=\"任务编排管理\"><a href=\"#任务编排管理\" class=\"headerlink\" title=\"任务编排管理\"></a>任务编排管理</h2><p>任务调度 、编排等管理。可以参考azkaban、hue等构建思路</p>\n<h2 id=\"资源管理\"><a href=\"#资源管理\" class=\"headerlink\" title=\"资源管理\"></a>资源管理</h2><p>对相关环境与任务的资源进行配置管理。</p>\n<h2 id=\"标签-amp-索引管理\"><a href=\"#标签-amp-索引管理\" class=\"headerlink\" title=\"标签&amp;索引管理\"></a>标签&amp;索引管理</h2><p>如题。</p>\n","encrypt":true},{"_content":"# cdh集成phoenix\n\n","source":"_posts/王阁/技术/hexo/CDH/cdh集成phoenix.md","raw":"# cdh集成phoenix\n\n","slug":"王阁/技术/hexo/CDH/cdh集成phoenix","published":1,"date":"2022-03-19T07:24:57.323Z","updated":"2022-03-19T07:26:08.588Z","title":"王阁/技术/hexo/CDH/cdh集成phoenix","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf2002su6pw9he1c27l","content":"<h1 id=\"cdh集成phoenix\"><a href=\"#cdh集成phoenix\" class=\"headerlink\" title=\"cdh集成phoenix\"></a>cdh集成phoenix</h1>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"cdh集成phoenix\"><a href=\"#cdh集成phoenix\" class=\"headerlink\" title=\"cdh集成phoenix\"></a>cdh集成phoenix</h1>"},{"_content":"# 数据采集功能建设方案\n\n## 一、数据采集功能块规划\n\n数据采集\n\n* 采集任务信息页\n* 新建采集任务\n  * 配置采集任务信息\n    * 选择类别\n      * 批量数据采集\n      * 实时数据采集\n      * 接口采集\n    * 配置参数\n      * 采集源\n      * 采集能力\n      * 采集频率\n      * 筛选条件\n      * 配置输出目的地\n      * ...\n* 采集任务列表页\n* 采集任务管理\n  * 查看详情\n  * 修改任务信息\n  * 删除任务\n  * 重启\n  * 停止\n\n## 数据采集技术实现方案\n\n先基于flume来初步构建数据采集模块的功能，结合上面功能上的规划，这里具体实现方案思路如下\n\n**选择类别**可能对应flume的source\n\n### 批量数据采集（非结化数据文件、图片等）\n\n基于flume的批量数据采集，这里可能涉及到的source有\n\n* exec source\n* http source\n* syslog source\n* taildir source\n\n### 实时数据采集\n\n基于flume的实时数据采集，这里可能涉及到的source有\n\n* netcat tcp \n* netcat udp \n* syslog tcp \n* multiport syslog\n* syslog udp \n* avro legacy \n* thrift source\n* kafka source \n\n### 接口数据采集\n\njava or python 程序\n\n\n\n## 其它可能所需的技术\n\n创建和管理采集任务的技术逻辑大致是：\n\n1. 通过点击选择，生成相应的配置文件\n2. 配置文件从前端发送至web后端服务器\n3. web服务器生成执行语句\n4. web服务器选择要执行的flume主机，并建立连接\n5. flume主机接收到执行语句，并执行相关命令\n6. web后端服务器接收执行结果\n\njava 建立ssh连接用到 JSch\n\n\n\n![CleanShot 2022-02-17 at 16.55.14@2x](http://img.wqkenqing.ren/typora_img/CleanShot%202022-02-17%20at%2016.55.14@2x.png)\n\n## 二、数据采集实现细节说明\n\n![CleanShot 2022-02-22 at 14.04.20@2x](http://img.wqkenqing.ren/typora_img/CleanShot%202022-02-22%20at%2014.04.20@2x.png)\n\n### **任务类型** \n\n| 类型名    |      说明       |\n| --------- | :-------------: |\n| TCP       |     tcp采集     |\n| UDP       |     udp采集     |\n| kafka     |    kafka采集    |\n| csv、txt  |    文本采集     |\n| http      |    http采集     |\n| mysql     | mysql数据库采集 |\n| websocket |  websocket采集  |\n| sqlserver |  sqlserver采集  |\n\n\n\n#### 不同类型所需要的参数\n\n|   类型    |                       参数(*是必填)                        | 补充 |\n| :-------: | :--------------------------------------------------------: | ---- |\n| TCP、UDP  |              ip/host(*)、port (*)、agentName               |      |\n|   kafka   | bootstrap_server、port、topics、consumer_group 、agentName |      |\n| csv、txt  |                      file、agentName                       |      |\n|   http    |                     address、taskName                      |      |\n|   msyql   |                     后续确认、taskName                     |      |\n| websocket |                     后续确认、taskName                     |      |\n| sqlserver |                     后续确认、taskName                     |      |\n\n\n\n","source":"_posts/王阁/工作/数据基础平台/数据集成/数据采集构建方案.md","raw":"# 数据采集功能建设方案\n\n## 一、数据采集功能块规划\n\n数据采集\n\n* 采集任务信息页\n* 新建采集任务\n  * 配置采集任务信息\n    * 选择类别\n      * 批量数据采集\n      * 实时数据采集\n      * 接口采集\n    * 配置参数\n      * 采集源\n      * 采集能力\n      * 采集频率\n      * 筛选条件\n      * 配置输出目的地\n      * ...\n* 采集任务列表页\n* 采集任务管理\n  * 查看详情\n  * 修改任务信息\n  * 删除任务\n  * 重启\n  * 停止\n\n## 数据采集技术实现方案\n\n先基于flume来初步构建数据采集模块的功能，结合上面功能上的规划，这里具体实现方案思路如下\n\n**选择类别**可能对应flume的source\n\n### 批量数据采集（非结化数据文件、图片等）\n\n基于flume的批量数据采集，这里可能涉及到的source有\n\n* exec source\n* http source\n* syslog source\n* taildir source\n\n### 实时数据采集\n\n基于flume的实时数据采集，这里可能涉及到的source有\n\n* netcat tcp \n* netcat udp \n* syslog tcp \n* multiport syslog\n* syslog udp \n* avro legacy \n* thrift source\n* kafka source \n\n### 接口数据采集\n\njava or python 程序\n\n\n\n## 其它可能所需的技术\n\n创建和管理采集任务的技术逻辑大致是：\n\n1. 通过点击选择，生成相应的配置文件\n2. 配置文件从前端发送至web后端服务器\n3. web服务器生成执行语句\n4. web服务器选择要执行的flume主机，并建立连接\n5. flume主机接收到执行语句，并执行相关命令\n6. web后端服务器接收执行结果\n\njava 建立ssh连接用到 JSch\n\n\n\n![CleanShot 2022-02-17 at 16.55.14@2x](http://img.wqkenqing.ren/typora_img/CleanShot%202022-02-17%20at%2016.55.14@2x.png)\n\n## 二、数据采集实现细节说明\n\n![CleanShot 2022-02-22 at 14.04.20@2x](http://img.wqkenqing.ren/typora_img/CleanShot%202022-02-22%20at%2014.04.20@2x.png)\n\n### **任务类型** \n\n| 类型名    |      说明       |\n| --------- | :-------------: |\n| TCP       |     tcp采集     |\n| UDP       |     udp采集     |\n| kafka     |    kafka采集    |\n| csv、txt  |    文本采集     |\n| http      |    http采集     |\n| mysql     | mysql数据库采集 |\n| websocket |  websocket采集  |\n| sqlserver |  sqlserver采集  |\n\n\n\n#### 不同类型所需要的参数\n\n|   类型    |                       参数(*是必填)                        | 补充 |\n| :-------: | :--------------------------------------------------------: | ---- |\n| TCP、UDP  |              ip/host(*)、port (*)、agentName               |      |\n|   kafka   | bootstrap_server、port、topics、consumer_group 、agentName |      |\n| csv、txt  |                      file、agentName                       |      |\n|   http    |                     address、taskName                      |      |\n|   msyql   |                     后续确认、taskName                     |      |\n| websocket |                     后续确认、taskName                     |      |\n| sqlserver |                     后续确认、taskName                     |      |\n\n\n\n","slug":"王阁/工作/数据基础平台/数据集成/数据采集构建方案","published":1,"date":"2023-02-23T02:51:20.902Z","updated":"2023-02-23T02:51:20.903Z","title":"王阁/工作/数据基础平台/数据集成/数据采集构建方案","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf2002uu6pw9dwf9bo7","content":"<h1 id=\"数据采集功能建设方案\"><a href=\"#数据采集功能建设方案\" class=\"headerlink\" title=\"数据采集功能建设方案\"></a>数据采集功能建设方案</h1><h2 id=\"一、数据采集功能块规划\"><a href=\"#一、数据采集功能块规划\" class=\"headerlink\" title=\"一、数据采集功能块规划\"></a>一、数据采集功能块规划</h2><p>数据采集</p>\n<ul>\n<li>采集任务信息页</li>\n<li>新建采集任务<ul>\n<li>配置采集任务信息<ul>\n<li>选择类别<ul>\n<li>批量数据采集</li>\n<li>实时数据采集</li>\n<li>接口采集</li>\n</ul>\n</li>\n<li>配置参数<ul>\n<li>采集源</li>\n<li>采集能力</li>\n<li>采集频率</li>\n<li>筛选条件</li>\n<li>配置输出目的地</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>采集任务列表页</li>\n<li>采集任务管理<ul>\n<li>查看详情</li>\n<li>修改任务信息</li>\n<li>删除任务</li>\n<li>重启</li>\n<li>停止</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"数据采集技术实现方案\"><a href=\"#数据采集技术实现方案\" class=\"headerlink\" title=\"数据采集技术实现方案\"></a>数据采集技术实现方案</h2><p>先基于flume来初步构建数据采集模块的功能，结合上面功能上的规划，这里具体实现方案思路如下</p>\n<p><strong>选择类别</strong>可能对应flume的source</p>\n<h3 id=\"批量数据采集（非结化数据文件、图片等）\"><a href=\"#批量数据采集（非结化数据文件、图片等）\" class=\"headerlink\" title=\"批量数据采集（非结化数据文件、图片等）\"></a>批量数据采集（非结化数据文件、图片等）</h3><p>基于flume的批量数据采集，这里可能涉及到的source有</p>\n<ul>\n<li>exec source</li>\n<li>http source</li>\n<li>syslog source</li>\n<li>taildir source</li>\n</ul>\n<h3 id=\"实时数据采集\"><a href=\"#实时数据采集\" class=\"headerlink\" title=\"实时数据采集\"></a>实时数据采集</h3><p>基于flume的实时数据采集，这里可能涉及到的source有</p>\n<ul>\n<li>netcat tcp </li>\n<li>netcat udp </li>\n<li>syslog tcp </li>\n<li>multiport syslog</li>\n<li>syslog udp </li>\n<li>avro legacy </li>\n<li>thrift source</li>\n<li>kafka source </li>\n</ul>\n<h3 id=\"接口数据采集\"><a href=\"#接口数据采集\" class=\"headerlink\" title=\"接口数据采集\"></a>接口数据采集</h3><p>java or python 程序</p>\n<h2 id=\"其它可能所需的技术\"><a href=\"#其它可能所需的技术\" class=\"headerlink\" title=\"其它可能所需的技术\"></a>其它可能所需的技术</h2><p>创建和管理采集任务的技术逻辑大致是：</p>\n<ol>\n<li>通过点击选择，生成相应的配置文件</li>\n<li>配置文件从前端发送至web后端服务器</li>\n<li>web服务器生成执行语句</li>\n<li>web服务器选择要执行的flume主机，并建立连接</li>\n<li>flume主机接收到执行语句，并执行相关命令</li>\n<li>web后端服务器接收执行结果</li>\n</ol>\n<p>java 建立ssh连接用到 JSch</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/CleanShot%202022-02-17%20at%2016.55.14@2x.png\" alt=\"CleanShot 2022-02-17 at 16.55.14@2x\"></p>\n<h2 id=\"二、数据采集实现细节说明\"><a href=\"#二、数据采集实现细节说明\" class=\"headerlink\" title=\"二、数据采集实现细节说明\"></a>二、数据采集实现细节说明</h2><p><img src=\"http://img.wqkenqing.ren/typora_img/CleanShot%202022-02-22%20at%2014.04.20@2x.png\" alt=\"CleanShot 2022-02-22 at 14.04.20@2x\"></p>\n<h3 id=\"任务类型\"><a href=\"#任务类型\" class=\"headerlink\" title=\"任务类型\"></a><strong>任务类型</strong></h3><table>\n<thead>\n<tr>\n<th>类型名</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>TCP</td>\n<td align=\"center\">tcp采集</td>\n</tr>\n<tr>\n<td>UDP</td>\n<td align=\"center\">udp采集</td>\n</tr>\n<tr>\n<td>kafka</td>\n<td align=\"center\">kafka采集</td>\n</tr>\n<tr>\n<td>csv、txt</td>\n<td align=\"center\">文本采集</td>\n</tr>\n<tr>\n<td>http</td>\n<td align=\"center\">http采集</td>\n</tr>\n<tr>\n<td>mysql</td>\n<td align=\"center\">mysql数据库采集</td>\n</tr>\n<tr>\n<td>websocket</td>\n<td align=\"center\">websocket采集</td>\n</tr>\n<tr>\n<td>sqlserver</td>\n<td align=\"center\">sqlserver采集</td>\n</tr>\n</tbody></table>\n<h4 id=\"不同类型所需要的参数\"><a href=\"#不同类型所需要的参数\" class=\"headerlink\" title=\"不同类型所需要的参数\"></a>不同类型所需要的参数</h4><table>\n<thead>\n<tr>\n<th align=\"center\">类型</th>\n<th align=\"center\">参数(*是必填)</th>\n<th>补充</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">TCP、UDP</td>\n<td align=\"center\">ip/host(<em>)、port (</em>)、agentName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">kafka</td>\n<td align=\"center\">bootstrap_server、port、topics、consumer_group 、agentName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">csv、txt</td>\n<td align=\"center\">file、agentName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">http</td>\n<td align=\"center\">address、taskName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">msyql</td>\n<td align=\"center\">后续确认、taskName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">websocket</td>\n<td align=\"center\">后续确认、taskName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">sqlserver</td>\n<td align=\"center\">后续确认、taskName</td>\n<td></td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"数据采集功能建设方案\"><a href=\"#数据采集功能建设方案\" class=\"headerlink\" title=\"数据采集功能建设方案\"></a>数据采集功能建设方案</h1><h2 id=\"一、数据采集功能块规划\"><a href=\"#一、数据采集功能块规划\" class=\"headerlink\" title=\"一、数据采集功能块规划\"></a>一、数据采集功能块规划</h2><p>数据采集</p>\n<ul>\n<li>采集任务信息页</li>\n<li>新建采集任务<ul>\n<li>配置采集任务信息<ul>\n<li>选择类别<ul>\n<li>批量数据采集</li>\n<li>实时数据采集</li>\n<li>接口采集</li>\n</ul>\n</li>\n<li>配置参数<ul>\n<li>采集源</li>\n<li>采集能力</li>\n<li>采集频率</li>\n<li>筛选条件</li>\n<li>配置输出目的地</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>采集任务列表页</li>\n<li>采集任务管理<ul>\n<li>查看详情</li>\n<li>修改任务信息</li>\n<li>删除任务</li>\n<li>重启</li>\n<li>停止</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"数据采集技术实现方案\"><a href=\"#数据采集技术实现方案\" class=\"headerlink\" title=\"数据采集技术实现方案\"></a>数据采集技术实现方案</h2><p>先基于flume来初步构建数据采集模块的功能，结合上面功能上的规划，这里具体实现方案思路如下</p>\n<p><strong>选择类别</strong>可能对应flume的source</p>\n<h3 id=\"批量数据采集（非结化数据文件、图片等）\"><a href=\"#批量数据采集（非结化数据文件、图片等）\" class=\"headerlink\" title=\"批量数据采集（非结化数据文件、图片等）\"></a>批量数据采集（非结化数据文件、图片等）</h3><p>基于flume的批量数据采集，这里可能涉及到的source有</p>\n<ul>\n<li>exec source</li>\n<li>http source</li>\n<li>syslog source</li>\n<li>taildir source</li>\n</ul>\n<h3 id=\"实时数据采集\"><a href=\"#实时数据采集\" class=\"headerlink\" title=\"实时数据采集\"></a>实时数据采集</h3><p>基于flume的实时数据采集，这里可能涉及到的source有</p>\n<ul>\n<li>netcat tcp </li>\n<li>netcat udp </li>\n<li>syslog tcp </li>\n<li>multiport syslog</li>\n<li>syslog udp </li>\n<li>avro legacy </li>\n<li>thrift source</li>\n<li>kafka source </li>\n</ul>\n<h3 id=\"接口数据采集\"><a href=\"#接口数据采集\" class=\"headerlink\" title=\"接口数据采集\"></a>接口数据采集</h3><p>java or python 程序</p>\n<h2 id=\"其它可能所需的技术\"><a href=\"#其它可能所需的技术\" class=\"headerlink\" title=\"其它可能所需的技术\"></a>其它可能所需的技术</h2><p>创建和管理采集任务的技术逻辑大致是：</p>\n<ol>\n<li>通过点击选择，生成相应的配置文件</li>\n<li>配置文件从前端发送至web后端服务器</li>\n<li>web服务器生成执行语句</li>\n<li>web服务器选择要执行的flume主机，并建立连接</li>\n<li>flume主机接收到执行语句，并执行相关命令</li>\n<li>web后端服务器接收执行结果</li>\n</ol>\n<p>java 建立ssh连接用到 JSch</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/CleanShot%202022-02-17%20at%2016.55.14@2x.png\" alt=\"CleanShot 2022-02-17 at 16.55.14@2x\"></p>\n<h2 id=\"二、数据采集实现细节说明\"><a href=\"#二、数据采集实现细节说明\" class=\"headerlink\" title=\"二、数据采集实现细节说明\"></a>二、数据采集实现细节说明</h2><p><img src=\"http://img.wqkenqing.ren/typora_img/CleanShot%202022-02-22%20at%2014.04.20@2x.png\" alt=\"CleanShot 2022-02-22 at 14.04.20@2x\"></p>\n<h3 id=\"任务类型\"><a href=\"#任务类型\" class=\"headerlink\" title=\"任务类型\"></a><strong>任务类型</strong></h3><table>\n<thead>\n<tr>\n<th>类型名</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>TCP</td>\n<td align=\"center\">tcp采集</td>\n</tr>\n<tr>\n<td>UDP</td>\n<td align=\"center\">udp采集</td>\n</tr>\n<tr>\n<td>kafka</td>\n<td align=\"center\">kafka采集</td>\n</tr>\n<tr>\n<td>csv、txt</td>\n<td align=\"center\">文本采集</td>\n</tr>\n<tr>\n<td>http</td>\n<td align=\"center\">http采集</td>\n</tr>\n<tr>\n<td>mysql</td>\n<td align=\"center\">mysql数据库采集</td>\n</tr>\n<tr>\n<td>websocket</td>\n<td align=\"center\">websocket采集</td>\n</tr>\n<tr>\n<td>sqlserver</td>\n<td align=\"center\">sqlserver采集</td>\n</tr>\n</tbody></table>\n<h4 id=\"不同类型所需要的参数\"><a href=\"#不同类型所需要的参数\" class=\"headerlink\" title=\"不同类型所需要的参数\"></a>不同类型所需要的参数</h4><table>\n<thead>\n<tr>\n<th align=\"center\">类型</th>\n<th align=\"center\">参数(*是必填)</th>\n<th>补充</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">TCP、UDP</td>\n<td align=\"center\">ip/host(<em>)、port (</em>)、agentName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">kafka</td>\n<td align=\"center\">bootstrap_server、port、topics、consumer_group 、agentName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">csv、txt</td>\n<td align=\"center\">file、agentName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">http</td>\n<td align=\"center\">address、taskName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">msyql</td>\n<td align=\"center\">后续确认、taskName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">websocket</td>\n<td align=\"center\">后续确认、taskName</td>\n<td></td>\n</tr>\n<tr>\n<td align=\"center\">sqlserver</td>\n<td align=\"center\">后续确认、taskName</td>\n<td></td>\n</tr>\n</tbody></table>\n"},{"title":"kafka学习","date":"2021-04-26T13:52:35.000Z","abstract":"kafka high level","_content":"\n[ x ]  Consumer Group里只会被某一个Consumer消费 ,Kafka还允许不同Consumer Group同时消费同一条消息，这一特性可以为消息的多元化处理提供支持。\n<!--more-->\n## kafka 发送模式\n通过producer.type设置,可以设置producer的发送模式,具体参数据有\nproducer.type=false即同步(默认就是同步),设置为true为异步,即以batch形式像broker发送信息.(这里的batch可以设置)\n还有一种oneway.即通过对ack的设置即可实现,ack=0时,即为oneway,只管发,不管是否接收成功.-1则是全部副本接收成功才算成功.\n\n## kakfa消费模式\n1. at last one\n2. at most one\n3. exactly one\n\n\n","source":"_posts/王阁/技术/hexo/kafka/kafka实现.md","raw":"---\ntitle: kafka学习\ndate: \ntags: kafka\nabstract: kafka high level\n---\n\n[ x ]  Consumer Group里只会被某一个Consumer消费 ,Kafka还允许不同Consumer Group同时消费同一条消息，这一特性可以为消息的多元化处理提供支持。\n<!--more-->\n## kafka 发送模式\n通过producer.type设置,可以设置producer的发送模式,具体参数据有\nproducer.type=false即同步(默认就是同步),设置为true为异步,即以batch形式像broker发送信息.(这里的batch可以设置)\n还有一种oneway.即通过对ack的设置即可实现,ack=0时,即为oneway,只管发,不管是否接收成功.-1则是全部副本接收成功才算成功.\n\n## kakfa消费模式\n1. at last one\n2. at most one\n3. exactly one\n\n\n","slug":"王阁/技术/hexo/kafka/kafka实现","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf3002wu6pw8lw5eznj","content":"<p>[ x ]  Consumer Group里只会被某一个Consumer消费 ,Kafka还允许不同Consumer Group同时消费同一条消息，这一特性可以为消息的多元化处理提供支持。</p>\n<a id=\"more\"></a>\n<h2 id=\"kafka-发送模式\"><a href=\"#kafka-发送模式\" class=\"headerlink\" title=\"kafka 发送模式\"></a>kafka 发送模式</h2><p>通过producer.type设置,可以设置producer的发送模式,具体参数据有<br>producer.type=false即同步(默认就是同步),设置为true为异步,即以batch形式像broker发送信息.(这里的batch可以设置)<br>还有一种oneway.即通过对ack的设置即可实现,ack=0时,即为oneway,只管发,不管是否接收成功.-1则是全部副本接收成功才算成功.</p>\n<h2 id=\"kakfa消费模式\"><a href=\"#kakfa消费模式\" class=\"headerlink\" title=\"kakfa消费模式\"></a>kakfa消费模式</h2><ol>\n<li>at last one</li>\n<li>at most one</li>\n<li>exactly one</li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>[ x ]  Consumer Group里只会被某一个Consumer消费 ,Kafka还允许不同Consumer Group同时消费同一条消息，这一特性可以为消息的多元化处理提供支持。</p>","more":"<h2 id=\"kafka-发送模式\"><a href=\"#kafka-发送模式\" class=\"headerlink\" title=\"kafka 发送模式\"></a>kafka 发送模式</h2><p>通过producer.type设置,可以设置producer的发送模式,具体参数据有<br>producer.type=false即同步(默认就是同步),设置为true为异步,即以batch形式像broker发送信息.(这里的batch可以设置)<br>还有一种oneway.即通过对ack的设置即可实现,ack=0时,即为oneway,只管发,不管是否接收成功.-1则是全部副本接收成功才算成功.</p>\n<h2 id=\"kakfa消费模式\"><a href=\"#kakfa消费模式\" class=\"headerlink\" title=\"kakfa消费模式\"></a>kakfa消费模式</h2><ol>\n<li>at last one</li>\n<li>at most one</li>\n<li>exactly one</li>\n</ol>"},{"title":"hadoop高可用模式搭建","date":"2019-05-15T16:00:00.000Z","_content":"\n发现对hadoop的相关版本的组件,进程还有些模糊,借着针对hadoopHA模式搭建的过程,对hadoop\n进行一次细统的回顾.\n\n<!--more-->\n\n# hadoop HA搭建与总结\n\n## 什么是HA\n\nHA即高可用\n\n## HA相关配置\n\n### core-site.xml\n\n基本一致\n\n### hdfs-site.xml\n\n这里有明显差别\nhadoop2.X与hadoop1.X的高可能中的明显差异就是从这里开始的.\n2.x 引入了nameservice. 该nameservice可支持最大两个namenode.\n1.x img 和edits统一放置在namenode上.\n2.x 则通过journalnodes来共享edits日志.\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?>\n<!--\n            Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License. See accompanying LICENSE file.\n-->\n\n<!-- Put site-specific property overrides in this file. -->\n<configuration>\n <!-- 为namenode集群定义一个services name -->\n  <property>\n    <name>dfs.nameservices</name>\n    <value>ns1</value>\n  </property>\n  \n    <!-- nameservice 包含哪些namenode，为各个namenode起名 -->\n    <property>\n      <name>dfs.ha.namenodes.ns1</name>\n      <value>namenode,datanode1</value>\n    </property>\n  \n   <!-- 名为master188的namenode的rpc地址和端口号，rpc用来和datanode通讯 -->\n    <property>\n      <name>dfs.namenode.rpc-address.ns1.namenode</name>\n      <value>namenode:9000</value>\n    </property>\n  \n    <!-- 名为master189的namenode的rpc地址和端口号，rpc用来和datanode通讯 -->\n    <property>\n      <name>dfs.namenode.rpc-address.ns1.datanode1</name>\n      <value>datanode1:9000</value>\n    </property>\n\n  <!--名为master188的namenode的http地址和端口号，用来和web客户端通讯 -->\n  <property>\n    <name>dfs.namenode.http-address.ns1.namenode</name>\n    <value>namenode:50070</value>\n  </property>\n\n  <!-- 名为master189的namenode的http地址和端口号，用来和web客户端通讯 -->\n  <property>\n    <name>dfs.namenode.http-address.ns1.datanode1</name>\n    <value>datanode1:50070</value>\n  </property>\n\n <!-- namenode间用于共享编辑日志的journal节点列表 -->\n  <property>\n    <name>dfs.namenode.shared.edits.dir</name>\n    <value>qjournal://namenode:8485;datanode1:8485;datanode2:8485/ns1</value>\n  </property>\n  \n    <!-- 指定该集群出现故障时，是否自动切换到另一台namenode -->\n    <property>\n      <name>dfs.ha.automatic-failover.enabled.ns1</name>\n      <value>true</value>\n    </property>\n    \n    \n      <!-- journalnode 上用于存放edits日志的目录 -->\n      <property>\n        <name>dfs.journalnode.edits.dir</name>\n        <value>/home/hadoop/hadoop_store/dfs/data/dfs/journalnode</value>\n      </property>\n  \n  <!-- 客户端连接可用状态的NameNode所用的代理类 -->\n    <property>\n      <name>dfs.client.failover.proxy.provider.ns1</name>\n      <value>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</value>\n    </property>\n  \n    <!-- 一旦需要NameNode切换，使用ssh方式进行操作 -->\n    <property>\n      <name>dfs.ha.fencing.methods</name>\n      <value>sshfence</value>\n    </property>\n  \n    <!-- 如果使用ssh进行故障切换，使用ssh通信时用的密钥存储的位置 -->\n    <property>\n      <name>dfs.ha.fencing.ssh.private-key-files</name>\n      <value>/home/hadoop/.ssh/id_rsa</value>\n    </property>\n  \n    <!-- connect-timeout超时时间 -->\n    <property>\n      <name>dfs.ha.fencing.ssh.connect-timeout</name>\n      <value>30000</value>\n    </property>\n       <property>\n                <name>dfs.name.dir</name>\n                <value>/home/hadoop/hadoop_store/dfs/name</value>\n        </property>\n        <property>\n                <name>dfs.data.dir</name>\n                <value>/home/hadoop/hadoop_store/dfs/data</value>\n        </property>\n        <property>\n                <name>dfs.permissions</name>\n                <value>false</value>\n        </property>\n<property>\n\n<name>dfs.replication</name>\n\n<value>3</value>\n\n</property>\n</configuration>\n\n```\n\n### mapreduce-site.xml\n变动不大\n### yarn-site.xml\n\n```xml\n\n<?xml version=\"1.0\"?>\n<!--\n            Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License. See accompanying LICENSE file.\n-->\n<configuration>\n    \n    \n\n       <!-- 启用HA高可用性 -->\n        <property>\n          <name>yarn.resourcemanager.ha.enabled</name>\n          <value>true</value>\n        </property>\n      \n        <!-- 指定resourcemanager的名字 -->\n        <property>\n          <name>yarn.resourcemanager.cluster-id</name>\n          <value>yrc</value>\n        </property>\n      \n        <!-- 使用了2个resourcemanager,分别指定Resourcemanager的地址 -->\n        <property>\n          <name>yarn.resourcemanager.ha.rm-ids</name>\n          <value>rm1,rm2</value>\n        </property>\n        \n        <!-- 指定rm1的地址 -->\n        <property>\n          <name>yarn.resourcemanager.hostname.rm1</name>\n          <value>namenode</value>\n        </property>\n        \n        <!-- 指定rm2的地址  -->\n        <property>\n          <name>yarn.resourcemanager.hostname.rm2</name>\n          <value>datanode1</value>\n        </property>\n        \n        <!-- 指定当前机器master188作为rm1 -->\n        <property>\n          <name>yarn.resourcemanager.ha.id</name>\n          <value>rm1</value>\n        </property>\n        \n        <!-- 指定zookeeper集群机器 -->\n        <property>\n          <name>yarn.resourcemanager.zk-address</name>\n          <value>namenode:2181,datanode1:2181,datanode2:2181</value>\n        </property>\n        \n        <!-- NodeManager上运行的附属服务，默认是mapreduce_shuffle -->\n        <property>\n          <name>yarn.nodemanager.aux-services</name>\n          <value>mapreduce_shuffle</value>\n        </property>\n      \n        <property>\n                <name>yarn.resourcemanager.hostname</name>\n                <value>kuiqwang</value>\n        </property>\n        <property>\n                <name>yarn.nodemanager.aux-services</name>\n                <value>mapreduce_shuffle</value>\n        </property>\n  <property>\n    <name>yarn.log.server.url</name>\n    <value>http://namenode:19888/tmp/logs/hadoop/logs/</value>\n  </property>\n\n                <property>\n                <name>yarn.nodemanager.local-dirs</name>\n                <value>/home/hadoop/hadoop_store/logs/yarn</value>\n        </property>\n           <property>\n                <name>yarn.nodemanager.log-dirs</name>\n                <value>/home/hadoop/hadoop_store/logs/userlogs</value>\n        </property>\n<!--内存,核数大小配置 -->\n\n        <property>\n      <name>yarn.nodemanager.resource.memory-mb</name>\n      <value>4096</value>\n  </property>\n\n  <property>\n      <name>yarn.scheduler.minimum-allocation-mb</name>\n      <value>1024</value>\n  </property>\n  <property>\n      <name>yarn.scheduler.maximum-allocation-mb</name>\n      <value>3072</value>\n  </property>\n  <property>\n      <name>yarn.app.mapreduce.am.resource.mb</name>\n      <value>3072</value>\n  </property>\n  <property>\n      <name>yarn.app.mapreduce.am.command-opts</name>\n      <value>-Xmx3276m</value>\n  </property>\n    <property>\n      <name>yarn.nodemanager.resource.cpu-vcores</name>\n      <value>2</value>\n  </property>\n  <property>\n      <name>yarn.scheduler.maximum-allocation-vcores</name>\n      <value>3</value>\n  </property>\n</configuration>\n\n\n```\n\n### HA过程中主要用到的操作命令\n\n当配置文件完成后,先启动journalnode,以助namenode 和standby node 共享edits文件\nhadoop-daemon.sh\n![](http://img.wqkenqing.ren/urHEX6.png)\n\n然后再进行namdnode格式化,hadoop namenode -format\n进行namenode格式化\n当namenode格式化完成后可以先启动该节点的namenode\nhadoop-daemon.sh start namenode\n然后再在另一namdnode节点执行\nhdfs namenode -bootstrapStandby\n到这可以将之前的journalnode停用,然后start-dfs.sh\n\n因为要用到zookeeper协助同步配置文件与操作日志,所以这里可以先对zookeeper进行hdfs内容的格式化\nhdfs zkfc –formatZK\n然后启动FailOver进程\nhadoop-daemon.sh start zkfc\n![](http://img.wqkenqing.ren/lvuo9N.png)\n至此则是这些进程\n然后启用yarn.\n即\nstart-yarn.sh\n到这里HA过程中用到的一些常用指令大致总结完成\n\n---\n至此 hadoop HA的常规总结完成.后续再补充一些细节,如standy 节点切的,与切换机制.HA背后的运作机制,与效果\n\n\n","source":"_posts/王阁/技术/hexo/hadoop/hadoopHA搭建.md","raw":"---\n\ntitle: hadoop高可用模式搭建\ndate: 2019-05-16\ntags: \n\n---\n\n发现对hadoop的相关版本的组件,进程还有些模糊,借着针对hadoopHA模式搭建的过程,对hadoop\n进行一次细统的回顾.\n\n<!--more-->\n\n# hadoop HA搭建与总结\n\n## 什么是HA\n\nHA即高可用\n\n## HA相关配置\n\n### core-site.xml\n\n基本一致\n\n### hdfs-site.xml\n\n这里有明显差别\nhadoop2.X与hadoop1.X的高可能中的明显差异就是从这里开始的.\n2.x 引入了nameservice. 该nameservice可支持最大两个namenode.\n1.x img 和edits统一放置在namenode上.\n2.x 则通过journalnodes来共享edits日志.\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?>\n<!--\n            Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License. See accompanying LICENSE file.\n-->\n\n<!-- Put site-specific property overrides in this file. -->\n<configuration>\n <!-- 为namenode集群定义一个services name -->\n  <property>\n    <name>dfs.nameservices</name>\n    <value>ns1</value>\n  </property>\n  \n    <!-- nameservice 包含哪些namenode，为各个namenode起名 -->\n    <property>\n      <name>dfs.ha.namenodes.ns1</name>\n      <value>namenode,datanode1</value>\n    </property>\n  \n   <!-- 名为master188的namenode的rpc地址和端口号，rpc用来和datanode通讯 -->\n    <property>\n      <name>dfs.namenode.rpc-address.ns1.namenode</name>\n      <value>namenode:9000</value>\n    </property>\n  \n    <!-- 名为master189的namenode的rpc地址和端口号，rpc用来和datanode通讯 -->\n    <property>\n      <name>dfs.namenode.rpc-address.ns1.datanode1</name>\n      <value>datanode1:9000</value>\n    </property>\n\n  <!--名为master188的namenode的http地址和端口号，用来和web客户端通讯 -->\n  <property>\n    <name>dfs.namenode.http-address.ns1.namenode</name>\n    <value>namenode:50070</value>\n  </property>\n\n  <!-- 名为master189的namenode的http地址和端口号，用来和web客户端通讯 -->\n  <property>\n    <name>dfs.namenode.http-address.ns1.datanode1</name>\n    <value>datanode1:50070</value>\n  </property>\n\n <!-- namenode间用于共享编辑日志的journal节点列表 -->\n  <property>\n    <name>dfs.namenode.shared.edits.dir</name>\n    <value>qjournal://namenode:8485;datanode1:8485;datanode2:8485/ns1</value>\n  </property>\n  \n    <!-- 指定该集群出现故障时，是否自动切换到另一台namenode -->\n    <property>\n      <name>dfs.ha.automatic-failover.enabled.ns1</name>\n      <value>true</value>\n    </property>\n    \n    \n      <!-- journalnode 上用于存放edits日志的目录 -->\n      <property>\n        <name>dfs.journalnode.edits.dir</name>\n        <value>/home/hadoop/hadoop_store/dfs/data/dfs/journalnode</value>\n      </property>\n  \n  <!-- 客户端连接可用状态的NameNode所用的代理类 -->\n    <property>\n      <name>dfs.client.failover.proxy.provider.ns1</name>\n      <value>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</value>\n    </property>\n  \n    <!-- 一旦需要NameNode切换，使用ssh方式进行操作 -->\n    <property>\n      <name>dfs.ha.fencing.methods</name>\n      <value>sshfence</value>\n    </property>\n  \n    <!-- 如果使用ssh进行故障切换，使用ssh通信时用的密钥存储的位置 -->\n    <property>\n      <name>dfs.ha.fencing.ssh.private-key-files</name>\n      <value>/home/hadoop/.ssh/id_rsa</value>\n    </property>\n  \n    <!-- connect-timeout超时时间 -->\n    <property>\n      <name>dfs.ha.fencing.ssh.connect-timeout</name>\n      <value>30000</value>\n    </property>\n       <property>\n                <name>dfs.name.dir</name>\n                <value>/home/hadoop/hadoop_store/dfs/name</value>\n        </property>\n        <property>\n                <name>dfs.data.dir</name>\n                <value>/home/hadoop/hadoop_store/dfs/data</value>\n        </property>\n        <property>\n                <name>dfs.permissions</name>\n                <value>false</value>\n        </property>\n<property>\n\n<name>dfs.replication</name>\n\n<value>3</value>\n\n</property>\n</configuration>\n\n```\n\n### mapreduce-site.xml\n变动不大\n### yarn-site.xml\n\n```xml\n\n<?xml version=\"1.0\"?>\n<!--\n            Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License. See accompanying LICENSE file.\n-->\n<configuration>\n    \n    \n\n       <!-- 启用HA高可用性 -->\n        <property>\n          <name>yarn.resourcemanager.ha.enabled</name>\n          <value>true</value>\n        </property>\n      \n        <!-- 指定resourcemanager的名字 -->\n        <property>\n          <name>yarn.resourcemanager.cluster-id</name>\n          <value>yrc</value>\n        </property>\n      \n        <!-- 使用了2个resourcemanager,分别指定Resourcemanager的地址 -->\n        <property>\n          <name>yarn.resourcemanager.ha.rm-ids</name>\n          <value>rm1,rm2</value>\n        </property>\n        \n        <!-- 指定rm1的地址 -->\n        <property>\n          <name>yarn.resourcemanager.hostname.rm1</name>\n          <value>namenode</value>\n        </property>\n        \n        <!-- 指定rm2的地址  -->\n        <property>\n          <name>yarn.resourcemanager.hostname.rm2</name>\n          <value>datanode1</value>\n        </property>\n        \n        <!-- 指定当前机器master188作为rm1 -->\n        <property>\n          <name>yarn.resourcemanager.ha.id</name>\n          <value>rm1</value>\n        </property>\n        \n        <!-- 指定zookeeper集群机器 -->\n        <property>\n          <name>yarn.resourcemanager.zk-address</name>\n          <value>namenode:2181,datanode1:2181,datanode2:2181</value>\n        </property>\n        \n        <!-- NodeManager上运行的附属服务，默认是mapreduce_shuffle -->\n        <property>\n          <name>yarn.nodemanager.aux-services</name>\n          <value>mapreduce_shuffle</value>\n        </property>\n      \n        <property>\n                <name>yarn.resourcemanager.hostname</name>\n                <value>kuiqwang</value>\n        </property>\n        <property>\n                <name>yarn.nodemanager.aux-services</name>\n                <value>mapreduce_shuffle</value>\n        </property>\n  <property>\n    <name>yarn.log.server.url</name>\n    <value>http://namenode:19888/tmp/logs/hadoop/logs/</value>\n  </property>\n\n                <property>\n                <name>yarn.nodemanager.local-dirs</name>\n                <value>/home/hadoop/hadoop_store/logs/yarn</value>\n        </property>\n           <property>\n                <name>yarn.nodemanager.log-dirs</name>\n                <value>/home/hadoop/hadoop_store/logs/userlogs</value>\n        </property>\n<!--内存,核数大小配置 -->\n\n        <property>\n      <name>yarn.nodemanager.resource.memory-mb</name>\n      <value>4096</value>\n  </property>\n\n  <property>\n      <name>yarn.scheduler.minimum-allocation-mb</name>\n      <value>1024</value>\n  </property>\n  <property>\n      <name>yarn.scheduler.maximum-allocation-mb</name>\n      <value>3072</value>\n  </property>\n  <property>\n      <name>yarn.app.mapreduce.am.resource.mb</name>\n      <value>3072</value>\n  </property>\n  <property>\n      <name>yarn.app.mapreduce.am.command-opts</name>\n      <value>-Xmx3276m</value>\n  </property>\n    <property>\n      <name>yarn.nodemanager.resource.cpu-vcores</name>\n      <value>2</value>\n  </property>\n  <property>\n      <name>yarn.scheduler.maximum-allocation-vcores</name>\n      <value>3</value>\n  </property>\n</configuration>\n\n\n```\n\n### HA过程中主要用到的操作命令\n\n当配置文件完成后,先启动journalnode,以助namenode 和standby node 共享edits文件\nhadoop-daemon.sh\n![](http://img.wqkenqing.ren/urHEX6.png)\n\n然后再进行namdnode格式化,hadoop namenode -format\n进行namenode格式化\n当namenode格式化完成后可以先启动该节点的namenode\nhadoop-daemon.sh start namenode\n然后再在另一namdnode节点执行\nhdfs namenode -bootstrapStandby\n到这可以将之前的journalnode停用,然后start-dfs.sh\n\n因为要用到zookeeper协助同步配置文件与操作日志,所以这里可以先对zookeeper进行hdfs内容的格式化\nhdfs zkfc –formatZK\n然后启动FailOver进程\nhadoop-daemon.sh start zkfc\n![](http://img.wqkenqing.ren/lvuo9N.png)\n至此则是这些进程\n然后启用yarn.\n即\nstart-yarn.sh\n到这里HA过程中用到的一些常用指令大致总结完成\n\n---\n至此 hadoop HA的常规总结完成.后续再补充一些细节,如standy 节点切的,与切换机制.HA背后的运作机制,与效果\n\n\n","slug":"王阁/技术/hexo/hadoop/hadoopHA搭建","published":1,"updated":"2023-02-23T02:51:20.904Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf3002yu6pwgux064mx","content":"<p>发现对hadoop的相关版本的组件,进程还有些模糊,借着针对hadoopHA模式搭建的过程,对hadoop<br>进行一次细统的回顾.</p>\n<a id=\"more\"></a>\n\n<h1 id=\"hadoop-HA搭建与总结\"><a href=\"#hadoop-HA搭建与总结\" class=\"headerlink\" title=\"hadoop HA搭建与总结\"></a>hadoop HA搭建与总结</h1><h2 id=\"什么是HA\"><a href=\"#什么是HA\" class=\"headerlink\" title=\"什么是HA\"></a>什么是HA</h2><p>HA即高可用</p>\n<h2 id=\"HA相关配置\"><a href=\"#HA相关配置\" class=\"headerlink\" title=\"HA相关配置\"></a>HA相关配置</h2><h3 id=\"core-site-xml\"><a href=\"#core-site-xml\" class=\"headerlink\" title=\"core-site.xml\"></a>core-site.xml</h3><p>基本一致</p>\n<h3 id=\"hdfs-site-xml\"><a href=\"#hdfs-site-xml\" class=\"headerlink\" title=\"hdfs-site.xml\"></a>hdfs-site.xml</h3><p>这里有明显差别<br>hadoop2.X与hadoop1.X的高可能中的明显差异就是从这里开始的.<br>2.x 引入了nameservice. 该nameservice可支持最大两个namenode.<br>1.x img 和edits统一放置在namenode上.<br>2.x 则通过journalnodes来共享edits日志.</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">            Licensed under the Apache License, Version 2.0 (the \"License\");</span></span><br><span class=\"line\"><span class=\"comment\">  you may not use this file except in compliance with the License.</span></span><br><span class=\"line\"><span class=\"comment\">  You may obtain a copy of the License at</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class=\"line\"><span class=\"comment\">  distributed under the License is distributed on an \"AS IS\" BASIS,</span></span><br><span class=\"line\"><span class=\"comment\">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class=\"line\"><span class=\"comment\">  See the License for the specific language governing permissions and</span></span><br><span class=\"line\"><span class=\"comment\">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"> <span class=\"comment\">&lt;!-- 为namenode集群定义一个services name --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.nameservices<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>ns1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- nameservice 包含哪些namenode，为各个namenode起名 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.ha.namenodes.ns1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>namenode,datanode1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"comment\">&lt;!-- 名为master188的namenode的rpc地址和端口号，rpc用来和datanode通讯 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.rpc-address.ns1.namenode<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>namenode:9000<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 名为master189的namenode的rpc地址和端口号，rpc用来和datanode通讯 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.rpc-address.ns1.datanode1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>datanode1:9000<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--名为master188的namenode的http地址和端口号，用来和web客户端通讯 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.http-address.ns1.namenode<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>namenode:50070<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 名为master189的namenode的http地址和端口号，用来和web客户端通讯 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.http-address.ns1.datanode1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>datanode1:50070<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">&lt;!-- namenode间用于共享编辑日志的journal节点列表 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.shared.edits.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>qjournal://namenode:8485;datanode1:8485;datanode2:8485/ns1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 指定该集群出现故障时，是否自动切换到另一台namenode --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.ha.automatic-failover.enabled.ns1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">      <span class=\"comment\">&lt;!-- journalnode 上用于存放edits日志的目录 --&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.journalnode.edits.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop_store/dfs/data/dfs/journalnode<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 客户端连接可用状态的NameNode所用的代理类 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.client.failover.proxy.provider.ns1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 一旦需要NameNode切换，使用ssh方式进行操作 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.ha.fencing.methods<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>sshfence<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 如果使用ssh进行故障切换，使用ssh通信时用的密钥存储的位置 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.ha.fencing.ssh.private-key-files<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/.ssh/id_rsa<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- connect-timeout超时时间 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.ha.fencing.ssh.connect-timeout<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>30000<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.name.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop_store/dfs/name<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.data.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop_store/dfs/data<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.permissions<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.replication<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"mapreduce-site-xml\"><a href=\"#mapreduce-site-xml\" class=\"headerlink\" title=\"mapreduce-site.xml\"></a>mapreduce-site.xml</h3><p>变动不大</p>\n<h3 id=\"yarn-site-xml\"><a href=\"#yarn-site-xml\" class=\"headerlink\" title=\"yarn-site.xml\"></a>yarn-site.xml</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\"?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">            Licensed under the Apache License, Version 2.0 (the \"License\");</span></span><br><span class=\"line\"><span class=\"comment\">  you may not use this file except in compliance with the License.</span></span><br><span class=\"line\"><span class=\"comment\">  You may obtain a copy of the License at</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class=\"line\"><span class=\"comment\">  distributed under the License is distributed on an \"AS IS\" BASIS,</span></span><br><span class=\"line\"><span class=\"comment\">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class=\"line\"><span class=\"comment\">  See the License for the specific language governing permissions and</span></span><br><span class=\"line\"><span class=\"comment\">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">&lt;!-- 启用HA高可用性 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.ha.enabled<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定resourcemanager的名字 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.cluster-id<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>yrc<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 使用了2个resourcemanager,分别指定Resourcemanager的地址 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.ha.rm-ids<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>rm1,rm2<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定rm1的地址 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.hostname.rm1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>namenode<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定rm2的地址  --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.hostname.rm2<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>datanode1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定当前机器master188作为rm1 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.ha.id<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>rm1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定zookeeper集群机器 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.zk-address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>namenode:2181,datanode1:2181,datanode2:2181<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- NodeManager上运行的附属服务，默认是mapreduce_shuffle --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.aux-services<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>mapreduce_shuffle<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.hostname<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>kuiqwang<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.aux-services<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>mapreduce_shuffle<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.log.server.url<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>http://namenode:19888/tmp/logs/hadoop/logs/<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.local-dirs<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop_store/logs/yarn<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.log-dirs<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop_store/logs/userlogs<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--内存,核数大小配置 --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.resource.memory-mb<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>4096<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.scheduler.minimum-allocation-mb<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>1024<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.scheduler.maximum-allocation-mb<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>3072<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.app.mapreduce.am.resource.mb<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>3072<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.app.mapreduce.am.command-opts<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>-Xmx3276m<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.resource.cpu-vcores<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.scheduler.maximum-allocation-vcores<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HA过程中主要用到的操作命令\"><a href=\"#HA过程中主要用到的操作命令\" class=\"headerlink\" title=\"HA过程中主要用到的操作命令\"></a>HA过程中主要用到的操作命令</h3><p>当配置文件完成后,先启动journalnode,以助namenode 和standby node 共享edits文件<br>hadoop-daemon.sh<br><img src=\"http://img.wqkenqing.ren/urHEX6.png\" alt=\"\"></p>\n<p>然后再进行namdnode格式化,hadoop namenode -format<br>进行namenode格式化<br>当namenode格式化完成后可以先启动该节点的namenode<br>hadoop-daemon.sh start namenode<br>然后再在另一namdnode节点执行<br>hdfs namenode -bootstrapStandby<br>到这可以将之前的journalnode停用,然后start-dfs.sh</p>\n<p>因为要用到zookeeper协助同步配置文件与操作日志,所以这里可以先对zookeeper进行hdfs内容的格式化<br>hdfs zkfc –formatZK<br>然后启动FailOver进程<br>hadoop-daemon.sh start zkfc<br><img src=\"http://img.wqkenqing.ren/lvuo9N.png\" alt=\"\"><br>至此则是这些进程<br>然后启用yarn.<br>即<br>start-yarn.sh<br>到这里HA过程中用到的一些常用指令大致总结完成</p>\n<hr>\n<p>至此 hadoop HA的常规总结完成.后续再补充一些细节,如standy 节点切的,与切换机制.HA背后的运作机制,与效果</p>\n","site":{"data":{}},"excerpt":"<p>发现对hadoop的相关版本的组件,进程还有些模糊,借着针对hadoopHA模式搭建的过程,对hadoop<br>进行一次细统的回顾.</p>","more":"<h1 id=\"hadoop-HA搭建与总结\"><a href=\"#hadoop-HA搭建与总结\" class=\"headerlink\" title=\"hadoop HA搭建与总结\"></a>hadoop HA搭建与总结</h1><h2 id=\"什么是HA\"><a href=\"#什么是HA\" class=\"headerlink\" title=\"什么是HA\"></a>什么是HA</h2><p>HA即高可用</p>\n<h2 id=\"HA相关配置\"><a href=\"#HA相关配置\" class=\"headerlink\" title=\"HA相关配置\"></a>HA相关配置</h2><h3 id=\"core-site-xml\"><a href=\"#core-site-xml\" class=\"headerlink\" title=\"core-site.xml\"></a>core-site.xml</h3><p>基本一致</p>\n<h3 id=\"hdfs-site-xml\"><a href=\"#hdfs-site-xml\" class=\"headerlink\" title=\"hdfs-site.xml\"></a>hdfs-site.xml</h3><p>这里有明显差别<br>hadoop2.X与hadoop1.X的高可能中的明显差异就是从这里开始的.<br>2.x 引入了nameservice. 该nameservice可支持最大两个namenode.<br>1.x img 和edits统一放置在namenode上.<br>2.x 则通过journalnodes来共享edits日志.</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">            Licensed under the Apache License, Version 2.0 (the \"License\");</span></span><br><span class=\"line\"><span class=\"comment\">  you may not use this file except in compliance with the License.</span></span><br><span class=\"line\"><span class=\"comment\">  You may obtain a copy of the License at</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class=\"line\"><span class=\"comment\">  distributed under the License is distributed on an \"AS IS\" BASIS,</span></span><br><span class=\"line\"><span class=\"comment\">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class=\"line\"><span class=\"comment\">  See the License for the specific language governing permissions and</span></span><br><span class=\"line\"><span class=\"comment\">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"> <span class=\"comment\">&lt;!-- 为namenode集群定义一个services name --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.nameservices<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>ns1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- nameservice 包含哪些namenode，为各个namenode起名 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.ha.namenodes.ns1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>namenode,datanode1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"comment\">&lt;!-- 名为master188的namenode的rpc地址和端口号，rpc用来和datanode通讯 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.rpc-address.ns1.namenode<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>namenode:9000<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 名为master189的namenode的rpc地址和端口号，rpc用来和datanode通讯 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.rpc-address.ns1.datanode1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>datanode1:9000<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--名为master188的namenode的http地址和端口号，用来和web客户端通讯 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.http-address.ns1.namenode<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>namenode:50070<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 名为master189的namenode的http地址和端口号，用来和web客户端通讯 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.http-address.ns1.datanode1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>datanode1:50070<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">&lt;!-- namenode间用于共享编辑日志的journal节点列表 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.shared.edits.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>qjournal://namenode:8485;datanode1:8485;datanode2:8485/ns1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 指定该集群出现故障时，是否自动切换到另一台namenode --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.ha.automatic-failover.enabled.ns1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">      <span class=\"comment\">&lt;!-- journalnode 上用于存放edits日志的目录 --&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.journalnode.edits.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop_store/dfs/data/dfs/journalnode<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 客户端连接可用状态的NameNode所用的代理类 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.client.failover.proxy.provider.ns1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 一旦需要NameNode切换，使用ssh方式进行操作 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.ha.fencing.methods<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>sshfence<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 如果使用ssh进行故障切换，使用ssh通信时用的密钥存储的位置 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.ha.fencing.ssh.private-key-files<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/.ssh/id_rsa<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- connect-timeout超时时间 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.ha.fencing.ssh.connect-timeout<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>30000<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.name.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop_store/dfs/name<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.data.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop_store/dfs/data<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.permissions<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>false<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.replication<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"mapreduce-site-xml\"><a href=\"#mapreduce-site-xml\" class=\"headerlink\" title=\"mapreduce-site.xml\"></a>mapreduce-site.xml</h3><p>变动不大</p>\n<h3 id=\"yarn-site-xml\"><a href=\"#yarn-site-xml\" class=\"headerlink\" title=\"yarn-site.xml\"></a>yarn-site.xml</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\"?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">            Licensed under the Apache License, Version 2.0 (the \"License\");</span></span><br><span class=\"line\"><span class=\"comment\">  you may not use this file except in compliance with the License.</span></span><br><span class=\"line\"><span class=\"comment\">  You may obtain a copy of the License at</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class=\"line\"><span class=\"comment\">  distributed under the License is distributed on an \"AS IS\" BASIS,</span></span><br><span class=\"line\"><span class=\"comment\">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class=\"line\"><span class=\"comment\">  See the License for the specific language governing permissions and</span></span><br><span class=\"line\"><span class=\"comment\">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">&lt;!-- 启用HA高可用性 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.ha.enabled<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定resourcemanager的名字 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.cluster-id<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>yrc<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 使用了2个resourcemanager,分别指定Resourcemanager的地址 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.ha.rm-ids<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>rm1,rm2<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定rm1的地址 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.hostname.rm1<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>namenode<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定rm2的地址  --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.hostname.rm2<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>datanode1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定当前机器master188作为rm1 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.ha.id<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>rm1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定zookeeper集群机器 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.zk-address<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>namenode:2181,datanode1:2181,datanode2:2181<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- NodeManager上运行的附属服务，默认是mapreduce_shuffle --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.aux-services<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>mapreduce_shuffle<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.resourcemanager.hostname<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>kuiqwang<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.aux-services<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>mapreduce_shuffle<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.log.server.url<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>http://namenode:19888/tmp/logs/hadoop/logs/<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.local-dirs<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop_store/logs/yarn<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.log-dirs<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/home/hadoop/hadoop_store/logs/userlogs<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--内存,核数大小配置 --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.resource.memory-mb<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>4096<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.scheduler.minimum-allocation-mb<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>1024<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.scheduler.maximum-allocation-mb<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>3072<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.app.mapreduce.am.resource.mb<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>3072<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.app.mapreduce.am.command-opts<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>-Xmx3276m<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.resource.cpu-vcores<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.scheduler.maximum-allocation-vcores<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HA过程中主要用到的操作命令\"><a href=\"#HA过程中主要用到的操作命令\" class=\"headerlink\" title=\"HA过程中主要用到的操作命令\"></a>HA过程中主要用到的操作命令</h3><p>当配置文件完成后,先启动journalnode,以助namenode 和standby node 共享edits文件<br>hadoop-daemon.sh<br><img src=\"http://img.wqkenqing.ren/urHEX6.png\" alt=\"\"></p>\n<p>然后再进行namdnode格式化,hadoop namenode -format<br>进行namenode格式化<br>当namenode格式化完成后可以先启动该节点的namenode<br>hadoop-daemon.sh start namenode<br>然后再在另一namdnode节点执行<br>hdfs namenode -bootstrapStandby<br>到这可以将之前的journalnode停用,然后start-dfs.sh</p>\n<p>因为要用到zookeeper协助同步配置文件与操作日志,所以这里可以先对zookeeper进行hdfs内容的格式化<br>hdfs zkfc –formatZK<br>然后启动FailOver进程<br>hadoop-daemon.sh start zkfc<br><img src=\"http://img.wqkenqing.ren/lvuo9N.png\" alt=\"\"><br>至此则是这些进程<br>然后启用yarn.<br>即<br>start-yarn.sh<br>到这里HA过程中用到的一些常用指令大致总结完成</p>\n<hr>\n<p>至此 hadoop HA的常规总结完成.后续再补充一些细节,如standy 节点切的,与切换机制.HA背后的运作机制,与效果</p>"},{"title":"Lambda&Stream.md","abstract":"Lambda积累","_content":"\n# Lambda&Stream积累\n\n<!-- more -->\n## Lambda\nLambda主要是一个类语法长糖,尽量为java引入函数编程等实现,细节后续再补充\n\n## Stream\njava8提拱的新特性之一就有stream.stream主要是针对集合的处理类.提供了一系列集合处理方式.\n配合使用lambda写出简介优美的代码\n\n### Stream的使用\n\n通过如\n``` java\n\nList<Integer> list = new ArrayList<>();\nlist.stream();//即可以开启串行流;\nlist.parallelStream().filter(a -> {\n            return a > 20;\n        });//开启并行流\n```\n串行流即内部单线程顺序执行,并行则是启用多线程执行.\n后者并不一定效率就比前者高.因为并行执行启用分配线程资源时同样要消耗时间和资源,在一定量级下,前者的执行效率一度要高过后者.        \n\n我这里对三种对集合的处理形式的比较,可以简单参考一下\n1. stream 串行流\n2. parallelStream 并行流\n3. 常规循环式\n\n``` java\n\n  List<Integer> list = new ArrayList<>();\n        for (int i = 0; i < 100000; i++) {\n            list.add(getRandomNum());\n        }\n\n        DateUtil.setBegin();\n        list.stream().filter(a -> {\n            return a > 20;\n        });\n\n        DateUtil.setStop();\n        System.out.println(\"串行耗时\"+DateUtil.calCostTime());\n\n        DateUtil.setBegin();\n        list.parallelStream().filter(a -> {\n            return a > 20;\n        });\n        DateUtil.setStop();\n        System.out.println(\"并行耗时\"+DateUtil.calCostTime());\n        int count = 0;\n\n\n        DateUtil.setBegin();\n        for (int l : list) {\n            if (l > 20) {\n                count++;\n            }\n        }\n        DateUtil.setStop();\n        System.out.println(\"循环耗时\"+DateUtil.calCostTime());\n\n```\n经由相当量次的测试后,我觉得如果要对集合中的数据进行遍历操作,根据量级的不同,\n建议低量级还是采用普通循环,量级特别大,可考虑用并行流.书写方便,又不是大批量数据处理操作\n可以直接采用串行流\n\n### Stream的操作分类\n1. Intermediate\n2. Terminal\n3. Short-circuiting\n","source":"_posts/王阁/技术/hexo/old/Lamda积累.md","raw":"---\ntitle: Lambda&Stream.md\ntags: 日常总结\nabstract: Lambda积累\n---\n\n# Lambda&Stream积累\n\n<!-- more -->\n## Lambda\nLambda主要是一个类语法长糖,尽量为java引入函数编程等实现,细节后续再补充\n\n## Stream\njava8提拱的新特性之一就有stream.stream主要是针对集合的处理类.提供了一系列集合处理方式.\n配合使用lambda写出简介优美的代码\n\n### Stream的使用\n\n通过如\n``` java\n\nList<Integer> list = new ArrayList<>();\nlist.stream();//即可以开启串行流;\nlist.parallelStream().filter(a -> {\n            return a > 20;\n        });//开启并行流\n```\n串行流即内部单线程顺序执行,并行则是启用多线程执行.\n后者并不一定效率就比前者高.因为并行执行启用分配线程资源时同样要消耗时间和资源,在一定量级下,前者的执行效率一度要高过后者.        \n\n我这里对三种对集合的处理形式的比较,可以简单参考一下\n1. stream 串行流\n2. parallelStream 并行流\n3. 常规循环式\n\n``` java\n\n  List<Integer> list = new ArrayList<>();\n        for (int i = 0; i < 100000; i++) {\n            list.add(getRandomNum());\n        }\n\n        DateUtil.setBegin();\n        list.stream().filter(a -> {\n            return a > 20;\n        });\n\n        DateUtil.setStop();\n        System.out.println(\"串行耗时\"+DateUtil.calCostTime());\n\n        DateUtil.setBegin();\n        list.parallelStream().filter(a -> {\n            return a > 20;\n        });\n        DateUtil.setStop();\n        System.out.println(\"并行耗时\"+DateUtil.calCostTime());\n        int count = 0;\n\n\n        DateUtil.setBegin();\n        for (int l : list) {\n            if (l > 20) {\n                count++;\n            }\n        }\n        DateUtil.setStop();\n        System.out.println(\"循环耗时\"+DateUtil.calCostTime());\n\n```\n经由相当量次的测试后,我觉得如果要对集合中的数据进行遍历操作,根据量级的不同,\n建议低量级还是采用普通循环,量级特别大,可考虑用并行流.书写方便,又不是大批量数据处理操作\n可以直接采用串行流\n\n### Stream的操作分类\n1. Intermediate\n2. Terminal\n3. Short-circuiting\n","slug":"王阁/技术/hexo/old/Lamda积累","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf4002zu6pw5rgx9811","content":"<h1 id=\"Lambda-amp-Stream积累\"><a href=\"#Lambda-amp-Stream积累\" class=\"headerlink\" title=\"Lambda&amp;Stream积累\"></a>Lambda&amp;Stream积累</h1><a id=\"more\"></a>\n<h2 id=\"Lambda\"><a href=\"#Lambda\" class=\"headerlink\" title=\"Lambda\"></a>Lambda</h2><p>Lambda主要是一个类语法长糖,尽量为java引入函数编程等实现,细节后续再补充</p>\n<h2 id=\"Stream\"><a href=\"#Stream\" class=\"headerlink\" title=\"Stream\"></a>Stream</h2><p>java8提拱的新特性之一就有stream.stream主要是针对集合的处理类.提供了一系列集合处理方式.<br>配合使用lambda写出简介优美的代码</p>\n<h3 id=\"Stream的使用\"><a href=\"#Stream的使用\" class=\"headerlink\" title=\"Stream的使用\"></a>Stream的使用</h3><p>通过如</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">List&lt;Integer&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">list.stream();<span class=\"comment\">//即可以开启串行流;</span></span><br><span class=\"line\">list.parallelStream().filter(a -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> a &gt; <span class=\"number\">20</span>;</span><br><span class=\"line\">        &#125;);<span class=\"comment\">//开启并行流</span></span><br></pre></td></tr></table></figure>\n<p>串行流即内部单线程顺序执行,并行则是启用多线程执行.<br>后者并不一定效率就比前者高.因为并行执行启用分配线程资源时同样要消耗时间和资源,在一定量级下,前者的执行效率一度要高过后者.        </p>\n<p>我这里对三种对集合的处理形式的比较,可以简单参考一下</p>\n<ol>\n<li>stream 串行流</li>\n<li>parallelStream 并行流</li>\n<li>常规循环式</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">List&lt;Integer&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</span><br><span class=\"line\">          list.add(getRandomNum());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      DateUtil.setBegin();</span><br><span class=\"line\">      list.stream().filter(a -&gt; &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> a &gt; <span class=\"number\">20</span>;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">      DateUtil.setStop();</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"串行耗时\"</span>+DateUtil.calCostTime());</span><br><span class=\"line\"></span><br><span class=\"line\">      DateUtil.setBegin();</span><br><span class=\"line\">      list.parallelStream().filter(a -&gt; &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> a &gt; <span class=\"number\">20</span>;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      DateUtil.setStop();</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"并行耗时\"</span>+DateUtil.calCostTime());</span><br><span class=\"line\">      <span class=\"keyword\">int</span> count = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">      DateUtil.setBegin();</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> l : list) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (l &gt; <span class=\"number\">20</span>) &#123;</span><br><span class=\"line\">              count++;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      DateUtil.setStop();</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"循环耗时\"</span>+DateUtil.calCostTime());</span><br></pre></td></tr></table></figure>\n<p>经由相当量次的测试后,我觉得如果要对集合中的数据进行遍历操作,根据量级的不同,<br>建议低量级还是采用普通循环,量级特别大,可考虑用并行流.书写方便,又不是大批量数据处理操作<br>可以直接采用串行流</p>\n<h3 id=\"Stream的操作分类\"><a href=\"#Stream的操作分类\" class=\"headerlink\" title=\"Stream的操作分类\"></a>Stream的操作分类</h3><ol>\n<li>Intermediate</li>\n<li>Terminal</li>\n<li>Short-circuiting</li>\n</ol>\n","site":{"data":{}},"excerpt":"<h1 id=\"Lambda-amp-Stream积累\"><a href=\"#Lambda-amp-Stream积累\" class=\"headerlink\" title=\"Lambda&amp;Stream积累\"></a>Lambda&amp;Stream积累</h1>","more":"<h2 id=\"Lambda\"><a href=\"#Lambda\" class=\"headerlink\" title=\"Lambda\"></a>Lambda</h2><p>Lambda主要是一个类语法长糖,尽量为java引入函数编程等实现,细节后续再补充</p>\n<h2 id=\"Stream\"><a href=\"#Stream\" class=\"headerlink\" title=\"Stream\"></a>Stream</h2><p>java8提拱的新特性之一就有stream.stream主要是针对集合的处理类.提供了一系列集合处理方式.<br>配合使用lambda写出简介优美的代码</p>\n<h3 id=\"Stream的使用\"><a href=\"#Stream的使用\" class=\"headerlink\" title=\"Stream的使用\"></a>Stream的使用</h3><p>通过如</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">List&lt;Integer&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">list.stream();<span class=\"comment\">//即可以开启串行流;</span></span><br><span class=\"line\">list.parallelStream().filter(a -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> a &gt; <span class=\"number\">20</span>;</span><br><span class=\"line\">        &#125;);<span class=\"comment\">//开启并行流</span></span><br></pre></td></tr></table></figure>\n<p>串行流即内部单线程顺序执行,并行则是启用多线程执行.<br>后者并不一定效率就比前者高.因为并行执行启用分配线程资源时同样要消耗时间和资源,在一定量级下,前者的执行效率一度要高过后者.        </p>\n<p>我这里对三种对集合的处理形式的比较,可以简单参考一下</p>\n<ol>\n<li>stream 串行流</li>\n<li>parallelStream 并行流</li>\n<li>常规循环式</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">List&lt;Integer&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100000</span>; i++) &#123;</span><br><span class=\"line\">          list.add(getRandomNum());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      DateUtil.setBegin();</span><br><span class=\"line\">      list.stream().filter(a -&gt; &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> a &gt; <span class=\"number\">20</span>;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">      DateUtil.setStop();</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"串行耗时\"</span>+DateUtil.calCostTime());</span><br><span class=\"line\"></span><br><span class=\"line\">      DateUtil.setBegin();</span><br><span class=\"line\">      list.parallelStream().filter(a -&gt; &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> a &gt; <span class=\"number\">20</span>;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      DateUtil.setStop();</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"并行耗时\"</span>+DateUtil.calCostTime());</span><br><span class=\"line\">      <span class=\"keyword\">int</span> count = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">      DateUtil.setBegin();</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> l : list) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (l &gt; <span class=\"number\">20</span>) &#123;</span><br><span class=\"line\">              count++;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      DateUtil.setStop();</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"循环耗时\"</span>+DateUtil.calCostTime());</span><br></pre></td></tr></table></figure>\n<p>经由相当量次的测试后,我觉得如果要对集合中的数据进行遍历操作,根据量级的不同,<br>建议低量级还是采用普通循环,量级特别大,可考虑用并行流.书写方便,又不是大批量数据处理操作<br>可以直接采用串行流</p>\n<h3 id=\"Stream的操作分类\"><a href=\"#Stream的操作分类\" class=\"headerlink\" title=\"Stream的操作分类\"></a>Stream的操作分类</h3><ol>\n<li>Intermediate</li>\n<li>Terminal</li>\n<li>Short-circuiting</li>\n</ol>"},{"title":"Yarn配置细节","date":"2019-06-12T16:00:00.000Z","_content":"此处简介\n\n<!--more-->\n# Yarn配置细节\n##内存,核数设置\n<!-- more -->\n\n```\n\n        <property>\n      <name>yarn.nodemanager.resource.memory-mb</name>\n      <value>4096</value>\n  </property>\n\n  <property>\n      <name>yarn.scheduler.minimum-allocation-mb</name>\n      <value>1024</value>\n  </property>\n  <property>\n      <name>yarn.scheduler.maximum-allocation-mb</name>\n      <value>3072</value>\n  </property>\n  <!--该配置用于配置任务请求时的资源. -->\n  <property>\n      <name>yarn.app.mapreduce.am.resource.mb</name>\n      <value>2048</value>\n  </property>\n\n  <property>\n      <name>yarn.app.mapreduce.am.command-opts</name>\n      <value>-Xmx3276m</value>\n  </property>\n    <property>\n      <name>yarn.nodemanager.resource.cpu-vcores</name>\n      <value>2</value>\n  </property>\n  <property>\n      <name>yarn.scheduler.maximum-allocation-vcores</name>\n      <value>3</value>\n  </property>\n\n\n  ```\n  ","source":"_posts/王阁/技术/hexo/old/Yarn配置.md","raw":"---\n\ntitle: Yarn配置细节\ndate: 2019-06-13\ntags: \n\n---\n此处简介\n\n<!--more-->\n# Yarn配置细节\n##内存,核数设置\n<!-- more -->\n\n```\n\n        <property>\n      <name>yarn.nodemanager.resource.memory-mb</name>\n      <value>4096</value>\n  </property>\n\n  <property>\n      <name>yarn.scheduler.minimum-allocation-mb</name>\n      <value>1024</value>\n  </property>\n  <property>\n      <name>yarn.scheduler.maximum-allocation-mb</name>\n      <value>3072</value>\n  </property>\n  <!--该配置用于配置任务请求时的资源. -->\n  <property>\n      <name>yarn.app.mapreduce.am.resource.mb</name>\n      <value>2048</value>\n  </property>\n\n  <property>\n      <name>yarn.app.mapreduce.am.command-opts</name>\n      <value>-Xmx3276m</value>\n  </property>\n    <property>\n      <name>yarn.nodemanager.resource.cpu-vcores</name>\n      <value>2</value>\n  </property>\n  <property>\n      <name>yarn.scheduler.maximum-allocation-vcores</name>\n      <value>3</value>\n  </property>\n\n\n  ```\n  ","slug":"王阁/技术/hexo/old/Yarn配置","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf40031u6pw18v71ba9","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n<h1 id=\"Yarn配置细节\"><a href=\"#Yarn配置细节\" class=\"headerlink\" title=\"Yarn配置细节\"></a>Yarn配置细节</h1><p>##内存,核数设置</p>\n<!-- more -->\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">      &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;4096&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;1024&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.scheduler.maximum-allocation-mb&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;3072&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;!--该配置用于配置任务请求时的资源. --&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.app.mapreduce.am.resource.mb&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;2048&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.app.mapreduce.am.command-opts&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;-Xmx3276m&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.nodemanager.resource.cpu-vcores&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;2&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.scheduler.maximum-allocation-vcores&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;3&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h1 id=\"Yarn配置细节\"><a href=\"#Yarn配置细节\" class=\"headerlink\" title=\"Yarn配置细节\"></a>Yarn配置细节</h1><p>##内存,核数设置</p>\n<!-- more -->\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">      &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;4096&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;1024&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.scheduler.maximum-allocation-mb&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;3072&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;!--该配置用于配置任务请求时的资源. --&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.app.mapreduce.am.resource.mb&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;2048&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.app.mapreduce.am.command-opts&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;-Xmx3276m&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.nodemanager.resource.cpu-vcores&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;2&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.scheduler.maximum-allocation-vcores&lt;&#x2F;name&gt;</span><br><span class=\"line\">    &lt;value&gt;3&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br></pre></td></tr></table></figure>"},{"title":"hbase积累.md","date":"2018-06-04T02:54:48.000Z","abstract":"hbase细节总结","_content":"# hbase积累\n<!-- more -->\n\n## 细节点\n\n### 1.Rowkey设计原则\n<!-- more -->\n1.1 **长度原则** rowkey 在hbase以二进制码流,可以是任意字符串,\n\n* **最大长度是64kb**,实际应用主要是100~100bytes\n\n* 长度尽量为8的整数倍,因为现在的系统主要是64位,内存8字节对齐.控制在16字节,符合操作系统特性\n\n1.2 **散列原则**:因为hbase是分布式存储,rowkey的高位尽量是散列字段,散列性弱的尽量放在低位段.如Time AND Device_id的组合,相对而言device_id 应该量级较小,散列性高.而TIME散列性低,如果TIME放在高位,可能造成数据在某个RegeionServer上堆积的情况.所以较合理的rowkey组合应是\ndevice_id+time.\n\n1.3 **RowKey唯一原则**：必须在设计上保证其唯一性.\nhbase 中以KeyValue形式存储,key若重复,行内容则会被覆盖.\n\n---\n### 2.Hbase的Regeion热点问题解决\n\n`\n因为在创建表是没有提前预分区,创建的表默认就只会有一个region,这个region的rowkey是没有边界的,即没有startkey与stopkey.数据在写入时,都会写入到这个region.随着数据的不断增加,达到某个阈值时,才会split成2个region.在这个过程中就会产生所有数据囤积在一个regionServer上,出现热点问题.另在split时,会占用集群的I/O资源.通过预分区可以解决该问题\n`\n\n#### 2.1 预分区\n\n预分区,\"预\"字是核心.我们在建表时,预先对表中要存放的数据形式和可能的量级,心中必然会有所估量,即这里应**预**估数据量.若数据量较大,则在建表时又应该预分区.即根据数据形式,量级,事先预设好一定量的region,后面数据写入时,则会写入到相应的分区.从而避免热点,减少split.\n\n2.1.2 salting(加盐)\nhbase rowkey设计,避免热点,常会用到该操作,这里的加盐本身不是加密操作,而是在原数据前加入一些随机数据,从而起到分散不同region的作用.\n\n2.1.3 预习区具体方案\n\nhbase预分区的相关操作,如shell形式,可直接在hbase shell\n操作.如\n\n[https://blog.csdn.net/xiao_jun_0820/article/details/24419793](Hbase shell 预分区操作.)\n\njava形式\n[https://blog.csdn.net/qq_20641565/article/details/56482407](Hbase 预分区 java API形式)\n\n以上操作形式有个问题就是rowkey是随机生成的,虽起到了散列存储,避免了热点堆积,但因为加盐的缘故,想要直接的获取某行数据较为困难.若针对的是高频使用的数据,则会出现问题.\n\n2.1.4 hash分区\n\n在原先预分区的基础上,通过相关规则将原数据hash,从而获得这个原数据对应在哪个分区,使当拿到相关原数据,就能推演出相关rowkey.从而能准确的get数据.\n\n### hbase优化\n\n#### 确定优化目标\n沟通交流后，业务方更看重降低成本。数据量梳理后略有降低，保证吞吐，无长期请求堆积前提下可以放宽延时要求。为了更快的进行优化，放宽稳定性可以要求接受短期波动。\n另外，该分组的RegionServer之前存在不稳定的问题，这次优化也一并解决。\n\n---\n","source":"_posts/王阁/技术/hexo/old/hbase积累.md","raw":"---\ntitle: hbase积累.md\ndate: 2018-06-04 10:54:48\ntags: 日常总结\nabstract: hbase细节总结\n---\n# hbase积累\n<!-- more -->\n\n## 细节点\n\n### 1.Rowkey设计原则\n<!-- more -->\n1.1 **长度原则** rowkey 在hbase以二进制码流,可以是任意字符串,\n\n* **最大长度是64kb**,实际应用主要是100~100bytes\n\n* 长度尽量为8的整数倍,因为现在的系统主要是64位,内存8字节对齐.控制在16字节,符合操作系统特性\n\n1.2 **散列原则**:因为hbase是分布式存储,rowkey的高位尽量是散列字段,散列性弱的尽量放在低位段.如Time AND Device_id的组合,相对而言device_id 应该量级较小,散列性高.而TIME散列性低,如果TIME放在高位,可能造成数据在某个RegeionServer上堆积的情况.所以较合理的rowkey组合应是\ndevice_id+time.\n\n1.3 **RowKey唯一原则**：必须在设计上保证其唯一性.\nhbase 中以KeyValue形式存储,key若重复,行内容则会被覆盖.\n\n---\n### 2.Hbase的Regeion热点问题解决\n\n`\n因为在创建表是没有提前预分区,创建的表默认就只会有一个region,这个region的rowkey是没有边界的,即没有startkey与stopkey.数据在写入时,都会写入到这个region.随着数据的不断增加,达到某个阈值时,才会split成2个region.在这个过程中就会产生所有数据囤积在一个regionServer上,出现热点问题.另在split时,会占用集群的I/O资源.通过预分区可以解决该问题\n`\n\n#### 2.1 预分区\n\n预分区,\"预\"字是核心.我们在建表时,预先对表中要存放的数据形式和可能的量级,心中必然会有所估量,即这里应**预**估数据量.若数据量较大,则在建表时又应该预分区.即根据数据形式,量级,事先预设好一定量的region,后面数据写入时,则会写入到相应的分区.从而避免热点,减少split.\n\n2.1.2 salting(加盐)\nhbase rowkey设计,避免热点,常会用到该操作,这里的加盐本身不是加密操作,而是在原数据前加入一些随机数据,从而起到分散不同region的作用.\n\n2.1.3 预习区具体方案\n\nhbase预分区的相关操作,如shell形式,可直接在hbase shell\n操作.如\n\n[https://blog.csdn.net/xiao_jun_0820/article/details/24419793](Hbase shell 预分区操作.)\n\njava形式\n[https://blog.csdn.net/qq_20641565/article/details/56482407](Hbase 预分区 java API形式)\n\n以上操作形式有个问题就是rowkey是随机生成的,虽起到了散列存储,避免了热点堆积,但因为加盐的缘故,想要直接的获取某行数据较为困难.若针对的是高频使用的数据,则会出现问题.\n\n2.1.4 hash分区\n\n在原先预分区的基础上,通过相关规则将原数据hash,从而获得这个原数据对应在哪个分区,使当拿到相关原数据,就能推演出相关rowkey.从而能准确的get数据.\n\n### hbase优化\n\n#### 确定优化目标\n沟通交流后，业务方更看重降低成本。数据量梳理后略有降低，保证吞吐，无长期请求堆积前提下可以放宽延时要求。为了更快的进行优化，放宽稳定性可以要求接受短期波动。\n另外，该分组的RegionServer之前存在不稳定的问题，这次优化也一并解决。\n\n---\n","slug":"王阁/技术/hexo/old/hbase积累","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf40033u6pw2ovsb0ta","content":"<h1 id=\"hbase积累\"><a href=\"#hbase积累\" class=\"headerlink\" title=\"hbase积累\"></a>hbase积累</h1><a id=\"more\"></a>\n\n<h2 id=\"细节点\"><a href=\"#细节点\" class=\"headerlink\" title=\"细节点\"></a>细节点</h2><h3 id=\"1-Rowkey设计原则\"><a href=\"#1-Rowkey设计原则\" class=\"headerlink\" title=\"1.Rowkey设计原则\"></a>1.Rowkey设计原则</h3><!-- more -->\n<p>1.1 <strong>长度原则</strong> rowkey 在hbase以二进制码流,可以是任意字符串,</p>\n<ul>\n<li><p><strong>最大长度是64kb</strong>,实际应用主要是100~100bytes</p>\n</li>\n<li><p>长度尽量为8的整数倍,因为现在的系统主要是64位,内存8字节对齐.控制在16字节,符合操作系统特性</p>\n</li>\n</ul>\n<p>1.2 <strong>散列原则</strong>:因为hbase是分布式存储,rowkey的高位尽量是散列字段,散列性弱的尽量放在低位段.如Time AND Device_id的组合,相对而言device_id 应该量级较小,散列性高.而TIME散列性低,如果TIME放在高位,可能造成数据在某个RegeionServer上堆积的情况.所以较合理的rowkey组合应是<br>device_id+time.</p>\n<p>1.3 <strong>RowKey唯一原则</strong>：必须在设计上保证其唯一性.<br>hbase 中以KeyValue形式存储,key若重复,行内容则会被覆盖.</p>\n<hr>\n<h3 id=\"2-Hbase的Regeion热点问题解决\"><a href=\"#2-Hbase的Regeion热点问题解决\" class=\"headerlink\" title=\"2.Hbase的Regeion热点问题解决\"></a>2.Hbase的Regeion热点问题解决</h3><p><code>因为在创建表是没有提前预分区,创建的表默认就只会有一个region,这个region的rowkey是没有边界的,即没有startkey与stopkey.数据在写入时,都会写入到这个region.随着数据的不断增加,达到某个阈值时,才会split成2个region.在这个过程中就会产生所有数据囤积在一个regionServer上,出现热点问题.另在split时,会占用集群的I/O资源.通过预分区可以解决该问题</code></p>\n<h4 id=\"2-1-预分区\"><a href=\"#2-1-预分区\" class=\"headerlink\" title=\"2.1 预分区\"></a>2.1 预分区</h4><p>预分区,”预”字是核心.我们在建表时,预先对表中要存放的数据形式和可能的量级,心中必然会有所估量,即这里应<strong>预</strong>估数据量.若数据量较大,则在建表时又应该预分区.即根据数据形式,量级,事先预设好一定量的region,后面数据写入时,则会写入到相应的分区.从而避免热点,减少split.</p>\n<p>2.1.2 salting(加盐)<br>hbase rowkey设计,避免热点,常会用到该操作,这里的加盐本身不是加密操作,而是在原数据前加入一些随机数据,从而起到分散不同region的作用.</p>\n<p>2.1.3 预习区具体方案</p>\n<p>hbase预分区的相关操作,如shell形式,可直接在hbase shell<br>操作.如</p>\n<p>[<a href=\"https://blog.csdn.net/xiao_jun_0820/article/details/24419793]\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/xiao_jun_0820/article/details/24419793]</a>(Hbase shell 预分区操作.)</p>\n<p>java形式<br>[<a href=\"https://blog.csdn.net/qq_20641565/article/details/56482407]\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/qq_20641565/article/details/56482407]</a>(Hbase 预分区 java API形式)</p>\n<p>以上操作形式有个问题就是rowkey是随机生成的,虽起到了散列存储,避免了热点堆积,但因为加盐的缘故,想要直接的获取某行数据较为困难.若针对的是高频使用的数据,则会出现问题.</p>\n<p>2.1.4 hash分区</p>\n<p>在原先预分区的基础上,通过相关规则将原数据hash,从而获得这个原数据对应在哪个分区,使当拿到相关原数据,就能推演出相关rowkey.从而能准确的get数据.</p>\n<h3 id=\"hbase优化\"><a href=\"#hbase优化\" class=\"headerlink\" title=\"hbase优化\"></a>hbase优化</h3><h4 id=\"确定优化目标\"><a href=\"#确定优化目标\" class=\"headerlink\" title=\"确定优化目标\"></a>确定优化目标</h4><p>沟通交流后，业务方更看重降低成本。数据量梳理后略有降低，保证吞吐，无长期请求堆积前提下可以放宽延时要求。为了更快的进行优化，放宽稳定性可以要求接受短期波动。<br>另外，该分组的RegionServer之前存在不稳定的问题，这次优化也一并解决。</p>\n<hr>\n","site":{"data":{}},"excerpt":"<h1 id=\"hbase积累\"><a href=\"#hbase积累\" class=\"headerlink\" title=\"hbase积累\"></a>hbase积累</h1>","more":"<h2 id=\"细节点\"><a href=\"#细节点\" class=\"headerlink\" title=\"细节点\"></a>细节点</h2><h3 id=\"1-Rowkey设计原则\"><a href=\"#1-Rowkey设计原则\" class=\"headerlink\" title=\"1.Rowkey设计原则\"></a>1.Rowkey设计原则</h3><!-- more -->\n<p>1.1 <strong>长度原则</strong> rowkey 在hbase以二进制码流,可以是任意字符串,</p>\n<ul>\n<li><p><strong>最大长度是64kb</strong>,实际应用主要是100~100bytes</p>\n</li>\n<li><p>长度尽量为8的整数倍,因为现在的系统主要是64位,内存8字节对齐.控制在16字节,符合操作系统特性</p>\n</li>\n</ul>\n<p>1.2 <strong>散列原则</strong>:因为hbase是分布式存储,rowkey的高位尽量是散列字段,散列性弱的尽量放在低位段.如Time AND Device_id的组合,相对而言device_id 应该量级较小,散列性高.而TIME散列性低,如果TIME放在高位,可能造成数据在某个RegeionServer上堆积的情况.所以较合理的rowkey组合应是<br>device_id+time.</p>\n<p>1.3 <strong>RowKey唯一原则</strong>：必须在设计上保证其唯一性.<br>hbase 中以KeyValue形式存储,key若重复,行内容则会被覆盖.</p>\n<hr>\n<h3 id=\"2-Hbase的Regeion热点问题解决\"><a href=\"#2-Hbase的Regeion热点问题解决\" class=\"headerlink\" title=\"2.Hbase的Regeion热点问题解决\"></a>2.Hbase的Regeion热点问题解决</h3><p><code>因为在创建表是没有提前预分区,创建的表默认就只会有一个region,这个region的rowkey是没有边界的,即没有startkey与stopkey.数据在写入时,都会写入到这个region.随着数据的不断增加,达到某个阈值时,才会split成2个region.在这个过程中就会产生所有数据囤积在一个regionServer上,出现热点问题.另在split时,会占用集群的I/O资源.通过预分区可以解决该问题</code></p>\n<h4 id=\"2-1-预分区\"><a href=\"#2-1-预分区\" class=\"headerlink\" title=\"2.1 预分区\"></a>2.1 预分区</h4><p>预分区,”预”字是核心.我们在建表时,预先对表中要存放的数据形式和可能的量级,心中必然会有所估量,即这里应<strong>预</strong>估数据量.若数据量较大,则在建表时又应该预分区.即根据数据形式,量级,事先预设好一定量的region,后面数据写入时,则会写入到相应的分区.从而避免热点,减少split.</p>\n<p>2.1.2 salting(加盐)<br>hbase rowkey设计,避免热点,常会用到该操作,这里的加盐本身不是加密操作,而是在原数据前加入一些随机数据,从而起到分散不同region的作用.</p>\n<p>2.1.3 预习区具体方案</p>\n<p>hbase预分区的相关操作,如shell形式,可直接在hbase shell<br>操作.如</p>\n<p>[<a href=\"https://blog.csdn.net/xiao_jun_0820/article/details/24419793]\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/xiao_jun_0820/article/details/24419793]</a>(Hbase shell 预分区操作.)</p>\n<p>java形式<br>[<a href=\"https://blog.csdn.net/qq_20641565/article/details/56482407]\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/qq_20641565/article/details/56482407]</a>(Hbase 预分区 java API形式)</p>\n<p>以上操作形式有个问题就是rowkey是随机生成的,虽起到了散列存储,避免了热点堆积,但因为加盐的缘故,想要直接的获取某行数据较为困难.若针对的是高频使用的数据,则会出现问题.</p>\n<p>2.1.4 hash分区</p>\n<p>在原先预分区的基础上,通过相关规则将原数据hash,从而获得这个原数据对应在哪个分区,使当拿到相关原数据,就能推演出相关rowkey.从而能准确的get数据.</p>\n<h3 id=\"hbase优化\"><a href=\"#hbase优化\" class=\"headerlink\" title=\"hbase优化\"></a>hbase优化</h3><h4 id=\"确定优化目标\"><a href=\"#确定优化目标\" class=\"headerlink\" title=\"确定优化目标\"></a>确定优化目标</h4><p>沟通交流后，业务方更看重降低成本。数据量梳理后略有降低，保证吞吐，无长期请求堆积前提下可以放宽延时要求。为了更快的进行优化，放宽稳定性可以要求接受短期波动。<br>另外，该分组的RegionServer之前存在不稳定的问题，这次优化也一并解决。</p>\n<hr>"},{"title":"flink学习","date":"2019-07-30T16:00:00.000Z","_content":"\nflink内容记录\n\n<!--more-->\n\n## 搭建\n\n## 创建maven项目\n\n```\nmvn archetype:generate \\\n    -DarchetypeGroupId=org.apache.flink \\\n    -DarchetypeArtifactId=flink-quickstart-java \\\n    -DarchetypeVersion=1.6.1 \\\n    -DgroupId=my-flink-project \\\n    -DartifactId=my-flink-project \\\n    -Dversion=0.1 \\\n    -Dpackage=myflink \\\n    -DinteractiveMode=false\n\n```\n\n```\n\nmvn clean package -Dmaven.test.skip=true\n\n```\n\n```\nflink run -c myflink.demo.SocketTextStreamWordCount my-flink-project-0.1.jar 127.0.0.1 9000\n```\n\n## DataStream API\nflink程序工作解剖图\n![](http://img.wqkenqing.ren/FIyXNI.png)\n\n### 执行环境\n\nflink支持\n- 获取已经存在的flink环境\n- 创建一个本地环境\n- 创建一个远程环境\n\n### DataSource\n\n#### 预置source\n\nSocket-based\n\n- socketTextStream();\n\nFile-based\n\n### Transfomations\n\n- map\n- flatMap\n- filter\n- keyBy\n- reduce\n- fold\n\n合计\n\n- min\n- max\n- sum\n\n窗口\n\n\n\n\n","source":"_posts/王阁/技术/hexo/flink/Flink.md","raw":"---\n\ntitle: flink学习\ndate: 2019-07-31\ntags: flink\n\n---\n\nflink内容记录\n\n<!--more-->\n\n## 搭建\n\n## 创建maven项目\n\n```\nmvn archetype:generate \\\n    -DarchetypeGroupId=org.apache.flink \\\n    -DarchetypeArtifactId=flink-quickstart-java \\\n    -DarchetypeVersion=1.6.1 \\\n    -DgroupId=my-flink-project \\\n    -DartifactId=my-flink-project \\\n    -Dversion=0.1 \\\n    -Dpackage=myflink \\\n    -DinteractiveMode=false\n\n```\n\n```\n\nmvn clean package -Dmaven.test.skip=true\n\n```\n\n```\nflink run -c myflink.demo.SocketTextStreamWordCount my-flink-project-0.1.jar 127.0.0.1 9000\n```\n\n## DataStream API\nflink程序工作解剖图\n![](http://img.wqkenqing.ren/FIyXNI.png)\n\n### 执行环境\n\nflink支持\n- 获取已经存在的flink环境\n- 创建一个本地环境\n- 创建一个远程环境\n\n### DataSource\n\n#### 预置source\n\nSocket-based\n\n- socketTextStream();\n\nFile-based\n\n### Transfomations\n\n- map\n- flatMap\n- filter\n- keyBy\n- reduce\n- fold\n\n合计\n\n- min\n- max\n- sum\n\n窗口\n\n\n\n\n","slug":"王阁/技术/hexo/flink/Flink","published":1,"updated":"2023-02-23T02:51:20.904Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf50036u6pw3p0r18y5","content":"<p>flink内容记录</p>\n<a id=\"more\"></a>\n\n<h2 id=\"搭建\"><a href=\"#搭建\" class=\"headerlink\" title=\"搭建\"></a>搭建</h2><h2 id=\"创建maven项目\"><a href=\"#创建maven项目\" class=\"headerlink\" title=\"创建maven项目\"></a>创建maven项目</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn archetype:generate \\</span><br><span class=\"line\">    -DarchetypeGroupId&#x3D;org.apache.flink \\</span><br><span class=\"line\">    -DarchetypeArtifactId&#x3D;flink-quickstart-java \\</span><br><span class=\"line\">    -DarchetypeVersion&#x3D;1.6.1 \\</span><br><span class=\"line\">    -DgroupId&#x3D;my-flink-project \\</span><br><span class=\"line\">    -DartifactId&#x3D;my-flink-project \\</span><br><span class=\"line\">    -Dversion&#x3D;0.1 \\</span><br><span class=\"line\">    -Dpackage&#x3D;myflink \\</span><br><span class=\"line\">    -DinteractiveMode&#x3D;false</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">mvn clean package -Dmaven.test.skip&#x3D;true</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flink run -c myflink.demo.SocketTextStreamWordCount my-flink-project-0.1.jar 127.0.0.1 9000</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"DataStream-API\"><a href=\"#DataStream-API\" class=\"headerlink\" title=\"DataStream API\"></a>DataStream API</h2><p>flink程序工作解剖图<br><img src=\"http://img.wqkenqing.ren/FIyXNI.png\" alt=\"\"></p>\n<h3 id=\"执行环境\"><a href=\"#执行环境\" class=\"headerlink\" title=\"执行环境\"></a>执行环境</h3><p>flink支持</p>\n<ul>\n<li>获取已经存在的flink环境</li>\n<li>创建一个本地环境</li>\n<li>创建一个远程环境</li>\n</ul>\n<h3 id=\"DataSource\"><a href=\"#DataSource\" class=\"headerlink\" title=\"DataSource\"></a>DataSource</h3><h4 id=\"预置source\"><a href=\"#预置source\" class=\"headerlink\" title=\"预置source\"></a>预置source</h4><p>Socket-based</p>\n<ul>\n<li>socketTextStream();</li>\n</ul>\n<p>File-based</p>\n<h3 id=\"Transfomations\"><a href=\"#Transfomations\" class=\"headerlink\" title=\"Transfomations\"></a>Transfomations</h3><ul>\n<li>map</li>\n<li>flatMap</li>\n<li>filter</li>\n<li>keyBy</li>\n<li>reduce</li>\n<li>fold</li>\n</ul>\n<p>合计</p>\n<ul>\n<li>min</li>\n<li>max</li>\n<li>sum</li>\n</ul>\n<p>窗口</p>\n","site":{"data":{}},"excerpt":"<p>flink内容记录</p>","more":"<h2 id=\"搭建\"><a href=\"#搭建\" class=\"headerlink\" title=\"搭建\"></a>搭建</h2><h2 id=\"创建maven项目\"><a href=\"#创建maven项目\" class=\"headerlink\" title=\"创建maven项目\"></a>创建maven项目</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn archetype:generate \\</span><br><span class=\"line\">    -DarchetypeGroupId&#x3D;org.apache.flink \\</span><br><span class=\"line\">    -DarchetypeArtifactId&#x3D;flink-quickstart-java \\</span><br><span class=\"line\">    -DarchetypeVersion&#x3D;1.6.1 \\</span><br><span class=\"line\">    -DgroupId&#x3D;my-flink-project \\</span><br><span class=\"line\">    -DartifactId&#x3D;my-flink-project \\</span><br><span class=\"line\">    -Dversion&#x3D;0.1 \\</span><br><span class=\"line\">    -Dpackage&#x3D;myflink \\</span><br><span class=\"line\">    -DinteractiveMode&#x3D;false</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">mvn clean package -Dmaven.test.skip&#x3D;true</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flink run -c myflink.demo.SocketTextStreamWordCount my-flink-project-0.1.jar 127.0.0.1 9000</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"DataStream-API\"><a href=\"#DataStream-API\" class=\"headerlink\" title=\"DataStream API\"></a>DataStream API</h2><p>flink程序工作解剖图<br><img src=\"http://img.wqkenqing.ren/FIyXNI.png\" alt=\"\"></p>\n<h3 id=\"执行环境\"><a href=\"#执行环境\" class=\"headerlink\" title=\"执行环境\"></a>执行环境</h3><p>flink支持</p>\n<ul>\n<li>获取已经存在的flink环境</li>\n<li>创建一个本地环境</li>\n<li>创建一个远程环境</li>\n</ul>\n<h3 id=\"DataSource\"><a href=\"#DataSource\" class=\"headerlink\" title=\"DataSource\"></a>DataSource</h3><h4 id=\"预置source\"><a href=\"#预置source\" class=\"headerlink\" title=\"预置source\"></a>预置source</h4><p>Socket-based</p>\n<ul>\n<li>socketTextStream();</li>\n</ul>\n<p>File-based</p>\n<h3 id=\"Transfomations\"><a href=\"#Transfomations\" class=\"headerlink\" title=\"Transfomations\"></a>Transfomations</h3><ul>\n<li>map</li>\n<li>flatMap</li>\n<li>filter</li>\n<li>keyBy</li>\n<li>reduce</li>\n<li>fold</li>\n</ul>\n<p>合计</p>\n<ul>\n<li>min</li>\n<li>max</li>\n<li>sum</li>\n</ul>\n<p>窗口</p>"},{"title":"flume记录","date":"2019-06-12T16:00:00.000Z","_content":"此处简介\n<!--more-->\n# flume记录\n\n## from kafka\n<!-- more -->\n```\na1.sources = source1\n\na1.sources.source1.type = org.apache.flume.source.kafka.KafkaSource\n\na1.sources.source1.channels = c1\n\na1.sources.source1.batchSize = 5000\n\na1.sources.source1.batchDurationMillis = 2000\na1.sources.source1.zookeeperConnect = localhost:2181\n\n#a1.sources.source1.kafka.brokerList = localhost:9092\na1.sources.source1.kafka.bootstrap.servers = localhost:9092\na1.sources.source1.topic = flumetest\na1.sources.source1.kafka.consumer.group.id = custom.g.id\n\n\n\na1.channels = c1\n\na1.channels.c1.type = memory\n\na1.channels.c1.capacity = 10000\n\na1.channels.c1.transactionCapacity = 10000\n\na1.channels.c1.byteCapacityBufferPercentage = 20\n\na1.channels.c1.byteCapacity = 800000\n\n\n\na1.sinks = k1\n\na1.sinks.k1.type = file_roll\n\na1.sinks.k1.channel = c1\n\na1.sinks.k1.sink.directory = /home/hadoop/testfile/flume\n```\n\n这里也有版本匹配的问题.经过多番尝试,这里的组合版本是flume1.6+kafka_2.11-2.2.0.tgz \n其它版本可能会有request header 问题.\n另外还遇到了指定topic 和 zookeeper的问题.\n\n执行语句:flume-ng agent -n a1 -c conf -f kafka.properties -Dflume.root.logger=INFO,console\n\n## flume 采集到kafka\n\n\n\n\n```\nagent.sources=r1\nagent.sinks=k1\nagent.channels=c1\n\nagent.sources.r1.type=exec\nagent.sources.r1.command=tail /root/tomcat/logs/catalina.out\nagent.sources.r1.restart=true\nagent.sources.r1.batchSize=1000\nagent.sources.r1.batchTimeout=3000\nagent.sources.r1.channels=c1\n\nagent.channels.c1.type=memory\nagent.channels.c1.capacity=102400\nagent.channels.c1.transactionCapacity=1000\n\nagent.channels.c1.byteCapacity=134217728\nagent.channels.c1.byteCapacityBufferPercentage=80\n\nagent.sinks.k1.channel=c1\nagent.sinks.k1.type=org.apache.flume.sink.kafka.KafkaSink\nagent.sinks.k1.kafka.topic=sparkstreaming\nagent.sinks.k1.kafka.zookeeperConnect=47.102.199.215:2181\n#agent.sinks.k1.kafka.bootstrap.servers=47.102.199.215:9092\nagent.sinks.k1.kafka.brokerList =47.102.199.215:9092\nagent.sinks.k1.serializer.class=kafka.serializer.StringEncoder\nagent.sinks.k1.flumeBatchSize=1000\nagent.sinks.k1.useFlumeEventFormat=true\n\n\n```","source":"_posts/王阁/技术/hexo/old/flume记录.md","raw":"---\n\ntitle: flume记录\ndate: 2019-06-13\ntags: \n\n---\n此处简介\n<!--more-->\n# flume记录\n\n## from kafka\n<!-- more -->\n```\na1.sources = source1\n\na1.sources.source1.type = org.apache.flume.source.kafka.KafkaSource\n\na1.sources.source1.channels = c1\n\na1.sources.source1.batchSize = 5000\n\na1.sources.source1.batchDurationMillis = 2000\na1.sources.source1.zookeeperConnect = localhost:2181\n\n#a1.sources.source1.kafka.brokerList = localhost:9092\na1.sources.source1.kafka.bootstrap.servers = localhost:9092\na1.sources.source1.topic = flumetest\na1.sources.source1.kafka.consumer.group.id = custom.g.id\n\n\n\na1.channels = c1\n\na1.channels.c1.type = memory\n\na1.channels.c1.capacity = 10000\n\na1.channels.c1.transactionCapacity = 10000\n\na1.channels.c1.byteCapacityBufferPercentage = 20\n\na1.channels.c1.byteCapacity = 800000\n\n\n\na1.sinks = k1\n\na1.sinks.k1.type = file_roll\n\na1.sinks.k1.channel = c1\n\na1.sinks.k1.sink.directory = /home/hadoop/testfile/flume\n```\n\n这里也有版本匹配的问题.经过多番尝试,这里的组合版本是flume1.6+kafka_2.11-2.2.0.tgz \n其它版本可能会有request header 问题.\n另外还遇到了指定topic 和 zookeeper的问题.\n\n执行语句:flume-ng agent -n a1 -c conf -f kafka.properties -Dflume.root.logger=INFO,console\n\n## flume 采集到kafka\n\n\n\n\n```\nagent.sources=r1\nagent.sinks=k1\nagent.channels=c1\n\nagent.sources.r1.type=exec\nagent.sources.r1.command=tail /root/tomcat/logs/catalina.out\nagent.sources.r1.restart=true\nagent.sources.r1.batchSize=1000\nagent.sources.r1.batchTimeout=3000\nagent.sources.r1.channels=c1\n\nagent.channels.c1.type=memory\nagent.channels.c1.capacity=102400\nagent.channels.c1.transactionCapacity=1000\n\nagent.channels.c1.byteCapacity=134217728\nagent.channels.c1.byteCapacityBufferPercentage=80\n\nagent.sinks.k1.channel=c1\nagent.sinks.k1.type=org.apache.flume.sink.kafka.KafkaSink\nagent.sinks.k1.kafka.topic=sparkstreaming\nagent.sinks.k1.kafka.zookeeperConnect=47.102.199.215:2181\n#agent.sinks.k1.kafka.bootstrap.servers=47.102.199.215:9092\nagent.sinks.k1.kafka.brokerList =47.102.199.215:9092\nagent.sinks.k1.serializer.class=kafka.serializer.StringEncoder\nagent.sinks.k1.flumeBatchSize=1000\nagent.sinks.k1.useFlumeEventFormat=true\n\n\n```","slug":"王阁/技术/hexo/old/flume记录","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf60037u6pw839gfcmm","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n<h1 id=\"flume记录\"><a href=\"#flume记录\" class=\"headerlink\" title=\"flume记录\"></a>flume记录</h1><h2 id=\"from-kafka\"><a href=\"#from-kafka\" class=\"headerlink\" title=\"from kafka\"></a>from kafka</h2><!-- more -->\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a1.sources &#x3D; source1</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sources.source1.type &#x3D; org.apache.flume.source.kafka.KafkaSource</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sources.source1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sources.source1.batchSize &#x3D; 5000</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sources.source1.batchDurationMillis &#x3D; 2000</span><br><span class=\"line\">a1.sources.source1.zookeeperConnect &#x3D; localhost:2181</span><br><span class=\"line\"></span><br><span class=\"line\">#a1.sources.source1.kafka.brokerList &#x3D; localhost:9092</span><br><span class=\"line\">a1.sources.source1.kafka.bootstrap.servers &#x3D; localhost:9092</span><br><span class=\"line\">a1.sources.source1.topic &#x3D; flumetest</span><br><span class=\"line\">a1.sources.source1.kafka.consumer.group.id &#x3D; custom.g.id</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 10000</span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 10000</span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels.c1.byteCapacityBufferPercentage &#x3D; 20</span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels.c1.byteCapacity &#x3D; 800000</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sinks.k1.type &#x3D; file_roll</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sinks.k1.sink.directory &#x3D; &#x2F;home&#x2F;hadoop&#x2F;testfile&#x2F;flume</span><br></pre></td></tr></table></figure>\n\n<p>这里也有版本匹配的问题.经过多番尝试,这里的组合版本是flume1.6+kafka_2.11-2.2.0.tgz<br>其它版本可能会有request header 问题.<br>另外还遇到了指定topic 和 zookeeper的问题.</p>\n<p>执行语句:flume-ng agent -n a1 -c conf -f kafka.properties -Dflume.root.logger=INFO,console</p>\n<h2 id=\"flume-采集到kafka\"><a href=\"#flume-采集到kafka\" class=\"headerlink\" title=\"flume 采集到kafka\"></a>flume 采集到kafka</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">agent.sources&#x3D;r1</span><br><span class=\"line\">agent.sinks&#x3D;k1</span><br><span class=\"line\">agent.channels&#x3D;c1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sources.r1.type&#x3D;exec</span><br><span class=\"line\">agent.sources.r1.command&#x3D;tail &#x2F;root&#x2F;tomcat&#x2F;logs&#x2F;catalina.out</span><br><span class=\"line\">agent.sources.r1.restart&#x3D;true</span><br><span class=\"line\">agent.sources.r1.batchSize&#x3D;1000</span><br><span class=\"line\">agent.sources.r1.batchTimeout&#x3D;3000</span><br><span class=\"line\">agent.sources.r1.channels&#x3D;c1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.channels.c1.type&#x3D;memory</span><br><span class=\"line\">agent.channels.c1.capacity&#x3D;102400</span><br><span class=\"line\">agent.channels.c1.transactionCapacity&#x3D;1000</span><br><span class=\"line\"></span><br><span class=\"line\">agent.channels.c1.byteCapacity&#x3D;134217728</span><br><span class=\"line\">agent.channels.c1.byteCapacityBufferPercentage&#x3D;80</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sinks.k1.channel&#x3D;c1</span><br><span class=\"line\">agent.sinks.k1.type&#x3D;org.apache.flume.sink.kafka.KafkaSink</span><br><span class=\"line\">agent.sinks.k1.kafka.topic&#x3D;sparkstreaming</span><br><span class=\"line\">agent.sinks.k1.kafka.zookeeperConnect&#x3D;47.102.199.215:2181</span><br><span class=\"line\">#agent.sinks.k1.kafka.bootstrap.servers&#x3D;47.102.199.215:9092</span><br><span class=\"line\">agent.sinks.k1.kafka.brokerList &#x3D;47.102.199.215:9092</span><br><span class=\"line\">agent.sinks.k1.serializer.class&#x3D;kafka.serializer.StringEncoder</span><br><span class=\"line\">agent.sinks.k1.flumeBatchSize&#x3D;1000</span><br><span class=\"line\">agent.sinks.k1.useFlumeEventFormat&#x3D;true</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h1 id=\"flume记录\"><a href=\"#flume记录\" class=\"headerlink\" title=\"flume记录\"></a>flume记录</h1><h2 id=\"from-kafka\"><a href=\"#from-kafka\" class=\"headerlink\" title=\"from kafka\"></a>from kafka</h2><!-- more -->\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a1.sources &#x3D; source1</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sources.source1.type &#x3D; org.apache.flume.source.kafka.KafkaSource</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sources.source1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sources.source1.batchSize &#x3D; 5000</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sources.source1.batchDurationMillis &#x3D; 2000</span><br><span class=\"line\">a1.sources.source1.zookeeperConnect &#x3D; localhost:2181</span><br><span class=\"line\"></span><br><span class=\"line\">#a1.sources.source1.kafka.brokerList &#x3D; localhost:9092</span><br><span class=\"line\">a1.sources.source1.kafka.bootstrap.servers &#x3D; localhost:9092</span><br><span class=\"line\">a1.sources.source1.topic &#x3D; flumetest</span><br><span class=\"line\">a1.sources.source1.kafka.consumer.group.id &#x3D; custom.g.id</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 10000</span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 10000</span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels.c1.byteCapacityBufferPercentage &#x3D; 20</span><br><span class=\"line\"></span><br><span class=\"line\">a1.channels.c1.byteCapacity &#x3D; 800000</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sinks.k1.type &#x3D; file_roll</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sinks.k1.sink.directory &#x3D; &#x2F;home&#x2F;hadoop&#x2F;testfile&#x2F;flume</span><br></pre></td></tr></table></figure>\n\n<p>这里也有版本匹配的问题.经过多番尝试,这里的组合版本是flume1.6+kafka_2.11-2.2.0.tgz<br>其它版本可能会有request header 问题.<br>另外还遇到了指定topic 和 zookeeper的问题.</p>\n<p>执行语句:flume-ng agent -n a1 -c conf -f kafka.properties -Dflume.root.logger=INFO,console</p>\n<h2 id=\"flume-采集到kafka\"><a href=\"#flume-采集到kafka\" class=\"headerlink\" title=\"flume 采集到kafka\"></a>flume 采集到kafka</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">agent.sources&#x3D;r1</span><br><span class=\"line\">agent.sinks&#x3D;k1</span><br><span class=\"line\">agent.channels&#x3D;c1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sources.r1.type&#x3D;exec</span><br><span class=\"line\">agent.sources.r1.command&#x3D;tail &#x2F;root&#x2F;tomcat&#x2F;logs&#x2F;catalina.out</span><br><span class=\"line\">agent.sources.r1.restart&#x3D;true</span><br><span class=\"line\">agent.sources.r1.batchSize&#x3D;1000</span><br><span class=\"line\">agent.sources.r1.batchTimeout&#x3D;3000</span><br><span class=\"line\">agent.sources.r1.channels&#x3D;c1</span><br><span class=\"line\"></span><br><span class=\"line\">agent.channels.c1.type&#x3D;memory</span><br><span class=\"line\">agent.channels.c1.capacity&#x3D;102400</span><br><span class=\"line\">agent.channels.c1.transactionCapacity&#x3D;1000</span><br><span class=\"line\"></span><br><span class=\"line\">agent.channels.c1.byteCapacity&#x3D;134217728</span><br><span class=\"line\">agent.channels.c1.byteCapacityBufferPercentage&#x3D;80</span><br><span class=\"line\"></span><br><span class=\"line\">agent.sinks.k1.channel&#x3D;c1</span><br><span class=\"line\">agent.sinks.k1.type&#x3D;org.apache.flume.sink.kafka.KafkaSink</span><br><span class=\"line\">agent.sinks.k1.kafka.topic&#x3D;sparkstreaming</span><br><span class=\"line\">agent.sinks.k1.kafka.zookeeperConnect&#x3D;47.102.199.215:2181</span><br><span class=\"line\">#agent.sinks.k1.kafka.bootstrap.servers&#x3D;47.102.199.215:9092</span><br><span class=\"line\">agent.sinks.k1.kafka.brokerList &#x3D;47.102.199.215:9092</span><br><span class=\"line\">agent.sinks.k1.serializer.class&#x3D;kafka.serializer.StringEncoder</span><br><span class=\"line\">agent.sinks.k1.flumeBatchSize&#x3D;1000</span><br><span class=\"line\">agent.sinks.k1.useFlumeEventFormat&#x3D;true</span><br></pre></td></tr></table></figure>"},{"title":"kafka","_content":"kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic sparkstreaming\nkafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic flumetest\n<!-- more -->\n\nkafka-console-producer.sh --broker-list localhost:9092 --topic flumetest :创建生产者\n\nkafka-console-consumer.sh --bootstrap-server namenode:9092  --topic  flume-ng\n\n# Kafka相关小结\n\n##  kafka 相关指令\nkafka-server-start.sh config/server.properties & 启动\nkafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic topic_name  :创建topic\nkafka-console-producer.sh --broker-list localhost:9092 --topic topic_name :创建生产者\n\nkafka-console-consumer.sh --bootstrap-server localhost:9092 --topic topic_name :创建消费者\n\nkafka-console-producer.sh --broker-list namenode:9092 --topic sparkstreaming\n\n删除group\n\nkafka-consumer-groups --bootstrap-server 192.168.10.100:9092,192.168.10.101:9092,192.168.10.102:9092  —group traffic_history —delete\n\n\n## kafka java api\nkafka 虽然搭建较为简单,但想要对针它编程体验还是有些问题.初步使用下来明显感觉对版本的强约束性.以我线上版本\n\n![2019-03-12-11-02-43](http://img.wqkenqing.ren/2019-03-12-11-02-43.png)为例,我java项目对应的版本则是\n``` java\n\n<dependency>\n            <groupId>org.apache.kafka</groupId>\n            <artifactId>kafka_2.10</artifactId>\n            <version>0.8.1</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.kafka</groupId>\n            <artifactId>kafka-clients</artifactId>\n            <version>0.8.2.1</version>\n        </dependency>\n```\n\n以上版本搭配经由我亲测通过\n","source":"_posts/王阁/技术/hexo/old/kafka.md","raw":"---\ntitle: kafka \ntags: kafka\n---\nkafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic sparkstreaming\nkafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic flumetest\n<!-- more -->\n\nkafka-console-producer.sh --broker-list localhost:9092 --topic flumetest :创建生产者\n\nkafka-console-consumer.sh --bootstrap-server namenode:9092  --topic  flume-ng\n\n# Kafka相关小结\n\n##  kafka 相关指令\nkafka-server-start.sh config/server.properties & 启动\nkafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic topic_name  :创建topic\nkafka-console-producer.sh --broker-list localhost:9092 --topic topic_name :创建生产者\n\nkafka-console-consumer.sh --bootstrap-server localhost:9092 --topic topic_name :创建消费者\n\nkafka-console-producer.sh --broker-list namenode:9092 --topic sparkstreaming\n\n删除group\n\nkafka-consumer-groups --bootstrap-server 192.168.10.100:9092,192.168.10.101:9092,192.168.10.102:9092  —group traffic_history —delete\n\n\n## kafka java api\nkafka 虽然搭建较为简单,但想要对针它编程体验还是有些问题.初步使用下来明显感觉对版本的强约束性.以我线上版本\n\n![2019-03-12-11-02-43](http://img.wqkenqing.ren/2019-03-12-11-02-43.png)为例,我java项目对应的版本则是\n``` java\n\n<dependency>\n            <groupId>org.apache.kafka</groupId>\n            <artifactId>kafka_2.10</artifactId>\n            <version>0.8.1</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.kafka</groupId>\n            <artifactId>kafka-clients</artifactId>\n            <version>0.8.2.1</version>\n        </dependency>\n```\n\n以上版本搭配经由我亲测通过\n","slug":"王阁/技术/hexo/old/kafka","published":1,"date":"2023-02-23T02:51:20.905Z","updated":"2023-02-23T02:51:20.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf60039u6pw0t9w7skn","content":"<p>kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 1 –partitions 1 –topic sparkstreaming<br>kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 1 –partitions 1 –topic flumetest</p>\n<a id=\"more\"></a>\n\n<p>kafka-console-producer.sh –broker-list localhost:9092 –topic flumetest :创建生产者</p>\n<p>kafka-console-consumer.sh –bootstrap-server namenode:9092  –topic  flume-ng</p>\n<h1 id=\"Kafka相关小结\"><a href=\"#Kafka相关小结\" class=\"headerlink\" title=\"Kafka相关小结\"></a>Kafka相关小结</h1><h2 id=\"kafka-相关指令\"><a href=\"#kafka-相关指令\" class=\"headerlink\" title=\"kafka 相关指令\"></a>kafka 相关指令</h2><p>kafka-server-start.sh config/server.properties &amp; 启动<br>kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 1 –partitions 1 –topic topic_name  :创建topic<br>kafka-console-producer.sh –broker-list localhost:9092 –topic topic_name :创建生产者</p>\n<p>kafka-console-consumer.sh –bootstrap-server localhost:9092 –topic topic_name :创建消费者</p>\n<p>kafka-console-producer.sh –broker-list namenode:9092 –topic sparkstreaming</p>\n<p>删除group</p>\n<p>kafka-consumer-groups –bootstrap-server 192.168.10.100:9092,192.168.10.101:9092,192.168.10.102:9092  —group traffic_history —delete</p>\n<h2 id=\"kafka-java-api\"><a href=\"#kafka-java-api\" class=\"headerlink\" title=\"kafka java api\"></a>kafka java api</h2><p>kafka 虽然搭建较为简单,但想要对针它编程体验还是有些问题.初步使用下来明显感觉对版本的强约束性.以我线上版本</p>\n<p><img src=\"http://img.wqkenqing.ren/2019-03-12-11-02-43.png\" alt=\"2019-03-12-11-02-43\">为例,我java项目对应的版本则是</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;kafka_2.10&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;0.8.1&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;0.8.2.1&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p>以上版本搭配经由我亲测通过</p>\n","site":{"data":{}},"excerpt":"<p>kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 1 –partitions 1 –topic sparkstreaming<br>kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 1 –partitions 1 –topic flumetest</p>","more":"<p>kafka-console-producer.sh –broker-list localhost:9092 –topic flumetest :创建生产者</p>\n<p>kafka-console-consumer.sh –bootstrap-server namenode:9092  –topic  flume-ng</p>\n<h1 id=\"Kafka相关小结\"><a href=\"#Kafka相关小结\" class=\"headerlink\" title=\"Kafka相关小结\"></a>Kafka相关小结</h1><h2 id=\"kafka-相关指令\"><a href=\"#kafka-相关指令\" class=\"headerlink\" title=\"kafka 相关指令\"></a>kafka 相关指令</h2><p>kafka-server-start.sh config/server.properties &amp; 启动<br>kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 1 –partitions 1 –topic topic_name  :创建topic<br>kafka-console-producer.sh –broker-list localhost:9092 –topic topic_name :创建生产者</p>\n<p>kafka-console-consumer.sh –bootstrap-server localhost:9092 –topic topic_name :创建消费者</p>\n<p>kafka-console-producer.sh –broker-list namenode:9092 –topic sparkstreaming</p>\n<p>删除group</p>\n<p>kafka-consumer-groups –bootstrap-server 192.168.10.100:9092,192.168.10.101:9092,192.168.10.102:9092  —group traffic_history —delete</p>\n<h2 id=\"kafka-java-api\"><a href=\"#kafka-java-api\" class=\"headerlink\" title=\"kafka java api\"></a>kafka java api</h2><p>kafka 虽然搭建较为简单,但想要对针它编程体验还是有些问题.初步使用下来明显感觉对版本的强约束性.以我线上版本</p>\n<p><img src=\"http://img.wqkenqing.ren/2019-03-12-11-02-43.png\" alt=\"2019-03-12-11-02-43\">为例,我java项目对应的版本则是</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;kafka_2.10&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;0.8.1&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;0.8.2.1&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p>以上版本搭配经由我亲测通过</p>"},{"title":"mapreduce组件总结","_content":"\n\n# mapreduce组件总结\n\n<!-- more -->\n相关组件大致有\n1. Inputformat\n2. Inputsplit\n3. ReadRecorder\n4. mapper\n5. Combiner\n6. Partioner\n7. Reduce\n8. GroupComparator\n9. Reduce\n\n# shuffle\n\n![2019-03-19-15-39-59](http://img.wqkenqing.ren/2019-03-19-15-39-59.png)\n![2019-03-19-16-46-06](http://img.wqkenqing.ren/2019-03-19-16-46-06.png)\n\n```\nshuffle 被称为mapreduce的核心,一个真正让奇迹发生的地方.但它到底是什么呢?简练的讲,它就是 map out 到 reduce in 这段过程中对数据的处理过程.\n```\nshuffle过程中主要发生的操作有,Partion,Sort,spill,merge,copy,sort,merge.(还有可能有combine操作)\n\n具体流程是\nmap out后,Collector 对out后的数据进行处理. 数据将会写入到内存缓冲区,该内存缓冲区的数据达到80%后,会开启一个溢写线程,在磁盘本地创建一个文件.如果reduce设置了多个分区,写入buffer区的数据,会被打上一个分区标记.通过sortAndSpill()方法进行指对数据按分区号,key排序.最后溢出的文件是分区的,按key有序的文件.若buffer区中的20%一直未被填满,buffer写入进程不会断.但若达到100%,Buffer写入进程则会阻塞.并在buffer区中的数据全部spill完后才会再开启. (buffer区的内存默认是100M),spill过程中,若设置过combiner.则会对数据先进行combiner逻辑处理,再将处理后的数据写出\n\nspill完成后则会对本地的spill后的文件进行Merge.即把多个spill后的文件进行合并,并排序.最后会行成一个有序文件\n\n当1个Map Task 完成后,reduce 就会开启copy进程(默认是5个线程).这个过程中会通过http请求去各taskTracker(nodemanager),拉取相应的spill&merge后的文件.\n当copy完成后,则又会对数据进行merge.这个过程中同样有个类似map shuffle 中的buffer 溢写的阶段. 这个过程同样会触发combiner组件.这里的merge数据源有三种\n1. memory to memory\n2. memory to disk\n3. disk   to disk \n默认1是不开启的.\n\ncopy phase 完成后,是reduceTask 中的 sort phase\n即对merge 中的文件继续进行sort and group .\n\n当sort phase 完成.则开启reduce phase .到此shuffle正式完成.\n\n##二次排序\n```\n```\nmapreduce 常见的辅助排序\n1. partitioner\n2. key的比较Comparator\n3. 分组函数Grouping Comparator\n\n## join \nmap join ,semi join ,reduce join\n## \n","source":"_posts/王阁/技术/hexo/old/mapreduce组件总结.md","raw":"---\ntitle:  mapreduce组件总结\ntags: bigdata\n---\n\n\n# mapreduce组件总结\n\n<!-- more -->\n相关组件大致有\n1. Inputformat\n2. Inputsplit\n3. ReadRecorder\n4. mapper\n5. Combiner\n6. Partioner\n7. Reduce\n8. GroupComparator\n9. Reduce\n\n# shuffle\n\n![2019-03-19-15-39-59](http://img.wqkenqing.ren/2019-03-19-15-39-59.png)\n![2019-03-19-16-46-06](http://img.wqkenqing.ren/2019-03-19-16-46-06.png)\n\n```\nshuffle 被称为mapreduce的核心,一个真正让奇迹发生的地方.但它到底是什么呢?简练的讲,它就是 map out 到 reduce in 这段过程中对数据的处理过程.\n```\nshuffle过程中主要发生的操作有,Partion,Sort,spill,merge,copy,sort,merge.(还有可能有combine操作)\n\n具体流程是\nmap out后,Collector 对out后的数据进行处理. 数据将会写入到内存缓冲区,该内存缓冲区的数据达到80%后,会开启一个溢写线程,在磁盘本地创建一个文件.如果reduce设置了多个分区,写入buffer区的数据,会被打上一个分区标记.通过sortAndSpill()方法进行指对数据按分区号,key排序.最后溢出的文件是分区的,按key有序的文件.若buffer区中的20%一直未被填满,buffer写入进程不会断.但若达到100%,Buffer写入进程则会阻塞.并在buffer区中的数据全部spill完后才会再开启. (buffer区的内存默认是100M),spill过程中,若设置过combiner.则会对数据先进行combiner逻辑处理,再将处理后的数据写出\n\nspill完成后则会对本地的spill后的文件进行Merge.即把多个spill后的文件进行合并,并排序.最后会行成一个有序文件\n\n当1个Map Task 完成后,reduce 就会开启copy进程(默认是5个线程).这个过程中会通过http请求去各taskTracker(nodemanager),拉取相应的spill&merge后的文件.\n当copy完成后,则又会对数据进行merge.这个过程中同样有个类似map shuffle 中的buffer 溢写的阶段. 这个过程同样会触发combiner组件.这里的merge数据源有三种\n1. memory to memory\n2. memory to disk\n3. disk   to disk \n默认1是不开启的.\n\ncopy phase 完成后,是reduceTask 中的 sort phase\n即对merge 中的文件继续进行sort and group .\n\n当sort phase 完成.则开启reduce phase .到此shuffle正式完成.\n\n##二次排序\n```\n```\nmapreduce 常见的辅助排序\n1. partitioner\n2. key的比较Comparator\n3. 分组函数Grouping Comparator\n\n## join \nmap join ,semi join ,reduce join\n## \n","slug":"王阁/技术/hexo/old/mapreduce组件总结","published":1,"date":"2023-02-23T02:51:20.905Z","updated":"2023-02-23T02:51:20.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf7003au6pw9yzt5wwy","content":"<h1 id=\"mapreduce组件总结\"><a href=\"#mapreduce组件总结\" class=\"headerlink\" title=\"mapreduce组件总结\"></a>mapreduce组件总结</h1><a id=\"more\"></a>\n<p>相关组件大致有</p>\n<ol>\n<li>Inputformat</li>\n<li>Inputsplit</li>\n<li>ReadRecorder</li>\n<li>mapper</li>\n<li>Combiner</li>\n<li>Partioner</li>\n<li>Reduce</li>\n<li>GroupComparator</li>\n<li>Reduce</li>\n</ol>\n<h1 id=\"shuffle\"><a href=\"#shuffle\" class=\"headerlink\" title=\"shuffle\"></a>shuffle</h1><p><img src=\"http://img.wqkenqing.ren/2019-03-19-15-39-59.png\" alt=\"2019-03-19-15-39-59\"><br><img src=\"http://img.wqkenqing.ren/2019-03-19-16-46-06.png\" alt=\"2019-03-19-16-46-06\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shuffle 被称为mapreduce的核心,一个真正让奇迹发生的地方.但它到底是什么呢?简练的讲,它就是 map out 到 reduce in 这段过程中对数据的处理过程.</span><br></pre></td></tr></table></figure>\n<p>shuffle过程中主要发生的操作有,Partion,Sort,spill,merge,copy,sort,merge.(还有可能有combine操作)</p>\n<p>具体流程是<br>map out后,Collector 对out后的数据进行处理. 数据将会写入到内存缓冲区,该内存缓冲区的数据达到80%后,会开启一个溢写线程,在磁盘本地创建一个文件.如果reduce设置了多个分区,写入buffer区的数据,会被打上一个分区标记.通过sortAndSpill()方法进行指对数据按分区号,key排序.最后溢出的文件是分区的,按key有序的文件.若buffer区中的20%一直未被填满,buffer写入进程不会断.但若达到100%,Buffer写入进程则会阻塞.并在buffer区中的数据全部spill完后才会再开启. (buffer区的内存默认是100M),spill过程中,若设置过combiner.则会对数据先进行combiner逻辑处理,再将处理后的数据写出</p>\n<p>spill完成后则会对本地的spill后的文件进行Merge.即把多个spill后的文件进行合并,并排序.最后会行成一个有序文件</p>\n<p>当1个Map Task 完成后,reduce 就会开启copy进程(默认是5个线程).这个过程中会通过http请求去各taskTracker(nodemanager),拉取相应的spill&amp;merge后的文件.<br>当copy完成后,则又会对数据进行merge.这个过程中同样有个类似map shuffle 中的buffer 溢写的阶段. 这个过程同样会触发combiner组件.这里的merge数据源有三种</p>\n<ol>\n<li>memory to memory</li>\n<li>memory to disk</li>\n<li>disk   to disk<br>默认1是不开启的.</li>\n</ol>\n<p>copy phase 完成后,是reduceTask 中的 sort phase<br>即对merge 中的文件继续进行sort and group .</p>\n<p>当sort phase 完成.则开启reduce phase .到此shuffle正式完成.</p>\n<p>##二次排序</p>\n<pre><code></code></pre><p>mapreduce 常见的辅助排序</p>\n<ol>\n<li>partitioner</li>\n<li>key的比较Comparator</li>\n<li>分组函数Grouping Comparator</li>\n</ol>\n<h2 id=\"join\"><a href=\"#join\" class=\"headerlink\" title=\"join\"></a>join</h2><p>map join ,semi join ,reduce join</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","site":{"data":{}},"excerpt":"<h1 id=\"mapreduce组件总结\"><a href=\"#mapreduce组件总结\" class=\"headerlink\" title=\"mapreduce组件总结\"></a>mapreduce组件总结</h1>","more":"<p>相关组件大致有</p>\n<ol>\n<li>Inputformat</li>\n<li>Inputsplit</li>\n<li>ReadRecorder</li>\n<li>mapper</li>\n<li>Combiner</li>\n<li>Partioner</li>\n<li>Reduce</li>\n<li>GroupComparator</li>\n<li>Reduce</li>\n</ol>\n<h1 id=\"shuffle\"><a href=\"#shuffle\" class=\"headerlink\" title=\"shuffle\"></a>shuffle</h1><p><img src=\"http://img.wqkenqing.ren/2019-03-19-15-39-59.png\" alt=\"2019-03-19-15-39-59\"><br><img src=\"http://img.wqkenqing.ren/2019-03-19-16-46-06.png\" alt=\"2019-03-19-16-46-06\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shuffle 被称为mapreduce的核心,一个真正让奇迹发生的地方.但它到底是什么呢?简练的讲,它就是 map out 到 reduce in 这段过程中对数据的处理过程.</span><br></pre></td></tr></table></figure>\n<p>shuffle过程中主要发生的操作有,Partion,Sort,spill,merge,copy,sort,merge.(还有可能有combine操作)</p>\n<p>具体流程是<br>map out后,Collector 对out后的数据进行处理. 数据将会写入到内存缓冲区,该内存缓冲区的数据达到80%后,会开启一个溢写线程,在磁盘本地创建一个文件.如果reduce设置了多个分区,写入buffer区的数据,会被打上一个分区标记.通过sortAndSpill()方法进行指对数据按分区号,key排序.最后溢出的文件是分区的,按key有序的文件.若buffer区中的20%一直未被填满,buffer写入进程不会断.但若达到100%,Buffer写入进程则会阻塞.并在buffer区中的数据全部spill完后才会再开启. (buffer区的内存默认是100M),spill过程中,若设置过combiner.则会对数据先进行combiner逻辑处理,再将处理后的数据写出</p>\n<p>spill完成后则会对本地的spill后的文件进行Merge.即把多个spill后的文件进行合并,并排序.最后会行成一个有序文件</p>\n<p>当1个Map Task 完成后,reduce 就会开启copy进程(默认是5个线程).这个过程中会通过http请求去各taskTracker(nodemanager),拉取相应的spill&amp;merge后的文件.<br>当copy完成后,则又会对数据进行merge.这个过程中同样有个类似map shuffle 中的buffer 溢写的阶段. 这个过程同样会触发combiner组件.这里的merge数据源有三种</p>\n<ol>\n<li>memory to memory</li>\n<li>memory to disk</li>\n<li>disk   to disk<br>默认1是不开启的.</li>\n</ol>\n<p>copy phase 完成后,是reduceTask 中的 sort phase<br>即对merge 中的文件继续进行sort and group .</p>\n<p>当sort phase 完成.则开启reduce phase .到此shuffle正式完成.</p>\n<p>##二次排序</p>\n<pre><code></code></pre><p>mapreduce 常见的辅助排序</p>\n<ol>\n<li>partitioner</li>\n<li>key的比较Comparator</li>\n<li>分组函数Grouping Comparator</li>\n</ol>\n<h2 id=\"join\"><a href=\"#join\" class=\"headerlink\" title=\"join\"></a>join</h2><p>map join ,semi join ,reduce join</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>"},{"title":"spark学习2","date":"2018-03-04T03:12:58.000Z","_content":"# spark学习2\n## spark 运行的四种模式\n<!-- more -->\n\n### 本地模式\n如\n```\n./bin/spark-submit --class org.apache.spark.examples.SparkPi --master local[1] ./lib/spark-examples-1.3.1-hadoop2.4.0.jar 100\n```\n\n### standlone模式\n\n#### client \n./bin/spark-submit --class org.apache.spark.examples.SparkPi --master spark://spark001:7077 --executor-memory 1G --total-executor-cores 1 ./lib/spark-examples-1.3.1-hadoop2.4.0.jar 100\n#### cluster\n./bin/spark-submit --class org.apache.spark.examples.SparkPi --master spark://spark001:7077 --deploy-mode cluster --supervise --executor-memory 1G --total-executor-cores 1 ./lib/spark-examples-1.3.1-hadoop2.7.0.jar 100\n\n### Yarn模式\n#### client模式\n```\nclient模式：\n结果xshell可见：\n./bin/spark-submit --class org.apache.spark.examples.SparkPi --master yarn-client --executor-memory 1G --num-executors 1 ./lib/spark-examples-1.3.1-hadoop2.7.0.jar 100\n```\n#### cluster模式\n./bin/spark-submit --class org.apache.spark.examples.SparkPi --master yarn-cluster --executor-memory 1G --num-executors 1 ./lib/spark-examples-1.3.1-hadoop2.4.0.jar 100\n\n## spark sql\n\n\n","source":"_posts/王阁/技术/hexo/old/spark学习2.md","raw":"---\ntitle: spark学习2\ndate: 2018-03-04 11:12:58\ntags: 学习spark2\n---\n# spark学习2\n## spark 运行的四种模式\n<!-- more -->\n\n### 本地模式\n如\n```\n./bin/spark-submit --class org.apache.spark.examples.SparkPi --master local[1] ./lib/spark-examples-1.3.1-hadoop2.4.0.jar 100\n```\n\n### standlone模式\n\n#### client \n./bin/spark-submit --class org.apache.spark.examples.SparkPi --master spark://spark001:7077 --executor-memory 1G --total-executor-cores 1 ./lib/spark-examples-1.3.1-hadoop2.4.0.jar 100\n#### cluster\n./bin/spark-submit --class org.apache.spark.examples.SparkPi --master spark://spark001:7077 --deploy-mode cluster --supervise --executor-memory 1G --total-executor-cores 1 ./lib/spark-examples-1.3.1-hadoop2.7.0.jar 100\n\n### Yarn模式\n#### client模式\n```\nclient模式：\n结果xshell可见：\n./bin/spark-submit --class org.apache.spark.examples.SparkPi --master yarn-client --executor-memory 1G --num-executors 1 ./lib/spark-examples-1.3.1-hadoop2.7.0.jar 100\n```\n#### cluster模式\n./bin/spark-submit --class org.apache.spark.examples.SparkPi --master yarn-cluster --executor-memory 1G --num-executors 1 ./lib/spark-examples-1.3.1-hadoop2.4.0.jar 100\n\n## spark sql\n\n\n","slug":"王阁/技术/hexo/old/spark学习2","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsf8003bu6pw2jhf49pk","content":"<h1 id=\"spark学习2\"><a href=\"#spark学习2\" class=\"headerlink\" title=\"spark学习2\"></a>spark学习2</h1><h2 id=\"spark-运行的四种模式\"><a href=\"#spark-运行的四种模式\" class=\"headerlink\" title=\"spark 运行的四种模式\"></a>spark 运行的四种模式</h2><a id=\"more\"></a>\n\n<h3 id=\"本地模式\"><a href=\"#本地模式\" class=\"headerlink\" title=\"本地模式\"></a>本地模式</h3><p>如</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;bin&#x2F;spark-submit --class org.apache.spark.examples.SparkPi --master local[1] .&#x2F;lib&#x2F;spark-examples-1.3.1-hadoop2.4.0.jar 100</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"standlone模式\"><a href=\"#standlone模式\" class=\"headerlink\" title=\"standlone模式\"></a>standlone模式</h3><h4 id=\"client\"><a href=\"#client\" class=\"headerlink\" title=\"client\"></a>client</h4><p>./bin/spark-submit –class org.apache.spark.examples.SparkPi –master spark://spark001:7077 –executor-memory 1G –total-executor-cores 1 ./lib/spark-examples-1.3.1-hadoop2.4.0.jar 100</p>\n<h4 id=\"cluster\"><a href=\"#cluster\" class=\"headerlink\" title=\"cluster\"></a>cluster</h4><p>./bin/spark-submit –class org.apache.spark.examples.SparkPi –master spark://spark001:7077 –deploy-mode cluster –supervise –executor-memory 1G –total-executor-cores 1 ./lib/spark-examples-1.3.1-hadoop2.7.0.jar 100</p>\n<h3 id=\"Yarn模式\"><a href=\"#Yarn模式\" class=\"headerlink\" title=\"Yarn模式\"></a>Yarn模式</h3><h4 id=\"client模式\"><a href=\"#client模式\" class=\"headerlink\" title=\"client模式\"></a>client模式</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client模式：</span><br><span class=\"line\">结果xshell可见：</span><br><span class=\"line\">.&#x2F;bin&#x2F;spark-submit --class org.apache.spark.examples.SparkPi --master yarn-client --executor-memory 1G --num-executors 1 .&#x2F;lib&#x2F;spark-examples-1.3.1-hadoop2.7.0.jar 100</span><br></pre></td></tr></table></figure>\n<h4 id=\"cluster模式\"><a href=\"#cluster模式\" class=\"headerlink\" title=\"cluster模式\"></a>cluster模式</h4><p>./bin/spark-submit –class org.apache.spark.examples.SparkPi –master yarn-cluster –executor-memory 1G –num-executors 1 ./lib/spark-examples-1.3.1-hadoop2.4.0.jar 100</p>\n<h2 id=\"spark-sql\"><a href=\"#spark-sql\" class=\"headerlink\" title=\"spark sql\"></a>spark sql</h2>","site":{"data":{}},"excerpt":"<h1 id=\"spark学习2\"><a href=\"#spark学习2\" class=\"headerlink\" title=\"spark学习2\"></a>spark学习2</h1><h2 id=\"spark-运行的四种模式\"><a href=\"#spark-运行的四种模式\" class=\"headerlink\" title=\"spark 运行的四种模式\"></a>spark 运行的四种模式</h2>","more":"<h3 id=\"本地模式\"><a href=\"#本地模式\" class=\"headerlink\" title=\"本地模式\"></a>本地模式</h3><p>如</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;bin&#x2F;spark-submit --class org.apache.spark.examples.SparkPi --master local[1] .&#x2F;lib&#x2F;spark-examples-1.3.1-hadoop2.4.0.jar 100</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"standlone模式\"><a href=\"#standlone模式\" class=\"headerlink\" title=\"standlone模式\"></a>standlone模式</h3><h4 id=\"client\"><a href=\"#client\" class=\"headerlink\" title=\"client\"></a>client</h4><p>./bin/spark-submit –class org.apache.spark.examples.SparkPi –master spark://spark001:7077 –executor-memory 1G –total-executor-cores 1 ./lib/spark-examples-1.3.1-hadoop2.4.0.jar 100</p>\n<h4 id=\"cluster\"><a href=\"#cluster\" class=\"headerlink\" title=\"cluster\"></a>cluster</h4><p>./bin/spark-submit –class org.apache.spark.examples.SparkPi –master spark://spark001:7077 –deploy-mode cluster –supervise –executor-memory 1G –total-executor-cores 1 ./lib/spark-examples-1.3.1-hadoop2.7.0.jar 100</p>\n<h3 id=\"Yarn模式\"><a href=\"#Yarn模式\" class=\"headerlink\" title=\"Yarn模式\"></a>Yarn模式</h3><h4 id=\"client模式\"><a href=\"#client模式\" class=\"headerlink\" title=\"client模式\"></a>client模式</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client模式：</span><br><span class=\"line\">结果xshell可见：</span><br><span class=\"line\">.&#x2F;bin&#x2F;spark-submit --class org.apache.spark.examples.SparkPi --master yarn-client --executor-memory 1G --num-executors 1 .&#x2F;lib&#x2F;spark-examples-1.3.1-hadoop2.7.0.jar 100</span><br></pre></td></tr></table></figure>\n<h4 id=\"cluster模式\"><a href=\"#cluster模式\" class=\"headerlink\" title=\"cluster模式\"></a>cluster模式</h4><p>./bin/spark-submit –class org.apache.spark.examples.SparkPi –master yarn-cluster –executor-memory 1G –num-executors 1 ./lib/spark-examples-1.3.1-hadoop2.4.0.jar 100</p>\n<h2 id=\"spark-sql\"><a href=\"#spark-sql\" class=\"headerlink\" title=\"spark sql\"></a>spark sql</h2>"},{"title":"mapreduce组件总结","_content":"spark-core,spark-streaming再深造\n<!--more -->\n# spark go on \n\n初始规划\n\nspark-core\nspark-streaming\n\n\n\n\n","source":"_posts/王阁/技术/hexo/old/spark学习3.md","raw":"---\ntitle:  mapreduce组件总结\ntags: bigdata\n---\nspark-core,spark-streaming再深造\n<!--more -->\n# spark go on \n\n初始规划\n\nspark-core\nspark-streaming\n\n\n\n\n","slug":"王阁/技术/hexo/old/spark学习3","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfa003eu6pw1oor2dgn","content":"<p>spark-core,spark-streaming再深造</p>\n<a id=\"more\"></a>\n<h1 id=\"spark-go-on\"><a href=\"#spark-go-on\" class=\"headerlink\" title=\"spark go on\"></a>spark go on</h1><p>初始规划</p>\n<p>spark-core<br>spark-streaming</p>\n","site":{"data":{}},"excerpt":"<p>spark-core,spark-streaming再深造</p>","more":"<h1 id=\"spark-go-on\"><a href=\"#spark-go-on\" class=\"headerlink\" title=\"spark go on\"></a>spark go on</h1><p>初始规划</p>\n<p>spark-core<br>spark-streaming</p>"},{"title":"hive总结","date":"2018-12-24T15:07:45.000Z","_content":"# Hive相关点小结\n<!-- more -->\n\n## 启动指令\n1. hive ==  hive --service cli\n不需要启动server，使用本地的metastore，可以直接做一些简单的数据操作和测试。\n2. 启动hiveserver2\nhive --service hiveserver2\n3. beeline工具测试使用jdbc方式连接\nbeeline -u jdbc:hive2://localhost:10000\n\n1.managed table\n管理表。\n删除表时，数据也删除了\n\n2.external table\n外部表。\n删除表时，数据不删\n\n## 建表:\nCREATE TABLE IF NOT EXISTS t2(id int,name string,age int)\nCOMMENT 'xx'                                     //注释\nROW FORMAT DELIMITED                             //行分隔符\nFIELDS TERMINATED BY ','                         //字段分隔符，这里使用的是逗号可以根据自己的需要自行进行修改\nSTORED AS TEXTFILE ;\n### 外部表:\n CREATE  TABLE IF NOT EXISTS t2(id int,name string,age int)\n COMMENT 'xx' \n ROW FORMAT DELIMITED \n FIELDS TERMINATED BY ',' \n STORED AS TEXTFILE ; \n### 分区表，桶表\n#### 分区表\nHive中有分区表的概念。我们可以看到分区表具有重要的性能，而且分区表还可以将数据以一种符合逻辑的方式进行组织，比如分层存储。Hive的分区表，是把数据放在满足条件的分区目录下\nCREATE TABLE t3(id int,name string,age int) \n\nPARTITIONED BY (Year INT, Month INT)   //按照年月进行分区\n\n ROW FORMAT DELIMITED                      //行分隔符\n\nFIELDS TERMINATED BY ',' ;                    //字段分隔符，这里使用的是逗号可以根据自己的需要自行进行修改\nload data local inpath '/home/zpx/customers.txt' into table t3 partition\n#### 分桶表\n这样做，在查找数据的时候就可以跨越多个桶，直接查找复合条件的数据了。速度快，时间成本低。Hive中的桶表默认使用的机制也是hash。\nCREATE TABLE t4(id int,name string,age int) \n\n                   CLUSTERED BY (id) INTO 3 BUCKETS      //创建3个通桶表，按照字段id进行分桶\n\n                   ROW FORMAT DELIMITED                     //行分隔符\n\n                   FIELDS TERMINATED BY ',' ; \n\nload data local inpath '/home/centos/customers.txt' into table t4 ;\n\n## 导入数据\nload data local inpath '/home/zpx/customers.txt' into table t2 ; //local上传文件\nload data inpath '/user/zpx/customers.txt' [overwrite] into table t2 //分布式文件系统上移动文件\n\n## 建视图\nHive也可以建立视图，是一张虚表，方便我们进行操作.\n\ncreate view v1 as select a.id aid,a.name ,b.id bid , b.order from customers a left outer join default.tt b on a.id = b.cid ;\n\n## Hive的严格模式\nHive提供了一个严格模式，可以防止用户执行那些产生意想不到的不好的影响的查询。\n使用了严格模式之后主要对以下3种不良操作进行控制：\n\n1.分区表必须指定分区进行查询。\n2.order by时必须使用limit子句。\n3.不允许笛卡尔积。\n![2019-03-18-17-13-36](http://img.wqkenqing.ren/2019-03-18-17-13-36.png)\n\n## Hive的动态分区\n像分区表里面存储了数据。我们在进行存储数据的时候，都是明确的指定了分区。在这个过程中Hive也提供了一种比较任性化的操作，就是动态分区，不需要我们指定分区目录，Hive能够把数据进行动态的分发,**我们需要将当前的严格模式设置成非严格模式，否则不允许使用动态分区**\nset hive.exec.dynamic.partition.mode=nonstrict//设置非严格模式\n## Hive的排序\n\nHive也提供了一些排序的语法，包括order by,sort by。\n\norder by=MapReduce的全排序\nsort by=MapReduce的部分排序\ndistribute by=MapReduce的分区\n\nselece .......from ...... order by 字段；//按照这个字段全排序\n\nselece .......from ...... sort by 字段； //按照这个字段局部有序\n\nselece 字段.....from ...... distribute by 字段；//按照这个字段分区\n特别注意的是：\n\n1. 在上面的最后一个distribute by使用过程中，按照排序的字段要出现在最左侧也就是select中有这个字段，因为我们要告诉MapReduce你要按照哪一个字段分区，当然获取的数据中要出现这个字段了。类似于我们使用group by的用法，字段也必须出现在最左侧，因为数据要包含这个字段，才能按照这个字段分组，至于Hive什么时候会自行的开启MapReduce，那就是在使用聚合的情况下开启，使用select ...from ....以及使用分区表的selece ....from......where .....不会开启\n2. distribute by与sort by可以组合使用，但是distribute by要放在前边，因为MapReduce要先分区，后排序，再归并\n\nselect 字段a,........from .......distribute by字段a，sort by字段\n如果distribute by与sort by使用的字段一样，则可以使用cluster by 字段替代：\nselect 字段a,........from .......cluster by 字段\n\n## 函数\n\n1. show functions; 展示相关函数\n2. desc function split;\n3. desc function  extended split;  //查看函数的扩展信息\n\n### 用户自定义函数（UDF）\n具体步骤如下：\n\n（1）.自定义类（继承UDF，或是GenericUDF。GenericUDF是更为复杂的抽象概念，但是其支持更好的null值处理同时还可以处理一些标准的UDF无法支持的编程操作）。\n（2）.导出jar包，通过命令添加到hive的类路径。\n$hive>add jar xxx.jar\n（3）.注册函数\n$hive>CREATE TEMPORARY FUNCTION 函数名 AS '具体类路径：包.类';\n（4）.使用\n $hive>select 函数名(参数);\n自定义实现类如下(继承UDF)：\n\n","source":"_posts/王阁/技术/hexo/old/hive总结.md","raw":"---\ntitle:  hive总结\ndate: 2018-12-24 23:07:45\ntags: bigdata\n---\n# Hive相关点小结\n<!-- more -->\n\n## 启动指令\n1. hive ==  hive --service cli\n不需要启动server，使用本地的metastore，可以直接做一些简单的数据操作和测试。\n2. 启动hiveserver2\nhive --service hiveserver2\n3. beeline工具测试使用jdbc方式连接\nbeeline -u jdbc:hive2://localhost:10000\n\n1.managed table\n管理表。\n删除表时，数据也删除了\n\n2.external table\n外部表。\n删除表时，数据不删\n\n## 建表:\nCREATE TABLE IF NOT EXISTS t2(id int,name string,age int)\nCOMMENT 'xx'                                     //注释\nROW FORMAT DELIMITED                             //行分隔符\nFIELDS TERMINATED BY ','                         //字段分隔符，这里使用的是逗号可以根据自己的需要自行进行修改\nSTORED AS TEXTFILE ;\n### 外部表:\n CREATE  TABLE IF NOT EXISTS t2(id int,name string,age int)\n COMMENT 'xx' \n ROW FORMAT DELIMITED \n FIELDS TERMINATED BY ',' \n STORED AS TEXTFILE ; \n### 分区表，桶表\n#### 分区表\nHive中有分区表的概念。我们可以看到分区表具有重要的性能，而且分区表还可以将数据以一种符合逻辑的方式进行组织，比如分层存储。Hive的分区表，是把数据放在满足条件的分区目录下\nCREATE TABLE t3(id int,name string,age int) \n\nPARTITIONED BY (Year INT, Month INT)   //按照年月进行分区\n\n ROW FORMAT DELIMITED                      //行分隔符\n\nFIELDS TERMINATED BY ',' ;                    //字段分隔符，这里使用的是逗号可以根据自己的需要自行进行修改\nload data local inpath '/home/zpx/customers.txt' into table t3 partition\n#### 分桶表\n这样做，在查找数据的时候就可以跨越多个桶，直接查找复合条件的数据了。速度快，时间成本低。Hive中的桶表默认使用的机制也是hash。\nCREATE TABLE t4(id int,name string,age int) \n\n                   CLUSTERED BY (id) INTO 3 BUCKETS      //创建3个通桶表，按照字段id进行分桶\n\n                   ROW FORMAT DELIMITED                     //行分隔符\n\n                   FIELDS TERMINATED BY ',' ; \n\nload data local inpath '/home/centos/customers.txt' into table t4 ;\n\n## 导入数据\nload data local inpath '/home/zpx/customers.txt' into table t2 ; //local上传文件\nload data inpath '/user/zpx/customers.txt' [overwrite] into table t2 //分布式文件系统上移动文件\n\n## 建视图\nHive也可以建立视图，是一张虚表，方便我们进行操作.\n\ncreate view v1 as select a.id aid,a.name ,b.id bid , b.order from customers a left outer join default.tt b on a.id = b.cid ;\n\n## Hive的严格模式\nHive提供了一个严格模式，可以防止用户执行那些产生意想不到的不好的影响的查询。\n使用了严格模式之后主要对以下3种不良操作进行控制：\n\n1.分区表必须指定分区进行查询。\n2.order by时必须使用limit子句。\n3.不允许笛卡尔积。\n![2019-03-18-17-13-36](http://img.wqkenqing.ren/2019-03-18-17-13-36.png)\n\n## Hive的动态分区\n像分区表里面存储了数据。我们在进行存储数据的时候，都是明确的指定了分区。在这个过程中Hive也提供了一种比较任性化的操作，就是动态分区，不需要我们指定分区目录，Hive能够把数据进行动态的分发,**我们需要将当前的严格模式设置成非严格模式，否则不允许使用动态分区**\nset hive.exec.dynamic.partition.mode=nonstrict//设置非严格模式\n## Hive的排序\n\nHive也提供了一些排序的语法，包括order by,sort by。\n\norder by=MapReduce的全排序\nsort by=MapReduce的部分排序\ndistribute by=MapReduce的分区\n\nselece .......from ...... order by 字段；//按照这个字段全排序\n\nselece .......from ...... sort by 字段； //按照这个字段局部有序\n\nselece 字段.....from ...... distribute by 字段；//按照这个字段分区\n特别注意的是：\n\n1. 在上面的最后一个distribute by使用过程中，按照排序的字段要出现在最左侧也就是select中有这个字段，因为我们要告诉MapReduce你要按照哪一个字段分区，当然获取的数据中要出现这个字段了。类似于我们使用group by的用法，字段也必须出现在最左侧，因为数据要包含这个字段，才能按照这个字段分组，至于Hive什么时候会自行的开启MapReduce，那就是在使用聚合的情况下开启，使用select ...from ....以及使用分区表的selece ....from......where .....不会开启\n2. distribute by与sort by可以组合使用，但是distribute by要放在前边，因为MapReduce要先分区，后排序，再归并\n\nselect 字段a,........from .......distribute by字段a，sort by字段\n如果distribute by与sort by使用的字段一样，则可以使用cluster by 字段替代：\nselect 字段a,........from .......cluster by 字段\n\n## 函数\n\n1. show functions; 展示相关函数\n2. desc function split;\n3. desc function  extended split;  //查看函数的扩展信息\n\n### 用户自定义函数（UDF）\n具体步骤如下：\n\n（1）.自定义类（继承UDF，或是GenericUDF。GenericUDF是更为复杂的抽象概念，但是其支持更好的null值处理同时还可以处理一些标准的UDF无法支持的编程操作）。\n（2）.导出jar包，通过命令添加到hive的类路径。\n$hive>add jar xxx.jar\n（3）.注册函数\n$hive>CREATE TEMPORARY FUNCTION 函数名 AS '具体类路径：包.类';\n（4）.使用\n $hive>select 函数名(参数);\n自定义实现类如下(继承UDF)：\n\n","slug":"王阁/技术/hexo/old/hive总结","published":1,"updated":"2023-02-23T02:51:20.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfa003gu6pwedel88f3","content":"<h1 id=\"Hive相关点小结\"><a href=\"#Hive相关点小结\" class=\"headerlink\" title=\"Hive相关点小结\"></a>Hive相关点小结</h1><a id=\"more\"></a>\n\n<h2 id=\"启动指令\"><a href=\"#启动指令\" class=\"headerlink\" title=\"启动指令\"></a>启动指令</h2><ol>\n<li>hive ==  hive –service cli<br>不需要启动server，使用本地的metastore，可以直接做一些简单的数据操作和测试。</li>\n<li>启动hiveserver2<br>hive –service hiveserver2</li>\n<li>beeline工具测试使用jdbc方式连接<br>beeline -u jdbc:hive2://localhost:10000</li>\n</ol>\n<p>1.managed table<br>管理表。<br>删除表时，数据也删除了</p>\n<p>2.external table<br>外部表。<br>删除表时，数据不删</p>\n<h2 id=\"建表\"><a href=\"#建表\" class=\"headerlink\" title=\"建表:\"></a>建表:</h2><p>CREATE TABLE IF NOT EXISTS t2(id int,name string,age int)<br>COMMENT ‘xx’                                     //注释<br>ROW FORMAT DELIMITED                             //行分隔符<br>FIELDS TERMINATED BY ‘,’                         //字段分隔符，这里使用的是逗号可以根据自己的需要自行进行修改<br>STORED AS TEXTFILE ;</p>\n<h3 id=\"外部表\"><a href=\"#外部表\" class=\"headerlink\" title=\"外部表:\"></a>外部表:</h3><p> CREATE  TABLE IF NOT EXISTS t2(id int,name string,age int)<br> COMMENT ‘xx’<br> ROW FORMAT DELIMITED<br> FIELDS TERMINATED BY ‘,’<br> STORED AS TEXTFILE ; </p>\n<h3 id=\"分区表，桶表\"><a href=\"#分区表，桶表\" class=\"headerlink\" title=\"分区表，桶表\"></a>分区表，桶表</h3><h4 id=\"分区表\"><a href=\"#分区表\" class=\"headerlink\" title=\"分区表\"></a>分区表</h4><p>Hive中有分区表的概念。我们可以看到分区表具有重要的性能，而且分区表还可以将数据以一种符合逻辑的方式进行组织，比如分层存储。Hive的分区表，是把数据放在满足条件的分区目录下<br>CREATE TABLE t3(id int,name string,age int) </p>\n<p>PARTITIONED BY (Year INT, Month INT)   //按照年月进行分区</p>\n<p> ROW FORMAT DELIMITED                      //行分隔符</p>\n<p>FIELDS TERMINATED BY ‘,’ ;                    //字段分隔符，这里使用的是逗号可以根据自己的需要自行进行修改<br>load data local inpath ‘/home/zpx/customers.txt’ into table t3 partition</p>\n<h4 id=\"分桶表\"><a href=\"#分桶表\" class=\"headerlink\" title=\"分桶表\"></a>分桶表</h4><p>这样做，在查找数据的时候就可以跨越多个桶，直接查找复合条件的数据了。速度快，时间成本低。Hive中的桶表默认使用的机制也是hash。<br>CREATE TABLE t4(id int,name string,age int) </p>\n<pre><code>CLUSTERED BY (id) INTO 3 BUCKETS      //创建3个通桶表，按照字段id进行分桶\n\nROW FORMAT DELIMITED                     //行分隔符\n\nFIELDS TERMINATED BY &apos;,&apos; ; </code></pre><p>load data local inpath ‘/home/centos/customers.txt’ into table t4 ;</p>\n<h2 id=\"导入数据\"><a href=\"#导入数据\" class=\"headerlink\" title=\"导入数据\"></a>导入数据</h2><p>load data local inpath ‘/home/zpx/customers.txt’ into table t2 ; //local上传文件<br>load data inpath ‘/user/zpx/customers.txt’ [overwrite] into table t2 //分布式文件系统上移动文件</p>\n<h2 id=\"建视图\"><a href=\"#建视图\" class=\"headerlink\" title=\"建视图\"></a>建视图</h2><p>Hive也可以建立视图，是一张虚表，方便我们进行操作.</p>\n<p>create view v1 as select a.id aid,a.name ,b.id bid , b.order from customers a left outer join default.tt b on a.id = b.cid ;</p>\n<h2 id=\"Hive的严格模式\"><a href=\"#Hive的严格模式\" class=\"headerlink\" title=\"Hive的严格模式\"></a>Hive的严格模式</h2><p>Hive提供了一个严格模式，可以防止用户执行那些产生意想不到的不好的影响的查询。<br>使用了严格模式之后主要对以下3种不良操作进行控制：</p>\n<p>1.分区表必须指定分区进行查询。<br>2.order by时必须使用limit子句。<br>3.不允许笛卡尔积。<br><img src=\"http://img.wqkenqing.ren/2019-03-18-17-13-36.png\" alt=\"2019-03-18-17-13-36\"></p>\n<h2 id=\"Hive的动态分区\"><a href=\"#Hive的动态分区\" class=\"headerlink\" title=\"Hive的动态分区\"></a>Hive的动态分区</h2><p>像分区表里面存储了数据。我们在进行存储数据的时候，都是明确的指定了分区。在这个过程中Hive也提供了一种比较任性化的操作，就是动态分区，不需要我们指定分区目录，Hive能够把数据进行动态的分发,<strong>我们需要将当前的严格模式设置成非严格模式，否则不允许使用动态分区</strong><br>set hive.exec.dynamic.partition.mode=nonstrict//设置非严格模式</p>\n<h2 id=\"Hive的排序\"><a href=\"#Hive的排序\" class=\"headerlink\" title=\"Hive的排序\"></a>Hive的排序</h2><p>Hive也提供了一些排序的语法，包括order by,sort by。</p>\n<p>order by=MapReduce的全排序<br>sort by=MapReduce的部分排序<br>distribute by=MapReduce的分区</p>\n<p>selece …….from …… order by 字段；//按照这个字段全排序</p>\n<p>selece …….from …… sort by 字段； //按照这个字段局部有序</p>\n<p>selece 字段…..from …… distribute by 字段；//按照这个字段分区<br>特别注意的是：</p>\n<ol>\n<li>在上面的最后一个distribute by使用过程中，按照排序的字段要出现在最左侧也就是select中有这个字段，因为我们要告诉MapReduce你要按照哪一个字段分区，当然获取的数据中要出现这个字段了。类似于我们使用group by的用法，字段也必须出现在最左侧，因为数据要包含这个字段，才能按照这个字段分组，至于Hive什么时候会自行的开启MapReduce，那就是在使用聚合的情况下开启，使用select …from ….以及使用分区表的selece ….from……where …..不会开启</li>\n<li>distribute by与sort by可以组合使用，但是distribute by要放在前边，因为MapReduce要先分区，后排序，再归并</li>\n</ol>\n<p>select 字段a,……..from …….distribute by字段a，sort by字段<br>如果distribute by与sort by使用的字段一样，则可以使用cluster by 字段替代：<br>select 字段a,……..from …….cluster by 字段</p>\n<h2 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h2><ol>\n<li>show functions; 展示相关函数</li>\n<li>desc function split;</li>\n<li>desc function  extended split;  //查看函数的扩展信息</li>\n</ol>\n<h3 id=\"用户自定义函数（UDF）\"><a href=\"#用户自定义函数（UDF）\" class=\"headerlink\" title=\"用户自定义函数（UDF）\"></a>用户自定义函数（UDF）</h3><p>具体步骤如下：</p>\n<p>（1）.自定义类（继承UDF，或是GenericUDF。GenericUDF是更为复杂的抽象概念，但是其支持更好的null值处理同时还可以处理一些标准的UDF无法支持的编程操作）。<br>（2）.导出jar包，通过命令添加到hive的类路径。<br>$hive&gt;add jar xxx.jar<br>（3）.注册函数<br>$hive&gt;CREATE TEMPORARY FUNCTION 函数名 AS ‘具体类路径：包.类’;<br>（4）.使用<br> $hive&gt;select 函数名(参数);<br>自定义实现类如下(继承UDF)：</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"Hive相关点小结\"><a href=\"#Hive相关点小结\" class=\"headerlink\" title=\"Hive相关点小结\"></a>Hive相关点小结</h1>","more":"<h2 id=\"启动指令\"><a href=\"#启动指令\" class=\"headerlink\" title=\"启动指令\"></a>启动指令</h2><ol>\n<li>hive ==  hive –service cli<br>不需要启动server，使用本地的metastore，可以直接做一些简单的数据操作和测试。</li>\n<li>启动hiveserver2<br>hive –service hiveserver2</li>\n<li>beeline工具测试使用jdbc方式连接<br>beeline -u jdbc:hive2://localhost:10000</li>\n</ol>\n<p>1.managed table<br>管理表。<br>删除表时，数据也删除了</p>\n<p>2.external table<br>外部表。<br>删除表时，数据不删</p>\n<h2 id=\"建表\"><a href=\"#建表\" class=\"headerlink\" title=\"建表:\"></a>建表:</h2><p>CREATE TABLE IF NOT EXISTS t2(id int,name string,age int)<br>COMMENT ‘xx’                                     //注释<br>ROW FORMAT DELIMITED                             //行分隔符<br>FIELDS TERMINATED BY ‘,’                         //字段分隔符，这里使用的是逗号可以根据自己的需要自行进行修改<br>STORED AS TEXTFILE ;</p>\n<h3 id=\"外部表\"><a href=\"#外部表\" class=\"headerlink\" title=\"外部表:\"></a>外部表:</h3><p> CREATE  TABLE IF NOT EXISTS t2(id int,name string,age int)<br> COMMENT ‘xx’<br> ROW FORMAT DELIMITED<br> FIELDS TERMINATED BY ‘,’<br> STORED AS TEXTFILE ; </p>\n<h3 id=\"分区表，桶表\"><a href=\"#分区表，桶表\" class=\"headerlink\" title=\"分区表，桶表\"></a>分区表，桶表</h3><h4 id=\"分区表\"><a href=\"#分区表\" class=\"headerlink\" title=\"分区表\"></a>分区表</h4><p>Hive中有分区表的概念。我们可以看到分区表具有重要的性能，而且分区表还可以将数据以一种符合逻辑的方式进行组织，比如分层存储。Hive的分区表，是把数据放在满足条件的分区目录下<br>CREATE TABLE t3(id int,name string,age int) </p>\n<p>PARTITIONED BY (Year INT, Month INT)   //按照年月进行分区</p>\n<p> ROW FORMAT DELIMITED                      //行分隔符</p>\n<p>FIELDS TERMINATED BY ‘,’ ;                    //字段分隔符，这里使用的是逗号可以根据自己的需要自行进行修改<br>load data local inpath ‘/home/zpx/customers.txt’ into table t3 partition</p>\n<h4 id=\"分桶表\"><a href=\"#分桶表\" class=\"headerlink\" title=\"分桶表\"></a>分桶表</h4><p>这样做，在查找数据的时候就可以跨越多个桶，直接查找复合条件的数据了。速度快，时间成本低。Hive中的桶表默认使用的机制也是hash。<br>CREATE TABLE t4(id int,name string,age int) </p>\n<pre><code>CLUSTERED BY (id) INTO 3 BUCKETS      //创建3个通桶表，按照字段id进行分桶\n\nROW FORMAT DELIMITED                     //行分隔符\n\nFIELDS TERMINATED BY &apos;,&apos; ; </code></pre><p>load data local inpath ‘/home/centos/customers.txt’ into table t4 ;</p>\n<h2 id=\"导入数据\"><a href=\"#导入数据\" class=\"headerlink\" title=\"导入数据\"></a>导入数据</h2><p>load data local inpath ‘/home/zpx/customers.txt’ into table t2 ; //local上传文件<br>load data inpath ‘/user/zpx/customers.txt’ [overwrite] into table t2 //分布式文件系统上移动文件</p>\n<h2 id=\"建视图\"><a href=\"#建视图\" class=\"headerlink\" title=\"建视图\"></a>建视图</h2><p>Hive也可以建立视图，是一张虚表，方便我们进行操作.</p>\n<p>create view v1 as select a.id aid,a.name ,b.id bid , b.order from customers a left outer join default.tt b on a.id = b.cid ;</p>\n<h2 id=\"Hive的严格模式\"><a href=\"#Hive的严格模式\" class=\"headerlink\" title=\"Hive的严格模式\"></a>Hive的严格模式</h2><p>Hive提供了一个严格模式，可以防止用户执行那些产生意想不到的不好的影响的查询。<br>使用了严格模式之后主要对以下3种不良操作进行控制：</p>\n<p>1.分区表必须指定分区进行查询。<br>2.order by时必须使用limit子句。<br>3.不允许笛卡尔积。<br><img src=\"http://img.wqkenqing.ren/2019-03-18-17-13-36.png\" alt=\"2019-03-18-17-13-36\"></p>\n<h2 id=\"Hive的动态分区\"><a href=\"#Hive的动态分区\" class=\"headerlink\" title=\"Hive的动态分区\"></a>Hive的动态分区</h2><p>像分区表里面存储了数据。我们在进行存储数据的时候，都是明确的指定了分区。在这个过程中Hive也提供了一种比较任性化的操作，就是动态分区，不需要我们指定分区目录，Hive能够把数据进行动态的分发,<strong>我们需要将当前的严格模式设置成非严格模式，否则不允许使用动态分区</strong><br>set hive.exec.dynamic.partition.mode=nonstrict//设置非严格模式</p>\n<h2 id=\"Hive的排序\"><a href=\"#Hive的排序\" class=\"headerlink\" title=\"Hive的排序\"></a>Hive的排序</h2><p>Hive也提供了一些排序的语法，包括order by,sort by。</p>\n<p>order by=MapReduce的全排序<br>sort by=MapReduce的部分排序<br>distribute by=MapReduce的分区</p>\n<p>selece …….from …… order by 字段；//按照这个字段全排序</p>\n<p>selece …….from …… sort by 字段； //按照这个字段局部有序</p>\n<p>selece 字段…..from …… distribute by 字段；//按照这个字段分区<br>特别注意的是：</p>\n<ol>\n<li>在上面的最后一个distribute by使用过程中，按照排序的字段要出现在最左侧也就是select中有这个字段，因为我们要告诉MapReduce你要按照哪一个字段分区，当然获取的数据中要出现这个字段了。类似于我们使用group by的用法，字段也必须出现在最左侧，因为数据要包含这个字段，才能按照这个字段分组，至于Hive什么时候会自行的开启MapReduce，那就是在使用聚合的情况下开启，使用select …from ….以及使用分区表的selece ….from……where …..不会开启</li>\n<li>distribute by与sort by可以组合使用，但是distribute by要放在前边，因为MapReduce要先分区，后排序，再归并</li>\n</ol>\n<p>select 字段a,……..from …….distribute by字段a，sort by字段<br>如果distribute by与sort by使用的字段一样，则可以使用cluster by 字段替代：<br>select 字段a,……..from …….cluster by 字段</p>\n<h2 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h2><ol>\n<li>show functions; 展示相关函数</li>\n<li>desc function split;</li>\n<li>desc function  extended split;  //查看函数的扩展信息</li>\n</ol>\n<h3 id=\"用户自定义函数（UDF）\"><a href=\"#用户自定义函数（UDF）\" class=\"headerlink\" title=\"用户自定义函数（UDF）\"></a>用户自定义函数（UDF）</h3><p>具体步骤如下：</p>\n<p>（1）.自定义类（继承UDF，或是GenericUDF。GenericUDF是更为复杂的抽象概念，但是其支持更好的null值处理同时还可以处理一些标准的UDF无法支持的编程操作）。<br>（2）.导出jar包，通过命令添加到hive的类路径。<br>$hive&gt;add jar xxx.jar<br>（3）.注册函数<br>$hive&gt;CREATE TEMPORARY FUNCTION 函数名 AS ‘具体类路径：包.类’;<br>（4）.使用<br> $hive&gt;select 函数名(参数);<br>自定义实现类如下(继承UDF)：</p>"},{"title":"spark算子","date":"2018-03-04T03:12:05.000Z","_content":"\n\n# spark 算子\n<!-- more -->\n```\nsparkRDD封装的函数方法又称算子,通过这些算子可以对RDD进行相关处理,从而获我们想要的结果,因为可能涉及的算子较多.因此单独开篇进行粒度更细,更集中的总结.\n\n总得来讲spark的算子,本就是scala集合的一些高阶用法.\n\n```\n## Transformation(转换)\n不触发提交作业，完成作业中间处理过程。\n\n### parallelize (并行化)\n将一个存在的集合，变成一个RDD ,返回的是一个JavaRDD[T] \n** in scala **\n``` scala \n sc.parallelize(List(\"shenzhen\", \"is a beautiful city\"))\n ```\n ** in java **\n ```java\n JavaRDD<String> javaStringRDD = sc.parallelize(Arrays.asList(\"shenzhen\", \"is a beautiful city\"));\n```\n### makeRDD\n只有scala版本的才有makeRDD ,与parallelize类似.\n\n### textFile\n调用SparkContext.textFile()方法，从外部存储中读取数据来创建 RDD \n** in scala **\n ``` scala\n var lines = sc.textFile(inpath) \n```\n```java\n// java\n JavaRDD<String> lines = sc.textFile(inpath);\n```\n\n### filter\n对RDD数据进行过滤\n### map\n接收一个函数,并将这个函数作用于RDD中的每个元素.RDD 中对应**元素的值 map是一对一的关系 **\n\n### flatMap\n有时候，我们希望对某个元素生成多个元素，实现该功能的操作叫作 flatMap() ,faltMap的函数应用于每一个元素，对于每一个元素返回的是多个元素组成的迭代器\n\n### distinct\n去重,我们生成的RDD可能有重复的元素，使用distinct方法可以去掉重复的元素, 不过此方法涉及到混洗，操作开销很大 \n### union\n两个RDD进行合并 \n### intersection\nRDD1.intersection(RDD2) 返回两个RDD的交集，** 并且去重 **\nintersection 需要混洗数据，比较浪费性能\n### subtract\nRDD1.subtract(RDD2),返回在RDD1中出现，但是不在RDD2中出现的元素，不去重 \n### cartesian\ncartesian(RDD2) 返回RDD1和RDD2的笛卡儿积，这个开销非常大\n### mapToPair \n将元素该成key-value形式\n### flatMapToPair\n差异同mapToPair\n### combineByKey\n该方法主要针对不同分区的同一key进行元素合并函数操作.\n需要对pairRDD进行\n1. createCombiner  会遍历分区中的所有元素，因此每个元素的键要么还没有遇到过,要么就 \n和之前的某个元素的键相同。如果这是一个新的元素， combineByKey() 会使用一个叫作 createCombiner() 的函数来创建 \n那个键对应的累加器的初始值\n2. mergeValue 如果这是一个在处理当前分区之前已经遇到的键， 它会使用 mergeValue() 方法将该键的累加器对应的当前值与这个新的值进行合并\n3. mergeCombiners 于每个分区都是独立处理的， 因此对于同一个键可以有多个累加器。如果有两个或者更 \n多的分区都有对应同一个键的累加器， 就需要使用用户提供的 mergeCombiners() 方法将各 \n个分区的结果进行合并。\n### reduceByKey\n接收一个函数，按照相同的key进行reduce操\n### foldByKey\n该函数用于RDD[K,V]根据K将V做折叠、合并处理，其中的参数zeroValue表示先根据映射函数将zeroValue应用于V,进行初始化V,再将映射函数应用于初始化后的V ,与reduce不同的是 foldByKey开始折叠的第一个元素不是集合中的第一个元素，而是传入的一个元素 \n### sortByKey\nSortByKey用于对pairRDD按照key进行排序，第一个参数可以设置true或者false，默认是true \n### groupByKey\ngroupByKey会将RDD[key,value] 按照相同的key进行分组，形成RDD[key,Iterable[value]]的形式， 有点类似于sql中的groupby，例如类似于mysql中的group_concat \n### cogroup\ngroupByKey是对单个 RDD 的数据进行分组，还可以使用一个叫作 cogroup() 的函数对多个共享同一个键的 RDD 进行分组\nRDD1.cogroup(RDD2) 会将RDD1和RDD2按照相同的key进行分组，得到(key,RDD[key,Iterable[value1],Iterable[value2]])的形式 \n### subtractByKey\n类似于subtrac，删掉 RDD 中键与 other RDD 中的键相同的元素\n### join\n可以把RDD1,RDD2中的相同的key给连接起来，类似于sql中的join操作\nRDD1.join(RDD2) \n### fullOuterJoin\n全连接\n### leftOuterJoin\n### rightOuterJoin\n\n\n## Action\n### first\n返回第一个元素 \n### take\nrdd.take(n)返回第n个元素 \n### collect\nrdd.collect() 返回 RDD 中的所有元素 \n### count\nrdd.count() 返回 RDD 中的元素个数 \n### countByValue\n各元素在 RDD 中出现的次数 返回{(key1,次数),(key2,次数),…(keyn,次数)} \n### reduce\n并行整合RDD中所有数据\n### fold\n和 reduce() 一 样， 但是提供了初始值num,每个元素计算时，先要合这个初始值进行折叠, 注意，这里会按照每个分区进行fold，然后分区之间还会再次进行fold \n### top\nrdd.top(n) \n按照降序的或者指定的排序规则，返回前n个元素 \n### takeOrdered\nrdd.take(n) \n对RDD元素进行升序排序,取出前n个元素并返回，也可以自定义比较器（这里不介绍），类似于top的相反的方法 \n### foreach\n对 RDD 中的每个元素使用给 \n定的函数\n### countByKey\n以RDD{(1, 2),(2,4),(2,5), (3, 4),(3,5), (3, 6)}为例 rdd.countByKey会返回{(1,1),(2,2),(3,3)} \n### collectAsMap\n将pair类型(键值对类型)的RDD转换成map, 还是上面的例子\n### saveAsTextFile\nsaveAsTextFile用于将RDD以文本文件的格式存储到文件系统中。\n### saveAsSequenceFile\nsaveAsSequenceFile用于将RDD以SequenceFile的文件格式保存到HDFS上。\n### saveAsObjectFile\nsaveAsObjectFile用于将RDD中的元素序列化成对象，存储到文件中。\n### saveAsHadoopFile\n\n### saveAsNewAPIHadoopFile\n\n### mapPartitions \n### mapPartitionsWithIndex\n### HashPartitioner\n### RangePartitioner\n### 自定义分区","source":"_posts/王阁/技术/hexo/old/spark算子.md","raw":"---\ntitle: spark算子\ntags: spark学习\ndate: 2018-03-04 11:12:5\n---\n\n\n# spark 算子\n<!-- more -->\n```\nsparkRDD封装的函数方法又称算子,通过这些算子可以对RDD进行相关处理,从而获我们想要的结果,因为可能涉及的算子较多.因此单独开篇进行粒度更细,更集中的总结.\n\n总得来讲spark的算子,本就是scala集合的一些高阶用法.\n\n```\n## Transformation(转换)\n不触发提交作业，完成作业中间处理过程。\n\n### parallelize (并行化)\n将一个存在的集合，变成一个RDD ,返回的是一个JavaRDD[T] \n** in scala **\n``` scala \n sc.parallelize(List(\"shenzhen\", \"is a beautiful city\"))\n ```\n ** in java **\n ```java\n JavaRDD<String> javaStringRDD = sc.parallelize(Arrays.asList(\"shenzhen\", \"is a beautiful city\"));\n```\n### makeRDD\n只有scala版本的才有makeRDD ,与parallelize类似.\n\n### textFile\n调用SparkContext.textFile()方法，从外部存储中读取数据来创建 RDD \n** in scala **\n ``` scala\n var lines = sc.textFile(inpath) \n```\n```java\n// java\n JavaRDD<String> lines = sc.textFile(inpath);\n```\n\n### filter\n对RDD数据进行过滤\n### map\n接收一个函数,并将这个函数作用于RDD中的每个元素.RDD 中对应**元素的值 map是一对一的关系 **\n\n### flatMap\n有时候，我们希望对某个元素生成多个元素，实现该功能的操作叫作 flatMap() ,faltMap的函数应用于每一个元素，对于每一个元素返回的是多个元素组成的迭代器\n\n### distinct\n去重,我们生成的RDD可能有重复的元素，使用distinct方法可以去掉重复的元素, 不过此方法涉及到混洗，操作开销很大 \n### union\n两个RDD进行合并 \n### intersection\nRDD1.intersection(RDD2) 返回两个RDD的交集，** 并且去重 **\nintersection 需要混洗数据，比较浪费性能\n### subtract\nRDD1.subtract(RDD2),返回在RDD1中出现，但是不在RDD2中出现的元素，不去重 \n### cartesian\ncartesian(RDD2) 返回RDD1和RDD2的笛卡儿积，这个开销非常大\n### mapToPair \n将元素该成key-value形式\n### flatMapToPair\n差异同mapToPair\n### combineByKey\n该方法主要针对不同分区的同一key进行元素合并函数操作.\n需要对pairRDD进行\n1. createCombiner  会遍历分区中的所有元素，因此每个元素的键要么还没有遇到过,要么就 \n和之前的某个元素的键相同。如果这是一个新的元素， combineByKey() 会使用一个叫作 createCombiner() 的函数来创建 \n那个键对应的累加器的初始值\n2. mergeValue 如果这是一个在处理当前分区之前已经遇到的键， 它会使用 mergeValue() 方法将该键的累加器对应的当前值与这个新的值进行合并\n3. mergeCombiners 于每个分区都是独立处理的， 因此对于同一个键可以有多个累加器。如果有两个或者更 \n多的分区都有对应同一个键的累加器， 就需要使用用户提供的 mergeCombiners() 方法将各 \n个分区的结果进行合并。\n### reduceByKey\n接收一个函数，按照相同的key进行reduce操\n### foldByKey\n该函数用于RDD[K,V]根据K将V做折叠、合并处理，其中的参数zeroValue表示先根据映射函数将zeroValue应用于V,进行初始化V,再将映射函数应用于初始化后的V ,与reduce不同的是 foldByKey开始折叠的第一个元素不是集合中的第一个元素，而是传入的一个元素 \n### sortByKey\nSortByKey用于对pairRDD按照key进行排序，第一个参数可以设置true或者false，默认是true \n### groupByKey\ngroupByKey会将RDD[key,value] 按照相同的key进行分组，形成RDD[key,Iterable[value]]的形式， 有点类似于sql中的groupby，例如类似于mysql中的group_concat \n### cogroup\ngroupByKey是对单个 RDD 的数据进行分组，还可以使用一个叫作 cogroup() 的函数对多个共享同一个键的 RDD 进行分组\nRDD1.cogroup(RDD2) 会将RDD1和RDD2按照相同的key进行分组，得到(key,RDD[key,Iterable[value1],Iterable[value2]])的形式 \n### subtractByKey\n类似于subtrac，删掉 RDD 中键与 other RDD 中的键相同的元素\n### join\n可以把RDD1,RDD2中的相同的key给连接起来，类似于sql中的join操作\nRDD1.join(RDD2) \n### fullOuterJoin\n全连接\n### leftOuterJoin\n### rightOuterJoin\n\n\n## Action\n### first\n返回第一个元素 \n### take\nrdd.take(n)返回第n个元素 \n### collect\nrdd.collect() 返回 RDD 中的所有元素 \n### count\nrdd.count() 返回 RDD 中的元素个数 \n### countByValue\n各元素在 RDD 中出现的次数 返回{(key1,次数),(key2,次数),…(keyn,次数)} \n### reduce\n并行整合RDD中所有数据\n### fold\n和 reduce() 一 样， 但是提供了初始值num,每个元素计算时，先要合这个初始值进行折叠, 注意，这里会按照每个分区进行fold，然后分区之间还会再次进行fold \n### top\nrdd.top(n) \n按照降序的或者指定的排序规则，返回前n个元素 \n### takeOrdered\nrdd.take(n) \n对RDD元素进行升序排序,取出前n个元素并返回，也可以自定义比较器（这里不介绍），类似于top的相反的方法 \n### foreach\n对 RDD 中的每个元素使用给 \n定的函数\n### countByKey\n以RDD{(1, 2),(2,4),(2,5), (3, 4),(3,5), (3, 6)}为例 rdd.countByKey会返回{(1,1),(2,2),(3,3)} \n### collectAsMap\n将pair类型(键值对类型)的RDD转换成map, 还是上面的例子\n### saveAsTextFile\nsaveAsTextFile用于将RDD以文本文件的格式存储到文件系统中。\n### saveAsSequenceFile\nsaveAsSequenceFile用于将RDD以SequenceFile的文件格式保存到HDFS上。\n### saveAsObjectFile\nsaveAsObjectFile用于将RDD中的元素序列化成对象，存储到文件中。\n### saveAsHadoopFile\n\n### saveAsNewAPIHadoopFile\n\n### mapPartitions \n### mapPartitionsWithIndex\n### HashPartitioner\n### RangePartitioner\n### 自定义分区","slug":"王阁/技术/hexo/old/spark算子","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfb003ju6pwfpzb0oo3","content":"<h1 id=\"spark-算子\"><a href=\"#spark-算子\" class=\"headerlink\" title=\"spark 算子\"></a>spark 算子</h1><a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sparkRDD封装的函数方法又称算子,通过这些算子可以对RDD进行相关处理,从而获我们想要的结果,因为可能涉及的算子较多.因此单独开篇进行粒度更细,更集中的总结.</span><br><span class=\"line\"></span><br><span class=\"line\">总得来讲spark的算子,本就是scala集合的一些高阶用法.</span><br></pre></td></tr></table></figure>\n<h2 id=\"Transformation-转换\"><a href=\"#Transformation-转换\" class=\"headerlink\" title=\"Transformation(转换)\"></a>Transformation(转换)</h2><p>不触发提交作业，完成作业中间处理过程。</p>\n<h3 id=\"parallelize-并行化\"><a href=\"#parallelize-并行化\" class=\"headerlink\" title=\"parallelize (并行化)\"></a>parallelize (并行化)</h3><p>将一个存在的集合，变成一个RDD ,返回的是一个JavaRDD[T]<br>** in scala **</p>\n<figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sc.parallelize(<span class=\"type\">List</span>(<span class=\"string\">\"shenzhen\"</span>, <span class=\"string\">\"is a beautiful city\"</span>))</span><br></pre></td></tr></table></figure>\n<p> ** in java **<br> <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JavaRDD&lt;String&gt; javaStringRDD = sc.parallelize(Arrays.asList(<span class=\"string\">\"shenzhen\"</span>, <span class=\"string\">\"is a beautiful city\"</span>));</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"makeRDD\"><a href=\"#makeRDD\" class=\"headerlink\" title=\"makeRDD\"></a>makeRDD</h3><p>只有scala版本的才有makeRDD ,与parallelize类似.</p>\n<h3 id=\"textFile\"><a href=\"#textFile\" class=\"headerlink\" title=\"textFile\"></a>textFile</h3><p>调用SparkContext.textFile()方法，从外部存储中读取数据来创建 RDD<br>** in scala **<br> <figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> lines = sc.textFile(inpath)</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"> JavaRDD&lt;String&gt; lines = sc.textFile(inpath);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"filter\"><a href=\"#filter\" class=\"headerlink\" title=\"filter\"></a>filter</h3><p>对RDD数据进行过滤</p>\n<h3 id=\"map\"><a href=\"#map\" class=\"headerlink\" title=\"map\"></a>map</h3><p>接收一个函数,并将这个函数作用于RDD中的每个元素.RDD 中对应*<em>元素的值 map是一对一的关系 *</em></p>\n<h3 id=\"flatMap\"><a href=\"#flatMap\" class=\"headerlink\" title=\"flatMap\"></a>flatMap</h3><p>有时候，我们希望对某个元素生成多个元素，实现该功能的操作叫作 flatMap() ,faltMap的函数应用于每一个元素，对于每一个元素返回的是多个元素组成的迭代器</p>\n<h3 id=\"distinct\"><a href=\"#distinct\" class=\"headerlink\" title=\"distinct\"></a>distinct</h3><p>去重,我们生成的RDD可能有重复的元素，使用distinct方法可以去掉重复的元素, 不过此方法涉及到混洗，操作开销很大 </p>\n<h3 id=\"union\"><a href=\"#union\" class=\"headerlink\" title=\"union\"></a>union</h3><p>两个RDD进行合并 </p>\n<h3 id=\"intersection\"><a href=\"#intersection\" class=\"headerlink\" title=\"intersection\"></a>intersection</h3><p>RDD1.intersection(RDD2) 返回两个RDD的交集，** 并且去重 **<br>intersection 需要混洗数据，比较浪费性能</p>\n<h3 id=\"subtract\"><a href=\"#subtract\" class=\"headerlink\" title=\"subtract\"></a>subtract</h3><p>RDD1.subtract(RDD2),返回在RDD1中出现，但是不在RDD2中出现的元素，不去重 </p>\n<h3 id=\"cartesian\"><a href=\"#cartesian\" class=\"headerlink\" title=\"cartesian\"></a>cartesian</h3><p>cartesian(RDD2) 返回RDD1和RDD2的笛卡儿积，这个开销非常大</p>\n<h3 id=\"mapToPair\"><a href=\"#mapToPair\" class=\"headerlink\" title=\"mapToPair\"></a>mapToPair</h3><p>将元素该成key-value形式</p>\n<h3 id=\"flatMapToPair\"><a href=\"#flatMapToPair\" class=\"headerlink\" title=\"flatMapToPair\"></a>flatMapToPair</h3><p>差异同mapToPair</p>\n<h3 id=\"combineByKey\"><a href=\"#combineByKey\" class=\"headerlink\" title=\"combineByKey\"></a>combineByKey</h3><p>该方法主要针对不同分区的同一key进行元素合并函数操作.<br>需要对pairRDD进行</p>\n<ol>\n<li>createCombiner  会遍历分区中的所有元素，因此每个元素的键要么还没有遇到过,要么就<br>和之前的某个元素的键相同。如果这是一个新的元素， combineByKey() 会使用一个叫作 createCombiner() 的函数来创建<br>那个键对应的累加器的初始值</li>\n<li>mergeValue 如果这是一个在处理当前分区之前已经遇到的键， 它会使用 mergeValue() 方法将该键的累加器对应的当前值与这个新的值进行合并</li>\n<li>mergeCombiners 于每个分区都是独立处理的， 因此对于同一个键可以有多个累加器。如果有两个或者更<br>多的分区都有对应同一个键的累加器， 就需要使用用户提供的 mergeCombiners() 方法将各<br>个分区的结果进行合并。<h3 id=\"reduceByKey\"><a href=\"#reduceByKey\" class=\"headerlink\" title=\"reduceByKey\"></a>reduceByKey</h3>接收一个函数，按照相同的key进行reduce操<h3 id=\"foldByKey\"><a href=\"#foldByKey\" class=\"headerlink\" title=\"foldByKey\"></a>foldByKey</h3>该函数用于RDD[K,V]根据K将V做折叠、合并处理，其中的参数zeroValue表示先根据映射函数将zeroValue应用于V,进行初始化V,再将映射函数应用于初始化后的V ,与reduce不同的是 foldByKey开始折叠的第一个元素不是集合中的第一个元素，而是传入的一个元素 <h3 id=\"sortByKey\"><a href=\"#sortByKey\" class=\"headerlink\" title=\"sortByKey\"></a>sortByKey</h3>SortByKey用于对pairRDD按照key进行排序，第一个参数可以设置true或者false，默认是true <h3 id=\"groupByKey\"><a href=\"#groupByKey\" class=\"headerlink\" title=\"groupByKey\"></a>groupByKey</h3>groupByKey会将RDD[key,value] 按照相同的key进行分组，形成RDD[key,Iterable[value]]的形式， 有点类似于sql中的groupby，例如类似于mysql中的group_concat <h3 id=\"cogroup\"><a href=\"#cogroup\" class=\"headerlink\" title=\"cogroup\"></a>cogroup</h3>groupByKey是对单个 RDD 的数据进行分组，还可以使用一个叫作 cogroup() 的函数对多个共享同一个键的 RDD 进行分组<br>RDD1.cogroup(RDD2) 会将RDD1和RDD2按照相同的key进行分组，得到(key,RDD[key,Iterable[value1],Iterable[value2]])的形式 <h3 id=\"subtractByKey\"><a href=\"#subtractByKey\" class=\"headerlink\" title=\"subtractByKey\"></a>subtractByKey</h3>类似于subtrac，删掉 RDD 中键与 other RDD 中的键相同的元素<h3 id=\"join\"><a href=\"#join\" class=\"headerlink\" title=\"join\"></a>join</h3>可以把RDD1,RDD2中的相同的key给连接起来，类似于sql中的join操作<br>RDD1.join(RDD2) <h3 id=\"fullOuterJoin\"><a href=\"#fullOuterJoin\" class=\"headerlink\" title=\"fullOuterJoin\"></a>fullOuterJoin</h3>全连接<h3 id=\"leftOuterJoin\"><a href=\"#leftOuterJoin\" class=\"headerlink\" title=\"leftOuterJoin\"></a>leftOuterJoin</h3><h3 id=\"rightOuterJoin\"><a href=\"#rightOuterJoin\" class=\"headerlink\" title=\"rightOuterJoin\"></a>rightOuterJoin</h3></li>\n</ol>\n<h2 id=\"Action\"><a href=\"#Action\" class=\"headerlink\" title=\"Action\"></a>Action</h2><h3 id=\"first\"><a href=\"#first\" class=\"headerlink\" title=\"first\"></a>first</h3><p>返回第一个元素 </p>\n<h3 id=\"take\"><a href=\"#take\" class=\"headerlink\" title=\"take\"></a>take</h3><p>rdd.take(n)返回第n个元素 </p>\n<h3 id=\"collect\"><a href=\"#collect\" class=\"headerlink\" title=\"collect\"></a>collect</h3><p>rdd.collect() 返回 RDD 中的所有元素 </p>\n<h3 id=\"count\"><a href=\"#count\" class=\"headerlink\" title=\"count\"></a>count</h3><p>rdd.count() 返回 RDD 中的元素个数 </p>\n<h3 id=\"countByValue\"><a href=\"#countByValue\" class=\"headerlink\" title=\"countByValue\"></a>countByValue</h3><p>各元素在 RDD 中出现的次数 返回{(key1,次数),(key2,次数),…(keyn,次数)} </p>\n<h3 id=\"reduce\"><a href=\"#reduce\" class=\"headerlink\" title=\"reduce\"></a>reduce</h3><p>并行整合RDD中所有数据</p>\n<h3 id=\"fold\"><a href=\"#fold\" class=\"headerlink\" title=\"fold\"></a>fold</h3><p>和 reduce() 一 样， 但是提供了初始值num,每个元素计算时，先要合这个初始值进行折叠, 注意，这里会按照每个分区进行fold，然后分区之间还会再次进行fold </p>\n<h3 id=\"top\"><a href=\"#top\" class=\"headerlink\" title=\"top\"></a>top</h3><p>rdd.top(n)<br>按照降序的或者指定的排序规则，返回前n个元素 </p>\n<h3 id=\"takeOrdered\"><a href=\"#takeOrdered\" class=\"headerlink\" title=\"takeOrdered\"></a>takeOrdered</h3><p>rdd.take(n)<br>对RDD元素进行升序排序,取出前n个元素并返回，也可以自定义比较器（这里不介绍），类似于top的相反的方法 </p>\n<h3 id=\"foreach\"><a href=\"#foreach\" class=\"headerlink\" title=\"foreach\"></a>foreach</h3><p>对 RDD 中的每个元素使用给<br>定的函数</p>\n<h3 id=\"countByKey\"><a href=\"#countByKey\" class=\"headerlink\" title=\"countByKey\"></a>countByKey</h3><p>以RDD{(1, 2),(2,4),(2,5), (3, 4),(3,5), (3, 6)}为例 rdd.countByKey会返回{(1,1),(2,2),(3,3)} </p>\n<h3 id=\"collectAsMap\"><a href=\"#collectAsMap\" class=\"headerlink\" title=\"collectAsMap\"></a>collectAsMap</h3><p>将pair类型(键值对类型)的RDD转换成map, 还是上面的例子</p>\n<h3 id=\"saveAsTextFile\"><a href=\"#saveAsTextFile\" class=\"headerlink\" title=\"saveAsTextFile\"></a>saveAsTextFile</h3><p>saveAsTextFile用于将RDD以文本文件的格式存储到文件系统中。</p>\n<h3 id=\"saveAsSequenceFile\"><a href=\"#saveAsSequenceFile\" class=\"headerlink\" title=\"saveAsSequenceFile\"></a>saveAsSequenceFile</h3><p>saveAsSequenceFile用于将RDD以SequenceFile的文件格式保存到HDFS上。</p>\n<h3 id=\"saveAsObjectFile\"><a href=\"#saveAsObjectFile\" class=\"headerlink\" title=\"saveAsObjectFile\"></a>saveAsObjectFile</h3><p>saveAsObjectFile用于将RDD中的元素序列化成对象，存储到文件中。</p>\n<h3 id=\"saveAsHadoopFile\"><a href=\"#saveAsHadoopFile\" class=\"headerlink\" title=\"saveAsHadoopFile\"></a>saveAsHadoopFile</h3><h3 id=\"saveAsNewAPIHadoopFile\"><a href=\"#saveAsNewAPIHadoopFile\" class=\"headerlink\" title=\"saveAsNewAPIHadoopFile\"></a>saveAsNewAPIHadoopFile</h3><h3 id=\"mapPartitions\"><a href=\"#mapPartitions\" class=\"headerlink\" title=\"mapPartitions\"></a>mapPartitions</h3><h3 id=\"mapPartitionsWithIndex\"><a href=\"#mapPartitionsWithIndex\" class=\"headerlink\" title=\"mapPartitionsWithIndex\"></a>mapPartitionsWithIndex</h3><h3 id=\"HashPartitioner\"><a href=\"#HashPartitioner\" class=\"headerlink\" title=\"HashPartitioner\"></a>HashPartitioner</h3><h3 id=\"RangePartitioner\"><a href=\"#RangePartitioner\" class=\"headerlink\" title=\"RangePartitioner\"></a>RangePartitioner</h3><h3 id=\"自定义分区\"><a href=\"#自定义分区\" class=\"headerlink\" title=\"自定义分区\"></a>自定义分区</h3>","site":{"data":{}},"excerpt":"<h1 id=\"spark-算子\"><a href=\"#spark-算子\" class=\"headerlink\" title=\"spark 算子\"></a>spark 算子</h1>","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sparkRDD封装的函数方法又称算子,通过这些算子可以对RDD进行相关处理,从而获我们想要的结果,因为可能涉及的算子较多.因此单独开篇进行粒度更细,更集中的总结.</span><br><span class=\"line\"></span><br><span class=\"line\">总得来讲spark的算子,本就是scala集合的一些高阶用法.</span><br></pre></td></tr></table></figure>\n<h2 id=\"Transformation-转换\"><a href=\"#Transformation-转换\" class=\"headerlink\" title=\"Transformation(转换)\"></a>Transformation(转换)</h2><p>不触发提交作业，完成作业中间处理过程。</p>\n<h3 id=\"parallelize-并行化\"><a href=\"#parallelize-并行化\" class=\"headerlink\" title=\"parallelize (并行化)\"></a>parallelize (并行化)</h3><p>将一个存在的集合，变成一个RDD ,返回的是一个JavaRDD[T]<br>** in scala **</p>\n<figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sc.parallelize(<span class=\"type\">List</span>(<span class=\"string\">\"shenzhen\"</span>, <span class=\"string\">\"is a beautiful city\"</span>))</span><br></pre></td></tr></table></figure>\n<p> ** in java **<br> <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JavaRDD&lt;String&gt; javaStringRDD = sc.parallelize(Arrays.asList(<span class=\"string\">\"shenzhen\"</span>, <span class=\"string\">\"is a beautiful city\"</span>));</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"makeRDD\"><a href=\"#makeRDD\" class=\"headerlink\" title=\"makeRDD\"></a>makeRDD</h3><p>只有scala版本的才有makeRDD ,与parallelize类似.</p>\n<h3 id=\"textFile\"><a href=\"#textFile\" class=\"headerlink\" title=\"textFile\"></a>textFile</h3><p>调用SparkContext.textFile()方法，从外部存储中读取数据来创建 RDD<br>** in scala **<br> <figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> lines = sc.textFile(inpath)</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"> JavaRDD&lt;String&gt; lines = sc.textFile(inpath);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"filter\"><a href=\"#filter\" class=\"headerlink\" title=\"filter\"></a>filter</h3><p>对RDD数据进行过滤</p>\n<h3 id=\"map\"><a href=\"#map\" class=\"headerlink\" title=\"map\"></a>map</h3><p>接收一个函数,并将这个函数作用于RDD中的每个元素.RDD 中对应*<em>元素的值 map是一对一的关系 *</em></p>\n<h3 id=\"flatMap\"><a href=\"#flatMap\" class=\"headerlink\" title=\"flatMap\"></a>flatMap</h3><p>有时候，我们希望对某个元素生成多个元素，实现该功能的操作叫作 flatMap() ,faltMap的函数应用于每一个元素，对于每一个元素返回的是多个元素组成的迭代器</p>\n<h3 id=\"distinct\"><a href=\"#distinct\" class=\"headerlink\" title=\"distinct\"></a>distinct</h3><p>去重,我们生成的RDD可能有重复的元素，使用distinct方法可以去掉重复的元素, 不过此方法涉及到混洗，操作开销很大 </p>\n<h3 id=\"union\"><a href=\"#union\" class=\"headerlink\" title=\"union\"></a>union</h3><p>两个RDD进行合并 </p>\n<h3 id=\"intersection\"><a href=\"#intersection\" class=\"headerlink\" title=\"intersection\"></a>intersection</h3><p>RDD1.intersection(RDD2) 返回两个RDD的交集，** 并且去重 **<br>intersection 需要混洗数据，比较浪费性能</p>\n<h3 id=\"subtract\"><a href=\"#subtract\" class=\"headerlink\" title=\"subtract\"></a>subtract</h3><p>RDD1.subtract(RDD2),返回在RDD1中出现，但是不在RDD2中出现的元素，不去重 </p>\n<h3 id=\"cartesian\"><a href=\"#cartesian\" class=\"headerlink\" title=\"cartesian\"></a>cartesian</h3><p>cartesian(RDD2) 返回RDD1和RDD2的笛卡儿积，这个开销非常大</p>\n<h3 id=\"mapToPair\"><a href=\"#mapToPair\" class=\"headerlink\" title=\"mapToPair\"></a>mapToPair</h3><p>将元素该成key-value形式</p>\n<h3 id=\"flatMapToPair\"><a href=\"#flatMapToPair\" class=\"headerlink\" title=\"flatMapToPair\"></a>flatMapToPair</h3><p>差异同mapToPair</p>\n<h3 id=\"combineByKey\"><a href=\"#combineByKey\" class=\"headerlink\" title=\"combineByKey\"></a>combineByKey</h3><p>该方法主要针对不同分区的同一key进行元素合并函数操作.<br>需要对pairRDD进行</p>\n<ol>\n<li>createCombiner  会遍历分区中的所有元素，因此每个元素的键要么还没有遇到过,要么就<br>和之前的某个元素的键相同。如果这是一个新的元素， combineByKey() 会使用一个叫作 createCombiner() 的函数来创建<br>那个键对应的累加器的初始值</li>\n<li>mergeValue 如果这是一个在处理当前分区之前已经遇到的键， 它会使用 mergeValue() 方法将该键的累加器对应的当前值与这个新的值进行合并</li>\n<li>mergeCombiners 于每个分区都是独立处理的， 因此对于同一个键可以有多个累加器。如果有两个或者更<br>多的分区都有对应同一个键的累加器， 就需要使用用户提供的 mergeCombiners() 方法将各<br>个分区的结果进行合并。<h3 id=\"reduceByKey\"><a href=\"#reduceByKey\" class=\"headerlink\" title=\"reduceByKey\"></a>reduceByKey</h3>接收一个函数，按照相同的key进行reduce操<h3 id=\"foldByKey\"><a href=\"#foldByKey\" class=\"headerlink\" title=\"foldByKey\"></a>foldByKey</h3>该函数用于RDD[K,V]根据K将V做折叠、合并处理，其中的参数zeroValue表示先根据映射函数将zeroValue应用于V,进行初始化V,再将映射函数应用于初始化后的V ,与reduce不同的是 foldByKey开始折叠的第一个元素不是集合中的第一个元素，而是传入的一个元素 <h3 id=\"sortByKey\"><a href=\"#sortByKey\" class=\"headerlink\" title=\"sortByKey\"></a>sortByKey</h3>SortByKey用于对pairRDD按照key进行排序，第一个参数可以设置true或者false，默认是true <h3 id=\"groupByKey\"><a href=\"#groupByKey\" class=\"headerlink\" title=\"groupByKey\"></a>groupByKey</h3>groupByKey会将RDD[key,value] 按照相同的key进行分组，形成RDD[key,Iterable[value]]的形式， 有点类似于sql中的groupby，例如类似于mysql中的group_concat <h3 id=\"cogroup\"><a href=\"#cogroup\" class=\"headerlink\" title=\"cogroup\"></a>cogroup</h3>groupByKey是对单个 RDD 的数据进行分组，还可以使用一个叫作 cogroup() 的函数对多个共享同一个键的 RDD 进行分组<br>RDD1.cogroup(RDD2) 会将RDD1和RDD2按照相同的key进行分组，得到(key,RDD[key,Iterable[value1],Iterable[value2]])的形式 <h3 id=\"subtractByKey\"><a href=\"#subtractByKey\" class=\"headerlink\" title=\"subtractByKey\"></a>subtractByKey</h3>类似于subtrac，删掉 RDD 中键与 other RDD 中的键相同的元素<h3 id=\"join\"><a href=\"#join\" class=\"headerlink\" title=\"join\"></a>join</h3>可以把RDD1,RDD2中的相同的key给连接起来，类似于sql中的join操作<br>RDD1.join(RDD2) <h3 id=\"fullOuterJoin\"><a href=\"#fullOuterJoin\" class=\"headerlink\" title=\"fullOuterJoin\"></a>fullOuterJoin</h3>全连接<h3 id=\"leftOuterJoin\"><a href=\"#leftOuterJoin\" class=\"headerlink\" title=\"leftOuterJoin\"></a>leftOuterJoin</h3><h3 id=\"rightOuterJoin\"><a href=\"#rightOuterJoin\" class=\"headerlink\" title=\"rightOuterJoin\"></a>rightOuterJoin</h3></li>\n</ol>\n<h2 id=\"Action\"><a href=\"#Action\" class=\"headerlink\" title=\"Action\"></a>Action</h2><h3 id=\"first\"><a href=\"#first\" class=\"headerlink\" title=\"first\"></a>first</h3><p>返回第一个元素 </p>\n<h3 id=\"take\"><a href=\"#take\" class=\"headerlink\" title=\"take\"></a>take</h3><p>rdd.take(n)返回第n个元素 </p>\n<h3 id=\"collect\"><a href=\"#collect\" class=\"headerlink\" title=\"collect\"></a>collect</h3><p>rdd.collect() 返回 RDD 中的所有元素 </p>\n<h3 id=\"count\"><a href=\"#count\" class=\"headerlink\" title=\"count\"></a>count</h3><p>rdd.count() 返回 RDD 中的元素个数 </p>\n<h3 id=\"countByValue\"><a href=\"#countByValue\" class=\"headerlink\" title=\"countByValue\"></a>countByValue</h3><p>各元素在 RDD 中出现的次数 返回{(key1,次数),(key2,次数),…(keyn,次数)} </p>\n<h3 id=\"reduce\"><a href=\"#reduce\" class=\"headerlink\" title=\"reduce\"></a>reduce</h3><p>并行整合RDD中所有数据</p>\n<h3 id=\"fold\"><a href=\"#fold\" class=\"headerlink\" title=\"fold\"></a>fold</h3><p>和 reduce() 一 样， 但是提供了初始值num,每个元素计算时，先要合这个初始值进行折叠, 注意，这里会按照每个分区进行fold，然后分区之间还会再次进行fold </p>\n<h3 id=\"top\"><a href=\"#top\" class=\"headerlink\" title=\"top\"></a>top</h3><p>rdd.top(n)<br>按照降序的或者指定的排序规则，返回前n个元素 </p>\n<h3 id=\"takeOrdered\"><a href=\"#takeOrdered\" class=\"headerlink\" title=\"takeOrdered\"></a>takeOrdered</h3><p>rdd.take(n)<br>对RDD元素进行升序排序,取出前n个元素并返回，也可以自定义比较器（这里不介绍），类似于top的相反的方法 </p>\n<h3 id=\"foreach\"><a href=\"#foreach\" class=\"headerlink\" title=\"foreach\"></a>foreach</h3><p>对 RDD 中的每个元素使用给<br>定的函数</p>\n<h3 id=\"countByKey\"><a href=\"#countByKey\" class=\"headerlink\" title=\"countByKey\"></a>countByKey</h3><p>以RDD{(1, 2),(2,4),(2,5), (3, 4),(3,5), (3, 6)}为例 rdd.countByKey会返回{(1,1),(2,2),(3,3)} </p>\n<h3 id=\"collectAsMap\"><a href=\"#collectAsMap\" class=\"headerlink\" title=\"collectAsMap\"></a>collectAsMap</h3><p>将pair类型(键值对类型)的RDD转换成map, 还是上面的例子</p>\n<h3 id=\"saveAsTextFile\"><a href=\"#saveAsTextFile\" class=\"headerlink\" title=\"saveAsTextFile\"></a>saveAsTextFile</h3><p>saveAsTextFile用于将RDD以文本文件的格式存储到文件系统中。</p>\n<h3 id=\"saveAsSequenceFile\"><a href=\"#saveAsSequenceFile\" class=\"headerlink\" title=\"saveAsSequenceFile\"></a>saveAsSequenceFile</h3><p>saveAsSequenceFile用于将RDD以SequenceFile的文件格式保存到HDFS上。</p>\n<h3 id=\"saveAsObjectFile\"><a href=\"#saveAsObjectFile\" class=\"headerlink\" title=\"saveAsObjectFile\"></a>saveAsObjectFile</h3><p>saveAsObjectFile用于将RDD中的元素序列化成对象，存储到文件中。</p>\n<h3 id=\"saveAsHadoopFile\"><a href=\"#saveAsHadoopFile\" class=\"headerlink\" title=\"saveAsHadoopFile\"></a>saveAsHadoopFile</h3><h3 id=\"saveAsNewAPIHadoopFile\"><a href=\"#saveAsNewAPIHadoopFile\" class=\"headerlink\" title=\"saveAsNewAPIHadoopFile\"></a>saveAsNewAPIHadoopFile</h3><h3 id=\"mapPartitions\"><a href=\"#mapPartitions\" class=\"headerlink\" title=\"mapPartitions\"></a>mapPartitions</h3><h3 id=\"mapPartitionsWithIndex\"><a href=\"#mapPartitionsWithIndex\" class=\"headerlink\" title=\"mapPartitionsWithIndex\"></a>mapPartitionsWithIndex</h3><h3 id=\"HashPartitioner\"><a href=\"#HashPartitioner\" class=\"headerlink\" title=\"HashPartitioner\"></a>HashPartitioner</h3><h3 id=\"RangePartitioner\"><a href=\"#RangePartitioner\" class=\"headerlink\" title=\"RangePartitioner\"></a>RangePartitioner</h3><h3 id=\"自定义分区\"><a href=\"#自定义分区\" class=\"headerlink\" title=\"自定义分区\"></a>自定义分区</h3>"},{"title":"spark学习","date":"2018-03-04T03:12:58.000Z","_content":"\n# spark 学习\n<!-- more -->\n\n```\nspark 作为主流的实时计算引擎,需要高度掌握\n```\n<!-- more -->\n\n## spark介绍\n\nApache Spark是一用于实时处理的开源集群计算框架.持多种语言编程,Spark Streaming有高吞吐量和容错能力强等特点.\n数据输入后可以用Spark的高度抽象原语如：map、reduce、join、window等进行运算,而结果也能保存在很多地方，如HDFS，数据库等。另外Spark Streaming也能和MLlib（机器学习）以及Graphx完美融合。\n\n优点\n+ 易用\n+ 容错\n+ spark体系整合\n\n![spark&storm对比](http://img.wqkenqing.ren/2019-03-04-15-45-38.png)\n\n\n\n## RDD详解\n### RDD是什么\nRDD：Spark的核心概念是RDD (resilientdistributed dataset)，指的是一个只读的，可分区的分布式数据集，这个数据集的全部或部分可以缓存在内存中，在多次计算间重用。\n\n另:RDD即弹性分布式数据集，有容错机制并可以被并行操作的元素集合，具有只读、分区、容错、高效、无需物化、可以缓存、RDD依赖等特征。RDD只是数据集的抽象，分区内部并不会存储具体的数据。\n\nRDD的五个特性\n1. 有一个分片列表。就是能被切分，和hadoop一样的，能够切分的数据才能并行计算。 \n2. 有一个函数计算每一个分片，这里指的是下面会提到的compute函数.\n3. 对其他的RDD的依赖列表，依赖还具体分为宽依赖和窄依赖，但并不是所有的RDD都有依赖.\n4. 可选：key-value型的RDD是根据哈希来分区的，类似于mapreduce当中的Paritioner接口，控制key分到哪个reduce。\n5. 可选：每一个分片的优先计算位置（preferred locations），比如HDFS的block的所在位置应该是优先计算的位置。(存储的是一个表，可以将处理的分区“本地化”).\n\n\n```scala\n//只计算一次  \n  protected def getPartitions: Array[Partition]  \n  //对一个分片进行计算，得出一个可遍历的结果\n  def compute(split: Partition, context: TaskContext): Iterator[T]\n  //只计算一次，计算RDD对父RDD的依赖\n  protected def getDependencies: Seq[Dependency[_]] = deps\n  //可选的，分区的方法，针对第4点，类似于mapreduce当中的Paritioner接口，控制key分到哪个reduce\n  @transient val partitioner: Option[Partitioner] = None\n  //可选的，指定优先位置，输入参数是split分片，输出结果是一组优先的节点位置\n  protected def getPreferredLocations(split: Partition): Seq[String] = Nil\n\n```\n\n### 为什么会产生RDD\n\n### RDD数据集\n1. 并行集合\n\n接收一个已经存在的集合,然后进行各种并行计算.并行化集合是通过调用SparkContext的parallelize方法，在一个已经存在的Scala集合上创建（一个Seq对象）。集合的对象将会被拷贝，创建出一个可以被并行操作的分布式数据集。\n\n2. Hadoop数据集\n\nSpark可以将任何Hadoop所支持的存储资源转化成RDD，只要文件系统是HDFS，或者Hadoop支持的任意存储系统即可，如本地文件（需要网络文件系统，所有的节点都必须能访问到）、HDFS、Cassandra、HBase、Amazon S3等，Spark支持文本文件、SequenceFiles和任何Hadoop InputFormat格式。\n\n此两种类型的RDD都可以通过相同的方式进行操作，从而获得子RDD等一系列拓展，形成lineage血统关系图。\n\n\n### Spark RDD算子\n1. Transformation\n不触发提交作业，完成作业中间处理过程。\n\n\n\n## DStream\n### 什么是DStream\n\nDiscretized Stream :代表持续性的数据流和经过各种Spark原语操作后的结果数据流,在内部实现上是一系列连续的RDD来表示.每个RDD含有一段时间间隔内的数据,如下图\n![DStream](http://img.wqkenqing.ren/2019-03-04-15-50-41.png)\n\n计算则由spark engine来完成\n![spark engine流程](http://img.wqkenqing.ren/2019-03-04-15-51-58.png)\n\n\n\n\n## spark java \n\n因为我是主要掌握的语言是java,从效率上来考虑,这里\n\n\n\n\n\n\n## 参考博客\n\nhttps://blog.csdn.net/wangxiaotongfan/article/details/51395769 RDD详解\nhttps://blog.csdn.net/zuochang_liu/article/details/81459185  spark streaming学习\nhttps://blog.csdn.net/hellozhxy/article/details/81672845 spark java 使用指南\nhttps://blog.csdn.net/t1dmzks/article/details/70198430 sparkRDD算子介绍\nhttps://blog.csdn.net/wxycx11111/article/details/79123482 **sparkRDD入门介绍**\nhttps://github.com/zhaikaishun/spark_tutorial **RDD算子介绍**\n","source":"_posts/王阁/技术/hexo/old/spark学习.md","raw":"---\ntitle: spark学习\ndate: 2018-03-04 11:12:58\ntags: 学习spark\n---\n\n# spark 学习\n<!-- more -->\n\n```\nspark 作为主流的实时计算引擎,需要高度掌握\n```\n<!-- more -->\n\n## spark介绍\n\nApache Spark是一用于实时处理的开源集群计算框架.持多种语言编程,Spark Streaming有高吞吐量和容错能力强等特点.\n数据输入后可以用Spark的高度抽象原语如：map、reduce、join、window等进行运算,而结果也能保存在很多地方，如HDFS，数据库等。另外Spark Streaming也能和MLlib（机器学习）以及Graphx完美融合。\n\n优点\n+ 易用\n+ 容错\n+ spark体系整合\n\n![spark&storm对比](http://img.wqkenqing.ren/2019-03-04-15-45-38.png)\n\n\n\n## RDD详解\n### RDD是什么\nRDD：Spark的核心概念是RDD (resilientdistributed dataset)，指的是一个只读的，可分区的分布式数据集，这个数据集的全部或部分可以缓存在内存中，在多次计算间重用。\n\n另:RDD即弹性分布式数据集，有容错机制并可以被并行操作的元素集合，具有只读、分区、容错、高效、无需物化、可以缓存、RDD依赖等特征。RDD只是数据集的抽象，分区内部并不会存储具体的数据。\n\nRDD的五个特性\n1. 有一个分片列表。就是能被切分，和hadoop一样的，能够切分的数据才能并行计算。 \n2. 有一个函数计算每一个分片，这里指的是下面会提到的compute函数.\n3. 对其他的RDD的依赖列表，依赖还具体分为宽依赖和窄依赖，但并不是所有的RDD都有依赖.\n4. 可选：key-value型的RDD是根据哈希来分区的，类似于mapreduce当中的Paritioner接口，控制key分到哪个reduce。\n5. 可选：每一个分片的优先计算位置（preferred locations），比如HDFS的block的所在位置应该是优先计算的位置。(存储的是一个表，可以将处理的分区“本地化”).\n\n\n```scala\n//只计算一次  \n  protected def getPartitions: Array[Partition]  \n  //对一个分片进行计算，得出一个可遍历的结果\n  def compute(split: Partition, context: TaskContext): Iterator[T]\n  //只计算一次，计算RDD对父RDD的依赖\n  protected def getDependencies: Seq[Dependency[_]] = deps\n  //可选的，分区的方法，针对第4点，类似于mapreduce当中的Paritioner接口，控制key分到哪个reduce\n  @transient val partitioner: Option[Partitioner] = None\n  //可选的，指定优先位置，输入参数是split分片，输出结果是一组优先的节点位置\n  protected def getPreferredLocations(split: Partition): Seq[String] = Nil\n\n```\n\n### 为什么会产生RDD\n\n### RDD数据集\n1. 并行集合\n\n接收一个已经存在的集合,然后进行各种并行计算.并行化集合是通过调用SparkContext的parallelize方法，在一个已经存在的Scala集合上创建（一个Seq对象）。集合的对象将会被拷贝，创建出一个可以被并行操作的分布式数据集。\n\n2. Hadoop数据集\n\nSpark可以将任何Hadoop所支持的存储资源转化成RDD，只要文件系统是HDFS，或者Hadoop支持的任意存储系统即可，如本地文件（需要网络文件系统，所有的节点都必须能访问到）、HDFS、Cassandra、HBase、Amazon S3等，Spark支持文本文件、SequenceFiles和任何Hadoop InputFormat格式。\n\n此两种类型的RDD都可以通过相同的方式进行操作，从而获得子RDD等一系列拓展，形成lineage血统关系图。\n\n\n### Spark RDD算子\n1. Transformation\n不触发提交作业，完成作业中间处理过程。\n\n\n\n## DStream\n### 什么是DStream\n\nDiscretized Stream :代表持续性的数据流和经过各种Spark原语操作后的结果数据流,在内部实现上是一系列连续的RDD来表示.每个RDD含有一段时间间隔内的数据,如下图\n![DStream](http://img.wqkenqing.ren/2019-03-04-15-50-41.png)\n\n计算则由spark engine来完成\n![spark engine流程](http://img.wqkenqing.ren/2019-03-04-15-51-58.png)\n\n\n\n\n## spark java \n\n因为我是主要掌握的语言是java,从效率上来考虑,这里\n\n\n\n\n\n\n## 参考博客\n\nhttps://blog.csdn.net/wangxiaotongfan/article/details/51395769 RDD详解\nhttps://blog.csdn.net/zuochang_liu/article/details/81459185  spark streaming学习\nhttps://blog.csdn.net/hellozhxy/article/details/81672845 spark java 使用指南\nhttps://blog.csdn.net/t1dmzks/article/details/70198430 sparkRDD算子介绍\nhttps://blog.csdn.net/wxycx11111/article/details/79123482 **sparkRDD入门介绍**\nhttps://github.com/zhaikaishun/spark_tutorial **RDD算子介绍**\n","slug":"王阁/技术/hexo/old/spark学习","published":1,"updated":"2023-02-23T02:51:20.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfb003lu6pwew2l3gem","content":"<h1 id=\"spark-学习\"><a href=\"#spark-学习\" class=\"headerlink\" title=\"spark 学习\"></a>spark 学习</h1><a id=\"more\"></a>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spark 作为主流的实时计算引擎,需要高度掌握</span><br></pre></td></tr></table></figure>\n<!-- more -->\n\n<h2 id=\"spark介绍\"><a href=\"#spark介绍\" class=\"headerlink\" title=\"spark介绍\"></a>spark介绍</h2><p>Apache Spark是一用于实时处理的开源集群计算框架.持多种语言编程,Spark Streaming有高吞吐量和容错能力强等特点.<br>数据输入后可以用Spark的高度抽象原语如：map、reduce、join、window等进行运算,而结果也能保存在很多地方，如HDFS，数据库等。另外Spark Streaming也能和MLlib（机器学习）以及Graphx完美融合。</p>\n<p>优点</p>\n<ul>\n<li>易用</li>\n<li>容错</li>\n<li>spark体系整合</li>\n</ul>\n<p><img src=\"http://img.wqkenqing.ren/2019-03-04-15-45-38.png\" alt=\"spark&amp;storm对比\"></p>\n<h2 id=\"RDD详解\"><a href=\"#RDD详解\" class=\"headerlink\" title=\"RDD详解\"></a>RDD详解</h2><h3 id=\"RDD是什么\"><a href=\"#RDD是什么\" class=\"headerlink\" title=\"RDD是什么\"></a>RDD是什么</h3><p>RDD：Spark的核心概念是RDD (resilientdistributed dataset)，指的是一个只读的，可分区的分布式数据集，这个数据集的全部或部分可以缓存在内存中，在多次计算间重用。</p>\n<p>另:RDD即弹性分布式数据集，有容错机制并可以被并行操作的元素集合，具有只读、分区、容错、高效、无需物化、可以缓存、RDD依赖等特征。RDD只是数据集的抽象，分区内部并不会存储具体的数据。</p>\n<p>RDD的五个特性</p>\n<ol>\n<li>有一个分片列表。就是能被切分，和hadoop一样的，能够切分的数据才能并行计算。 </li>\n<li>有一个函数计算每一个分片，这里指的是下面会提到的compute函数.</li>\n<li>对其他的RDD的依赖列表，依赖还具体分为宽依赖和窄依赖，但并不是所有的RDD都有依赖.</li>\n<li>可选：key-value型的RDD是根据哈希来分区的，类似于mapreduce当中的Paritioner接口，控制key分到哪个reduce。</li>\n<li>可选：每一个分片的优先计算位置（preferred locations），比如HDFS的block的所在位置应该是优先计算的位置。(存储的是一个表，可以将处理的分区“本地化”).</li>\n</ol>\n<figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//只计算一次  </span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getPartitions</span></span>: <span class=\"type\">Array</span>[<span class=\"type\">Partition</span>]  </span><br><span class=\"line\">  <span class=\"comment\">//对一个分片进行计算，得出一个可遍历的结果</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">compute</span></span>(split: <span class=\"type\">Partition</span>, context: <span class=\"type\">TaskContext</span>): <span class=\"type\">Iterator</span>[<span class=\"type\">T</span>]</span><br><span class=\"line\">  <span class=\"comment\">//只计算一次，计算RDD对父RDD的依赖</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getDependencies</span></span>: <span class=\"type\">Seq</span>[<span class=\"type\">Dependency</span>[_]] = deps</span><br><span class=\"line\">  <span class=\"comment\">//可选的，分区的方法，针对第4点，类似于mapreduce当中的Paritioner接口，控制key分到哪个reduce</span></span><br><span class=\"line\">  <span class=\"meta\">@transient</span> <span class=\"keyword\">val</span> partitioner: <span class=\"type\">Option</span>[<span class=\"type\">Partitioner</span>] = <span class=\"type\">None</span></span><br><span class=\"line\">  <span class=\"comment\">//可选的，指定优先位置，输入参数是split分片，输出结果是一组优先的节点位置</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getPreferredLocations</span></span>(split: <span class=\"type\">Partition</span>): <span class=\"type\">Seq</span>[<span class=\"type\">String</span>] = <span class=\"type\">Nil</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"为什么会产生RDD\"><a href=\"#为什么会产生RDD\" class=\"headerlink\" title=\"为什么会产生RDD\"></a>为什么会产生RDD</h3><h3 id=\"RDD数据集\"><a href=\"#RDD数据集\" class=\"headerlink\" title=\"RDD数据集\"></a>RDD数据集</h3><ol>\n<li>并行集合</li>\n</ol>\n<p>接收一个已经存在的集合,然后进行各种并行计算.并行化集合是通过调用SparkContext的parallelize方法，在一个已经存在的Scala集合上创建（一个Seq对象）。集合的对象将会被拷贝，创建出一个可以被并行操作的分布式数据集。</p>\n<ol start=\"2\">\n<li>Hadoop数据集</li>\n</ol>\n<p>Spark可以将任何Hadoop所支持的存储资源转化成RDD，只要文件系统是HDFS，或者Hadoop支持的任意存储系统即可，如本地文件（需要网络文件系统，所有的节点都必须能访问到）、HDFS、Cassandra、HBase、Amazon S3等，Spark支持文本文件、SequenceFiles和任何Hadoop InputFormat格式。</p>\n<p>此两种类型的RDD都可以通过相同的方式进行操作，从而获得子RDD等一系列拓展，形成lineage血统关系图。</p>\n<h3 id=\"Spark-RDD算子\"><a href=\"#Spark-RDD算子\" class=\"headerlink\" title=\"Spark RDD算子\"></a>Spark RDD算子</h3><ol>\n<li>Transformation<br>不触发提交作业，完成作业中间处理过程。</li>\n</ol>\n<h2 id=\"DStream\"><a href=\"#DStream\" class=\"headerlink\" title=\"DStream\"></a>DStream</h2><h3 id=\"什么是DStream\"><a href=\"#什么是DStream\" class=\"headerlink\" title=\"什么是DStream\"></a>什么是DStream</h3><p>Discretized Stream :代表持续性的数据流和经过各种Spark原语操作后的结果数据流,在内部实现上是一系列连续的RDD来表示.每个RDD含有一段时间间隔内的数据,如下图<br><img src=\"http://img.wqkenqing.ren/2019-03-04-15-50-41.png\" alt=\"DStream\"></p>\n<p>计算则由spark engine来完成<br><img src=\"http://img.wqkenqing.ren/2019-03-04-15-51-58.png\" alt=\"spark engine流程\"></p>\n<h2 id=\"spark-java\"><a href=\"#spark-java\" class=\"headerlink\" title=\"spark java\"></a>spark java</h2><p>因为我是主要掌握的语言是java,从效率上来考虑,这里</p>\n<h2 id=\"参考博客\"><a href=\"#参考博客\" class=\"headerlink\" title=\"参考博客\"></a>参考博客</h2><p><a href=\"https://blog.csdn.net/wangxiaotongfan/article/details/51395769\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/wangxiaotongfan/article/details/51395769</a> RDD详解<br><a href=\"https://blog.csdn.net/zuochang_liu/article/details/81459185\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/zuochang_liu/article/details/81459185</a>  spark streaming学习<br><a href=\"https://blog.csdn.net/hellozhxy/article/details/81672845\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/hellozhxy/article/details/81672845</a> spark java 使用指南<br><a href=\"https://blog.csdn.net/t1dmzks/article/details/70198430\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/t1dmzks/article/details/70198430</a> sparkRDD算子介绍<br><a href=\"https://blog.csdn.net/wxycx11111/article/details/79123482\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/wxycx11111/article/details/79123482</a> <strong>sparkRDD入门介绍</strong><br><a href=\"https://github.com/zhaikaishun/spark_tutorial\" target=\"_blank\" rel=\"noopener\">https://github.com/zhaikaishun/spark_tutorial</a> <strong>RDD算子介绍</strong></p>\n","site":{"data":{}},"excerpt":"<h1 id=\"spark-学习\"><a href=\"#spark-学习\" class=\"headerlink\" title=\"spark 学习\"></a>spark 学习</h1>","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spark 作为主流的实时计算引擎,需要高度掌握</span><br></pre></td></tr></table></figure>\n<!-- more -->\n\n<h2 id=\"spark介绍\"><a href=\"#spark介绍\" class=\"headerlink\" title=\"spark介绍\"></a>spark介绍</h2><p>Apache Spark是一用于实时处理的开源集群计算框架.持多种语言编程,Spark Streaming有高吞吐量和容错能力强等特点.<br>数据输入后可以用Spark的高度抽象原语如：map、reduce、join、window等进行运算,而结果也能保存在很多地方，如HDFS，数据库等。另外Spark Streaming也能和MLlib（机器学习）以及Graphx完美融合。</p>\n<p>优点</p>\n<ul>\n<li>易用</li>\n<li>容错</li>\n<li>spark体系整合</li>\n</ul>\n<p><img src=\"http://img.wqkenqing.ren/2019-03-04-15-45-38.png\" alt=\"spark&amp;storm对比\"></p>\n<h2 id=\"RDD详解\"><a href=\"#RDD详解\" class=\"headerlink\" title=\"RDD详解\"></a>RDD详解</h2><h3 id=\"RDD是什么\"><a href=\"#RDD是什么\" class=\"headerlink\" title=\"RDD是什么\"></a>RDD是什么</h3><p>RDD：Spark的核心概念是RDD (resilientdistributed dataset)，指的是一个只读的，可分区的分布式数据集，这个数据集的全部或部分可以缓存在内存中，在多次计算间重用。</p>\n<p>另:RDD即弹性分布式数据集，有容错机制并可以被并行操作的元素集合，具有只读、分区、容错、高效、无需物化、可以缓存、RDD依赖等特征。RDD只是数据集的抽象，分区内部并不会存储具体的数据。</p>\n<p>RDD的五个特性</p>\n<ol>\n<li>有一个分片列表。就是能被切分，和hadoop一样的，能够切分的数据才能并行计算。 </li>\n<li>有一个函数计算每一个分片，这里指的是下面会提到的compute函数.</li>\n<li>对其他的RDD的依赖列表，依赖还具体分为宽依赖和窄依赖，但并不是所有的RDD都有依赖.</li>\n<li>可选：key-value型的RDD是根据哈希来分区的，类似于mapreduce当中的Paritioner接口，控制key分到哪个reduce。</li>\n<li>可选：每一个分片的优先计算位置（preferred locations），比如HDFS的block的所在位置应该是优先计算的位置。(存储的是一个表，可以将处理的分区“本地化”).</li>\n</ol>\n<figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//只计算一次  </span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getPartitions</span></span>: <span class=\"type\">Array</span>[<span class=\"type\">Partition</span>]  </span><br><span class=\"line\">  <span class=\"comment\">//对一个分片进行计算，得出一个可遍历的结果</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">compute</span></span>(split: <span class=\"type\">Partition</span>, context: <span class=\"type\">TaskContext</span>): <span class=\"type\">Iterator</span>[<span class=\"type\">T</span>]</span><br><span class=\"line\">  <span class=\"comment\">//只计算一次，计算RDD对父RDD的依赖</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getDependencies</span></span>: <span class=\"type\">Seq</span>[<span class=\"type\">Dependency</span>[_]] = deps</span><br><span class=\"line\">  <span class=\"comment\">//可选的，分区的方法，针对第4点，类似于mapreduce当中的Paritioner接口，控制key分到哪个reduce</span></span><br><span class=\"line\">  <span class=\"meta\">@transient</span> <span class=\"keyword\">val</span> partitioner: <span class=\"type\">Option</span>[<span class=\"type\">Partitioner</span>] = <span class=\"type\">None</span></span><br><span class=\"line\">  <span class=\"comment\">//可选的，指定优先位置，输入参数是split分片，输出结果是一组优先的节点位置</span></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getPreferredLocations</span></span>(split: <span class=\"type\">Partition</span>): <span class=\"type\">Seq</span>[<span class=\"type\">String</span>] = <span class=\"type\">Nil</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"为什么会产生RDD\"><a href=\"#为什么会产生RDD\" class=\"headerlink\" title=\"为什么会产生RDD\"></a>为什么会产生RDD</h3><h3 id=\"RDD数据集\"><a href=\"#RDD数据集\" class=\"headerlink\" title=\"RDD数据集\"></a>RDD数据集</h3><ol>\n<li>并行集合</li>\n</ol>\n<p>接收一个已经存在的集合,然后进行各种并行计算.并行化集合是通过调用SparkContext的parallelize方法，在一个已经存在的Scala集合上创建（一个Seq对象）。集合的对象将会被拷贝，创建出一个可以被并行操作的分布式数据集。</p>\n<ol start=\"2\">\n<li>Hadoop数据集</li>\n</ol>\n<p>Spark可以将任何Hadoop所支持的存储资源转化成RDD，只要文件系统是HDFS，或者Hadoop支持的任意存储系统即可，如本地文件（需要网络文件系统，所有的节点都必须能访问到）、HDFS、Cassandra、HBase、Amazon S3等，Spark支持文本文件、SequenceFiles和任何Hadoop InputFormat格式。</p>\n<p>此两种类型的RDD都可以通过相同的方式进行操作，从而获得子RDD等一系列拓展，形成lineage血统关系图。</p>\n<h3 id=\"Spark-RDD算子\"><a href=\"#Spark-RDD算子\" class=\"headerlink\" title=\"Spark RDD算子\"></a>Spark RDD算子</h3><ol>\n<li>Transformation<br>不触发提交作业，完成作业中间处理过程。</li>\n</ol>\n<h2 id=\"DStream\"><a href=\"#DStream\" class=\"headerlink\" title=\"DStream\"></a>DStream</h2><h3 id=\"什么是DStream\"><a href=\"#什么是DStream\" class=\"headerlink\" title=\"什么是DStream\"></a>什么是DStream</h3><p>Discretized Stream :代表持续性的数据流和经过各种Spark原语操作后的结果数据流,在内部实现上是一系列连续的RDD来表示.每个RDD含有一段时间间隔内的数据,如下图<br><img src=\"http://img.wqkenqing.ren/2019-03-04-15-50-41.png\" alt=\"DStream\"></p>\n<p>计算则由spark engine来完成<br><img src=\"http://img.wqkenqing.ren/2019-03-04-15-51-58.png\" alt=\"spark engine流程\"></p>\n<h2 id=\"spark-java\"><a href=\"#spark-java\" class=\"headerlink\" title=\"spark java\"></a>spark java</h2><p>因为我是主要掌握的语言是java,从效率上来考虑,这里</p>\n<h2 id=\"参考博客\"><a href=\"#参考博客\" class=\"headerlink\" title=\"参考博客\"></a>参考博客</h2><p><a href=\"https://blog.csdn.net/wangxiaotongfan/article/details/51395769\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/wangxiaotongfan/article/details/51395769</a> RDD详解<br><a href=\"https://blog.csdn.net/zuochang_liu/article/details/81459185\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/zuochang_liu/article/details/81459185</a>  spark streaming学习<br><a href=\"https://blog.csdn.net/hellozhxy/article/details/81672845\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/hellozhxy/article/details/81672845</a> spark java 使用指南<br><a href=\"https://blog.csdn.net/t1dmzks/article/details/70198430\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/t1dmzks/article/details/70198430</a> sparkRDD算子介绍<br><a href=\"https://blog.csdn.net/wxycx11111/article/details/79123482\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/wxycx11111/article/details/79123482</a> <strong>sparkRDD入门介绍</strong><br><a href=\"https://github.com/zhaikaishun/spark_tutorial\" target=\"_blank\" rel=\"noopener\">https://github.com/zhaikaishun/spark_tutorial</a> <strong>RDD算子介绍</strong></p>"},{"title":"sqoop记录","date":"2018-03-04T02:54:48.000Z","abstract":"sqoop记录","_content":"\n##  将Mysql数据导入Hive中\n<!-- more -->\n命令:\n```\nsqoop import  \n-Dorg.apache.sqoop.splitter.allow_text_splitter=true       \n--connect jdbc:mysql://211.159.172.76:3306/solo\n--username root \n--password 125323Wkq \n--table  tablename \n--hive-import \n--hive-table tablename \n```\n\n### 整库导入\n\n```\nsqoop import-all-tables --connect jdbc:mysql://211.159.172.76:3306/ --username root --password 125323Wkq --hive-database solo  -m 10  \n--create-hive-table  \n--fields-terminated-by \"\\t\"\n--hive-import --hive-database qianyang --hive-overwrite\n```\nsqoop  import-all-tables -Dorg.apache.sqoop.splitter.allow_text_splitter=true --connect jdbc:mysql://211.159.172.76:3306/solo --username root --password 125323Wkq --hive-database blog  --create-hive-table  --hive-import --hive-overwrite -m 10 \n  \n\n\n### 单表导入\n\nsqoop import  --connect   jdbc:mysql://211.159.172.76:3306/solo --username root     --password 125323Wkq    --table b3_solo_article --target-dir /blog/article   --hive-import  --hive-database blog  \n--fields-terminated-by \"\\t\" --hive-table article  --hive-overwrite\n--m 10  \n\nsqoop  import  --connect jdbc:mysql://211.159.172.76:3306/solo --username root --password 125323Wkq --table b3_solo_article --target-dir /blog/article --hive-import --hive-database blog  --create-hive-table  --hive-table article --hive-overwrite -m 1 \n","source":"_posts/王阁/技术/hexo/old/sqoop记录.md","raw":"---\ntitle: sqoop记录\ndate: 2018-03-04 10:54:48\ntags: 日常总结\nabstract: sqoop记录\n---\n\n##  将Mysql数据导入Hive中\n<!-- more -->\n命令:\n```\nsqoop import  \n-Dorg.apache.sqoop.splitter.allow_text_splitter=true       \n--connect jdbc:mysql://211.159.172.76:3306/solo\n--username root \n--password 125323Wkq \n--table  tablename \n--hive-import \n--hive-table tablename \n```\n\n### 整库导入\n\n```\nsqoop import-all-tables --connect jdbc:mysql://211.159.172.76:3306/ --username root --password 125323Wkq --hive-database solo  -m 10  \n--create-hive-table  \n--fields-terminated-by \"\\t\"\n--hive-import --hive-database qianyang --hive-overwrite\n```\nsqoop  import-all-tables -Dorg.apache.sqoop.splitter.allow_text_splitter=true --connect jdbc:mysql://211.159.172.76:3306/solo --username root --password 125323Wkq --hive-database blog  --create-hive-table  --hive-import --hive-overwrite -m 10 \n  \n\n\n### 单表导入\n\nsqoop import  --connect   jdbc:mysql://211.159.172.76:3306/solo --username root     --password 125323Wkq    --table b3_solo_article --target-dir /blog/article   --hive-import  --hive-database blog  \n--fields-terminated-by \"\\t\" --hive-table article  --hive-overwrite\n--m 10  \n\nsqoop  import  --connect jdbc:mysql://211.159.172.76:3306/solo --username root --password 125323Wkq --table b3_solo_article --target-dir /blog/article --hive-import --hive-database blog  --create-hive-table  --hive-table article --hive-overwrite -m 1 \n","slug":"王阁/技术/hexo/old/sqoop记录","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfb003nu6pwe4ztfg61","content":"<h2 id=\"将Mysql数据导入Hive中\"><a href=\"#将Mysql数据导入Hive中\" class=\"headerlink\" title=\"将Mysql数据导入Hive中\"></a>将Mysql数据导入Hive中</h2><a id=\"more\"></a>\n<p>命令:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqoop import  </span><br><span class=\"line\">-Dorg.apache.sqoop.splitter.allow_text_splitter&#x3D;true       </span><br><span class=\"line\">--connect jdbc:mysql:&#x2F;&#x2F;211.159.172.76:3306&#x2F;solo</span><br><span class=\"line\">--username root </span><br><span class=\"line\">--password 125323Wkq </span><br><span class=\"line\">--table  tablename </span><br><span class=\"line\">--hive-import </span><br><span class=\"line\">--hive-table tablename</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"整库导入\"><a href=\"#整库导入\" class=\"headerlink\" title=\"整库导入\"></a>整库导入</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqoop import-all-tables --connect jdbc:mysql:&#x2F;&#x2F;211.159.172.76:3306&#x2F; --username root --password 125323Wkq --hive-database solo  -m 10  </span><br><span class=\"line\">--create-hive-table  </span><br><span class=\"line\">--fields-terminated-by &quot;\\t&quot;</span><br><span class=\"line\">--hive-import --hive-database qianyang --hive-overwrite</span><br></pre></td></tr></table></figure>\n<p>sqoop  import-all-tables -Dorg.apache.sqoop.splitter.allow_text_splitter=true –connect jdbc:mysql://211.159.172.76:3306/solo –username root –password 125323Wkq –hive-database blog  –create-hive-table  –hive-import –hive-overwrite -m 10 </p>\n<h3 id=\"单表导入\"><a href=\"#单表导入\" class=\"headerlink\" title=\"单表导入\"></a>单表导入</h3><p>sqoop import  –connect   jdbc:mysql://211.159.172.76:3306/solo –username root     –password 125323Wkq    –table b3_solo_article –target-dir /blog/article   –hive-import  –hive-database blog<br>–fields-terminated-by “\\t” –hive-table article  –hive-overwrite<br>–m 10  </p>\n<p>sqoop  import  –connect jdbc:mysql://211.159.172.76:3306/solo –username root –password 125323Wkq –table b3_solo_article –target-dir /blog/article –hive-import –hive-database blog  –create-hive-table  –hive-table article –hive-overwrite -m 1 </p>\n","site":{"data":{}},"excerpt":"<h2 id=\"将Mysql数据导入Hive中\"><a href=\"#将Mysql数据导入Hive中\" class=\"headerlink\" title=\"将Mysql数据导入Hive中\"></a>将Mysql数据导入Hive中</h2>","more":"<p>命令:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqoop import  </span><br><span class=\"line\">-Dorg.apache.sqoop.splitter.allow_text_splitter&#x3D;true       </span><br><span class=\"line\">--connect jdbc:mysql:&#x2F;&#x2F;211.159.172.76:3306&#x2F;solo</span><br><span class=\"line\">--username root </span><br><span class=\"line\">--password 125323Wkq </span><br><span class=\"line\">--table  tablename </span><br><span class=\"line\">--hive-import </span><br><span class=\"line\">--hive-table tablename</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"整库导入\"><a href=\"#整库导入\" class=\"headerlink\" title=\"整库导入\"></a>整库导入</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqoop import-all-tables --connect jdbc:mysql:&#x2F;&#x2F;211.159.172.76:3306&#x2F; --username root --password 125323Wkq --hive-database solo  -m 10  </span><br><span class=\"line\">--create-hive-table  </span><br><span class=\"line\">--fields-terminated-by &quot;\\t&quot;</span><br><span class=\"line\">--hive-import --hive-database qianyang --hive-overwrite</span><br></pre></td></tr></table></figure>\n<p>sqoop  import-all-tables -Dorg.apache.sqoop.splitter.allow_text_splitter=true –connect jdbc:mysql://211.159.172.76:3306/solo –username root –password 125323Wkq –hive-database blog  –create-hive-table  –hive-import –hive-overwrite -m 10 </p>\n<h3 id=\"单表导入\"><a href=\"#单表导入\" class=\"headerlink\" title=\"单表导入\"></a>单表导入</h3><p>sqoop import  –connect   jdbc:mysql://211.159.172.76:3306/solo –username root     –password 125323Wkq    –table b3_solo_article –target-dir /blog/article   –hive-import  –hive-database blog<br>–fields-terminated-by “\\t” –hive-table article  –hive-overwrite<br>–m 10  </p>\n<p>sqoop  import  –connect jdbc:mysql://211.159.172.76:3306/solo –username root –password 125323Wkq –table b3_solo_article –target-dir /blog/article –hive-import –hive-database blog  –create-hive-table  –hive-table article –hive-overwrite -m 1 </p>"},{"title":"准备小结","_content":"# 准备小结\n\n<!-- more -->\n## hdfs存储机制是怎样的?\nclient端发送写文件请求，namenode检查文件是否存在，如果已存在，直接返回错误信息，否则，发送给client一些可用namenode节点\nclient将文件分块，并行存储到不同节点上datanode上，发送完成后，client同时发送信息给namenode和datanode\nnamenode收到的client信息后，发送确信信息给datanode\ndatanode同时收到namenode和datanode的确认信息后，提交写操作。\n## hadoop中combiner的作用是什么?\n当map生成的数据过大时，带宽就成了瓶颈，怎样精简压缩传给Reduce的数据，又不影响最终的结果呢。有一种方法就是使用Combiner，Combiner号称本地的Reduce，Reduce最终的输入，是Combiner的输出。\n##  你们数据库怎么导入hive 的,有没有出现问题\n在导入hive的时候，如果数据库中有blob或者text字段，会报错，解决方案在sqoop笔记中。在将数据由Oracle数据库导入到Hive时，发现带有clob字段的表的数据会错乱，出现一些字段全为NULL的空行。由于在项目中CLOB字段没有实际的分析用途，因此考虑将CLOB字段去掉。\n## hdfs-site.xml的3个主要属性?\ndfs.name.dir决定的是元数据存储的路径以及DFS的存储方式(磁盘或是远端)\ndfs.data.dir决定的是数据存储的路径\nfs.checkpoint.dir用于第二Namenode\n## 下列哪项通常是集群的最主要瓶颈\n磁盘 IO \n答案：C 磁盘 \n首先集群的目的是为了节省成本，用廉价的 pc 机，取代小型机及大型机。小型机和大型机有什么特点？ \n1.cpu 处理能力强 \n2.内存够大，所以集群的瓶颈不可能是 a 和 d \n3.如果是互联网有瓶颈，可以让集群搭建内网。每次写入数据都要通过网络（集群是内网），然后还要写入 3 份数据，所以 IO 就会打折扣。\n\n## 关于 SecondaryNameNode 哪项是正确的？\n它的目的是帮助 NameNode 合并编辑日志，减少 NameNode 启动时间 \n## mapreduce的原理?\nMapReduce采用”分而治之”的思想，把对大规模数据集的操作，分发给一个主节点管理下的各个分节点共同完成，然后通过整合各个节点的中间结果， \n得到最终结果。简单地说，MapReduce就是”任务的分解与结果的汇总”。 \n在Hadoop中，用于执行MapReduce任务的机器角色有两个：一个是JobTracker；另一个是TaskTracker，JobTracker是用于调度工作的，TaskTracker \n是用于执行工作的。一个Hadoop集群中只有一台JobTracker。 \n在分布式计算中，MapReduce框架负责处理了并行编程中分布式存储、工作调度、负载均衡、容错均衡、容错处理以及网络通信等复杂问题，把处理 \n过程高度抽象为两个函数：map和reduce，map负责把任务分解成多个任务，reduce负责把分解后多任务处理的结果汇总起来。 \n需要注意的是，用MapReduce来处理的数据集（或任务）必须具备这样的特点：待处理的数据集可以分解成许多小的数据集，而且每一个小数据集都 \n可以完全并行地进行处理。\n## HDFS存储的机制?\n### 写流程： \nclient链接namenode存数据 \nnamenode记录一条数据位置信息（元数据），告诉client存哪。 \nclient用hdfs的api将数据块（默认是64M）存储到datanode上。 \ndatanode将数据水平备份。并且备份完将反馈client。 \nclient通知namenode存储块完毕。 \nnamenode将元数据同步到内存中。 \n另一块循环上面的过程。\n###  读流程\n## 举一个简单的例子说明mapreduce是怎么来运行的 ?\nMapReduce运行的时候，会通过Mapper运行的任务读取HDFS中的数据文件，然后调用自己的方法，处理数据，最后输出。 \n　　Reducer任务会接收Mapper任务输出的数据，作为自己的输入数据，调用自己的方法，最后输出到HDFS的文件中。 \nMapper任务的执行过程详解 \n　　每个Mapper任务是一个Java进程，它会读取HDFS中的文件，解析成很多的键值对，经过我们覆盖的map方法处理后， \n转换为很多的键值对再输出。整个Mapper任务的处理过程又可以分为以下六个阶段： \n　　第一阶段是把输入文件按照一定的标准分片(InputSplit)，每个输入片的大小是固定的。默认情况下，输入片(InputSplit) \n的大小与数据块(Block)的大小是相同的。如果数据块(Block)的大小是默认值128MB，输入文件有两个，一个是32MB，一个是　172MB。那么小的文件是一个输入片，大文件会分为两个数据块，那么是两个输入片。一共产生三个输入片。每一个输入片由　一个Mapper进程处理。这里的三个输入片，会有三个Mapper进程处理。\n\n　　第二阶段是对输入片中的记录按照一定的规则解析成键值对。有个默认规则是把每一行文本内容解析成键值对。“键”是每一　行的起始位置(单位是字节)，“值”是本行的文本内容。 \n　　 \n　　第三阶段是调用Mapper类中的map方法。第二阶段中解析出来的每一个键值对，调用一次map方法。如果有1000个键值对，就会　调用1000次map方法。每一次调用map方法会输出零个或者多个键值对。\n\n　　第四阶段是按照一定的规则对第三阶段输出的键值对进行分区。比较是基于键进行的。比如我们的键表示省份(如北京、上海、　山东等)，那么就可以按照不同省份进行分区，同一个省份的键值对划分到一个区中。默认是只有一个区。分区的数量就是Reducer　任务运行的数量。默认只有一个Reducer任务。 \n第五阶段是对每个分区中的键值对进行排序。首先，按照键进行排序，对于键相同的键值对，按照值进行排序。比如三个键值　对<2,2>、<1,3>、<2,1>，键和值分别是整数。那么排序后的结果是<1,3>、<2,1>、<2,2>。如果有第六阶段，那么进入\n\n第六阶段　如果没有，直接输出到本地的Linux文件中。　第六阶段是对数据进行归约处理，也就是reduce处理。键相等的键值对会调用一次reduce方法。经过这一阶段，数据量会减少。　归约后的数据输出到本地的linxu文件中。本阶段默认是没有的，需要用户自己增加这一阶段的代码。　Reducer任务的执行过程详解 \n每个Reducer任务是一个java进程。Reducer任务接收Mapper任务的输出，归约处理后写入到HDFS中，可以分为三个阶段： \n第一阶段是Reducer任务会主动从Mapper任务复制其输出的键值对。Mapper任务可能会有很多，因此Reducer会复制多个Mapper的输出。 \n第二阶段是把复制到Reducer本地数据，全部进行合并，即把分散的数据合并成一个大的数据。再对合并后的数据排序。 \n第三阶段是对排序后的键值对调用reduce方法。键相等的键值对调用一次reduce方法，每次调用会产生零个或者多个键值对。 \n最后把这些输出的键值对写入到HDFS文件中。 \n在整个MapReduce程序的开发过程中，我们最大的工作量是覆盖map函数和覆盖reduce函数。\n\n## 了解hashMap 和hashTable吗介绍下，他们有什么区别。\n\n\n\n## 为什么重写equals还要重写hashcode\n因为equals比较的是内容是一致.但hashcode\n\n## 说一下map的分类和常见的情况\n hashmap,hashtable,treemap,LinkedHashMap\n* 根据键得到值，因此不允许键重复(重复了覆盖了),但允许值重复\n### Hashmap \n是一个最常用的Map\n* 它根据键的HashCode值存储数据,根据键可以直接获取它的值，具有很快的访问速度，遍历时，取得数据的顺序是完全随机的\n* 最多只允许一条记录的键为Null;允许多条记录的值为 Null;\n* HashMap不支持线程的同步，即任一时刻可以有多个线程同时写HashMap;可能会导致数据的不一致。\n* 如果需要同步，可以用 Collections的synchronizedMap方法使HashMap具有同步的能力，或者使用ConcurrentHashMap\n### Hashtable\nHashtable与 HashMap类似,它继承自Dictionary类,不同的是:它不允许记录的键或者值为空;\n* 它支持线程的同步，即任一时刻只有一个线程能写Hashtable,因此也导致了 Hashtable在写入时会比较慢\n### LinkedHashMap\n是 HashMap 的一个子类，保存了记录的插入顺序，在用 Iterator 遍历 LinkedHashMap 时，先得到的记录肯定是先插入的.\n也可以在构造时用带参数，按照应用次数排序。在遍历的时候会比 HashMap 慢，不过有种情况例外，当 HashMap 容量很大，实际数据较少时，遍历起来可能会比 LinkedHashMap 慢，因为 LinkedHashMap 的遍历速度只和实际数据有关，和容量无关，而 HashMap 的遍历速度和他的容量有关\n### TreeMap\n实现 SortMap 接口,能够把它保存的记录根据键排序, 默认是按键值的升序排序，也可以指定排序的比较器，当用 Iterator 遍历 TreeMap 时，得到的记录是排过序的\n\nHashMap，链表法存储，entry[]数组，线程不安全，可能死锁 concurrentHashMap，segment数组，每个segent下维护一组entry[]数组，每个segment是一把锁，线程安全 LinkedHashMap\n\n---\n\n## Object若不重写hashCode()的话，hashCode()如何计算出来的？\nhashcode采用的是\n\n\n\n## spark\n\n### 1. spark的有几种部署模式，每种模式特点？\n\n#### 本地模式\n本地模式分三类\n* local：只启动一个executor\n* local[k]: 启动k个executor\n* local[*]：启动跟cpu数目相同的 executor\n\n### cluster模式\ncluster模式肯定就是运行很多机器上了，但是它又分为以下三种模式，区别在于谁去管理资源调度。（说白了，就好像后勤管家，哪里需要资源，后勤管家要负责调度这些资源）\n#### standalone模式\n分布式部署集群，自带完整的服务，资源管理和任务监控是Spark自己监控，这个模式也是其他模式的基础\n\n#### Spark on yarn模式\n分布式部署集群，资源和任务监控交给yarn管理\n粗粒度资源分配方式，包含cluster和client运行模式\ncluster 适合生产，driver运行在集群子节点，具有容错功能\nclient 适合调试，dirver运行在客户端\n\n###  2. Spark技术栈有哪些组件，每个组件都有什么功能，适合什么应用场景？\n\n#### Spark core\n是其它组件的基础，spark的内核\n主要包含：有向循环图、RDD、Lingage、Cache、broadcast等\n\n#### SparkStreaming\n是一个对实时数据流进行高通量、容错处理的流式处理系统\n将流式计算分解成一系列短小的批处理作业\n\n#### Spark sql：\n能够统一处理关系表和RDD，使得开发人员可以轻松地使用SQL命令进行外部查询\n#### MLBase\n是Spark生态圈的一部分专注于机器学习，让机器学习的门槛更低\nMLBase分为四部分：MLlib、MLI、ML Optimizer和MLRuntime。\n#### GraphX\n是Spark中用于图和图并行计算\n#### spark有哪些组件\nmaster：管理集群和节点，不参与计算。\nworker：计算节点，进程本身不参与计算，和master汇报。\nDriver：运行程序的main方法，创建spark context对象。\nspark context：控制整个application的生命周期，包括dagsheduler和task scheduler等组件。\nclient：用户提交程序的入口。\n\n\n*   https://blog.csdn.net/yirenboy/article/details/47441465","source":"_posts/王阁/技术/hexo/old/准备小结.md","raw":"---\ntitle: 准备小结\ntags: 小结\n---\n# 准备小结\n\n<!-- more -->\n## hdfs存储机制是怎样的?\nclient端发送写文件请求，namenode检查文件是否存在，如果已存在，直接返回错误信息，否则，发送给client一些可用namenode节点\nclient将文件分块，并行存储到不同节点上datanode上，发送完成后，client同时发送信息给namenode和datanode\nnamenode收到的client信息后，发送确信信息给datanode\ndatanode同时收到namenode和datanode的确认信息后，提交写操作。\n## hadoop中combiner的作用是什么?\n当map生成的数据过大时，带宽就成了瓶颈，怎样精简压缩传给Reduce的数据，又不影响最终的结果呢。有一种方法就是使用Combiner，Combiner号称本地的Reduce，Reduce最终的输入，是Combiner的输出。\n##  你们数据库怎么导入hive 的,有没有出现问题\n在导入hive的时候，如果数据库中有blob或者text字段，会报错，解决方案在sqoop笔记中。在将数据由Oracle数据库导入到Hive时，发现带有clob字段的表的数据会错乱，出现一些字段全为NULL的空行。由于在项目中CLOB字段没有实际的分析用途，因此考虑将CLOB字段去掉。\n## hdfs-site.xml的3个主要属性?\ndfs.name.dir决定的是元数据存储的路径以及DFS的存储方式(磁盘或是远端)\ndfs.data.dir决定的是数据存储的路径\nfs.checkpoint.dir用于第二Namenode\n## 下列哪项通常是集群的最主要瓶颈\n磁盘 IO \n答案：C 磁盘 \n首先集群的目的是为了节省成本，用廉价的 pc 机，取代小型机及大型机。小型机和大型机有什么特点？ \n1.cpu 处理能力强 \n2.内存够大，所以集群的瓶颈不可能是 a 和 d \n3.如果是互联网有瓶颈，可以让集群搭建内网。每次写入数据都要通过网络（集群是内网），然后还要写入 3 份数据，所以 IO 就会打折扣。\n\n## 关于 SecondaryNameNode 哪项是正确的？\n它的目的是帮助 NameNode 合并编辑日志，减少 NameNode 启动时间 \n## mapreduce的原理?\nMapReduce采用”分而治之”的思想，把对大规模数据集的操作，分发给一个主节点管理下的各个分节点共同完成，然后通过整合各个节点的中间结果， \n得到最终结果。简单地说，MapReduce就是”任务的分解与结果的汇总”。 \n在Hadoop中，用于执行MapReduce任务的机器角色有两个：一个是JobTracker；另一个是TaskTracker，JobTracker是用于调度工作的，TaskTracker \n是用于执行工作的。一个Hadoop集群中只有一台JobTracker。 \n在分布式计算中，MapReduce框架负责处理了并行编程中分布式存储、工作调度、负载均衡、容错均衡、容错处理以及网络通信等复杂问题，把处理 \n过程高度抽象为两个函数：map和reduce，map负责把任务分解成多个任务，reduce负责把分解后多任务处理的结果汇总起来。 \n需要注意的是，用MapReduce来处理的数据集（或任务）必须具备这样的特点：待处理的数据集可以分解成许多小的数据集，而且每一个小数据集都 \n可以完全并行地进行处理。\n## HDFS存储的机制?\n### 写流程： \nclient链接namenode存数据 \nnamenode记录一条数据位置信息（元数据），告诉client存哪。 \nclient用hdfs的api将数据块（默认是64M）存储到datanode上。 \ndatanode将数据水平备份。并且备份完将反馈client。 \nclient通知namenode存储块完毕。 \nnamenode将元数据同步到内存中。 \n另一块循环上面的过程。\n###  读流程\n## 举一个简单的例子说明mapreduce是怎么来运行的 ?\nMapReduce运行的时候，会通过Mapper运行的任务读取HDFS中的数据文件，然后调用自己的方法，处理数据，最后输出。 \n　　Reducer任务会接收Mapper任务输出的数据，作为自己的输入数据，调用自己的方法，最后输出到HDFS的文件中。 \nMapper任务的执行过程详解 \n　　每个Mapper任务是一个Java进程，它会读取HDFS中的文件，解析成很多的键值对，经过我们覆盖的map方法处理后， \n转换为很多的键值对再输出。整个Mapper任务的处理过程又可以分为以下六个阶段： \n　　第一阶段是把输入文件按照一定的标准分片(InputSplit)，每个输入片的大小是固定的。默认情况下，输入片(InputSplit) \n的大小与数据块(Block)的大小是相同的。如果数据块(Block)的大小是默认值128MB，输入文件有两个，一个是32MB，一个是　172MB。那么小的文件是一个输入片，大文件会分为两个数据块，那么是两个输入片。一共产生三个输入片。每一个输入片由　一个Mapper进程处理。这里的三个输入片，会有三个Mapper进程处理。\n\n　　第二阶段是对输入片中的记录按照一定的规则解析成键值对。有个默认规则是把每一行文本内容解析成键值对。“键”是每一　行的起始位置(单位是字节)，“值”是本行的文本内容。 \n　　 \n　　第三阶段是调用Mapper类中的map方法。第二阶段中解析出来的每一个键值对，调用一次map方法。如果有1000个键值对，就会　调用1000次map方法。每一次调用map方法会输出零个或者多个键值对。\n\n　　第四阶段是按照一定的规则对第三阶段输出的键值对进行分区。比较是基于键进行的。比如我们的键表示省份(如北京、上海、　山东等)，那么就可以按照不同省份进行分区，同一个省份的键值对划分到一个区中。默认是只有一个区。分区的数量就是Reducer　任务运行的数量。默认只有一个Reducer任务。 \n第五阶段是对每个分区中的键值对进行排序。首先，按照键进行排序，对于键相同的键值对，按照值进行排序。比如三个键值　对<2,2>、<1,3>、<2,1>，键和值分别是整数。那么排序后的结果是<1,3>、<2,1>、<2,2>。如果有第六阶段，那么进入\n\n第六阶段　如果没有，直接输出到本地的Linux文件中。　第六阶段是对数据进行归约处理，也就是reduce处理。键相等的键值对会调用一次reduce方法。经过这一阶段，数据量会减少。　归约后的数据输出到本地的linxu文件中。本阶段默认是没有的，需要用户自己增加这一阶段的代码。　Reducer任务的执行过程详解 \n每个Reducer任务是一个java进程。Reducer任务接收Mapper任务的输出，归约处理后写入到HDFS中，可以分为三个阶段： \n第一阶段是Reducer任务会主动从Mapper任务复制其输出的键值对。Mapper任务可能会有很多，因此Reducer会复制多个Mapper的输出。 \n第二阶段是把复制到Reducer本地数据，全部进行合并，即把分散的数据合并成一个大的数据。再对合并后的数据排序。 \n第三阶段是对排序后的键值对调用reduce方法。键相等的键值对调用一次reduce方法，每次调用会产生零个或者多个键值对。 \n最后把这些输出的键值对写入到HDFS文件中。 \n在整个MapReduce程序的开发过程中，我们最大的工作量是覆盖map函数和覆盖reduce函数。\n\n## 了解hashMap 和hashTable吗介绍下，他们有什么区别。\n\n\n\n## 为什么重写equals还要重写hashcode\n因为equals比较的是内容是一致.但hashcode\n\n## 说一下map的分类和常见的情况\n hashmap,hashtable,treemap,LinkedHashMap\n* 根据键得到值，因此不允许键重复(重复了覆盖了),但允许值重复\n### Hashmap \n是一个最常用的Map\n* 它根据键的HashCode值存储数据,根据键可以直接获取它的值，具有很快的访问速度，遍历时，取得数据的顺序是完全随机的\n* 最多只允许一条记录的键为Null;允许多条记录的值为 Null;\n* HashMap不支持线程的同步，即任一时刻可以有多个线程同时写HashMap;可能会导致数据的不一致。\n* 如果需要同步，可以用 Collections的synchronizedMap方法使HashMap具有同步的能力，或者使用ConcurrentHashMap\n### Hashtable\nHashtable与 HashMap类似,它继承自Dictionary类,不同的是:它不允许记录的键或者值为空;\n* 它支持线程的同步，即任一时刻只有一个线程能写Hashtable,因此也导致了 Hashtable在写入时会比较慢\n### LinkedHashMap\n是 HashMap 的一个子类，保存了记录的插入顺序，在用 Iterator 遍历 LinkedHashMap 时，先得到的记录肯定是先插入的.\n也可以在构造时用带参数，按照应用次数排序。在遍历的时候会比 HashMap 慢，不过有种情况例外，当 HashMap 容量很大，实际数据较少时，遍历起来可能会比 LinkedHashMap 慢，因为 LinkedHashMap 的遍历速度只和实际数据有关，和容量无关，而 HashMap 的遍历速度和他的容量有关\n### TreeMap\n实现 SortMap 接口,能够把它保存的记录根据键排序, 默认是按键值的升序排序，也可以指定排序的比较器，当用 Iterator 遍历 TreeMap 时，得到的记录是排过序的\n\nHashMap，链表法存储，entry[]数组，线程不安全，可能死锁 concurrentHashMap，segment数组，每个segent下维护一组entry[]数组，每个segment是一把锁，线程安全 LinkedHashMap\n\n---\n\n## Object若不重写hashCode()的话，hashCode()如何计算出来的？\nhashcode采用的是\n\n\n\n## spark\n\n### 1. spark的有几种部署模式，每种模式特点？\n\n#### 本地模式\n本地模式分三类\n* local：只启动一个executor\n* local[k]: 启动k个executor\n* local[*]：启动跟cpu数目相同的 executor\n\n### cluster模式\ncluster模式肯定就是运行很多机器上了，但是它又分为以下三种模式，区别在于谁去管理资源调度。（说白了，就好像后勤管家，哪里需要资源，后勤管家要负责调度这些资源）\n#### standalone模式\n分布式部署集群，自带完整的服务，资源管理和任务监控是Spark自己监控，这个模式也是其他模式的基础\n\n#### Spark on yarn模式\n分布式部署集群，资源和任务监控交给yarn管理\n粗粒度资源分配方式，包含cluster和client运行模式\ncluster 适合生产，driver运行在集群子节点，具有容错功能\nclient 适合调试，dirver运行在客户端\n\n###  2. Spark技术栈有哪些组件，每个组件都有什么功能，适合什么应用场景？\n\n#### Spark core\n是其它组件的基础，spark的内核\n主要包含：有向循环图、RDD、Lingage、Cache、broadcast等\n\n#### SparkStreaming\n是一个对实时数据流进行高通量、容错处理的流式处理系统\n将流式计算分解成一系列短小的批处理作业\n\n#### Spark sql：\n能够统一处理关系表和RDD，使得开发人员可以轻松地使用SQL命令进行外部查询\n#### MLBase\n是Spark生态圈的一部分专注于机器学习，让机器学习的门槛更低\nMLBase分为四部分：MLlib、MLI、ML Optimizer和MLRuntime。\n#### GraphX\n是Spark中用于图和图并行计算\n#### spark有哪些组件\nmaster：管理集群和节点，不参与计算。\nworker：计算节点，进程本身不参与计算，和master汇报。\nDriver：运行程序的main方法，创建spark context对象。\nspark context：控制整个application的生命周期，包括dagsheduler和task scheduler等组件。\nclient：用户提交程序的入口。\n\n\n*   https://blog.csdn.net/yirenboy/article/details/47441465","slug":"王阁/技术/hexo/old/准备小结","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfc003ou6pw2s5h8l5h","content":"<h1 id=\"准备小结\"><a href=\"#准备小结\" class=\"headerlink\" title=\"准备小结\"></a>准备小结</h1><a id=\"more\"></a>\n<h2 id=\"hdfs存储机制是怎样的\"><a href=\"#hdfs存储机制是怎样的\" class=\"headerlink\" title=\"hdfs存储机制是怎样的?\"></a>hdfs存储机制是怎样的?</h2><p>client端发送写文件请求，namenode检查文件是否存在，如果已存在，直接返回错误信息，否则，发送给client一些可用namenode节点<br>client将文件分块，并行存储到不同节点上datanode上，发送完成后，client同时发送信息给namenode和datanode<br>namenode收到的client信息后，发送确信信息给datanode<br>datanode同时收到namenode和datanode的确认信息后，提交写操作。</p>\n<h2 id=\"hadoop中combiner的作用是什么\"><a href=\"#hadoop中combiner的作用是什么\" class=\"headerlink\" title=\"hadoop中combiner的作用是什么?\"></a>hadoop中combiner的作用是什么?</h2><p>当map生成的数据过大时，带宽就成了瓶颈，怎样精简压缩传给Reduce的数据，又不影响最终的结果呢。有一种方法就是使用Combiner，Combiner号称本地的Reduce，Reduce最终的输入，是Combiner的输出。</p>\n<h2 id=\"你们数据库怎么导入hive-的-有没有出现问题\"><a href=\"#你们数据库怎么导入hive-的-有没有出现问题\" class=\"headerlink\" title=\"你们数据库怎么导入hive 的,有没有出现问题\"></a>你们数据库怎么导入hive 的,有没有出现问题</h2><p>在导入hive的时候，如果数据库中有blob或者text字段，会报错，解决方案在sqoop笔记中。在将数据由Oracle数据库导入到Hive时，发现带有clob字段的表的数据会错乱，出现一些字段全为NULL的空行。由于在项目中CLOB字段没有实际的分析用途，因此考虑将CLOB字段去掉。</p>\n<h2 id=\"hdfs-site-xml的3个主要属性\"><a href=\"#hdfs-site-xml的3个主要属性\" class=\"headerlink\" title=\"hdfs-site.xml的3个主要属性?\"></a>hdfs-site.xml的3个主要属性?</h2><p>dfs.name.dir决定的是元数据存储的路径以及DFS的存储方式(磁盘或是远端)<br>dfs.data.dir决定的是数据存储的路径<br>fs.checkpoint.dir用于第二Namenode</p>\n<h2 id=\"下列哪项通常是集群的最主要瓶颈\"><a href=\"#下列哪项通常是集群的最主要瓶颈\" class=\"headerlink\" title=\"下列哪项通常是集群的最主要瓶颈\"></a>下列哪项通常是集群的最主要瓶颈</h2><p>磁盘 IO<br>答案：C 磁盘<br>首先集群的目的是为了节省成本，用廉价的 pc 机，取代小型机及大型机。小型机和大型机有什么特点？<br>1.cpu 处理能力强<br>2.内存够大，所以集群的瓶颈不可能是 a 和 d<br>3.如果是互联网有瓶颈，可以让集群搭建内网。每次写入数据都要通过网络（集群是内网），然后还要写入 3 份数据，所以 IO 就会打折扣。</p>\n<h2 id=\"关于-SecondaryNameNode-哪项是正确的？\"><a href=\"#关于-SecondaryNameNode-哪项是正确的？\" class=\"headerlink\" title=\"关于 SecondaryNameNode 哪项是正确的？\"></a>关于 SecondaryNameNode 哪项是正确的？</h2><p>它的目的是帮助 NameNode 合并编辑日志，减少 NameNode 启动时间 </p>\n<h2 id=\"mapreduce的原理\"><a href=\"#mapreduce的原理\" class=\"headerlink\" title=\"mapreduce的原理?\"></a>mapreduce的原理?</h2><p>MapReduce采用”分而治之”的思想，把对大规模数据集的操作，分发给一个主节点管理下的各个分节点共同完成，然后通过整合各个节点的中间结果，<br>得到最终结果。简单地说，MapReduce就是”任务的分解与结果的汇总”。<br>在Hadoop中，用于执行MapReduce任务的机器角色有两个：一个是JobTracker；另一个是TaskTracker，JobTracker是用于调度工作的，TaskTracker<br>是用于执行工作的。一个Hadoop集群中只有一台JobTracker。<br>在分布式计算中，MapReduce框架负责处理了并行编程中分布式存储、工作调度、负载均衡、容错均衡、容错处理以及网络通信等复杂问题，把处理<br>过程高度抽象为两个函数：map和reduce，map负责把任务分解成多个任务，reduce负责把分解后多任务处理的结果汇总起来。<br>需要注意的是，用MapReduce来处理的数据集（或任务）必须具备这样的特点：待处理的数据集可以分解成许多小的数据集，而且每一个小数据集都<br>可以完全并行地进行处理。</p>\n<h2 id=\"HDFS存储的机制\"><a href=\"#HDFS存储的机制\" class=\"headerlink\" title=\"HDFS存储的机制?\"></a>HDFS存储的机制?</h2><h3 id=\"写流程：\"><a href=\"#写流程：\" class=\"headerlink\" title=\"写流程：\"></a>写流程：</h3><p>client链接namenode存数据<br>namenode记录一条数据位置信息（元数据），告诉client存哪。<br>client用hdfs的api将数据块（默认是64M）存储到datanode上。<br>datanode将数据水平备份。并且备份完将反馈client。<br>client通知namenode存储块完毕。<br>namenode将元数据同步到内存中。<br>另一块循环上面的过程。</p>\n<h3 id=\"读流程\"><a href=\"#读流程\" class=\"headerlink\" title=\"读流程\"></a>读流程</h3><h2 id=\"举一个简单的例子说明mapreduce是怎么来运行的\"><a href=\"#举一个简单的例子说明mapreduce是怎么来运行的\" class=\"headerlink\" title=\"举一个简单的例子说明mapreduce是怎么来运行的 ?\"></a>举一个简单的例子说明mapreduce是怎么来运行的 ?</h2><p>MapReduce运行的时候，会通过Mapper运行的任务读取HDFS中的数据文件，然后调用自己的方法，处理数据，最后输出。<br>　　Reducer任务会接收Mapper任务输出的数据，作为自己的输入数据，调用自己的方法，最后输出到HDFS的文件中。<br>Mapper任务的执行过程详解<br>　　每个Mapper任务是一个Java进程，它会读取HDFS中的文件，解析成很多的键值对，经过我们覆盖的map方法处理后，<br>转换为很多的键值对再输出。整个Mapper任务的处理过程又可以分为以下六个阶段：<br>　　第一阶段是把输入文件按照一定的标准分片(InputSplit)，每个输入片的大小是固定的。默认情况下，输入片(InputSplit)<br>的大小与数据块(Block)的大小是相同的。如果数据块(Block)的大小是默认值128MB，输入文件有两个，一个是32MB，一个是　172MB。那么小的文件是一个输入片，大文件会分为两个数据块，那么是两个输入片。一共产生三个输入片。每一个输入片由　一个Mapper进程处理。这里的三个输入片，会有三个Mapper进程处理。</p>\n<p>　　第二阶段是对输入片中的记录按照一定的规则解析成键值对。有个默认规则是把每一行文本内容解析成键值对。“键”是每一　行的起始位置(单位是字节)，“值”是本行的文本内容。<br>　　<br>　　第三阶段是调用Mapper类中的map方法。第二阶段中解析出来的每一个键值对，调用一次map方法。如果有1000个键值对，就会　调用1000次map方法。每一次调用map方法会输出零个或者多个键值对。</p>\n<p>　　第四阶段是按照一定的规则对第三阶段输出的键值对进行分区。比较是基于键进行的。比如我们的键表示省份(如北京、上海、　山东等)，那么就可以按照不同省份进行分区，同一个省份的键值对划分到一个区中。默认是只有一个区。分区的数量就是Reducer　任务运行的数量。默认只有一个Reducer任务。<br>第五阶段是对每个分区中的键值对进行排序。首先，按照键进行排序，对于键相同的键值对，按照值进行排序。比如三个键值　对&lt;2,2&gt;、&lt;1,3&gt;、&lt;2,1&gt;，键和值分别是整数。那么排序后的结果是&lt;1,3&gt;、&lt;2,1&gt;、&lt;2,2&gt;。如果有第六阶段，那么进入</p>\n<p>第六阶段　如果没有，直接输出到本地的Linux文件中。　第六阶段是对数据进行归约处理，也就是reduce处理。键相等的键值对会调用一次reduce方法。经过这一阶段，数据量会减少。　归约后的数据输出到本地的linxu文件中。本阶段默认是没有的，需要用户自己增加这一阶段的代码。　Reducer任务的执行过程详解<br>每个Reducer任务是一个java进程。Reducer任务接收Mapper任务的输出，归约处理后写入到HDFS中，可以分为三个阶段：<br>第一阶段是Reducer任务会主动从Mapper任务复制其输出的键值对。Mapper任务可能会有很多，因此Reducer会复制多个Mapper的输出。<br>第二阶段是把复制到Reducer本地数据，全部进行合并，即把分散的数据合并成一个大的数据。再对合并后的数据排序。<br>第三阶段是对排序后的键值对调用reduce方法。键相等的键值对调用一次reduce方法，每次调用会产生零个或者多个键值对。<br>最后把这些输出的键值对写入到HDFS文件中。<br>在整个MapReduce程序的开发过程中，我们最大的工作量是覆盖map函数和覆盖reduce函数。</p>\n<h2 id=\"了解hashMap-和hashTable吗介绍下，他们有什么区别。\"><a href=\"#了解hashMap-和hashTable吗介绍下，他们有什么区别。\" class=\"headerlink\" title=\"了解hashMap 和hashTable吗介绍下，他们有什么区别。\"></a>了解hashMap 和hashTable吗介绍下，他们有什么区别。</h2><h2 id=\"为什么重写equals还要重写hashcode\"><a href=\"#为什么重写equals还要重写hashcode\" class=\"headerlink\" title=\"为什么重写equals还要重写hashcode\"></a>为什么重写equals还要重写hashcode</h2><p>因为equals比较的是内容是一致.但hashcode</p>\n<h2 id=\"说一下map的分类和常见的情况\"><a href=\"#说一下map的分类和常见的情况\" class=\"headerlink\" title=\"说一下map的分类和常见的情况\"></a>说一下map的分类和常见的情况</h2><p> hashmap,hashtable,treemap,LinkedHashMap</p>\n<ul>\n<li>根据键得到值，因此不允许键重复(重复了覆盖了),但允许值重复<h3 id=\"Hashmap\"><a href=\"#Hashmap\" class=\"headerlink\" title=\"Hashmap\"></a>Hashmap</h3>是一个最常用的Map</li>\n<li>它根据键的HashCode值存储数据,根据键可以直接获取它的值，具有很快的访问速度，遍历时，取得数据的顺序是完全随机的</li>\n<li>最多只允许一条记录的键为Null;允许多条记录的值为 Null;</li>\n<li>HashMap不支持线程的同步，即任一时刻可以有多个线程同时写HashMap;可能会导致数据的不一致。</li>\n<li>如果需要同步，可以用 Collections的synchronizedMap方法使HashMap具有同步的能力，或者使用ConcurrentHashMap<h3 id=\"Hashtable\"><a href=\"#Hashtable\" class=\"headerlink\" title=\"Hashtable\"></a>Hashtable</h3>Hashtable与 HashMap类似,它继承自Dictionary类,不同的是:它不允许记录的键或者值为空;</li>\n<li>它支持线程的同步，即任一时刻只有一个线程能写Hashtable,因此也导致了 Hashtable在写入时会比较慢<h3 id=\"LinkedHashMap\"><a href=\"#LinkedHashMap\" class=\"headerlink\" title=\"LinkedHashMap\"></a>LinkedHashMap</h3>是 HashMap 的一个子类，保存了记录的插入顺序，在用 Iterator 遍历 LinkedHashMap 时，先得到的记录肯定是先插入的.<br>也可以在构造时用带参数，按照应用次数排序。在遍历的时候会比 HashMap 慢，不过有种情况例外，当 HashMap 容量很大，实际数据较少时，遍历起来可能会比 LinkedHashMap 慢，因为 LinkedHashMap 的遍历速度只和实际数据有关，和容量无关，而 HashMap 的遍历速度和他的容量有关<h3 id=\"TreeMap\"><a href=\"#TreeMap\" class=\"headerlink\" title=\"TreeMap\"></a>TreeMap</h3>实现 SortMap 接口,能够把它保存的记录根据键排序, 默认是按键值的升序排序，也可以指定排序的比较器，当用 Iterator 遍历 TreeMap 时，得到的记录是排过序的</li>\n</ul>\n<p>HashMap，链表法存储，entry[]数组，线程不安全，可能死锁 concurrentHashMap，segment数组，每个segent下维护一组entry[]数组，每个segment是一把锁，线程安全 LinkedHashMap</p>\n<hr>\n<h2 id=\"Object若不重写hashCode-的话，hashCode-如何计算出来的？\"><a href=\"#Object若不重写hashCode-的话，hashCode-如何计算出来的？\" class=\"headerlink\" title=\"Object若不重写hashCode()的话，hashCode()如何计算出来的？\"></a>Object若不重写hashCode()的话，hashCode()如何计算出来的？</h2><p>hashcode采用的是</p>\n<h2 id=\"spark\"><a href=\"#spark\" class=\"headerlink\" title=\"spark\"></a>spark</h2><h3 id=\"1-spark的有几种部署模式，每种模式特点？\"><a href=\"#1-spark的有几种部署模式，每种模式特点？\" class=\"headerlink\" title=\"1. spark的有几种部署模式，每种模式特点？\"></a>1. spark的有几种部署模式，每种模式特点？</h3><h4 id=\"本地模式\"><a href=\"#本地模式\" class=\"headerlink\" title=\"本地模式\"></a>本地模式</h4><p>本地模式分三类</p>\n<ul>\n<li>local：只启动一个executor</li>\n<li>local[k]: 启动k个executor</li>\n<li>local[*]：启动跟cpu数目相同的 executor</li>\n</ul>\n<h3 id=\"cluster模式\"><a href=\"#cluster模式\" class=\"headerlink\" title=\"cluster模式\"></a>cluster模式</h3><p>cluster模式肯定就是运行很多机器上了，但是它又分为以下三种模式，区别在于谁去管理资源调度。（说白了，就好像后勤管家，哪里需要资源，后勤管家要负责调度这些资源）</p>\n<h4 id=\"standalone模式\"><a href=\"#standalone模式\" class=\"headerlink\" title=\"standalone模式\"></a>standalone模式</h4><p>分布式部署集群，自带完整的服务，资源管理和任务监控是Spark自己监控，这个模式也是其他模式的基础</p>\n<h4 id=\"Spark-on-yarn模式\"><a href=\"#Spark-on-yarn模式\" class=\"headerlink\" title=\"Spark on yarn模式\"></a>Spark on yarn模式</h4><p>分布式部署集群，资源和任务监控交给yarn管理<br>粗粒度资源分配方式，包含cluster和client运行模式<br>cluster 适合生产，driver运行在集群子节点，具有容错功能<br>client 适合调试，dirver运行在客户端</p>\n<h3 id=\"2-Spark技术栈有哪些组件，每个组件都有什么功能，适合什么应用场景？\"><a href=\"#2-Spark技术栈有哪些组件，每个组件都有什么功能，适合什么应用场景？\" class=\"headerlink\" title=\"2. Spark技术栈有哪些组件，每个组件都有什么功能，适合什么应用场景？\"></a>2. Spark技术栈有哪些组件，每个组件都有什么功能，适合什么应用场景？</h3><h4 id=\"Spark-core\"><a href=\"#Spark-core\" class=\"headerlink\" title=\"Spark core\"></a>Spark core</h4><p>是其它组件的基础，spark的内核<br>主要包含：有向循环图、RDD、Lingage、Cache、broadcast等</p>\n<h4 id=\"SparkStreaming\"><a href=\"#SparkStreaming\" class=\"headerlink\" title=\"SparkStreaming\"></a>SparkStreaming</h4><p>是一个对实时数据流进行高通量、容错处理的流式处理系统<br>将流式计算分解成一系列短小的批处理作业</p>\n<h4 id=\"Spark-sql：\"><a href=\"#Spark-sql：\" class=\"headerlink\" title=\"Spark sql：\"></a>Spark sql：</h4><p>能够统一处理关系表和RDD，使得开发人员可以轻松地使用SQL命令进行外部查询</p>\n<h4 id=\"MLBase\"><a href=\"#MLBase\" class=\"headerlink\" title=\"MLBase\"></a>MLBase</h4><p>是Spark生态圈的一部分专注于机器学习，让机器学习的门槛更低<br>MLBase分为四部分：MLlib、MLI、ML Optimizer和MLRuntime。</p>\n<h4 id=\"GraphX\"><a href=\"#GraphX\" class=\"headerlink\" title=\"GraphX\"></a>GraphX</h4><p>是Spark中用于图和图并行计算</p>\n<h4 id=\"spark有哪些组件\"><a href=\"#spark有哪些组件\" class=\"headerlink\" title=\"spark有哪些组件\"></a>spark有哪些组件</h4><p>master：管理集群和节点，不参与计算。<br>worker：计算节点，进程本身不参与计算，和master汇报。<br>Driver：运行程序的main方法，创建spark context对象。<br>spark context：控制整个application的生命周期，包括dagsheduler和task scheduler等组件。<br>client：用户提交程序的入口。</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/yirenboy/article/details/47441465\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/yirenboy/article/details/47441465</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h1 id=\"准备小结\"><a href=\"#准备小结\" class=\"headerlink\" title=\"准备小结\"></a>准备小结</h1>","more":"<h2 id=\"hdfs存储机制是怎样的\"><a href=\"#hdfs存储机制是怎样的\" class=\"headerlink\" title=\"hdfs存储机制是怎样的?\"></a>hdfs存储机制是怎样的?</h2><p>client端发送写文件请求，namenode检查文件是否存在，如果已存在，直接返回错误信息，否则，发送给client一些可用namenode节点<br>client将文件分块，并行存储到不同节点上datanode上，发送完成后，client同时发送信息给namenode和datanode<br>namenode收到的client信息后，发送确信信息给datanode<br>datanode同时收到namenode和datanode的确认信息后，提交写操作。</p>\n<h2 id=\"hadoop中combiner的作用是什么\"><a href=\"#hadoop中combiner的作用是什么\" class=\"headerlink\" title=\"hadoop中combiner的作用是什么?\"></a>hadoop中combiner的作用是什么?</h2><p>当map生成的数据过大时，带宽就成了瓶颈，怎样精简压缩传给Reduce的数据，又不影响最终的结果呢。有一种方法就是使用Combiner，Combiner号称本地的Reduce，Reduce最终的输入，是Combiner的输出。</p>\n<h2 id=\"你们数据库怎么导入hive-的-有没有出现问题\"><a href=\"#你们数据库怎么导入hive-的-有没有出现问题\" class=\"headerlink\" title=\"你们数据库怎么导入hive 的,有没有出现问题\"></a>你们数据库怎么导入hive 的,有没有出现问题</h2><p>在导入hive的时候，如果数据库中有blob或者text字段，会报错，解决方案在sqoop笔记中。在将数据由Oracle数据库导入到Hive时，发现带有clob字段的表的数据会错乱，出现一些字段全为NULL的空行。由于在项目中CLOB字段没有实际的分析用途，因此考虑将CLOB字段去掉。</p>\n<h2 id=\"hdfs-site-xml的3个主要属性\"><a href=\"#hdfs-site-xml的3个主要属性\" class=\"headerlink\" title=\"hdfs-site.xml的3个主要属性?\"></a>hdfs-site.xml的3个主要属性?</h2><p>dfs.name.dir决定的是元数据存储的路径以及DFS的存储方式(磁盘或是远端)<br>dfs.data.dir决定的是数据存储的路径<br>fs.checkpoint.dir用于第二Namenode</p>\n<h2 id=\"下列哪项通常是集群的最主要瓶颈\"><a href=\"#下列哪项通常是集群的最主要瓶颈\" class=\"headerlink\" title=\"下列哪项通常是集群的最主要瓶颈\"></a>下列哪项通常是集群的最主要瓶颈</h2><p>磁盘 IO<br>答案：C 磁盘<br>首先集群的目的是为了节省成本，用廉价的 pc 机，取代小型机及大型机。小型机和大型机有什么特点？<br>1.cpu 处理能力强<br>2.内存够大，所以集群的瓶颈不可能是 a 和 d<br>3.如果是互联网有瓶颈，可以让集群搭建内网。每次写入数据都要通过网络（集群是内网），然后还要写入 3 份数据，所以 IO 就会打折扣。</p>\n<h2 id=\"关于-SecondaryNameNode-哪项是正确的？\"><a href=\"#关于-SecondaryNameNode-哪项是正确的？\" class=\"headerlink\" title=\"关于 SecondaryNameNode 哪项是正确的？\"></a>关于 SecondaryNameNode 哪项是正确的？</h2><p>它的目的是帮助 NameNode 合并编辑日志，减少 NameNode 启动时间 </p>\n<h2 id=\"mapreduce的原理\"><a href=\"#mapreduce的原理\" class=\"headerlink\" title=\"mapreduce的原理?\"></a>mapreduce的原理?</h2><p>MapReduce采用”分而治之”的思想，把对大规模数据集的操作，分发给一个主节点管理下的各个分节点共同完成，然后通过整合各个节点的中间结果，<br>得到最终结果。简单地说，MapReduce就是”任务的分解与结果的汇总”。<br>在Hadoop中，用于执行MapReduce任务的机器角色有两个：一个是JobTracker；另一个是TaskTracker，JobTracker是用于调度工作的，TaskTracker<br>是用于执行工作的。一个Hadoop集群中只有一台JobTracker。<br>在分布式计算中，MapReduce框架负责处理了并行编程中分布式存储、工作调度、负载均衡、容错均衡、容错处理以及网络通信等复杂问题，把处理<br>过程高度抽象为两个函数：map和reduce，map负责把任务分解成多个任务，reduce负责把分解后多任务处理的结果汇总起来。<br>需要注意的是，用MapReduce来处理的数据集（或任务）必须具备这样的特点：待处理的数据集可以分解成许多小的数据集，而且每一个小数据集都<br>可以完全并行地进行处理。</p>\n<h2 id=\"HDFS存储的机制\"><a href=\"#HDFS存储的机制\" class=\"headerlink\" title=\"HDFS存储的机制?\"></a>HDFS存储的机制?</h2><h3 id=\"写流程：\"><a href=\"#写流程：\" class=\"headerlink\" title=\"写流程：\"></a>写流程：</h3><p>client链接namenode存数据<br>namenode记录一条数据位置信息（元数据），告诉client存哪。<br>client用hdfs的api将数据块（默认是64M）存储到datanode上。<br>datanode将数据水平备份。并且备份完将反馈client。<br>client通知namenode存储块完毕。<br>namenode将元数据同步到内存中。<br>另一块循环上面的过程。</p>\n<h3 id=\"读流程\"><a href=\"#读流程\" class=\"headerlink\" title=\"读流程\"></a>读流程</h3><h2 id=\"举一个简单的例子说明mapreduce是怎么来运行的\"><a href=\"#举一个简单的例子说明mapreduce是怎么来运行的\" class=\"headerlink\" title=\"举一个简单的例子说明mapreduce是怎么来运行的 ?\"></a>举一个简单的例子说明mapreduce是怎么来运行的 ?</h2><p>MapReduce运行的时候，会通过Mapper运行的任务读取HDFS中的数据文件，然后调用自己的方法，处理数据，最后输出。<br>　　Reducer任务会接收Mapper任务输出的数据，作为自己的输入数据，调用自己的方法，最后输出到HDFS的文件中。<br>Mapper任务的执行过程详解<br>　　每个Mapper任务是一个Java进程，它会读取HDFS中的文件，解析成很多的键值对，经过我们覆盖的map方法处理后，<br>转换为很多的键值对再输出。整个Mapper任务的处理过程又可以分为以下六个阶段：<br>　　第一阶段是把输入文件按照一定的标准分片(InputSplit)，每个输入片的大小是固定的。默认情况下，输入片(InputSplit)<br>的大小与数据块(Block)的大小是相同的。如果数据块(Block)的大小是默认值128MB，输入文件有两个，一个是32MB，一个是　172MB。那么小的文件是一个输入片，大文件会分为两个数据块，那么是两个输入片。一共产生三个输入片。每一个输入片由　一个Mapper进程处理。这里的三个输入片，会有三个Mapper进程处理。</p>\n<p>　　第二阶段是对输入片中的记录按照一定的规则解析成键值对。有个默认规则是把每一行文本内容解析成键值对。“键”是每一　行的起始位置(单位是字节)，“值”是本行的文本内容。<br>　　<br>　　第三阶段是调用Mapper类中的map方法。第二阶段中解析出来的每一个键值对，调用一次map方法。如果有1000个键值对，就会　调用1000次map方法。每一次调用map方法会输出零个或者多个键值对。</p>\n<p>　　第四阶段是按照一定的规则对第三阶段输出的键值对进行分区。比较是基于键进行的。比如我们的键表示省份(如北京、上海、　山东等)，那么就可以按照不同省份进行分区，同一个省份的键值对划分到一个区中。默认是只有一个区。分区的数量就是Reducer　任务运行的数量。默认只有一个Reducer任务。<br>第五阶段是对每个分区中的键值对进行排序。首先，按照键进行排序，对于键相同的键值对，按照值进行排序。比如三个键值　对&lt;2,2&gt;、&lt;1,3&gt;、&lt;2,1&gt;，键和值分别是整数。那么排序后的结果是&lt;1,3&gt;、&lt;2,1&gt;、&lt;2,2&gt;。如果有第六阶段，那么进入</p>\n<p>第六阶段　如果没有，直接输出到本地的Linux文件中。　第六阶段是对数据进行归约处理，也就是reduce处理。键相等的键值对会调用一次reduce方法。经过这一阶段，数据量会减少。　归约后的数据输出到本地的linxu文件中。本阶段默认是没有的，需要用户自己增加这一阶段的代码。　Reducer任务的执行过程详解<br>每个Reducer任务是一个java进程。Reducer任务接收Mapper任务的输出，归约处理后写入到HDFS中，可以分为三个阶段：<br>第一阶段是Reducer任务会主动从Mapper任务复制其输出的键值对。Mapper任务可能会有很多，因此Reducer会复制多个Mapper的输出。<br>第二阶段是把复制到Reducer本地数据，全部进行合并，即把分散的数据合并成一个大的数据。再对合并后的数据排序。<br>第三阶段是对排序后的键值对调用reduce方法。键相等的键值对调用一次reduce方法，每次调用会产生零个或者多个键值对。<br>最后把这些输出的键值对写入到HDFS文件中。<br>在整个MapReduce程序的开发过程中，我们最大的工作量是覆盖map函数和覆盖reduce函数。</p>\n<h2 id=\"了解hashMap-和hashTable吗介绍下，他们有什么区别。\"><a href=\"#了解hashMap-和hashTable吗介绍下，他们有什么区别。\" class=\"headerlink\" title=\"了解hashMap 和hashTable吗介绍下，他们有什么区别。\"></a>了解hashMap 和hashTable吗介绍下，他们有什么区别。</h2><h2 id=\"为什么重写equals还要重写hashcode\"><a href=\"#为什么重写equals还要重写hashcode\" class=\"headerlink\" title=\"为什么重写equals还要重写hashcode\"></a>为什么重写equals还要重写hashcode</h2><p>因为equals比较的是内容是一致.但hashcode</p>\n<h2 id=\"说一下map的分类和常见的情况\"><a href=\"#说一下map的分类和常见的情况\" class=\"headerlink\" title=\"说一下map的分类和常见的情况\"></a>说一下map的分类和常见的情况</h2><p> hashmap,hashtable,treemap,LinkedHashMap</p>\n<ul>\n<li>根据键得到值，因此不允许键重复(重复了覆盖了),但允许值重复<h3 id=\"Hashmap\"><a href=\"#Hashmap\" class=\"headerlink\" title=\"Hashmap\"></a>Hashmap</h3>是一个最常用的Map</li>\n<li>它根据键的HashCode值存储数据,根据键可以直接获取它的值，具有很快的访问速度，遍历时，取得数据的顺序是完全随机的</li>\n<li>最多只允许一条记录的键为Null;允许多条记录的值为 Null;</li>\n<li>HashMap不支持线程的同步，即任一时刻可以有多个线程同时写HashMap;可能会导致数据的不一致。</li>\n<li>如果需要同步，可以用 Collections的synchronizedMap方法使HashMap具有同步的能力，或者使用ConcurrentHashMap<h3 id=\"Hashtable\"><a href=\"#Hashtable\" class=\"headerlink\" title=\"Hashtable\"></a>Hashtable</h3>Hashtable与 HashMap类似,它继承自Dictionary类,不同的是:它不允许记录的键或者值为空;</li>\n<li>它支持线程的同步，即任一时刻只有一个线程能写Hashtable,因此也导致了 Hashtable在写入时会比较慢<h3 id=\"LinkedHashMap\"><a href=\"#LinkedHashMap\" class=\"headerlink\" title=\"LinkedHashMap\"></a>LinkedHashMap</h3>是 HashMap 的一个子类，保存了记录的插入顺序，在用 Iterator 遍历 LinkedHashMap 时，先得到的记录肯定是先插入的.<br>也可以在构造时用带参数，按照应用次数排序。在遍历的时候会比 HashMap 慢，不过有种情况例外，当 HashMap 容量很大，实际数据较少时，遍历起来可能会比 LinkedHashMap 慢，因为 LinkedHashMap 的遍历速度只和实际数据有关，和容量无关，而 HashMap 的遍历速度和他的容量有关<h3 id=\"TreeMap\"><a href=\"#TreeMap\" class=\"headerlink\" title=\"TreeMap\"></a>TreeMap</h3>实现 SortMap 接口,能够把它保存的记录根据键排序, 默认是按键值的升序排序，也可以指定排序的比较器，当用 Iterator 遍历 TreeMap 时，得到的记录是排过序的</li>\n</ul>\n<p>HashMap，链表法存储，entry[]数组，线程不安全，可能死锁 concurrentHashMap，segment数组，每个segent下维护一组entry[]数组，每个segment是一把锁，线程安全 LinkedHashMap</p>\n<hr>\n<h2 id=\"Object若不重写hashCode-的话，hashCode-如何计算出来的？\"><a href=\"#Object若不重写hashCode-的话，hashCode-如何计算出来的？\" class=\"headerlink\" title=\"Object若不重写hashCode()的话，hashCode()如何计算出来的？\"></a>Object若不重写hashCode()的话，hashCode()如何计算出来的？</h2><p>hashcode采用的是</p>\n<h2 id=\"spark\"><a href=\"#spark\" class=\"headerlink\" title=\"spark\"></a>spark</h2><h3 id=\"1-spark的有几种部署模式，每种模式特点？\"><a href=\"#1-spark的有几种部署模式，每种模式特点？\" class=\"headerlink\" title=\"1. spark的有几种部署模式，每种模式特点？\"></a>1. spark的有几种部署模式，每种模式特点？</h3><h4 id=\"本地模式\"><a href=\"#本地模式\" class=\"headerlink\" title=\"本地模式\"></a>本地模式</h4><p>本地模式分三类</p>\n<ul>\n<li>local：只启动一个executor</li>\n<li>local[k]: 启动k个executor</li>\n<li>local[*]：启动跟cpu数目相同的 executor</li>\n</ul>\n<h3 id=\"cluster模式\"><a href=\"#cluster模式\" class=\"headerlink\" title=\"cluster模式\"></a>cluster模式</h3><p>cluster模式肯定就是运行很多机器上了，但是它又分为以下三种模式，区别在于谁去管理资源调度。（说白了，就好像后勤管家，哪里需要资源，后勤管家要负责调度这些资源）</p>\n<h4 id=\"standalone模式\"><a href=\"#standalone模式\" class=\"headerlink\" title=\"standalone模式\"></a>standalone模式</h4><p>分布式部署集群，自带完整的服务，资源管理和任务监控是Spark自己监控，这个模式也是其他模式的基础</p>\n<h4 id=\"Spark-on-yarn模式\"><a href=\"#Spark-on-yarn模式\" class=\"headerlink\" title=\"Spark on yarn模式\"></a>Spark on yarn模式</h4><p>分布式部署集群，资源和任务监控交给yarn管理<br>粗粒度资源分配方式，包含cluster和client运行模式<br>cluster 适合生产，driver运行在集群子节点，具有容错功能<br>client 适合调试，dirver运行在客户端</p>\n<h3 id=\"2-Spark技术栈有哪些组件，每个组件都有什么功能，适合什么应用场景？\"><a href=\"#2-Spark技术栈有哪些组件，每个组件都有什么功能，适合什么应用场景？\" class=\"headerlink\" title=\"2. Spark技术栈有哪些组件，每个组件都有什么功能，适合什么应用场景？\"></a>2. Spark技术栈有哪些组件，每个组件都有什么功能，适合什么应用场景？</h3><h4 id=\"Spark-core\"><a href=\"#Spark-core\" class=\"headerlink\" title=\"Spark core\"></a>Spark core</h4><p>是其它组件的基础，spark的内核<br>主要包含：有向循环图、RDD、Lingage、Cache、broadcast等</p>\n<h4 id=\"SparkStreaming\"><a href=\"#SparkStreaming\" class=\"headerlink\" title=\"SparkStreaming\"></a>SparkStreaming</h4><p>是一个对实时数据流进行高通量、容错处理的流式处理系统<br>将流式计算分解成一系列短小的批处理作业</p>\n<h4 id=\"Spark-sql：\"><a href=\"#Spark-sql：\" class=\"headerlink\" title=\"Spark sql：\"></a>Spark sql：</h4><p>能够统一处理关系表和RDD，使得开发人员可以轻松地使用SQL命令进行外部查询</p>\n<h4 id=\"MLBase\"><a href=\"#MLBase\" class=\"headerlink\" title=\"MLBase\"></a>MLBase</h4><p>是Spark生态圈的一部分专注于机器学习，让机器学习的门槛更低<br>MLBase分为四部分：MLlib、MLI、ML Optimizer和MLRuntime。</p>\n<h4 id=\"GraphX\"><a href=\"#GraphX\" class=\"headerlink\" title=\"GraphX\"></a>GraphX</h4><p>是Spark中用于图和图并行计算</p>\n<h4 id=\"spark有哪些组件\"><a href=\"#spark有哪些组件\" class=\"headerlink\" title=\"spark有哪些组件\"></a>spark有哪些组件</h4><p>master：管理集群和节点，不参与计算。<br>worker：计算节点，进程本身不参与计算，和master汇报。<br>Driver：运行程序的main方法，创建spark context对象。<br>spark context：控制整个application的生命周期，包括dagsheduler和task scheduler等组件。<br>client：用户提交程序的入口。</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/yirenboy/article/details/47441465\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/yirenboy/article/details/47441465</a></li>\n</ul>"},{"_content":"\n## 调研结果\n通过具体调研，本次迭代能直接通过sqoop直接实现的任务有\n1. mysql to hbase (单表)\n2. mysql to hive (单表)\n3. mysql to hive (整库)\n4. hive to mysql （单表）\n\n其它则在数据治理模块中的任务编排功能实现后，再借助任务编排功能实现\n具体有\nmysql to hbase （整库）\nhbase to mysql \nhive to mysql(整库)\n\n\nsqoop执行环境：\n192.168.10.100 \nuser：root\npassword: HyYg123\n\n\n## mysql to hbase\n\n\n### 单表导入\n\nsqoop import \\\n--connect jdbc:mysql://192.168.10.210:3306/hy_hydd \\\n--username yg_reader \\\n--password yg987654321 \\\n--table t_user \\\n--hbase-table  test:t_user \\\n--column-family info \\\n--delete-target-dir \\\n--hbase-create-table \\\n--hbase-row-key id \\\n--hbase-bulkload\n\n支持覆盖\n\n### 整库导入\n\nsqoop import-all-tables --connect jdbc:mysql://192.168.10.210:3306/hy_hydd --driver com.mysql.jdbc.Driver --username 'yg_reader' --password 'yg987654321' --hbase-create-table --hbase-table 'test:hy_hydd' --column-family 'info' --hbase-bulkload\n\nsqoop mysql to hbase的效果是直接导入到一个表中（该库中的所有表，都导入到一个表中）\n\n\n## hbase to mysql \n\n无法直接导出,需要借助hive、hdfs等策略\n\n\n## mysql to hive \n\n\n### 单表导入\n\n```\nsqoop import \\\n--connect jdbc:mysql://192.168.10.210:3306/hy_hydd \\\n--username yg_reader \\\n--password yg987654321 \\\n--table t_user \\\n-m 1 \\\n--hive-import \\\n--hive-table t_user \\\n--hive-overwrite \\\n--create-hive-table \\\n--fields-terminated-by ',' \\\n--lines-terminated-by '\\n'\n\n\n```\n\n\n\n### 全库导入\n\nsqoop  import-all-tables -Dorg.apache.sqoop.splitter.allow_text_splitter=true    --connect jdbc:mysql://192.168.10.210:3306/$db --username yg_reader --password yg987654321 --hive-database   $db   --hive-import --hive-overwrite  -m 1\n\n\n## hive to myqsl \n\n### 单表\n\nsqoop export --connect jdbc:mysql://192.168.10.210:3306/hive_test --table t_user --username root --password yg987654321 --hcatalog-table t_user \n\n### 整库\n\n","source":"_posts/王阁/技术/hexo/old/sqoop实现方案.md","raw":"\n## 调研结果\n通过具体调研，本次迭代能直接通过sqoop直接实现的任务有\n1. mysql to hbase (单表)\n2. mysql to hive (单表)\n3. mysql to hive (整库)\n4. hive to mysql （单表）\n\n其它则在数据治理模块中的任务编排功能实现后，再借助任务编排功能实现\n具体有\nmysql to hbase （整库）\nhbase to mysql \nhive to mysql(整库)\n\n\nsqoop执行环境：\n192.168.10.100 \nuser：root\npassword: HyYg123\n\n\n## mysql to hbase\n\n\n### 单表导入\n\nsqoop import \\\n--connect jdbc:mysql://192.168.10.210:3306/hy_hydd \\\n--username yg_reader \\\n--password yg987654321 \\\n--table t_user \\\n--hbase-table  test:t_user \\\n--column-family info \\\n--delete-target-dir \\\n--hbase-create-table \\\n--hbase-row-key id \\\n--hbase-bulkload\n\n支持覆盖\n\n### 整库导入\n\nsqoop import-all-tables --connect jdbc:mysql://192.168.10.210:3306/hy_hydd --driver com.mysql.jdbc.Driver --username 'yg_reader' --password 'yg987654321' --hbase-create-table --hbase-table 'test:hy_hydd' --column-family 'info' --hbase-bulkload\n\nsqoop mysql to hbase的效果是直接导入到一个表中（该库中的所有表，都导入到一个表中）\n\n\n## hbase to mysql \n\n无法直接导出,需要借助hive、hdfs等策略\n\n\n## mysql to hive \n\n\n### 单表导入\n\n```\nsqoop import \\\n--connect jdbc:mysql://192.168.10.210:3306/hy_hydd \\\n--username yg_reader \\\n--password yg987654321 \\\n--table t_user \\\n-m 1 \\\n--hive-import \\\n--hive-table t_user \\\n--hive-overwrite \\\n--create-hive-table \\\n--fields-terminated-by ',' \\\n--lines-terminated-by '\\n'\n\n\n```\n\n\n\n### 全库导入\n\nsqoop  import-all-tables -Dorg.apache.sqoop.splitter.allow_text_splitter=true    --connect jdbc:mysql://192.168.10.210:3306/$db --username yg_reader --password yg987654321 --hive-database   $db   --hive-import --hive-overwrite  -m 1\n\n\n## hive to myqsl \n\n### 单表\n\nsqoop export --connect jdbc:mysql://192.168.10.210:3306/hive_test --table t_user --username root --password yg987654321 --hcatalog-table t_user \n\n### 整库\n\n","slug":"王阁/技术/hexo/old/sqoop实现方案","published":1,"date":"2022-03-16T01:35:08.026Z","updated":"2022-03-16T07:19:23.149Z","title":"王阁/技术/hexo/old/sqoop实现方案","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfc003qu6pw87d033mn","content":"<h2 id=\"调研结果\"><a href=\"#调研结果\" class=\"headerlink\" title=\"调研结果\"></a>调研结果</h2><p>通过具体调研，本次迭代能直接通过sqoop直接实现的任务有</p>\n<ol>\n<li>mysql to hbase (单表)</li>\n<li>mysql to hive (单表)</li>\n<li>mysql to hive (整库)</li>\n<li>hive to mysql （单表）</li>\n</ol>\n<p>其它则在数据治理模块中的任务编排功能实现后，再借助任务编排功能实现<br>具体有<br>mysql to hbase （整库）<br>hbase to mysql<br>hive to mysql(整库)</p>\n<p>sqoop执行环境：<br>192.168.10.100<br>user：root<br>password: HyYg123</p>\n<h2 id=\"mysql-to-hbase\"><a href=\"#mysql-to-hbase\" class=\"headerlink\" title=\"mysql to hbase\"></a>mysql to hbase</h2><h3 id=\"单表导入\"><a href=\"#单表导入\" class=\"headerlink\" title=\"单表导入\"></a>单表导入</h3><p>sqoop import <br>–connect jdbc:mysql://192.168.10.210:3306/hy_hydd <br>–username yg_reader <br>–password yg987654321 <br>–table t_user <br>–hbase-table  test:t_user <br>–column-family info <br>–delete-target-dir <br>–hbase-create-table <br>–hbase-row-key id <br>–hbase-bulkload</p>\n<p>支持覆盖</p>\n<h3 id=\"整库导入\"><a href=\"#整库导入\" class=\"headerlink\" title=\"整库导入\"></a>整库导入</h3><p>sqoop import-all-tables –connect jdbc:mysql://192.168.10.210:3306/hy_hydd –driver com.mysql.jdbc.Driver –username ‘yg_reader’ –password ‘yg987654321’ –hbase-create-table –hbase-table ‘test:hy_hydd’ –column-family ‘info’ –hbase-bulkload</p>\n<p>sqoop mysql to hbase的效果是直接导入到一个表中（该库中的所有表，都导入到一个表中）</p>\n<h2 id=\"hbase-to-mysql\"><a href=\"#hbase-to-mysql\" class=\"headerlink\" title=\"hbase to mysql\"></a>hbase to mysql</h2><p>无法直接导出,需要借助hive、hdfs等策略</p>\n<h2 id=\"mysql-to-hive\"><a href=\"#mysql-to-hive\" class=\"headerlink\" title=\"mysql to hive\"></a>mysql to hive</h2><h3 id=\"单表导入-1\"><a href=\"#单表导入-1\" class=\"headerlink\" title=\"单表导入\"></a>单表导入</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqoop import \\</span><br><span class=\"line\">--connect jdbc:mysql:&#x2F;&#x2F;192.168.10.210:3306&#x2F;hy_hydd \\</span><br><span class=\"line\">--username yg_reader \\</span><br><span class=\"line\">--password yg987654321 \\</span><br><span class=\"line\">--table t_user \\</span><br><span class=\"line\">-m 1 \\</span><br><span class=\"line\">--hive-import \\</span><br><span class=\"line\">--hive-table t_user \\</span><br><span class=\"line\">--hive-overwrite \\</span><br><span class=\"line\">--create-hive-table \\</span><br><span class=\"line\">--fields-terminated-by &#39;,&#39; \\</span><br><span class=\"line\">--lines-terminated-by &#39;\\n&#39;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"全库导入\"><a href=\"#全库导入\" class=\"headerlink\" title=\"全库导入\"></a>全库导入</h3><p>sqoop  import-all-tables -Dorg.apache.sqoop.splitter.allow_text_splitter=true    –connect jdbc:mysql://192.168.10.210:3306/$db –username yg_reader –password yg987654321 –hive-database   $db   –hive-import –hive-overwrite  -m 1</p>\n<h2 id=\"hive-to-myqsl\"><a href=\"#hive-to-myqsl\" class=\"headerlink\" title=\"hive to myqsl\"></a>hive to myqsl</h2><h3 id=\"单表\"><a href=\"#单表\" class=\"headerlink\" title=\"单表\"></a>单表</h3><p>sqoop export –connect jdbc:mysql://192.168.10.210:3306/hive_test –table t_user –username root –password yg987654321 –hcatalog-table t_user </p>\n<h3 id=\"整库\"><a href=\"#整库\" class=\"headerlink\" title=\"整库\"></a>整库</h3>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"调研结果\"><a href=\"#调研结果\" class=\"headerlink\" title=\"调研结果\"></a>调研结果</h2><p>通过具体调研，本次迭代能直接通过sqoop直接实现的任务有</p>\n<ol>\n<li>mysql to hbase (单表)</li>\n<li>mysql to hive (单表)</li>\n<li>mysql to hive (整库)</li>\n<li>hive to mysql （单表）</li>\n</ol>\n<p>其它则在数据治理模块中的任务编排功能实现后，再借助任务编排功能实现<br>具体有<br>mysql to hbase （整库）<br>hbase to mysql<br>hive to mysql(整库)</p>\n<p>sqoop执行环境：<br>192.168.10.100<br>user：root<br>password: HyYg123</p>\n<h2 id=\"mysql-to-hbase\"><a href=\"#mysql-to-hbase\" class=\"headerlink\" title=\"mysql to hbase\"></a>mysql to hbase</h2><h3 id=\"单表导入\"><a href=\"#单表导入\" class=\"headerlink\" title=\"单表导入\"></a>单表导入</h3><p>sqoop import <br>–connect jdbc:mysql://192.168.10.210:3306/hy_hydd <br>–username yg_reader <br>–password yg987654321 <br>–table t_user <br>–hbase-table  test:t_user <br>–column-family info <br>–delete-target-dir <br>–hbase-create-table <br>–hbase-row-key id <br>–hbase-bulkload</p>\n<p>支持覆盖</p>\n<h3 id=\"整库导入\"><a href=\"#整库导入\" class=\"headerlink\" title=\"整库导入\"></a>整库导入</h3><p>sqoop import-all-tables –connect jdbc:mysql://192.168.10.210:3306/hy_hydd –driver com.mysql.jdbc.Driver –username ‘yg_reader’ –password ‘yg987654321’ –hbase-create-table –hbase-table ‘test:hy_hydd’ –column-family ‘info’ –hbase-bulkload</p>\n<p>sqoop mysql to hbase的效果是直接导入到一个表中（该库中的所有表，都导入到一个表中）</p>\n<h2 id=\"hbase-to-mysql\"><a href=\"#hbase-to-mysql\" class=\"headerlink\" title=\"hbase to mysql\"></a>hbase to mysql</h2><p>无法直接导出,需要借助hive、hdfs等策略</p>\n<h2 id=\"mysql-to-hive\"><a href=\"#mysql-to-hive\" class=\"headerlink\" title=\"mysql to hive\"></a>mysql to hive</h2><h3 id=\"单表导入-1\"><a href=\"#单表导入-1\" class=\"headerlink\" title=\"单表导入\"></a>单表导入</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqoop import \\</span><br><span class=\"line\">--connect jdbc:mysql:&#x2F;&#x2F;192.168.10.210:3306&#x2F;hy_hydd \\</span><br><span class=\"line\">--username yg_reader \\</span><br><span class=\"line\">--password yg987654321 \\</span><br><span class=\"line\">--table t_user \\</span><br><span class=\"line\">-m 1 \\</span><br><span class=\"line\">--hive-import \\</span><br><span class=\"line\">--hive-table t_user \\</span><br><span class=\"line\">--hive-overwrite \\</span><br><span class=\"line\">--create-hive-table \\</span><br><span class=\"line\">--fields-terminated-by &#39;,&#39; \\</span><br><span class=\"line\">--lines-terminated-by &#39;\\n&#39;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"全库导入\"><a href=\"#全库导入\" class=\"headerlink\" title=\"全库导入\"></a>全库导入</h3><p>sqoop  import-all-tables -Dorg.apache.sqoop.splitter.allow_text_splitter=true    –connect jdbc:mysql://192.168.10.210:3306/$db –username yg_reader –password yg987654321 –hive-database   $db   –hive-import –hive-overwrite  -m 1</p>\n<h2 id=\"hive-to-myqsl\"><a href=\"#hive-to-myqsl\" class=\"headerlink\" title=\"hive to myqsl\"></a>hive to myqsl</h2><h3 id=\"单表\"><a href=\"#单表\" class=\"headerlink\" title=\"单表\"></a>单表</h3><p>sqoop export –connect jdbc:mysql://192.168.10.210:3306/hive_test –table t_user –username root –password yg987654321 –hcatalog-table t_user </p>\n<h3 id=\"整库\"><a href=\"#整库\" class=\"headerlink\" title=\"整库\"></a>整库</h3>"},{"title":"大数据分享","abstract":"大数据分享","_content":"\n\n## 开头语\n\n```工欲善其事，必先利其器```\n<!-- more -->\n本次分享,是我在公司的第一次分享,我考虑后,将本次分享的主要内容分为了三大部块.先是针对相关基础组件分类介绍.再介绍下通过对这些组件进行组织配搭的大数据基础环境架构.再结合我的一些经历,为大家介绍下相关的应用与产品落地.\n\n\n## 技术栈简介\n* 数据采集\n* 数据存储\n* 数据治理(清洗&处理)\n* 数据应用\n* 产品落地\n\n\n\n我又根据不同组件的特性将他们分\n* 采集类\n* 存储类\n* 计算处理类\n* 传输类\n* 管理类 \n* 其它类\n\n下面开始具体介绍\n\n## 采集类\n\n数据源:\n* 日志\n* 业务数据\n* 公网数据(爬虫)\n* 文本数据\n* 出行数据(gps,手机定位等)\n\n![2019-04-15-10-36-53](http://img.wqkenqing.ren/2019-04-15-10-36-53.png)\n\n* sqoop flume crawler datax kettle  elk\n1. Flume(水槽) 是 Cloudera 提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统。Flume基于流式架构，灵活简单,可拓展\n2. Sqoop是一个在结构化数据和Hadoop之间进行批量数据迁移的工具，结构化数据可以是Mysql、Oracle等RDBMS。Sqoop底层用MapReduce程序实现抽取、转换、加载，MapReduce天生的特性保证了并行化和高容错率，而且相比Kettle等传统ETL工具，任务跑在Hadoop集群上，减少了ETL服务器资源的使用情况。在特定场景下，抽取过程会有很大的性能提升。\n3. crawler , jsoup ,httpclient, nutch 等.\n4. elk  集中式日志系统 ELK 协议栈详解\n![2019-04-15-10-11-16](http://img.wqkenqing.ren/2019-04-15-10-11-16.png)\n---\n\n## 存储类\n* hdfs\n* hbase\n* hive\n* mongdb\n* redis\n* RDBMS\n\n### hdfs\n    * 分布式文件存储系统\n    * 提供了高可靠性、高扩展性和高吞吐率的数据存储服务\n    * hdfs典型结构：物理结构+逻辑结构\n\n    * 文件线性切割成Block：偏移量（offset）\n    * Block分散存储在集群节点中\n    * 单一文件Block大小一致，文件与文件可以不一致\n    * Block可以设置副本数，副本分散在不同的节点中\n    * 副本数不要超过节点数量\n    * 文件上传可以设置Block大小和副本数\n    * 已上传的文件Block副本数可以调整，大小不变\n    * 只支持一次写入多次读取，同一时刻只有一个写入者\n    * 只能追加，不能修改\n\n![2019-04-15-11-12-40](http://img.wqkenqing.ren/2019-04-15-11-12-40.png)\n\n### hbase\nBase是一个构建在HDFS上的分布式列存储系统；\nBase是基于Google BigTable模型开发的，典型的key/value系统；\nBase是Apache Hadoop生态系统中的重要一员，主要用于海量结构化数据存储；\n\n大：一个表可以有数十亿行，上百万列；无模式：每行都有一个可排序的主键和任意多的列，列可以根据需要动态的增加，同一张表中不同的行可以有截然不同的列；面向列：面向列（族）的存储和权限控制，列（族）独立检索；稀疏：空（null）列并不占用存储空间，表可以设计的非常稀疏；数据多版本：每个单元中的数据可以有多个版本，默认情况下版本号自动分配，是单元格插入时的时间戳；数据类型单一：Hbase中的数据都是字符串，没有类型\n#### openTSDB\n基于Hbase的分布式的，可伸缩的时间序列数据库。\n主要用途，就是做监控系统；譬如收集大规模集群（包括网络设备、操作系统、应用程序）的监控数据并进行存储，查询。\n![2019-04-15-11-27-46](http://img.wqkenqing.ren/2019-04-15-11-27-46.png)\n\n#### solr & Phoenix\n\n二级索引\n\n### hive \nive 是一个基于 Hadoop 文件系统之上的数据仓库架构。它可以将结构化的数据文件映射为一张数据库表，并提供简单的 sql 查询功能。还可以将 sql 语句转换为 MapReduce 任务运行。\n底部计算引擎还可以用用Tez, spark等.\n![2019-04-15-11-36-43](http://img.wqkenqing.ren/2019-04-15-11-36-43.png)\n\n##### Impala\nImpala是Cloudera公司推出，提供对HDFS、Hbase数据的高性能、低延迟的交互式SQL查询功能。\n* 基于Hive使用内存计算，兼顾数据仓库、具有实时、批处理、多并发等优点\n* 对内存依赖大,稳定性不如hive\n\n相比hive数据仓库,impala针对的量级相关少些,但会有效率的提升.但一般来讲,数据仓库一类需求对时间上的要要求一般不会太高,所以常规方式一般就符合大多数需求.\n\n## 计算处理类\n* mapreduce\n* mapreduce on oozie ,on tez \n* spark \n* flink\n\n### mapreduce \nMapreduce是一个计算框架，既然是做计算的框架，那么表现形式就是有个输入（input），mapreduce操作这个输（input），通过本身定义好的计算模型，得到一个输出（output），这个输出就是我们所需要的结果。我们要学习的就是这个计算模型的运行规则。在运行一个mapreduce计算任务时候，任务过程被分为两个阶段：map阶段和reduce阶段，每个阶段都是用键值对（key/value）作为输入（input）和输出（output）。而程序员要做的就是定义好这两个阶段的函数：map函数和reduce函数。\n\n分布式计算；\n移动计算而不移动数据。\n![2019-04-15-11-59-56](http://img.wqkenqing.ren/2019-04-15-11-59-56.png)\n\n### spark\n相比一二代计算引擎,在兼并了一二代的特色之外,还引放了流计算这一能力,还丰富了计算函数.\n其中比较有代表性的主要就是spark&storm.\n也就是说这代计算引擎兼具无边界数据与有边界数据同样的处理能力.同时还具有DAG特性.\n这里主要介绍spark\n\nspark主要组成有以下\n* spark-core\n* spark-streaming\n* spark-sql\n* spark-mlib\n* spark-graphX。\n\nspark-core是一个提供内存计算的框架,其他的四大框架都是基于spark core上进行计算的,所以没有spark core,其他的框架是浮云.\nspark-core的主要内容就是对RDD的操作\nRDD的创建 ->RDD的转换 ->RDD的缓存 ->RDD的行动 ->RDD的输出\n\nspark-streaming中使用离散化流（discretized stream）作为抽象的表示，叫做DStream。它是随时间推移而收集数据的序列，每个时间段收集到的数据在DStream内部以一个RDD的形式存在。DStream支持从kafka，flume,hdfs,s3等获取输入。DStream也支持两种操作，即转化操作和输出操作\n\n\nspark-sql\nSpark SQL 提供了查询结构化数据及计算结果等信息的接口.\n查询结果以 Datasets and DataFrames 形式返回\n\n...\n\n### flink/blink\n\n略\n\n## 传输类\n### kafka\nKafka是分布式发布-订阅消息系统,一个分布式的，可划分的，冗余备份的持久性的日志服务。它主要用于处理活跃的流式数据。日常中常与spark-streaming结合实用,为其提供无边界数据\n\n![2019-04-16-15-06-25](http://img.wqkenqing.ren/2019-04-16-15-06-25.png)\n\n## 管理类 Hue cloudera-manager\nue与cm 都是由cloudera提供,后面cloudera将hue开源给了apache.如果基础集群环境是采用的是开源自主搭建,可考虑引入hue.另一些大数据服务公司,有集成打包自己的一些大数据产品,如cdh等.但这些服务收费,涉及到成本问题.所以如何选用,需要相关斟酌.\n\n## 其它类 zookeeper ,yarn等\nzookeeper在集中基础环境中主要作为配置分享中心,与kafka,hbase等组件集成.yarn则作为资源管理组件,可以与mapreduce ,spark等集成\n\n## 各类组件架构\n以上,已经大致介绍了各类工具,基本了解了相应的特性和使用场景,而根据它们的特性,进行合理的配备,架构,从而实现一个功能全面,稳定的大数据环境.\n\n于我个人经历与平时了解来讲,一般的架构主要如下\n![2019-04-17-09-23-07](http://img.wqkenqing.ren/2019-04-17-09-23-07.png)\n另:\n![2019-04-16-10-42-08](http://img.wqkenqing.ren/2019-04-16-10-42-08.png)\n\n\n总得来说,各类组件供选型一般来讲都不是单一的.所以,我们的大数据环境各部份组件都是插销式可插拔的.所以不同公司可能不一而同,具体看自身需求和实际情况.比如上图中的storm流式计算模块,就可以替换成spark-streaming等.\n\n通过对上图的架构的拆解,再组合,可能还会有以下组织架构.\n\n数据仓库\n可以理解为上图中间部份.作为一个数据集市的存在,算作数据中心的一部份.\n\n* ODS：是数据仓库第一层数据，直接从原始数据过来的，经过简单地处理，比喻：字段体重的数据为175cm等数据。\n* DW*：这个是数据仓库的第二层数据，DWD和DWS很多情况下是并列存在的，这一层储存经过处理后的标准数据，比喻订单、用户、页面点击流量等数据。\n* ADS：这个是数据仓库的最后一层数据，为应用层数据，直接可以给业务人员使用。\n![2019-04-16-11-01-33](http://img.wqkenqing.ren/2019-04-16-11-01-33.png)\n\n星型模型\n\n星型模型中有两个重要的概念：事实表和维度表。\n事实表：一些主键ID的集合，没有存放任何实际的内容\n维度表：存放详细的数据信息，有唯一的主键ID。如上面的关键词表、用户表等等。\n![2019-04-16-11-04-52](http://img.wqkenqing.ren/2019-04-16-11-04-52.png)\n\n 数据中心:\n概念相对更大一些,可能即作为具体平台产品集合,也可能是一个团队行政划分.总得来说,是如\n* 大数据基础平台\n* 数据仓库\n* DMP平台\n* 相关应用平台如推荐系统,报表系统,可视化平台等.\n\n\n数据中台:\n这个是由阿里于15年率先提出.主导思想是大中台,小前台.这块暂无特别明确的解释说法,但现在也有不少公司效仿.我个人从它的主导思想\"大中台,小前台\"的理解是,这个可能是体量更大,壁垒更少的一个数据集成体.比如阿里系的旗下公司,数据流都会归集到中台,同时阿里系下的公司也能获得不仅自己公司数据中心归集的数据反馈,还能获得阿里中台整合后流出的反馈数据.\n\n\n## 应用落地\n### 公共服务\n* 交通出行\n![2019-04-16-16-15-42](http://img.wqkenqing.ren/2019-04-16-16-15-42.png)\n* 智慧城市\n* ...\n\n### 产品应用\n* 用户画像\n* 征信模型\n* 推荐系统\n* 精确营销\n* 前沿科学(无人驾驶,人工智能,AR等)\n\n\n## 结语\n以上,就是我今天分享的主要内容.今天的主题是\"器\",但对这些工具的讲解浅尝辄止,在实际的开发实战中涉及的情况是更为复杂,需要掌握的内容更多,深度也更深.我这里主要是想抛砖引玉,为大家提供一点自己的理解,若能有所帮助,不胜荣幸.\n\n另外,工具始终是工具,菜刀再利也要厨子好,才能做好菜.所以如何利用这些工具,与我们的业务结合,实现我们想要的价值,这是我一直在探索的,也愿与各位同仁一同前行.\n\n附上图中涉及到的技术栈\n\n![2019-04-17-09-09-00](http://img.wqkenqing.ren/2019-04-17-09-09-00.png)\n\n\n\n\n\n\n","source":"_posts/王阁/技术/hexo/old/大数据相关分享.md","raw":"\n---\ntitle: 大数据分享\ntags: 日常总结\nabstract: 大数据分享\n\n---\n\n\n## 开头语\n\n```工欲善其事，必先利其器```\n<!-- more -->\n本次分享,是我在公司的第一次分享,我考虑后,将本次分享的主要内容分为了三大部块.先是针对相关基础组件分类介绍.再介绍下通过对这些组件进行组织配搭的大数据基础环境架构.再结合我的一些经历,为大家介绍下相关的应用与产品落地.\n\n\n## 技术栈简介\n* 数据采集\n* 数据存储\n* 数据治理(清洗&处理)\n* 数据应用\n* 产品落地\n\n\n\n我又根据不同组件的特性将他们分\n* 采集类\n* 存储类\n* 计算处理类\n* 传输类\n* 管理类 \n* 其它类\n\n下面开始具体介绍\n\n## 采集类\n\n数据源:\n* 日志\n* 业务数据\n* 公网数据(爬虫)\n* 文本数据\n* 出行数据(gps,手机定位等)\n\n![2019-04-15-10-36-53](http://img.wqkenqing.ren/2019-04-15-10-36-53.png)\n\n* sqoop flume crawler datax kettle  elk\n1. Flume(水槽) 是 Cloudera 提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统。Flume基于流式架构，灵活简单,可拓展\n2. Sqoop是一个在结构化数据和Hadoop之间进行批量数据迁移的工具，结构化数据可以是Mysql、Oracle等RDBMS。Sqoop底层用MapReduce程序实现抽取、转换、加载，MapReduce天生的特性保证了并行化和高容错率，而且相比Kettle等传统ETL工具，任务跑在Hadoop集群上，减少了ETL服务器资源的使用情况。在特定场景下，抽取过程会有很大的性能提升。\n3. crawler , jsoup ,httpclient, nutch 等.\n4. elk  集中式日志系统 ELK 协议栈详解\n![2019-04-15-10-11-16](http://img.wqkenqing.ren/2019-04-15-10-11-16.png)\n---\n\n## 存储类\n* hdfs\n* hbase\n* hive\n* mongdb\n* redis\n* RDBMS\n\n### hdfs\n    * 分布式文件存储系统\n    * 提供了高可靠性、高扩展性和高吞吐率的数据存储服务\n    * hdfs典型结构：物理结构+逻辑结构\n\n    * 文件线性切割成Block：偏移量（offset）\n    * Block分散存储在集群节点中\n    * 单一文件Block大小一致，文件与文件可以不一致\n    * Block可以设置副本数，副本分散在不同的节点中\n    * 副本数不要超过节点数量\n    * 文件上传可以设置Block大小和副本数\n    * 已上传的文件Block副本数可以调整，大小不变\n    * 只支持一次写入多次读取，同一时刻只有一个写入者\n    * 只能追加，不能修改\n\n![2019-04-15-11-12-40](http://img.wqkenqing.ren/2019-04-15-11-12-40.png)\n\n### hbase\nBase是一个构建在HDFS上的分布式列存储系统；\nBase是基于Google BigTable模型开发的，典型的key/value系统；\nBase是Apache Hadoop生态系统中的重要一员，主要用于海量结构化数据存储；\n\n大：一个表可以有数十亿行，上百万列；无模式：每行都有一个可排序的主键和任意多的列，列可以根据需要动态的增加，同一张表中不同的行可以有截然不同的列；面向列：面向列（族）的存储和权限控制，列（族）独立检索；稀疏：空（null）列并不占用存储空间，表可以设计的非常稀疏；数据多版本：每个单元中的数据可以有多个版本，默认情况下版本号自动分配，是单元格插入时的时间戳；数据类型单一：Hbase中的数据都是字符串，没有类型\n#### openTSDB\n基于Hbase的分布式的，可伸缩的时间序列数据库。\n主要用途，就是做监控系统；譬如收集大规模集群（包括网络设备、操作系统、应用程序）的监控数据并进行存储，查询。\n![2019-04-15-11-27-46](http://img.wqkenqing.ren/2019-04-15-11-27-46.png)\n\n#### solr & Phoenix\n\n二级索引\n\n### hive \nive 是一个基于 Hadoop 文件系统之上的数据仓库架构。它可以将结构化的数据文件映射为一张数据库表，并提供简单的 sql 查询功能。还可以将 sql 语句转换为 MapReduce 任务运行。\n底部计算引擎还可以用用Tez, spark等.\n![2019-04-15-11-36-43](http://img.wqkenqing.ren/2019-04-15-11-36-43.png)\n\n##### Impala\nImpala是Cloudera公司推出，提供对HDFS、Hbase数据的高性能、低延迟的交互式SQL查询功能。\n* 基于Hive使用内存计算，兼顾数据仓库、具有实时、批处理、多并发等优点\n* 对内存依赖大,稳定性不如hive\n\n相比hive数据仓库,impala针对的量级相关少些,但会有效率的提升.但一般来讲,数据仓库一类需求对时间上的要要求一般不会太高,所以常规方式一般就符合大多数需求.\n\n## 计算处理类\n* mapreduce\n* mapreduce on oozie ,on tez \n* spark \n* flink\n\n### mapreduce \nMapreduce是一个计算框架，既然是做计算的框架，那么表现形式就是有个输入（input），mapreduce操作这个输（input），通过本身定义好的计算模型，得到一个输出（output），这个输出就是我们所需要的结果。我们要学习的就是这个计算模型的运行规则。在运行一个mapreduce计算任务时候，任务过程被分为两个阶段：map阶段和reduce阶段，每个阶段都是用键值对（key/value）作为输入（input）和输出（output）。而程序员要做的就是定义好这两个阶段的函数：map函数和reduce函数。\n\n分布式计算；\n移动计算而不移动数据。\n![2019-04-15-11-59-56](http://img.wqkenqing.ren/2019-04-15-11-59-56.png)\n\n### spark\n相比一二代计算引擎,在兼并了一二代的特色之外,还引放了流计算这一能力,还丰富了计算函数.\n其中比较有代表性的主要就是spark&storm.\n也就是说这代计算引擎兼具无边界数据与有边界数据同样的处理能力.同时还具有DAG特性.\n这里主要介绍spark\n\nspark主要组成有以下\n* spark-core\n* spark-streaming\n* spark-sql\n* spark-mlib\n* spark-graphX。\n\nspark-core是一个提供内存计算的框架,其他的四大框架都是基于spark core上进行计算的,所以没有spark core,其他的框架是浮云.\nspark-core的主要内容就是对RDD的操作\nRDD的创建 ->RDD的转换 ->RDD的缓存 ->RDD的行动 ->RDD的输出\n\nspark-streaming中使用离散化流（discretized stream）作为抽象的表示，叫做DStream。它是随时间推移而收集数据的序列，每个时间段收集到的数据在DStream内部以一个RDD的形式存在。DStream支持从kafka，flume,hdfs,s3等获取输入。DStream也支持两种操作，即转化操作和输出操作\n\n\nspark-sql\nSpark SQL 提供了查询结构化数据及计算结果等信息的接口.\n查询结果以 Datasets and DataFrames 形式返回\n\n...\n\n### flink/blink\n\n略\n\n## 传输类\n### kafka\nKafka是分布式发布-订阅消息系统,一个分布式的，可划分的，冗余备份的持久性的日志服务。它主要用于处理活跃的流式数据。日常中常与spark-streaming结合实用,为其提供无边界数据\n\n![2019-04-16-15-06-25](http://img.wqkenqing.ren/2019-04-16-15-06-25.png)\n\n## 管理类 Hue cloudera-manager\nue与cm 都是由cloudera提供,后面cloudera将hue开源给了apache.如果基础集群环境是采用的是开源自主搭建,可考虑引入hue.另一些大数据服务公司,有集成打包自己的一些大数据产品,如cdh等.但这些服务收费,涉及到成本问题.所以如何选用,需要相关斟酌.\n\n## 其它类 zookeeper ,yarn等\nzookeeper在集中基础环境中主要作为配置分享中心,与kafka,hbase等组件集成.yarn则作为资源管理组件,可以与mapreduce ,spark等集成\n\n## 各类组件架构\n以上,已经大致介绍了各类工具,基本了解了相应的特性和使用场景,而根据它们的特性,进行合理的配备,架构,从而实现一个功能全面,稳定的大数据环境.\n\n于我个人经历与平时了解来讲,一般的架构主要如下\n![2019-04-17-09-23-07](http://img.wqkenqing.ren/2019-04-17-09-23-07.png)\n另:\n![2019-04-16-10-42-08](http://img.wqkenqing.ren/2019-04-16-10-42-08.png)\n\n\n总得来说,各类组件供选型一般来讲都不是单一的.所以,我们的大数据环境各部份组件都是插销式可插拔的.所以不同公司可能不一而同,具体看自身需求和实际情况.比如上图中的storm流式计算模块,就可以替换成spark-streaming等.\n\n通过对上图的架构的拆解,再组合,可能还会有以下组织架构.\n\n数据仓库\n可以理解为上图中间部份.作为一个数据集市的存在,算作数据中心的一部份.\n\n* ODS：是数据仓库第一层数据，直接从原始数据过来的，经过简单地处理，比喻：字段体重的数据为175cm等数据。\n* DW*：这个是数据仓库的第二层数据，DWD和DWS很多情况下是并列存在的，这一层储存经过处理后的标准数据，比喻订单、用户、页面点击流量等数据。\n* ADS：这个是数据仓库的最后一层数据，为应用层数据，直接可以给业务人员使用。\n![2019-04-16-11-01-33](http://img.wqkenqing.ren/2019-04-16-11-01-33.png)\n\n星型模型\n\n星型模型中有两个重要的概念：事实表和维度表。\n事实表：一些主键ID的集合，没有存放任何实际的内容\n维度表：存放详细的数据信息，有唯一的主键ID。如上面的关键词表、用户表等等。\n![2019-04-16-11-04-52](http://img.wqkenqing.ren/2019-04-16-11-04-52.png)\n\n 数据中心:\n概念相对更大一些,可能即作为具体平台产品集合,也可能是一个团队行政划分.总得来说,是如\n* 大数据基础平台\n* 数据仓库\n* DMP平台\n* 相关应用平台如推荐系统,报表系统,可视化平台等.\n\n\n数据中台:\n这个是由阿里于15年率先提出.主导思想是大中台,小前台.这块暂无特别明确的解释说法,但现在也有不少公司效仿.我个人从它的主导思想\"大中台,小前台\"的理解是,这个可能是体量更大,壁垒更少的一个数据集成体.比如阿里系的旗下公司,数据流都会归集到中台,同时阿里系下的公司也能获得不仅自己公司数据中心归集的数据反馈,还能获得阿里中台整合后流出的反馈数据.\n\n\n## 应用落地\n### 公共服务\n* 交通出行\n![2019-04-16-16-15-42](http://img.wqkenqing.ren/2019-04-16-16-15-42.png)\n* 智慧城市\n* ...\n\n### 产品应用\n* 用户画像\n* 征信模型\n* 推荐系统\n* 精确营销\n* 前沿科学(无人驾驶,人工智能,AR等)\n\n\n## 结语\n以上,就是我今天分享的主要内容.今天的主题是\"器\",但对这些工具的讲解浅尝辄止,在实际的开发实战中涉及的情况是更为复杂,需要掌握的内容更多,深度也更深.我这里主要是想抛砖引玉,为大家提供一点自己的理解,若能有所帮助,不胜荣幸.\n\n另外,工具始终是工具,菜刀再利也要厨子好,才能做好菜.所以如何利用这些工具,与我们的业务结合,实现我们想要的价值,这是我一直在探索的,也愿与各位同仁一同前行.\n\n附上图中涉及到的技术栈\n\n![2019-04-17-09-09-00](http://img.wqkenqing.ren/2019-04-17-09-09-00.png)\n\n\n\n\n\n\n","slug":"王阁/技术/hexo/old/大数据相关分享","published":1,"date":"2023-02-23T02:51:20.905Z","updated":"2023-02-23T02:51:20.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfi003su6pwg48y1l28","content":"<h2 id=\"开头语\"><a href=\"#开头语\" class=\"headerlink\" title=\"开头语\"></a>开头语</h2><p><code>工欲善其事，必先利其器</code></p>\n<a id=\"more\"></a>\n<p>本次分享,是我在公司的第一次分享,我考虑后,将本次分享的主要内容分为了三大部块.先是针对相关基础组件分类介绍.再介绍下通过对这些组件进行组织配搭的大数据基础环境架构.再结合我的一些经历,为大家介绍下相关的应用与产品落地.</p>\n<h2 id=\"技术栈简介\"><a href=\"#技术栈简介\" class=\"headerlink\" title=\"技术栈简介\"></a>技术栈简介</h2><ul>\n<li>数据采集</li>\n<li>数据存储</li>\n<li>数据治理(清洗&amp;处理)</li>\n<li>数据应用</li>\n<li>产品落地</li>\n</ul>\n<p>我又根据不同组件的特性将他们分</p>\n<ul>\n<li>采集类</li>\n<li>存储类</li>\n<li>计算处理类</li>\n<li>传输类</li>\n<li>管理类 </li>\n<li>其它类</li>\n</ul>\n<p>下面开始具体介绍</p>\n<h2 id=\"采集类\"><a href=\"#采集类\" class=\"headerlink\" title=\"采集类\"></a>采集类</h2><p>数据源:</p>\n<ul>\n<li>日志</li>\n<li>业务数据</li>\n<li>公网数据(爬虫)</li>\n<li>文本数据</li>\n<li>出行数据(gps,手机定位等)</li>\n</ul>\n<p><img src=\"http://img.wqkenqing.ren/2019-04-15-10-36-53.png\" alt=\"2019-04-15-10-36-53\"></p>\n<ul>\n<li>sqoop flume crawler datax kettle  elk</li>\n</ul>\n<ol>\n<li>Flume(水槽) 是 Cloudera 提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统。Flume基于流式架构，灵活简单,可拓展</li>\n<li>Sqoop是一个在结构化数据和Hadoop之间进行批量数据迁移的工具，结构化数据可以是Mysql、Oracle等RDBMS。Sqoop底层用MapReduce程序实现抽取、转换、加载，MapReduce天生的特性保证了并行化和高容错率，而且相比Kettle等传统ETL工具，任务跑在Hadoop集群上，减少了ETL服务器资源的使用情况。在特定场景下，抽取过程会有很大的性能提升。</li>\n<li>crawler , jsoup ,httpclient, nutch 等.</li>\n<li>elk  集中式日志系统 ELK 协议栈详解<br><img src=\"http://img.wqkenqing.ren/2019-04-15-10-11-16.png\" alt=\"2019-04-15-10-11-16\"></li>\n</ol>\n<hr>\n<h2 id=\"存储类\"><a href=\"#存储类\" class=\"headerlink\" title=\"存储类\"></a>存储类</h2><ul>\n<li>hdfs</li>\n<li>hbase</li>\n<li>hive</li>\n<li>mongdb</li>\n<li>redis</li>\n<li>RDBMS</li>\n</ul>\n<h3 id=\"hdfs\"><a href=\"#hdfs\" class=\"headerlink\" title=\"hdfs\"></a>hdfs</h3><pre><code>* 分布式文件存储系统\n* 提供了高可靠性、高扩展性和高吞吐率的数据存储服务\n* hdfs典型结构：物理结构+逻辑结构\n\n* 文件线性切割成Block：偏移量（offset）\n* Block分散存储在集群节点中\n* 单一文件Block大小一致，文件与文件可以不一致\n* Block可以设置副本数，副本分散在不同的节点中\n* 副本数不要超过节点数量\n* 文件上传可以设置Block大小和副本数\n* 已上传的文件Block副本数可以调整，大小不变\n* 只支持一次写入多次读取，同一时刻只有一个写入者\n* 只能追加，不能修改</code></pre><p><img src=\"http://img.wqkenqing.ren/2019-04-15-11-12-40.png\" alt=\"2019-04-15-11-12-40\"></p>\n<h3 id=\"hbase\"><a href=\"#hbase\" class=\"headerlink\" title=\"hbase\"></a>hbase</h3><p>Base是一个构建在HDFS上的分布式列存储系统；<br>Base是基于Google BigTable模型开发的，典型的key/value系统；<br>Base是Apache Hadoop生态系统中的重要一员，主要用于海量结构化数据存储；</p>\n<p>大：一个表可以有数十亿行，上百万列；无模式：每行都有一个可排序的主键和任意多的列，列可以根据需要动态的增加，同一张表中不同的行可以有截然不同的列；面向列：面向列（族）的存储和权限控制，列（族）独立检索；稀疏：空（null）列并不占用存储空间，表可以设计的非常稀疏；数据多版本：每个单元中的数据可以有多个版本，默认情况下版本号自动分配，是单元格插入时的时间戳；数据类型单一：Hbase中的数据都是字符串，没有类型</p>\n<h4 id=\"openTSDB\"><a href=\"#openTSDB\" class=\"headerlink\" title=\"openTSDB\"></a>openTSDB</h4><p>基于Hbase的分布式的，可伸缩的时间序列数据库。<br>主要用途，就是做监控系统；譬如收集大规模集群（包括网络设备、操作系统、应用程序）的监控数据并进行存储，查询。<br><img src=\"http://img.wqkenqing.ren/2019-04-15-11-27-46.png\" alt=\"2019-04-15-11-27-46\"></p>\n<h4 id=\"solr-amp-Phoenix\"><a href=\"#solr-amp-Phoenix\" class=\"headerlink\" title=\"solr &amp; Phoenix\"></a>solr &amp; Phoenix</h4><p>二级索引</p>\n<h3 id=\"hive\"><a href=\"#hive\" class=\"headerlink\" title=\"hive\"></a>hive</h3><p>ive 是一个基于 Hadoop 文件系统之上的数据仓库架构。它可以将结构化的数据文件映射为一张数据库表，并提供简单的 sql 查询功能。还可以将 sql 语句转换为 MapReduce 任务运行。<br>底部计算引擎还可以用用Tez, spark等.<br><img src=\"http://img.wqkenqing.ren/2019-04-15-11-36-43.png\" alt=\"2019-04-15-11-36-43\"></p>\n<h5 id=\"Impala\"><a href=\"#Impala\" class=\"headerlink\" title=\"Impala\"></a>Impala</h5><p>Impala是Cloudera公司推出，提供对HDFS、Hbase数据的高性能、低延迟的交互式SQL查询功能。</p>\n<ul>\n<li>基于Hive使用内存计算，兼顾数据仓库、具有实时、批处理、多并发等优点</li>\n<li>对内存依赖大,稳定性不如hive</li>\n</ul>\n<p>相比hive数据仓库,impala针对的量级相关少些,但会有效率的提升.但一般来讲,数据仓库一类需求对时间上的要要求一般不会太高,所以常规方式一般就符合大多数需求.</p>\n<h2 id=\"计算处理类\"><a href=\"#计算处理类\" class=\"headerlink\" title=\"计算处理类\"></a>计算处理类</h2><ul>\n<li>mapreduce</li>\n<li>mapreduce on oozie ,on tez </li>\n<li>spark </li>\n<li>flink</li>\n</ul>\n<h3 id=\"mapreduce\"><a href=\"#mapreduce\" class=\"headerlink\" title=\"mapreduce\"></a>mapreduce</h3><p>Mapreduce是一个计算框架，既然是做计算的框架，那么表现形式就是有个输入（input），mapreduce操作这个输（input），通过本身定义好的计算模型，得到一个输出（output），这个输出就是我们所需要的结果。我们要学习的就是这个计算模型的运行规则。在运行一个mapreduce计算任务时候，任务过程被分为两个阶段：map阶段和reduce阶段，每个阶段都是用键值对（key/value）作为输入（input）和输出（output）。而程序员要做的就是定义好这两个阶段的函数：map函数和reduce函数。</p>\n<p>分布式计算；<br>移动计算而不移动数据。<br><img src=\"http://img.wqkenqing.ren/2019-04-15-11-59-56.png\" alt=\"2019-04-15-11-59-56\"></p>\n<h3 id=\"spark\"><a href=\"#spark\" class=\"headerlink\" title=\"spark\"></a>spark</h3><p>相比一二代计算引擎,在兼并了一二代的特色之外,还引放了流计算这一能力,还丰富了计算函数.<br>其中比较有代表性的主要就是spark&amp;storm.<br>也就是说这代计算引擎兼具无边界数据与有边界数据同样的处理能力.同时还具有DAG特性.<br>这里主要介绍spark</p>\n<p>spark主要组成有以下</p>\n<ul>\n<li>spark-core</li>\n<li>spark-streaming</li>\n<li>spark-sql</li>\n<li>spark-mlib</li>\n<li>spark-graphX。</li>\n</ul>\n<p>spark-core是一个提供内存计算的框架,其他的四大框架都是基于spark core上进行计算的,所以没有spark core,其他的框架是浮云.<br>spark-core的主要内容就是对RDD的操作<br>RDD的创建 -&gt;RDD的转换 -&gt;RDD的缓存 -&gt;RDD的行动 -&gt;RDD的输出</p>\n<p>spark-streaming中使用离散化流（discretized stream）作为抽象的表示，叫做DStream。它是随时间推移而收集数据的序列，每个时间段收集到的数据在DStream内部以一个RDD的形式存在。DStream支持从kafka，flume,hdfs,s3等获取输入。DStream也支持两种操作，即转化操作和输出操作</p>\n<p>spark-sql<br>Spark SQL 提供了查询结构化数据及计算结果等信息的接口.<br>查询结果以 Datasets and DataFrames 形式返回</p>\n<p>…</p>\n<h3 id=\"flink-blink\"><a href=\"#flink-blink\" class=\"headerlink\" title=\"flink/blink\"></a>flink/blink</h3><p>略</p>\n<h2 id=\"传输类\"><a href=\"#传输类\" class=\"headerlink\" title=\"传输类\"></a>传输类</h2><h3 id=\"kafka\"><a href=\"#kafka\" class=\"headerlink\" title=\"kafka\"></a>kafka</h3><p>Kafka是分布式发布-订阅消息系统,一个分布式的，可划分的，冗余备份的持久性的日志服务。它主要用于处理活跃的流式数据。日常中常与spark-streaming结合实用,为其提供无边界数据</p>\n<p><img src=\"http://img.wqkenqing.ren/2019-04-16-15-06-25.png\" alt=\"2019-04-16-15-06-25\"></p>\n<h2 id=\"管理类-Hue-cloudera-manager\"><a href=\"#管理类-Hue-cloudera-manager\" class=\"headerlink\" title=\"管理类 Hue cloudera-manager\"></a>管理类 Hue cloudera-manager</h2><p>ue与cm 都是由cloudera提供,后面cloudera将hue开源给了apache.如果基础集群环境是采用的是开源自主搭建,可考虑引入hue.另一些大数据服务公司,有集成打包自己的一些大数据产品,如cdh等.但这些服务收费,涉及到成本问题.所以如何选用,需要相关斟酌.</p>\n<h2 id=\"其它类-zookeeper-yarn等\"><a href=\"#其它类-zookeeper-yarn等\" class=\"headerlink\" title=\"其它类 zookeeper ,yarn等\"></a>其它类 zookeeper ,yarn等</h2><p>zookeeper在集中基础环境中主要作为配置分享中心,与kafka,hbase等组件集成.yarn则作为资源管理组件,可以与mapreduce ,spark等集成</p>\n<h2 id=\"各类组件架构\"><a href=\"#各类组件架构\" class=\"headerlink\" title=\"各类组件架构\"></a>各类组件架构</h2><p>以上,已经大致介绍了各类工具,基本了解了相应的特性和使用场景,而根据它们的特性,进行合理的配备,架构,从而实现一个功能全面,稳定的大数据环境.</p>\n<p>于我个人经历与平时了解来讲,一般的架构主要如下<br><img src=\"http://img.wqkenqing.ren/2019-04-17-09-23-07.png\" alt=\"2019-04-17-09-23-07\"><br>另:<br><img src=\"http://img.wqkenqing.ren/2019-04-16-10-42-08.png\" alt=\"2019-04-16-10-42-08\"></p>\n<p>总得来说,各类组件供选型一般来讲都不是单一的.所以,我们的大数据环境各部份组件都是插销式可插拔的.所以不同公司可能不一而同,具体看自身需求和实际情况.比如上图中的storm流式计算模块,就可以替换成spark-streaming等.</p>\n<p>通过对上图的架构的拆解,再组合,可能还会有以下组织架构.</p>\n<p>数据仓库<br>可以理解为上图中间部份.作为一个数据集市的存在,算作数据中心的一部份.</p>\n<ul>\n<li>ODS：是数据仓库第一层数据，直接从原始数据过来的，经过简单地处理，比喻：字段体重的数据为175cm等数据。</li>\n<li>DW*：这个是数据仓库的第二层数据，DWD和DWS很多情况下是并列存在的，这一层储存经过处理后的标准数据，比喻订单、用户、页面点击流量等数据。</li>\n<li>ADS：这个是数据仓库的最后一层数据，为应用层数据，直接可以给业务人员使用。<br><img src=\"http://img.wqkenqing.ren/2019-04-16-11-01-33.png\" alt=\"2019-04-16-11-01-33\"></li>\n</ul>\n<p>星型模型</p>\n<p>星型模型中有两个重要的概念：事实表和维度表。<br>事实表：一些主键ID的集合，没有存放任何实际的内容<br>维度表：存放详细的数据信息，有唯一的主键ID。如上面的关键词表、用户表等等。<br><img src=\"http://img.wqkenqing.ren/2019-04-16-11-04-52.png\" alt=\"2019-04-16-11-04-52\"></p>\n<p> 数据中心:<br>概念相对更大一些,可能即作为具体平台产品集合,也可能是一个团队行政划分.总得来说,是如</p>\n<ul>\n<li>大数据基础平台</li>\n<li>数据仓库</li>\n<li>DMP平台</li>\n<li>相关应用平台如推荐系统,报表系统,可视化平台等.</li>\n</ul>\n<p>数据中台:<br>这个是由阿里于15年率先提出.主导思想是大中台,小前台.这块暂无特别明确的解释说法,但现在也有不少公司效仿.我个人从它的主导思想”大中台,小前台”的理解是,这个可能是体量更大,壁垒更少的一个数据集成体.比如阿里系的旗下公司,数据流都会归集到中台,同时阿里系下的公司也能获得不仅自己公司数据中心归集的数据反馈,还能获得阿里中台整合后流出的反馈数据.</p>\n<h2 id=\"应用落地\"><a href=\"#应用落地\" class=\"headerlink\" title=\"应用落地\"></a>应用落地</h2><h3 id=\"公共服务\"><a href=\"#公共服务\" class=\"headerlink\" title=\"公共服务\"></a>公共服务</h3><ul>\n<li>交通出行<br><img src=\"http://img.wqkenqing.ren/2019-04-16-16-15-42.png\" alt=\"2019-04-16-16-15-42\"></li>\n<li>智慧城市</li>\n<li>…</li>\n</ul>\n<h3 id=\"产品应用\"><a href=\"#产品应用\" class=\"headerlink\" title=\"产品应用\"></a>产品应用</h3><ul>\n<li>用户画像</li>\n<li>征信模型</li>\n<li>推荐系统</li>\n<li>精确营销</li>\n<li>前沿科学(无人驾驶,人工智能,AR等)</li>\n</ul>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>以上,就是我今天分享的主要内容.今天的主题是”器”,但对这些工具的讲解浅尝辄止,在实际的开发实战中涉及的情况是更为复杂,需要掌握的内容更多,深度也更深.我这里主要是想抛砖引玉,为大家提供一点自己的理解,若能有所帮助,不胜荣幸.</p>\n<p>另外,工具始终是工具,菜刀再利也要厨子好,才能做好菜.所以如何利用这些工具,与我们的业务结合,实现我们想要的价值,这是我一直在探索的,也愿与各位同仁一同前行.</p>\n<p>附上图中涉及到的技术栈</p>\n<p><img src=\"http://img.wqkenqing.ren/2019-04-17-09-09-00.png\" alt=\"2019-04-17-09-09-00\"></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"开头语\"><a href=\"#开头语\" class=\"headerlink\" title=\"开头语\"></a>开头语</h2><p><code>工欲善其事，必先利其器</code></p>","more":"<p>本次分享,是我在公司的第一次分享,我考虑后,将本次分享的主要内容分为了三大部块.先是针对相关基础组件分类介绍.再介绍下通过对这些组件进行组织配搭的大数据基础环境架构.再结合我的一些经历,为大家介绍下相关的应用与产品落地.</p>\n<h2 id=\"技术栈简介\"><a href=\"#技术栈简介\" class=\"headerlink\" title=\"技术栈简介\"></a>技术栈简介</h2><ul>\n<li>数据采集</li>\n<li>数据存储</li>\n<li>数据治理(清洗&amp;处理)</li>\n<li>数据应用</li>\n<li>产品落地</li>\n</ul>\n<p>我又根据不同组件的特性将他们分</p>\n<ul>\n<li>采集类</li>\n<li>存储类</li>\n<li>计算处理类</li>\n<li>传输类</li>\n<li>管理类 </li>\n<li>其它类</li>\n</ul>\n<p>下面开始具体介绍</p>\n<h2 id=\"采集类\"><a href=\"#采集类\" class=\"headerlink\" title=\"采集类\"></a>采集类</h2><p>数据源:</p>\n<ul>\n<li>日志</li>\n<li>业务数据</li>\n<li>公网数据(爬虫)</li>\n<li>文本数据</li>\n<li>出行数据(gps,手机定位等)</li>\n</ul>\n<p><img src=\"http://img.wqkenqing.ren/2019-04-15-10-36-53.png\" alt=\"2019-04-15-10-36-53\"></p>\n<ul>\n<li>sqoop flume crawler datax kettle  elk</li>\n</ul>\n<ol>\n<li>Flume(水槽) 是 Cloudera 提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统。Flume基于流式架构，灵活简单,可拓展</li>\n<li>Sqoop是一个在结构化数据和Hadoop之间进行批量数据迁移的工具，结构化数据可以是Mysql、Oracle等RDBMS。Sqoop底层用MapReduce程序实现抽取、转换、加载，MapReduce天生的特性保证了并行化和高容错率，而且相比Kettle等传统ETL工具，任务跑在Hadoop集群上，减少了ETL服务器资源的使用情况。在特定场景下，抽取过程会有很大的性能提升。</li>\n<li>crawler , jsoup ,httpclient, nutch 等.</li>\n<li>elk  集中式日志系统 ELK 协议栈详解<br><img src=\"http://img.wqkenqing.ren/2019-04-15-10-11-16.png\" alt=\"2019-04-15-10-11-16\"></li>\n</ol>\n<hr>\n<h2 id=\"存储类\"><a href=\"#存储类\" class=\"headerlink\" title=\"存储类\"></a>存储类</h2><ul>\n<li>hdfs</li>\n<li>hbase</li>\n<li>hive</li>\n<li>mongdb</li>\n<li>redis</li>\n<li>RDBMS</li>\n</ul>\n<h3 id=\"hdfs\"><a href=\"#hdfs\" class=\"headerlink\" title=\"hdfs\"></a>hdfs</h3><pre><code>* 分布式文件存储系统\n* 提供了高可靠性、高扩展性和高吞吐率的数据存储服务\n* hdfs典型结构：物理结构+逻辑结构\n\n* 文件线性切割成Block：偏移量（offset）\n* Block分散存储在集群节点中\n* 单一文件Block大小一致，文件与文件可以不一致\n* Block可以设置副本数，副本分散在不同的节点中\n* 副本数不要超过节点数量\n* 文件上传可以设置Block大小和副本数\n* 已上传的文件Block副本数可以调整，大小不变\n* 只支持一次写入多次读取，同一时刻只有一个写入者\n* 只能追加，不能修改</code></pre><p><img src=\"http://img.wqkenqing.ren/2019-04-15-11-12-40.png\" alt=\"2019-04-15-11-12-40\"></p>\n<h3 id=\"hbase\"><a href=\"#hbase\" class=\"headerlink\" title=\"hbase\"></a>hbase</h3><p>Base是一个构建在HDFS上的分布式列存储系统；<br>Base是基于Google BigTable模型开发的，典型的key/value系统；<br>Base是Apache Hadoop生态系统中的重要一员，主要用于海量结构化数据存储；</p>\n<p>大：一个表可以有数十亿行，上百万列；无模式：每行都有一个可排序的主键和任意多的列，列可以根据需要动态的增加，同一张表中不同的行可以有截然不同的列；面向列：面向列（族）的存储和权限控制，列（族）独立检索；稀疏：空（null）列并不占用存储空间，表可以设计的非常稀疏；数据多版本：每个单元中的数据可以有多个版本，默认情况下版本号自动分配，是单元格插入时的时间戳；数据类型单一：Hbase中的数据都是字符串，没有类型</p>\n<h4 id=\"openTSDB\"><a href=\"#openTSDB\" class=\"headerlink\" title=\"openTSDB\"></a>openTSDB</h4><p>基于Hbase的分布式的，可伸缩的时间序列数据库。<br>主要用途，就是做监控系统；譬如收集大规模集群（包括网络设备、操作系统、应用程序）的监控数据并进行存储，查询。<br><img src=\"http://img.wqkenqing.ren/2019-04-15-11-27-46.png\" alt=\"2019-04-15-11-27-46\"></p>\n<h4 id=\"solr-amp-Phoenix\"><a href=\"#solr-amp-Phoenix\" class=\"headerlink\" title=\"solr &amp; Phoenix\"></a>solr &amp; Phoenix</h4><p>二级索引</p>\n<h3 id=\"hive\"><a href=\"#hive\" class=\"headerlink\" title=\"hive\"></a>hive</h3><p>ive 是一个基于 Hadoop 文件系统之上的数据仓库架构。它可以将结构化的数据文件映射为一张数据库表，并提供简单的 sql 查询功能。还可以将 sql 语句转换为 MapReduce 任务运行。<br>底部计算引擎还可以用用Tez, spark等.<br><img src=\"http://img.wqkenqing.ren/2019-04-15-11-36-43.png\" alt=\"2019-04-15-11-36-43\"></p>\n<h5 id=\"Impala\"><a href=\"#Impala\" class=\"headerlink\" title=\"Impala\"></a>Impala</h5><p>Impala是Cloudera公司推出，提供对HDFS、Hbase数据的高性能、低延迟的交互式SQL查询功能。</p>\n<ul>\n<li>基于Hive使用内存计算，兼顾数据仓库、具有实时、批处理、多并发等优点</li>\n<li>对内存依赖大,稳定性不如hive</li>\n</ul>\n<p>相比hive数据仓库,impala针对的量级相关少些,但会有效率的提升.但一般来讲,数据仓库一类需求对时间上的要要求一般不会太高,所以常规方式一般就符合大多数需求.</p>\n<h2 id=\"计算处理类\"><a href=\"#计算处理类\" class=\"headerlink\" title=\"计算处理类\"></a>计算处理类</h2><ul>\n<li>mapreduce</li>\n<li>mapreduce on oozie ,on tez </li>\n<li>spark </li>\n<li>flink</li>\n</ul>\n<h3 id=\"mapreduce\"><a href=\"#mapreduce\" class=\"headerlink\" title=\"mapreduce\"></a>mapreduce</h3><p>Mapreduce是一个计算框架，既然是做计算的框架，那么表现形式就是有个输入（input），mapreduce操作这个输（input），通过本身定义好的计算模型，得到一个输出（output），这个输出就是我们所需要的结果。我们要学习的就是这个计算模型的运行规则。在运行一个mapreduce计算任务时候，任务过程被分为两个阶段：map阶段和reduce阶段，每个阶段都是用键值对（key/value）作为输入（input）和输出（output）。而程序员要做的就是定义好这两个阶段的函数：map函数和reduce函数。</p>\n<p>分布式计算；<br>移动计算而不移动数据。<br><img src=\"http://img.wqkenqing.ren/2019-04-15-11-59-56.png\" alt=\"2019-04-15-11-59-56\"></p>\n<h3 id=\"spark\"><a href=\"#spark\" class=\"headerlink\" title=\"spark\"></a>spark</h3><p>相比一二代计算引擎,在兼并了一二代的特色之外,还引放了流计算这一能力,还丰富了计算函数.<br>其中比较有代表性的主要就是spark&amp;storm.<br>也就是说这代计算引擎兼具无边界数据与有边界数据同样的处理能力.同时还具有DAG特性.<br>这里主要介绍spark</p>\n<p>spark主要组成有以下</p>\n<ul>\n<li>spark-core</li>\n<li>spark-streaming</li>\n<li>spark-sql</li>\n<li>spark-mlib</li>\n<li>spark-graphX。</li>\n</ul>\n<p>spark-core是一个提供内存计算的框架,其他的四大框架都是基于spark core上进行计算的,所以没有spark core,其他的框架是浮云.<br>spark-core的主要内容就是对RDD的操作<br>RDD的创建 -&gt;RDD的转换 -&gt;RDD的缓存 -&gt;RDD的行动 -&gt;RDD的输出</p>\n<p>spark-streaming中使用离散化流（discretized stream）作为抽象的表示，叫做DStream。它是随时间推移而收集数据的序列，每个时间段收集到的数据在DStream内部以一个RDD的形式存在。DStream支持从kafka，flume,hdfs,s3等获取输入。DStream也支持两种操作，即转化操作和输出操作</p>\n<p>spark-sql<br>Spark SQL 提供了查询结构化数据及计算结果等信息的接口.<br>查询结果以 Datasets and DataFrames 形式返回</p>\n<p>…</p>\n<h3 id=\"flink-blink\"><a href=\"#flink-blink\" class=\"headerlink\" title=\"flink/blink\"></a>flink/blink</h3><p>略</p>\n<h2 id=\"传输类\"><a href=\"#传输类\" class=\"headerlink\" title=\"传输类\"></a>传输类</h2><h3 id=\"kafka\"><a href=\"#kafka\" class=\"headerlink\" title=\"kafka\"></a>kafka</h3><p>Kafka是分布式发布-订阅消息系统,一个分布式的，可划分的，冗余备份的持久性的日志服务。它主要用于处理活跃的流式数据。日常中常与spark-streaming结合实用,为其提供无边界数据</p>\n<p><img src=\"http://img.wqkenqing.ren/2019-04-16-15-06-25.png\" alt=\"2019-04-16-15-06-25\"></p>\n<h2 id=\"管理类-Hue-cloudera-manager\"><a href=\"#管理类-Hue-cloudera-manager\" class=\"headerlink\" title=\"管理类 Hue cloudera-manager\"></a>管理类 Hue cloudera-manager</h2><p>ue与cm 都是由cloudera提供,后面cloudera将hue开源给了apache.如果基础集群环境是采用的是开源自主搭建,可考虑引入hue.另一些大数据服务公司,有集成打包自己的一些大数据产品,如cdh等.但这些服务收费,涉及到成本问题.所以如何选用,需要相关斟酌.</p>\n<h2 id=\"其它类-zookeeper-yarn等\"><a href=\"#其它类-zookeeper-yarn等\" class=\"headerlink\" title=\"其它类 zookeeper ,yarn等\"></a>其它类 zookeeper ,yarn等</h2><p>zookeeper在集中基础环境中主要作为配置分享中心,与kafka,hbase等组件集成.yarn则作为资源管理组件,可以与mapreduce ,spark等集成</p>\n<h2 id=\"各类组件架构\"><a href=\"#各类组件架构\" class=\"headerlink\" title=\"各类组件架构\"></a>各类组件架构</h2><p>以上,已经大致介绍了各类工具,基本了解了相应的特性和使用场景,而根据它们的特性,进行合理的配备,架构,从而实现一个功能全面,稳定的大数据环境.</p>\n<p>于我个人经历与平时了解来讲,一般的架构主要如下<br><img src=\"http://img.wqkenqing.ren/2019-04-17-09-23-07.png\" alt=\"2019-04-17-09-23-07\"><br>另:<br><img src=\"http://img.wqkenqing.ren/2019-04-16-10-42-08.png\" alt=\"2019-04-16-10-42-08\"></p>\n<p>总得来说,各类组件供选型一般来讲都不是单一的.所以,我们的大数据环境各部份组件都是插销式可插拔的.所以不同公司可能不一而同,具体看自身需求和实际情况.比如上图中的storm流式计算模块,就可以替换成spark-streaming等.</p>\n<p>通过对上图的架构的拆解,再组合,可能还会有以下组织架构.</p>\n<p>数据仓库<br>可以理解为上图中间部份.作为一个数据集市的存在,算作数据中心的一部份.</p>\n<ul>\n<li>ODS：是数据仓库第一层数据，直接从原始数据过来的，经过简单地处理，比喻：字段体重的数据为175cm等数据。</li>\n<li>DW*：这个是数据仓库的第二层数据，DWD和DWS很多情况下是并列存在的，这一层储存经过处理后的标准数据，比喻订单、用户、页面点击流量等数据。</li>\n<li>ADS：这个是数据仓库的最后一层数据，为应用层数据，直接可以给业务人员使用。<br><img src=\"http://img.wqkenqing.ren/2019-04-16-11-01-33.png\" alt=\"2019-04-16-11-01-33\"></li>\n</ul>\n<p>星型模型</p>\n<p>星型模型中有两个重要的概念：事实表和维度表。<br>事实表：一些主键ID的集合，没有存放任何实际的内容<br>维度表：存放详细的数据信息，有唯一的主键ID。如上面的关键词表、用户表等等。<br><img src=\"http://img.wqkenqing.ren/2019-04-16-11-04-52.png\" alt=\"2019-04-16-11-04-52\"></p>\n<p> 数据中心:<br>概念相对更大一些,可能即作为具体平台产品集合,也可能是一个团队行政划分.总得来说,是如</p>\n<ul>\n<li>大数据基础平台</li>\n<li>数据仓库</li>\n<li>DMP平台</li>\n<li>相关应用平台如推荐系统,报表系统,可视化平台等.</li>\n</ul>\n<p>数据中台:<br>这个是由阿里于15年率先提出.主导思想是大中台,小前台.这块暂无特别明确的解释说法,但现在也有不少公司效仿.我个人从它的主导思想”大中台,小前台”的理解是,这个可能是体量更大,壁垒更少的一个数据集成体.比如阿里系的旗下公司,数据流都会归集到中台,同时阿里系下的公司也能获得不仅自己公司数据中心归集的数据反馈,还能获得阿里中台整合后流出的反馈数据.</p>\n<h2 id=\"应用落地\"><a href=\"#应用落地\" class=\"headerlink\" title=\"应用落地\"></a>应用落地</h2><h3 id=\"公共服务\"><a href=\"#公共服务\" class=\"headerlink\" title=\"公共服务\"></a>公共服务</h3><ul>\n<li>交通出行<br><img src=\"http://img.wqkenqing.ren/2019-04-16-16-15-42.png\" alt=\"2019-04-16-16-15-42\"></li>\n<li>智慧城市</li>\n<li>…</li>\n</ul>\n<h3 id=\"产品应用\"><a href=\"#产品应用\" class=\"headerlink\" title=\"产品应用\"></a>产品应用</h3><ul>\n<li>用户画像</li>\n<li>征信模型</li>\n<li>推荐系统</li>\n<li>精确营销</li>\n<li>前沿科学(无人驾驶,人工智能,AR等)</li>\n</ul>\n<h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>以上,就是我今天分享的主要内容.今天的主题是”器”,但对这些工具的讲解浅尝辄止,在实际的开发实战中涉及的情况是更为复杂,需要掌握的内容更多,深度也更深.我这里主要是想抛砖引玉,为大家提供一点自己的理解,若能有所帮助,不胜荣幸.</p>\n<p>另外,工具始终是工具,菜刀再利也要厨子好,才能做好菜.所以如何利用这些工具,与我们的业务结合,实现我们想要的价值,这是我一直在探索的,也愿与各位同仁一同前行.</p>\n<p>附上图中涉及到的技术栈</p>\n<p><img src=\"http://img.wqkenqing.ren/2019-04-17-09-09-00.png\" alt=\"2019-04-17-09-09-00\"></p>"},{"title":"java八大数据类型总结","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n\n<!--more-->\n\n## java八大数据类型总结\n\n[TOC]\n\n\n`负数在电脑中的存储是用（该数值的绝对值的反码+1表示）`\n`最高位是符号位，1表示负数，0表示正数`\n`负数换算规则:负数的二进制=负数绝对值的二进制取反码+1。`\n### byte类型:\n        byte类型，使用一个字节存放一个数据，一个字节占八位，所以它取值范围是:1000 0000 ~ 0111 1111(-128-127)\n\n\n\n### short类型\n        short类型，使用两个字节存放一个数据，两个字节16位二进制表示，那么它的取值范围就是：\n    1000 0000 0000 0000 ~ 0111 1111 1111 1111(-32768-32767)换算同上述byte类型\n\n\n ---\n\n### char类型\n       char在java中占据两个字节，即用16位表示一个char类型的数据。由于char是无符号的所以其表示范围是0-65536.当计算超过其表示范围时，系统会自动将结果转换为int类型。\n\n### boolean类型:\n\t        boolean类型占用一个字节，八位二进制表示。boolean类型只有两个值true和flase。\n\n### float类型\n  其他特殊表示:\n\n     1.当指数部分和小数部分全为0时,表示0值,有+0和-0之分(符号位决定),0x00000000表示正0,0x80000000表示负0.\n    2.指数部分全1,小数部分全0时,表示无穷大,有正无穷和负无穷,0x7f800000表示正无穷,0xff800000表示负无穷.\n    3.指数部分全1,小数部分不全0时,表示NaN,分为QNaN和SNaN,Java中都是NaN.\n    可以看出浮点数的取值范围是:2^(-149)~~(2-2^(-23))*2^127,也就是Float.MIN_VALUE和Float.MAX_VALUE.\n\n### double类型\n        double类型占8个字节，一共是64位二进制表示。数符加尾数占48位，指数符加指数占16位.取值换算方式和float的换算方式一样。但是在使用float和double时最好先分析好目标数据的精度和性能要求，如果能够使用float满足的坚决不适用double，因为double类型使用内存占用是float的两倍，运算速度远不如float。\n\n### short类型\n        short类型，使用两个字节存放一个数据，两个字节16位二进制表示，那么它的取值范围就是：\n    1000 0000 0000 0000 ~ 0111 1111 1111 1111(-32768-32767)换算同上述byte类型。short类型使用时除了要注意取值范围\n\n### int类型\n        int类型，在Java中使用的是四个字节保存一个数据，一共是32为二进制表示，同上述的一样,取值范围:1000 0000 0000 0000 0000 0000 0000 0000 - 0111 1111 1111 1111 1111 1111 1111 1111\n        (-2^32~2^31)\n\n\n### long类型\n        long类型是Java的基础类型，使用8个字节存储一个数值，一共是64位二进制数。取值范围是（-2^64-2^63\n\n### 八大常用类型的最大值与最小值\n\n`\nfloat max=3.4028235E38\nfloat min=1.4E-45\ndouble max=1.7976931348623157E308\ndouble max=4.9E-324\nbyte max=127\nbyte min=-128\nchar max=?\nchar min=\nshort max=32767\nshort min=-32768\nint max=2147483647\nint min=-2147483648\nlong max=9223372036854775807\nlong min=-9223372036854775808\n`\n\n| 数据类型      | byte类型 |  short类型  |char类型|boolean类型|float类型|int类型|double类型|long类型|\n| :-------- | --------:| :------:\n|所占字节数  | 2| 2|2|8|4|4|8|8|","source":"_posts/王阁/技术/hexo/oldblog/blog1.md","raw":"\n---\n\ntitle: java八大数据类型总结\ndate: 2019-07-16\ntags:\n\n---\n此处简介\n\n<!--more-->\n\n## java八大数据类型总结\n\n[TOC]\n\n\n`负数在电脑中的存储是用（该数值的绝对值的反码+1表示）`\n`最高位是符号位，1表示负数，0表示正数`\n`负数换算规则:负数的二进制=负数绝对值的二进制取反码+1。`\n### byte类型:\n        byte类型，使用一个字节存放一个数据，一个字节占八位，所以它取值范围是:1000 0000 ~ 0111 1111(-128-127)\n\n\n\n### short类型\n        short类型，使用两个字节存放一个数据，两个字节16位二进制表示，那么它的取值范围就是：\n    1000 0000 0000 0000 ~ 0111 1111 1111 1111(-32768-32767)换算同上述byte类型\n\n\n ---\n\n### char类型\n       char在java中占据两个字节，即用16位表示一个char类型的数据。由于char是无符号的所以其表示范围是0-65536.当计算超过其表示范围时，系统会自动将结果转换为int类型。\n\n### boolean类型:\n\t        boolean类型占用一个字节，八位二进制表示。boolean类型只有两个值true和flase。\n\n### float类型\n  其他特殊表示:\n\n     1.当指数部分和小数部分全为0时,表示0值,有+0和-0之分(符号位决定),0x00000000表示正0,0x80000000表示负0.\n    2.指数部分全1,小数部分全0时,表示无穷大,有正无穷和负无穷,0x7f800000表示正无穷,0xff800000表示负无穷.\n    3.指数部分全1,小数部分不全0时,表示NaN,分为QNaN和SNaN,Java中都是NaN.\n    可以看出浮点数的取值范围是:2^(-149)~~(2-2^(-23))*2^127,也就是Float.MIN_VALUE和Float.MAX_VALUE.\n\n### double类型\n        double类型占8个字节，一共是64位二进制表示。数符加尾数占48位，指数符加指数占16位.取值换算方式和float的换算方式一样。但是在使用float和double时最好先分析好目标数据的精度和性能要求，如果能够使用float满足的坚决不适用double，因为double类型使用内存占用是float的两倍，运算速度远不如float。\n\n### short类型\n        short类型，使用两个字节存放一个数据，两个字节16位二进制表示，那么它的取值范围就是：\n    1000 0000 0000 0000 ~ 0111 1111 1111 1111(-32768-32767)换算同上述byte类型。short类型使用时除了要注意取值范围\n\n### int类型\n        int类型，在Java中使用的是四个字节保存一个数据，一共是32为二进制表示，同上述的一样,取值范围:1000 0000 0000 0000 0000 0000 0000 0000 - 0111 1111 1111 1111 1111 1111 1111 1111\n        (-2^32~2^31)\n\n\n### long类型\n        long类型是Java的基础类型，使用8个字节存储一个数值，一共是64位二进制数。取值范围是（-2^64-2^63\n\n### 八大常用类型的最大值与最小值\n\n`\nfloat max=3.4028235E38\nfloat min=1.4E-45\ndouble max=1.7976931348623157E308\ndouble max=4.9E-324\nbyte max=127\nbyte min=-128\nchar max=?\nchar min=\nshort max=32767\nshort min=-32768\nint max=2147483647\nint min=-2147483648\nlong max=9223372036854775807\nlong min=-9223372036854775808\n`\n\n| 数据类型      | byte类型 |  short类型  |char类型|boolean类型|float类型|int类型|double类型|long类型|\n| :-------- | --------:| :------:\n|所占字节数  | 2| 2|2|8|4|4|8|8|","slug":"王阁/技术/hexo/oldblog/blog1","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfj003uu6pwaza9b3tc","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h2 id=\"java八大数据类型总结\"><a href=\"#java八大数据类型总结\" class=\"headerlink\" title=\"java八大数据类型总结\"></a>java八大数据类型总结</h2><p>[TOC]</p>\n<p><code>负数在电脑中的存储是用（该数值的绝对值的反码+1表示）</code><br><code>最高位是符号位，1表示负数，0表示正数</code><br><code>负数换算规则:负数的二进制=负数绝对值的二进制取反码+1。</code></p>\n<h3 id=\"byte类型\"><a href=\"#byte类型\" class=\"headerlink\" title=\"byte类型:\"></a>byte类型:</h3><pre><code>byte类型，使用一个字节存放一个数据，一个字节占八位，所以它取值范围是:1000 0000 ~ 0111 1111(-128-127)</code></pre><h3 id=\"short类型\"><a href=\"#short类型\" class=\"headerlink\" title=\"short类型\"></a>short类型</h3><pre><code>    short类型，使用两个字节存放一个数据，两个字节16位二进制表示，那么它的取值范围就是：\n1000 0000 0000 0000 ~ 0111 1111 1111 1111(-32768-32767)换算同上述byte类型</code></pre><hr>\n<h3 id=\"char类型\"><a href=\"#char类型\" class=\"headerlink\" title=\"char类型\"></a>char类型</h3><pre><code>char在java中占据两个字节，即用16位表示一个char类型的数据。由于char是无符号的所以其表示范围是0-65536.当计算超过其表示范围时，系统会自动将结果转换为int类型。</code></pre><h3 id=\"boolean类型\"><a href=\"#boolean类型\" class=\"headerlink\" title=\"boolean类型:\"></a>boolean类型:</h3><pre><code>boolean类型占用一个字节，八位二进制表示。boolean类型只有两个值true和flase。</code></pre><h3 id=\"float类型\"><a href=\"#float类型\" class=\"headerlink\" title=\"float类型\"></a>float类型</h3><p>  其他特殊表示:</p>\n<pre><code> 1.当指数部分和小数部分全为0时,表示0值,有+0和-0之分(符号位决定),0x00000000表示正0,0x80000000表示负0.\n2.指数部分全1,小数部分全0时,表示无穷大,有正无穷和负无穷,0x7f800000表示正无穷,0xff800000表示负无穷.\n3.指数部分全1,小数部分不全0时,表示NaN,分为QNaN和SNaN,Java中都是NaN.\n可以看出浮点数的取值范围是:2^(-149)~~(2-2^(-23))*2^127,也就是Float.MIN_VALUE和Float.MAX_VALUE.</code></pre><h3 id=\"double类型\"><a href=\"#double类型\" class=\"headerlink\" title=\"double类型\"></a>double类型</h3><pre><code>double类型占8个字节，一共是64位二进制表示。数符加尾数占48位，指数符加指数占16位.取值换算方式和float的换算方式一样。但是在使用float和double时最好先分析好目标数据的精度和性能要求，如果能够使用float满足的坚决不适用double，因为double类型使用内存占用是float的两倍，运算速度远不如float。</code></pre><h3 id=\"short类型-1\"><a href=\"#short类型-1\" class=\"headerlink\" title=\"short类型\"></a>short类型</h3><pre><code>    short类型，使用两个字节存放一个数据，两个字节16位二进制表示，那么它的取值范围就是：\n1000 0000 0000 0000 ~ 0111 1111 1111 1111(-32768-32767)换算同上述byte类型。short类型使用时除了要注意取值范围</code></pre><h3 id=\"int类型\"><a href=\"#int类型\" class=\"headerlink\" title=\"int类型\"></a>int类型</h3><pre><code>int类型，在Java中使用的是四个字节保存一个数据，一共是32为二进制表示，同上述的一样,取值范围:1000 0000 0000 0000 0000 0000 0000 0000 - 0111 1111 1111 1111 1111 1111 1111 1111\n(-2^32~2^31)</code></pre><h3 id=\"long类型\"><a href=\"#long类型\" class=\"headerlink\" title=\"long类型\"></a>long类型</h3><pre><code>long类型是Java的基础类型，使用8个字节存储一个数值，一共是64位二进制数。取值范围是（-2^64-2^63</code></pre><h3 id=\"八大常用类型的最大值与最小值\"><a href=\"#八大常用类型的最大值与最小值\" class=\"headerlink\" title=\"八大常用类型的最大值与最小值\"></a>八大常用类型的最大值与最小值</h3><p><code>float max=3.4028235E38\nfloat min=1.4E-45\ndouble max=1.7976931348623157E308\ndouble max=4.9E-324\nbyte max=127\nbyte min=-128\nchar max=?\nchar min=\nshort max=32767\nshort min=-32768\nint max=2147483647\nint min=-2147483648\nlong max=9223372036854775807\nlong min=-9223372036854775808</code></p>\n<p>| 数据类型      | byte类型 |  short类型  |char类型|boolean类型|float类型|int类型|double类型|long类型|<br>| :——– | ——–:| :——:<br>|所占字节数  | 2| 2|2|8|4|4|8|8|</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h2 id=\"java八大数据类型总结\"><a href=\"#java八大数据类型总结\" class=\"headerlink\" title=\"java八大数据类型总结\"></a>java八大数据类型总结</h2><p>[TOC]</p>\n<p><code>负数在电脑中的存储是用（该数值的绝对值的反码+1表示）</code><br><code>最高位是符号位，1表示负数，0表示正数</code><br><code>负数换算规则:负数的二进制=负数绝对值的二进制取反码+1。</code></p>\n<h3 id=\"byte类型\"><a href=\"#byte类型\" class=\"headerlink\" title=\"byte类型:\"></a>byte类型:</h3><pre><code>byte类型，使用一个字节存放一个数据，一个字节占八位，所以它取值范围是:1000 0000 ~ 0111 1111(-128-127)</code></pre><h3 id=\"short类型\"><a href=\"#short类型\" class=\"headerlink\" title=\"short类型\"></a>short类型</h3><pre><code>    short类型，使用两个字节存放一个数据，两个字节16位二进制表示，那么它的取值范围就是：\n1000 0000 0000 0000 ~ 0111 1111 1111 1111(-32768-32767)换算同上述byte类型</code></pre><hr>\n<h3 id=\"char类型\"><a href=\"#char类型\" class=\"headerlink\" title=\"char类型\"></a>char类型</h3><pre><code>char在java中占据两个字节，即用16位表示一个char类型的数据。由于char是无符号的所以其表示范围是0-65536.当计算超过其表示范围时，系统会自动将结果转换为int类型。</code></pre><h3 id=\"boolean类型\"><a href=\"#boolean类型\" class=\"headerlink\" title=\"boolean类型:\"></a>boolean类型:</h3><pre><code>boolean类型占用一个字节，八位二进制表示。boolean类型只有两个值true和flase。</code></pre><h3 id=\"float类型\"><a href=\"#float类型\" class=\"headerlink\" title=\"float类型\"></a>float类型</h3><p>  其他特殊表示:</p>\n<pre><code> 1.当指数部分和小数部分全为0时,表示0值,有+0和-0之分(符号位决定),0x00000000表示正0,0x80000000表示负0.\n2.指数部分全1,小数部分全0时,表示无穷大,有正无穷和负无穷,0x7f800000表示正无穷,0xff800000表示负无穷.\n3.指数部分全1,小数部分不全0时,表示NaN,分为QNaN和SNaN,Java中都是NaN.\n可以看出浮点数的取值范围是:2^(-149)~~(2-2^(-23))*2^127,也就是Float.MIN_VALUE和Float.MAX_VALUE.</code></pre><h3 id=\"double类型\"><a href=\"#double类型\" class=\"headerlink\" title=\"double类型\"></a>double类型</h3><pre><code>double类型占8个字节，一共是64位二进制表示。数符加尾数占48位，指数符加指数占16位.取值换算方式和float的换算方式一样。但是在使用float和double时最好先分析好目标数据的精度和性能要求，如果能够使用float满足的坚决不适用double，因为double类型使用内存占用是float的两倍，运算速度远不如float。</code></pre><h3 id=\"short类型-1\"><a href=\"#short类型-1\" class=\"headerlink\" title=\"short类型\"></a>short类型</h3><pre><code>    short类型，使用两个字节存放一个数据，两个字节16位二进制表示，那么它的取值范围就是：\n1000 0000 0000 0000 ~ 0111 1111 1111 1111(-32768-32767)换算同上述byte类型。short类型使用时除了要注意取值范围</code></pre><h3 id=\"int类型\"><a href=\"#int类型\" class=\"headerlink\" title=\"int类型\"></a>int类型</h3><pre><code>int类型，在Java中使用的是四个字节保存一个数据，一共是32为二进制表示，同上述的一样,取值范围:1000 0000 0000 0000 0000 0000 0000 0000 - 0111 1111 1111 1111 1111 1111 1111 1111\n(-2^32~2^31)</code></pre><h3 id=\"long类型\"><a href=\"#long类型\" class=\"headerlink\" title=\"long类型\"></a>long类型</h3><pre><code>long类型是Java的基础类型，使用8个字节存储一个数值，一共是64位二进制数。取值范围是（-2^64-2^63</code></pre><h3 id=\"八大常用类型的最大值与最小值\"><a href=\"#八大常用类型的最大值与最小值\" class=\"headerlink\" title=\"八大常用类型的最大值与最小值\"></a>八大常用类型的最大值与最小值</h3><p><code>float max=3.4028235E38\nfloat min=1.4E-45\ndouble max=1.7976931348623157E308\ndouble max=4.9E-324\nbyte max=127\nbyte min=-128\nchar max=?\nchar min=\nshort max=32767\nshort min=-32768\nint max=2147483647\nint min=-2147483648\nlong max=9223372036854775807\nlong min=-9223372036854775808</code></p>\n<p>| 数据类型      | byte类型 |  short类型  |char类型|boolean类型|float类型|int类型|double类型|long类型|<br>| :——– | ——–:| :——:<br>|所占字节数  | 2| 2|2|8|4|4|8|8|</p>"},{"title":"异常处理机制小结","date":"2019-07-15T16:00:00.000Z","_content":"\n此处简介\n\n<!--more-->\n\n### 异常处理机制小结\n![b89a2f8ca9684364889768d339985ef6-image.png](//img.wqkenqing.ren//file/2017/7/b89a2f8ca9684364889768d339985ef6-image.png)\n\n\n 在 Java 中，所有的异常都有一个共同的祖先 Throwable（可抛出）。Throwable 指定代码中可用异常传播机制通过 Java 应用程序传输的任何问题的共性。\n       Throwable： 有两个重要的子类：Exception（异常）和 Error（错误），二者都是 Java 异常处理的重要子类，各自都包含大量子类。\n        Error（错误）:是程序无法处理的错误，表示运行应用程序中较严重问题。大多数错误与代码编写者执行的操作无关，而表示代码运行时 JVM（Java 虚拟机）出现的问题。例如，Java虚拟机运行错误（Virtual MachineError），当 JVM 不再有继续执行操作所需的内存资源时，将出现 OutOfMemoryError。这些异常发生时，Java虚拟机（JVM）一般会选择线程终止。\n           Exception（异常）:是程序本身可以处理的异常。Exception 类有一个重要的子类 RuntimeException。RuntimeException 类及其子类表示“JVM 常用操作”引发的错误。例如，若试图使用空值对象引用、除数为零或数组越界，则分别引发运行时异常（NullPointerException、 ArithmeticException）和 ArrayIndexOutOfBoundException。\n\n`注意：异常和错误的区别：异常能被程序本身可以处理，错误是无法处理。`\n\n通常，Java的异常(包括Exception和Error)分为可查的异常（checked exceptions）和不可查的异常（unchecked exceptions）。\n      可查异常（编译器要求必须处置的异常）：正确的程序在运行中，很容易出现的、情理可容的异常状况。可查异常虽然是异常状况，但在一定程度上它的发生是可以预计的，而且一旦发生这种异常状况，就必须采取某种方式进行处理。","source":"_posts/王阁/技术/hexo/oldblog/blog10.md","raw":"---\n\ntitle: 异常处理机制小结\ndate: 2019-07-16\ntags:\n\n---\n\n此处简介\n\n<!--more-->\n\n### 异常处理机制小结\n![b89a2f8ca9684364889768d339985ef6-image.png](//img.wqkenqing.ren//file/2017/7/b89a2f8ca9684364889768d339985ef6-image.png)\n\n\n 在 Java 中，所有的异常都有一个共同的祖先 Throwable（可抛出）。Throwable 指定代码中可用异常传播机制通过 Java 应用程序传输的任何问题的共性。\n       Throwable： 有两个重要的子类：Exception（异常）和 Error（错误），二者都是 Java 异常处理的重要子类，各自都包含大量子类。\n        Error（错误）:是程序无法处理的错误，表示运行应用程序中较严重问题。大多数错误与代码编写者执行的操作无关，而表示代码运行时 JVM（Java 虚拟机）出现的问题。例如，Java虚拟机运行错误（Virtual MachineError），当 JVM 不再有继续执行操作所需的内存资源时，将出现 OutOfMemoryError。这些异常发生时，Java虚拟机（JVM）一般会选择线程终止。\n           Exception（异常）:是程序本身可以处理的异常。Exception 类有一个重要的子类 RuntimeException。RuntimeException 类及其子类表示“JVM 常用操作”引发的错误。例如，若试图使用空值对象引用、除数为零或数组越界，则分别引发运行时异常（NullPointerException、 ArithmeticException）和 ArrayIndexOutOfBoundException。\n\n`注意：异常和错误的区别：异常能被程序本身可以处理，错误是无法处理。`\n\n通常，Java的异常(包括Exception和Error)分为可查的异常（checked exceptions）和不可查的异常（unchecked exceptions）。\n      可查异常（编译器要求必须处置的异常）：正确的程序在运行中，很容易出现的、情理可容的异常状况。可查异常虽然是异常状况，但在一定程度上它的发生是可以预计的，而且一旦发生这种异常状况，就必须采取某种方式进行处理。","slug":"王阁/技术/hexo/oldblog/blog10","published":1,"updated":"2023-02-23T02:51:20.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfk003xu6pw1t49eq9u","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h3 id=\"异常处理机制小结\"><a href=\"#异常处理机制小结\" class=\"headerlink\" title=\"异常处理机制小结\"></a>异常处理机制小结</h3><p><img src=\"//img.wqkenqing.ren//file/2017/7/b89a2f8ca9684364889768d339985ef6-image.png\" alt=\"b89a2f8ca9684364889768d339985ef6-image.png\"></p>\n<p> 在 Java 中，所有的异常都有一个共同的祖先 Throwable（可抛出）。Throwable 指定代码中可用异常传播机制通过 Java 应用程序传输的任何问题的共性。<br>       Throwable： 有两个重要的子类：Exception（异常）和 Error（错误），二者都是 Java 异常处理的重要子类，各自都包含大量子类。<br>        Error（错误）:是程序无法处理的错误，表示运行应用程序中较严重问题。大多数错误与代码编写者执行的操作无关，而表示代码运行时 JVM（Java 虚拟机）出现的问题。例如，Java虚拟机运行错误（Virtual MachineError），当 JVM 不再有继续执行操作所需的内存资源时，将出现 OutOfMemoryError。这些异常发生时，Java虚拟机（JVM）一般会选择线程终止。<br>           Exception（异常）:是程序本身可以处理的异常。Exception 类有一个重要的子类 RuntimeException。RuntimeException 类及其子类表示“JVM 常用操作”引发的错误。例如，若试图使用空值对象引用、除数为零或数组越界，则分别引发运行时异常（NullPointerException、 ArithmeticException）和 ArrayIndexOutOfBoundException。</p>\n<p><code>注意：异常和错误的区别：异常能被程序本身可以处理，错误是无法处理。</code></p>\n<p>通常，Java的异常(包括Exception和Error)分为可查的异常（checked exceptions）和不可查的异常（unchecked exceptions）。<br>      可查异常（编译器要求必须处置的异常）：正确的程序在运行中，很容易出现的、情理可容的异常状况。可查异常虽然是异常状况，但在一定程度上它的发生是可以预计的，而且一旦发生这种异常状况，就必须采取某种方式进行处理。</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h3 id=\"异常处理机制小结\"><a href=\"#异常处理机制小结\" class=\"headerlink\" title=\"异常处理机制小结\"></a>异常处理机制小结</h3><p><img src=\"//img.wqkenqing.ren//file/2017/7/b89a2f8ca9684364889768d339985ef6-image.png\" alt=\"b89a2f8ca9684364889768d339985ef6-image.png\"></p>\n<p> 在 Java 中，所有的异常都有一个共同的祖先 Throwable（可抛出）。Throwable 指定代码中可用异常传播机制通过 Java 应用程序传输的任何问题的共性。<br>       Throwable： 有两个重要的子类：Exception（异常）和 Error（错误），二者都是 Java 异常处理的重要子类，各自都包含大量子类。<br>        Error（错误）:是程序无法处理的错误，表示运行应用程序中较严重问题。大多数错误与代码编写者执行的操作无关，而表示代码运行时 JVM（Java 虚拟机）出现的问题。例如，Java虚拟机运行错误（Virtual MachineError），当 JVM 不再有继续执行操作所需的内存资源时，将出现 OutOfMemoryError。这些异常发生时，Java虚拟机（JVM）一般会选择线程终止。<br>           Exception（异常）:是程序本身可以处理的异常。Exception 类有一个重要的子类 RuntimeException。RuntimeException 类及其子类表示“JVM 常用操作”引发的错误。例如，若试图使用空值对象引用、除数为零或数组越界，则分别引发运行时异常（NullPointerException、 ArithmeticException）和 ArrayIndexOutOfBoundException。</p>\n<p><code>注意：异常和错误的区别：异常能被程序本身可以处理，错误是无法处理。</code></p>\n<p>通常，Java的异常(包括Exception和Error)分为可查的异常（checked exceptions）和不可查的异常（unchecked exceptions）。<br>      可查异常（编译器要求必须处置的异常）：正确的程序在运行中，很容易出现的、情理可容的异常状况。可查异常虽然是异常状况，但在一定程度上它的发生是可以预计的，而且一旦发生这种异常状况，就必须采取某种方式进行处理。</p>"},{"title":"maven小结","date":"2019-07-15T16:00:00.000Z","_content":"\n此处简介\n\n<!--more-->\n\n## maven小结\n### 什么是maven\n就是一款帮助程序员构建项目的工具,我们只需要告诉Maven需要哪些Jar 包，它会帮助我们下载所有的Jar，极大提升开发效率。\n\n### Maven规定的目录结构\n\n\n### Maven基本命令\n+ -v:查询Maven版本\n`本命令用于检查maven是否安装成功。Maven安装完成之后，在命令行输入mvn -v，若出现maven信息，则说明安装成功`\n\n+ compile：编译\n+ test:测试项目\n+ package:打包\n+ clean:删除target文件夹\n+ install:安装 将当前项目放到Maven的本地仓库中。供其他项目使用\n\n### 什么是Maven仓库？\nMaven仓库用来存放Maven管理的所有Jar包。分为：**本地仓库** 和 **本地仓库**。\n+ 本地仓库\nMaven本地的Jar包仓库。\n+ 中央仓库\nMaven官方提供的远程仓库。\n>当项目编译时，Maven首先从本地仓库中寻找项目所需的Jar包，若本地仓库没有，再到Maven的中央仓库下载所需Jar包。\n\n什么是“坐标”？\n在Maven中，坐标是Jar包的唯一标识，Maven通过坐标在仓库中找到项目所需的Jar包。\n\n如下代码中，groupId和artifactId构成了一个Jar包的坐标。\n\n```\n<dependency>\n    <groupId>ch.qos.logback</groupId>\n    <artifactId>logback-classic</artifactId>\n    <version>1.1.1</version>\n</dependency>\n```\n\n**groupId**:所需Jar包的项目名\n**artifactId**:所需Jar包的模块名\n**version**:所需Jar包的版本号\n\n传递依赖 与 排除依赖\n+ 传递依赖：如果我们的项目引用了一个Jar包，而该Jar包又引用了其他Jar包，那么在默认情况下项目编译时，Maven会把直接引用和简洁引用的Jar包都下载到本地。\n+ 排除依赖：如果我们只想下载直接引用的Jar包，那么需要在pom.xml中做如下配置：(将需要排除的Jar包的坐标写在中)\n\n```\n<exclusions>\n    <exclusion>\n        <groupId>ch.qos.logback</groupId>\n        <artifactId>logback-classic</artifactId>\n    </exclusion>\n</exclusions>\n```\n\n依赖冲突\n若项目中多个Jar同时引用了相同的Jar时，会产生依赖冲突，但Maven采用了两种避免冲突的策略，因此在Maven中是不存在依赖冲突的。\n短路优先\n本项目——>A.jar——>B.jar——>X.jar\n本项目——>C.jar——>X.jar\n声明优先\n若引用路径长度相同时，在pom.xml中谁先被声明，就使用谁。\n\n聚合\n什么是聚合？\n将多个项目同时运行就称为聚合。\n如何实现聚合？\n只需在pom中作如下配置即可实现聚合：\n\n```\n<modules>\n        <module>../模块1</module>\n        <module>../模块2</module>\n        <module>../模块3</module>\n    </modules>\n```\n继承\n什么是继承？\n在聚合多个项目时，如果这些被聚合的项目中需要引入相同的Jar，那么可以将这些Jar写入父pom中，各个子项目继承该pom即可。\n如何实现继承？\n父pom配置：将需要继承的Jar包的坐标放入标签即可。\n\n```\n<dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.apache.shiro</groupId>\n                <artifactId>shiro-spring</artifactId>\n                <version>1.2.2</version>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n```\n\n子pom配置：\n\n```\n<parent>\n    <groupId>父pom所在项目的groupId</groupId>\n    <artifactId>父pom所在项目的artifactId</artifactId>\n    <version>父pom所在项目的版本号</version>\n</parent>\n```\n\n---\nMaven本地资源库\n\n>通常情况下，可改变默认的 .m2 目录下的默认本地存储库文件夹到其他更有意义的名称，例如\n![Alt text](./1489394095038.png)\n\n当你建立一个 Maven 的项目，Maven 会检查你的 pom.xml 文件，以确定哪些依赖下载。首先，Maven 将从本地资源库获得 Maven 的本地资源库依赖资源，如果没有找到，然后把它会从默认的 Maven 中央存储库 – http://repo1.maven.org/maven2/ 查找下载","source":"_posts/王阁/技术/hexo/oldblog/blog13.md","raw":"---\n\ntitle: maven小结\ndate: 2019-07-16\ntags:\n\n---\n\n此处简介\n\n<!--more-->\n\n## maven小结\n### 什么是maven\n就是一款帮助程序员构建项目的工具,我们只需要告诉Maven需要哪些Jar 包，它会帮助我们下载所有的Jar，极大提升开发效率。\n\n### Maven规定的目录结构\n\n\n### Maven基本命令\n+ -v:查询Maven版本\n`本命令用于检查maven是否安装成功。Maven安装完成之后，在命令行输入mvn -v，若出现maven信息，则说明安装成功`\n\n+ compile：编译\n+ test:测试项目\n+ package:打包\n+ clean:删除target文件夹\n+ install:安装 将当前项目放到Maven的本地仓库中。供其他项目使用\n\n### 什么是Maven仓库？\nMaven仓库用来存放Maven管理的所有Jar包。分为：**本地仓库** 和 **本地仓库**。\n+ 本地仓库\nMaven本地的Jar包仓库。\n+ 中央仓库\nMaven官方提供的远程仓库。\n>当项目编译时，Maven首先从本地仓库中寻找项目所需的Jar包，若本地仓库没有，再到Maven的中央仓库下载所需Jar包。\n\n什么是“坐标”？\n在Maven中，坐标是Jar包的唯一标识，Maven通过坐标在仓库中找到项目所需的Jar包。\n\n如下代码中，groupId和artifactId构成了一个Jar包的坐标。\n\n```\n<dependency>\n    <groupId>ch.qos.logback</groupId>\n    <artifactId>logback-classic</artifactId>\n    <version>1.1.1</version>\n</dependency>\n```\n\n**groupId**:所需Jar包的项目名\n**artifactId**:所需Jar包的模块名\n**version**:所需Jar包的版本号\n\n传递依赖 与 排除依赖\n+ 传递依赖：如果我们的项目引用了一个Jar包，而该Jar包又引用了其他Jar包，那么在默认情况下项目编译时，Maven会把直接引用和简洁引用的Jar包都下载到本地。\n+ 排除依赖：如果我们只想下载直接引用的Jar包，那么需要在pom.xml中做如下配置：(将需要排除的Jar包的坐标写在中)\n\n```\n<exclusions>\n    <exclusion>\n        <groupId>ch.qos.logback</groupId>\n        <artifactId>logback-classic</artifactId>\n    </exclusion>\n</exclusions>\n```\n\n依赖冲突\n若项目中多个Jar同时引用了相同的Jar时，会产生依赖冲突，但Maven采用了两种避免冲突的策略，因此在Maven中是不存在依赖冲突的。\n短路优先\n本项目——>A.jar——>B.jar——>X.jar\n本项目——>C.jar——>X.jar\n声明优先\n若引用路径长度相同时，在pom.xml中谁先被声明，就使用谁。\n\n聚合\n什么是聚合？\n将多个项目同时运行就称为聚合。\n如何实现聚合？\n只需在pom中作如下配置即可实现聚合：\n\n```\n<modules>\n        <module>../模块1</module>\n        <module>../模块2</module>\n        <module>../模块3</module>\n    </modules>\n```\n继承\n什么是继承？\n在聚合多个项目时，如果这些被聚合的项目中需要引入相同的Jar，那么可以将这些Jar写入父pom中，各个子项目继承该pom即可。\n如何实现继承？\n父pom配置：将需要继承的Jar包的坐标放入标签即可。\n\n```\n<dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.apache.shiro</groupId>\n                <artifactId>shiro-spring</artifactId>\n                <version>1.2.2</version>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n```\n\n子pom配置：\n\n```\n<parent>\n    <groupId>父pom所在项目的groupId</groupId>\n    <artifactId>父pom所在项目的artifactId</artifactId>\n    <version>父pom所在项目的版本号</version>\n</parent>\n```\n\n---\nMaven本地资源库\n\n>通常情况下，可改变默认的 .m2 目录下的默认本地存储库文件夹到其他更有意义的名称，例如\n![Alt text](./1489394095038.png)\n\n当你建立一个 Maven 的项目，Maven 会检查你的 pom.xml 文件，以确定哪些依赖下载。首先，Maven 将从本地资源库获得 Maven 的本地资源库依赖资源，如果没有找到，然后把它会从默认的 Maven 中央存储库 – http://repo1.maven.org/maven2/ 查找下载","slug":"王阁/技术/hexo/oldblog/blog13","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfk003yu6pw0fi586iq","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h2 id=\"maven小结\"><a href=\"#maven小结\" class=\"headerlink\" title=\"maven小结\"></a>maven小结</h2><h3 id=\"什么是maven\"><a href=\"#什么是maven\" class=\"headerlink\" title=\"什么是maven\"></a>什么是maven</h3><p>就是一款帮助程序员构建项目的工具,我们只需要告诉Maven需要哪些Jar 包，它会帮助我们下载所有的Jar，极大提升开发效率。</p>\n<h3 id=\"Maven规定的目录结构\"><a href=\"#Maven规定的目录结构\" class=\"headerlink\" title=\"Maven规定的目录结构\"></a>Maven规定的目录结构</h3><h3 id=\"Maven基本命令\"><a href=\"#Maven基本命令\" class=\"headerlink\" title=\"Maven基本命令\"></a>Maven基本命令</h3><ul>\n<li><p>-v:查询Maven版本<br><code>本命令用于检查maven是否安装成功。Maven安装完成之后，在命令行输入mvn -v，若出现maven信息，则说明安装成功</code></p>\n</li>\n<li><p>compile：编译</p>\n</li>\n<li><p>test:测试项目</p>\n</li>\n<li><p>package:打包</p>\n</li>\n<li><p>clean:删除target文件夹</p>\n</li>\n<li><p>install:安装 将当前项目放到Maven的本地仓库中。供其他项目使用</p>\n</li>\n</ul>\n<h3 id=\"什么是Maven仓库？\"><a href=\"#什么是Maven仓库？\" class=\"headerlink\" title=\"什么是Maven仓库？\"></a>什么是Maven仓库？</h3><p>Maven仓库用来存放Maven管理的所有Jar包。分为：<strong>本地仓库</strong> 和 <strong>本地仓库</strong>。</p>\n<ul>\n<li>本地仓库<br>Maven本地的Jar包仓库。</li>\n<li>中央仓库<br>Maven官方提供的远程仓库。<blockquote>\n<p>当项目编译时，Maven首先从本地仓库中寻找项目所需的Jar包，若本地仓库没有，再到Maven的中央仓库下载所需Jar包。</p>\n</blockquote>\n</li>\n</ul>\n<p>什么是“坐标”？<br>在Maven中，坐标是Jar包的唯一标识，Maven通过坐标在仓库中找到项目所需的Jar包。</p>\n<p>如下代码中，groupId和artifactId构成了一个Jar包的坐标。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;ch.qos.logback&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;logback-classic&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;1.1.1&lt;&#x2F;version&gt;</span><br><span class=\"line\">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>groupId</strong>:所需Jar包的项目名<br><strong>artifactId</strong>:所需Jar包的模块名<br><strong>version</strong>:所需Jar包的版本号</p>\n<p>传递依赖 与 排除依赖</p>\n<ul>\n<li>传递依赖：如果我们的项目引用了一个Jar包，而该Jar包又引用了其他Jar包，那么在默认情况下项目编译时，Maven会把直接引用和简洁引用的Jar包都下载到本地。</li>\n<li>排除依赖：如果我们只想下载直接引用的Jar包，那么需要在pom.xml中做如下配置：(将需要排除的Jar包的坐标写在中)</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;exclusions&gt;</span><br><span class=\"line\">    &lt;exclusion&gt;</span><br><span class=\"line\">        &lt;groupId&gt;ch.qos.logback&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">        &lt;artifactId&gt;logback-classic&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;&#x2F;exclusion&gt;</span><br><span class=\"line\">&lt;&#x2F;exclusions&gt;</span><br></pre></td></tr></table></figure>\n\n<p>依赖冲突<br>若项目中多个Jar同时引用了相同的Jar时，会产生依赖冲突，但Maven采用了两种避免冲突的策略，因此在Maven中是不存在依赖冲突的。<br>短路优先<br>本项目——&gt;A.jar——&gt;B.jar——&gt;X.jar<br>本项目——&gt;C.jar——&gt;X.jar<br>声明优先<br>若引用路径长度相同时，在pom.xml中谁先被声明，就使用谁。</p>\n<p>聚合<br>什么是聚合？<br>将多个项目同时运行就称为聚合。<br>如何实现聚合？<br>只需在pom中作如下配置即可实现聚合：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;modules&gt;</span><br><span class=\"line\">        &lt;module&gt;..&#x2F;模块1&lt;&#x2F;module&gt;</span><br><span class=\"line\">        &lt;module&gt;..&#x2F;模块2&lt;&#x2F;module&gt;</span><br><span class=\"line\">        &lt;module&gt;..&#x2F;模块3&lt;&#x2F;module&gt;</span><br><span class=\"line\">    &lt;&#x2F;modules&gt;</span><br></pre></td></tr></table></figure>\n<p>继承<br>什么是继承？<br>在聚合多个项目时，如果这些被聚合的项目中需要引入相同的Jar，那么可以将这些Jar写入父pom中，各个子项目继承该pom即可。<br>如何实现继承？<br>父pom配置：将需要继承的Jar包的坐标放入标签即可。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependencyManagement&gt;</span><br><span class=\"line\">        &lt;dependencies&gt;</span><br><span class=\"line\">            &lt;dependency&gt;</span><br><span class=\"line\">                &lt;groupId&gt;org.apache.shiro&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">                &lt;artifactId&gt;shiro-spring&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">                &lt;version&gt;1.2.2&lt;&#x2F;version&gt;</span><br><span class=\"line\">            &lt;&#x2F;dependency&gt;</span><br><span class=\"line\">        &lt;&#x2F;dependencies&gt;</span><br><span class=\"line\">    &lt;&#x2F;dependencyManagement&gt;</span><br></pre></td></tr></table></figure>\n\n<p>子pom配置：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;parent&gt;</span><br><span class=\"line\">    &lt;groupId&gt;父pom所在项目的groupId&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;父pom所在项目的artifactId&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;父pom所在项目的版本号&lt;&#x2F;version&gt;</span><br><span class=\"line\">&lt;&#x2F;parent&gt;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<p>Maven本地资源库</p>\n<blockquote>\n<p>通常情况下，可改变默认的 .m2 目录下的默认本地存储库文件夹到其他更有意义的名称，例如<br><img src=\"./1489394095038.png\" alt=\"Alt text\"></p>\n</blockquote>\n<p>当你建立一个 Maven 的项目，Maven 会检查你的 pom.xml 文件，以确定哪些依赖下载。首先，Maven 将从本地资源库获得 Maven 的本地资源库依赖资源，如果没有找到，然后把它会从默认的 Maven 中央存储库 – <a href=\"http://repo1.maven.org/maven2/\" target=\"_blank\" rel=\"noopener\">http://repo1.maven.org/maven2/</a> 查找下载</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h2 id=\"maven小结\"><a href=\"#maven小结\" class=\"headerlink\" title=\"maven小结\"></a>maven小结</h2><h3 id=\"什么是maven\"><a href=\"#什么是maven\" class=\"headerlink\" title=\"什么是maven\"></a>什么是maven</h3><p>就是一款帮助程序员构建项目的工具,我们只需要告诉Maven需要哪些Jar 包，它会帮助我们下载所有的Jar，极大提升开发效率。</p>\n<h3 id=\"Maven规定的目录结构\"><a href=\"#Maven规定的目录结构\" class=\"headerlink\" title=\"Maven规定的目录结构\"></a>Maven规定的目录结构</h3><h3 id=\"Maven基本命令\"><a href=\"#Maven基本命令\" class=\"headerlink\" title=\"Maven基本命令\"></a>Maven基本命令</h3><ul>\n<li><p>-v:查询Maven版本<br><code>本命令用于检查maven是否安装成功。Maven安装完成之后，在命令行输入mvn -v，若出现maven信息，则说明安装成功</code></p>\n</li>\n<li><p>compile：编译</p>\n</li>\n<li><p>test:测试项目</p>\n</li>\n<li><p>package:打包</p>\n</li>\n<li><p>clean:删除target文件夹</p>\n</li>\n<li><p>install:安装 将当前项目放到Maven的本地仓库中。供其他项目使用</p>\n</li>\n</ul>\n<h3 id=\"什么是Maven仓库？\"><a href=\"#什么是Maven仓库？\" class=\"headerlink\" title=\"什么是Maven仓库？\"></a>什么是Maven仓库？</h3><p>Maven仓库用来存放Maven管理的所有Jar包。分为：<strong>本地仓库</strong> 和 <strong>本地仓库</strong>。</p>\n<ul>\n<li>本地仓库<br>Maven本地的Jar包仓库。</li>\n<li>中央仓库<br>Maven官方提供的远程仓库。<blockquote>\n<p>当项目编译时，Maven首先从本地仓库中寻找项目所需的Jar包，若本地仓库没有，再到Maven的中央仓库下载所需Jar包。</p>\n</blockquote>\n</li>\n</ul>\n<p>什么是“坐标”？<br>在Maven中，坐标是Jar包的唯一标识，Maven通过坐标在仓库中找到项目所需的Jar包。</p>\n<p>如下代码中，groupId和artifactId构成了一个Jar包的坐标。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;ch.qos.logback&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;logback-classic&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;1.1.1&lt;&#x2F;version&gt;</span><br><span class=\"line\">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>groupId</strong>:所需Jar包的项目名<br><strong>artifactId</strong>:所需Jar包的模块名<br><strong>version</strong>:所需Jar包的版本号</p>\n<p>传递依赖 与 排除依赖</p>\n<ul>\n<li>传递依赖：如果我们的项目引用了一个Jar包，而该Jar包又引用了其他Jar包，那么在默认情况下项目编译时，Maven会把直接引用和简洁引用的Jar包都下载到本地。</li>\n<li>排除依赖：如果我们只想下载直接引用的Jar包，那么需要在pom.xml中做如下配置：(将需要排除的Jar包的坐标写在中)</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;exclusions&gt;</span><br><span class=\"line\">    &lt;exclusion&gt;</span><br><span class=\"line\">        &lt;groupId&gt;ch.qos.logback&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">        &lt;artifactId&gt;logback-classic&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;&#x2F;exclusion&gt;</span><br><span class=\"line\">&lt;&#x2F;exclusions&gt;</span><br></pre></td></tr></table></figure>\n\n<p>依赖冲突<br>若项目中多个Jar同时引用了相同的Jar时，会产生依赖冲突，但Maven采用了两种避免冲突的策略，因此在Maven中是不存在依赖冲突的。<br>短路优先<br>本项目——&gt;A.jar——&gt;B.jar——&gt;X.jar<br>本项目——&gt;C.jar——&gt;X.jar<br>声明优先<br>若引用路径长度相同时，在pom.xml中谁先被声明，就使用谁。</p>\n<p>聚合<br>什么是聚合？<br>将多个项目同时运行就称为聚合。<br>如何实现聚合？<br>只需在pom中作如下配置即可实现聚合：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;modules&gt;</span><br><span class=\"line\">        &lt;module&gt;..&#x2F;模块1&lt;&#x2F;module&gt;</span><br><span class=\"line\">        &lt;module&gt;..&#x2F;模块2&lt;&#x2F;module&gt;</span><br><span class=\"line\">        &lt;module&gt;..&#x2F;模块3&lt;&#x2F;module&gt;</span><br><span class=\"line\">    &lt;&#x2F;modules&gt;</span><br></pre></td></tr></table></figure>\n<p>继承<br>什么是继承？<br>在聚合多个项目时，如果这些被聚合的项目中需要引入相同的Jar，那么可以将这些Jar写入父pom中，各个子项目继承该pom即可。<br>如何实现继承？<br>父pom配置：将需要继承的Jar包的坐标放入标签即可。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependencyManagement&gt;</span><br><span class=\"line\">        &lt;dependencies&gt;</span><br><span class=\"line\">            &lt;dependency&gt;</span><br><span class=\"line\">                &lt;groupId&gt;org.apache.shiro&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">                &lt;artifactId&gt;shiro-spring&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">                &lt;version&gt;1.2.2&lt;&#x2F;version&gt;</span><br><span class=\"line\">            &lt;&#x2F;dependency&gt;</span><br><span class=\"line\">        &lt;&#x2F;dependencies&gt;</span><br><span class=\"line\">    &lt;&#x2F;dependencyManagement&gt;</span><br></pre></td></tr></table></figure>\n\n<p>子pom配置：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;parent&gt;</span><br><span class=\"line\">    &lt;groupId&gt;父pom所在项目的groupId&lt;&#x2F;groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;父pom所在项目的artifactId&lt;&#x2F;artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;父pom所在项目的版本号&lt;&#x2F;version&gt;</span><br><span class=\"line\">&lt;&#x2F;parent&gt;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<p>Maven本地资源库</p>\n<blockquote>\n<p>通常情况下，可改变默认的 .m2 目录下的默认本地存储库文件夹到其他更有意义的名称，例如<br><img src=\"./1489394095038.png\" alt=\"Alt text\"></p>\n</blockquote>\n<p>当你建立一个 Maven 的项目，Maven 会检查你的 pom.xml 文件，以确定哪些依赖下载。首先，Maven 将从本地资源库获得 Maven 的本地资源库依赖资源，如果没有找到，然后把它会从默认的 Maven 中央存储库 – <a href=\"http://repo1.maven.org/maven2/\" target=\"_blank\" rel=\"noopener\">http://repo1.maven.org/maven2/</a> 查找下载</p>"},{"title":"git小结","date":"2019-07-15T16:00:00.000Z","_content":"\n此处简介\n\n<!--more-->\n\n\n## git小结\n### 常用指令小结\n+ git init 初始化\n+ git add 将工作区的变更提交至暂存区\n+ git commit -m 将暂存区的内容提交至版本库\n+ git log 查看记录\n+ git reflog 操作记录\n+ git --hard commit id 回到对应的id版本下\n+ git status 查看状态\n+ git log --pretty=oneline 简约查看log\n+ git diff 查看文件与版本库中的差异\n+ git checkout -- file 文件在工作区的修改全部撤销\n+ git remote add origin git@github.com:michaelliao/learngit.git 添加远程库\n+ git push -u origin master 推送分支\n+ git clone git@github.com:michaelliao/gitskills.git 克隆\n+ git checkout -b dev 创建并切换分支\n+ git branch dev 创建分支\n+ git checkout dev  切换分支\n+ git merge dev 合并分支\n+ git branch -d  删除分支\n+ git stash 紧急切分支时，将工作区的变更内容暂存起来。\n+ git stash list 查看stash列表\n+ git stash apply 回复当前分支stash内容\n+ git stash pop 删除stash内容\n+ git branch -D 强行删除\n+ git checkout -b dev origin/dev 拉下远程分支\n+ git push origin branch-name 推送分支\n+ git pull 从远程库拉取更新\n+ git push origin branch-name 将本地库中的更新推送至远程库\n+ git branch --set-upstream branch-name origin/branch-name 建立本地分支与远程库的联系\n+ git tag <name>用于新建一个标签，默认为HEAD，也可以指定一个commit id；打标签\n+ git tag -a <tagname> -m \"blablabla...\"可以指定标签信息；\n+ git tag -s <tagname> -m \"blablabla...\"可以用PGP签名标签；\n+ git push origin <tagname>\n+ git push origin --tags\n+ git tag -d <tagname>\n+ git push origin :refs/tags/<tagname>","source":"_posts/王阁/技术/hexo/oldblog/blog12.md","raw":"---\n\ntitle: git小结\ndate: 2019-07-16\ntags:\n\n---\n\n此处简介\n\n<!--more-->\n\n\n## git小结\n### 常用指令小结\n+ git init 初始化\n+ git add 将工作区的变更提交至暂存区\n+ git commit -m 将暂存区的内容提交至版本库\n+ git log 查看记录\n+ git reflog 操作记录\n+ git --hard commit id 回到对应的id版本下\n+ git status 查看状态\n+ git log --pretty=oneline 简约查看log\n+ git diff 查看文件与版本库中的差异\n+ git checkout -- file 文件在工作区的修改全部撤销\n+ git remote add origin git@github.com:michaelliao/learngit.git 添加远程库\n+ git push -u origin master 推送分支\n+ git clone git@github.com:michaelliao/gitskills.git 克隆\n+ git checkout -b dev 创建并切换分支\n+ git branch dev 创建分支\n+ git checkout dev  切换分支\n+ git merge dev 合并分支\n+ git branch -d  删除分支\n+ git stash 紧急切分支时，将工作区的变更内容暂存起来。\n+ git stash list 查看stash列表\n+ git stash apply 回复当前分支stash内容\n+ git stash pop 删除stash内容\n+ git branch -D 强行删除\n+ git checkout -b dev origin/dev 拉下远程分支\n+ git push origin branch-name 推送分支\n+ git pull 从远程库拉取更新\n+ git push origin branch-name 将本地库中的更新推送至远程库\n+ git branch --set-upstream branch-name origin/branch-name 建立本地分支与远程库的联系\n+ git tag <name>用于新建一个标签，默认为HEAD，也可以指定一个commit id；打标签\n+ git tag -a <tagname> -m \"blablabla...\"可以指定标签信息；\n+ git tag -s <tagname> -m \"blablabla...\"可以用PGP签名标签；\n+ git push origin <tagname>\n+ git push origin --tags\n+ git tag -d <tagname>\n+ git push origin :refs/tags/<tagname>","slug":"王阁/技术/hexo/oldblog/blog12","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfl0040u6pw44u1a82g","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n\n<h2 id=\"git小结\"><a href=\"#git小结\" class=\"headerlink\" title=\"git小结\"></a>git小结</h2><h3 id=\"常用指令小结\"><a href=\"#常用指令小结\" class=\"headerlink\" title=\"常用指令小结\"></a>常用指令小结</h3><ul>\n<li>git init 初始化</li>\n<li>git add 将工作区的变更提交至暂存区</li>\n<li>git commit -m 将暂存区的内容提交至版本库</li>\n<li>git log 查看记录</li>\n<li>git reflog 操作记录</li>\n<li>git –hard commit id 回到对应的id版本下</li>\n<li>git status 查看状态</li>\n<li>git log –pretty=oneline 简约查看log</li>\n<li>git diff 查看文件与版本库中的差异</li>\n<li>git checkout – file 文件在工作区的修改全部撤销</li>\n<li>git remote add origin <a href=\"mailto:git@github.com\">git@github.com</a>:michaelliao/learngit.git 添加远程库</li>\n<li>git push -u origin master 推送分支</li>\n<li>git clone <a href=\"mailto:git@github.com\">git@github.com</a>:michaelliao/gitskills.git 克隆</li>\n<li>git checkout -b dev 创建并切换分支</li>\n<li>git branch dev 创建分支</li>\n<li>git checkout dev  切换分支</li>\n<li>git merge dev 合并分支</li>\n<li>git branch -d  删除分支</li>\n<li>git stash 紧急切分支时，将工作区的变更内容暂存起来。</li>\n<li>git stash list 查看stash列表</li>\n<li>git stash apply 回复当前分支stash内容</li>\n<li>git stash pop 删除stash内容</li>\n<li>git branch -D 强行删除</li>\n<li>git checkout -b dev origin/dev 拉下远程分支</li>\n<li>git push origin branch-name 推送分支</li>\n<li>git pull 从远程库拉取更新</li>\n<li>git push origin branch-name 将本地库中的更新推送至远程库</li>\n<li>git branch –set-upstream branch-name origin/branch-name 建立本地分支与远程库的联系</li>\n<li>git tag <name>用于新建一个标签，默认为HEAD，也可以指定一个commit id；打标签</li>\n<li>git tag -a <tagname> -m “blablabla…”可以指定标签信息；</li>\n<li>git tag -s <tagname> -m “blablabla…”可以用PGP签名标签；</li>\n<li>git push origin <tagname></li>\n<li>git push origin –tags</li>\n<li>git tag -d <tagname></li>\n<li>git push origin :refs/tags/<tagname></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h2 id=\"git小结\"><a href=\"#git小结\" class=\"headerlink\" title=\"git小结\"></a>git小结</h2><h3 id=\"常用指令小结\"><a href=\"#常用指令小结\" class=\"headerlink\" title=\"常用指令小结\"></a>常用指令小结</h3><ul>\n<li>git init 初始化</li>\n<li>git add 将工作区的变更提交至暂存区</li>\n<li>git commit -m 将暂存区的内容提交至版本库</li>\n<li>git log 查看记录</li>\n<li>git reflog 操作记录</li>\n<li>git –hard commit id 回到对应的id版本下</li>\n<li>git status 查看状态</li>\n<li>git log –pretty=oneline 简约查看log</li>\n<li>git diff 查看文件与版本库中的差异</li>\n<li>git checkout – file 文件在工作区的修改全部撤销</li>\n<li>git remote add origin <a href=\"mailto:git@github.com\">git@github.com</a>:michaelliao/learngit.git 添加远程库</li>\n<li>git push -u origin master 推送分支</li>\n<li>git clone <a href=\"mailto:git@github.com\">git@github.com</a>:michaelliao/gitskills.git 克隆</li>\n<li>git checkout -b dev 创建并切换分支</li>\n<li>git branch dev 创建分支</li>\n<li>git checkout dev  切换分支</li>\n<li>git merge dev 合并分支</li>\n<li>git branch -d  删除分支</li>\n<li>git stash 紧急切分支时，将工作区的变更内容暂存起来。</li>\n<li>git stash list 查看stash列表</li>\n<li>git stash apply 回复当前分支stash内容</li>\n<li>git stash pop 删除stash内容</li>\n<li>git branch -D 强行删除</li>\n<li>git checkout -b dev origin/dev 拉下远程分支</li>\n<li>git push origin branch-name 推送分支</li>\n<li>git pull 从远程库拉取更新</li>\n<li>git push origin branch-name 将本地库中的更新推送至远程库</li>\n<li>git branch –set-upstream branch-name origin/branch-name 建立本地分支与远程库的联系</li>\n<li>git tag <name>用于新建一个标签，默认为HEAD，也可以指定一个commit id；打标签</li>\n<li>git tag -a <tagname> -m “blablabla…”可以指定标签信息；</li>\n<li>git tag -s <tagname> -m “blablabla…”可以用PGP签名标签；</li>\n<li>git push origin <tagname></li>\n<li>git push origin –tags</li>\n<li>git tag -d <tagname></li>\n<li>git push origin :refs/tags/<tagname></li>\n</ul>"},{"title":"kafka小结","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n<!--more-->\n\n## kafka小结\n\n消息系统术语\nkafka特性\n+ 分布式的\n+ 可分区的\n+ 可复制的\n\n在普通的消息系统的功上，还有自己独特的设计\n\n\nKafka将消息以topic为单位进行归纳。\n将向Kafka topic发布消息的程序成为producers.\n将预订topics并消费消息的程序成为consumer.\nKafka以集群的方式运行，可以由一个或多个服务组成，每个服务叫做一个broker.\nproducers通过网络将消息发送到Kafka集群，集群向消费者提供消息，\n\n![827fdc820cae4619859042761c3b40a9-image.png](//img.wqkenqing.ren//file/2017/7/827fdc820cae4619859042761c3b40a9-image.png)\n\n\n\n客户端和服务端通过TCP协议通信。Kafka提供了Java客户端，并且对多种语言都提供了支持。\n\n\n---\n\nTopics 和Logs\n\n先来看一下Kafka提供的一个抽象概念:topic.\n一个topic是对一组消息的归纳。对每个topic，Kafka 对它的日志进行了分区\n![bf0d2ddee1d14cb29fd54483a622d67c-image.png](//img.wqkenqing.ren//file/2017/7/bf0d2ddee1d14cb29fd54483a622d67c-image.png)\n\n\n一个topic是对一组消息的归纳。\n对每个topic，Kafka 对它的日志进行了分区，\n\n\n每个分区都由一系列有序的、不可变的消息组成，这些消息被连续的追加到分区中。分区中的每个消息都有一个连续的序列号叫做offset,用来在分区中唯一的标识这个消息。\n\n\n\n---\n### kafka常用指令收集\n\n**查看topic的详细信息**\nkafka-topics.sh -zookeeper 127.0.0.1:2181 -describe -topic topic name\n\n**为topic增加副本**\nkafka-reassign-partitions.sh -zookeeper 127.0.0.1:2181 -reassignment-json-file json/partitions-to-move.json -execute\n**创建topic**\nkafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic name\n**为topic增加partition**\nkafka-topics.sh –zookeeper 127.0.0.1:2181 –alter –partitions 20 –topic name\n**kafka生产者客户端命令**\nkafka-console-producer.sh --broker-list localhost:9092 --topic name\n**kafka消费者客户端命令**\nkafka-console-consumer.sh -zookeeper localhost:2181 --from-beginning --topic name\n**kafka服务启动**\nkafka-server-start.sh -daemon ../config/server.properties\n**删除topic**\nkafka-run-class.sh kafka.admin.DeleteTopicCommand --topic testKJ1 --zookeeper 127.0.0.1:2181\nkafka-topics.sh --zookeeper localhost:2181 --delete --topic testKJ1\n**查看consumer组内消费的offset**\nkafka-run-class.sh kafka.tools.ConsumerOffsetChecker --zookeeper localhost:2181 --group test --topic name","source":"_posts/王阁/技术/hexo/oldblog/blog17.md","raw":"---\n\ntitle: kafka小结\ndate: 2019-07-16\ntags: \n\n---\n此处简介\n<!--more-->\n\n## kafka小结\n\n消息系统术语\nkafka特性\n+ 分布式的\n+ 可分区的\n+ 可复制的\n\n在普通的消息系统的功上，还有自己独特的设计\n\n\nKafka将消息以topic为单位进行归纳。\n将向Kafka topic发布消息的程序成为producers.\n将预订topics并消费消息的程序成为consumer.\nKafka以集群的方式运行，可以由一个或多个服务组成，每个服务叫做一个broker.\nproducers通过网络将消息发送到Kafka集群，集群向消费者提供消息，\n\n![827fdc820cae4619859042761c3b40a9-image.png](//img.wqkenqing.ren//file/2017/7/827fdc820cae4619859042761c3b40a9-image.png)\n\n\n\n客户端和服务端通过TCP协议通信。Kafka提供了Java客户端，并且对多种语言都提供了支持。\n\n\n---\n\nTopics 和Logs\n\n先来看一下Kafka提供的一个抽象概念:topic.\n一个topic是对一组消息的归纳。对每个topic，Kafka 对它的日志进行了分区\n![bf0d2ddee1d14cb29fd54483a622d67c-image.png](//img.wqkenqing.ren//file/2017/7/bf0d2ddee1d14cb29fd54483a622d67c-image.png)\n\n\n一个topic是对一组消息的归纳。\n对每个topic，Kafka 对它的日志进行了分区，\n\n\n每个分区都由一系列有序的、不可变的消息组成，这些消息被连续的追加到分区中。分区中的每个消息都有一个连续的序列号叫做offset,用来在分区中唯一的标识这个消息。\n\n\n\n---\n### kafka常用指令收集\n\n**查看topic的详细信息**\nkafka-topics.sh -zookeeper 127.0.0.1:2181 -describe -topic topic name\n\n**为topic增加副本**\nkafka-reassign-partitions.sh -zookeeper 127.0.0.1:2181 -reassignment-json-file json/partitions-to-move.json -execute\n**创建topic**\nkafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic name\n**为topic增加partition**\nkafka-topics.sh –zookeeper 127.0.0.1:2181 –alter –partitions 20 –topic name\n**kafka生产者客户端命令**\nkafka-console-producer.sh --broker-list localhost:9092 --topic name\n**kafka消费者客户端命令**\nkafka-console-consumer.sh -zookeeper localhost:2181 --from-beginning --topic name\n**kafka服务启动**\nkafka-server-start.sh -daemon ../config/server.properties\n**删除topic**\nkafka-run-class.sh kafka.admin.DeleteTopicCommand --topic testKJ1 --zookeeper 127.0.0.1:2181\nkafka-topics.sh --zookeeper localhost:2181 --delete --topic testKJ1\n**查看consumer组内消费的offset**\nkafka-run-class.sh kafka.tools.ConsumerOffsetChecker --zookeeper localhost:2181 --group test --topic name","slug":"王阁/技术/hexo/oldblog/blog17","published":1,"updated":"2023-02-23T02:51:20.906Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfl0042u6pw03bgdvxw","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h2 id=\"kafka小结\"><a href=\"#kafka小结\" class=\"headerlink\" title=\"kafka小结\"></a>kafka小结</h2><p>消息系统术语<br>kafka特性</p>\n<ul>\n<li>分布式的</li>\n<li>可分区的</li>\n<li>可复制的</li>\n</ul>\n<p>在普通的消息系统的功上，还有自己独特的设计</p>\n<p>Kafka将消息以topic为单位进行归纳。<br>将向Kafka topic发布消息的程序成为producers.<br>将预订topics并消费消息的程序成为consumer.<br>Kafka以集群的方式运行，可以由一个或多个服务组成，每个服务叫做一个broker.<br>producers通过网络将消息发送到Kafka集群，集群向消费者提供消息，</p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/7/827fdc820cae4619859042761c3b40a9-image.png\" alt=\"827fdc820cae4619859042761c3b40a9-image.png\"></p>\n<p>客户端和服务端通过TCP协议通信。Kafka提供了Java客户端，并且对多种语言都提供了支持。</p>\n<hr>\n<p>Topics 和Logs</p>\n<p>先来看一下Kafka提供的一个抽象概念:topic.<br>一个topic是对一组消息的归纳。对每个topic，Kafka 对它的日志进行了分区<br><img src=\"//img.wqkenqing.ren//file/2017/7/bf0d2ddee1d14cb29fd54483a622d67c-image.png\" alt=\"bf0d2ddee1d14cb29fd54483a622d67c-image.png\"></p>\n<p>一个topic是对一组消息的归纳。<br>对每个topic，Kafka 对它的日志进行了分区，</p>\n<p>每个分区都由一系列有序的、不可变的消息组成，这些消息被连续的追加到分区中。分区中的每个消息都有一个连续的序列号叫做offset,用来在分区中唯一的标识这个消息。</p>\n<hr>\n<h3 id=\"kafka常用指令收集\"><a href=\"#kafka常用指令收集\" class=\"headerlink\" title=\"kafka常用指令收集\"></a>kafka常用指令收集</h3><p><strong>查看topic的详细信息</strong><br>kafka-topics.sh -zookeeper 127.0.0.1:2181 -describe -topic topic name</p>\n<p><strong>为topic增加副本</strong><br>kafka-reassign-partitions.sh -zookeeper 127.0.0.1:2181 -reassignment-json-file json/partitions-to-move.json -execute<br><strong>创建topic</strong><br>kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 1 –partitions 1 –topic name<br><strong>为topic增加partition</strong><br>kafka-topics.sh –zookeeper 127.0.0.1:2181 –alter –partitions 20 –topic name<br><strong>kafka生产者客户端命令</strong><br>kafka-console-producer.sh –broker-list localhost:9092 –topic name<br><strong>kafka消费者客户端命令</strong><br>kafka-console-consumer.sh -zookeeper localhost:2181 –from-beginning –topic name<br><strong>kafka服务启动</strong><br>kafka-server-start.sh -daemon ../config/server.properties<br><strong>删除topic</strong><br>kafka-run-class.sh kafka.admin.DeleteTopicCommand –topic testKJ1 –zookeeper 127.0.0.1:2181<br>kafka-topics.sh –zookeeper localhost:2181 –delete –topic testKJ1<br><strong>查看consumer组内消费的offset</strong><br>kafka-run-class.sh kafka.tools.ConsumerOffsetChecker –zookeeper localhost:2181 –group test –topic name</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h2 id=\"kafka小结\"><a href=\"#kafka小结\" class=\"headerlink\" title=\"kafka小结\"></a>kafka小结</h2><p>消息系统术语<br>kafka特性</p>\n<ul>\n<li>分布式的</li>\n<li>可分区的</li>\n<li>可复制的</li>\n</ul>\n<p>在普通的消息系统的功上，还有自己独特的设计</p>\n<p>Kafka将消息以topic为单位进行归纳。<br>将向Kafka topic发布消息的程序成为producers.<br>将预订topics并消费消息的程序成为consumer.<br>Kafka以集群的方式运行，可以由一个或多个服务组成，每个服务叫做一个broker.<br>producers通过网络将消息发送到Kafka集群，集群向消费者提供消息，</p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/7/827fdc820cae4619859042761c3b40a9-image.png\" alt=\"827fdc820cae4619859042761c3b40a9-image.png\"></p>\n<p>客户端和服务端通过TCP协议通信。Kafka提供了Java客户端，并且对多种语言都提供了支持。</p>\n<hr>\n<p>Topics 和Logs</p>\n<p>先来看一下Kafka提供的一个抽象概念:topic.<br>一个topic是对一组消息的归纳。对每个topic，Kafka 对它的日志进行了分区<br><img src=\"//img.wqkenqing.ren//file/2017/7/bf0d2ddee1d14cb29fd54483a622d67c-image.png\" alt=\"bf0d2ddee1d14cb29fd54483a622d67c-image.png\"></p>\n<p>一个topic是对一组消息的归纳。<br>对每个topic，Kafka 对它的日志进行了分区，</p>\n<p>每个分区都由一系列有序的、不可变的消息组成，这些消息被连续的追加到分区中。分区中的每个消息都有一个连续的序列号叫做offset,用来在分区中唯一的标识这个消息。</p>\n<hr>\n<h3 id=\"kafka常用指令收集\"><a href=\"#kafka常用指令收集\" class=\"headerlink\" title=\"kafka常用指令收集\"></a>kafka常用指令收集</h3><p><strong>查看topic的详细信息</strong><br>kafka-topics.sh -zookeeper 127.0.0.1:2181 -describe -topic topic name</p>\n<p><strong>为topic增加副本</strong><br>kafka-reassign-partitions.sh -zookeeper 127.0.0.1:2181 -reassignment-json-file json/partitions-to-move.json -execute<br><strong>创建topic</strong><br>kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 1 –partitions 1 –topic name<br><strong>为topic增加partition</strong><br>kafka-topics.sh –zookeeper 127.0.0.1:2181 –alter –partitions 20 –topic name<br><strong>kafka生产者客户端命令</strong><br>kafka-console-producer.sh –broker-list localhost:9092 –topic name<br><strong>kafka消费者客户端命令</strong><br>kafka-console-consumer.sh -zookeeper localhost:2181 –from-beginning –topic name<br><strong>kafka服务启动</strong><br>kafka-server-start.sh -daemon ../config/server.properties<br><strong>删除topic</strong><br>kafka-run-class.sh kafka.admin.DeleteTopicCommand –topic testKJ1 –zookeeper 127.0.0.1:2181<br>kafka-topics.sh –zookeeper localhost:2181 –delete –topic testKJ1<br><strong>查看consumer组内消费的offset</strong><br>kafka-run-class.sh kafka.tools.ConsumerOffsetChecker –zookeeper localhost:2181 –group test –topic name</p>"},{"title":"Vim笔记","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n<!--more-->\n\n### Vim笔记\n\nvi有三种工作模式：\n* 命令模式\n* 插入模式\n* 和编辑模式。\n![d689c7d6faa6469a885abdb7ed9b9c52-image.png](//img.wqkenqing.ren//file/2017/7/d689c7d6faa6469a885abdb7ed9b9c52-image.png)\n\n\n\n#### 插入模式\n 命令          作用\na                 在光标后附加文本\nA                 在本行行末附加文本\ni                  在光标前插入文本\nI                  在本行开始插入文本\no                 在光标下插入新行\nO                 在光标上插入新行\n\n***\n#### 定位命令\n命令 作用\nh、方向左键 左移一个字符\nj、方向下键 下移一行\nk、方向上键 上移一行\nl、方向右键 右移一个字符\n$ 移至行尾\n0 移至行首\nH 移至屏幕上端\nM 移至屏幕中央\nL 移至屏幕下端\n:set nu 设置行号\n:set nonu 取消行号\ngg\nG 到第一行\n到最后一行\nnG 到第n行\n:n 到第n行\n***\n#### 删除命令\n命令 作用\nx 删除光标所在处字符\nnx 删除光标所在处后n个字符\ndd 删除光标所在行，ndd删除n行\ndG 删除光标所在行到文件末尾的内容\nD 删除从光标所在处到行尾的内容\n:n1,n2d 删除指定范围的行\n***\n复制和剪切命令\n命令 作用\nyy、Y 复制当前行\nnyy、nY 复制当前行一下n行\ndd 剪切当前行\nndd 剪切当前行以下n行\np、P 粘贴在当前光标所在行下或行上 注：在vi中，剪切就是删除之后再粘贴\n***\n#### 替换和取消命令\n命令 作用\nr 取代光标所在处字符\nR 从光标所在处开始替换字符，按Esc结束\nu 取消上一步操作 注：比如改变单个字符，先输入r，再输入需要更改的字符。比如将字符a改成b。这适合用于少量修改时使用\n***\n#### 搜索和替换命令\n命令 作用\n/string 向前搜索指定字符串\n搜索时忽略大小写 :set ic\nn 搜索指定字符串的下一个出现位置\n:%s/old/new/g  全文替换指定字符串\n:n1,n2s/old/new/g  在一定范围内替换指定字符串 注：n是从前往后，N是从后往前找\nset noic是设置大小写敏感\n:n1,n2s/old/new/c    替换时进行询问是否真的替换\n\nZZ与:wq的作用一样，都是保存退出\n对于readonly文件，如果是root或者改文件所有者，即使该文件没有写权限，使用:wq!也能保存该修改之后的文件。\n仅仅保存但不退出 :w\n另存为  :w /root/file.bak\n***\n#### 其它命令\n导入文件 :r 文件名\n在vi中执行命令 :! 命令\n定义快捷键 :map 快捷键  触发命令\n范例：  :map  ^P  I#<ESC>         注：^p是这样输入的 ctrl+v+v  --> ^p\n     :map  ^B  0x\n连续行注释 :n1,n2s/^/#/g              注：^表示行首\n    :n1,n2s/^#//g\n    :n1,n2s/^/\\/\\//g\n替换  :ab huhuimail    huhuics@gmail.com         取消ab命令    :unan huhuimail\n:r !date   在vi中加入命令执行的结果\n快捷键插入邮箱  :map ^e ihuhuics@gmail.com\n#### 修改用户vim设置\n修改用户vim设置，比如能永久保存快捷键\nvi ~/.vimrc\n缺省这个文件是空的，然后可以写入一些快捷键","source":"_posts/王阁/技术/hexo/oldblog/blog15.md","raw":"---\n\ntitle: Vim笔记\ndate: 2019-07-16\ntags:\n\n---\n此处简介\n<!--more-->\n\n### Vim笔记\n\nvi有三种工作模式：\n* 命令模式\n* 插入模式\n* 和编辑模式。\n![d689c7d6faa6469a885abdb7ed9b9c52-image.png](//img.wqkenqing.ren//file/2017/7/d689c7d6faa6469a885abdb7ed9b9c52-image.png)\n\n\n\n#### 插入模式\n 命令          作用\na                 在光标后附加文本\nA                 在本行行末附加文本\ni                  在光标前插入文本\nI                  在本行开始插入文本\no                 在光标下插入新行\nO                 在光标上插入新行\n\n***\n#### 定位命令\n命令 作用\nh、方向左键 左移一个字符\nj、方向下键 下移一行\nk、方向上键 上移一行\nl、方向右键 右移一个字符\n$ 移至行尾\n0 移至行首\nH 移至屏幕上端\nM 移至屏幕中央\nL 移至屏幕下端\n:set nu 设置行号\n:set nonu 取消行号\ngg\nG 到第一行\n到最后一行\nnG 到第n行\n:n 到第n行\n***\n#### 删除命令\n命令 作用\nx 删除光标所在处字符\nnx 删除光标所在处后n个字符\ndd 删除光标所在行，ndd删除n行\ndG 删除光标所在行到文件末尾的内容\nD 删除从光标所在处到行尾的内容\n:n1,n2d 删除指定范围的行\n***\n复制和剪切命令\n命令 作用\nyy、Y 复制当前行\nnyy、nY 复制当前行一下n行\ndd 剪切当前行\nndd 剪切当前行以下n行\np、P 粘贴在当前光标所在行下或行上 注：在vi中，剪切就是删除之后再粘贴\n***\n#### 替换和取消命令\n命令 作用\nr 取代光标所在处字符\nR 从光标所在处开始替换字符，按Esc结束\nu 取消上一步操作 注：比如改变单个字符，先输入r，再输入需要更改的字符。比如将字符a改成b。这适合用于少量修改时使用\n***\n#### 搜索和替换命令\n命令 作用\n/string 向前搜索指定字符串\n搜索时忽略大小写 :set ic\nn 搜索指定字符串的下一个出现位置\n:%s/old/new/g  全文替换指定字符串\n:n1,n2s/old/new/g  在一定范围内替换指定字符串 注：n是从前往后，N是从后往前找\nset noic是设置大小写敏感\n:n1,n2s/old/new/c    替换时进行询问是否真的替换\n\nZZ与:wq的作用一样，都是保存退出\n对于readonly文件，如果是root或者改文件所有者，即使该文件没有写权限，使用:wq!也能保存该修改之后的文件。\n仅仅保存但不退出 :w\n另存为  :w /root/file.bak\n***\n#### 其它命令\n导入文件 :r 文件名\n在vi中执行命令 :! 命令\n定义快捷键 :map 快捷键  触发命令\n范例：  :map  ^P  I#<ESC>         注：^p是这样输入的 ctrl+v+v  --> ^p\n     :map  ^B  0x\n连续行注释 :n1,n2s/^/#/g              注：^表示行首\n    :n1,n2s/^#//g\n    :n1,n2s/^/\\/\\//g\n替换  :ab huhuimail    huhuics@gmail.com         取消ab命令    :unan huhuimail\n:r !date   在vi中加入命令执行的结果\n快捷键插入邮箱  :map ^e ihuhuics@gmail.com\n#### 修改用户vim设置\n修改用户vim设置，比如能永久保存快捷键\nvi ~/.vimrc\n缺省这个文件是空的，然后可以写入一些快捷键","slug":"王阁/技术/hexo/oldblog/blog15","published":1,"updated":"2023-02-23T02:51:20.906Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfl0044u6pwej1y520w","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h3 id=\"Vim笔记\"><a href=\"#Vim笔记\" class=\"headerlink\" title=\"Vim笔记\"></a>Vim笔记</h3><p>vi有三种工作模式：</p>\n<ul>\n<li>命令模式</li>\n<li>插入模式</li>\n<li>和编辑模式。<br><img src=\"//img.wqkenqing.ren//file/2017/7/d689c7d6faa6469a885abdb7ed9b9c52-image.png\" alt=\"d689c7d6faa6469a885abdb7ed9b9c52-image.png\"></li>\n</ul>\n<h4 id=\"插入模式\"><a href=\"#插入模式\" class=\"headerlink\" title=\"插入模式\"></a>插入模式</h4><p> 命令          作用<br>a                 在光标后附加文本<br>A                 在本行行末附加文本<br>i                  在光标前插入文本<br>I                  在本行开始插入文本<br>o                 在光标下插入新行<br>O                 在光标上插入新行</p>\n<hr>\n<h4 id=\"定位命令\"><a href=\"#定位命令\" class=\"headerlink\" title=\"定位命令\"></a>定位命令</h4><p>命令 作用<br>h、方向左键 左移一个字符<br>j、方向下键 下移一行<br>k、方向上键 上移一行<br>l、方向右键 右移一个字符<br>$ 移至行尾<br>0 移至行首<br>H 移至屏幕上端<br>M 移至屏幕中央<br>L 移至屏幕下端<br>:set nu 设置行号<br>:set nonu 取消行号<br>gg<br>G 到第一行<br>到最后一行<br>nG 到第n行<br>:n 到第n行</p>\n<hr>\n<h4 id=\"删除命令\"><a href=\"#删除命令\" class=\"headerlink\" title=\"删除命令\"></a>删除命令</h4><p>命令 作用<br>x 删除光标所在处字符<br>nx 删除光标所在处后n个字符<br>dd 删除光标所在行，ndd删除n行<br>dG 删除光标所在行到文件末尾的内容<br>D 删除从光标所在处到行尾的内容<br>:n1,n2d 删除指定范围的行</p>\n<hr>\n<p>复制和剪切命令<br>命令 作用<br>yy、Y 复制当前行<br>nyy、nY 复制当前行一下n行<br>dd 剪切当前行<br>ndd 剪切当前行以下n行<br>p、P 粘贴在当前光标所在行下或行上 注：在vi中，剪切就是删除之后再粘贴</p>\n<hr>\n<h4 id=\"替换和取消命令\"><a href=\"#替换和取消命令\" class=\"headerlink\" title=\"替换和取消命令\"></a>替换和取消命令</h4><p>命令 作用<br>r 取代光标所在处字符<br>R 从光标所在处开始替换字符，按Esc结束<br>u 取消上一步操作 注：比如改变单个字符，先输入r，再输入需要更改的字符。比如将字符a改成b。这适合用于少量修改时使用</p>\n<hr>\n<h4 id=\"搜索和替换命令\"><a href=\"#搜索和替换命令\" class=\"headerlink\" title=\"搜索和替换命令\"></a>搜索和替换命令</h4><p>命令 作用<br>/string 向前搜索指定字符串<br>搜索时忽略大小写 :set ic<br>n 搜索指定字符串的下一个出现位置<br>:%s/old/new/g  全文替换指定字符串<br>:n1,n2s/old/new/g  在一定范围内替换指定字符串 注：n是从前往后，N是从后往前找<br>set noic是设置大小写敏感<br>:n1,n2s/old/new/c    替换时进行询问是否真的替换</p>\n<p>ZZ与:wq的作用一样，都是保存退出<br>对于readonly文件，如果是root或者改文件所有者，即使该文件没有写权限，使用:wq!也能保存该修改之后的文件。<br>仅仅保存但不退出 :w<br>另存为  :w /root/file.bak</p>\n<hr>\n<h4 id=\"其它命令\"><a href=\"#其它命令\" class=\"headerlink\" title=\"其它命令\"></a>其它命令</h4><p>导入文件 :r 文件名<br>在vi中执行命令 :! 命令<br>定义快捷键 :map 快捷键  触发命令<br>范例：  :map  ^P  I#<ESC>         注：^p是这样输入的 ctrl+v+v  –&gt; ^p<br>     :map  ^B  0x<br>连续行注释 :n1,n2s/^/#/g              注：^表示行首<br>    :n1,n2s/^#//g<br>    :n1,n2s/^////g<br>替换  :ab huhuimail    <a href=\"mailto:huhuics@gmail.com\">huhuics@gmail.com</a>         取消ab命令    :unan huhuimail<br>:r !date   在vi中加入命令执行的结果<br>快捷键插入邮箱  :map ^e <a href=\"mailto:ihuhuics@gmail.com\">ihuhuics@gmail.com</a></p>\n<h4 id=\"修改用户vim设置\"><a href=\"#修改用户vim设置\" class=\"headerlink\" title=\"修改用户vim设置\"></a>修改用户vim设置</h4><p>修改用户vim设置，比如能永久保存快捷键<br>vi ~/.vimrc<br>缺省这个文件是空的，然后可以写入一些快捷键</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h3 id=\"Vim笔记\"><a href=\"#Vim笔记\" class=\"headerlink\" title=\"Vim笔记\"></a>Vim笔记</h3><p>vi有三种工作模式：</p>\n<ul>\n<li>命令模式</li>\n<li>插入模式</li>\n<li>和编辑模式。<br><img src=\"//img.wqkenqing.ren//file/2017/7/d689c7d6faa6469a885abdb7ed9b9c52-image.png\" alt=\"d689c7d6faa6469a885abdb7ed9b9c52-image.png\"></li>\n</ul>\n<h4 id=\"插入模式\"><a href=\"#插入模式\" class=\"headerlink\" title=\"插入模式\"></a>插入模式</h4><p> 命令          作用<br>a                 在光标后附加文本<br>A                 在本行行末附加文本<br>i                  在光标前插入文本<br>I                  在本行开始插入文本<br>o                 在光标下插入新行<br>O                 在光标上插入新行</p>\n<hr>\n<h4 id=\"定位命令\"><a href=\"#定位命令\" class=\"headerlink\" title=\"定位命令\"></a>定位命令</h4><p>命令 作用<br>h、方向左键 左移一个字符<br>j、方向下键 下移一行<br>k、方向上键 上移一行<br>l、方向右键 右移一个字符<br>$ 移至行尾<br>0 移至行首<br>H 移至屏幕上端<br>M 移至屏幕中央<br>L 移至屏幕下端<br>:set nu 设置行号<br>:set nonu 取消行号<br>gg<br>G 到第一行<br>到最后一行<br>nG 到第n行<br>:n 到第n行</p>\n<hr>\n<h4 id=\"删除命令\"><a href=\"#删除命令\" class=\"headerlink\" title=\"删除命令\"></a>删除命令</h4><p>命令 作用<br>x 删除光标所在处字符<br>nx 删除光标所在处后n个字符<br>dd 删除光标所在行，ndd删除n行<br>dG 删除光标所在行到文件末尾的内容<br>D 删除从光标所在处到行尾的内容<br>:n1,n2d 删除指定范围的行</p>\n<hr>\n<p>复制和剪切命令<br>命令 作用<br>yy、Y 复制当前行<br>nyy、nY 复制当前行一下n行<br>dd 剪切当前行<br>ndd 剪切当前行以下n行<br>p、P 粘贴在当前光标所在行下或行上 注：在vi中，剪切就是删除之后再粘贴</p>\n<hr>\n<h4 id=\"替换和取消命令\"><a href=\"#替换和取消命令\" class=\"headerlink\" title=\"替换和取消命令\"></a>替换和取消命令</h4><p>命令 作用<br>r 取代光标所在处字符<br>R 从光标所在处开始替换字符，按Esc结束<br>u 取消上一步操作 注：比如改变单个字符，先输入r，再输入需要更改的字符。比如将字符a改成b。这适合用于少量修改时使用</p>\n<hr>\n<h4 id=\"搜索和替换命令\"><a href=\"#搜索和替换命令\" class=\"headerlink\" title=\"搜索和替换命令\"></a>搜索和替换命令</h4><p>命令 作用<br>/string 向前搜索指定字符串<br>搜索时忽略大小写 :set ic<br>n 搜索指定字符串的下一个出现位置<br>:%s/old/new/g  全文替换指定字符串<br>:n1,n2s/old/new/g  在一定范围内替换指定字符串 注：n是从前往后，N是从后往前找<br>set noic是设置大小写敏感<br>:n1,n2s/old/new/c    替换时进行询问是否真的替换</p>\n<p>ZZ与:wq的作用一样，都是保存退出<br>对于readonly文件，如果是root或者改文件所有者，即使该文件没有写权限，使用:wq!也能保存该修改之后的文件。<br>仅仅保存但不退出 :w<br>另存为  :w /root/file.bak</p>\n<hr>\n<h4 id=\"其它命令\"><a href=\"#其它命令\" class=\"headerlink\" title=\"其它命令\"></a>其它命令</h4><p>导入文件 :r 文件名<br>在vi中执行命令 :! 命令<br>定义快捷键 :map 快捷键  触发命令<br>范例：  :map  ^P  I#<ESC>         注：^p是这样输入的 ctrl+v+v  –&gt; ^p<br>     :map  ^B  0x<br>连续行注释 :n1,n2s/^/#/g              注：^表示行首<br>    :n1,n2s/^#//g<br>    :n1,n2s/^////g<br>替换  :ab huhuimail    <a href=\"mailto:huhuics@gmail.com\">huhuics@gmail.com</a>         取消ab命令    :unan huhuimail<br>:r !date   在vi中加入命令执行的结果<br>快捷键插入邮箱  :map ^e <a href=\"mailto:ihuhuics@gmail.com\">ihuhuics@gmail.com</a></p>\n<h4 id=\"修改用户vim设置\"><a href=\"#修改用户vim设置\" class=\"headerlink\" title=\"修改用户vim设置\"></a>修改用户vim设置</h4><p>修改用户vim设置，比如能永久保存快捷键<br>vi ~/.vimrc<br>缺省这个文件是空的，然后可以写入一些快捷键</p>"},{"title":"JVM问题","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n<!--more-->\n\nJVM问题\n1、堆内存溢出\n2、持久代内存溢出\n3、系统频繁FGC\n\n框架使用不当\n4、错误使用框架提供API\n5、日志框架使用不当\nOS内存溢出\n6、某系统物理内存溢出\n数据库问题\n7、慢SQL问题\n\n案例1、堆内存溢出\nJVM基础知识\n1、Jvm内存分为三个大区，young区，old区和perm区；其中young区又包含三个区：Edgn区、S0、S1区\n2、young区和old区属于heap区，占据堆内存；perm区称为持久代，不占据堆内存。\n堆内存溢出\n性能问题发现过程\n\n查看服务器上报错日志，发现有如下报错信息［java.lang.OutOfMemoryError: Java heap space］；根据报错信息确定是jvm 堆内存空间不够导致，于是使用jvm命令（下图）查看，发现此时old区内存空间已经被占满了，同时使用jvisualvm监控工具也\n发现old区空间被占满（右图），整个heap区空间已经无法再容纳新对象进入。\n建议\n考虑大量数据一次性写入内存场景\n\n持久代内存溢出\n现象\n\n压测某系统接口，压测前1分钟左右tps 400多，之后\nTps直降为零，后台报错日志：java.lang.OutOfMemoryError:PermGen space，通过jvm监控工具查看持久代（perm区）空间被占满，Old区空闲；\n\n问题定位过程\n通过注释代码块定位问题，考虑到perm区溢出大部分跟类对象大量创建有关，故锁定问题在序列化框架使用可能有问题；\n对于比较棘手难解决的perm溢出问题，作者构建了一个perm区溢出的场景，可以采用如下定位方案\n1、添加jvm dump配置\n-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/data/dump.bin\n2、安装eclipse mat分析工具\n3、将dump文件导入eclipse，点击［Leak Suspects］，找到跟公司有关的代码进行分析\n此处不过多讲解，大家可以去网上查阅资料学习\n解决办法\n跟开发沟通后选择去掉msgpack0.6版本框架，采用java原成序列化框架，修改后系统tps稳定在400多，gc情况正常\n修改前后gc情况对比\n修复前\n类似问题如何避免\n\n1、去掉项目无用jar包\n2、避免大量使用类对象、大量使用反射\n案例3、频繁FGC\n（1）系统某接口频繁FGC\n问题排查：\n先查JVM内存信息找可疑对象\n从内存对象实例信息中发现跟mysql连接有关，然后检测mysql配置信息\n <bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n\n发现系统采用的是 spring框架的数据源，没有用连接池；\n\n思考\n使用连接池有什么好处？\n连接复用、减少连接重复建立和销毁造成的大量资源消耗\n\n\n然后换做hikaricp连接池做对比测试\n <bean id=\"dataSource\" class=\"com.zaxxer.hikari.HikariDataSource\"\n压测半小时未出现fgc，问题得到解决\n类似问题如何避免\n\n1、研发规范统一DB连接池，避免研发误用\n2、减少大对象、临时对象使用\n\n案例4、错误使用框架提供API\n现象\n某系统本身业务逻辑处理能力很快（研发本机自测tps可以到达2w多），但是接入到framework框架后，TPS最高只能到达300笔/S左右，而且系统负载很低\n\n问题排查\n根据这种现象说明系统可能是堵在了某块方法上，根据这种情况一般采用线程dump的方式来查看系统具体哪些线程出现异常情况，通过线程dump 发现 ［TIMED_WAITING］状态的业务线程占比很高\n根据线程dump信息，找到公司包名开头的信息，然后从下往上查看\n线程dump信息，从信息中我们可以看到\n\nframework.servlet.fServlet.doPost：框架api封装了servlet dopost方法做了某些操作\nframework.servlet.fServlet.execute：框架api执行servelt\nframework.process.fProcessor.process：框架api进行自身逻辑处理\nframework.filter.impl.AuthFilter.before：框架使用过滤器进行用户权限过滤\n\n 。。。。。。然后就是进行http请求操作\n由此我们断定，就是在框架进行权限校验这块堵住了。之后跟开发沟通这块的\n问题即可\n\n分析思路\n压测端 ：net  服务器  jvm\n服务端：net  服务器 nginx tomcat jvm（应用程序）算法 db（mysql redis）","source":"_posts/王阁/技术/hexo/oldblog/blog19.md","raw":"---\n\ntitle: JVM问题\ndate: 2019-07-16\ntags: \n\n---\n此处简介\n<!--more-->\n\nJVM问题\n1、堆内存溢出\n2、持久代内存溢出\n3、系统频繁FGC\n\n框架使用不当\n4、错误使用框架提供API\n5、日志框架使用不当\nOS内存溢出\n6、某系统物理内存溢出\n数据库问题\n7、慢SQL问题\n\n案例1、堆内存溢出\nJVM基础知识\n1、Jvm内存分为三个大区，young区，old区和perm区；其中young区又包含三个区：Edgn区、S0、S1区\n2、young区和old区属于heap区，占据堆内存；perm区称为持久代，不占据堆内存。\n堆内存溢出\n性能问题发现过程\n\n查看服务器上报错日志，发现有如下报错信息［java.lang.OutOfMemoryError: Java heap space］；根据报错信息确定是jvm 堆内存空间不够导致，于是使用jvm命令（下图）查看，发现此时old区内存空间已经被占满了，同时使用jvisualvm监控工具也\n发现old区空间被占满（右图），整个heap区空间已经无法再容纳新对象进入。\n建议\n考虑大量数据一次性写入内存场景\n\n持久代内存溢出\n现象\n\n压测某系统接口，压测前1分钟左右tps 400多，之后\nTps直降为零，后台报错日志：java.lang.OutOfMemoryError:PermGen space，通过jvm监控工具查看持久代（perm区）空间被占满，Old区空闲；\n\n问题定位过程\n通过注释代码块定位问题，考虑到perm区溢出大部分跟类对象大量创建有关，故锁定问题在序列化框架使用可能有问题；\n对于比较棘手难解决的perm溢出问题，作者构建了一个perm区溢出的场景，可以采用如下定位方案\n1、添加jvm dump配置\n-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/data/dump.bin\n2、安装eclipse mat分析工具\n3、将dump文件导入eclipse，点击［Leak Suspects］，找到跟公司有关的代码进行分析\n此处不过多讲解，大家可以去网上查阅资料学习\n解决办法\n跟开发沟通后选择去掉msgpack0.6版本框架，采用java原成序列化框架，修改后系统tps稳定在400多，gc情况正常\n修改前后gc情况对比\n修复前\n类似问题如何避免\n\n1、去掉项目无用jar包\n2、避免大量使用类对象、大量使用反射\n案例3、频繁FGC\n（1）系统某接口频繁FGC\n问题排查：\n先查JVM内存信息找可疑对象\n从内存对象实例信息中发现跟mysql连接有关，然后检测mysql配置信息\n <bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\n\n发现系统采用的是 spring框架的数据源，没有用连接池；\n\n思考\n使用连接池有什么好处？\n连接复用、减少连接重复建立和销毁造成的大量资源消耗\n\n\n然后换做hikaricp连接池做对比测试\n <bean id=\"dataSource\" class=\"com.zaxxer.hikari.HikariDataSource\"\n压测半小时未出现fgc，问题得到解决\n类似问题如何避免\n\n1、研发规范统一DB连接池，避免研发误用\n2、减少大对象、临时对象使用\n\n案例4、错误使用框架提供API\n现象\n某系统本身业务逻辑处理能力很快（研发本机自测tps可以到达2w多），但是接入到framework框架后，TPS最高只能到达300笔/S左右，而且系统负载很低\n\n问题排查\n根据这种现象说明系统可能是堵在了某块方法上，根据这种情况一般采用线程dump的方式来查看系统具体哪些线程出现异常情况，通过线程dump 发现 ［TIMED_WAITING］状态的业务线程占比很高\n根据线程dump信息，找到公司包名开头的信息，然后从下往上查看\n线程dump信息，从信息中我们可以看到\n\nframework.servlet.fServlet.doPost：框架api封装了servlet dopost方法做了某些操作\nframework.servlet.fServlet.execute：框架api执行servelt\nframework.process.fProcessor.process：框架api进行自身逻辑处理\nframework.filter.impl.AuthFilter.before：框架使用过滤器进行用户权限过滤\n\n 。。。。。。然后就是进行http请求操作\n由此我们断定，就是在框架进行权限校验这块堵住了。之后跟开发沟通这块的\n问题即可\n\n分析思路\n压测端 ：net  服务器  jvm\n服务端：net  服务器 nginx tomcat jvm（应用程序）算法 db（mysql redis）","slug":"王阁/技术/hexo/oldblog/blog19","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfm0046u6pw3v50d7lf","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<p>JVM问题<br>1、堆内存溢出<br>2、持久代内存溢出<br>3、系统频繁FGC</p>\n<p>框架使用不当<br>4、错误使用框架提供API<br>5、日志框架使用不当<br>OS内存溢出<br>6、某系统物理内存溢出<br>数据库问题<br>7、慢SQL问题</p>\n<p>案例1、堆内存溢出<br>JVM基础知识<br>1、Jvm内存分为三个大区，young区，old区和perm区；其中young区又包含三个区：Edgn区、S0、S1区<br>2、young区和old区属于heap区，占据堆内存；perm区称为持久代，不占据堆内存。<br>堆内存溢出<br>性能问题发现过程</p>\n<p>查看服务器上报错日志，发现有如下报错信息［java.lang.OutOfMemoryError: Java heap space］；根据报错信息确定是jvm 堆内存空间不够导致，于是使用jvm命令（下图）查看，发现此时old区内存空间已经被占满了，同时使用jvisualvm监控工具也<br>发现old区空间被占满（右图），整个heap区空间已经无法再容纳新对象进入。<br>建议<br>考虑大量数据一次性写入内存场景</p>\n<p>持久代内存溢出<br>现象</p>\n<p>压测某系统接口，压测前1分钟左右tps 400多，之后<br>Tps直降为零，后台报错日志：java.lang.OutOfMemoryError:PermGen space，通过jvm监控工具查看持久代（perm区）空间被占满，Old区空闲；</p>\n<p>问题定位过程<br>通过注释代码块定位问题，考虑到perm区溢出大部分跟类对象大量创建有关，故锁定问题在序列化框架使用可能有问题；<br>对于比较棘手难解决的perm溢出问题，作者构建了一个perm区溢出的场景，可以采用如下定位方案<br>1、添加jvm dump配置<br>-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/data/dump.bin<br>2、安装eclipse mat分析工具<br>3、将dump文件导入eclipse，点击［Leak Suspects］，找到跟公司有关的代码进行分析<br>此处不过多讲解，大家可以去网上查阅资料学习<br>解决办法<br>跟开发沟通后选择去掉msgpack0.6版本框架，采用java原成序列化框架，修改后系统tps稳定在400多，gc情况正常<br>修改前后gc情况对比<br>修复前<br>类似问题如何避免</p>\n<p>1、去掉项目无用jar包<br>2、避免大量使用类对象、大量使用反射<br>案例3、频繁FGC<br>（1）系统某接口频繁FGC<br>问题排查：<br>先查JVM内存信息找可疑对象<br>从内存对象实例信息中发现跟mysql连接有关，然后检测mysql配置信息<br> <bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"></p>\n<p>发现系统采用的是 spring框架的数据源，没有用连接池；</p>\n<p>思考<br>使用连接池有什么好处？<br>连接复用、减少连接重复建立和销毁造成的大量资源消耗</p>\n<p>然后换做hikaricp连接池做对比测试<br> &lt;bean id=”dataSource” class=”com.zaxxer.hikari.HikariDataSource”<br>压测半小时未出现fgc，问题得到解决<br>类似问题如何避免</p>\n<p>1、研发规范统一DB连接池，避免研发误用<br>2、减少大对象、临时对象使用</p>\n<p>案例4、错误使用框架提供API<br>现象<br>某系统本身业务逻辑处理能力很快（研发本机自测tps可以到达2w多），但是接入到framework框架后，TPS最高只能到达300笔/S左右，而且系统负载很低</p>\n<p>问题排查<br>根据这种现象说明系统可能是堵在了某块方法上，根据这种情况一般采用线程dump的方式来查看系统具体哪些线程出现异常情况，通过线程dump 发现 ［TIMED_WAITING］状态的业务线程占比很高<br>根据线程dump信息，找到公司包名开头的信息，然后从下往上查看<br>线程dump信息，从信息中我们可以看到</p>\n<p>framework.servlet.fServlet.doPost：框架api封装了servlet dopost方法做了某些操作<br>framework.servlet.fServlet.execute：框架api执行servelt<br>framework.process.fProcessor.process：框架api进行自身逻辑处理<br>framework.filter.impl.AuthFilter.before：框架使用过滤器进行用户权限过滤</p>\n<p> 。。。。。。然后就是进行http请求操作<br>由此我们断定，就是在框架进行权限校验这块堵住了。之后跟开发沟通这块的<br>问题即可</p>\n<p>分析思路<br>压测端 ：net  服务器  jvm<br>服务端：net  服务器 nginx tomcat jvm（应用程序）算法 db（mysql redis）</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<p>JVM问题<br>1、堆内存溢出<br>2、持久代内存溢出<br>3、系统频繁FGC</p>\n<p>框架使用不当<br>4、错误使用框架提供API<br>5、日志框架使用不当<br>OS内存溢出<br>6、某系统物理内存溢出<br>数据库问题<br>7、慢SQL问题</p>\n<p>案例1、堆内存溢出<br>JVM基础知识<br>1、Jvm内存分为三个大区，young区，old区和perm区；其中young区又包含三个区：Edgn区、S0、S1区<br>2、young区和old区属于heap区，占据堆内存；perm区称为持久代，不占据堆内存。<br>堆内存溢出<br>性能问题发现过程</p>\n<p>查看服务器上报错日志，发现有如下报错信息［java.lang.OutOfMemoryError: Java heap space］；根据报错信息确定是jvm 堆内存空间不够导致，于是使用jvm命令（下图）查看，发现此时old区内存空间已经被占满了，同时使用jvisualvm监控工具也<br>发现old区空间被占满（右图），整个heap区空间已经无法再容纳新对象进入。<br>建议<br>考虑大量数据一次性写入内存场景</p>\n<p>持久代内存溢出<br>现象</p>\n<p>压测某系统接口，压测前1分钟左右tps 400多，之后<br>Tps直降为零，后台报错日志：java.lang.OutOfMemoryError:PermGen space，通过jvm监控工具查看持久代（perm区）空间被占满，Old区空闲；</p>\n<p>问题定位过程<br>通过注释代码块定位问题，考虑到perm区溢出大部分跟类对象大量创建有关，故锁定问题在序列化框架使用可能有问题；<br>对于比较棘手难解决的perm溢出问题，作者构建了一个perm区溢出的场景，可以采用如下定位方案<br>1、添加jvm dump配置<br>-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/data/dump.bin<br>2、安装eclipse mat分析工具<br>3、将dump文件导入eclipse，点击［Leak Suspects］，找到跟公司有关的代码进行分析<br>此处不过多讲解，大家可以去网上查阅资料学习<br>解决办法<br>跟开发沟通后选择去掉msgpack0.6版本框架，采用java原成序列化框架，修改后系统tps稳定在400多，gc情况正常<br>修改前后gc情况对比<br>修复前<br>类似问题如何避免</p>\n<p>1、去掉项目无用jar包<br>2、避免大量使用类对象、大量使用反射<br>案例3、频繁FGC<br>（1）系统某接口频繁FGC<br>问题排查：<br>先查JVM内存信息找可疑对象<br>从内存对象实例信息中发现跟mysql连接有关，然后检测mysql配置信息<br> <bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"></p>\n<p>发现系统采用的是 spring框架的数据源，没有用连接池；</p>\n<p>思考<br>使用连接池有什么好处？<br>连接复用、减少连接重复建立和销毁造成的大量资源消耗</p>\n<p>然后换做hikaricp连接池做对比测试<br> &lt;bean id=”dataSource” class=”com.zaxxer.hikari.HikariDataSource”<br>压测半小时未出现fgc，问题得到解决<br>类似问题如何避免</p>\n<p>1、研发规范统一DB连接池，避免研发误用<br>2、减少大对象、临时对象使用</p>\n<p>案例4、错误使用框架提供API<br>现象<br>某系统本身业务逻辑处理能力很快（研发本机自测tps可以到达2w多），但是接入到framework框架后，TPS最高只能到达300笔/S左右，而且系统负载很低</p>\n<p>问题排查<br>根据这种现象说明系统可能是堵在了某块方法上，根据这种情况一般采用线程dump的方式来查看系统具体哪些线程出现异常情况，通过线程dump 发现 ［TIMED_WAITING］状态的业务线程占比很高<br>根据线程dump信息，找到公司包名开头的信息，然后从下往上查看<br>线程dump信息，从信息中我们可以看到</p>\n<p>framework.servlet.fServlet.doPost：框架api封装了servlet dopost方法做了某些操作<br>framework.servlet.fServlet.execute：框架api执行servelt<br>framework.process.fProcessor.process：框架api进行自身逻辑处理<br>framework.filter.impl.AuthFilter.before：框架使用过滤器进行用户权限过滤</p>\n<p> 。。。。。。然后就是进行http请求操作<br>由此我们断定，就是在框架进行权限校验这块堵住了。之后跟开发沟通这块的<br>问题即可</p>\n<p>分析思路<br>压测端 ：net  服务器  jvm<br>服务端：net  服务器 nginx tomcat jvm（应用程序）算法 db（mysql redis）</p>"},{"title":"文本处理小结","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n\n<!--more-->\n\n## 文本处理小结\n`此处的文本处理主要针对的是日常工作中主要遇到的一些场景小结，小结主要围绕技能展开，但不局限于某一技术点，`\n\n### 文本处理的主要类型\n1. 排序\n2. 去重\n3. 合并\n4. 切割\n4. 取集\n5. 打乱排序\n6. 模糊匹配\n7. 替换\n\n\n---\n\n```\n总得来说，目前主要的文本处理手段有linux指令、shell脚本、java脚本、mr脚本、excel、sublime等几类，下现主要也围绕这部份展开\n```\n### 排序\n目前主要涉及到的排序手段是linux中的sort指令，所以这里对sort进行展开小结\n####sort排序\nsort排序主要的操作有\n```sort命令是在Linux里非常有用，它将文件进行排序，并将排序结果标准输出。sort命令既可以从特定的文件，也可以从stdin中获取输入。```\n\n\n#####sort 指令后面常接的Options\n\n![3baeaf03a24f4874818f343d3893d863-image.png](//img.wqkenqing.ren//file/2017/7/3baeaf03a24f4874818f343d3893d863-image.png)\n\n\n\n\n##### sort原理\nsort将文件/文本的每一行作为一个单位，相互比较，比较原则是从首字符向后，依次按ASCII码值进行比较，最后将他们按升序输出。\n\n排序有时往往伴随着去重，而sort则对应的有去重指令\n即sort -u file:忽略相同行(这里的-u其实以对应的是unique，而unique的主要作用还是去重，所以在去重部份再展开总结)\n\n##### sort的常用指令\n(-n、-r、-k、-t)\n-t:指定分隔符\n-n:指定以按数字的大小的形式进行排序\n-k:指定按那一列\n-r:-r是以相反顺序\n![5bf55dc045d846bcbe32e00202b80cbc-image.png](//img.wqkenqing.ren//file/2017/7/5bf55dc045d846bcbe32e00202b80cbc-image.png)\n\n\n```careful```\n-k 有一些复杂用法，即\n\n-k选项的语法格式： FStart.CStart Modifie,FEnd.CEnd Modifier -------Start--------,-------End-------- FStart.CStart 选项 , FEnd.CEnd 选项 这个语法格式可以被其中的逗号,分为两大部分，Start部分和End部分。Start部分也由三部分组成，其中的Modifier部分就是我们之前说过的类似n和r的选项部分。我们重点说说Start部分的FStart和C.Start。C.Start也是可以省略的，省略的话就表示从本域的开头部分开始。FStart.CStart，其中FStart就是表示使用的域，而CStart则表示在FStart域中从第几个字符开始算“排序首字符”。同理，在End部分中，你可以设定FEnd.CEnd，如果你省略.CEnd，则表示结尾到“域尾”，即本域的最后一个字符。或者，如果你将CEnd设定为0(零)，也是表示结尾到“域尾”。 从公司英文名称的第二个字母开始进行排序： $ sort -t ' ' -k 1.2 facebook.txt baidu 100 5000 sohu 100 4500 google 110 5000 guge 50 3000 使用了-k 1.2，表示对第一个域的第二个字符开始到本域的最后一个字符为止的字符串进行排序。你会发现baidu因为第二个字母是a而名列榜首。sohu和 google第二个字符都是o，但sohu的h在google的o前面，所以两者分别排在第二和第三。guge只能屈居第四了。 只针对公司英文名称的第二个字母进行排序，如果相同的按照员工工资进行降序排序： $ sort -t ' ' -k 1.2,1.2 -nrk 3,3 facebook.txt baidu 100 5000 google 110 5000 sohu 100 4500 guge 50 3000 由于只对第二个字母进行排序，所以我们使用了-k 1.2,1.2的表示方式，表示我们“只”对第二个字母进行排序。（如果你问“我使用-k 1.2怎么不行？”，当然不行，因为你省略了End部分，这就意味着你将对从第二个字母起到本域最后一个字符为止的字符串进行排序）。对于员工工资进行排 序，我们也使用了-k 3,3，这是最准确的表述，表示我们“只”对本域进行排序，因为如果你省略了后面的3，就变成了我们“对第3个域开始到最后一个域位置的内容进行排序” 了。\n\n---\n总得来说Linux的sort排序功能就能满足绝大部份应用场景\n\n---\n\n### 去重\n\n```排序完后，往往涉及到的场景更多的是去重```\n相较于排序而言，日常中去重的手段会更多一些\n\n#### 去重(linux方式)\n\nlinux中的去重指令首先是刚才在前文本提到的\n\nsort -u:对文本进行排序，去重，并对重复的只保留一份。\n\n而在日常中，结合去重可能会产生更多的应用场景，即取交集、并集等\n\n大致来讲linux 主要的去重指令是uniq\n\n##### uniq\n\nuniq的Options主要有\n![540273a5039941a39598a747888f4948-image.png](//img.wqkenqing.ren//file/2017/7/540273a5039941a39598a747888f4948-image.png)\n\n![10bff3119aaa49de976350596f94f4bf-image.png](//img.wqkenqing.ren//file/2017/7/10bff3119aaa49de976350596f94f4bf-image.png)\n\n\n\nuniq :默认只是将重复的保留一行\n\n而通过uniq实现交集与并集主要通过-d与-u实现\n\nuniq -d是只显示重复出现的行列\nuniq -u是只显示不重复的列\n\n这里要注意uniq -f -s的使用\nuniq -f nubmber :即指定忽略多少栏位开如计重\n\nuniq -s number:即指定忽略多少字任开始计重\n uniq -f -s :同时出现时则按先按栏位移，再按字符移。\n\n通过uniq实现去重要先排序\n\n---\n针对时常出现的应用场景提供一个思路\n两个文本中有重复内容，但只想去掉前一个文件与后一个文件中的重复内容，保留前一个文件中的非重复内容\n可以通过\n\nsort file1 file2 | uniq  -d >temp\n\nsort file1 temp|uniq -u\n\n```即思路是:先将两个文件中的重复内容找出并写入临时文件，再将前一个文件与临时文件合并，排序去重，保留只出现一次的文件内容```\n\n\n---\n##### 其它去重方式\n\n要去重，通过java方式也能轻松实现\n即主要利用set等的非重复内容的特性。进行实现\n\n\n### 切割\n\n即将文件进行切割，出于取样，或测试的需求考虑，可能需要从大文本中切割出一些小文件来。\n对文件的切割也有很多实现方式\n但从实现方式上更推荐linux指令式\n\n#### 切割linux指令式\n\n涉及到切割的linux指令主要有split\n\nsplit命令可以将一个大文件分割成很多个小文件，有时需要将文件分割成更小的片段，比如为提高可读性，生成日志等。\n\n![Alt text](./1493197221096.png)\n\n具体实现都是指令式，需要注意的地方较少，不记得时则翻阅相关文档\n\n#### 切割的其它方式\n\n主要擅长的还有java方式\n\n---\n\n### 打乱排序\n\n```\n打乱排序主要用的方式有awk与excel的方式\n```\n\n\n#### awk方式\n\n\nawk 'BEGIN{ 100000*srand();}{ printf \"%s %s\\n\", rand(), $0}'  t |sort -k1n | awk '{gsub($1FS,\"\"); print $0}'\n\n#### excel方式\n\n即通过在文本中再另加一列，生成随机数，然后对随机数列进行排序从列达到打乱的效果\n\n\n---\n\n\n### 模糊匹配\n\n```文本的模糊匹配有较多应该场景,可以再多总结```\n\n模糊匹配主要有在shell脚本中针对contains操作\n\n和vim中的匹配操作\n\n---","source":"_posts/王阁/技术/hexo/oldblog/blog14.md","raw":"\n---\n\ntitle: 文本处理小结\ndate: 2019-07-16\ntags:\n\n---\n此处简介\n\n<!--more-->\n\n## 文本处理小结\n`此处的文本处理主要针对的是日常工作中主要遇到的一些场景小结，小结主要围绕技能展开，但不局限于某一技术点，`\n\n### 文本处理的主要类型\n1. 排序\n2. 去重\n3. 合并\n4. 切割\n4. 取集\n5. 打乱排序\n6. 模糊匹配\n7. 替换\n\n\n---\n\n```\n总得来说，目前主要的文本处理手段有linux指令、shell脚本、java脚本、mr脚本、excel、sublime等几类，下现主要也围绕这部份展开\n```\n### 排序\n目前主要涉及到的排序手段是linux中的sort指令，所以这里对sort进行展开小结\n####sort排序\nsort排序主要的操作有\n```sort命令是在Linux里非常有用，它将文件进行排序，并将排序结果标准输出。sort命令既可以从特定的文件，也可以从stdin中获取输入。```\n\n\n#####sort 指令后面常接的Options\n\n![3baeaf03a24f4874818f343d3893d863-image.png](//img.wqkenqing.ren//file/2017/7/3baeaf03a24f4874818f343d3893d863-image.png)\n\n\n\n\n##### sort原理\nsort将文件/文本的每一行作为一个单位，相互比较，比较原则是从首字符向后，依次按ASCII码值进行比较，最后将他们按升序输出。\n\n排序有时往往伴随着去重，而sort则对应的有去重指令\n即sort -u file:忽略相同行(这里的-u其实以对应的是unique，而unique的主要作用还是去重，所以在去重部份再展开总结)\n\n##### sort的常用指令\n(-n、-r、-k、-t)\n-t:指定分隔符\n-n:指定以按数字的大小的形式进行排序\n-k:指定按那一列\n-r:-r是以相反顺序\n![5bf55dc045d846bcbe32e00202b80cbc-image.png](//img.wqkenqing.ren//file/2017/7/5bf55dc045d846bcbe32e00202b80cbc-image.png)\n\n\n```careful```\n-k 有一些复杂用法，即\n\n-k选项的语法格式： FStart.CStart Modifie,FEnd.CEnd Modifier -------Start--------,-------End-------- FStart.CStart 选项 , FEnd.CEnd 选项 这个语法格式可以被其中的逗号,分为两大部分，Start部分和End部分。Start部分也由三部分组成，其中的Modifier部分就是我们之前说过的类似n和r的选项部分。我们重点说说Start部分的FStart和C.Start。C.Start也是可以省略的，省略的话就表示从本域的开头部分开始。FStart.CStart，其中FStart就是表示使用的域，而CStart则表示在FStart域中从第几个字符开始算“排序首字符”。同理，在End部分中，你可以设定FEnd.CEnd，如果你省略.CEnd，则表示结尾到“域尾”，即本域的最后一个字符。或者，如果你将CEnd设定为0(零)，也是表示结尾到“域尾”。 从公司英文名称的第二个字母开始进行排序： $ sort -t ' ' -k 1.2 facebook.txt baidu 100 5000 sohu 100 4500 google 110 5000 guge 50 3000 使用了-k 1.2，表示对第一个域的第二个字符开始到本域的最后一个字符为止的字符串进行排序。你会发现baidu因为第二个字母是a而名列榜首。sohu和 google第二个字符都是o，但sohu的h在google的o前面，所以两者分别排在第二和第三。guge只能屈居第四了。 只针对公司英文名称的第二个字母进行排序，如果相同的按照员工工资进行降序排序： $ sort -t ' ' -k 1.2,1.2 -nrk 3,3 facebook.txt baidu 100 5000 google 110 5000 sohu 100 4500 guge 50 3000 由于只对第二个字母进行排序，所以我们使用了-k 1.2,1.2的表示方式，表示我们“只”对第二个字母进行排序。（如果你问“我使用-k 1.2怎么不行？”，当然不行，因为你省略了End部分，这就意味着你将对从第二个字母起到本域最后一个字符为止的字符串进行排序）。对于员工工资进行排 序，我们也使用了-k 3,3，这是最准确的表述，表示我们“只”对本域进行排序，因为如果你省略了后面的3，就变成了我们“对第3个域开始到最后一个域位置的内容进行排序” 了。\n\n---\n总得来说Linux的sort排序功能就能满足绝大部份应用场景\n\n---\n\n### 去重\n\n```排序完后，往往涉及到的场景更多的是去重```\n相较于排序而言，日常中去重的手段会更多一些\n\n#### 去重(linux方式)\n\nlinux中的去重指令首先是刚才在前文本提到的\n\nsort -u:对文本进行排序，去重，并对重复的只保留一份。\n\n而在日常中，结合去重可能会产生更多的应用场景，即取交集、并集等\n\n大致来讲linux 主要的去重指令是uniq\n\n##### uniq\n\nuniq的Options主要有\n![540273a5039941a39598a747888f4948-image.png](//img.wqkenqing.ren//file/2017/7/540273a5039941a39598a747888f4948-image.png)\n\n![10bff3119aaa49de976350596f94f4bf-image.png](//img.wqkenqing.ren//file/2017/7/10bff3119aaa49de976350596f94f4bf-image.png)\n\n\n\nuniq :默认只是将重复的保留一行\n\n而通过uniq实现交集与并集主要通过-d与-u实现\n\nuniq -d是只显示重复出现的行列\nuniq -u是只显示不重复的列\n\n这里要注意uniq -f -s的使用\nuniq -f nubmber :即指定忽略多少栏位开如计重\n\nuniq -s number:即指定忽略多少字任开始计重\n uniq -f -s :同时出现时则按先按栏位移，再按字符移。\n\n通过uniq实现去重要先排序\n\n---\n针对时常出现的应用场景提供一个思路\n两个文本中有重复内容，但只想去掉前一个文件与后一个文件中的重复内容，保留前一个文件中的非重复内容\n可以通过\n\nsort file1 file2 | uniq  -d >temp\n\nsort file1 temp|uniq -u\n\n```即思路是:先将两个文件中的重复内容找出并写入临时文件，再将前一个文件与临时文件合并，排序去重，保留只出现一次的文件内容```\n\n\n---\n##### 其它去重方式\n\n要去重，通过java方式也能轻松实现\n即主要利用set等的非重复内容的特性。进行实现\n\n\n### 切割\n\n即将文件进行切割，出于取样，或测试的需求考虑，可能需要从大文本中切割出一些小文件来。\n对文件的切割也有很多实现方式\n但从实现方式上更推荐linux指令式\n\n#### 切割linux指令式\n\n涉及到切割的linux指令主要有split\n\nsplit命令可以将一个大文件分割成很多个小文件，有时需要将文件分割成更小的片段，比如为提高可读性，生成日志等。\n\n![Alt text](./1493197221096.png)\n\n具体实现都是指令式，需要注意的地方较少，不记得时则翻阅相关文档\n\n#### 切割的其它方式\n\n主要擅长的还有java方式\n\n---\n\n### 打乱排序\n\n```\n打乱排序主要用的方式有awk与excel的方式\n```\n\n\n#### awk方式\n\n\nawk 'BEGIN{ 100000*srand();}{ printf \"%s %s\\n\", rand(), $0}'  t |sort -k1n | awk '{gsub($1FS,\"\"); print $0}'\n\n#### excel方式\n\n即通过在文本中再另加一列，生成随机数，然后对随机数列进行排序从列达到打乱的效果\n\n\n---\n\n\n### 模糊匹配\n\n```文本的模糊匹配有较多应该场景,可以再多总结```\n\n模糊匹配主要有在shell脚本中针对contains操作\n\n和vim中的匹配操作\n\n---","slug":"王阁/技术/hexo/oldblog/blog14","published":1,"updated":"2023-02-23T02:51:20.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfn0048u6pwe0u3440r","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h2 id=\"文本处理小结\"><a href=\"#文本处理小结\" class=\"headerlink\" title=\"文本处理小结\"></a>文本处理小结</h2><p><code>此处的文本处理主要针对的是日常工作中主要遇到的一些场景小结，小结主要围绕技能展开，但不局限于某一技术点，</code></p>\n<h3 id=\"文本处理的主要类型\"><a href=\"#文本处理的主要类型\" class=\"headerlink\" title=\"文本处理的主要类型\"></a>文本处理的主要类型</h3><ol>\n<li>排序</li>\n<li>去重</li>\n<li>合并</li>\n<li>切割</li>\n<li>取集</li>\n<li>打乱排序</li>\n<li>模糊匹配</li>\n<li>替换</li>\n</ol>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">总得来说，目前主要的文本处理手段有linux指令、shell脚本、java脚本、mr脚本、excel、sublime等几类，下现主要也围绕这部份展开</span><br></pre></td></tr></table></figure>\n<h3 id=\"排序\"><a href=\"#排序\" class=\"headerlink\" title=\"排序\"></a>排序</h3><p>目前主要涉及到的排序手段是linux中的sort指令，所以这里对sort进行展开小结<br>####sort排序<br>sort排序主要的操作有</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#####sort 指令后面常接的Options</span><br><span class=\"line\"></span><br><span class=\"line\">![3baeaf03a24f4874818f343d3893d863-image.png](&#x2F;&#x2F;img.wqkenqing.ren&#x2F;&#x2F;file&#x2F;2017&#x2F;7&#x2F;3baeaf03a24f4874818f343d3893d863-image.png)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">##### sort原理</span><br><span class=\"line\">sort将文件&#x2F;文本的每一行作为一个单位，相互比较，比较原则是从首字符向后，依次按ASCII码值进行比较，最后将他们按升序输出。</span><br><span class=\"line\"></span><br><span class=\"line\">排序有时往往伴随着去重，而sort则对应的有去重指令</span><br><span class=\"line\">即sort -u file:忽略相同行(这里的-u其实以对应的是unique，而unique的主要作用还是去重，所以在去重部份再展开总结)</span><br><span class=\"line\"></span><br><span class=\"line\">##### sort的常用指令</span><br><span class=\"line\">(-n、-r、-k、-t)</span><br><span class=\"line\">-t:指定分隔符</span><br><span class=\"line\">-n:指定以按数字的大小的形式进行排序</span><br><span class=\"line\">-k:指定按那一列</span><br><span class=\"line\">-r:-r是以相反顺序</span><br><span class=\"line\">![5bf55dc045d846bcbe32e00202b80cbc-image.png](&#x2F;&#x2F;img.wqkenqing.ren&#x2F;&#x2F;file&#x2F;2017&#x2F;7&#x2F;5bf55dc045d846bcbe32e00202b80cbc-image.png)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;careful</span><br></pre></td></tr></table></figure>\n<p>-k 有一些复杂用法，即</p>\n<p>-k选项的语法格式： FStart.CStart Modifie,FEnd.CEnd Modifier ——-Start——–,——-End——– FStart.CStart 选项 , FEnd.CEnd 选项 这个语法格式可以被其中的逗号,分为两大部分，Start部分和End部分。Start部分也由三部分组成，其中的Modifier部分就是我们之前说过的类似n和r的选项部分。我们重点说说Start部分的FStart和C.Start。C.Start也是可以省略的，省略的话就表示从本域的开头部分开始。FStart.CStart，其中FStart就是表示使用的域，而CStart则表示在FStart域中从第几个字符开始算“排序首字符”。同理，在End部分中，你可以设定FEnd.CEnd，如果你省略.CEnd，则表示结尾到“域尾”，即本域的最后一个字符。或者，如果你将CEnd设定为0(零)，也是表示结尾到“域尾”。 从公司英文名称的第二个字母开始进行排序： $ sort -t ‘ ‘ -k 1.2 facebook.txt baidu 100 5000 sohu 100 4500 google 110 5000 guge 50 3000 使用了-k 1.2，表示对第一个域的第二个字符开始到本域的最后一个字符为止的字符串进行排序。你会发现baidu因为第二个字母是a而名列榜首。sohu和 google第二个字符都是o，但sohu的h在google的o前面，所以两者分别排在第二和第三。guge只能屈居第四了。 只针对公司英文名称的第二个字母进行排序，如果相同的按照员工工资进行降序排序： $ sort -t ‘ ‘ -k 1.2,1.2 -nrk 3,3 facebook.txt baidu 100 5000 google 110 5000 sohu 100 4500 guge 50 3000 由于只对第二个字母进行排序，所以我们使用了-k 1.2,1.2的表示方式，表示我们“只”对第二个字母进行排序。（如果你问“我使用-k 1.2怎么不行？”，当然不行，因为你省略了End部分，这就意味着你将对从第二个字母起到本域最后一个字符为止的字符串进行排序）。对于员工工资进行排 序，我们也使用了-k 3,3，这是最准确的表述，表示我们“只”对本域进行排序，因为如果你省略了后面的3，就变成了我们“对第3个域开始到最后一个域位置的内容进行排序” 了。</p>\n<hr>\n<p>总得来说Linux的sort排序功能就能满足绝大部份应用场景</p>\n<hr>\n<h3 id=\"去重\"><a href=\"#去重\" class=\"headerlink\" title=\"去重\"></a>去重</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">相较于排序而言，日常中去重的手段会更多一些</span><br><span class=\"line\"></span><br><span class=\"line\">#### 去重(linux方式)</span><br><span class=\"line\"></span><br><span class=\"line\">linux中的去重指令首先是刚才在前文本提到的</span><br><span class=\"line\"></span><br><span class=\"line\">sort -u:对文本进行排序，去重，并对重复的只保留一份。</span><br><span class=\"line\"></span><br><span class=\"line\">而在日常中，结合去重可能会产生更多的应用场景，即取交集、并集等</span><br><span class=\"line\"></span><br><span class=\"line\">大致来讲linux 主要的去重指令是uniq</span><br><span class=\"line\"></span><br><span class=\"line\">##### uniq</span><br><span class=\"line\"></span><br><span class=\"line\">uniq的Options主要有</span><br><span class=\"line\">![540273a5039941a39598a747888f4948-image.png](&#x2F;&#x2F;img.wqkenqing.ren&#x2F;&#x2F;file&#x2F;2017&#x2F;7&#x2F;540273a5039941a39598a747888f4948-image.png)</span><br><span class=\"line\"></span><br><span class=\"line\">![10bff3119aaa49de976350596f94f4bf-image.png](&#x2F;&#x2F;img.wqkenqing.ren&#x2F;&#x2F;file&#x2F;2017&#x2F;7&#x2F;10bff3119aaa49de976350596f94f4bf-image.png)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">uniq :默认只是将重复的保留一行</span><br><span class=\"line\"></span><br><span class=\"line\">而通过uniq实现交集与并集主要通过-d与-u实现</span><br><span class=\"line\"></span><br><span class=\"line\">uniq -d是只显示重复出现的行列</span><br><span class=\"line\">uniq -u是只显示不重复的列</span><br><span class=\"line\"></span><br><span class=\"line\">这里要注意uniq -f -s的使用</span><br><span class=\"line\">uniq -f nubmber :即指定忽略多少栏位开如计重</span><br><span class=\"line\"></span><br><span class=\"line\">uniq -s number:即指定忽略多少字任开始计重</span><br><span class=\"line\"> uniq -f -s :同时出现时则按先按栏位移，再按字符移。</span><br><span class=\"line\"></span><br><span class=\"line\">通过uniq实现去重要先排序</span><br><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\">针对时常出现的应用场景提供一个思路</span><br><span class=\"line\">两个文本中有重复内容，但只想去掉前一个文件与后一个文件中的重复内容，保留前一个文件中的非重复内容</span><br><span class=\"line\">可以通过</span><br><span class=\"line\"></span><br><span class=\"line\">sort file1 file2 | uniq  -d &gt;temp</span><br><span class=\"line\"></span><br><span class=\"line\">sort file1 temp|uniq -u</span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;即思路是:先将两个文件中的重复内容找出并写入临时文件，再将前一个文件与临时文件合并，排序去重，保留只出现一次的文件内容</span><br></pre></td></tr></table></figure>\n\n\n<hr>\n<h5 id=\"其它去重方式\"><a href=\"#其它去重方式\" class=\"headerlink\" title=\"其它去重方式\"></a>其它去重方式</h5><p>要去重，通过java方式也能轻松实现<br>即主要利用set等的非重复内容的特性。进行实现</p>\n<h3 id=\"切割\"><a href=\"#切割\" class=\"headerlink\" title=\"切割\"></a>切割</h3><p>即将文件进行切割，出于取样，或测试的需求考虑，可能需要从大文本中切割出一些小文件来。<br>对文件的切割也有很多实现方式<br>但从实现方式上更推荐linux指令式</p>\n<h4 id=\"切割linux指令式\"><a href=\"#切割linux指令式\" class=\"headerlink\" title=\"切割linux指令式\"></a>切割linux指令式</h4><p>涉及到切割的linux指令主要有split</p>\n<p>split命令可以将一个大文件分割成很多个小文件，有时需要将文件分割成更小的片段，比如为提高可读性，生成日志等。</p>\n<p><img src=\"./1493197221096.png\" alt=\"Alt text\"></p>\n<p>具体实现都是指令式，需要注意的地方较少，不记得时则翻阅相关文档</p>\n<h4 id=\"切割的其它方式\"><a href=\"#切割的其它方式\" class=\"headerlink\" title=\"切割的其它方式\"></a>切割的其它方式</h4><p>主要擅长的还有java方式</p>\n<hr>\n<h3 id=\"打乱排序\"><a href=\"#打乱排序\" class=\"headerlink\" title=\"打乱排序\"></a>打乱排序</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">打乱排序主要用的方式有awk与excel的方式</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"awk方式\"><a href=\"#awk方式\" class=\"headerlink\" title=\"awk方式\"></a>awk方式</h4><p>awk ‘BEGIN{ 100000*srand();}{ printf “%s %s\\n”, rand(), $0}’  t |sort -k1n | awk ‘{gsub($1FS,””); print $0}’</p>\n<h4 id=\"excel方式\"><a href=\"#excel方式\" class=\"headerlink\" title=\"excel方式\"></a>excel方式</h4><p>即通过在文本中再另加一列，生成随机数，然后对随机数列进行排序从列达到打乱的效果</p>\n<hr>\n<h3 id=\"模糊匹配\"><a href=\"#模糊匹配\" class=\"headerlink\" title=\"模糊匹配\"></a>模糊匹配</h3><p><code>文本的模糊匹配有较多应该场景,可以再多总结</code></p>\n<p>模糊匹配主要有在shell脚本中针对contains操作</p>\n<p>和vim中的匹配操作</p>\n<hr>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h2 id=\"文本处理小结\"><a href=\"#文本处理小结\" class=\"headerlink\" title=\"文本处理小结\"></a>文本处理小结</h2><p><code>此处的文本处理主要针对的是日常工作中主要遇到的一些场景小结，小结主要围绕技能展开，但不局限于某一技术点，</code></p>\n<h3 id=\"文本处理的主要类型\"><a href=\"#文本处理的主要类型\" class=\"headerlink\" title=\"文本处理的主要类型\"></a>文本处理的主要类型</h3><ol>\n<li>排序</li>\n<li>去重</li>\n<li>合并</li>\n<li>切割</li>\n<li>取集</li>\n<li>打乱排序</li>\n<li>模糊匹配</li>\n<li>替换</li>\n</ol>\n<hr>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">总得来说，目前主要的文本处理手段有linux指令、shell脚本、java脚本、mr脚本、excel、sublime等几类，下现主要也围绕这部份展开</span><br></pre></td></tr></table></figure>\n<h3 id=\"排序\"><a href=\"#排序\" class=\"headerlink\" title=\"排序\"></a>排序</h3><p>目前主要涉及到的排序手段是linux中的sort指令，所以这里对sort进行展开小结<br>####sort排序<br>sort排序主要的操作有</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#####sort 指令后面常接的Options</span><br><span class=\"line\"></span><br><span class=\"line\">![3baeaf03a24f4874818f343d3893d863-image.png](&#x2F;&#x2F;img.wqkenqing.ren&#x2F;&#x2F;file&#x2F;2017&#x2F;7&#x2F;3baeaf03a24f4874818f343d3893d863-image.png)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">##### sort原理</span><br><span class=\"line\">sort将文件&#x2F;文本的每一行作为一个单位，相互比较，比较原则是从首字符向后，依次按ASCII码值进行比较，最后将他们按升序输出。</span><br><span class=\"line\"></span><br><span class=\"line\">排序有时往往伴随着去重，而sort则对应的有去重指令</span><br><span class=\"line\">即sort -u file:忽略相同行(这里的-u其实以对应的是unique，而unique的主要作用还是去重，所以在去重部份再展开总结)</span><br><span class=\"line\"></span><br><span class=\"line\">##### sort的常用指令</span><br><span class=\"line\">(-n、-r、-k、-t)</span><br><span class=\"line\">-t:指定分隔符</span><br><span class=\"line\">-n:指定以按数字的大小的形式进行排序</span><br><span class=\"line\">-k:指定按那一列</span><br><span class=\"line\">-r:-r是以相反顺序</span><br><span class=\"line\">![5bf55dc045d846bcbe32e00202b80cbc-image.png](&#x2F;&#x2F;img.wqkenqing.ren&#x2F;&#x2F;file&#x2F;2017&#x2F;7&#x2F;5bf55dc045d846bcbe32e00202b80cbc-image.png)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;careful</span><br></pre></td></tr></table></figure>\n<p>-k 有一些复杂用法，即</p>\n<p>-k选项的语法格式： FStart.CStart Modifie,FEnd.CEnd Modifier ——-Start——–,——-End——– FStart.CStart 选项 , FEnd.CEnd 选项 这个语法格式可以被其中的逗号,分为两大部分，Start部分和End部分。Start部分也由三部分组成，其中的Modifier部分就是我们之前说过的类似n和r的选项部分。我们重点说说Start部分的FStart和C.Start。C.Start也是可以省略的，省略的话就表示从本域的开头部分开始。FStart.CStart，其中FStart就是表示使用的域，而CStart则表示在FStart域中从第几个字符开始算“排序首字符”。同理，在End部分中，你可以设定FEnd.CEnd，如果你省略.CEnd，则表示结尾到“域尾”，即本域的最后一个字符。或者，如果你将CEnd设定为0(零)，也是表示结尾到“域尾”。 从公司英文名称的第二个字母开始进行排序： $ sort -t ‘ ‘ -k 1.2 facebook.txt baidu 100 5000 sohu 100 4500 google 110 5000 guge 50 3000 使用了-k 1.2，表示对第一个域的第二个字符开始到本域的最后一个字符为止的字符串进行排序。你会发现baidu因为第二个字母是a而名列榜首。sohu和 google第二个字符都是o，但sohu的h在google的o前面，所以两者分别排在第二和第三。guge只能屈居第四了。 只针对公司英文名称的第二个字母进行排序，如果相同的按照员工工资进行降序排序： $ sort -t ‘ ‘ -k 1.2,1.2 -nrk 3,3 facebook.txt baidu 100 5000 google 110 5000 sohu 100 4500 guge 50 3000 由于只对第二个字母进行排序，所以我们使用了-k 1.2,1.2的表示方式，表示我们“只”对第二个字母进行排序。（如果你问“我使用-k 1.2怎么不行？”，当然不行，因为你省略了End部分，这就意味着你将对从第二个字母起到本域最后一个字符为止的字符串进行排序）。对于员工工资进行排 序，我们也使用了-k 3,3，这是最准确的表述，表示我们“只”对本域进行排序，因为如果你省略了后面的3，就变成了我们“对第3个域开始到最后一个域位置的内容进行排序” 了。</p>\n<hr>\n<p>总得来说Linux的sort排序功能就能满足绝大部份应用场景</p>\n<hr>\n<h3 id=\"去重\"><a href=\"#去重\" class=\"headerlink\" title=\"去重\"></a>去重</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">相较于排序而言，日常中去重的手段会更多一些</span><br><span class=\"line\"></span><br><span class=\"line\">#### 去重(linux方式)</span><br><span class=\"line\"></span><br><span class=\"line\">linux中的去重指令首先是刚才在前文本提到的</span><br><span class=\"line\"></span><br><span class=\"line\">sort -u:对文本进行排序，去重，并对重复的只保留一份。</span><br><span class=\"line\"></span><br><span class=\"line\">而在日常中，结合去重可能会产生更多的应用场景，即取交集、并集等</span><br><span class=\"line\"></span><br><span class=\"line\">大致来讲linux 主要的去重指令是uniq</span><br><span class=\"line\"></span><br><span class=\"line\">##### uniq</span><br><span class=\"line\"></span><br><span class=\"line\">uniq的Options主要有</span><br><span class=\"line\">![540273a5039941a39598a747888f4948-image.png](&#x2F;&#x2F;img.wqkenqing.ren&#x2F;&#x2F;file&#x2F;2017&#x2F;7&#x2F;540273a5039941a39598a747888f4948-image.png)</span><br><span class=\"line\"></span><br><span class=\"line\">![10bff3119aaa49de976350596f94f4bf-image.png](&#x2F;&#x2F;img.wqkenqing.ren&#x2F;&#x2F;file&#x2F;2017&#x2F;7&#x2F;10bff3119aaa49de976350596f94f4bf-image.png)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">uniq :默认只是将重复的保留一行</span><br><span class=\"line\"></span><br><span class=\"line\">而通过uniq实现交集与并集主要通过-d与-u实现</span><br><span class=\"line\"></span><br><span class=\"line\">uniq -d是只显示重复出现的行列</span><br><span class=\"line\">uniq -u是只显示不重复的列</span><br><span class=\"line\"></span><br><span class=\"line\">这里要注意uniq -f -s的使用</span><br><span class=\"line\">uniq -f nubmber :即指定忽略多少栏位开如计重</span><br><span class=\"line\"></span><br><span class=\"line\">uniq -s number:即指定忽略多少字任开始计重</span><br><span class=\"line\"> uniq -f -s :同时出现时则按先按栏位移，再按字符移。</span><br><span class=\"line\"></span><br><span class=\"line\">通过uniq实现去重要先排序</span><br><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\">针对时常出现的应用场景提供一个思路</span><br><span class=\"line\">两个文本中有重复内容，但只想去掉前一个文件与后一个文件中的重复内容，保留前一个文件中的非重复内容</span><br><span class=\"line\">可以通过</span><br><span class=\"line\"></span><br><span class=\"line\">sort file1 file2 | uniq  -d &gt;temp</span><br><span class=\"line\"></span><br><span class=\"line\">sort file1 temp|uniq -u</span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;即思路是:先将两个文件中的重复内容找出并写入临时文件，再将前一个文件与临时文件合并，排序去重，保留只出现一次的文件内容</span><br></pre></td></tr></table></figure>\n\n\n<hr>\n<h5 id=\"其它去重方式\"><a href=\"#其它去重方式\" class=\"headerlink\" title=\"其它去重方式\"></a>其它去重方式</h5><p>要去重，通过java方式也能轻松实现<br>即主要利用set等的非重复内容的特性。进行实现</p>\n<h3 id=\"切割\"><a href=\"#切割\" class=\"headerlink\" title=\"切割\"></a>切割</h3><p>即将文件进行切割，出于取样，或测试的需求考虑，可能需要从大文本中切割出一些小文件来。<br>对文件的切割也有很多实现方式<br>但从实现方式上更推荐linux指令式</p>\n<h4 id=\"切割linux指令式\"><a href=\"#切割linux指令式\" class=\"headerlink\" title=\"切割linux指令式\"></a>切割linux指令式</h4><p>涉及到切割的linux指令主要有split</p>\n<p>split命令可以将一个大文件分割成很多个小文件，有时需要将文件分割成更小的片段，比如为提高可读性，生成日志等。</p>\n<p><img src=\"./1493197221096.png\" alt=\"Alt text\"></p>\n<p>具体实现都是指令式，需要注意的地方较少，不记得时则翻阅相关文档</p>\n<h4 id=\"切割的其它方式\"><a href=\"#切割的其它方式\" class=\"headerlink\" title=\"切割的其它方式\"></a>切割的其它方式</h4><p>主要擅长的还有java方式</p>\n<hr>\n<h3 id=\"打乱排序\"><a href=\"#打乱排序\" class=\"headerlink\" title=\"打乱排序\"></a>打乱排序</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">打乱排序主要用的方式有awk与excel的方式</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"awk方式\"><a href=\"#awk方式\" class=\"headerlink\" title=\"awk方式\"></a>awk方式</h4><p>awk ‘BEGIN{ 100000*srand();}{ printf “%s %s\\n”, rand(), $0}’  t |sort -k1n | awk ‘{gsub($1FS,””); print $0}’</p>\n<h4 id=\"excel方式\"><a href=\"#excel方式\" class=\"headerlink\" title=\"excel方式\"></a>excel方式</h4><p>即通过在文本中再另加一列，生成随机数，然后对随机数列进行排序从列达到打乱的效果</p>\n<hr>\n<h3 id=\"模糊匹配\"><a href=\"#模糊匹配\" class=\"headerlink\" title=\"模糊匹配\"></a>模糊匹配</h3><p><code>文本的模糊匹配有较多应该场景,可以再多总结</code></p>\n<p>模糊匹配主要有在shell脚本中针对contains操作</p>\n<p>和vim中的匹配操作</p>\n<hr>"},{"title":"String StringBuffer StringBuilder","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n\n<!--more-->\n### String StringBuffer StringBuilder\n* String s =new String(\"ok\")\n*\n（1）String ok1=new String(“ok”);\n（2）String ok2=“ok”;\n我相信很多人都知道这两种方式定义字符串，但他们之间的差别又有多少人清楚呢。画出这两个字符串的内存示意图：\n\n```\nString ok1=new String(“ok”)。首先会在堆内存申请一块内存存储字符串ok,ok1指向其内存块对象。同时还会检查字符串常量池中是否含有ok字符串,若没有则添加ok到字符串常量池中。所以 new String()可能会创建两个对象.\n```\n\n     String ok2=“ok”。 先检查字符串常量池中是否含有ok字符串,如果有则直接指向, 没有则在字符串常量池添加ok字符串并指向它.所以这种方法最多创建一个对象，有可能不创建对象所以String ok1=new String(“ok”);//创建了两个对象String ok2=“ok”;//没有创建对象\n\n`比较类中的数值是否相等使用equals(),比较两个包装类的引用是否指向同一个对象时用==`\n\n\n```\nString ok=\"ok\";\nString ok1=new String(\"ok\");\nSystem.out.println(ok==ok1);//fasle\n```\n明显不是同一个对象，一个指向字符串常量池，一个指向new出来的堆内存块，new的字符串在编译期是无法确定的。所以输出false\n\n```\nString ok=\"apple1\";\nString ok1=\"apple\"+1;\nSystem.out.println(ok==ok1);//true\n```\n\n    String ok=\"apple1\";\n    int temp=1;\n    String ok1=\"apple\"+temp;\n    System.out.println(ok==ok1)\n\n#### Intern()方法\n但我们可以通过intern()方法扩展常量池。\n         intern()是扩充常量池的一个方法,当一个String实例str调用intern()方法时,java会检查常量池中是否有相同的字符串,如果有则返回其引用,如果没有则在常量池中增加一个str字符串并返回它的引用。\n\n`String类具有immutable(不能改变)性质,当String变量需要经常变换时,会产生很多变量值,应考虑使用StringBuffer提高效率。在开发时，注意String的创建方法`\n\n`使用System.out.println(obj.hashcode())输出的时对象的哈希码，\n而非内存地址。在Java中是不可能得到对象真正的内存地址的，因为Java中堆是由JVM管理的不能直接操作。\n只能说此时打印出的Hash码表示了该对象在JAVA虚拟机中的内存位置，\nJava虚拟机会根据该hash码最终在真正的的堆空间中给该对象分配一个地址.\n但是该地址 是不能通过java提供的api获取的\n`\n+ String变量连接新字符串会改变hashCode值，变量是在JVM中“连接——断开”；\n+ StringBuffer变量连接新字符串不会改变hashCode值，因为变量的堆地址不变。\n+ StringBuilder变量连接新字符串不会改变hashCode值，因为变量的堆地址不变。\n\n#### 比较String、StringBuffer、StringBuilder性能\n\n+ String类由于Java中的共享设计，在修改变量值时使其反复改变栈中的对于堆的引用地址，所以性能低。\n+ StringBuilder是线性不安全的，适合于单线程操作，其性能比StringBuffer略高。\n+ StringBuffer和StringBuilder类设计时改变其值，其堆内存的地址不变，避免了反复修改栈引用的地址，其性能高。\n\n当String使用引号创建字符串时，会先去字符串池中找，找到了就返回，找不到就在字符串池中增加一个然后返回，这样由于共享提高了性能。\n\n 而new String()无论内容是否已经存在，都会开辟新的堆空间，栈中的堆内存也会改变。\n\n性能简介\nStringBuilder>StringBuffer>String\n\n\nhttp://www.jb51.net/article/78057.htm\n\n\nStringBuffer中的setLength与delete的效率比较\n+ 前者主要是通过将底层的storage数组长度设置为0\n+ 后者则是另复制一份至另一空间，长度设为0\n所以后则的效率会相对慢一点","source":"_posts/王阁/技术/hexo/oldblog/blog2.md","raw":"---\n\ntitle: String StringBuffer StringBuilder\ndate: 2019-07-16\ntags:\n\n---\n此处简介\n\n<!--more-->\n### String StringBuffer StringBuilder\n* String s =new String(\"ok\")\n*\n（1）String ok1=new String(“ok”);\n（2）String ok2=“ok”;\n我相信很多人都知道这两种方式定义字符串，但他们之间的差别又有多少人清楚呢。画出这两个字符串的内存示意图：\n\n```\nString ok1=new String(“ok”)。首先会在堆内存申请一块内存存储字符串ok,ok1指向其内存块对象。同时还会检查字符串常量池中是否含有ok字符串,若没有则添加ok到字符串常量池中。所以 new String()可能会创建两个对象.\n```\n\n     String ok2=“ok”。 先检查字符串常量池中是否含有ok字符串,如果有则直接指向, 没有则在字符串常量池添加ok字符串并指向它.所以这种方法最多创建一个对象，有可能不创建对象所以String ok1=new String(“ok”);//创建了两个对象String ok2=“ok”;//没有创建对象\n\n`比较类中的数值是否相等使用equals(),比较两个包装类的引用是否指向同一个对象时用==`\n\n\n```\nString ok=\"ok\";\nString ok1=new String(\"ok\");\nSystem.out.println(ok==ok1);//fasle\n```\n明显不是同一个对象，一个指向字符串常量池，一个指向new出来的堆内存块，new的字符串在编译期是无法确定的。所以输出false\n\n```\nString ok=\"apple1\";\nString ok1=\"apple\"+1;\nSystem.out.println(ok==ok1);//true\n```\n\n    String ok=\"apple1\";\n    int temp=1;\n    String ok1=\"apple\"+temp;\n    System.out.println(ok==ok1)\n\n#### Intern()方法\n但我们可以通过intern()方法扩展常量池。\n         intern()是扩充常量池的一个方法,当一个String实例str调用intern()方法时,java会检查常量池中是否有相同的字符串,如果有则返回其引用,如果没有则在常量池中增加一个str字符串并返回它的引用。\n\n`String类具有immutable(不能改变)性质,当String变量需要经常变换时,会产生很多变量值,应考虑使用StringBuffer提高效率。在开发时，注意String的创建方法`\n\n`使用System.out.println(obj.hashcode())输出的时对象的哈希码，\n而非内存地址。在Java中是不可能得到对象真正的内存地址的，因为Java中堆是由JVM管理的不能直接操作。\n只能说此时打印出的Hash码表示了该对象在JAVA虚拟机中的内存位置，\nJava虚拟机会根据该hash码最终在真正的的堆空间中给该对象分配一个地址.\n但是该地址 是不能通过java提供的api获取的\n`\n+ String变量连接新字符串会改变hashCode值，变量是在JVM中“连接——断开”；\n+ StringBuffer变量连接新字符串不会改变hashCode值，因为变量的堆地址不变。\n+ StringBuilder变量连接新字符串不会改变hashCode值，因为变量的堆地址不变。\n\n#### 比较String、StringBuffer、StringBuilder性能\n\n+ String类由于Java中的共享设计，在修改变量值时使其反复改变栈中的对于堆的引用地址，所以性能低。\n+ StringBuilder是线性不安全的，适合于单线程操作，其性能比StringBuffer略高。\n+ StringBuffer和StringBuilder类设计时改变其值，其堆内存的地址不变，避免了反复修改栈引用的地址，其性能高。\n\n当String使用引号创建字符串时，会先去字符串池中找，找到了就返回，找不到就在字符串池中增加一个然后返回，这样由于共享提高了性能。\n\n 而new String()无论内容是否已经存在，都会开辟新的堆空间，栈中的堆内存也会改变。\n\n性能简介\nStringBuilder>StringBuffer>String\n\n\nhttp://www.jb51.net/article/78057.htm\n\n\nStringBuffer中的setLength与delete的效率比较\n+ 前者主要是通过将底层的storage数组长度设置为0\n+ 后者则是另复制一份至另一空间，长度设为0\n所以后则的效率会相对慢一点","slug":"王阁/技术/hexo/oldblog/blog2","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfn004au6pwgn54gh0i","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n<h3 id=\"String-StringBuffer-StringBuilder\"><a href=\"#String-StringBuffer-StringBuilder\" class=\"headerlink\" title=\"String StringBuffer StringBuilder\"></a>String StringBuffer StringBuilder</h3><ul>\n<li>String s =new String(“ok”)</li>\n<li>（1）String ok1=new String(“ok”);<br>（2）String ok2=“ok”;<br>我相信很多人都知道这两种方式定义字符串，但他们之间的差别又有多少人清楚呢。画出这两个字符串的内存示意图：</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String ok1&#x3D;new String(“ok”)。首先会在堆内存申请一块内存存储字符串ok,ok1指向其内存块对象。同时还会检查字符串常量池中是否含有ok字符串,若没有则添加ok到字符串常量池中。所以 new String()可能会创建两个对象.</span><br></pre></td></tr></table></figure>\n\n<pre><code>String ok2=“ok”。 先检查字符串常量池中是否含有ok字符串,如果有则直接指向, 没有则在字符串常量池添加ok字符串并指向它.所以这种方法最多创建一个对象，有可能不创建对象所以String ok1=new String(“ok”);//创建了两个对象String ok2=“ok”;//没有创建对象</code></pre><p><code>比较类中的数值是否相等使用equals(),比较两个包装类的引用是否指向同一个对象时用==</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String ok&#x3D;&quot;ok&quot;;</span><br><span class=\"line\">String ok1&#x3D;new String(&quot;ok&quot;);</span><br><span class=\"line\">System.out.println(ok&#x3D;&#x3D;ok1);&#x2F;&#x2F;fasle</span><br></pre></td></tr></table></figure>\n<p>明显不是同一个对象，一个指向字符串常量池，一个指向new出来的堆内存块，new的字符串在编译期是无法确定的。所以输出false</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String ok&#x3D;&quot;apple1&quot;;</span><br><span class=\"line\">String ok1&#x3D;&quot;apple&quot;+1;</span><br><span class=\"line\">System.out.println(ok&#x3D;&#x3D;ok1);&#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>\n\n<pre><code>String ok=&quot;apple1&quot;;\nint temp=1;\nString ok1=&quot;apple&quot;+temp;\nSystem.out.println(ok==ok1)</code></pre><h4 id=\"Intern-方法\"><a href=\"#Intern-方法\" class=\"headerlink\" title=\"Intern()方法\"></a>Intern()方法</h4><p>但我们可以通过intern()方法扩展常量池。<br>         intern()是扩充常量池的一个方法,当一个String实例str调用intern()方法时,java会检查常量池中是否有相同的字符串,如果有则返回其引用,如果没有则在常量池中增加一个str字符串并返回它的引用。</p>\n<p><code>String类具有immutable(不能改变)性质,当String变量需要经常变换时,会产生很多变量值,应考虑使用StringBuffer提高效率。在开发时，注意String的创建方法</code></p>\n<p><code>使用System.out.println(obj.hashcode())输出的时对象的哈希码，\n而非内存地址。在Java中是不可能得到对象真正的内存地址的，因为Java中堆是由JVM管理的不能直接操作。\n只能说此时打印出的Hash码表示了该对象在JAVA虚拟机中的内存位置，\nJava虚拟机会根据该hash码最终在真正的的堆空间中给该对象分配一个地址.\n但是该地址 是不能通过java提供的api获取的</code></p>\n<ul>\n<li>String变量连接新字符串会改变hashCode值，变量是在JVM中“连接——断开”；</li>\n<li>StringBuffer变量连接新字符串不会改变hashCode值，因为变量的堆地址不变。</li>\n<li>StringBuilder变量连接新字符串不会改变hashCode值，因为变量的堆地址不变。</li>\n</ul>\n<h4 id=\"比较String、StringBuffer、StringBuilder性能\"><a href=\"#比较String、StringBuffer、StringBuilder性能\" class=\"headerlink\" title=\"比较String、StringBuffer、StringBuilder性能\"></a>比较String、StringBuffer、StringBuilder性能</h4><ul>\n<li>String类由于Java中的共享设计，在修改变量值时使其反复改变栈中的对于堆的引用地址，所以性能低。</li>\n<li>StringBuilder是线性不安全的，适合于单线程操作，其性能比StringBuffer略高。</li>\n<li>StringBuffer和StringBuilder类设计时改变其值，其堆内存的地址不变，避免了反复修改栈引用的地址，其性能高。</li>\n</ul>\n<p>当String使用引号创建字符串时，会先去字符串池中找，找到了就返回，找不到就在字符串池中增加一个然后返回，这样由于共享提高了性能。</p>\n<p> 而new String()无论内容是否已经存在，都会开辟新的堆空间，栈中的堆内存也会改变。</p>\n<p>性能简介<br>StringBuilder&gt;StringBuffer&gt;String</p>\n<p><a href=\"http://www.jb51.net/article/78057.htm\" target=\"_blank\" rel=\"noopener\">http://www.jb51.net/article/78057.htm</a></p>\n<p>StringBuffer中的setLength与delete的效率比较</p>\n<ul>\n<li>前者主要是通过将底层的storage数组长度设置为0</li>\n<li>后者则是另复制一份至另一空间，长度设为0<br>所以后则的效率会相对慢一点</li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h3 id=\"String-StringBuffer-StringBuilder\"><a href=\"#String-StringBuffer-StringBuilder\" class=\"headerlink\" title=\"String StringBuffer StringBuilder\"></a>String StringBuffer StringBuilder</h3><ul>\n<li>String s =new String(“ok”)</li>\n<li>（1）String ok1=new String(“ok”);<br>（2）String ok2=“ok”;<br>我相信很多人都知道这两种方式定义字符串，但他们之间的差别又有多少人清楚呢。画出这两个字符串的内存示意图：</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String ok1&#x3D;new String(“ok”)。首先会在堆内存申请一块内存存储字符串ok,ok1指向其内存块对象。同时还会检查字符串常量池中是否含有ok字符串,若没有则添加ok到字符串常量池中。所以 new String()可能会创建两个对象.</span><br></pre></td></tr></table></figure>\n\n<pre><code>String ok2=“ok”。 先检查字符串常量池中是否含有ok字符串,如果有则直接指向, 没有则在字符串常量池添加ok字符串并指向它.所以这种方法最多创建一个对象，有可能不创建对象所以String ok1=new String(“ok”);//创建了两个对象String ok2=“ok”;//没有创建对象</code></pre><p><code>比较类中的数值是否相等使用equals(),比较两个包装类的引用是否指向同一个对象时用==</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String ok&#x3D;&quot;ok&quot;;</span><br><span class=\"line\">String ok1&#x3D;new String(&quot;ok&quot;);</span><br><span class=\"line\">System.out.println(ok&#x3D;&#x3D;ok1);&#x2F;&#x2F;fasle</span><br></pre></td></tr></table></figure>\n<p>明显不是同一个对象，一个指向字符串常量池，一个指向new出来的堆内存块，new的字符串在编译期是无法确定的。所以输出false</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String ok&#x3D;&quot;apple1&quot;;</span><br><span class=\"line\">String ok1&#x3D;&quot;apple&quot;+1;</span><br><span class=\"line\">System.out.println(ok&#x3D;&#x3D;ok1);&#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>\n\n<pre><code>String ok=&quot;apple1&quot;;\nint temp=1;\nString ok1=&quot;apple&quot;+temp;\nSystem.out.println(ok==ok1)</code></pre><h4 id=\"Intern-方法\"><a href=\"#Intern-方法\" class=\"headerlink\" title=\"Intern()方法\"></a>Intern()方法</h4><p>但我们可以通过intern()方法扩展常量池。<br>         intern()是扩充常量池的一个方法,当一个String实例str调用intern()方法时,java会检查常量池中是否有相同的字符串,如果有则返回其引用,如果没有则在常量池中增加一个str字符串并返回它的引用。</p>\n<p><code>String类具有immutable(不能改变)性质,当String变量需要经常变换时,会产生很多变量值,应考虑使用StringBuffer提高效率。在开发时，注意String的创建方法</code></p>\n<p><code>使用System.out.println(obj.hashcode())输出的时对象的哈希码，\n而非内存地址。在Java中是不可能得到对象真正的内存地址的，因为Java中堆是由JVM管理的不能直接操作。\n只能说此时打印出的Hash码表示了该对象在JAVA虚拟机中的内存位置，\nJava虚拟机会根据该hash码最终在真正的的堆空间中给该对象分配一个地址.\n但是该地址 是不能通过java提供的api获取的</code></p>\n<ul>\n<li>String变量连接新字符串会改变hashCode值，变量是在JVM中“连接——断开”；</li>\n<li>StringBuffer变量连接新字符串不会改变hashCode值，因为变量的堆地址不变。</li>\n<li>StringBuilder变量连接新字符串不会改变hashCode值，因为变量的堆地址不变。</li>\n</ul>\n<h4 id=\"比较String、StringBuffer、StringBuilder性能\"><a href=\"#比较String、StringBuffer、StringBuilder性能\" class=\"headerlink\" title=\"比较String、StringBuffer、StringBuilder性能\"></a>比较String、StringBuffer、StringBuilder性能</h4><ul>\n<li>String类由于Java中的共享设计，在修改变量值时使其反复改变栈中的对于堆的引用地址，所以性能低。</li>\n<li>StringBuilder是线性不安全的，适合于单线程操作，其性能比StringBuffer略高。</li>\n<li>StringBuffer和StringBuilder类设计时改变其值，其堆内存的地址不变，避免了反复修改栈引用的地址，其性能高。</li>\n</ul>\n<p>当String使用引号创建字符串时，会先去字符串池中找，找到了就返回，找不到就在字符串池中增加一个然后返回，这样由于共享提高了性能。</p>\n<p> 而new String()无论内容是否已经存在，都会开辟新的堆空间，栈中的堆内存也会改变。</p>\n<p>性能简介<br>StringBuilder&gt;StringBuffer&gt;String</p>\n<p><a href=\"http://www.jb51.net/article/78057.htm\" target=\"_blank\" rel=\"noopener\">http://www.jb51.net/article/78057.htm</a></p>\n<p>StringBuffer中的setLength与delete的效率比较</p>\n<ul>\n<li>前者主要是通过将底层的storage数组长度设置为0</li>\n<li>后者则是另复制一份至另一空间，长度设为0<br>所以后则的效率会相对慢一点</li>\n</ul>"},{"title":"hbase","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n<!--more-->\n\nhbase shell命令            \t                描述\nalter\t    修改列族（column family）模式\ncount\t统计表中行的数量\ncreate\t创建表\ndescribe\t显示表相关的详细信息\ndelete\t删除指定对象的值（可以为表，行，列对应的值，另外也可以指定时间戳的值）\ndeleteall\t删除指定行的所有元素值\ndisable\t使表无效\ndrop\t删除表\nenable\t使表有效\nexists\t测试表是否存在\nexit\t退出hbase shell\nget\t获取行或单元（cell）的值\nincr\t增加指定表，行或列的值\nlist\t列出hbase中存在的所有表\nput\t向指向的表单元添加值\ntools\t列出hbase所支持的工具\nscan\t通过对表的扫描来获取对用的值\nstatus\t返回hbase集群的状态信息\nshutdown\t关闭hbase集群（与exit不同）\ntruncate\t重新创建指定表\nversion\t返回hbase版本信息","source":"_posts/王阁/技术/hexo/oldblog/blog20.md","raw":"---\n\ntitle: hbase\ndate: 2019-07-16\ntags: \n\n---\n此处简介\n<!--more-->\n\nhbase shell命令            \t                描述\nalter\t    修改列族（column family）模式\ncount\t统计表中行的数量\ncreate\t创建表\ndescribe\t显示表相关的详细信息\ndelete\t删除指定对象的值（可以为表，行，列对应的值，另外也可以指定时间戳的值）\ndeleteall\t删除指定行的所有元素值\ndisable\t使表无效\ndrop\t删除表\nenable\t使表有效\nexists\t测试表是否存在\nexit\t退出hbase shell\nget\t获取行或单元（cell）的值\nincr\t增加指定表，行或列的值\nlist\t列出hbase中存在的所有表\nput\t向指向的表单元添加值\ntools\t列出hbase所支持的工具\nscan\t通过对表的扫描来获取对用的值\nstatus\t返回hbase集群的状态信息\nshutdown\t关闭hbase集群（与exit不同）\ntruncate\t重新创建指定表\nversion\t返回hbase版本信息","slug":"王阁/技术/hexo/oldblog/blog20","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfn004bu6pw2s3nep3d","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<p>hbase shell命令                                描述<br>alter        修改列族（column family）模式<br>count    统计表中行的数量<br>create    创建表<br>describe    显示表相关的详细信息<br>delete    删除指定对象的值（可以为表，行，列对应的值，另外也可以指定时间戳的值）<br>deleteall    删除指定行的所有元素值<br>disable    使表无效<br>drop    删除表<br>enable    使表有效<br>exists    测试表是否存在<br>exit    退出hbase shell<br>get    获取行或单元（cell）的值<br>incr    增加指定表，行或列的值<br>list    列出hbase中存在的所有表<br>put    向指向的表单元添加值<br>tools    列出hbase所支持的工具<br>scan    通过对表的扫描来获取对用的值<br>status    返回hbase集群的状态信息<br>shutdown    关闭hbase集群（与exit不同）<br>truncate    重新创建指定表<br>version    返回hbase版本信息</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<p>hbase shell命令                                描述<br>alter        修改列族（column family）模式<br>count    统计表中行的数量<br>create    创建表<br>describe    显示表相关的详细信息<br>delete    删除指定对象的值（可以为表，行，列对应的值，另外也可以指定时间戳的值）<br>deleteall    删除指定行的所有元素值<br>disable    使表无效<br>drop    删除表<br>enable    使表有效<br>exists    测试表是否存在<br>exit    退出hbase shell<br>get    获取行或单元（cell）的值<br>incr    增加指定表，行或列的值<br>list    列出hbase中存在的所有表<br>put    向指向的表单元添加值<br>tools    列出hbase所支持的工具<br>scan    通过对表的扫描来获取对用的值<br>status    返回hbase集群的状态信息<br>shutdown    关闭hbase集群（与exit不同）<br>truncate    重新创建指定表<br>version    返回hbase版本信息</p>"},{"title":"java---GC机制","date":"2019-07-15T16:00:00.000Z","_content":"\n此处简介\n\n<!--more-->\n\n### java---GC机制\nJVM会有一个运行时数据区来管理内存\n+ 程序计数器(Program Counter Register)\n+ 虚拟机栈(VM Stack)\n+ 本地方法栈(Native Method Stack)\n+ 方法区(Method Area)\n+ 堆(Heap)\n\n#### What? -- 哪些内存需要回收？\n而其中程序计数器、虚拟机栈、本地方法栈是每个线程私有的内存空间，随线程而生，随线程而亡。\n例如栈中每一个栈帧中分配多少内存基本上在类结构去诶是哪个下来时就已知了，因此这3个区域的内存分配和回收都是确定的，无需考虑内存回收的问题。\n\n但方法区和堆就不同了，一个接口的多个实现类需要的内存可能不一样，我们只有在程序运行期间才会知道会创建哪些对象，这部分内存的分配和回收都是动态的，GC主要关注的是这部分内存。\n\n---\n总而言之，GC主要进行回收的内存是JVM中的方法区和堆；\n涉及到多线程(指堆)、多个对该对象不同类型的引用(指方法区)，才会涉及GC的回收。\n\n---\n#### When? -- 什么时候回收？\n堆\n```\n在面试中经常会碰到这样一个问题（事实上笔者也碰到过）：如何判断一个对象已经死去？\n\n很容易想到的一个答案是：对一个对象添加引用计数器。每当有地方引用它时，计数器值加1；当引用失效时，计数器值减1.而当计数器的值为0时这个对象就不会再被使用，判断为已死。是不是简单又直观。然而，很遗憾。这种做法是错误的！（面试时可千万别这样回答哦，我就是不假思索这样回答，然后就。。）为什么是错的呢？事实上，用引用计数法确实在大部分情况下是一个不错的解决方案，而在实际的应用中也有不少案例，但它却无法解决对象之间的循环引用问题。比如对象A中有一个字段指向了对象B，而对象B中也有一个字段指向了对象A，而事实上他们俩都不再使用，但计数器的值永远都不可能为0，也就不会被回收，然后就发生了内存泄露。。\n```\n\n在Java，C#等语言中，比较主流的判定一个对象已死的方法是：<Strong>可达性分析(Reachability Analysis).</Strong>\n所有生成的对象都是一个称为\"GC Roots\"的根的子树。从GC Roots开始向下搜索，搜索所经过的路径称为引用链(Reference Chain)，当一个对象到GC Roots没有任何引用链可以到达时，就称这个对象是不可达的（不可引用的），也就是可以被GC回收了\n![Alt text](./1483447208180.png)\n\n```\n无论是引用计数器还是可达性分析，判定对象是否存活都与引用有关！那么，如何定义对象的引用呢？\n\n```\n\n+ 强引用(Strong Reference):Object obj = new Object();只要强引用还存在，GC永远不会回收掉被引用的对象。\n+ 软引用(Soft Reference)：描述一些还有用但非必需的对象。在系统将会发生内存溢出之前，会把这些对象列入回收范围进行二次回收（即系统将会发生内存溢出了，才会对他们进行回收。）\n+ 弱引用(Weak Reference):程度比软引用还要弱一些。这些对象只能生存到下次GC之前。当GC工作时，无论内存是否足够都会将其回收（即只要进行GC，就会对他们进行回收。）\n+ 虚引用(Phantom Reference):一个对象是否存在虚引用，完全不会对其生存时间构成影响。\n\n<Strong>方法区</strong>\nWhat部分我们已经提到，GC主要回收的是堆和方法区中的内存，而上面的How主要是针对对象的回收，他们一般位于堆内。那么，方法区中的东西该怎么回收呢？\n\n关于方法区中需要回收的是一些废弃的常量和无用的类\n+ 废弃的常量的回收。这里看引用计数就可以了。没有对象引用该常量就可以放心的回收了。\n+ 无用的类的回收。什么是无用的类呢？\n\n* 该类所有的实例都已经被回收。也就是Java堆中不存在该类的任何实例；\n* 加载该类的ClassLoader已经被回收；\n* 该类对应的java.lang.Class对象没有任何地方被引用，无法在任何地方通过反射访问该类的方法。\n\n```\n总而言之，对于堆中的对象，主要用可达性分析判断一个对象是否还存在引用，如果该对象没有任何引用就应该被回收。而根据我们实际对引用的不同需求，又分成了4中引用，每种引用的回收机制也是不同的。\n对于方法区中的常量和类，当一个常量没有任何对象引用它，它就可以被回收了。而对于类，如果可以判定它为无用类，就可以被回收了。\n```\n#### How? -- 如何回收？\n##### 标记-清除(Mark-Sweep)算法\n分为两个阶段：首先标记出所有需要回收的对象，在标记完成后统一回收所有被标记的对象。\n缺点：效率问题，标记和清除两个过程的效率都不高；空间问题，会产生很多碎片。\n##### 复制算法\n\n将可用内存按容量划分为大小相等的两块，每次只用其中一块。当这一块用完了，就将还存活的对象复制到另外一块上面，然后把原始空间全部回收。高效、简单。\n缺点：将内存缩小为原来的一半。\n\n##### 标记-整理(Mark-Compat)算法\n标记过程与标记-清除算法过程一样，但后面不是简单的清除，而是让所有存活的对象都向一端移动，然后直接清除掉端边界以外的内存。\n\n##### 分代收集(Generational Collection)算法\n* 新生代中，每次垃圾收集时都有大批对象死去，只有少量存活，就选用复制算法，只需要付出少量存活对象的复制成本就可以完成收集；\n* 老年代中，其存活率较高、没有额外空间对它进行分配担保，就应该使用“标记-整理”或“标记-清理”算法进行回收。\n####一些收集器\n##### Serial收集器\n单线程收集器，表示在它进行垃圾收集时，必须暂停其他所有的工作线程，直到它收集结束。\"Stop The World\".\n##### ParNew收集器\n实际就是Serial收集器的多线程版本。\n* 并发(Parallel):指多条垃圾收集线程并行工作，但此时用户线程仍然处于等待状态；\n* 并行(Concurrent):指用户线程与垃圾收集线程同时执行，用户程序在继续运行，而垃圾收集程序运行于另一个CPU上。\n##### Parallel Scavenge收集器\n该收集器比较关注吞吐量(Throughout)(CPU用于用户代码的时间与CPU总消耗时间的比值)，保证吞吐量在一个可控的范围内。\n##### CMS(Concurrent Mark Sweep)收集器\nCMS收集器是一种以获得最短停顿时间为目标的收集器。\n##### G1(Garbage First)收集器\n从JDK1.7 Update 14之后的HotSpot虚拟机正式提供了商用的G1收集器，与其他收集器相比，它具有如下优点：并行与并发；分代收集；空间整合；可预测的停顿等。\n\n本部分主要分析了三种不同的垃圾回收算法：Mark-Sweep, Copy, Mark-Compact. 每种算法都有不同的优缺点，也有不同的适用范围。而JVM中对垃圾回收器并没有严格的要求，不同的收集器会结合多个算法进行垃圾回收。\n#####内存分配\nJava技术体系中所提倡的自动内存管理最终可以归结为自动化的解决2个问题：给对象分配内存以及回收分配给对象的内存。\n#####对象优先在Eden分配\n大多数情况下，对象在新生代Eden区分配。当Eden区没有足够的内存时，虚拟机将发起一次Minor GC。\n* Minor GC(新生代GC):指发生在新生代的垃圾收集动作，因为Java对象大多都具备朝生夕灭的特性，所以Minor GC发生的非常频繁。\n* Full GC/Major GC(老年代GC):指发生在老年代的GC，出现了Major GC，经常会伴随至少一次的Minor GC。\n##### 大对象直接进老年代\n大对象是指需要大量连续内存空间的Java对象（例如很长的字符串以及数组）。\n##### 长期存活的对象将进入老年代\nJVM为每个对象定义一个对象年龄计数器。\n+ 如果对象在Eden出生并经历过第一次Minor GC后仍然存活，并且能够被Survivor容纳，则应该被移动到Survivor空间中，并且年龄对象设置为1；\n+ 对象在Survivor区中每熬过一次Minor GC，年龄就会增加1岁，当它的年龄增加到一定程度(默认为15岁，可通过参数-XX:MaxTenuringThreshold设置)，就会被晋升到老年代中。\n+ 要注意的是：JVM并不是永远的要求对象的年龄必须达到MaxTenuringThreshold才能晋升老年代，如果在Survivor空间中相同年龄所有对象大小的总和大于Survivor空间的一般，年龄大于等于该年龄的对象就可以直接进入老年代，无需等到MaxTenuringThreshold中要求的年龄。\n##### 空间分配担保\n+ 在发生Minor GC之前，虚拟机会先检查老年代最大可用的连续空间是否大于新生代所有对象总空间，如果这个条件成立，则进行Minor GC是安全的；\n+ 如果不成立，则虚拟机会查看HandlePromotionFailure设置值是否允许担保失败。如果允许，则急促检查老年代最大可用连续空间是否大于历次晋升到老年代对象的平均大小，如果大于，将尝试着进行一次Minor GC，尽管它是有风险的；\n+ 如果小于或者HandePromotionFailure设置为不允许冒险，则这时要改为进行一次Full GC.","source":"_posts/王阁/技术/hexo/oldblog/blog11.md","raw":"---\n\ntitle: java---GC机制\ndate: 2019-07-16\ntags:\n\n---\n\n此处简介\n\n<!--more-->\n\n### java---GC机制\nJVM会有一个运行时数据区来管理内存\n+ 程序计数器(Program Counter Register)\n+ 虚拟机栈(VM Stack)\n+ 本地方法栈(Native Method Stack)\n+ 方法区(Method Area)\n+ 堆(Heap)\n\n#### What? -- 哪些内存需要回收？\n而其中程序计数器、虚拟机栈、本地方法栈是每个线程私有的内存空间，随线程而生，随线程而亡。\n例如栈中每一个栈帧中分配多少内存基本上在类结构去诶是哪个下来时就已知了，因此这3个区域的内存分配和回收都是确定的，无需考虑内存回收的问题。\n\n但方法区和堆就不同了，一个接口的多个实现类需要的内存可能不一样，我们只有在程序运行期间才会知道会创建哪些对象，这部分内存的分配和回收都是动态的，GC主要关注的是这部分内存。\n\n---\n总而言之，GC主要进行回收的内存是JVM中的方法区和堆；\n涉及到多线程(指堆)、多个对该对象不同类型的引用(指方法区)，才会涉及GC的回收。\n\n---\n#### When? -- 什么时候回收？\n堆\n```\n在面试中经常会碰到这样一个问题（事实上笔者也碰到过）：如何判断一个对象已经死去？\n\n很容易想到的一个答案是：对一个对象添加引用计数器。每当有地方引用它时，计数器值加1；当引用失效时，计数器值减1.而当计数器的值为0时这个对象就不会再被使用，判断为已死。是不是简单又直观。然而，很遗憾。这种做法是错误的！（面试时可千万别这样回答哦，我就是不假思索这样回答，然后就。。）为什么是错的呢？事实上，用引用计数法确实在大部分情况下是一个不错的解决方案，而在实际的应用中也有不少案例，但它却无法解决对象之间的循环引用问题。比如对象A中有一个字段指向了对象B，而对象B中也有一个字段指向了对象A，而事实上他们俩都不再使用，但计数器的值永远都不可能为0，也就不会被回收，然后就发生了内存泄露。。\n```\n\n在Java，C#等语言中，比较主流的判定一个对象已死的方法是：<Strong>可达性分析(Reachability Analysis).</Strong>\n所有生成的对象都是一个称为\"GC Roots\"的根的子树。从GC Roots开始向下搜索，搜索所经过的路径称为引用链(Reference Chain)，当一个对象到GC Roots没有任何引用链可以到达时，就称这个对象是不可达的（不可引用的），也就是可以被GC回收了\n![Alt text](./1483447208180.png)\n\n```\n无论是引用计数器还是可达性分析，判定对象是否存活都与引用有关！那么，如何定义对象的引用呢？\n\n```\n\n+ 强引用(Strong Reference):Object obj = new Object();只要强引用还存在，GC永远不会回收掉被引用的对象。\n+ 软引用(Soft Reference)：描述一些还有用但非必需的对象。在系统将会发生内存溢出之前，会把这些对象列入回收范围进行二次回收（即系统将会发生内存溢出了，才会对他们进行回收。）\n+ 弱引用(Weak Reference):程度比软引用还要弱一些。这些对象只能生存到下次GC之前。当GC工作时，无论内存是否足够都会将其回收（即只要进行GC，就会对他们进行回收。）\n+ 虚引用(Phantom Reference):一个对象是否存在虚引用，完全不会对其生存时间构成影响。\n\n<Strong>方法区</strong>\nWhat部分我们已经提到，GC主要回收的是堆和方法区中的内存，而上面的How主要是针对对象的回收，他们一般位于堆内。那么，方法区中的东西该怎么回收呢？\n\n关于方法区中需要回收的是一些废弃的常量和无用的类\n+ 废弃的常量的回收。这里看引用计数就可以了。没有对象引用该常量就可以放心的回收了。\n+ 无用的类的回收。什么是无用的类呢？\n\n* 该类所有的实例都已经被回收。也就是Java堆中不存在该类的任何实例；\n* 加载该类的ClassLoader已经被回收；\n* 该类对应的java.lang.Class对象没有任何地方被引用，无法在任何地方通过反射访问该类的方法。\n\n```\n总而言之，对于堆中的对象，主要用可达性分析判断一个对象是否还存在引用，如果该对象没有任何引用就应该被回收。而根据我们实际对引用的不同需求，又分成了4中引用，每种引用的回收机制也是不同的。\n对于方法区中的常量和类，当一个常量没有任何对象引用它，它就可以被回收了。而对于类，如果可以判定它为无用类，就可以被回收了。\n```\n#### How? -- 如何回收？\n##### 标记-清除(Mark-Sweep)算法\n分为两个阶段：首先标记出所有需要回收的对象，在标记完成后统一回收所有被标记的对象。\n缺点：效率问题，标记和清除两个过程的效率都不高；空间问题，会产生很多碎片。\n##### 复制算法\n\n将可用内存按容量划分为大小相等的两块，每次只用其中一块。当这一块用完了，就将还存活的对象复制到另外一块上面，然后把原始空间全部回收。高效、简单。\n缺点：将内存缩小为原来的一半。\n\n##### 标记-整理(Mark-Compat)算法\n标记过程与标记-清除算法过程一样，但后面不是简单的清除，而是让所有存活的对象都向一端移动，然后直接清除掉端边界以外的内存。\n\n##### 分代收集(Generational Collection)算法\n* 新生代中，每次垃圾收集时都有大批对象死去，只有少量存活，就选用复制算法，只需要付出少量存活对象的复制成本就可以完成收集；\n* 老年代中，其存活率较高、没有额外空间对它进行分配担保，就应该使用“标记-整理”或“标记-清理”算法进行回收。\n####一些收集器\n##### Serial收集器\n单线程收集器，表示在它进行垃圾收集时，必须暂停其他所有的工作线程，直到它收集结束。\"Stop The World\".\n##### ParNew收集器\n实际就是Serial收集器的多线程版本。\n* 并发(Parallel):指多条垃圾收集线程并行工作，但此时用户线程仍然处于等待状态；\n* 并行(Concurrent):指用户线程与垃圾收集线程同时执行，用户程序在继续运行，而垃圾收集程序运行于另一个CPU上。\n##### Parallel Scavenge收集器\n该收集器比较关注吞吐量(Throughout)(CPU用于用户代码的时间与CPU总消耗时间的比值)，保证吞吐量在一个可控的范围内。\n##### CMS(Concurrent Mark Sweep)收集器\nCMS收集器是一种以获得最短停顿时间为目标的收集器。\n##### G1(Garbage First)收集器\n从JDK1.7 Update 14之后的HotSpot虚拟机正式提供了商用的G1收集器，与其他收集器相比，它具有如下优点：并行与并发；分代收集；空间整合；可预测的停顿等。\n\n本部分主要分析了三种不同的垃圾回收算法：Mark-Sweep, Copy, Mark-Compact. 每种算法都有不同的优缺点，也有不同的适用范围。而JVM中对垃圾回收器并没有严格的要求，不同的收集器会结合多个算法进行垃圾回收。\n#####内存分配\nJava技术体系中所提倡的自动内存管理最终可以归结为自动化的解决2个问题：给对象分配内存以及回收分配给对象的内存。\n#####对象优先在Eden分配\n大多数情况下，对象在新生代Eden区分配。当Eden区没有足够的内存时，虚拟机将发起一次Minor GC。\n* Minor GC(新生代GC):指发生在新生代的垃圾收集动作，因为Java对象大多都具备朝生夕灭的特性，所以Minor GC发生的非常频繁。\n* Full GC/Major GC(老年代GC):指发生在老年代的GC，出现了Major GC，经常会伴随至少一次的Minor GC。\n##### 大对象直接进老年代\n大对象是指需要大量连续内存空间的Java对象（例如很长的字符串以及数组）。\n##### 长期存活的对象将进入老年代\nJVM为每个对象定义一个对象年龄计数器。\n+ 如果对象在Eden出生并经历过第一次Minor GC后仍然存活，并且能够被Survivor容纳，则应该被移动到Survivor空间中，并且年龄对象设置为1；\n+ 对象在Survivor区中每熬过一次Minor GC，年龄就会增加1岁，当它的年龄增加到一定程度(默认为15岁，可通过参数-XX:MaxTenuringThreshold设置)，就会被晋升到老年代中。\n+ 要注意的是：JVM并不是永远的要求对象的年龄必须达到MaxTenuringThreshold才能晋升老年代，如果在Survivor空间中相同年龄所有对象大小的总和大于Survivor空间的一般，年龄大于等于该年龄的对象就可以直接进入老年代，无需等到MaxTenuringThreshold中要求的年龄。\n##### 空间分配担保\n+ 在发生Minor GC之前，虚拟机会先检查老年代最大可用的连续空间是否大于新生代所有对象总空间，如果这个条件成立，则进行Minor GC是安全的；\n+ 如果不成立，则虚拟机会查看HandlePromotionFailure设置值是否允许担保失败。如果允许，则急促检查老年代最大可用连续空间是否大于历次晋升到老年代对象的平均大小，如果大于，将尝试着进行一次Minor GC，尽管它是有风险的；\n+ 如果小于或者HandePromotionFailure设置为不允许冒险，则这时要改为进行一次Full GC.","slug":"王阁/技术/hexo/oldblog/blog11","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfo004eu6pwgo9jdkwz","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h3 id=\"java—GC机制\"><a href=\"#java—GC机制\" class=\"headerlink\" title=\"java—GC机制\"></a>java—GC机制</h3><p>JVM会有一个运行时数据区来管理内存</p>\n<ul>\n<li>程序计数器(Program Counter Register)</li>\n<li>虚拟机栈(VM Stack)</li>\n<li>本地方法栈(Native Method Stack)</li>\n<li>方法区(Method Area)</li>\n<li>堆(Heap)</li>\n</ul>\n<h4 id=\"What-–-哪些内存需要回收？\"><a href=\"#What-–-哪些内存需要回收？\" class=\"headerlink\" title=\"What? – 哪些内存需要回收？\"></a>What? – 哪些内存需要回收？</h4><p>而其中程序计数器、虚拟机栈、本地方法栈是每个线程私有的内存空间，随线程而生，随线程而亡。<br>例如栈中每一个栈帧中分配多少内存基本上在类结构去诶是哪个下来时就已知了，因此这3个区域的内存分配和回收都是确定的，无需考虑内存回收的问题。</p>\n<p>但方法区和堆就不同了，一个接口的多个实现类需要的内存可能不一样，我们只有在程序运行期间才会知道会创建哪些对象，这部分内存的分配和回收都是动态的，GC主要关注的是这部分内存。</p>\n<hr>\n<p>总而言之，GC主要进行回收的内存是JVM中的方法区和堆；<br>涉及到多线程(指堆)、多个对该对象不同类型的引用(指方法区)，才会涉及GC的回收。</p>\n<hr>\n<h4 id=\"When-–-什么时候回收？\"><a href=\"#When-–-什么时候回收？\" class=\"headerlink\" title=\"When? – 什么时候回收？\"></a>When? – 什么时候回收？</h4><p>堆</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在面试中经常会碰到这样一个问题（事实上笔者也碰到过）：如何判断一个对象已经死去？</span><br><span class=\"line\"></span><br><span class=\"line\">很容易想到的一个答案是：对一个对象添加引用计数器。每当有地方引用它时，计数器值加1；当引用失效时，计数器值减1.而当计数器的值为0时这个对象就不会再被使用，判断为已死。是不是简单又直观。然而，很遗憾。这种做法是错误的！（面试时可千万别这样回答哦，我就是不假思索这样回答，然后就。。）为什么是错的呢？事实上，用引用计数法确实在大部分情况下是一个不错的解决方案，而在实际的应用中也有不少案例，但它却无法解决对象之间的循环引用问题。比如对象A中有一个字段指向了对象B，而对象B中也有一个字段指向了对象A，而事实上他们俩都不再使用，但计数器的值永远都不可能为0，也就不会被回收，然后就发生了内存泄露。。</span><br></pre></td></tr></table></figure>\n\n<p>在Java，C#等语言中，比较主流的判定一个对象已死的方法是：<Strong>可达性分析(Reachability Analysis).</Strong><br>所有生成的对象都是一个称为”GC Roots”的根的子树。从GC Roots开始向下搜索，搜索所经过的路径称为引用链(Reference Chain)，当一个对象到GC Roots没有任何引用链可以到达时，就称这个对象是不可达的（不可引用的），也就是可以被GC回收了<br><img src=\"./1483447208180.png\" alt=\"Alt text\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">无论是引用计数器还是可达性分析，判定对象是否存活都与引用有关！那么，如何定义对象的引用呢？</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>强引用(Strong Reference):Object obj = new Object();只要强引用还存在，GC永远不会回收掉被引用的对象。</li>\n<li>软引用(Soft Reference)：描述一些还有用但非必需的对象。在系统将会发生内存溢出之前，会把这些对象列入回收范围进行二次回收（即系统将会发生内存溢出了，才会对他们进行回收。）</li>\n<li>弱引用(Weak Reference):程度比软引用还要弱一些。这些对象只能生存到下次GC之前。当GC工作时，无论内存是否足够都会将其回收（即只要进行GC，就会对他们进行回收。）</li>\n<li>虚引用(Phantom Reference):一个对象是否存在虚引用，完全不会对其生存时间构成影响。</li>\n</ul>\n<p><Strong>方法区</strong><br>What部分我们已经提到，GC主要回收的是堆和方法区中的内存，而上面的How主要是针对对象的回收，他们一般位于堆内。那么，方法区中的东西该怎么回收呢？</p>\n<p>关于方法区中需要回收的是一些废弃的常量和无用的类</p>\n<ul>\n<li>废弃的常量的回收。这里看引用计数就可以了。没有对象引用该常量就可以放心的回收了。</li>\n<li>无用的类的回收。什么是无用的类呢？</li>\n</ul>\n<ul>\n<li>该类所有的实例都已经被回收。也就是Java堆中不存在该类的任何实例；</li>\n<li>加载该类的ClassLoader已经被回收；</li>\n<li>该类对应的java.lang.Class对象没有任何地方被引用，无法在任何地方通过反射访问该类的方法。</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">总而言之，对于堆中的对象，主要用可达性分析判断一个对象是否还存在引用，如果该对象没有任何引用就应该被回收。而根据我们实际对引用的不同需求，又分成了4中引用，每种引用的回收机制也是不同的。</span><br><span class=\"line\">对于方法区中的常量和类，当一个常量没有任何对象引用它，它就可以被回收了。而对于类，如果可以判定它为无用类，就可以被回收了。</span><br></pre></td></tr></table></figure>\n<h4 id=\"How-–-如何回收？\"><a href=\"#How-–-如何回收？\" class=\"headerlink\" title=\"How? – 如何回收？\"></a>How? – 如何回收？</h4><h5 id=\"标记-清除-Mark-Sweep-算法\"><a href=\"#标记-清除-Mark-Sweep-算法\" class=\"headerlink\" title=\"标记-清除(Mark-Sweep)算法\"></a>标记-清除(Mark-Sweep)算法</h5><p>分为两个阶段：首先标记出所有需要回收的对象，在标记完成后统一回收所有被标记的对象。<br>缺点：效率问题，标记和清除两个过程的效率都不高；空间问题，会产生很多碎片。</p>\n<h5 id=\"复制算法\"><a href=\"#复制算法\" class=\"headerlink\" title=\"复制算法\"></a>复制算法</h5><p>将可用内存按容量划分为大小相等的两块，每次只用其中一块。当这一块用完了，就将还存活的对象复制到另外一块上面，然后把原始空间全部回收。高效、简单。<br>缺点：将内存缩小为原来的一半。</p>\n<h5 id=\"标记-整理-Mark-Compat-算法\"><a href=\"#标记-整理-Mark-Compat-算法\" class=\"headerlink\" title=\"标记-整理(Mark-Compat)算法\"></a>标记-整理(Mark-Compat)算法</h5><p>标记过程与标记-清除算法过程一样，但后面不是简单的清除，而是让所有存活的对象都向一端移动，然后直接清除掉端边界以外的内存。</p>\n<h5 id=\"分代收集-Generational-Collection-算法\"><a href=\"#分代收集-Generational-Collection-算法\" class=\"headerlink\" title=\"分代收集(Generational Collection)算法\"></a>分代收集(Generational Collection)算法</h5><ul>\n<li>新生代中，每次垃圾收集时都有大批对象死去，只有少量存活，就选用复制算法，只需要付出少量存活对象的复制成本就可以完成收集；</li>\n<li>老年代中，其存活率较高、没有额外空间对它进行分配担保，就应该使用“标记-整理”或“标记-清理”算法进行回收。<br>####一些收集器<h5 id=\"Serial收集器\"><a href=\"#Serial收集器\" class=\"headerlink\" title=\"Serial收集器\"></a>Serial收集器</h5>单线程收集器，表示在它进行垃圾收集时，必须暂停其他所有的工作线程，直到它收集结束。”Stop The World”.<h5 id=\"ParNew收集器\"><a href=\"#ParNew收集器\" class=\"headerlink\" title=\"ParNew收集器\"></a>ParNew收集器</h5>实际就是Serial收集器的多线程版本。</li>\n<li>并发(Parallel):指多条垃圾收集线程并行工作，但此时用户线程仍然处于等待状态；</li>\n<li>并行(Concurrent):指用户线程与垃圾收集线程同时执行，用户程序在继续运行，而垃圾收集程序运行于另一个CPU上。<h5 id=\"Parallel-Scavenge收集器\"><a href=\"#Parallel-Scavenge收集器\" class=\"headerlink\" title=\"Parallel Scavenge收集器\"></a>Parallel Scavenge收集器</h5>该收集器比较关注吞吐量(Throughout)(CPU用于用户代码的时间与CPU总消耗时间的比值)，保证吞吐量在一个可控的范围内。<h5 id=\"CMS-Concurrent-Mark-Sweep-收集器\"><a href=\"#CMS-Concurrent-Mark-Sweep-收集器\" class=\"headerlink\" title=\"CMS(Concurrent Mark Sweep)收集器\"></a>CMS(Concurrent Mark Sweep)收集器</h5>CMS收集器是一种以获得最短停顿时间为目标的收集器。<h5 id=\"G1-Garbage-First-收集器\"><a href=\"#G1-Garbage-First-收集器\" class=\"headerlink\" title=\"G1(Garbage First)收集器\"></a>G1(Garbage First)收集器</h5>从JDK1.7 Update 14之后的HotSpot虚拟机正式提供了商用的G1收集器，与其他收集器相比，它具有如下优点：并行与并发；分代收集；空间整合；可预测的停顿等。</li>\n</ul>\n<p>本部分主要分析了三种不同的垃圾回收算法：Mark-Sweep, Copy, Mark-Compact. 每种算法都有不同的优缺点，也有不同的适用范围。而JVM中对垃圾回收器并没有严格的要求，不同的收集器会结合多个算法进行垃圾回收。<br>#####内存分配<br>Java技术体系中所提倡的自动内存管理最终可以归结为自动化的解决2个问题：给对象分配内存以及回收分配给对象的内存。<br>#####对象优先在Eden分配<br>大多数情况下，对象在新生代Eden区分配。当Eden区没有足够的内存时，虚拟机将发起一次Minor GC。</p>\n<ul>\n<li>Minor GC(新生代GC):指发生在新生代的垃圾收集动作，因为Java对象大多都具备朝生夕灭的特性，所以Minor GC发生的非常频繁。</li>\n<li>Full GC/Major GC(老年代GC):指发生在老年代的GC，出现了Major GC，经常会伴随至少一次的Minor GC。<h5 id=\"大对象直接进老年代\"><a href=\"#大对象直接进老年代\" class=\"headerlink\" title=\"大对象直接进老年代\"></a>大对象直接进老年代</h5>大对象是指需要大量连续内存空间的Java对象（例如很长的字符串以及数组）。<h5 id=\"长期存活的对象将进入老年代\"><a href=\"#长期存活的对象将进入老年代\" class=\"headerlink\" title=\"长期存活的对象将进入老年代\"></a>长期存活的对象将进入老年代</h5>JVM为每个对象定义一个对象年龄计数器。</li>\n</ul>\n<ul>\n<li>如果对象在Eden出生并经历过第一次Minor GC后仍然存活，并且能够被Survivor容纳，则应该被移动到Survivor空间中，并且年龄对象设置为1；</li>\n<li>对象在Survivor区中每熬过一次Minor GC，年龄就会增加1岁，当它的年龄增加到一定程度(默认为15岁，可通过参数-XX:MaxTenuringThreshold设置)，就会被晋升到老年代中。</li>\n<li>要注意的是：JVM并不是永远的要求对象的年龄必须达到MaxTenuringThreshold才能晋升老年代，如果在Survivor空间中相同年龄所有对象大小的总和大于Survivor空间的一般，年龄大于等于该年龄的对象就可以直接进入老年代，无需等到MaxTenuringThreshold中要求的年龄。<h5 id=\"空间分配担保\"><a href=\"#空间分配担保\" class=\"headerlink\" title=\"空间分配担保\"></a>空间分配担保</h5></li>\n<li>在发生Minor GC之前，虚拟机会先检查老年代最大可用的连续空间是否大于新生代所有对象总空间，如果这个条件成立，则进行Minor GC是安全的；</li>\n<li>如果不成立，则虚拟机会查看HandlePromotionFailure设置值是否允许担保失败。如果允许，则急促检查老年代最大可用连续空间是否大于历次晋升到老年代对象的平均大小，如果大于，将尝试着进行一次Minor GC，尽管它是有风险的；</li>\n<li>如果小于或者HandePromotionFailure设置为不允许冒险，则这时要改为进行一次Full GC.</li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h3 id=\"java—GC机制\"><a href=\"#java—GC机制\" class=\"headerlink\" title=\"java—GC机制\"></a>java—GC机制</h3><p>JVM会有一个运行时数据区来管理内存</p>\n<ul>\n<li>程序计数器(Program Counter Register)</li>\n<li>虚拟机栈(VM Stack)</li>\n<li>本地方法栈(Native Method Stack)</li>\n<li>方法区(Method Area)</li>\n<li>堆(Heap)</li>\n</ul>\n<h4 id=\"What-–-哪些内存需要回收？\"><a href=\"#What-–-哪些内存需要回收？\" class=\"headerlink\" title=\"What? – 哪些内存需要回收？\"></a>What? – 哪些内存需要回收？</h4><p>而其中程序计数器、虚拟机栈、本地方法栈是每个线程私有的内存空间，随线程而生，随线程而亡。<br>例如栈中每一个栈帧中分配多少内存基本上在类结构去诶是哪个下来时就已知了，因此这3个区域的内存分配和回收都是确定的，无需考虑内存回收的问题。</p>\n<p>但方法区和堆就不同了，一个接口的多个实现类需要的内存可能不一样，我们只有在程序运行期间才会知道会创建哪些对象，这部分内存的分配和回收都是动态的，GC主要关注的是这部分内存。</p>\n<hr>\n<p>总而言之，GC主要进行回收的内存是JVM中的方法区和堆；<br>涉及到多线程(指堆)、多个对该对象不同类型的引用(指方法区)，才会涉及GC的回收。</p>\n<hr>\n<h4 id=\"When-–-什么时候回收？\"><a href=\"#When-–-什么时候回收？\" class=\"headerlink\" title=\"When? – 什么时候回收？\"></a>When? – 什么时候回收？</h4><p>堆</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在面试中经常会碰到这样一个问题（事实上笔者也碰到过）：如何判断一个对象已经死去？</span><br><span class=\"line\"></span><br><span class=\"line\">很容易想到的一个答案是：对一个对象添加引用计数器。每当有地方引用它时，计数器值加1；当引用失效时，计数器值减1.而当计数器的值为0时这个对象就不会再被使用，判断为已死。是不是简单又直观。然而，很遗憾。这种做法是错误的！（面试时可千万别这样回答哦，我就是不假思索这样回答，然后就。。）为什么是错的呢？事实上，用引用计数法确实在大部分情况下是一个不错的解决方案，而在实际的应用中也有不少案例，但它却无法解决对象之间的循环引用问题。比如对象A中有一个字段指向了对象B，而对象B中也有一个字段指向了对象A，而事实上他们俩都不再使用，但计数器的值永远都不可能为0，也就不会被回收，然后就发生了内存泄露。。</span><br></pre></td></tr></table></figure>\n\n<p>在Java，C#等语言中，比较主流的判定一个对象已死的方法是：<Strong>可达性分析(Reachability Analysis).</Strong><br>所有生成的对象都是一个称为”GC Roots”的根的子树。从GC Roots开始向下搜索，搜索所经过的路径称为引用链(Reference Chain)，当一个对象到GC Roots没有任何引用链可以到达时，就称这个对象是不可达的（不可引用的），也就是可以被GC回收了<br><img src=\"./1483447208180.png\" alt=\"Alt text\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">无论是引用计数器还是可达性分析，判定对象是否存活都与引用有关！那么，如何定义对象的引用呢？</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>强引用(Strong Reference):Object obj = new Object();只要强引用还存在，GC永远不会回收掉被引用的对象。</li>\n<li>软引用(Soft Reference)：描述一些还有用但非必需的对象。在系统将会发生内存溢出之前，会把这些对象列入回收范围进行二次回收（即系统将会发生内存溢出了，才会对他们进行回收。）</li>\n<li>弱引用(Weak Reference):程度比软引用还要弱一些。这些对象只能生存到下次GC之前。当GC工作时，无论内存是否足够都会将其回收（即只要进行GC，就会对他们进行回收。）</li>\n<li>虚引用(Phantom Reference):一个对象是否存在虚引用，完全不会对其生存时间构成影响。</li>\n</ul>\n<p><Strong>方法区</strong><br>What部分我们已经提到，GC主要回收的是堆和方法区中的内存，而上面的How主要是针对对象的回收，他们一般位于堆内。那么，方法区中的东西该怎么回收呢？</p>\n<p>关于方法区中需要回收的是一些废弃的常量和无用的类</p>\n<ul>\n<li>废弃的常量的回收。这里看引用计数就可以了。没有对象引用该常量就可以放心的回收了。</li>\n<li>无用的类的回收。什么是无用的类呢？</li>\n</ul>\n<ul>\n<li>该类所有的实例都已经被回收。也就是Java堆中不存在该类的任何实例；</li>\n<li>加载该类的ClassLoader已经被回收；</li>\n<li>该类对应的java.lang.Class对象没有任何地方被引用，无法在任何地方通过反射访问该类的方法。</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">总而言之，对于堆中的对象，主要用可达性分析判断一个对象是否还存在引用，如果该对象没有任何引用就应该被回收。而根据我们实际对引用的不同需求，又分成了4中引用，每种引用的回收机制也是不同的。</span><br><span class=\"line\">对于方法区中的常量和类，当一个常量没有任何对象引用它，它就可以被回收了。而对于类，如果可以判定它为无用类，就可以被回收了。</span><br></pre></td></tr></table></figure>\n<h4 id=\"How-–-如何回收？\"><a href=\"#How-–-如何回收？\" class=\"headerlink\" title=\"How? – 如何回收？\"></a>How? – 如何回收？</h4><h5 id=\"标记-清除-Mark-Sweep-算法\"><a href=\"#标记-清除-Mark-Sweep-算法\" class=\"headerlink\" title=\"标记-清除(Mark-Sweep)算法\"></a>标记-清除(Mark-Sweep)算法</h5><p>分为两个阶段：首先标记出所有需要回收的对象，在标记完成后统一回收所有被标记的对象。<br>缺点：效率问题，标记和清除两个过程的效率都不高；空间问题，会产生很多碎片。</p>\n<h5 id=\"复制算法\"><a href=\"#复制算法\" class=\"headerlink\" title=\"复制算法\"></a>复制算法</h5><p>将可用内存按容量划分为大小相等的两块，每次只用其中一块。当这一块用完了，就将还存活的对象复制到另外一块上面，然后把原始空间全部回收。高效、简单。<br>缺点：将内存缩小为原来的一半。</p>\n<h5 id=\"标记-整理-Mark-Compat-算法\"><a href=\"#标记-整理-Mark-Compat-算法\" class=\"headerlink\" title=\"标记-整理(Mark-Compat)算法\"></a>标记-整理(Mark-Compat)算法</h5><p>标记过程与标记-清除算法过程一样，但后面不是简单的清除，而是让所有存活的对象都向一端移动，然后直接清除掉端边界以外的内存。</p>\n<h5 id=\"分代收集-Generational-Collection-算法\"><a href=\"#分代收集-Generational-Collection-算法\" class=\"headerlink\" title=\"分代收集(Generational Collection)算法\"></a>分代收集(Generational Collection)算法</h5><ul>\n<li>新生代中，每次垃圾收集时都有大批对象死去，只有少量存活，就选用复制算法，只需要付出少量存活对象的复制成本就可以完成收集；</li>\n<li>老年代中，其存活率较高、没有额外空间对它进行分配担保，就应该使用“标记-整理”或“标记-清理”算法进行回收。<br>####一些收集器<h5 id=\"Serial收集器\"><a href=\"#Serial收集器\" class=\"headerlink\" title=\"Serial收集器\"></a>Serial收集器</h5>单线程收集器，表示在它进行垃圾收集时，必须暂停其他所有的工作线程，直到它收集结束。”Stop The World”.<h5 id=\"ParNew收集器\"><a href=\"#ParNew收集器\" class=\"headerlink\" title=\"ParNew收集器\"></a>ParNew收集器</h5>实际就是Serial收集器的多线程版本。</li>\n<li>并发(Parallel):指多条垃圾收集线程并行工作，但此时用户线程仍然处于等待状态；</li>\n<li>并行(Concurrent):指用户线程与垃圾收集线程同时执行，用户程序在继续运行，而垃圾收集程序运行于另一个CPU上。<h5 id=\"Parallel-Scavenge收集器\"><a href=\"#Parallel-Scavenge收集器\" class=\"headerlink\" title=\"Parallel Scavenge收集器\"></a>Parallel Scavenge收集器</h5>该收集器比较关注吞吐量(Throughout)(CPU用于用户代码的时间与CPU总消耗时间的比值)，保证吞吐量在一个可控的范围内。<h5 id=\"CMS-Concurrent-Mark-Sweep-收集器\"><a href=\"#CMS-Concurrent-Mark-Sweep-收集器\" class=\"headerlink\" title=\"CMS(Concurrent Mark Sweep)收集器\"></a>CMS(Concurrent Mark Sweep)收集器</h5>CMS收集器是一种以获得最短停顿时间为目标的收集器。<h5 id=\"G1-Garbage-First-收集器\"><a href=\"#G1-Garbage-First-收集器\" class=\"headerlink\" title=\"G1(Garbage First)收集器\"></a>G1(Garbage First)收集器</h5>从JDK1.7 Update 14之后的HotSpot虚拟机正式提供了商用的G1收集器，与其他收集器相比，它具有如下优点：并行与并发；分代收集；空间整合；可预测的停顿等。</li>\n</ul>\n<p>本部分主要分析了三种不同的垃圾回收算法：Mark-Sweep, Copy, Mark-Compact. 每种算法都有不同的优缺点，也有不同的适用范围。而JVM中对垃圾回收器并没有严格的要求，不同的收集器会结合多个算法进行垃圾回收。<br>#####内存分配<br>Java技术体系中所提倡的自动内存管理最终可以归结为自动化的解决2个问题：给对象分配内存以及回收分配给对象的内存。<br>#####对象优先在Eden分配<br>大多数情况下，对象在新生代Eden区分配。当Eden区没有足够的内存时，虚拟机将发起一次Minor GC。</p>\n<ul>\n<li>Minor GC(新生代GC):指发生在新生代的垃圾收集动作，因为Java对象大多都具备朝生夕灭的特性，所以Minor GC发生的非常频繁。</li>\n<li>Full GC/Major GC(老年代GC):指发生在老年代的GC，出现了Major GC，经常会伴随至少一次的Minor GC。<h5 id=\"大对象直接进老年代\"><a href=\"#大对象直接进老年代\" class=\"headerlink\" title=\"大对象直接进老年代\"></a>大对象直接进老年代</h5>大对象是指需要大量连续内存空间的Java对象（例如很长的字符串以及数组）。<h5 id=\"长期存活的对象将进入老年代\"><a href=\"#长期存活的对象将进入老年代\" class=\"headerlink\" title=\"长期存活的对象将进入老年代\"></a>长期存活的对象将进入老年代</h5>JVM为每个对象定义一个对象年龄计数器。</li>\n</ul>\n<ul>\n<li>如果对象在Eden出生并经历过第一次Minor GC后仍然存活，并且能够被Survivor容纳，则应该被移动到Survivor空间中，并且年龄对象设置为1；</li>\n<li>对象在Survivor区中每熬过一次Minor GC，年龄就会增加1岁，当它的年龄增加到一定程度(默认为15岁，可通过参数-XX:MaxTenuringThreshold设置)，就会被晋升到老年代中。</li>\n<li>要注意的是：JVM并不是永远的要求对象的年龄必须达到MaxTenuringThreshold才能晋升老年代，如果在Survivor空间中相同年龄所有对象大小的总和大于Survivor空间的一般，年龄大于等于该年龄的对象就可以直接进入老年代，无需等到MaxTenuringThreshold中要求的年龄。<h5 id=\"空间分配担保\"><a href=\"#空间分配担保\" class=\"headerlink\" title=\"空间分配担保\"></a>空间分配担保</h5></li>\n<li>在发生Minor GC之前，虚拟机会先检查老年代最大可用的连续空间是否大于新生代所有对象总空间，如果这个条件成立，则进行Minor GC是安全的；</li>\n<li>如果不成立，则虚拟机会查看HandlePromotionFailure设置值是否允许担保失败。如果允许，则急促检查老年代最大可用连续空间是否大于历次晋升到老年代对象的平均大小，如果大于，将尝试着进行一次Minor GC，尽管它是有风险的；</li>\n<li>如果小于或者HandePromotionFailure设置为不允许冒险，则这时要改为进行一次Full GC.</li>\n</ul>"},{"title":"flume小结","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n<!--more-->\n\n## flume小结\n`此次flume环境的搭建是针对实际日志业务，整个过程还算顺利`\n针对flume的引入更多的偏向应用层面。所以更多的要熟悉相关配置与参数的设置\n\n### flume的整体构思\n采用的是flume框架中的flume-ng。整体架构如下图\n![c6589103d8ba4dffaf21c52b37cc7e17-image.png](//img.wqkenqing.ren//file/2017/7/c6589103d8ba4dffaf21c52b37cc7e17-image.png)\nlog_product环节尚有争议，主要针对flume环节进行小结。\n原从效率上考虑，打算在跳板机上搭建直接接入hadoop的单flume节点，因为网络权限等问题，无法直接写入所以放弃。转而改为在hadoop环境中也引入一个flume节点(flume-server)。因client是单节点，所以没有必要引入fail-over机制。因此flume-server也是单节点\n。\n\n---\n\n###\n写入hdfs时有三个参数要注意\nrollSize\nrollCount\nrollInterval\n这三个参数对写入单个hdfs文件时的大小，行，时间。\n\n---\nflume-ng agent -n agent1 -c conf -f flume-client.properties -Dflume.root.logger=DEBUG,console\n\nflume-ng agent -n agent1 -c conf -f flume-client.properties -Dflume.root.logger=DEBUG,console &\n\nflume-ng agent -n a1 -c ../conf -f flume-server.properties -Dflume.root.logger=DEBUG,console &","source":"_posts/王阁/技术/hexo/oldblog/blog18.md","raw":"---\n\ntitle: flume小结\ndate: 2019-07-16\ntags: \n\n---\n此处简介\n<!--more-->\n\n## flume小结\n`此次flume环境的搭建是针对实际日志业务，整个过程还算顺利`\n针对flume的引入更多的偏向应用层面。所以更多的要熟悉相关配置与参数的设置\n\n### flume的整体构思\n采用的是flume框架中的flume-ng。整体架构如下图\n![c6589103d8ba4dffaf21c52b37cc7e17-image.png](//img.wqkenqing.ren//file/2017/7/c6589103d8ba4dffaf21c52b37cc7e17-image.png)\nlog_product环节尚有争议，主要针对flume环节进行小结。\n原从效率上考虑，打算在跳板机上搭建直接接入hadoop的单flume节点，因为网络权限等问题，无法直接写入所以放弃。转而改为在hadoop环境中也引入一个flume节点(flume-server)。因client是单节点，所以没有必要引入fail-over机制。因此flume-server也是单节点\n。\n\n---\n\n###\n写入hdfs时有三个参数要注意\nrollSize\nrollCount\nrollInterval\n这三个参数对写入单个hdfs文件时的大小，行，时间。\n\n---\nflume-ng agent -n agent1 -c conf -f flume-client.properties -Dflume.root.logger=DEBUG,console\n\nflume-ng agent -n agent1 -c conf -f flume-client.properties -Dflume.root.logger=DEBUG,console &\n\nflume-ng agent -n a1 -c ../conf -f flume-server.properties -Dflume.root.logger=DEBUG,console &","slug":"王阁/技术/hexo/oldblog/blog18","published":1,"updated":"2023-02-23T02:51:20.906Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfs004fu6pw5vvt5x7i","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h2 id=\"flume小结\"><a href=\"#flume小结\" class=\"headerlink\" title=\"flume小结\"></a>flume小结</h2><p><code>此次flume环境的搭建是针对实际日志业务，整个过程还算顺利</code><br>针对flume的引入更多的偏向应用层面。所以更多的要熟悉相关配置与参数的设置</p>\n<h3 id=\"flume的整体构思\"><a href=\"#flume的整体构思\" class=\"headerlink\" title=\"flume的整体构思\"></a>flume的整体构思</h3><p>采用的是flume框架中的flume-ng。整体架构如下图<br><img src=\"//img.wqkenqing.ren//file/2017/7/c6589103d8ba4dffaf21c52b37cc7e17-image.png\" alt=\"c6589103d8ba4dffaf21c52b37cc7e17-image.png\"><br>log_product环节尚有争议，主要针对flume环节进行小结。<br>原从效率上考虑，打算在跳板机上搭建直接接入hadoop的单flume节点，因为网络权限等问题，无法直接写入所以放弃。转而改为在hadoop环境中也引入一个flume节点(flume-server)。因client是单节点，所以没有必要引入fail-over机制。因此flume-server也是单节点<br>。</p>\n<hr>\n<p>###<br>写入hdfs时有三个参数要注意<br>rollSize<br>rollCount<br>rollInterval<br>这三个参数对写入单个hdfs文件时的大小，行，时间。</p>\n<hr>\n<p>flume-ng agent -n agent1 -c conf -f flume-client.properties -Dflume.root.logger=DEBUG,console</p>\n<p>flume-ng agent -n agent1 -c conf -f flume-client.properties -Dflume.root.logger=DEBUG,console &amp;</p>\n<p>flume-ng agent -n a1 -c ../conf -f flume-server.properties -Dflume.root.logger=DEBUG,console &amp;</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h2 id=\"flume小结\"><a href=\"#flume小结\" class=\"headerlink\" title=\"flume小结\"></a>flume小结</h2><p><code>此次flume环境的搭建是针对实际日志业务，整个过程还算顺利</code><br>针对flume的引入更多的偏向应用层面。所以更多的要熟悉相关配置与参数的设置</p>\n<h3 id=\"flume的整体构思\"><a href=\"#flume的整体构思\" class=\"headerlink\" title=\"flume的整体构思\"></a>flume的整体构思</h3><p>采用的是flume框架中的flume-ng。整体架构如下图<br><img src=\"//img.wqkenqing.ren//file/2017/7/c6589103d8ba4dffaf21c52b37cc7e17-image.png\" alt=\"c6589103d8ba4dffaf21c52b37cc7e17-image.png\"><br>log_product环节尚有争议，主要针对flume环节进行小结。<br>原从效率上考虑，打算在跳板机上搭建直接接入hadoop的单flume节点，因为网络权限等问题，无法直接写入所以放弃。转而改为在hadoop环境中也引入一个flume节点(flume-server)。因client是单节点，所以没有必要引入fail-over机制。因此flume-server也是单节点<br>。</p>\n<hr>\n<p>###<br>写入hdfs时有三个参数要注意<br>rollSize<br>rollCount<br>rollInterval<br>这三个参数对写入单个hdfs文件时的大小，行，时间。</p>\n<hr>\n<p>flume-ng agent -n agent1 -c conf -f flume-client.properties -Dflume.root.logger=DEBUG,console</p>\n<p>flume-ng agent -n agent1 -c conf -f flume-client.properties -Dflume.root.logger=DEBUG,console &amp;</p>\n<p>flume-ng agent -n a1 -c ../conf -f flume-server.properties -Dflume.root.logger=DEBUG,console &amp;</p>"},{"title":"Restful架构","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n<!--more-->\n\n## Restful架构\n### 什么是RESTful架构\n`Representational State Transfer:表现层状态转化`\n\nREST的名称\"表现层状态转化\"中，省略了主语。\"表现层\"其实指的是\"资源\"（Resources）的\"表现层\"。\n\n>所谓\"资源\"，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。\n\n\"资源\"是一种信息实体，它可以有多种外在表现形式。我们把\"资源\"具体呈现出来的形式，叫做它的\"表现层\"（Representation）。\n\n访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。\n\n互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生\"状态转化\"（State Transfer）。而这种转化是建立在表现层之上的，所以就是\"表现层状态转化\"。\n\n客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。\n\n\n---\n\n综合上面的解释，我们总结一下什么是RESTful架构：\n+ 每一个URI代表一种资源；\n+ 客户端和服务器之间，传递这种资源的某种表现层；\n+ 客户端通过四个HTTP动词，对服务器端资源进行操作，实现\"表现层状态转化\"。\n\n最常见的一种设计错误，就是URI包含动词。**因为\"资源\"表示一种实体，所以应该是名词**，**URI不应该有动词**，动词应该放在HTTP协议中。\n\n举例来说，某个URI是/posts/show/1，其中show是动词，这个URI就设计错了，正确的写法应该是/posts/1，然后用GET方法表示show。\n\n如果某些动作是HTTP动词表示不了的，你就应该把动作做成一种资源。比如网上汇款，从账户1向账户2汇款500元，错误的URI是：\n\n　　POST /accounts/1/transfer/500/to/2\n\n正确的写法是把动词transfer改成名词transaction，资源不能是动词，但是可以是一种服务：\n\n　　POST /transaction HTTP/1.1\n　　Host: 127.0.0.1\n　　\n　　from=1&to=2&amount=500.00\n\n\n\n另一个设计误区，就是在URI中加入版本号：\n\n　　http://www.example.com/app/1.0/foo\n\n　　http://www.example.com/app/1.1/foo\n\n　　http://www.example.com/app/2.0/foo\n\n因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个URI。版本号可以在HTTP请求头信息的Accept字段中进行区分（参见Versioning REST Services）：\nAccept: vnd.example-com.foo+json; version=1.0\n\n　　Accept: vnd.example-com.foo+json; version=1.1\n\n　　Accept: vnd.example-com.foo+json; version=2.0","source":"_posts/王阁/技术/hexo/oldblog/blog16.md","raw":"---\n\ntitle: Restful架构\ndate: 2019-07-16\ntags:\n\n---\n此处简介\n<!--more-->\n\n## Restful架构\n### 什么是RESTful架构\n`Representational State Transfer:表现层状态转化`\n\nREST的名称\"表现层状态转化\"中，省略了主语。\"表现层\"其实指的是\"资源\"（Resources）的\"表现层\"。\n\n>所谓\"资源\"，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。\n\n\"资源\"是一种信息实体，它可以有多种外在表现形式。我们把\"资源\"具体呈现出来的形式，叫做它的\"表现层\"（Representation）。\n\n访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。\n\n互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生\"状态转化\"（State Transfer）。而这种转化是建立在表现层之上的，所以就是\"表现层状态转化\"。\n\n客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。\n\n\n---\n\n综合上面的解释，我们总结一下什么是RESTful架构：\n+ 每一个URI代表一种资源；\n+ 客户端和服务器之间，传递这种资源的某种表现层；\n+ 客户端通过四个HTTP动词，对服务器端资源进行操作，实现\"表现层状态转化\"。\n\n最常见的一种设计错误，就是URI包含动词。**因为\"资源\"表示一种实体，所以应该是名词**，**URI不应该有动词**，动词应该放在HTTP协议中。\n\n举例来说，某个URI是/posts/show/1，其中show是动词，这个URI就设计错了，正确的写法应该是/posts/1，然后用GET方法表示show。\n\n如果某些动作是HTTP动词表示不了的，你就应该把动作做成一种资源。比如网上汇款，从账户1向账户2汇款500元，错误的URI是：\n\n　　POST /accounts/1/transfer/500/to/2\n\n正确的写法是把动词transfer改成名词transaction，资源不能是动词，但是可以是一种服务：\n\n　　POST /transaction HTTP/1.1\n　　Host: 127.0.0.1\n　　\n　　from=1&to=2&amount=500.00\n\n\n\n另一个设计误区，就是在URI中加入版本号：\n\n　　http://www.example.com/app/1.0/foo\n\n　　http://www.example.com/app/1.1/foo\n\n　　http://www.example.com/app/2.0/foo\n\n因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个URI。版本号可以在HTTP请求头信息的Accept字段中进行区分（参见Versioning REST Services）：\nAccept: vnd.example-com.foo+json; version=1.0\n\n　　Accept: vnd.example-com.foo+json; version=1.1\n\n　　Accept: vnd.example-com.foo+json; version=2.0","slug":"王阁/技术/hexo/oldblog/blog16","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfv004hu6pw9mx46sja","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h2 id=\"Restful架构\"><a href=\"#Restful架构\" class=\"headerlink\" title=\"Restful架构\"></a>Restful架构</h2><h3 id=\"什么是RESTful架构\"><a href=\"#什么是RESTful架构\" class=\"headerlink\" title=\"什么是RESTful架构\"></a>什么是RESTful架构</h3><p><code>Representational State Transfer:表现层状态转化</code></p>\n<p>REST的名称”表现层状态转化”中，省略了主语。”表现层”其实指的是”资源”（Resources）的”表现层”。</p>\n<blockquote>\n<p>所谓”资源”，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。</p>\n</blockquote>\n<p>“资源”是一种信息实体，它可以有多种外在表现形式。我们把”资源”具体呈现出来的形式，叫做它的”表现层”（Representation）。</p>\n<p>访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。</p>\n<p>互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生”状态转化”（State Transfer）。而这种转化是建立在表现层之上的，所以就是”表现层状态转化”。</p>\n<p>客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。</p>\n<hr>\n<p>综合上面的解释，我们总结一下什么是RESTful架构：</p>\n<ul>\n<li>每一个URI代表一种资源；</li>\n<li>客户端和服务器之间，传递这种资源的某种表现层；</li>\n<li>客户端通过四个HTTP动词，对服务器端资源进行操作，实现”表现层状态转化”。</li>\n</ul>\n<p>最常见的一种设计错误，就是URI包含动词。<strong>因为”资源”表示一种实体，所以应该是名词</strong>，<strong>URI不应该有动词</strong>，动词应该放在HTTP协议中。</p>\n<p>举例来说，某个URI是/posts/show/1，其中show是动词，这个URI就设计错了，正确的写法应该是/posts/1，然后用GET方法表示show。</p>\n<p>如果某些动作是HTTP动词表示不了的，你就应该把动作做成一种资源。比如网上汇款，从账户1向账户2汇款500元，错误的URI是：</p>\n<p>　　POST /accounts/1/transfer/500/to/2</p>\n<p>正确的写法是把动词transfer改成名词transaction，资源不能是动词，但是可以是一种服务：</p>\n<p>　　POST /transaction HTTP/1.1<br>　　Host: 127.0.0.1<br>　　<br>　　from=1&amp;to=2&amp;amount=500.00</p>\n<p>另一个设计误区，就是在URI中加入版本号：</p>\n<p>　　<a href=\"http://www.example.com/app/1.0/foo\" target=\"_blank\" rel=\"noopener\">http://www.example.com/app/1.0/foo</a></p>\n<p>　　<a href=\"http://www.example.com/app/1.1/foo\" target=\"_blank\" rel=\"noopener\">http://www.example.com/app/1.1/foo</a></p>\n<p>　　<a href=\"http://www.example.com/app/2.0/foo\" target=\"_blank\" rel=\"noopener\">http://www.example.com/app/2.0/foo</a></p>\n<p>因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个URI。版本号可以在HTTP请求头信息的Accept字段中进行区分（参见Versioning REST Services）：<br>Accept: vnd.example-com.foo+json; version=1.0</p>\n<p>　　Accept: vnd.example-com.foo+json; version=1.1</p>\n<p>　　Accept: vnd.example-com.foo+json; version=2.0</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h2 id=\"Restful架构\"><a href=\"#Restful架构\" class=\"headerlink\" title=\"Restful架构\"></a>Restful架构</h2><h3 id=\"什么是RESTful架构\"><a href=\"#什么是RESTful架构\" class=\"headerlink\" title=\"什么是RESTful架构\"></a>什么是RESTful架构</h3><p><code>Representational State Transfer:表现层状态转化</code></p>\n<p>REST的名称”表现层状态转化”中，省略了主语。”表现层”其实指的是”资源”（Resources）的”表现层”。</p>\n<blockquote>\n<p>所谓”资源”，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。</p>\n</blockquote>\n<p>“资源”是一种信息实体，它可以有多种外在表现形式。我们把”资源”具体呈现出来的形式，叫做它的”表现层”（Representation）。</p>\n<p>访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。</p>\n<p>互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生”状态转化”（State Transfer）。而这种转化是建立在表现层之上的，所以就是”表现层状态转化”。</p>\n<p>客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。</p>\n<hr>\n<p>综合上面的解释，我们总结一下什么是RESTful架构：</p>\n<ul>\n<li>每一个URI代表一种资源；</li>\n<li>客户端和服务器之间，传递这种资源的某种表现层；</li>\n<li>客户端通过四个HTTP动词，对服务器端资源进行操作，实现”表现层状态转化”。</li>\n</ul>\n<p>最常见的一种设计错误，就是URI包含动词。<strong>因为”资源”表示一种实体，所以应该是名词</strong>，<strong>URI不应该有动词</strong>，动词应该放在HTTP协议中。</p>\n<p>举例来说，某个URI是/posts/show/1，其中show是动词，这个URI就设计错了，正确的写法应该是/posts/1，然后用GET方法表示show。</p>\n<p>如果某些动作是HTTP动词表示不了的，你就应该把动作做成一种资源。比如网上汇款，从账户1向账户2汇款500元，错误的URI是：</p>\n<p>　　POST /accounts/1/transfer/500/to/2</p>\n<p>正确的写法是把动词transfer改成名词transaction，资源不能是动词，但是可以是一种服务：</p>\n<p>　　POST /transaction HTTP/1.1<br>　　Host: 127.0.0.1<br>　　<br>　　from=1&amp;to=2&amp;amount=500.00</p>\n<p>另一个设计误区，就是在URI中加入版本号：</p>\n<p>　　<a href=\"http://www.example.com/app/1.0/foo\" target=\"_blank\" rel=\"noopener\">http://www.example.com/app/1.0/foo</a></p>\n<p>　　<a href=\"http://www.example.com/app/1.1/foo\" target=\"_blank\" rel=\"noopener\">http://www.example.com/app/1.1/foo</a></p>\n<p>　　<a href=\"http://www.example.com/app/2.0/foo\" target=\"_blank\" rel=\"noopener\">http://www.example.com/app/2.0/foo</a></p>\n<p>因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个URI。版本号可以在HTTP请求头信息的Accept字段中进行区分（参见Versioning REST Services）：<br>Accept: vnd.example-com.foo+json; version=1.0</p>\n<p>　　Accept: vnd.example-com.foo+json; version=1.1</p>\n<p>　　Accept: vnd.example-com.foo+json; version=2.0</p>"},{"title":"Python","date":"2019-07-15T16:00:00.000Z","_content":"\n此处简介\n<!--more-->\n\n`the record for python`\n### Python 知识点\n\n#### 标识\b符号\n在 Python 里，标识符有字母、数字、下划线组成。\n在 Python 中，所有标识符可以包括英文、数字以及下划线(_)，但不能以数字开头。\n\n\n以下划线开头的标识符是有特殊意义的。以单下划线开头 _foo 的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用 from xxx import * 而导入；\n\n以双下划线开头的 __foo 代表类的私有成员；以双下划线开头和结尾的 __foo__ 代表 Python 里特殊方法专用的标识，如 __init__() 代表类的构造函数。\n\nPython 可以同一行显示多条语句，方法是用分号 ; 分开，\n\n#### 行和缩进\npython 最具特色的就是用缩进来写模块。\n缩进的空白数量是可变的，但是所有代码块语句必须包含相同的缩进空白数量，这个必须严格执行\n因此，在 Python 的代码块中必须使用相同数目的行首缩进空格数。\n建议你在每个缩进层次使用 单个制表符 或 两个空格 或 四个空格 , 切记不能混用\n\n####  多行语句\nPython语句中一般以新行作为为语句的结束符。\n但是我们可以使用斜杠（ \\）将一行的语句分为多行显示，\n\n#### Python 引号\n\nPython 可以使用引号( ' )、双引号( \" )、三引号( ''' 或 \"\"\" ) 来表示字符串，引号的开始与结束必须的相同类型的。\n其中三引号可以由多行组成，编写多行文本的快捷语法，常用语文档字符串，在文件的特定地点，被当做注释。\n\n#### Python注释\npython 中多行注释使用三个单引号(''')或三个双引号(\"\"\")。\n\n#### Python空行\n函数之间或类的方法之间用空行分隔，表示一段新的代码的开始。类和函数入口之间也用一行空行分隔，以突出函数入口的开始。\n空行与代码缩进不同，空行并不是Python语法的一部分。书写时不插入空行，Python解释器运行也不会出错。但是空行的作用在于分隔两段不同功能或含义的代码，便于日后代码的维护或重构。\n记住：空行也是程序代码的一部分。\n\n#### Python 变量类型\n\n变量存储在内存中的值。这就意味着在创建变量时会在内存中开辟一个空间。\n基于变量的数据类型，解释器会分配指定内存，并决定什么数据可以被存储在内存中。\n因此，变量可以指定不同的数据类型，这些变量可以存储整数，小数或字符。\n\n**变量赋值**\n\nPython 中的变量赋值不需要类型声明。\n每个变量在内存中创建，都包括变量的标识，名称和数据这些信息。\n每个变量在使用前都必须赋值，变量赋值以后该变量才会被创建。\n等号（=）用来给变量赋值。\n\n#### python 标准数据类型\n\npython 定义了一些标准类型，用于存储各种类型的数据。\nPython有五个标准的数据类型：\nNumbers（数字）\nString（字符串）\nList（列表）\nTuple（元组）\nDictionary（字典）\n\n#### Python数字\n\n数字数据类型用于存储数值。\n他们是不可改变的数据类型，这意味着改变数字数据类型会分配一个新的对象。\n当你指定一个值时，Number对象就会被创建：\n您也可以使用del语句删除一些对象的引用。\ndel语句的语法是：\n\ndel var1[,var2[,var3[....,varN]]]]\n\n您可以通过使用del语句删除单个或多个对象的引用。例如：\n\ndel var\ndel var_a, var_b\n\nPython支持四种不同的数字类型：\n\nint（有符号整型）\n\nlong（长整型[也可以代表八进制和十六进制]）\n\nfloat（浮点型）\n\ncomplex（复数）\n\n#### Python字符串\n\n字符串或串(String)是由数字、字母、下划线组成的一串字符。\n\n一般记为 :\ns=\"a1a2···an\"(n>=0)\n它是编程语言中表示文本的数据类型。\n\n\npython的字串列表有2种取值顺序:\n\n从左到右索引默认0开始的，最大范围是字符串长度少1\n\n从右到左索引默认-1开始的，最大范围是字符串开头\n\n当使用以冒号分隔的字符串，python返回一个新的对象，结果包含了以这对偏移标识的连续的内容，左边的开始是包含了下边界。\n上面的结果包含了s[1]的值l，而取到的最大范围不包括上边界，就是s[5]的值p。\n\n加号（+）是字符串连接运算符，星号（*）是重复操作\n\n#### Python列表\nList（列表） 是 Python 中使用最频繁的数据类型。\n#### python元组\n\n元组是另一个数据类型，类似于List（列表）。\n\n元组用\"()\"标识。内部元素用逗号隔开。但是元组不能二次赋值，相当于只读列表\n\n#### Python 字典\n","source":"_posts/王阁/技术/hexo/oldblog/blog21.md","raw":"\n---\n\ntitle: Python\ndate: 2019-07-16\ntags:\n\n---\n\n此处简介\n<!--more-->\n\n`the record for python`\n### Python 知识点\n\n#### 标识\b符号\n在 Python 里，标识符有字母、数字、下划线组成。\n在 Python 中，所有标识符可以包括英文、数字以及下划线(_)，但不能以数字开头。\n\n\n以下划线开头的标识符是有特殊意义的。以单下划线开头 _foo 的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用 from xxx import * 而导入；\n\n以双下划线开头的 __foo 代表类的私有成员；以双下划线开头和结尾的 __foo__ 代表 Python 里特殊方法专用的标识，如 __init__() 代表类的构造函数。\n\nPython 可以同一行显示多条语句，方法是用分号 ; 分开，\n\n#### 行和缩进\npython 最具特色的就是用缩进来写模块。\n缩进的空白数量是可变的，但是所有代码块语句必须包含相同的缩进空白数量，这个必须严格执行\n因此，在 Python 的代码块中必须使用相同数目的行首缩进空格数。\n建议你在每个缩进层次使用 单个制表符 或 两个空格 或 四个空格 , 切记不能混用\n\n####  多行语句\nPython语句中一般以新行作为为语句的结束符。\n但是我们可以使用斜杠（ \\）将一行的语句分为多行显示，\n\n#### Python 引号\n\nPython 可以使用引号( ' )、双引号( \" )、三引号( ''' 或 \"\"\" ) 来表示字符串，引号的开始与结束必须的相同类型的。\n其中三引号可以由多行组成，编写多行文本的快捷语法，常用语文档字符串，在文件的特定地点，被当做注释。\n\n#### Python注释\npython 中多行注释使用三个单引号(''')或三个双引号(\"\"\")。\n\n#### Python空行\n函数之间或类的方法之间用空行分隔，表示一段新的代码的开始。类和函数入口之间也用一行空行分隔，以突出函数入口的开始。\n空行与代码缩进不同，空行并不是Python语法的一部分。书写时不插入空行，Python解释器运行也不会出错。但是空行的作用在于分隔两段不同功能或含义的代码，便于日后代码的维护或重构。\n记住：空行也是程序代码的一部分。\n\n#### Python 变量类型\n\n变量存储在内存中的值。这就意味着在创建变量时会在内存中开辟一个空间。\n基于变量的数据类型，解释器会分配指定内存，并决定什么数据可以被存储在内存中。\n因此，变量可以指定不同的数据类型，这些变量可以存储整数，小数或字符。\n\n**变量赋值**\n\nPython 中的变量赋值不需要类型声明。\n每个变量在内存中创建，都包括变量的标识，名称和数据这些信息。\n每个变量在使用前都必须赋值，变量赋值以后该变量才会被创建。\n等号（=）用来给变量赋值。\n\n#### python 标准数据类型\n\npython 定义了一些标准类型，用于存储各种类型的数据。\nPython有五个标准的数据类型：\nNumbers（数字）\nString（字符串）\nList（列表）\nTuple（元组）\nDictionary（字典）\n\n#### Python数字\n\n数字数据类型用于存储数值。\n他们是不可改变的数据类型，这意味着改变数字数据类型会分配一个新的对象。\n当你指定一个值时，Number对象就会被创建：\n您也可以使用del语句删除一些对象的引用。\ndel语句的语法是：\n\ndel var1[,var2[,var3[....,varN]]]]\n\n您可以通过使用del语句删除单个或多个对象的引用。例如：\n\ndel var\ndel var_a, var_b\n\nPython支持四种不同的数字类型：\n\nint（有符号整型）\n\nlong（长整型[也可以代表八进制和十六进制]）\n\nfloat（浮点型）\n\ncomplex（复数）\n\n#### Python字符串\n\n字符串或串(String)是由数字、字母、下划线组成的一串字符。\n\n一般记为 :\ns=\"a1a2···an\"(n>=0)\n它是编程语言中表示文本的数据类型。\n\n\npython的字串列表有2种取值顺序:\n\n从左到右索引默认0开始的，最大范围是字符串长度少1\n\n从右到左索引默认-1开始的，最大范围是字符串开头\n\n当使用以冒号分隔的字符串，python返回一个新的对象，结果包含了以这对偏移标识的连续的内容，左边的开始是包含了下边界。\n上面的结果包含了s[1]的值l，而取到的最大范围不包括上边界，就是s[5]的值p。\n\n加号（+）是字符串连接运算符，星号（*）是重复操作\n\n#### Python列表\nList（列表） 是 Python 中使用最频繁的数据类型。\n#### python元组\n\n元组是另一个数据类型，类似于List（列表）。\n\n元组用\"()\"标识。内部元素用逗号隔开。但是元组不能二次赋值，相当于只读列表\n\n#### Python 字典\n","slug":"王阁/技术/hexo/oldblog/blog21","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfx004ju6pw9kaves0y","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<p><code>the record for python</code></p>\n<h3 id=\"Python-知识点\"><a href=\"#Python-知识点\" class=\"headerlink\" title=\"Python 知识点\"></a>Python 知识点</h3><h4 id=\"标识符号\"><a href=\"#标识符号\" class=\"headerlink\" title=\"标识\b符号\"></a>标识\b符号</h4><p>在 Python 里，标识符有字母、数字、下划线组成。<br>在 Python 中，所有标识符可以包括英文、数字以及下划线(_)，但不能以数字开头。</p>\n<p>以下划线开头的标识符是有特殊意义的。以单下划线开头 _foo 的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用 from xxx import * 而导入；</p>\n<p>以双下划线开头的 <strong>foo 代表类的私有成员；以双下划线开头和结尾的 __foo</strong> 代表 Python 里特殊方法专用的标识，如 <strong>init</strong>() 代表类的构造函数。</p>\n<p>Python 可以同一行显示多条语句，方法是用分号 ; 分开，</p>\n<h4 id=\"行和缩进\"><a href=\"#行和缩进\" class=\"headerlink\" title=\"行和缩进\"></a>行和缩进</h4><p>python 最具特色的就是用缩进来写模块。<br>缩进的空白数量是可变的，但是所有代码块语句必须包含相同的缩进空白数量，这个必须严格执行<br>因此，在 Python 的代码块中必须使用相同数目的行首缩进空格数。<br>建议你在每个缩进层次使用 单个制表符 或 两个空格 或 四个空格 , 切记不能混用</p>\n<h4 id=\"多行语句\"><a href=\"#多行语句\" class=\"headerlink\" title=\"多行语句\"></a>多行语句</h4><p>Python语句中一般以新行作为为语句的结束符。<br>但是我们可以使用斜杠（ \\）将一行的语句分为多行显示，</p>\n<h4 id=\"Python-引号\"><a href=\"#Python-引号\" class=\"headerlink\" title=\"Python 引号\"></a>Python 引号</h4><p>Python 可以使用引号( ‘ )、双引号( “ )、三引号( ‘’’ 或 “”” ) 来表示字符串，引号的开始与结束必须的相同类型的。<br>其中三引号可以由多行组成，编写多行文本的快捷语法，常用语文档字符串，在文件的特定地点，被当做注释。</p>\n<h4 id=\"Python注释\"><a href=\"#Python注释\" class=\"headerlink\" title=\"Python注释\"></a>Python注释</h4><p>python 中多行注释使用三个单引号(‘’’)或三个双引号(“””)。</p>\n<h4 id=\"Python空行\"><a href=\"#Python空行\" class=\"headerlink\" title=\"Python空行\"></a>Python空行</h4><p>函数之间或类的方法之间用空行分隔，表示一段新的代码的开始。类和函数入口之间也用一行空行分隔，以突出函数入口的开始。<br>空行与代码缩进不同，空行并不是Python语法的一部分。书写时不插入空行，Python解释器运行也不会出错。但是空行的作用在于分隔两段不同功能或含义的代码，便于日后代码的维护或重构。<br>记住：空行也是程序代码的一部分。</p>\n<h4 id=\"Python-变量类型\"><a href=\"#Python-变量类型\" class=\"headerlink\" title=\"Python 变量类型\"></a>Python 变量类型</h4><p>变量存储在内存中的值。这就意味着在创建变量时会在内存中开辟一个空间。<br>基于变量的数据类型，解释器会分配指定内存，并决定什么数据可以被存储在内存中。<br>因此，变量可以指定不同的数据类型，这些变量可以存储整数，小数或字符。</p>\n<p><strong>变量赋值</strong></p>\n<p>Python 中的变量赋值不需要类型声明。<br>每个变量在内存中创建，都包括变量的标识，名称和数据这些信息。<br>每个变量在使用前都必须赋值，变量赋值以后该变量才会被创建。<br>等号（=）用来给变量赋值。</p>\n<h4 id=\"python-标准数据类型\"><a href=\"#python-标准数据类型\" class=\"headerlink\" title=\"python 标准数据类型\"></a>python 标准数据类型</h4><p>python 定义了一些标准类型，用于存储各种类型的数据。<br>Python有五个标准的数据类型：<br>Numbers（数字）<br>String（字符串）<br>List（列表）<br>Tuple（元组）<br>Dictionary（字典）</p>\n<h4 id=\"Python数字\"><a href=\"#Python数字\" class=\"headerlink\" title=\"Python数字\"></a>Python数字</h4><p>数字数据类型用于存储数值。<br>他们是不可改变的数据类型，这意味着改变数字数据类型会分配一个新的对象。<br>当你指定一个值时，Number对象就会被创建：<br>您也可以使用del语句删除一些对象的引用。<br>del语句的语法是：</p>\n<p>del var1[,var2[,var3[….,varN]]]]</p>\n<p>您可以通过使用del语句删除单个或多个对象的引用。例如：</p>\n<p>del var<br>del var_a, var_b</p>\n<p>Python支持四种不同的数字类型：</p>\n<p>int（有符号整型）</p>\n<p>long（长整型[也可以代表八进制和十六进制]）</p>\n<p>float（浮点型）</p>\n<p>complex（复数）</p>\n<h4 id=\"Python字符串\"><a href=\"#Python字符串\" class=\"headerlink\" title=\"Python字符串\"></a>Python字符串</h4><p>字符串或串(String)是由数字、字母、下划线组成的一串字符。</p>\n<p>一般记为 :<br>s=”a1a2···an”(n&gt;=0)<br>它是编程语言中表示文本的数据类型。</p>\n<p>python的字串列表有2种取值顺序:</p>\n<p>从左到右索引默认0开始的，最大范围是字符串长度少1</p>\n<p>从右到左索引默认-1开始的，最大范围是字符串开头</p>\n<p>当使用以冒号分隔的字符串，python返回一个新的对象，结果包含了以这对偏移标识的连续的内容，左边的开始是包含了下边界。<br>上面的结果包含了s[1]的值l，而取到的最大范围不包括上边界，就是s[5]的值p。</p>\n<p>加号（+）是字符串连接运算符，星号（*）是重复操作</p>\n<h4 id=\"Python列表\"><a href=\"#Python列表\" class=\"headerlink\" title=\"Python列表\"></a>Python列表</h4><p>List（列表） 是 Python 中使用最频繁的数据类型。</p>\n<h4 id=\"python元组\"><a href=\"#python元组\" class=\"headerlink\" title=\"python元组\"></a>python元组</h4><p>元组是另一个数据类型，类似于List（列表）。</p>\n<p>元组用”()”标识。内部元素用逗号隔开。但是元组不能二次赋值，相当于只读列表</p>\n<h4 id=\"Python-字典\"><a href=\"#Python-字典\" class=\"headerlink\" title=\"Python 字典\"></a>Python 字典</h4>","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<p><code>the record for python</code></p>\n<h3 id=\"Python-知识点\"><a href=\"#Python-知识点\" class=\"headerlink\" title=\"Python 知识点\"></a>Python 知识点</h3><h4 id=\"标识符号\"><a href=\"#标识符号\" class=\"headerlink\" title=\"标识\b符号\"></a>标识\b符号</h4><p>在 Python 里，标识符有字母、数字、下划线组成。<br>在 Python 中，所有标识符可以包括英文、数字以及下划线(_)，但不能以数字开头。</p>\n<p>以下划线开头的标识符是有特殊意义的。以单下划线开头 _foo 的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用 from xxx import * 而导入；</p>\n<p>以双下划线开头的 <strong>foo 代表类的私有成员；以双下划线开头和结尾的 __foo</strong> 代表 Python 里特殊方法专用的标识，如 <strong>init</strong>() 代表类的构造函数。</p>\n<p>Python 可以同一行显示多条语句，方法是用分号 ; 分开，</p>\n<h4 id=\"行和缩进\"><a href=\"#行和缩进\" class=\"headerlink\" title=\"行和缩进\"></a>行和缩进</h4><p>python 最具特色的就是用缩进来写模块。<br>缩进的空白数量是可变的，但是所有代码块语句必须包含相同的缩进空白数量，这个必须严格执行<br>因此，在 Python 的代码块中必须使用相同数目的行首缩进空格数。<br>建议你在每个缩进层次使用 单个制表符 或 两个空格 或 四个空格 , 切记不能混用</p>\n<h4 id=\"多行语句\"><a href=\"#多行语句\" class=\"headerlink\" title=\"多行语句\"></a>多行语句</h4><p>Python语句中一般以新行作为为语句的结束符。<br>但是我们可以使用斜杠（ \\）将一行的语句分为多行显示，</p>\n<h4 id=\"Python-引号\"><a href=\"#Python-引号\" class=\"headerlink\" title=\"Python 引号\"></a>Python 引号</h4><p>Python 可以使用引号( ‘ )、双引号( “ )、三引号( ‘’’ 或 “”” ) 来表示字符串，引号的开始与结束必须的相同类型的。<br>其中三引号可以由多行组成，编写多行文本的快捷语法，常用语文档字符串，在文件的特定地点，被当做注释。</p>\n<h4 id=\"Python注释\"><a href=\"#Python注释\" class=\"headerlink\" title=\"Python注释\"></a>Python注释</h4><p>python 中多行注释使用三个单引号(‘’’)或三个双引号(“””)。</p>\n<h4 id=\"Python空行\"><a href=\"#Python空行\" class=\"headerlink\" title=\"Python空行\"></a>Python空行</h4><p>函数之间或类的方法之间用空行分隔，表示一段新的代码的开始。类和函数入口之间也用一行空行分隔，以突出函数入口的开始。<br>空行与代码缩进不同，空行并不是Python语法的一部分。书写时不插入空行，Python解释器运行也不会出错。但是空行的作用在于分隔两段不同功能或含义的代码，便于日后代码的维护或重构。<br>记住：空行也是程序代码的一部分。</p>\n<h4 id=\"Python-变量类型\"><a href=\"#Python-变量类型\" class=\"headerlink\" title=\"Python 变量类型\"></a>Python 变量类型</h4><p>变量存储在内存中的值。这就意味着在创建变量时会在内存中开辟一个空间。<br>基于变量的数据类型，解释器会分配指定内存，并决定什么数据可以被存储在内存中。<br>因此，变量可以指定不同的数据类型，这些变量可以存储整数，小数或字符。</p>\n<p><strong>变量赋值</strong></p>\n<p>Python 中的变量赋值不需要类型声明。<br>每个变量在内存中创建，都包括变量的标识，名称和数据这些信息。<br>每个变量在使用前都必须赋值，变量赋值以后该变量才会被创建。<br>等号（=）用来给变量赋值。</p>\n<h4 id=\"python-标准数据类型\"><a href=\"#python-标准数据类型\" class=\"headerlink\" title=\"python 标准数据类型\"></a>python 标准数据类型</h4><p>python 定义了一些标准类型，用于存储各种类型的数据。<br>Python有五个标准的数据类型：<br>Numbers（数字）<br>String（字符串）<br>List（列表）<br>Tuple（元组）<br>Dictionary（字典）</p>\n<h4 id=\"Python数字\"><a href=\"#Python数字\" class=\"headerlink\" title=\"Python数字\"></a>Python数字</h4><p>数字数据类型用于存储数值。<br>他们是不可改变的数据类型，这意味着改变数字数据类型会分配一个新的对象。<br>当你指定一个值时，Number对象就会被创建：<br>您也可以使用del语句删除一些对象的引用。<br>del语句的语法是：</p>\n<p>del var1[,var2[,var3[….,varN]]]]</p>\n<p>您可以通过使用del语句删除单个或多个对象的引用。例如：</p>\n<p>del var<br>del var_a, var_b</p>\n<p>Python支持四种不同的数字类型：</p>\n<p>int（有符号整型）</p>\n<p>long（长整型[也可以代表八进制和十六进制]）</p>\n<p>float（浮点型）</p>\n<p>complex（复数）</p>\n<h4 id=\"Python字符串\"><a href=\"#Python字符串\" class=\"headerlink\" title=\"Python字符串\"></a>Python字符串</h4><p>字符串或串(String)是由数字、字母、下划线组成的一串字符。</p>\n<p>一般记为 :<br>s=”a1a2···an”(n&gt;=0)<br>它是编程语言中表示文本的数据类型。</p>\n<p>python的字串列表有2种取值顺序:</p>\n<p>从左到右索引默认0开始的，最大范围是字符串长度少1</p>\n<p>从右到左索引默认-1开始的，最大范围是字符串开头</p>\n<p>当使用以冒号分隔的字符串，python返回一个新的对象，结果包含了以这对偏移标识的连续的内容，左边的开始是包含了下边界。<br>上面的结果包含了s[1]的值l，而取到的最大范围不包括上边界，就是s[5]的值p。</p>\n<p>加号（+）是字符串连接运算符，星号（*）是重复操作</p>\n<h4 id=\"Python列表\"><a href=\"#Python列表\" class=\"headerlink\" title=\"Python列表\"></a>Python列表</h4><p>List（列表） 是 Python 中使用最频繁的数据类型。</p>\n<h4 id=\"python元组\"><a href=\"#python元组\" class=\"headerlink\" title=\"python元组\"></a>python元组</h4><p>元组是另一个数据类型，类似于List（列表）。</p>\n<p>元组用”()”标识。内部元素用逗号隔开。但是元组不能二次赋值，相当于只读列表</p>\n<h4 id=\"Python-字典\"><a href=\"#Python-字典\" class=\"headerlink\" title=\"Python 字典\"></a>Python 字典</h4>"},{"title":"sed & awk小结","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n\n<!--more-->\n\n# sed & awk小结\n\n`一直想认真掌握sed与awk已经很久了，但一直未找个以特别详细的资料和时间来做这件事，正好这两天受到启发，转而翻墙搜索国外资源，有了很大的收获，趁次机会攻克下来`\n\n## 前言\n\nsed与awk总得来说是两样东西，本身无直接关联，做在日常使用时两者经常使用到，并且常常混合使用，所以此次小结放在一起，分总式结构进行小结\n\n## sed\n\nsed相较awk更偏于工具一点，全称应该是strem editor (即流式编辑器)。面向的是一行一行内容\n\n### 使用形式\n\nsed [-nefr] [动作]\n选项与参数：\n-n ：使用安静(silent)模式。在一般 sed 的用法中，所有来自 STDIN 的数据一般都会被列出到终端上。但如果加上 -n 参数后，则只有经过sed 特殊处理的那一行(或者动作)才会被列出来。\n-e ：直接在命令列模式上进行 sed 的动作编辑；\n-f ：直接将 sed 的动作写在一个文件内， -f filename 则可以运行 filename 内的 sed 动作；\n-r ：sed 的动作支持的是延伸型正规表示法的语法。(默认是基础正规表示法语法)\n-i ：直接修改读取的文件内容，而不是输出到终端。\n\n动作说明： [n1[,n2]]function\nn1, n2 ：不见得会存在，一般代表『选择进行动作的行数』，举例来说，如果我的动作是需要在 10 到 20 行之间进行的，则『 10,20[动作行为] 』\n\n**function：**\na ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～\nc ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！\nd ：删除，因为是删除啊，所以 d 后面通常不接任何咚咚；\ni ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；\np ：列印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～\ns ：取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是啦！\n\n* * *\n\n## awk\n\n`尝试看awk已有些时日，整体效率不太好，但大体也有思路，现对awk进行一些简单总结，后面则进行实例操作`\nawk的细节小点比较多，一次或无法完全总结全，但总体感觉下来发现熟悉大体模式，具体细节可以再通过即时检索解决\n\n### awk命令的基本格式是:\n\n> `awk '/search_pattern/ { action_to_t[](http://)ake_on_matches; another_action; }' file_to_parse`\n\n其中searach 与action都可省略其中之一，若action省略，那么action默认为print操作\n如何search省略，那么默认action针对的是每一行如\n![b193032f8daa40faaffc84b673b46885-image.png](//img.wqkenqing.ren//file/2017/7/b193032f8daa40faaffc84b673b46885-image.png)\n![06ddb1ad717c434e939c3d0461b2d937-image.png](//img.wqkenqing.ren//file/2017/7/06ddb1ad717c434e939c3d0461b2d937-image.png)\n\n---\n附几个操作实例如\n![1b777aa53595428e9d56e0b66052f48c-image.png](//img.wqkenqing.ren//file/2017/7/1b777aa53595428e9d56e0b66052f48c-image.png)\n\n![a1e8b526c4a042b48e0e161e6eae35fe-image.png](//img.wqkenqing.ren//file/2017/7/a1e8b526c4a042b48e0e161e6eae35fe-image.png)\n\n![de2e1925530d410ba52f25ff0781f0b5-image.png](//img.wqkenqing.ren//file/2017/7/de2e1925530d410ba52f25ff0781f0b5-image.png)\n\n**这里是以空白区分了列，通过$后加不同的数字，表示不同的列，$0表示这一行，$1表示第一列**，类推。\n\n\n### awk的内置变量\n + **FILENAME**:当前输入文件的名称\n + **FNR**:当前输入文件数\n + **FS**:当前环境中的分隔符，默认是空白\n + **NF**:输入文件的每行对应的列数\n + **NR**:当前是第几个记录\n + **OFS**:列输出时的分隔符，默认是空白\n + **ORS**:记录输出时的分隔符，默认是新起一行\n + **RS**输入记录中的分隔符，默认是newline character\n\n 正如以上内置变量的存在，所以，awk在正式使用进可能面临更多复杂情况，而之前那种简单模式可以无法应对。于是，常用的awk的使用形态扩充为\n\n> awk 'BEGIN { action; }\n/search/ { action; }\nEND { action; }' input_file\n\n这里引入了BEGIN与END两个部份，用于做一些初始化或善后处理。\n![8a8d39f410944dcc9584c7052e2e46a4-image.png](//img.wqkenqing.ren//file/2017/7/8a8d39f410944dcc9584c7052e2e46a4-image.png)\n\n![3fb8e3723fbd439990cd8e000c673c9b-image.png](//img.wqkenqing.ren//file/2017/7/3fb8e3723fbd439990cd8e000c673c9b-image.png)\n\n\n### awk的一些常见的匹配操作\n+ awk '/sa/' file\n+ awk '$2 ~ /^sa/' file\n$number表示只匹配该列\n~ 表示“是”\n!~表示“不是”\n\n---\n\n至此一这就总结了一些较为基础的awk使用，就一般工作而言，已经能应对很多场景了。\n后续我会再进行更为详细的总结\n待续~~~","source":"_posts/王阁/技术/hexo/oldblog/blog23.md","raw":"---\n\ntitle: sed & awk小结\ndate: 2019-07-16\ntags:\n\n---\n此处简介\n\n<!--more-->\n\n# sed & awk小结\n\n`一直想认真掌握sed与awk已经很久了，但一直未找个以特别详细的资料和时间来做这件事，正好这两天受到启发，转而翻墙搜索国外资源，有了很大的收获，趁次机会攻克下来`\n\n## 前言\n\nsed与awk总得来说是两样东西，本身无直接关联，做在日常使用时两者经常使用到，并且常常混合使用，所以此次小结放在一起，分总式结构进行小结\n\n## sed\n\nsed相较awk更偏于工具一点，全称应该是strem editor (即流式编辑器)。面向的是一行一行内容\n\n### 使用形式\n\nsed [-nefr] [动作]\n选项与参数：\n-n ：使用安静(silent)模式。在一般 sed 的用法中，所有来自 STDIN 的数据一般都会被列出到终端上。但如果加上 -n 参数后，则只有经过sed 特殊处理的那一行(或者动作)才会被列出来。\n-e ：直接在命令列模式上进行 sed 的动作编辑；\n-f ：直接将 sed 的动作写在一个文件内， -f filename 则可以运行 filename 内的 sed 动作；\n-r ：sed 的动作支持的是延伸型正规表示法的语法。(默认是基础正规表示法语法)\n-i ：直接修改读取的文件内容，而不是输出到终端。\n\n动作说明： [n1[,n2]]function\nn1, n2 ：不见得会存在，一般代表『选择进行动作的行数』，举例来说，如果我的动作是需要在 10 到 20 行之间进行的，则『 10,20[动作行为] 』\n\n**function：**\na ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～\nc ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！\nd ：删除，因为是删除啊，所以 d 后面通常不接任何咚咚；\ni ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；\np ：列印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～\ns ：取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是啦！\n\n* * *\n\n## awk\n\n`尝试看awk已有些时日，整体效率不太好，但大体也有思路，现对awk进行一些简单总结，后面则进行实例操作`\nawk的细节小点比较多，一次或无法完全总结全，但总体感觉下来发现熟悉大体模式，具体细节可以再通过即时检索解决\n\n### awk命令的基本格式是:\n\n> `awk '/search_pattern/ { action_to_t[](http://)ake_on_matches; another_action; }' file_to_parse`\n\n其中searach 与action都可省略其中之一，若action省略，那么action默认为print操作\n如何search省略，那么默认action针对的是每一行如\n![b193032f8daa40faaffc84b673b46885-image.png](//img.wqkenqing.ren//file/2017/7/b193032f8daa40faaffc84b673b46885-image.png)\n![06ddb1ad717c434e939c3d0461b2d937-image.png](//img.wqkenqing.ren//file/2017/7/06ddb1ad717c434e939c3d0461b2d937-image.png)\n\n---\n附几个操作实例如\n![1b777aa53595428e9d56e0b66052f48c-image.png](//img.wqkenqing.ren//file/2017/7/1b777aa53595428e9d56e0b66052f48c-image.png)\n\n![a1e8b526c4a042b48e0e161e6eae35fe-image.png](//img.wqkenqing.ren//file/2017/7/a1e8b526c4a042b48e0e161e6eae35fe-image.png)\n\n![de2e1925530d410ba52f25ff0781f0b5-image.png](//img.wqkenqing.ren//file/2017/7/de2e1925530d410ba52f25ff0781f0b5-image.png)\n\n**这里是以空白区分了列，通过$后加不同的数字，表示不同的列，$0表示这一行，$1表示第一列**，类推。\n\n\n### awk的内置变量\n + **FILENAME**:当前输入文件的名称\n + **FNR**:当前输入文件数\n + **FS**:当前环境中的分隔符，默认是空白\n + **NF**:输入文件的每行对应的列数\n + **NR**:当前是第几个记录\n + **OFS**:列输出时的分隔符，默认是空白\n + **ORS**:记录输出时的分隔符，默认是新起一行\n + **RS**输入记录中的分隔符，默认是newline character\n\n 正如以上内置变量的存在，所以，awk在正式使用进可能面临更多复杂情况，而之前那种简单模式可以无法应对。于是，常用的awk的使用形态扩充为\n\n> awk 'BEGIN { action; }\n/search/ { action; }\nEND { action; }' input_file\n\n这里引入了BEGIN与END两个部份，用于做一些初始化或善后处理。\n![8a8d39f410944dcc9584c7052e2e46a4-image.png](//img.wqkenqing.ren//file/2017/7/8a8d39f410944dcc9584c7052e2e46a4-image.png)\n\n![3fb8e3723fbd439990cd8e000c673c9b-image.png](//img.wqkenqing.ren//file/2017/7/3fb8e3723fbd439990cd8e000c673c9b-image.png)\n\n\n### awk的一些常见的匹配操作\n+ awk '/sa/' file\n+ awk '$2 ~ /^sa/' file\n$number表示只匹配该列\n~ 表示“是”\n!~表示“不是”\n\n---\n\n至此一这就总结了一些较为基础的awk使用，就一般工作而言，已经能应对很多场景了。\n后续我会再进行更为详细的总结\n待续~~~","slug":"王阁/技术/hexo/oldblog/blog23","published":1,"updated":"2023-02-23T02:51:20.906Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsfy004lu6pwfh021p08","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h1 id=\"sed-amp-awk小结\"><a href=\"#sed-amp-awk小结\" class=\"headerlink\" title=\"sed &amp; awk小结\"></a>sed &amp; awk小结</h1><p><code>一直想认真掌握sed与awk已经很久了，但一直未找个以特别详细的资料和时间来做这件事，正好这两天受到启发，转而翻墙搜索国外资源，有了很大的收获，趁次机会攻克下来</code></p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>sed与awk总得来说是两样东西，本身无直接关联，做在日常使用时两者经常使用到，并且常常混合使用，所以此次小结放在一起，分总式结构进行小结</p>\n<h2 id=\"sed\"><a href=\"#sed\" class=\"headerlink\" title=\"sed\"></a>sed</h2><p>sed相较awk更偏于工具一点，全称应该是strem editor (即流式编辑器)。面向的是一行一行内容</p>\n<h3 id=\"使用形式\"><a href=\"#使用形式\" class=\"headerlink\" title=\"使用形式\"></a>使用形式</h3><p>sed [-nefr] [动作]<br>选项与参数：<br>-n ：使用安静(silent)模式。在一般 sed 的用法中，所有来自 STDIN 的数据一般都会被列出到终端上。但如果加上 -n 参数后，则只有经过sed 特殊处理的那一行(或者动作)才会被列出来。<br>-e ：直接在命令列模式上进行 sed 的动作编辑；<br>-f ：直接将 sed 的动作写在一个文件内， -f filename 则可以运行 filename 内的 sed 动作；<br>-r ：sed 的动作支持的是延伸型正规表示法的语法。(默认是基础正规表示法语法)<br>-i ：直接修改读取的文件内容，而不是输出到终端。</p>\n<p>动作说明： [n1[,n2]]function<br>n1, n2 ：不见得会存在，一般代表『选择进行动作的行数』，举例来说，如果我的动作是需要在 10 到 20 行之间进行的，则『 10,20[动作行为] 』</p>\n<p><strong>function：</strong><br>a ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～<br>c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！<br>d ：删除，因为是删除啊，所以 d 后面通常不接任何咚咚；<br>i ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；<br>p ：列印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～<br>s ：取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是啦！</p>\n<hr>\n<h2 id=\"awk\"><a href=\"#awk\" class=\"headerlink\" title=\"awk\"></a>awk</h2><p><code>尝试看awk已有些时日，整体效率不太好，但大体也有思路，现对awk进行一些简单总结，后面则进行实例操作</code><br>awk的细节小点比较多，一次或无法完全总结全，但总体感觉下来发现熟悉大体模式，具体细节可以再通过即时检索解决</p>\n<h3 id=\"awk命令的基本格式是\"><a href=\"#awk命令的基本格式是\" class=\"headerlink\" title=\"awk命令的基本格式是:\"></a>awk命令的基本格式是:</h3><blockquote>\n<p><code>awk &#39;/search_pattern/ { action_to_t[](http://)ake_on_matches; another_action; }&#39; file_to_parse</code></p>\n</blockquote>\n<p>其中searach 与action都可省略其中之一，若action省略，那么action默认为print操作<br>如何search省略，那么默认action针对的是每一行如<br><img src=\"//img.wqkenqing.ren//file/2017/7/b193032f8daa40faaffc84b673b46885-image.png\" alt=\"b193032f8daa40faaffc84b673b46885-image.png\"><br><img src=\"//img.wqkenqing.ren//file/2017/7/06ddb1ad717c434e939c3d0461b2d937-image.png\" alt=\"06ddb1ad717c434e939c3d0461b2d937-image.png\"></p>\n<hr>\n<p>附几个操作实例如<br><img src=\"//img.wqkenqing.ren//file/2017/7/1b777aa53595428e9d56e0b66052f48c-image.png\" alt=\"1b777aa53595428e9d56e0b66052f48c-image.png\"></p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/7/a1e8b526c4a042b48e0e161e6eae35fe-image.png\" alt=\"a1e8b526c4a042b48e0e161e6eae35fe-image.png\"></p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/7/de2e1925530d410ba52f25ff0781f0b5-image.png\" alt=\"de2e1925530d410ba52f25ff0781f0b5-image.png\"></p>\n<p><strong>这里是以空白区分了列，通过$后加不同的数字，表示不同的列，$0表示这一行，$1表示第一列</strong>，类推。</p>\n<h3 id=\"awk的内置变量\"><a href=\"#awk的内置变量\" class=\"headerlink\" title=\"awk的内置变量\"></a>awk的内置变量</h3><ul>\n<li><p><strong>FILENAME</strong>:当前输入文件的名称</p>\n</li>\n<li><p><strong>FNR</strong>:当前输入文件数</p>\n</li>\n<li><p><strong>FS</strong>:当前环境中的分隔符，默认是空白</p>\n</li>\n<li><p><strong>NF</strong>:输入文件的每行对应的列数</p>\n</li>\n<li><p><strong>NR</strong>:当前是第几个记录</p>\n</li>\n<li><p><strong>OFS</strong>:列输出时的分隔符，默认是空白</p>\n</li>\n<li><p><strong>ORS</strong>:记录输出时的分隔符，默认是新起一行</p>\n</li>\n<li><p><strong>RS</strong>输入记录中的分隔符，默认是newline character</p>\n<p>正如以上内置变量的存在，所以，awk在正式使用进可能面临更多复杂情况，而之前那种简单模式可以无法应对。于是，常用的awk的使用形态扩充为</p>\n</li>\n</ul>\n<blockquote>\n<p>awk ‘BEGIN { action; }<br>/search/ { action; }<br>END { action; }’ input_file</p>\n</blockquote>\n<p>这里引入了BEGIN与END两个部份，用于做一些初始化或善后处理。<br><img src=\"//img.wqkenqing.ren//file/2017/7/8a8d39f410944dcc9584c7052e2e46a4-image.png\" alt=\"8a8d39f410944dcc9584c7052e2e46a4-image.png\"></p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/7/3fb8e3723fbd439990cd8e000c673c9b-image.png\" alt=\"3fb8e3723fbd439990cd8e000c673c9b-image.png\"></p>\n<h3 id=\"awk的一些常见的匹配操作\"><a href=\"#awk的一些常见的匹配操作\" class=\"headerlink\" title=\"awk的一些常见的匹配操作\"></a>awk的一些常见的匹配操作</h3><ul>\n<li>awk ‘/sa/‘ file</li>\n<li>awk ‘$2 ~ /^sa/‘ file<br>$number表示只匹配该列<br>~ 表示“是”<br>!~表示“不是”</li>\n</ul>\n<hr>\n<p>至此一这就总结了一些较为基础的awk使用，就一般工作而言，已经能应对很多场景了。<br>后续我会再进行更为详细的总结<br>待续<del>~</del></p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h1 id=\"sed-amp-awk小结\"><a href=\"#sed-amp-awk小结\" class=\"headerlink\" title=\"sed &amp; awk小结\"></a>sed &amp; awk小结</h1><p><code>一直想认真掌握sed与awk已经很久了，但一直未找个以特别详细的资料和时间来做这件事，正好这两天受到启发，转而翻墙搜索国外资源，有了很大的收获，趁次机会攻克下来</code></p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>sed与awk总得来说是两样东西，本身无直接关联，做在日常使用时两者经常使用到，并且常常混合使用，所以此次小结放在一起，分总式结构进行小结</p>\n<h2 id=\"sed\"><a href=\"#sed\" class=\"headerlink\" title=\"sed\"></a>sed</h2><p>sed相较awk更偏于工具一点，全称应该是strem editor (即流式编辑器)。面向的是一行一行内容</p>\n<h3 id=\"使用形式\"><a href=\"#使用形式\" class=\"headerlink\" title=\"使用形式\"></a>使用形式</h3><p>sed [-nefr] [动作]<br>选项与参数：<br>-n ：使用安静(silent)模式。在一般 sed 的用法中，所有来自 STDIN 的数据一般都会被列出到终端上。但如果加上 -n 参数后，则只有经过sed 特殊处理的那一行(或者动作)才会被列出来。<br>-e ：直接在命令列模式上进行 sed 的动作编辑；<br>-f ：直接将 sed 的动作写在一个文件内， -f filename 则可以运行 filename 内的 sed 动作；<br>-r ：sed 的动作支持的是延伸型正规表示法的语法。(默认是基础正规表示法语法)<br>-i ：直接修改读取的文件内容，而不是输出到终端。</p>\n<p>动作说明： [n1[,n2]]function<br>n1, n2 ：不见得会存在，一般代表『选择进行动作的行数』，举例来说，如果我的动作是需要在 10 到 20 行之间进行的，则『 10,20[动作行为] 』</p>\n<p><strong>function：</strong><br>a ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～<br>c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！<br>d ：删除，因为是删除啊，所以 d 后面通常不接任何咚咚；<br>i ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；<br>p ：列印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～<br>s ：取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是啦！</p>\n<hr>\n<h2 id=\"awk\"><a href=\"#awk\" class=\"headerlink\" title=\"awk\"></a>awk</h2><p><code>尝试看awk已有些时日，整体效率不太好，但大体也有思路，现对awk进行一些简单总结，后面则进行实例操作</code><br>awk的细节小点比较多，一次或无法完全总结全，但总体感觉下来发现熟悉大体模式，具体细节可以再通过即时检索解决</p>\n<h3 id=\"awk命令的基本格式是\"><a href=\"#awk命令的基本格式是\" class=\"headerlink\" title=\"awk命令的基本格式是:\"></a>awk命令的基本格式是:</h3><blockquote>\n<p><code>awk &#39;/search_pattern/ { action_to_t[](http://)ake_on_matches; another_action; }&#39; file_to_parse</code></p>\n</blockquote>\n<p>其中searach 与action都可省略其中之一，若action省略，那么action默认为print操作<br>如何search省略，那么默认action针对的是每一行如<br><img src=\"//img.wqkenqing.ren//file/2017/7/b193032f8daa40faaffc84b673b46885-image.png\" alt=\"b193032f8daa40faaffc84b673b46885-image.png\"><br><img src=\"//img.wqkenqing.ren//file/2017/7/06ddb1ad717c434e939c3d0461b2d937-image.png\" alt=\"06ddb1ad717c434e939c3d0461b2d937-image.png\"></p>\n<hr>\n<p>附几个操作实例如<br><img src=\"//img.wqkenqing.ren//file/2017/7/1b777aa53595428e9d56e0b66052f48c-image.png\" alt=\"1b777aa53595428e9d56e0b66052f48c-image.png\"></p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/7/a1e8b526c4a042b48e0e161e6eae35fe-image.png\" alt=\"a1e8b526c4a042b48e0e161e6eae35fe-image.png\"></p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/7/de2e1925530d410ba52f25ff0781f0b5-image.png\" alt=\"de2e1925530d410ba52f25ff0781f0b5-image.png\"></p>\n<p><strong>这里是以空白区分了列，通过$后加不同的数字，表示不同的列，$0表示这一行，$1表示第一列</strong>，类推。</p>\n<h3 id=\"awk的内置变量\"><a href=\"#awk的内置变量\" class=\"headerlink\" title=\"awk的内置变量\"></a>awk的内置变量</h3><ul>\n<li><p><strong>FILENAME</strong>:当前输入文件的名称</p>\n</li>\n<li><p><strong>FNR</strong>:当前输入文件数</p>\n</li>\n<li><p><strong>FS</strong>:当前环境中的分隔符，默认是空白</p>\n</li>\n<li><p><strong>NF</strong>:输入文件的每行对应的列数</p>\n</li>\n<li><p><strong>NR</strong>:当前是第几个记录</p>\n</li>\n<li><p><strong>OFS</strong>:列输出时的分隔符，默认是空白</p>\n</li>\n<li><p><strong>ORS</strong>:记录输出时的分隔符，默认是新起一行</p>\n</li>\n<li><p><strong>RS</strong>输入记录中的分隔符，默认是newline character</p>\n<p>正如以上内置变量的存在，所以，awk在正式使用进可能面临更多复杂情况，而之前那种简单模式可以无法应对。于是，常用的awk的使用形态扩充为</p>\n</li>\n</ul>\n<blockquote>\n<p>awk ‘BEGIN { action; }<br>/search/ { action; }<br>END { action; }’ input_file</p>\n</blockquote>\n<p>这里引入了BEGIN与END两个部份，用于做一些初始化或善后处理。<br><img src=\"//img.wqkenqing.ren//file/2017/7/8a8d39f410944dcc9584c7052e2e46a4-image.png\" alt=\"8a8d39f410944dcc9584c7052e2e46a4-image.png\"></p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/7/3fb8e3723fbd439990cd8e000c673c9b-image.png\" alt=\"3fb8e3723fbd439990cd8e000c673c9b-image.png\"></p>\n<h3 id=\"awk的一些常见的匹配操作\"><a href=\"#awk的一些常见的匹配操作\" class=\"headerlink\" title=\"awk的一些常见的匹配操作\"></a>awk的一些常见的匹配操作</h3><ul>\n<li>awk ‘/sa/‘ file</li>\n<li>awk ‘$2 ~ /^sa/‘ file<br>$number表示只匹配该列<br>~ 表示“是”<br>!~表示“不是”</li>\n</ul>\n<hr>\n<p>至此一这就总结了一些较为基础的awk使用，就一般工作而言，已经能应对很多场景了。<br>后续我会再进行更为详细的总结<br>待续<del>~</del></p>"},{"_content":"#测试环境搭建小结\n`因一些原因，最近协助搭建测试服务器，主要涉及到了一服务器系统安装，环境配置，参数调优，软件使用，自动化建设等内容，因为主要是协助，所以着重小结我参与的部份`\n## 参数调优\n这里的参数调优主要针对的是服务器的调优，主要是针对出现问题后的调优，这次软件使用上大致问题有\n+ oom\n+ ioStream\n+ 端口数不足\n+ pid分配不够等问题\n\n### om\n对oom的调优主要的动作有调大分配给jvm的内存，但光调大内存不一定能解决问题，当遇到大量创建线程，但linux服务器允许该用户的执行的线程数不够时，会报无法创建的问题，严重会致使无法执行。所以还需要调大用户的进程数，查看用户信息通过ulimit -a\n### ioStream\n这个是io问题，经分析出现这个问题的主要原因应该该用户下限制了最大文件打开数，所以通过ulimit -n numbers即可调大该值\n但有时退出后可能会重新复原，所以需要长久变更可设置在.bashrc文件中\n### 端口数不足\n这是并发测试web接口时，发送的请求动作的完成需要时间，本机设置的端口区间可能无法满足大批量的端口需求，所以需要进行重新设置，主要方式是调大区间，调低端口被释放时间等\n\n 第一步，修改/etc/sysctl.conf文件，在文件中添加如下行：\n   net.ipv4.ip_local_port_range = 1024 65000\n   这表明将系统对本地端口范围限制设置为1024~65000之间。请注意，本地端口范围的最小值必须大于或等于1024；而端口范围的最大值则应小于或等于65535。修改完后保存此文件。\n[解决方案]([http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html)][1]\n[解决方案2](http://blog.chinaunix.net/uid-24907956-id-3428052.html)\n### pid分配不够等问题\n[pid分配不够](http://blog.csdn.net/cfaster/article/details/53065738)\n\n\n  [1]: http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html%29\n  [2]: http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html%29","source":"_posts/王阁/技术/hexo/oldblog/blog22.md","raw":"#测试环境搭建小结\n`因一些原因，最近协助搭建测试服务器，主要涉及到了一服务器系统安装，环境配置，参数调优，软件使用，自动化建设等内容，因为主要是协助，所以着重小结我参与的部份`\n## 参数调优\n这里的参数调优主要针对的是服务器的调优，主要是针对出现问题后的调优，这次软件使用上大致问题有\n+ oom\n+ ioStream\n+ 端口数不足\n+ pid分配不够等问题\n\n### om\n对oom的调优主要的动作有调大分配给jvm的内存，但光调大内存不一定能解决问题，当遇到大量创建线程，但linux服务器允许该用户的执行的线程数不够时，会报无法创建的问题，严重会致使无法执行。所以还需要调大用户的进程数，查看用户信息通过ulimit -a\n### ioStream\n这个是io问题，经分析出现这个问题的主要原因应该该用户下限制了最大文件打开数，所以通过ulimit -n numbers即可调大该值\n但有时退出后可能会重新复原，所以需要长久变更可设置在.bashrc文件中\n### 端口数不足\n这是并发测试web接口时，发送的请求动作的完成需要时间，本机设置的端口区间可能无法满足大批量的端口需求，所以需要进行重新设置，主要方式是调大区间，调低端口被释放时间等\n\n 第一步，修改/etc/sysctl.conf文件，在文件中添加如下行：\n   net.ipv4.ip_local_port_range = 1024 65000\n   这表明将系统对本地端口范围限制设置为1024~65000之间。请注意，本地端口范围的最小值必须大于或等于1024；而端口范围的最大值则应小于或等于65535。修改完后保存此文件。\n[解决方案]([http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html)][1]\n[解决方案2](http://blog.chinaunix.net/uid-24907956-id-3428052.html)\n### pid分配不够等问题\n[pid分配不够](http://blog.csdn.net/cfaster/article/details/53065738)\n\n\n  [1]: http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html%29\n  [2]: http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html%29","slug":"王阁/技术/hexo/oldblog/blog22","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/hexo/oldblog/blog22","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg1004nu6pw7czof0su","content":"<p>#测试环境搭建小结<br><code>因一些原因，最近协助搭建测试服务器，主要涉及到了一服务器系统安装，环境配置，参数调优，软件使用，自动化建设等内容，因为主要是协助，所以着重小结我参与的部份</code></p>\n<h2 id=\"参数调优\"><a href=\"#参数调优\" class=\"headerlink\" title=\"参数调优\"></a>参数调优</h2><p>这里的参数调优主要针对的是服务器的调优，主要是针对出现问题后的调优，这次软件使用上大致问题有</p>\n<ul>\n<li>oom</li>\n<li>ioStream</li>\n<li>端口数不足</li>\n<li>pid分配不够等问题</li>\n</ul>\n<h3 id=\"om\"><a href=\"#om\" class=\"headerlink\" title=\"om\"></a>om</h3><p>对oom的调优主要的动作有调大分配给jvm的内存，但光调大内存不一定能解决问题，当遇到大量创建线程，但linux服务器允许该用户的执行的线程数不够时，会报无法创建的问题，严重会致使无法执行。所以还需要调大用户的进程数，查看用户信息通过ulimit -a</p>\n<h3 id=\"ioStream\"><a href=\"#ioStream\" class=\"headerlink\" title=\"ioStream\"></a>ioStream</h3><p>这个是io问题，经分析出现这个问题的主要原因应该该用户下限制了最大文件打开数，所以通过ulimit -n numbers即可调大该值<br>但有时退出后可能会重新复原，所以需要长久变更可设置在.bashrc文件中</p>\n<h3 id=\"端口数不足\"><a href=\"#端口数不足\" class=\"headerlink\" title=\"端口数不足\"></a>端口数不足</h3><p>这是并发测试web接口时，发送的请求动作的完成需要时间，本机设置的端口区间可能无法满足大批量的端口需求，所以需要进行重新设置，主要方式是调大区间，调低端口被释放时间等</p>\n<p> 第一步，修改/etc/sysctl.conf文件，在文件中添加如下行：<br>   net.ipv4.ip_local_port_range = 1024 65000<br>   这表明将系统对本地端口范围限制设置为1024~65000之间。请注意，本地端口范围的最小值必须大于或等于1024；而端口范围的最大值则应小于或等于65535。修改完后保存此文件。<br><a href=\"[http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html\">解决方案</a>]<a href=\"http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html%29\" target=\"_blank\" rel=\"noopener\">1</a><br><a href=\"http://blog.chinaunix.net/uid-24907956-id-3428052.html\" target=\"_blank\" rel=\"noopener\">解决方案2</a></p>\n<h3 id=\"pid分配不够等问题\"><a href=\"#pid分配不够等问题\" class=\"headerlink\" title=\"pid分配不够等问题\"></a>pid分配不够等问题</h3><p><a href=\"http://blog.csdn.net/cfaster/article/details/53065738\" target=\"_blank\" rel=\"noopener\">pid分配不够</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>#测试环境搭建小结<br><code>因一些原因，最近协助搭建测试服务器，主要涉及到了一服务器系统安装，环境配置，参数调优，软件使用，自动化建设等内容，因为主要是协助，所以着重小结我参与的部份</code></p>\n<h2 id=\"参数调优\"><a href=\"#参数调优\" class=\"headerlink\" title=\"参数调优\"></a>参数调优</h2><p>这里的参数调优主要针对的是服务器的调优，主要是针对出现问题后的调优，这次软件使用上大致问题有</p>\n<ul>\n<li>oom</li>\n<li>ioStream</li>\n<li>端口数不足</li>\n<li>pid分配不够等问题</li>\n</ul>\n<h3 id=\"om\"><a href=\"#om\" class=\"headerlink\" title=\"om\"></a>om</h3><p>对oom的调优主要的动作有调大分配给jvm的内存，但光调大内存不一定能解决问题，当遇到大量创建线程，但linux服务器允许该用户的执行的线程数不够时，会报无法创建的问题，严重会致使无法执行。所以还需要调大用户的进程数，查看用户信息通过ulimit -a</p>\n<h3 id=\"ioStream\"><a href=\"#ioStream\" class=\"headerlink\" title=\"ioStream\"></a>ioStream</h3><p>这个是io问题，经分析出现这个问题的主要原因应该该用户下限制了最大文件打开数，所以通过ulimit -n numbers即可调大该值<br>但有时退出后可能会重新复原，所以需要长久变更可设置在.bashrc文件中</p>\n<h3 id=\"端口数不足\"><a href=\"#端口数不足\" class=\"headerlink\" title=\"端口数不足\"></a>端口数不足</h3><p>这是并发测试web接口时，发送的请求动作的完成需要时间，本机设置的端口区间可能无法满足大批量的端口需求，所以需要进行重新设置，主要方式是调大区间，调低端口被释放时间等</p>\n<p> 第一步，修改/etc/sysctl.conf文件，在文件中添加如下行：<br>   net.ipv4.ip_local_port_range = 1024 65000<br>   这表明将系统对本地端口范围限制设置为1024~65000之间。请注意，本地端口范围的最小值必须大于或等于1024；而端口范围的最大值则应小于或等于65535。修改完后保存此文件。<br><a href=\"[http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html\">解决方案</a>]<a href=\"http://blog.sina.com.cn/s/blog_658c8cea0101l2sw.html%29\" target=\"_blank\" rel=\"noopener\">1</a><br><a href=\"http://blog.chinaunix.net/uid-24907956-id-3428052.html\" target=\"_blank\" rel=\"noopener\">解决方案2</a></p>\n<h3 id=\"pid分配不够等问题\"><a href=\"#pid分配不够等问题\" class=\"headerlink\" title=\"pid分配不够等问题\"></a>pid分配不够等问题</h3><p><a href=\"http://blog.csdn.net/cfaster/article/details/53065738\" target=\"_blank\" rel=\"noopener\">pid分配不够</a></p>\n"},{"title":"爬虫之nutch","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n<!--more-->\n\n `这阵子主要研究的爬虫方向，主要以java为语言基础,nutch为自动框架，jsoup作为自主爬虫插件开发基础，进行了一些有针对性的实站，在这些过程中，也遇到了一些问题和心得，觉得有必要总结一下`\n\n## 爬虫之nutch\n### nutch使用体验与感悟\n在这里之所以以nutch开篇，因为在接触爬虫之前就一直有听过它的大名，知道它是我们java语言栈中的爬虫利器，而且因为它，诞生了hadoop这一重器，后者在如今天大数据技术圈的名头，应该是无人不晓吧。所以，多种因素的促使下，让我入了nutch的坑。而本文虽是不仅针对nutch的总结，但主要还是以nutch为主。\n\n经过一阵的实际体验,nutch给我的感觉，老实说确实是强,百科中说nutch的目的是“Nutch 致力于让每个人能很容易, 同时花费很少就可以配置世界一流的Web搜索引擎. 为了完成这一宏伟的目标, Nutch必须能够做到”,能有这么宏伟的目标，自然得有相应的实力来支撑。但就我体验来说，它确实是强，经过简单的配置后，几个简单的指令就能对页面进行抓取，但我觉得也有几个比较明显的让人体验不太好的地方\n\n\n1. 对动态生成的网页内容的抓取不理想，或要通过其它的插件，但插件的引入也不如想像般顺利\n2. 版本太多，且很多版本之间的差异明显。在后面会尝试说明一下。\n3. 资料太少，有很多场景国外都没有有效的解决策略（公网检索下），国内环境就更差了，为了搜集资料我多次去过国家图书馆，逛过书店等，都没太找到特别详尽且有针对性的资料，所以nutch的整个踩坑过程是很痛苦的，我后面会将我目前调使的nutch抓取服务配置和一些踩坑进行详细的总结，我觉得，就我之前对网上的搜集资料的掌握的情况来看，接下来我给出的总结，或者能带来一些更可靠的价值。\n综上，我对nutch的感悟是又爱又恨。爱得是它确实是能很便利的帮忙爬取一些东西，恨的是它又不完全是那么便利\n\n### nutch搭建与踩坑回顾\n\n前文中已经提到过nutch有很多版本，目前最新版本2.3.1，它的多个版本间是有很多差异的，比如1.X的版本间的持久层是没有抽象出来的，所以1.X版本的持久化形式比较单一。而2.X版本中持久层被抽象出来，通过一不同的配置即可实现多元的持久层存储。如mysql、hbase、avro等。但在2.3.X开始就不支持mysql，官网是明确公示过，或者说从2.2.X开始就不支持了，但就实际操作来看2.2.X还是能适配mysql的，而2.3.X在我的实际操作中是不行的。另在这里说一下，我的持久层主要以mysql为主，后面可能还会再试试hbase，而一开始不采用hbase不是我没尝试，而是尝试过，发现nutch目前适配的hbase版本太低，而我服务器上已经搭建的hbase集群环境的版本相对高了不少，无法适配。我想没有必要为此就针对hbase的版本进行更替，所以采用mysql作为持久层，**这是坑一**。\n在使用nutch之前，对其是一点都不了解的，或者说对爬虫需求也都是不熟悉的。所以，对其的功能是寄于厚望，一开始就配一个网站的首页url，就设置多线程，多层抓取。但经过多次实站后，发现有些网站中一部份或大部份都不能抓取。再随着深入观察发现，很多是动态生成的内容。更甚者，有些内容的加载是页面加载后，再发送ajax来加载页面的一些关键内容。而原本考虑nutch是支持插件扩展的，原想直接通过检索，求助于互联网，希望直接就能找到一款ajax扩展的插件，然而，几经周折，都未成行。**这是坑二**\n\n其它还有一些小坑，具体我在下面搭建环节具体结细节处再提，虽小，但影响也挺大，而且比较坑人。以上都是主要通过人力暂未能直接解决的坑。所以先列出来，下面，我回顾下我的nutch搭建环节，其中会给出一些小坑与相应的解决方案\n\n#### 搭建\nnutch的搭建分为分布式与单机版，我目前主要涉猎的是nutch单机版。具体的版本选择，我尝试过nutch1.2与nutch1.7以上的所有版本，1.X与2.X的主要差异在于2.X将持久层给抽象出来了。总得来说nuthc2.x的实用性相对高些。而我以我目前具体使用的版本2.2.1为例，进行介绍\nstep 1.获取nutch2.2.1 http://archive.apache.org/dist/\n这个url能定位到apache很多软件和历史版本。进入这里，然后找到nutch，下载相应的版本（该连接有时可能打不开，翻墙试试）。\nstep 2. 对ivy下的ivy.xml与ivysetting.xml进行修改。\n这里就有之前提到的坑一了，这里可能配置对持久层的依赖了。我这以mysql配置。\n\n修改${APACHE_NUTCH_HOME}/ivy/ivy.xml文件\n\n将以下行的注释取消\n\n```    org=”mysql”  name=”mysql-connector-java”  rev=”5.1.18″  conf=”*->default”/>```\n\n修改以下行。从默认的\n```   org=\"org.apache.gora\"  name=\"gora-core\"  rev=\"0.3\"  conf=\"*->default\"/>```\n改成\n```    org=\"org.apache.gora\"  name=\"gora-core\"  rev=\"0.2.1\"  conf=\"*->default\"/>```\n\n取消以下行的注释\n```  org=\"org.apache.gora\"  name=\"gora-sql\"  rev=\"0.1.1-incubating\"  conf=\"*->default\" />```\n\n如果按默认的不做修改，将会在抓取网页时遇到以下错误。\n\n![e8f001bf53174dd985d3ffd36c6fb32d-image.png](//img.wqkenqing.ren//file/2017/8/e8f001bf53174dd985d3ffd36c6fb32d-image.png)\n\n然后配置ivysetting.xml，这个文件类似maven的.setting.xml文件，主要修改相应的软件仓库源，默认地址可能会出现下载缓慢的情况，建议换成国内源，贴一个我配的阿里的。\n![ffc49faa6d304b2694313bd5c206ee94-image.png](//img.wqkenqing.ren//file/2017/8/ffc49faa6d304b2694313bd5c206ee94-image.png)\n\n\n速度杠杠的。\n这时就可以进行编译了，通过终端进nutch文件地址进执行ant\n\n然后配置持久层的配置文件，gora.properties\n![33e8c343b9854449897c28dd5177409f-image.png](//img.wqkenqing.ren//file/2017/8/33e8c343b9854449897c28dd5177409f-image.png)\n\n\n接下来配另mysql的映射文件gora-sql-mapping.xml，可以这么说，这个地方出现的坑是我遇到的坑最多的地方之一。因为我是事后总结，平日也有工任务，所以，在出现坑的时侯，我首要的考虑的是解决的它，所以解决这些问题后，可能能记得是大致是什么状况，但无法具体复现，我在这以总结，提练式的对这些小坑进行叙述，就不贴具体的错误日志了。\n\n首先，文件中的默认配置id的大小是512.这个对于以unicode，准确的说以utf8为编码格式的mysql来说是过长的，会在inject就报sql初始化错误，id too long\n**解决方式**\n将id的长度改小，我设置的是180，nutch默认一般以target url拼接成id，所以一般来讲，180的id是妥妥够用的。\n\n类似的问题还会出现一些如text ,content过长的问题，初次搭建我这先建议改小试试，后面还有根治的方式。\n\n修改了gora-sql-mapping.xml文件后，执行抓取指令，以bin/nutch crawl urlfile  -threads number -deepth num 这是nutch 普遍用的一个指行指令，这个指令执行时会默认将数据持久化到webpage的表中，这种方式缺点是不太灵活，复杂任务的时候不好操作。\n\n另一种bin/crawl urlfile -crawlId name (这个name会作为对应的表名组成部份) \"solrrl\" \"num\"用于指定解析程度\n这种方式相对而言更灵活，后面我主要采用这种方式。这里有个小细节，bin/crawl 这个脚本是可以尝试更改的，它默认执行任务时只创建了50，而这种方式无法像上面那样指定创建线程数，所以我更改了crawl文件的初始值，将参数调值2000.所以可以根据自己需求，酌情更改。\n\nbin/nutch parse 有些fetch 任务执行完成后，parse数据同步至数据库时可能会产生一些错误，那么可以通过这个指令尝试进行解析。\n示例：bin/nutch parse -crawlId name -all\n这里容易出现前面提到过的一个问题，就是在解析时，content 或text 中的内容格式不对，或text 内容中出现在了emoji等情况，都可能使解析任务中断。我经过一翻调整，算是有一个统一解决方案：在这里贴出来参考\n1、将数据库编码格式设置为utf8mb4；\n2、将text和content的gora-mapping.xml文件中添加jdbc-type=“text” 或jdbc-type=\"blob\"的设置，即指明其数据库中对应的类型，避免长度等问题\n3、上两者结合的一个情况，text存入文中的内容有编码格式，相对读取轻松，blob以二进制形式存放，取值需要转码，所以在不出错的情况下优先设为text，而这时，数据库设为utf8mb4时就不要在jdbc url 中设置utf8格式了，这样反而会出现问题。\n![ae5a036dcc9c45a29fdfa0ed2d345eca-image.png](//http://img.wqkenqing.ren//file/2017/9/ae5a036dcc9c45a29fdfa0ed2d345eca-image.png)\n\n至此 nutch日常的主要使用指令就这两个，还有些 如果bin/nutch fetch bin/nutch gernate\n这些相对出错较少，出错的影响和对策网上也相对较多，就不再缀述了。\n\n---\n\n至此爬虫服务的总结就要告一段落了，这篇文章体量相对较大，我是断断续续逐步完成的，所以，后面更多是凭回忆出的之前深刻影响且在网上少有明确解决方案的一些问题，给出我的解决方式，所以，如果这篇总结针对的算是nutch使用过程中，尝试更进一步的助力，而非特别基础的。如果看到此篇文章的你对nutch还有其它的一些问题，可以尝试留言，我们一起探讨。\n\n\n\n\n\n\n","source":"_posts/王阁/技术/hexo/oldblog/blog25.md","raw":"\n---\n\ntitle: 爬虫之nutch\ndate: 2019-07-16\ntags: \n\n---\n此处简介\n<!--more-->\n\n `这阵子主要研究的爬虫方向，主要以java为语言基础,nutch为自动框架，jsoup作为自主爬虫插件开发基础，进行了一些有针对性的实站，在这些过程中，也遇到了一些问题和心得，觉得有必要总结一下`\n\n## 爬虫之nutch\n### nutch使用体验与感悟\n在这里之所以以nutch开篇，因为在接触爬虫之前就一直有听过它的大名，知道它是我们java语言栈中的爬虫利器，而且因为它，诞生了hadoop这一重器，后者在如今天大数据技术圈的名头，应该是无人不晓吧。所以，多种因素的促使下，让我入了nutch的坑。而本文虽是不仅针对nutch的总结，但主要还是以nutch为主。\n\n经过一阵的实际体验,nutch给我的感觉，老实说确实是强,百科中说nutch的目的是“Nutch 致力于让每个人能很容易, 同时花费很少就可以配置世界一流的Web搜索引擎. 为了完成这一宏伟的目标, Nutch必须能够做到”,能有这么宏伟的目标，自然得有相应的实力来支撑。但就我体验来说，它确实是强，经过简单的配置后，几个简单的指令就能对页面进行抓取，但我觉得也有几个比较明显的让人体验不太好的地方\n\n\n1. 对动态生成的网页内容的抓取不理想，或要通过其它的插件，但插件的引入也不如想像般顺利\n2. 版本太多，且很多版本之间的差异明显。在后面会尝试说明一下。\n3. 资料太少，有很多场景国外都没有有效的解决策略（公网检索下），国内环境就更差了，为了搜集资料我多次去过国家图书馆，逛过书店等，都没太找到特别详尽且有针对性的资料，所以nutch的整个踩坑过程是很痛苦的，我后面会将我目前调使的nutch抓取服务配置和一些踩坑进行详细的总结，我觉得，就我之前对网上的搜集资料的掌握的情况来看，接下来我给出的总结，或者能带来一些更可靠的价值。\n综上，我对nutch的感悟是又爱又恨。爱得是它确实是能很便利的帮忙爬取一些东西，恨的是它又不完全是那么便利\n\n### nutch搭建与踩坑回顾\n\n前文中已经提到过nutch有很多版本，目前最新版本2.3.1，它的多个版本间是有很多差异的，比如1.X的版本间的持久层是没有抽象出来的，所以1.X版本的持久化形式比较单一。而2.X版本中持久层被抽象出来，通过一不同的配置即可实现多元的持久层存储。如mysql、hbase、avro等。但在2.3.X开始就不支持mysql，官网是明确公示过，或者说从2.2.X开始就不支持了，但就实际操作来看2.2.X还是能适配mysql的，而2.3.X在我的实际操作中是不行的。另在这里说一下，我的持久层主要以mysql为主，后面可能还会再试试hbase，而一开始不采用hbase不是我没尝试，而是尝试过，发现nutch目前适配的hbase版本太低，而我服务器上已经搭建的hbase集群环境的版本相对高了不少，无法适配。我想没有必要为此就针对hbase的版本进行更替，所以采用mysql作为持久层，**这是坑一**。\n在使用nutch之前，对其是一点都不了解的，或者说对爬虫需求也都是不熟悉的。所以，对其的功能是寄于厚望，一开始就配一个网站的首页url，就设置多线程，多层抓取。但经过多次实站后，发现有些网站中一部份或大部份都不能抓取。再随着深入观察发现，很多是动态生成的内容。更甚者，有些内容的加载是页面加载后，再发送ajax来加载页面的一些关键内容。而原本考虑nutch是支持插件扩展的，原想直接通过检索，求助于互联网，希望直接就能找到一款ajax扩展的插件，然而，几经周折，都未成行。**这是坑二**\n\n其它还有一些小坑，具体我在下面搭建环节具体结细节处再提，虽小，但影响也挺大，而且比较坑人。以上都是主要通过人力暂未能直接解决的坑。所以先列出来，下面，我回顾下我的nutch搭建环节，其中会给出一些小坑与相应的解决方案\n\n#### 搭建\nnutch的搭建分为分布式与单机版，我目前主要涉猎的是nutch单机版。具体的版本选择，我尝试过nutch1.2与nutch1.7以上的所有版本，1.X与2.X的主要差异在于2.X将持久层给抽象出来了。总得来说nuthc2.x的实用性相对高些。而我以我目前具体使用的版本2.2.1为例，进行介绍\nstep 1.获取nutch2.2.1 http://archive.apache.org/dist/\n这个url能定位到apache很多软件和历史版本。进入这里，然后找到nutch，下载相应的版本（该连接有时可能打不开，翻墙试试）。\nstep 2. 对ivy下的ivy.xml与ivysetting.xml进行修改。\n这里就有之前提到的坑一了，这里可能配置对持久层的依赖了。我这以mysql配置。\n\n修改${APACHE_NUTCH_HOME}/ivy/ivy.xml文件\n\n将以下行的注释取消\n\n```    org=”mysql”  name=”mysql-connector-java”  rev=”5.1.18″  conf=”*->default”/>```\n\n修改以下行。从默认的\n```   org=\"org.apache.gora\"  name=\"gora-core\"  rev=\"0.3\"  conf=\"*->default\"/>```\n改成\n```    org=\"org.apache.gora\"  name=\"gora-core\"  rev=\"0.2.1\"  conf=\"*->default\"/>```\n\n取消以下行的注释\n```  org=\"org.apache.gora\"  name=\"gora-sql\"  rev=\"0.1.1-incubating\"  conf=\"*->default\" />```\n\n如果按默认的不做修改，将会在抓取网页时遇到以下错误。\n\n![e8f001bf53174dd985d3ffd36c6fb32d-image.png](//img.wqkenqing.ren//file/2017/8/e8f001bf53174dd985d3ffd36c6fb32d-image.png)\n\n然后配置ivysetting.xml，这个文件类似maven的.setting.xml文件，主要修改相应的软件仓库源，默认地址可能会出现下载缓慢的情况，建议换成国内源，贴一个我配的阿里的。\n![ffc49faa6d304b2694313bd5c206ee94-image.png](//img.wqkenqing.ren//file/2017/8/ffc49faa6d304b2694313bd5c206ee94-image.png)\n\n\n速度杠杠的。\n这时就可以进行编译了，通过终端进nutch文件地址进执行ant\n\n然后配置持久层的配置文件，gora.properties\n![33e8c343b9854449897c28dd5177409f-image.png](//img.wqkenqing.ren//file/2017/8/33e8c343b9854449897c28dd5177409f-image.png)\n\n\n接下来配另mysql的映射文件gora-sql-mapping.xml，可以这么说，这个地方出现的坑是我遇到的坑最多的地方之一。因为我是事后总结，平日也有工任务，所以，在出现坑的时侯，我首要的考虑的是解决的它，所以解决这些问题后，可能能记得是大致是什么状况，但无法具体复现，我在这以总结，提练式的对这些小坑进行叙述，就不贴具体的错误日志了。\n\n首先，文件中的默认配置id的大小是512.这个对于以unicode，准确的说以utf8为编码格式的mysql来说是过长的，会在inject就报sql初始化错误，id too long\n**解决方式**\n将id的长度改小，我设置的是180，nutch默认一般以target url拼接成id，所以一般来讲，180的id是妥妥够用的。\n\n类似的问题还会出现一些如text ,content过长的问题，初次搭建我这先建议改小试试，后面还有根治的方式。\n\n修改了gora-sql-mapping.xml文件后，执行抓取指令，以bin/nutch crawl urlfile  -threads number -deepth num 这是nutch 普遍用的一个指行指令，这个指令执行时会默认将数据持久化到webpage的表中，这种方式缺点是不太灵活，复杂任务的时候不好操作。\n\n另一种bin/crawl urlfile -crawlId name (这个name会作为对应的表名组成部份) \"solrrl\" \"num\"用于指定解析程度\n这种方式相对而言更灵活，后面我主要采用这种方式。这里有个小细节，bin/crawl 这个脚本是可以尝试更改的，它默认执行任务时只创建了50，而这种方式无法像上面那样指定创建线程数，所以我更改了crawl文件的初始值，将参数调值2000.所以可以根据自己需求，酌情更改。\n\nbin/nutch parse 有些fetch 任务执行完成后，parse数据同步至数据库时可能会产生一些错误，那么可以通过这个指令尝试进行解析。\n示例：bin/nutch parse -crawlId name -all\n这里容易出现前面提到过的一个问题，就是在解析时，content 或text 中的内容格式不对，或text 内容中出现在了emoji等情况，都可能使解析任务中断。我经过一翻调整，算是有一个统一解决方案：在这里贴出来参考\n1、将数据库编码格式设置为utf8mb4；\n2、将text和content的gora-mapping.xml文件中添加jdbc-type=“text” 或jdbc-type=\"blob\"的设置，即指明其数据库中对应的类型，避免长度等问题\n3、上两者结合的一个情况，text存入文中的内容有编码格式，相对读取轻松，blob以二进制形式存放，取值需要转码，所以在不出错的情况下优先设为text，而这时，数据库设为utf8mb4时就不要在jdbc url 中设置utf8格式了，这样反而会出现问题。\n![ae5a036dcc9c45a29fdfa0ed2d345eca-image.png](//http://img.wqkenqing.ren//file/2017/9/ae5a036dcc9c45a29fdfa0ed2d345eca-image.png)\n\n至此 nutch日常的主要使用指令就这两个，还有些 如果bin/nutch fetch bin/nutch gernate\n这些相对出错较少，出错的影响和对策网上也相对较多，就不再缀述了。\n\n---\n\n至此爬虫服务的总结就要告一段落了，这篇文章体量相对较大，我是断断续续逐步完成的，所以，后面更多是凭回忆出的之前深刻影响且在网上少有明确解决方案的一些问题，给出我的解决方式，所以，如果这篇总结针对的算是nutch使用过程中，尝试更进一步的助力，而非特别基础的。如果看到此篇文章的你对nutch还有其它的一些问题，可以尝试留言，我们一起探讨。\n\n\n\n\n\n\n","slug":"王阁/技术/hexo/oldblog/blog25","published":1,"updated":"2023-02-23T02:51:20.906Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg2004pu6pw6k0f2xbh","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<p> <code>这阵子主要研究的爬虫方向，主要以java为语言基础,nutch为自动框架，jsoup作为自主爬虫插件开发基础，进行了一些有针对性的实站，在这些过程中，也遇到了一些问题和心得，觉得有必要总结一下</code></p>\n<h2 id=\"爬虫之nutch\"><a href=\"#爬虫之nutch\" class=\"headerlink\" title=\"爬虫之nutch\"></a>爬虫之nutch</h2><h3 id=\"nutch使用体验与感悟\"><a href=\"#nutch使用体验与感悟\" class=\"headerlink\" title=\"nutch使用体验与感悟\"></a>nutch使用体验与感悟</h3><p>在这里之所以以nutch开篇，因为在接触爬虫之前就一直有听过它的大名，知道它是我们java语言栈中的爬虫利器，而且因为它，诞生了hadoop这一重器，后者在如今天大数据技术圈的名头，应该是无人不晓吧。所以，多种因素的促使下，让我入了nutch的坑。而本文虽是不仅针对nutch的总结，但主要还是以nutch为主。</p>\n<p>经过一阵的实际体验,nutch给我的感觉，老实说确实是强,百科中说nutch的目的是“Nutch 致力于让每个人能很容易, 同时花费很少就可以配置世界一流的Web搜索引擎. 为了完成这一宏伟的目标, Nutch必须能够做到”,能有这么宏伟的目标，自然得有相应的实力来支撑。但就我体验来说，它确实是强，经过简单的配置后，几个简单的指令就能对页面进行抓取，但我觉得也有几个比较明显的让人体验不太好的地方</p>\n<ol>\n<li>对动态生成的网页内容的抓取不理想，或要通过其它的插件，但插件的引入也不如想像般顺利</li>\n<li>版本太多，且很多版本之间的差异明显。在后面会尝试说明一下。</li>\n<li>资料太少，有很多场景国外都没有有效的解决策略（公网检索下），国内环境就更差了，为了搜集资料我多次去过国家图书馆，逛过书店等，都没太找到特别详尽且有针对性的资料，所以nutch的整个踩坑过程是很痛苦的，我后面会将我目前调使的nutch抓取服务配置和一些踩坑进行详细的总结，我觉得，就我之前对网上的搜集资料的掌握的情况来看，接下来我给出的总结，或者能带来一些更可靠的价值。<br>综上，我对nutch的感悟是又爱又恨。爱得是它确实是能很便利的帮忙爬取一些东西，恨的是它又不完全是那么便利</li>\n</ol>\n<h3 id=\"nutch搭建与踩坑回顾\"><a href=\"#nutch搭建与踩坑回顾\" class=\"headerlink\" title=\"nutch搭建与踩坑回顾\"></a>nutch搭建与踩坑回顾</h3><p>前文中已经提到过nutch有很多版本，目前最新版本2.3.1，它的多个版本间是有很多差异的，比如1.X的版本间的持久层是没有抽象出来的，所以1.X版本的持久化形式比较单一。而2.X版本中持久层被抽象出来，通过一不同的配置即可实现多元的持久层存储。如mysql、hbase、avro等。但在2.3.X开始就不支持mysql，官网是明确公示过，或者说从2.2.X开始就不支持了，但就实际操作来看2.2.X还是能适配mysql的，而2.3.X在我的实际操作中是不行的。另在这里说一下，我的持久层主要以mysql为主，后面可能还会再试试hbase，而一开始不采用hbase不是我没尝试，而是尝试过，发现nutch目前适配的hbase版本太低，而我服务器上已经搭建的hbase集群环境的版本相对高了不少，无法适配。我想没有必要为此就针对hbase的版本进行更替，所以采用mysql作为持久层，<strong>这是坑一</strong>。<br>在使用nutch之前，对其是一点都不了解的，或者说对爬虫需求也都是不熟悉的。所以，对其的功能是寄于厚望，一开始就配一个网站的首页url，就设置多线程，多层抓取。但经过多次实站后，发现有些网站中一部份或大部份都不能抓取。再随着深入观察发现，很多是动态生成的内容。更甚者，有些内容的加载是页面加载后，再发送ajax来加载页面的一些关键内容。而原本考虑nutch是支持插件扩展的，原想直接通过检索，求助于互联网，希望直接就能找到一款ajax扩展的插件，然而，几经周折，都未成行。<strong>这是坑二</strong></p>\n<p>其它还有一些小坑，具体我在下面搭建环节具体结细节处再提，虽小，但影响也挺大，而且比较坑人。以上都是主要通过人力暂未能直接解决的坑。所以先列出来，下面，我回顾下我的nutch搭建环节，其中会给出一些小坑与相应的解决方案</p>\n<h4 id=\"搭建\"><a href=\"#搭建\" class=\"headerlink\" title=\"搭建\"></a>搭建</h4><p>nutch的搭建分为分布式与单机版，我目前主要涉猎的是nutch单机版。具体的版本选择，我尝试过nutch1.2与nutch1.7以上的所有版本，1.X与2.X的主要差异在于2.X将持久层给抽象出来了。总得来说nuthc2.x的实用性相对高些。而我以我目前具体使用的版本2.2.1为例，进行介绍<br>step 1.获取nutch2.2.1 <a href=\"http://archive.apache.org/dist/\" target=\"_blank\" rel=\"noopener\">http://archive.apache.org/dist/</a><br>这个url能定位到apache很多软件和历史版本。进入这里，然后找到nutch，下载相应的版本（该连接有时可能打不开，翻墙试试）。<br>step 2. 对ivy下的ivy.xml与ivysetting.xml进行修改。<br>这里就有之前提到的坑一了，这里可能配置对持久层的依赖了。我这以mysql配置。</p>\n<p>修改${APACHE_NUTCH_HOME}/ivy/ivy.xml文件</p>\n<p>将以下行的注释取消</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">修改以下行。从默认的</span><br><span class=\"line\">&#96;&#96;&#96;   org&#x3D;&quot;org.apache.gora&quot;  name&#x3D;&quot;gora-core&quot;  rev&#x3D;&quot;0.3&quot;  conf&#x3D;&quot;*-&gt;default&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>\n<p>改成</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">取消以下行的注释</span><br><span class=\"line\">&#96;&#96;&#96;  org&#x3D;&quot;org.apache.gora&quot;  name&#x3D;&quot;gora-sql&quot;  rev&#x3D;&quot;0.1.1-incubating&quot;  conf&#x3D;&quot;*-&gt;default&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>\n\n<p>如果按默认的不做修改，将会在抓取网页时遇到以下错误。</p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/8/e8f001bf53174dd985d3ffd36c6fb32d-image.png\" alt=\"e8f001bf53174dd985d3ffd36c6fb32d-image.png\"></p>\n<p>然后配置ivysetting.xml，这个文件类似maven的.setting.xml文件，主要修改相应的软件仓库源，默认地址可能会出现下载缓慢的情况，建议换成国内源，贴一个我配的阿里的。<br><img src=\"//img.wqkenqing.ren//file/2017/8/ffc49faa6d304b2694313bd5c206ee94-image.png\" alt=\"ffc49faa6d304b2694313bd5c206ee94-image.png\"></p>\n<p>速度杠杠的。<br>这时就可以进行编译了，通过终端进nutch文件地址进执行ant</p>\n<p>然后配置持久层的配置文件，gora.properties<br><img src=\"//img.wqkenqing.ren//file/2017/8/33e8c343b9854449897c28dd5177409f-image.png\" alt=\"33e8c343b9854449897c28dd5177409f-image.png\"></p>\n<p>接下来配另mysql的映射文件gora-sql-mapping.xml，可以这么说，这个地方出现的坑是我遇到的坑最多的地方之一。因为我是事后总结，平日也有工任务，所以，在出现坑的时侯，我首要的考虑的是解决的它，所以解决这些问题后，可能能记得是大致是什么状况，但无法具体复现，我在这以总结，提练式的对这些小坑进行叙述，就不贴具体的错误日志了。</p>\n<p>首先，文件中的默认配置id的大小是512.这个对于以unicode，准确的说以utf8为编码格式的mysql来说是过长的，会在inject就报sql初始化错误，id too long<br><strong>解决方式</strong><br>将id的长度改小，我设置的是180，nutch默认一般以target url拼接成id，所以一般来讲，180的id是妥妥够用的。</p>\n<p>类似的问题还会出现一些如text ,content过长的问题，初次搭建我这先建议改小试试，后面还有根治的方式。</p>\n<p>修改了gora-sql-mapping.xml文件后，执行抓取指令，以bin/nutch crawl urlfile  -threads number -deepth num 这是nutch 普遍用的一个指行指令，这个指令执行时会默认将数据持久化到webpage的表中，这种方式缺点是不太灵活，复杂任务的时候不好操作。</p>\n<p>另一种bin/crawl urlfile -crawlId name (这个name会作为对应的表名组成部份) “solrrl” “num”用于指定解析程度<br>这种方式相对而言更灵活，后面我主要采用这种方式。这里有个小细节，bin/crawl 这个脚本是可以尝试更改的，它默认执行任务时只创建了50，而这种方式无法像上面那样指定创建线程数，所以我更改了crawl文件的初始值，将参数调值2000.所以可以根据自己需求，酌情更改。</p>\n<p>bin/nutch parse 有些fetch 任务执行完成后，parse数据同步至数据库时可能会产生一些错误，那么可以通过这个指令尝试进行解析。<br>示例：bin/nutch parse -crawlId name -all<br>这里容易出现前面提到过的一个问题，就是在解析时，content 或text 中的内容格式不对，或text 内容中出现在了emoji等情况，都可能使解析任务中断。我经过一翻调整，算是有一个统一解决方案：在这里贴出来参考<br>1、将数据库编码格式设置为utf8mb4；<br>2、将text和content的gora-mapping.xml文件中添加jdbc-type=“text” 或jdbc-type=”blob”的设置，即指明其数据库中对应的类型，避免长度等问题<br>3、上两者结合的一个情况，text存入文中的内容有编码格式，相对读取轻松，blob以二进制形式存放，取值需要转码，所以在不出错的情况下优先设为text，而这时，数据库设为utf8mb4时就不要在jdbc url 中设置utf8格式了，这样反而会出现问题。<br><img src=\"//http://img.wqkenqing.ren//file/2017/9/ae5a036dcc9c45a29fdfa0ed2d345eca-image.png\" alt=\"ae5a036dcc9c45a29fdfa0ed2d345eca-image.png\"></p>\n<p>至此 nutch日常的主要使用指令就这两个，还有些 如果bin/nutch fetch bin/nutch gernate<br>这些相对出错较少，出错的影响和对策网上也相对较多，就不再缀述了。</p>\n<hr>\n<p>至此爬虫服务的总结就要告一段落了，这篇文章体量相对较大，我是断断续续逐步完成的，所以，后面更多是凭回忆出的之前深刻影响且在网上少有明确解决方案的一些问题，给出我的解决方式，所以，如果这篇总结针对的算是nutch使用过程中，尝试更进一步的助力，而非特别基础的。如果看到此篇文章的你对nutch还有其它的一些问题，可以尝试留言，我们一起探讨。</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<p> <code>这阵子主要研究的爬虫方向，主要以java为语言基础,nutch为自动框架，jsoup作为自主爬虫插件开发基础，进行了一些有针对性的实站，在这些过程中，也遇到了一些问题和心得，觉得有必要总结一下</code></p>\n<h2 id=\"爬虫之nutch\"><a href=\"#爬虫之nutch\" class=\"headerlink\" title=\"爬虫之nutch\"></a>爬虫之nutch</h2><h3 id=\"nutch使用体验与感悟\"><a href=\"#nutch使用体验与感悟\" class=\"headerlink\" title=\"nutch使用体验与感悟\"></a>nutch使用体验与感悟</h3><p>在这里之所以以nutch开篇，因为在接触爬虫之前就一直有听过它的大名，知道它是我们java语言栈中的爬虫利器，而且因为它，诞生了hadoop这一重器，后者在如今天大数据技术圈的名头，应该是无人不晓吧。所以，多种因素的促使下，让我入了nutch的坑。而本文虽是不仅针对nutch的总结，但主要还是以nutch为主。</p>\n<p>经过一阵的实际体验,nutch给我的感觉，老实说确实是强,百科中说nutch的目的是“Nutch 致力于让每个人能很容易, 同时花费很少就可以配置世界一流的Web搜索引擎. 为了完成这一宏伟的目标, Nutch必须能够做到”,能有这么宏伟的目标，自然得有相应的实力来支撑。但就我体验来说，它确实是强，经过简单的配置后，几个简单的指令就能对页面进行抓取，但我觉得也有几个比较明显的让人体验不太好的地方</p>\n<ol>\n<li>对动态生成的网页内容的抓取不理想，或要通过其它的插件，但插件的引入也不如想像般顺利</li>\n<li>版本太多，且很多版本之间的差异明显。在后面会尝试说明一下。</li>\n<li>资料太少，有很多场景国外都没有有效的解决策略（公网检索下），国内环境就更差了，为了搜集资料我多次去过国家图书馆，逛过书店等，都没太找到特别详尽且有针对性的资料，所以nutch的整个踩坑过程是很痛苦的，我后面会将我目前调使的nutch抓取服务配置和一些踩坑进行详细的总结，我觉得，就我之前对网上的搜集资料的掌握的情况来看，接下来我给出的总结，或者能带来一些更可靠的价值。<br>综上，我对nutch的感悟是又爱又恨。爱得是它确实是能很便利的帮忙爬取一些东西，恨的是它又不完全是那么便利</li>\n</ol>\n<h3 id=\"nutch搭建与踩坑回顾\"><a href=\"#nutch搭建与踩坑回顾\" class=\"headerlink\" title=\"nutch搭建与踩坑回顾\"></a>nutch搭建与踩坑回顾</h3><p>前文中已经提到过nutch有很多版本，目前最新版本2.3.1，它的多个版本间是有很多差异的，比如1.X的版本间的持久层是没有抽象出来的，所以1.X版本的持久化形式比较单一。而2.X版本中持久层被抽象出来，通过一不同的配置即可实现多元的持久层存储。如mysql、hbase、avro等。但在2.3.X开始就不支持mysql，官网是明确公示过，或者说从2.2.X开始就不支持了，但就实际操作来看2.2.X还是能适配mysql的，而2.3.X在我的实际操作中是不行的。另在这里说一下，我的持久层主要以mysql为主，后面可能还会再试试hbase，而一开始不采用hbase不是我没尝试，而是尝试过，发现nutch目前适配的hbase版本太低，而我服务器上已经搭建的hbase集群环境的版本相对高了不少，无法适配。我想没有必要为此就针对hbase的版本进行更替，所以采用mysql作为持久层，<strong>这是坑一</strong>。<br>在使用nutch之前，对其是一点都不了解的，或者说对爬虫需求也都是不熟悉的。所以，对其的功能是寄于厚望，一开始就配一个网站的首页url，就设置多线程，多层抓取。但经过多次实站后，发现有些网站中一部份或大部份都不能抓取。再随着深入观察发现，很多是动态生成的内容。更甚者，有些内容的加载是页面加载后，再发送ajax来加载页面的一些关键内容。而原本考虑nutch是支持插件扩展的，原想直接通过检索，求助于互联网，希望直接就能找到一款ajax扩展的插件，然而，几经周折，都未成行。<strong>这是坑二</strong></p>\n<p>其它还有一些小坑，具体我在下面搭建环节具体结细节处再提，虽小，但影响也挺大，而且比较坑人。以上都是主要通过人力暂未能直接解决的坑。所以先列出来，下面，我回顾下我的nutch搭建环节，其中会给出一些小坑与相应的解决方案</p>\n<h4 id=\"搭建\"><a href=\"#搭建\" class=\"headerlink\" title=\"搭建\"></a>搭建</h4><p>nutch的搭建分为分布式与单机版，我目前主要涉猎的是nutch单机版。具体的版本选择，我尝试过nutch1.2与nutch1.7以上的所有版本，1.X与2.X的主要差异在于2.X将持久层给抽象出来了。总得来说nuthc2.x的实用性相对高些。而我以我目前具体使用的版本2.2.1为例，进行介绍<br>step 1.获取nutch2.2.1 <a href=\"http://archive.apache.org/dist/\" target=\"_blank\" rel=\"noopener\">http://archive.apache.org/dist/</a><br>这个url能定位到apache很多软件和历史版本。进入这里，然后找到nutch，下载相应的版本（该连接有时可能打不开，翻墙试试）。<br>step 2. 对ivy下的ivy.xml与ivysetting.xml进行修改。<br>这里就有之前提到的坑一了，这里可能配置对持久层的依赖了。我这以mysql配置。</p>\n<p>修改${APACHE_NUTCH_HOME}/ivy/ivy.xml文件</p>\n<p>将以下行的注释取消</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">修改以下行。从默认的</span><br><span class=\"line\">&#96;&#96;&#96;   org&#x3D;&quot;org.apache.gora&quot;  name&#x3D;&quot;gora-core&quot;  rev&#x3D;&quot;0.3&quot;  conf&#x3D;&quot;*-&gt;default&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>\n<p>改成</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">取消以下行的注释</span><br><span class=\"line\">&#96;&#96;&#96;  org&#x3D;&quot;org.apache.gora&quot;  name&#x3D;&quot;gora-sql&quot;  rev&#x3D;&quot;0.1.1-incubating&quot;  conf&#x3D;&quot;*-&gt;default&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>\n\n<p>如果按默认的不做修改，将会在抓取网页时遇到以下错误。</p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/8/e8f001bf53174dd985d3ffd36c6fb32d-image.png\" alt=\"e8f001bf53174dd985d3ffd36c6fb32d-image.png\"></p>\n<p>然后配置ivysetting.xml，这个文件类似maven的.setting.xml文件，主要修改相应的软件仓库源，默认地址可能会出现下载缓慢的情况，建议换成国内源，贴一个我配的阿里的。<br><img src=\"//img.wqkenqing.ren//file/2017/8/ffc49faa6d304b2694313bd5c206ee94-image.png\" alt=\"ffc49faa6d304b2694313bd5c206ee94-image.png\"></p>\n<p>速度杠杠的。<br>这时就可以进行编译了，通过终端进nutch文件地址进执行ant</p>\n<p>然后配置持久层的配置文件，gora.properties<br><img src=\"//img.wqkenqing.ren//file/2017/8/33e8c343b9854449897c28dd5177409f-image.png\" alt=\"33e8c343b9854449897c28dd5177409f-image.png\"></p>\n<p>接下来配另mysql的映射文件gora-sql-mapping.xml，可以这么说，这个地方出现的坑是我遇到的坑最多的地方之一。因为我是事后总结，平日也有工任务，所以，在出现坑的时侯，我首要的考虑的是解决的它，所以解决这些问题后，可能能记得是大致是什么状况，但无法具体复现，我在这以总结，提练式的对这些小坑进行叙述，就不贴具体的错误日志了。</p>\n<p>首先，文件中的默认配置id的大小是512.这个对于以unicode，准确的说以utf8为编码格式的mysql来说是过长的，会在inject就报sql初始化错误，id too long<br><strong>解决方式</strong><br>将id的长度改小，我设置的是180，nutch默认一般以target url拼接成id，所以一般来讲，180的id是妥妥够用的。</p>\n<p>类似的问题还会出现一些如text ,content过长的问题，初次搭建我这先建议改小试试，后面还有根治的方式。</p>\n<p>修改了gora-sql-mapping.xml文件后，执行抓取指令，以bin/nutch crawl urlfile  -threads number -deepth num 这是nutch 普遍用的一个指行指令，这个指令执行时会默认将数据持久化到webpage的表中，这种方式缺点是不太灵活，复杂任务的时候不好操作。</p>\n<p>另一种bin/crawl urlfile -crawlId name (这个name会作为对应的表名组成部份) “solrrl” “num”用于指定解析程度<br>这种方式相对而言更灵活，后面我主要采用这种方式。这里有个小细节，bin/crawl 这个脚本是可以尝试更改的，它默认执行任务时只创建了50，而这种方式无法像上面那样指定创建线程数，所以我更改了crawl文件的初始值，将参数调值2000.所以可以根据自己需求，酌情更改。</p>\n<p>bin/nutch parse 有些fetch 任务执行完成后，parse数据同步至数据库时可能会产生一些错误，那么可以通过这个指令尝试进行解析。<br>示例：bin/nutch parse -crawlId name -all<br>这里容易出现前面提到过的一个问题，就是在解析时，content 或text 中的内容格式不对，或text 内容中出现在了emoji等情况，都可能使解析任务中断。我经过一翻调整，算是有一个统一解决方案：在这里贴出来参考<br>1、将数据库编码格式设置为utf8mb4；<br>2、将text和content的gora-mapping.xml文件中添加jdbc-type=“text” 或jdbc-type=”blob”的设置，即指明其数据库中对应的类型，避免长度等问题<br>3、上两者结合的一个情况，text存入文中的内容有编码格式，相对读取轻松，blob以二进制形式存放，取值需要转码，所以在不出错的情况下优先设为text，而这时，数据库设为utf8mb4时就不要在jdbc url 中设置utf8格式了，这样反而会出现问题。<br><img src=\"//http://img.wqkenqing.ren//file/2017/9/ae5a036dcc9c45a29fdfa0ed2d345eca-image.png\" alt=\"ae5a036dcc9c45a29fdfa0ed2d345eca-image.png\"></p>\n<p>至此 nutch日常的主要使用指令就这两个，还有些 如果bin/nutch fetch bin/nutch gernate<br>这些相对出错较少，出错的影响和对策网上也相对较多，就不再缀述了。</p>\n<hr>\n<p>至此爬虫服务的总结就要告一段落了，这篇文章体量相对较大，我是断断续续逐步完成的，所以，后面更多是凭回忆出的之前深刻影响且在网上少有明确解决方案的一些问题，给出我的解决方式，所以，如果这篇总结针对的算是nutch使用过程中，尝试更进一步的助力，而非特别基础的。如果看到此篇文章的你对nutch还有其它的一些问题，可以尝试留言，我们一起探讨。</p>"},{"title":"java中IO小结","date":"2019-07-15T16:00:00.000Z","_content":"\n此处简介\n\n<!--more-->\n\n### java中IO小结\n#### File\nFile类,相关api\n* createNewFiles();\n* mkdir();\n* mkdirs()\n\n---\n### IO流\n按方向，分输入，输出流in、out\n流当中有缓冲区，即stream.read(),可以一次性读取stream.read(Byte[]byte);\n针对缓冲流还有两个方法\nmark与reset\nmarkSupported 判断该输入流能支持mark 和 reset 方法。\n\nmark用于标记当前位置；在读取一定数量的数据(小于readlimit的数据)后使用reset可以回到mark标记的位置。\n\nFileInputStream不支持mark/reset操作；BufferedInputStream支持此操作；\n\nmark(readlimit)的含义是在当前位置作一个标记，制定可以重新读取的最大字节数，也就是说你如果标记后读取的字节数大于readlimit，你就再也回不到回来的位置了。\n\n通常InputStream的read()返回-1后，说明到达文件尾，不能再读取。除非使用了mark/reset。\n\n#### 流的类型\n+  FileInputStream\n+  ObjectInputStream\n+  DataInputStream\n+  BufferedInputStream\n+  BufferedReader\n+  ByteArrayInputStream\n+  CharArrayReader\n+  Console\n+  FileReader\n+  PipedInputStream\n+  PipedReader\n+  PushbackInputStream\n+  StringReader\n\n| 流的名称  | 说明|\n| :-------- | --------: |\n| FileInputStream    | FileInputStream 从文件系统中的某个文件中获得输入字节。 |\n| ObjectInputStream  | ObjectInputStream 对以前使用 ObjectOutputStream 写入的基本数据和对象进行反序列化。 |\n| DataInputStream    | 数据输入流允许应用程序以与机器无关方式从底层输入流中读取基本 Java 数据类型。 |\n| BufferedInputStream    | BufferedInputStream 为另一个输入流添加一些功能，即缓冲输入以及支持 mark 和 reset 方法的能力 |\n| ByteArrayInputStream    | ByteArrayInputStream 包含一个内部缓冲区，该缓冲区包含从流中读取的字节。 |\n| CharArrayReader    | 此类实现一个可用作字符输入流的字符缓冲区 |\n| Console    | 此类包含多个方法，可访问与当前 Java 虚拟机关联的基于字符的控制台设备（如果有）。 |\n| FileReader | 用来读取字符文件的便捷类 |\n| PushbackInputStream | PushbackInputStream 为另一个输入流添加性能，即“推回 (push back)”或“取消读取 (unread)”一个字节的能力。 |\n>Java I/O默认是不缓冲流的，所谓“缓冲”就是先把从流中得到的一块字节序列暂存在一个被称为buffer的内部字节数组里，然后你可以一下子取到这一整块的字节数据，没有缓冲的流只能一个字节一个字节读，效率孰高孰低一目了然。有两个特殊的输入流实现了缓冲功能，一个是我们常用的BufferedInputStream\n\n---\n#### 一些小结\n**带array的流自带缓冲区。支持mark与reset方法**\n**其他的要套缓冲流**\n\n 存在readLine()方法的流\n\n+ `BufferReader`\n\nread(char[],0,len)的理解\n将len从0位开始装入char[]中，然后通过String.valueOf(char[])转换成字符串","source":"_posts/王阁/技术/hexo/oldblog/blog7.md","raw":"---\n\ntitle: java中IO小结\ndate: 2019-07-16\ntags:\n\n---\n\n此处简介\n\n<!--more-->\n\n### java中IO小结\n#### File\nFile类,相关api\n* createNewFiles();\n* mkdir();\n* mkdirs()\n\n---\n### IO流\n按方向，分输入，输出流in、out\n流当中有缓冲区，即stream.read(),可以一次性读取stream.read(Byte[]byte);\n针对缓冲流还有两个方法\nmark与reset\nmarkSupported 判断该输入流能支持mark 和 reset 方法。\n\nmark用于标记当前位置；在读取一定数量的数据(小于readlimit的数据)后使用reset可以回到mark标记的位置。\n\nFileInputStream不支持mark/reset操作；BufferedInputStream支持此操作；\n\nmark(readlimit)的含义是在当前位置作一个标记，制定可以重新读取的最大字节数，也就是说你如果标记后读取的字节数大于readlimit，你就再也回不到回来的位置了。\n\n通常InputStream的read()返回-1后，说明到达文件尾，不能再读取。除非使用了mark/reset。\n\n#### 流的类型\n+  FileInputStream\n+  ObjectInputStream\n+  DataInputStream\n+  BufferedInputStream\n+  BufferedReader\n+  ByteArrayInputStream\n+  CharArrayReader\n+  Console\n+  FileReader\n+  PipedInputStream\n+  PipedReader\n+  PushbackInputStream\n+  StringReader\n\n| 流的名称  | 说明|\n| :-------- | --------: |\n| FileInputStream    | FileInputStream 从文件系统中的某个文件中获得输入字节。 |\n| ObjectInputStream  | ObjectInputStream 对以前使用 ObjectOutputStream 写入的基本数据和对象进行反序列化。 |\n| DataInputStream    | 数据输入流允许应用程序以与机器无关方式从底层输入流中读取基本 Java 数据类型。 |\n| BufferedInputStream    | BufferedInputStream 为另一个输入流添加一些功能，即缓冲输入以及支持 mark 和 reset 方法的能力 |\n| ByteArrayInputStream    | ByteArrayInputStream 包含一个内部缓冲区，该缓冲区包含从流中读取的字节。 |\n| CharArrayReader    | 此类实现一个可用作字符输入流的字符缓冲区 |\n| Console    | 此类包含多个方法，可访问与当前 Java 虚拟机关联的基于字符的控制台设备（如果有）。 |\n| FileReader | 用来读取字符文件的便捷类 |\n| PushbackInputStream | PushbackInputStream 为另一个输入流添加性能，即“推回 (push back)”或“取消读取 (unread)”一个字节的能力。 |\n>Java I/O默认是不缓冲流的，所谓“缓冲”就是先把从流中得到的一块字节序列暂存在一个被称为buffer的内部字节数组里，然后你可以一下子取到这一整块的字节数据，没有缓冲的流只能一个字节一个字节读，效率孰高孰低一目了然。有两个特殊的输入流实现了缓冲功能，一个是我们常用的BufferedInputStream\n\n---\n#### 一些小结\n**带array的流自带缓冲区。支持mark与reset方法**\n**其他的要套缓冲流**\n\n 存在readLine()方法的流\n\n+ `BufferReader`\n\nread(char[],0,len)的理解\n将len从0位开始装入char[]中，然后通过String.valueOf(char[])转换成字符串","slug":"王阁/技术/hexo/oldblog/blog7","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg3004ru6pw03ozcfif","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h3 id=\"java中IO小结\"><a href=\"#java中IO小结\" class=\"headerlink\" title=\"java中IO小结\"></a>java中IO小结</h3><h4 id=\"File\"><a href=\"#File\" class=\"headerlink\" title=\"File\"></a>File</h4><p>File类,相关api</p>\n<ul>\n<li>createNewFiles();</li>\n<li>mkdir();</li>\n<li>mkdirs()</li>\n</ul>\n<hr>\n<h3 id=\"IO流\"><a href=\"#IO流\" class=\"headerlink\" title=\"IO流\"></a>IO流</h3><p>按方向，分输入，输出流in、out<br>流当中有缓冲区，即stream.read(),可以一次性读取stream.read(Byte[]byte);<br>针对缓冲流还有两个方法<br>mark与reset<br>markSupported 判断该输入流能支持mark 和 reset 方法。</p>\n<p>mark用于标记当前位置；在读取一定数量的数据(小于readlimit的数据)后使用reset可以回到mark标记的位置。</p>\n<p>FileInputStream不支持mark/reset操作；BufferedInputStream支持此操作；</p>\n<p>mark(readlimit)的含义是在当前位置作一个标记，制定可以重新读取的最大字节数，也就是说你如果标记后读取的字节数大于readlimit，你就再也回不到回来的位置了。</p>\n<p>通常InputStream的read()返回-1后，说明到达文件尾，不能再读取。除非使用了mark/reset。</p>\n<h4 id=\"流的类型\"><a href=\"#流的类型\" class=\"headerlink\" title=\"流的类型\"></a>流的类型</h4><ul>\n<li>FileInputStream</li>\n<li>ObjectInputStream</li>\n<li>DataInputStream</li>\n<li>BufferedInputStream</li>\n<li>BufferedReader</li>\n<li>ByteArrayInputStream</li>\n<li>CharArrayReader</li>\n<li>Console</li>\n<li>FileReader</li>\n<li>PipedInputStream</li>\n<li>PipedReader</li>\n<li>PushbackInputStream</li>\n<li>StringReader</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">流的名称</th>\n<th align=\"right\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">FileInputStream</td>\n<td align=\"right\">FileInputStream 从文件系统中的某个文件中获得输入字节。</td>\n</tr>\n<tr>\n<td align=\"left\">ObjectInputStream</td>\n<td align=\"right\">ObjectInputStream 对以前使用 ObjectOutputStream 写入的基本数据和对象进行反序列化。</td>\n</tr>\n<tr>\n<td align=\"left\">DataInputStream</td>\n<td align=\"right\">数据输入流允许应用程序以与机器无关方式从底层输入流中读取基本 Java 数据类型。</td>\n</tr>\n<tr>\n<td align=\"left\">BufferedInputStream</td>\n<td align=\"right\">BufferedInputStream 为另一个输入流添加一些功能，即缓冲输入以及支持 mark 和 reset 方法的能力</td>\n</tr>\n<tr>\n<td align=\"left\">ByteArrayInputStream</td>\n<td align=\"right\">ByteArrayInputStream 包含一个内部缓冲区，该缓冲区包含从流中读取的字节。</td>\n</tr>\n<tr>\n<td align=\"left\">CharArrayReader</td>\n<td align=\"right\">此类实现一个可用作字符输入流的字符缓冲区</td>\n</tr>\n<tr>\n<td align=\"left\">Console</td>\n<td align=\"right\">此类包含多个方法，可访问与当前 Java 虚拟机关联的基于字符的控制台设备（如果有）。</td>\n</tr>\n<tr>\n<td align=\"left\">FileReader</td>\n<td align=\"right\">用来读取字符文件的便捷类</td>\n</tr>\n<tr>\n<td align=\"left\">PushbackInputStream</td>\n<td align=\"right\">PushbackInputStream 为另一个输入流添加性能，即“推回 (push back)”或“取消读取 (unread)”一个字节的能力。</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>Java I/O默认是不缓冲流的，所谓“缓冲”就是先把从流中得到的一块字节序列暂存在一个被称为buffer的内部字节数组里，然后你可以一下子取到这一整块的字节数据，没有缓冲的流只能一个字节一个字节读，效率孰高孰低一目了然。有两个特殊的输入流实现了缓冲功能，一个是我们常用的BufferedInputStream</p>\n</blockquote>\n<hr>\n<h4 id=\"一些小结\"><a href=\"#一些小结\" class=\"headerlink\" title=\"一些小结\"></a>一些小结</h4><p><strong>带array的流自带缓冲区。支持mark与reset方法</strong><br><strong>其他的要套缓冲流</strong></p>\n<p> 存在readLine()方法的流</p>\n<ul>\n<li><code>BufferReader</code></li>\n</ul>\n<p>read(char[],0,len)的理解<br>将len从0位开始装入char[]中，然后通过String.valueOf(char[])转换成字符串</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h3 id=\"java中IO小结\"><a href=\"#java中IO小结\" class=\"headerlink\" title=\"java中IO小结\"></a>java中IO小结</h3><h4 id=\"File\"><a href=\"#File\" class=\"headerlink\" title=\"File\"></a>File</h4><p>File类,相关api</p>\n<ul>\n<li>createNewFiles();</li>\n<li>mkdir();</li>\n<li>mkdirs()</li>\n</ul>\n<hr>\n<h3 id=\"IO流\"><a href=\"#IO流\" class=\"headerlink\" title=\"IO流\"></a>IO流</h3><p>按方向，分输入，输出流in、out<br>流当中有缓冲区，即stream.read(),可以一次性读取stream.read(Byte[]byte);<br>针对缓冲流还有两个方法<br>mark与reset<br>markSupported 判断该输入流能支持mark 和 reset 方法。</p>\n<p>mark用于标记当前位置；在读取一定数量的数据(小于readlimit的数据)后使用reset可以回到mark标记的位置。</p>\n<p>FileInputStream不支持mark/reset操作；BufferedInputStream支持此操作；</p>\n<p>mark(readlimit)的含义是在当前位置作一个标记，制定可以重新读取的最大字节数，也就是说你如果标记后读取的字节数大于readlimit，你就再也回不到回来的位置了。</p>\n<p>通常InputStream的read()返回-1后，说明到达文件尾，不能再读取。除非使用了mark/reset。</p>\n<h4 id=\"流的类型\"><a href=\"#流的类型\" class=\"headerlink\" title=\"流的类型\"></a>流的类型</h4><ul>\n<li>FileInputStream</li>\n<li>ObjectInputStream</li>\n<li>DataInputStream</li>\n<li>BufferedInputStream</li>\n<li>BufferedReader</li>\n<li>ByteArrayInputStream</li>\n<li>CharArrayReader</li>\n<li>Console</li>\n<li>FileReader</li>\n<li>PipedInputStream</li>\n<li>PipedReader</li>\n<li>PushbackInputStream</li>\n<li>StringReader</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">流的名称</th>\n<th align=\"right\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">FileInputStream</td>\n<td align=\"right\">FileInputStream 从文件系统中的某个文件中获得输入字节。</td>\n</tr>\n<tr>\n<td align=\"left\">ObjectInputStream</td>\n<td align=\"right\">ObjectInputStream 对以前使用 ObjectOutputStream 写入的基本数据和对象进行反序列化。</td>\n</tr>\n<tr>\n<td align=\"left\">DataInputStream</td>\n<td align=\"right\">数据输入流允许应用程序以与机器无关方式从底层输入流中读取基本 Java 数据类型。</td>\n</tr>\n<tr>\n<td align=\"left\">BufferedInputStream</td>\n<td align=\"right\">BufferedInputStream 为另一个输入流添加一些功能，即缓冲输入以及支持 mark 和 reset 方法的能力</td>\n</tr>\n<tr>\n<td align=\"left\">ByteArrayInputStream</td>\n<td align=\"right\">ByteArrayInputStream 包含一个内部缓冲区，该缓冲区包含从流中读取的字节。</td>\n</tr>\n<tr>\n<td align=\"left\">CharArrayReader</td>\n<td align=\"right\">此类实现一个可用作字符输入流的字符缓冲区</td>\n</tr>\n<tr>\n<td align=\"left\">Console</td>\n<td align=\"right\">此类包含多个方法，可访问与当前 Java 虚拟机关联的基于字符的控制台设备（如果有）。</td>\n</tr>\n<tr>\n<td align=\"left\">FileReader</td>\n<td align=\"right\">用来读取字符文件的便捷类</td>\n</tr>\n<tr>\n<td align=\"left\">PushbackInputStream</td>\n<td align=\"right\">PushbackInputStream 为另一个输入流添加性能，即“推回 (push back)”或“取消读取 (unread)”一个字节的能力。</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>Java I/O默认是不缓冲流的，所谓“缓冲”就是先把从流中得到的一块字节序列暂存在一个被称为buffer的内部字节数组里，然后你可以一下子取到这一整块的字节数据，没有缓冲的流只能一个字节一个字节读，效率孰高孰低一目了然。有两个特殊的输入流实现了缓冲功能，一个是我们常用的BufferedInputStream</p>\n</blockquote>\n<hr>\n<h4 id=\"一些小结\"><a href=\"#一些小结\" class=\"headerlink\" title=\"一些小结\"></a>一些小结</h4><p><strong>带array的流自带缓冲区。支持mark与reset方法</strong><br><strong>其他的要套缓冲流</strong></p>\n<p> 存在readLine()方法的流</p>\n<ul>\n<li><code>BufferReader</code></li>\n</ul>\n<p>read(char[],0,len)的理解<br>将len从0位开始装入char[]中，然后通过String.valueOf(char[])转换成字符串</p>"},{"title":"MapReduce的核心思想","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n<!--more-->\n\n`mapreduce在hadoop中更多的承担的是计算的角色`\n\n## 什么是MapReduce？\n\nmapreduce源于谷歌公司为研究大规模数据处理而研发出的一种并行计算模型和方法。\n它将并行编程中的难点和有相对门槛的方法进行高度封装，而给开发者一套接口，让开发者理专注于自己的业务逻辑，即可让自己的代码运行在分布式集群中，大大降低了开发一些并发程序的门槛。从字面上就可以知道，MapReduce分为Map(映射)、Reduce(规约)\n\n## MapReduce的核心思想\n\nMapReduce主要是两种经典函数：\n\n*   映射（Mapping）将一个整体按某种规则映射成N份。并对这N份进行同一种操作。\n*   规约（Reducing）将N份文件，按某种策略进行合并。\n\n## MapReduce的角色与动作\n\n　 MapReduce包含四个组成部分，分别为**Client**、**JobTracker**、**TaskTracker**和**Task**，下面我们详细介绍这四个组成部分。\n\n*   Client：作业提交的发起者， 每一个 Job 都会在用户端通过 Client 类将应用程序以及配置参数 Configuration 打包成 JAR 文件存储在 HDFS，并把路径提交到 JobTracker 的 master 服务，然后由 master 创建每一个 Task（即 MapTask 和 ReduceTask） 将它们分发到各个 TaskTracker 服务中去执行。\n*   JobTracker：初始化作业，分配作业，与TaskTracker通信，协调整个作业 JobTracke负责资源监控和作业调度。JobTracker 监控所有TaskTracker 与job的健康状况，一旦发现失败，就将相应的任务转移到其他节点；同时，JobTracker 会跟踪任务的执行进度、资源使用量等信息，并将这些信息告诉任务调度器，而调度器会在资源出现空闲时，选择合适的任务使用这些资源。在Hadoop 中，任务调度器是一个可插拔的模块，用户可以根据自己的需要设计相应的调度器。\n*   TaskTracker：TaskTracker 会周期性地通过Heartbeat 将本节点上资源的使用情况和任务的运行进度汇报给JobTracker，同时接收JobTracker 发送过来的命令并执行相应的操作（如启动新任务、杀死任务等）。TaskTracker 使用“slot”等量划分本节点上的资源量。“slot”代表计算资源（CPU、内存等）。一个Task 获取到一个slot 后才有机会运行，而Hadoop 调度器的作用就是将各个TaskTracker 上的空闲slot 分配给Task 使用。slot 分为Map slot 和Reduce slot 两种，分别供Map Task 和Reduce Task 使用。TaskTracker 通过slot 数目（可配置参数）限定Task 的并发度。\n*   Task ： Task 分为Map Task 和Reduce Task 两种，均由TaskTracker 启动。HDFS 以固定大小的block 为基本单位存储数据，而对于MapReduce 而言，其处理单位是split。\n*   Map Task 执行过程如下图 所示：由该图可知，Map Task 先将对应的split 迭代解析成一个个key/value 对，依次调用用户 自定义的map() 函数进行处理，最终将临时结果存放到本地磁盘上, 其中临时数据被分成若干个partition，每个partition 将被一个Reduce Task 处理。\n   ![09d902f773ff4e30b1cf995705d4f03c-image.png](http://img.wqkenqing.ren//file/2017/10/09d902f773ff4e30b1cf995705d4f03c-image.png)\n\n\n    Reduce Task 执行过程下图所示。该过程分为三个阶段\n    ![2f9ff84d09cf424cb8a1c4d24db637c0-image.png](http://img.wqkenqing.ren//file/2017/10/2f9ff84d09cf424cb8a1c4d24db637c0-image.png)\n\n\n\n**提交作业**\n\n*   在作业提交之前，需要对作业进行配置\n*   程序代码，主要是自己书写的MapReduce程序\n*   输入输出路径\n*   其他配置，如输出压缩等\n*   配置完成后，通过JobClient来提交\n\n**作业的初始化**\n\n*   客户端提交完成后，JobTracker会将作业加入队列，然后进行调度，默认的调度方法是FIFO调试方式\n    **任务的分配**\n*   TaskTracker和JobTracker之间的通信与任务的分配是通过心跳机制完成的。\n*   TaskTracker会主动向JobTracker询问是否有作业要做，如果自己能做，那么就会申请作业任务，这个任务可以使Map，也可能是Reduce任务\n    **任务的执行**\n*   申请到任务后，TaskTracker会做如下事情：\n*   拷贝代码到本地\n*   拷贝任务的信息到本地\n*   启动Jvm运行任务\n    **状态与任务的更新**\n*   任务在运行过程中，首先会将自己的状态汇报给TaskTracker，然后由TaskTracker汇总报给JobTracker\n*   任务进度是通过计数器来实现的。\n\n**作业的完成**\n\n*   JobTracker 是在接受到最后一个任务运行完成后，才会将任务标志为成功\n*   此时会做删除中间结果等善后处理工作\n  ![8fba570574f6491c96b51698743466b2-image.png](http://img.wqkenqing.ren//file/2017/10/8fba570574f6491c96b51698743466b2-image.png)\n\n\n### MapReduce任务执行流程与数据处理流程详解\n\n`就任务流程而言，上文中有些或已经涉及，有些也介绍的比较详细了。但就整体而言，不是特别具体，或这个整体性，所以在此我们再集中总结一下，即使重复内容，就也当加深印象吧。`\n\n#### 任务执行流程详解\n\n1.  通过jobClient提交当mapreduce的job提交至JobTracker\n    ,提交的具体信息大致会有，conf配置内容，path，相关的Map，Reduce函数等。（数据的切片会在client上完成）\n2.  JobTracker中的Master服务会完成创建一个Task（MapTask与ReduceTask），并将这个任务加载至任务队列中，等待TaskTracker来获取。同进JobTracker会处于一种监听状态，监听所有TaskTracker与Job的健康情况。面对故障时，提供服务转移等。同时它还会记录任务的执行进度，资源的使用情况，提交至任务调度器，由调度器进行资源的调度。\n3.  TaskTracker会主动向jobTacker去询问是否有任务，如果有，就会申请到作业，作业可以是map,也可以是reduce任务。TaskTracker获取的不仅是任务，还有相关的处理代码也会copy一份至本地，然后TaskTracker再针对所分配的split进行处理。TaskTracker还会周期性地通过HearBeat将本节点上的资源的使用情况和任务的进行进度汇报给JobTracker，同时接收JobTracker发过来的相关命令并执行，\n4.  当TaskTracker中的任务完成后会上报给JobTracker,而当最后一个TaskTracker完成后，JobTracker才会将任务标志为成功，并执行一些如删除中间结果等善后工作。\n\n* * *\n\n`从这里我们知道了mapreduce中任务执行流程，但mapreduce作为hadoop的计算框架，它对数据的处理流程我们还没明确涉及，所以接下来我们再深入了解下具体的数据处理流程`\n\n#### 数据处理流程详解\n\n这里的数据处理流程，主要指的是mapreduce执行后，Task中对split的任务具体处理的这一流程，其中还包括，数据的切片，mapTask完成后将中间结果上传等动作。下面我们来具体讨论\n当jobClient向JobTracker提交了任务后，数据处理流程也随之开始\n\n*   在Client端将输入源的数据进行切片(split)，具体的切片机制参考后面\n*   JobTracker中的MRAppMaster将每个Split信息计算出需要的MapTask的实例数量，然后向集群申请机器启动相应数量的mapTask进程\n*   进程启动后，根据给定的数据切片范围进行数据处理，主要流程为\n    a)通过inputFormat来获取RecordReader读取数据，并形成输入的KV对\n    b)将输入KV对传递给用户定义的map（）方法，做逻辑处理，并map()方法的输出的kv对手机到缓存中(这里用到了缓存机制)\n    简而言之map中输入时要做的事是\n    1.反射构造InputFormat.\n    2.反射构造InputSplit.\n    3.创建RecordReader.\n    4.反射创建MapperRunner\n\n![3a461434b0604118aad45a4d38cf3649-image.png](http://img.wqkenqing.ren//file/2017/10/3a461434b0604118aad45a4d38cf3649-image.png)\n\n\n而map输出时相对复杂，主要涉及到的有Partitioner，shuffle，sort，combiner等概念，我们就来一一讨论。\n在map（）方法执行后，map阶段是会有处理的数据输出，正常来说，就是每个split对应的每一行。如上图MapRunner的next为false时，对输入数据的map完成，这时对存内中这些map的数据，会对其进行sort,如果我们事先设置的有combiner那么，还会对sort完的数据执行combiner(**一个类reduce操作，不过是对本地数据的reduce，使用它的原则是combiner的输入不会影响到reduce计算的最终输入，例如：如果计算只是求总数，最大值，最小值可以使用combiner，但是做平均值计算使用combiner的话，最终的reduce计算结果就会出错。**)，然后开始map的内容spill到磁盘中，如果频繁的spill对磁盘会带来较大的损耗和效率影响。所以引入了一个写缓冲区的概念，即每一个Map Task都拥有一个“环形缓冲区”作为Mapper输出的写缓冲区。写缓冲区大小默认为100MB（通过属性io.sort.mb调整），当写缓冲区的数据量达到一定的容量限额时（默认为80%，通过属性io.sort.spill.percent调整），后台线程开始将写缓冲区的数据溢写到本地磁盘。在数据溢写的过程中，只要写缓冲区没有被写满，Mappper依然可以将数据写出到缓冲区中；否则Mapper的执行过程将被阻塞，直到溢写结束。\n溢写以循环的方式进行（即写缓冲区的数据量大致限额时就会执行溢写），可以通过属性mapred.local.dir指定写出的目录。\nspill结束前 溢写线程将数据最终写出到本地磁盘之前，首先根据Reducer的数目对这部分数据进行分区（即每一个分区中的数据会被传送至同一个Reducer进行处理，分区数目与Reducer数据保持一致）即 **partition**，partition是一个类inputSplit()的操作，即根据有多少个ReduceTask生成多少个partition,并通过jobTracker指定给相应的ReduceTask。\n当spill完成后，本地磁盘中会有多个溢出文件存在。在MapTask结束前，这些文件会根据相应的分区进行合并，并排序，合并可能发生多次，具体由**io.sort.factor控制一次最多合并多少个文件。**\n\n如果溢写文件个数超过3（通过属性min.num.spills.for.combine设置），会对合并且分区排序后的结果执行Combine过程（如果MapReduce有设置Combiner），而且combine过程在不影响最终结果的前提下可能会被执行多次；否则不会执行Combine过程（相对而言，Combine开销过大）。\n\n注意：Map Task执行过程中，Combine可能出现在两个地方：写缓冲区溢写过程中、溢写文件合并过程中。\n\n注意：Mapper的一条输出结果（由key、value表示）写出到写缓冲区之前，已经提前计算好相应的分区信息，即分区的过程在数据写入写缓冲区之前就已经完成，溢写过程实际是写缓冲区数据排序的过程（先按分区排序，如果分区相同时，再按键值排序）。\n\n这里涉及到MapReduce的两个组件：Comparator、Partitioner。\n(由于篇幅的原因，这里暂不引入对这两个组件的源码分析，和自定义方式，后面有机会则单开文章讨论)\n\n在将map输出结果作为reducTask中的输入时，会涉及到磁盘写入，网络传输等资源的限制，所以对出于节省资源的考虑，可以在对map的输出结果进行压缩。默认情况下，压缩是不被开启的，可以通过属性**mapred.compress.map.output**、**mapred.map.output.compression.codec**进行相应设置。\n\n当MapTask任务结束后，被指定的分区ReduceTask会立即开始执行，即开始拷贝对应MapTask分区中的输出结果。\nReduce Task的这个阶段被称为“Copy Phase”。Reduce Task拥有少量的线程用于并行地获取Map Tasks的输出结果，默认线程数为5，可以通过属性mapred.reduce.parallel.copies进行设置。\n同样：如果Map Task的输出结果足够小，它会被拷贝至Reduce Task的缓冲区中；否则拷贝至磁盘。当缓冲区中的数据达到一定量（由属性mapred.job.shuffle.merge.percent、mapred.inmem.merge.threshold），这些数据将被合并且溢写到磁盘。如果Combine过程被指定，它将在合并过程被执行，用来减少需要写出到磁盘的数据量。\n\n随着拷贝文件中磁盘上的不断积累，一个后台线程会将它们合并为更大地、有序的文件，用来节省后期的合并时间。如果Map Tasks的输出结合使用了压缩机制，则在合并的过程中需要对数据进行解压处理。\n\n当Reduce Task的所有Map Tasks输出结果均完成拷贝，Reduce Task进入“Sort Phase”（更为合适地应该被称为“Merge Phase”，排序在Map阶段已经被执行），该阶段在保持原有顺序的情况下进行合并。这种合并是以循环方式进行的，循环次数与合并因子（io.sort.factor）有关。\nsort phase 通常不是合并成一个文件，而是略过磁盘操作，直接将数据合并输入至Reduce方法中 这次合并的数据可以结合内存、磁盘两部分进行操作），即“Reduce Phase”。\n\n通常这里还有一个“Group”的阶段，这个阶段决定着哪些键值对属于同一个键。如果没有特殊设置，只有在Map Task输出时那些键完全一样的数据属于同一个键，但这是可以被改变的。\n\n描述至这里终于能引用mapreduce中相当重要的一个概念，即shuffle。这个词在这里该怎么定义，我暂未找到个一个比较满意的答案，但我比较喜欢有人把这个比作是搓完牌一桌子人，在下一局开始前的整个过程。\n即Shuffle操作，涉及到数据的partition、sort、[combine]、spill、[comress]、[merge]、copy、[combine]、merge、group，而这些操作不但决定着程序逻辑的正确性，也决定着MapReduce的运行效率。\n\nshuffle完后进入了ReduceTask的reduce()方法中\n在Reduce Phase的过程中，它处理的是所有Map Tasks输出结果中某一个分区中的所有数据，这些数据整体表现为一个根据键有序的输入，对于每一个键都会相应地调用一次Reduce Function（同一个键对应的值可能有多个，这些值将作为Reduce Function的参数）\n\n至此MapReduce的逻辑过程基本描述完成，虽然洋洋洒洒可能会有数千字，但本文的出发点就不是简析，而更多是自我概念原理部份的总结，所以力求整个流程完整详细。后面我配上一些网络图片，方便大家快速理解，结合文字加深印象。\n![b26c54ff10ad4e2b9832a960ef4aab90-image.png](http://img.wqkenqing.ren//file/2017/10/b26c54ff10ad4e2b9832a960ef4aab90-image.png)\n\n![a179f15b88cc403b8bd84d7963823762-image.png](http://img.wqkenqing.ren//file/2017/10/a179f15b88cc403b8bd84d7963823762-image.png)\n\n![4a5b5498dd764087ade380db394e6f84-image.png](http://img.wqkenqing.ren//file/2017/10/4a5b5498dd764087ade380db394e6f84-image.png)\n\n![74ed215c305747a49348430782e5636a-image.png](http://img.wqkenqing.ren//file/2017/10/74ed215c305747a49348430782e5636a-image.png)\n\n\n![b55be177bd514ce79b7444c2dd3ddcfb-image.png](http://img.wqkenqing.ren//file/2017/10/b55be177bd514ce79b7444c2dd3ddcfb-image.png)\n\n![286bb24da172471793924b2b9b7c857c-image.png](http://img.wqkenqing.ren//file/2017/10/286bb24da172471793924b2b9b7c857c-image.png)\n![68bbc5f114f3496d886402cbb0da8fc1-image.png](http://img.wqkenqing.ren//file/2017/10/68bbc5f114f3496d886402cbb0da8fc1-image.png)\n\n![38d8bf9498274367b22856f62a8f7fcf-image.png](http://img.wqkenqing.ren//file/2017/10/38d8bf9498274367b22856f62a8f7fcf-image.png)\n\n![7b7e5da815064fdfa0d060910f8dfb9b-image.png](http://img.wqkenqing.ren//file/2017/10/7b7e5da815064fdfa0d060910f8dfb9b-image.png)\n\n![a4ac8a6f758b4bdfb5e1a752a02f0654-image.png](http://img.wqkenqing.ren//file/2017/10/a4ac8a6f758b4bdfb5e1a752a02f0654-image.png)\n\n![9e91f8a6b0ab488abbad0714487fe10f-image.png](http://img.wqkenqing.ren//file/2017/10/9e91f8a6b0ab488abbad0714487fe10f-image.png)\n\n![87a4d55fff15408c87f94029b8fb2aea-image.png](http://img.wqkenqing.ren//file/2017/10/87a4d55fff15408c87f94029b8fb2aea-image.png)\n\n![eb099e53d6fa44a5b76410040f41f3ae-image.png](http://img.wqkenqing.ren//file/2017/10/eb099e53d6fa44a5b76410040f41f3ae-image.png)\n\n![98aac8b77be64d53b276f7a112aba12d-image.png](http://img.wqkenqing.ren//file/2017/10/98aac8b77be64d53b276f7a112aba12d-image.png)\n\n\n\n","source":"_posts/王阁/技术/hexo/oldblog/blog26.md","raw":"\n---\n\ntitle: MapReduce的核心思想\ndate: 2019-07-16\ntags: \n\n---\n此处简介\n<!--more-->\n\n`mapreduce在hadoop中更多的承担的是计算的角色`\n\n## 什么是MapReduce？\n\nmapreduce源于谷歌公司为研究大规模数据处理而研发出的一种并行计算模型和方法。\n它将并行编程中的难点和有相对门槛的方法进行高度封装，而给开发者一套接口，让开发者理专注于自己的业务逻辑，即可让自己的代码运行在分布式集群中，大大降低了开发一些并发程序的门槛。从字面上就可以知道，MapReduce分为Map(映射)、Reduce(规约)\n\n## MapReduce的核心思想\n\nMapReduce主要是两种经典函数：\n\n*   映射（Mapping）将一个整体按某种规则映射成N份。并对这N份进行同一种操作。\n*   规约（Reducing）将N份文件，按某种策略进行合并。\n\n## MapReduce的角色与动作\n\n　 MapReduce包含四个组成部分，分别为**Client**、**JobTracker**、**TaskTracker**和**Task**，下面我们详细介绍这四个组成部分。\n\n*   Client：作业提交的发起者， 每一个 Job 都会在用户端通过 Client 类将应用程序以及配置参数 Configuration 打包成 JAR 文件存储在 HDFS，并把路径提交到 JobTracker 的 master 服务，然后由 master 创建每一个 Task（即 MapTask 和 ReduceTask） 将它们分发到各个 TaskTracker 服务中去执行。\n*   JobTracker：初始化作业，分配作业，与TaskTracker通信，协调整个作业 JobTracke负责资源监控和作业调度。JobTracker 监控所有TaskTracker 与job的健康状况，一旦发现失败，就将相应的任务转移到其他节点；同时，JobTracker 会跟踪任务的执行进度、资源使用量等信息，并将这些信息告诉任务调度器，而调度器会在资源出现空闲时，选择合适的任务使用这些资源。在Hadoop 中，任务调度器是一个可插拔的模块，用户可以根据自己的需要设计相应的调度器。\n*   TaskTracker：TaskTracker 会周期性地通过Heartbeat 将本节点上资源的使用情况和任务的运行进度汇报给JobTracker，同时接收JobTracker 发送过来的命令并执行相应的操作（如启动新任务、杀死任务等）。TaskTracker 使用“slot”等量划分本节点上的资源量。“slot”代表计算资源（CPU、内存等）。一个Task 获取到一个slot 后才有机会运行，而Hadoop 调度器的作用就是将各个TaskTracker 上的空闲slot 分配给Task 使用。slot 分为Map slot 和Reduce slot 两种，分别供Map Task 和Reduce Task 使用。TaskTracker 通过slot 数目（可配置参数）限定Task 的并发度。\n*   Task ： Task 分为Map Task 和Reduce Task 两种，均由TaskTracker 启动。HDFS 以固定大小的block 为基本单位存储数据，而对于MapReduce 而言，其处理单位是split。\n*   Map Task 执行过程如下图 所示：由该图可知，Map Task 先将对应的split 迭代解析成一个个key/value 对，依次调用用户 自定义的map() 函数进行处理，最终将临时结果存放到本地磁盘上, 其中临时数据被分成若干个partition，每个partition 将被一个Reduce Task 处理。\n   ![09d902f773ff4e30b1cf995705d4f03c-image.png](http://img.wqkenqing.ren//file/2017/10/09d902f773ff4e30b1cf995705d4f03c-image.png)\n\n\n    Reduce Task 执行过程下图所示。该过程分为三个阶段\n    ![2f9ff84d09cf424cb8a1c4d24db637c0-image.png](http://img.wqkenqing.ren//file/2017/10/2f9ff84d09cf424cb8a1c4d24db637c0-image.png)\n\n\n\n**提交作业**\n\n*   在作业提交之前，需要对作业进行配置\n*   程序代码，主要是自己书写的MapReduce程序\n*   输入输出路径\n*   其他配置，如输出压缩等\n*   配置完成后，通过JobClient来提交\n\n**作业的初始化**\n\n*   客户端提交完成后，JobTracker会将作业加入队列，然后进行调度，默认的调度方法是FIFO调试方式\n    **任务的分配**\n*   TaskTracker和JobTracker之间的通信与任务的分配是通过心跳机制完成的。\n*   TaskTracker会主动向JobTracker询问是否有作业要做，如果自己能做，那么就会申请作业任务，这个任务可以使Map，也可能是Reduce任务\n    **任务的执行**\n*   申请到任务后，TaskTracker会做如下事情：\n*   拷贝代码到本地\n*   拷贝任务的信息到本地\n*   启动Jvm运行任务\n    **状态与任务的更新**\n*   任务在运行过程中，首先会将自己的状态汇报给TaskTracker，然后由TaskTracker汇总报给JobTracker\n*   任务进度是通过计数器来实现的。\n\n**作业的完成**\n\n*   JobTracker 是在接受到最后一个任务运行完成后，才会将任务标志为成功\n*   此时会做删除中间结果等善后处理工作\n  ![8fba570574f6491c96b51698743466b2-image.png](http://img.wqkenqing.ren//file/2017/10/8fba570574f6491c96b51698743466b2-image.png)\n\n\n### MapReduce任务执行流程与数据处理流程详解\n\n`就任务流程而言，上文中有些或已经涉及，有些也介绍的比较详细了。但就整体而言，不是特别具体，或这个整体性，所以在此我们再集中总结一下，即使重复内容，就也当加深印象吧。`\n\n#### 任务执行流程详解\n\n1.  通过jobClient提交当mapreduce的job提交至JobTracker\n    ,提交的具体信息大致会有，conf配置内容，path，相关的Map，Reduce函数等。（数据的切片会在client上完成）\n2.  JobTracker中的Master服务会完成创建一个Task（MapTask与ReduceTask），并将这个任务加载至任务队列中，等待TaskTracker来获取。同进JobTracker会处于一种监听状态，监听所有TaskTracker与Job的健康情况。面对故障时，提供服务转移等。同时它还会记录任务的执行进度，资源的使用情况，提交至任务调度器，由调度器进行资源的调度。\n3.  TaskTracker会主动向jobTacker去询问是否有任务，如果有，就会申请到作业，作业可以是map,也可以是reduce任务。TaskTracker获取的不仅是任务，还有相关的处理代码也会copy一份至本地，然后TaskTracker再针对所分配的split进行处理。TaskTracker还会周期性地通过HearBeat将本节点上的资源的使用情况和任务的进行进度汇报给JobTracker，同时接收JobTracker发过来的相关命令并执行，\n4.  当TaskTracker中的任务完成后会上报给JobTracker,而当最后一个TaskTracker完成后，JobTracker才会将任务标志为成功，并执行一些如删除中间结果等善后工作。\n\n* * *\n\n`从这里我们知道了mapreduce中任务执行流程，但mapreduce作为hadoop的计算框架，它对数据的处理流程我们还没明确涉及，所以接下来我们再深入了解下具体的数据处理流程`\n\n#### 数据处理流程详解\n\n这里的数据处理流程，主要指的是mapreduce执行后，Task中对split的任务具体处理的这一流程，其中还包括，数据的切片，mapTask完成后将中间结果上传等动作。下面我们来具体讨论\n当jobClient向JobTracker提交了任务后，数据处理流程也随之开始\n\n*   在Client端将输入源的数据进行切片(split)，具体的切片机制参考后面\n*   JobTracker中的MRAppMaster将每个Split信息计算出需要的MapTask的实例数量，然后向集群申请机器启动相应数量的mapTask进程\n*   进程启动后，根据给定的数据切片范围进行数据处理，主要流程为\n    a)通过inputFormat来获取RecordReader读取数据，并形成输入的KV对\n    b)将输入KV对传递给用户定义的map（）方法，做逻辑处理，并map()方法的输出的kv对手机到缓存中(这里用到了缓存机制)\n    简而言之map中输入时要做的事是\n    1.反射构造InputFormat.\n    2.反射构造InputSplit.\n    3.创建RecordReader.\n    4.反射创建MapperRunner\n\n![3a461434b0604118aad45a4d38cf3649-image.png](http://img.wqkenqing.ren//file/2017/10/3a461434b0604118aad45a4d38cf3649-image.png)\n\n\n而map输出时相对复杂，主要涉及到的有Partitioner，shuffle，sort，combiner等概念，我们就来一一讨论。\n在map（）方法执行后，map阶段是会有处理的数据输出，正常来说，就是每个split对应的每一行。如上图MapRunner的next为false时，对输入数据的map完成，这时对存内中这些map的数据，会对其进行sort,如果我们事先设置的有combiner那么，还会对sort完的数据执行combiner(**一个类reduce操作，不过是对本地数据的reduce，使用它的原则是combiner的输入不会影响到reduce计算的最终输入，例如：如果计算只是求总数，最大值，最小值可以使用combiner，但是做平均值计算使用combiner的话，最终的reduce计算结果就会出错。**)，然后开始map的内容spill到磁盘中，如果频繁的spill对磁盘会带来较大的损耗和效率影响。所以引入了一个写缓冲区的概念，即每一个Map Task都拥有一个“环形缓冲区”作为Mapper输出的写缓冲区。写缓冲区大小默认为100MB（通过属性io.sort.mb调整），当写缓冲区的数据量达到一定的容量限额时（默认为80%，通过属性io.sort.spill.percent调整），后台线程开始将写缓冲区的数据溢写到本地磁盘。在数据溢写的过程中，只要写缓冲区没有被写满，Mappper依然可以将数据写出到缓冲区中；否则Mapper的执行过程将被阻塞，直到溢写结束。\n溢写以循环的方式进行（即写缓冲区的数据量大致限额时就会执行溢写），可以通过属性mapred.local.dir指定写出的目录。\nspill结束前 溢写线程将数据最终写出到本地磁盘之前，首先根据Reducer的数目对这部分数据进行分区（即每一个分区中的数据会被传送至同一个Reducer进行处理，分区数目与Reducer数据保持一致）即 **partition**，partition是一个类inputSplit()的操作，即根据有多少个ReduceTask生成多少个partition,并通过jobTracker指定给相应的ReduceTask。\n当spill完成后，本地磁盘中会有多个溢出文件存在。在MapTask结束前，这些文件会根据相应的分区进行合并，并排序，合并可能发生多次，具体由**io.sort.factor控制一次最多合并多少个文件。**\n\n如果溢写文件个数超过3（通过属性min.num.spills.for.combine设置），会对合并且分区排序后的结果执行Combine过程（如果MapReduce有设置Combiner），而且combine过程在不影响最终结果的前提下可能会被执行多次；否则不会执行Combine过程（相对而言，Combine开销过大）。\n\n注意：Map Task执行过程中，Combine可能出现在两个地方：写缓冲区溢写过程中、溢写文件合并过程中。\n\n注意：Mapper的一条输出结果（由key、value表示）写出到写缓冲区之前，已经提前计算好相应的分区信息，即分区的过程在数据写入写缓冲区之前就已经完成，溢写过程实际是写缓冲区数据排序的过程（先按分区排序，如果分区相同时，再按键值排序）。\n\n这里涉及到MapReduce的两个组件：Comparator、Partitioner。\n(由于篇幅的原因，这里暂不引入对这两个组件的源码分析，和自定义方式，后面有机会则单开文章讨论)\n\n在将map输出结果作为reducTask中的输入时，会涉及到磁盘写入，网络传输等资源的限制，所以对出于节省资源的考虑，可以在对map的输出结果进行压缩。默认情况下，压缩是不被开启的，可以通过属性**mapred.compress.map.output**、**mapred.map.output.compression.codec**进行相应设置。\n\n当MapTask任务结束后，被指定的分区ReduceTask会立即开始执行，即开始拷贝对应MapTask分区中的输出结果。\nReduce Task的这个阶段被称为“Copy Phase”。Reduce Task拥有少量的线程用于并行地获取Map Tasks的输出结果，默认线程数为5，可以通过属性mapred.reduce.parallel.copies进行设置。\n同样：如果Map Task的输出结果足够小，它会被拷贝至Reduce Task的缓冲区中；否则拷贝至磁盘。当缓冲区中的数据达到一定量（由属性mapred.job.shuffle.merge.percent、mapred.inmem.merge.threshold），这些数据将被合并且溢写到磁盘。如果Combine过程被指定，它将在合并过程被执行，用来减少需要写出到磁盘的数据量。\n\n随着拷贝文件中磁盘上的不断积累，一个后台线程会将它们合并为更大地、有序的文件，用来节省后期的合并时间。如果Map Tasks的输出结合使用了压缩机制，则在合并的过程中需要对数据进行解压处理。\n\n当Reduce Task的所有Map Tasks输出结果均完成拷贝，Reduce Task进入“Sort Phase”（更为合适地应该被称为“Merge Phase”，排序在Map阶段已经被执行），该阶段在保持原有顺序的情况下进行合并。这种合并是以循环方式进行的，循环次数与合并因子（io.sort.factor）有关。\nsort phase 通常不是合并成一个文件，而是略过磁盘操作，直接将数据合并输入至Reduce方法中 这次合并的数据可以结合内存、磁盘两部分进行操作），即“Reduce Phase”。\n\n通常这里还有一个“Group”的阶段，这个阶段决定着哪些键值对属于同一个键。如果没有特殊设置，只有在Map Task输出时那些键完全一样的数据属于同一个键，但这是可以被改变的。\n\n描述至这里终于能引用mapreduce中相当重要的一个概念，即shuffle。这个词在这里该怎么定义，我暂未找到个一个比较满意的答案，但我比较喜欢有人把这个比作是搓完牌一桌子人，在下一局开始前的整个过程。\n即Shuffle操作，涉及到数据的partition、sort、[combine]、spill、[comress]、[merge]、copy、[combine]、merge、group，而这些操作不但决定着程序逻辑的正确性，也决定着MapReduce的运行效率。\n\nshuffle完后进入了ReduceTask的reduce()方法中\n在Reduce Phase的过程中，它处理的是所有Map Tasks输出结果中某一个分区中的所有数据，这些数据整体表现为一个根据键有序的输入，对于每一个键都会相应地调用一次Reduce Function（同一个键对应的值可能有多个，这些值将作为Reduce Function的参数）\n\n至此MapReduce的逻辑过程基本描述完成，虽然洋洋洒洒可能会有数千字，但本文的出发点就不是简析，而更多是自我概念原理部份的总结，所以力求整个流程完整详细。后面我配上一些网络图片，方便大家快速理解，结合文字加深印象。\n![b26c54ff10ad4e2b9832a960ef4aab90-image.png](http://img.wqkenqing.ren//file/2017/10/b26c54ff10ad4e2b9832a960ef4aab90-image.png)\n\n![a179f15b88cc403b8bd84d7963823762-image.png](http://img.wqkenqing.ren//file/2017/10/a179f15b88cc403b8bd84d7963823762-image.png)\n\n![4a5b5498dd764087ade380db394e6f84-image.png](http://img.wqkenqing.ren//file/2017/10/4a5b5498dd764087ade380db394e6f84-image.png)\n\n![74ed215c305747a49348430782e5636a-image.png](http://img.wqkenqing.ren//file/2017/10/74ed215c305747a49348430782e5636a-image.png)\n\n\n![b55be177bd514ce79b7444c2dd3ddcfb-image.png](http://img.wqkenqing.ren//file/2017/10/b55be177bd514ce79b7444c2dd3ddcfb-image.png)\n\n![286bb24da172471793924b2b9b7c857c-image.png](http://img.wqkenqing.ren//file/2017/10/286bb24da172471793924b2b9b7c857c-image.png)\n![68bbc5f114f3496d886402cbb0da8fc1-image.png](http://img.wqkenqing.ren//file/2017/10/68bbc5f114f3496d886402cbb0da8fc1-image.png)\n\n![38d8bf9498274367b22856f62a8f7fcf-image.png](http://img.wqkenqing.ren//file/2017/10/38d8bf9498274367b22856f62a8f7fcf-image.png)\n\n![7b7e5da815064fdfa0d060910f8dfb9b-image.png](http://img.wqkenqing.ren//file/2017/10/7b7e5da815064fdfa0d060910f8dfb9b-image.png)\n\n![a4ac8a6f758b4bdfb5e1a752a02f0654-image.png](http://img.wqkenqing.ren//file/2017/10/a4ac8a6f758b4bdfb5e1a752a02f0654-image.png)\n\n![9e91f8a6b0ab488abbad0714487fe10f-image.png](http://img.wqkenqing.ren//file/2017/10/9e91f8a6b0ab488abbad0714487fe10f-image.png)\n\n![87a4d55fff15408c87f94029b8fb2aea-image.png](http://img.wqkenqing.ren//file/2017/10/87a4d55fff15408c87f94029b8fb2aea-image.png)\n\n![eb099e53d6fa44a5b76410040f41f3ae-image.png](http://img.wqkenqing.ren//file/2017/10/eb099e53d6fa44a5b76410040f41f3ae-image.png)\n\n![98aac8b77be64d53b276f7a112aba12d-image.png](http://img.wqkenqing.ren//file/2017/10/98aac8b77be64d53b276f7a112aba12d-image.png)\n\n\n\n","slug":"王阁/技术/hexo/oldblog/blog26","published":1,"updated":"2023-02-23T02:51:20.906Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg3004tu6pwe522b6bo","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<p><code>mapreduce在hadoop中更多的承担的是计算的角色</code></p>\n<h2 id=\"什么是MapReduce？\"><a href=\"#什么是MapReduce？\" class=\"headerlink\" title=\"什么是MapReduce？\"></a>什么是MapReduce？</h2><p>mapreduce源于谷歌公司为研究大规模数据处理而研发出的一种并行计算模型和方法。<br>它将并行编程中的难点和有相对门槛的方法进行高度封装，而给开发者一套接口，让开发者理专注于自己的业务逻辑，即可让自己的代码运行在分布式集群中，大大降低了开发一些并发程序的门槛。从字面上就可以知道，MapReduce分为Map(映射)、Reduce(规约)</p>\n<h2 id=\"MapReduce的核心思想\"><a href=\"#MapReduce的核心思想\" class=\"headerlink\" title=\"MapReduce的核心思想\"></a>MapReduce的核心思想</h2><p>MapReduce主要是两种经典函数：</p>\n<ul>\n<li>映射（Mapping）将一个整体按某种规则映射成N份。并对这N份进行同一种操作。</li>\n<li>规约（Reducing）将N份文件，按某种策略进行合并。</li>\n</ul>\n<h2 id=\"MapReduce的角色与动作\"><a href=\"#MapReduce的角色与动作\" class=\"headerlink\" title=\"MapReduce的角色与动作\"></a>MapReduce的角色与动作</h2><p>　 MapReduce包含四个组成部分，分别为<strong>Client</strong>、<strong>JobTracker</strong>、<strong>TaskTracker</strong>和<strong>Task</strong>，下面我们详细介绍这四个组成部分。</p>\n<ul>\n<li>Client：作业提交的发起者， 每一个 Job 都会在用户端通过 Client 类将应用程序以及配置参数 Configuration 打包成 JAR 文件存储在 HDFS，并把路径提交到 JobTracker 的 master 服务，然后由 master 创建每一个 Task（即 MapTask 和 ReduceTask） 将它们分发到各个 TaskTracker 服务中去执行。</li>\n<li>JobTracker：初始化作业，分配作业，与TaskTracker通信，协调整个作业 JobTracke负责资源监控和作业调度。JobTracker 监控所有TaskTracker 与job的健康状况，一旦发现失败，就将相应的任务转移到其他节点；同时，JobTracker 会跟踪任务的执行进度、资源使用量等信息，并将这些信息告诉任务调度器，而调度器会在资源出现空闲时，选择合适的任务使用这些资源。在Hadoop 中，任务调度器是一个可插拔的模块，用户可以根据自己的需要设计相应的调度器。</li>\n<li>TaskTracker：TaskTracker 会周期性地通过Heartbeat 将本节点上资源的使用情况和任务的运行进度汇报给JobTracker，同时接收JobTracker 发送过来的命令并执行相应的操作（如启动新任务、杀死任务等）。TaskTracker 使用“slot”等量划分本节点上的资源量。“slot”代表计算资源（CPU、内存等）。一个Task 获取到一个slot 后才有机会运行，而Hadoop 调度器的作用就是将各个TaskTracker 上的空闲slot 分配给Task 使用。slot 分为Map slot 和Reduce slot 两种，分别供Map Task 和Reduce Task 使用。TaskTracker 通过slot 数目（可配置参数）限定Task 的并发度。</li>\n<li>Task ： Task 分为Map Task 和Reduce Task 两种，均由TaskTracker 启动。HDFS 以固定大小的block 为基本单位存储数据，而对于MapReduce 而言，其处理单位是split。</li>\n<li>Map Task 执行过程如下图 所示：由该图可知，Map Task 先将对应的split 迭代解析成一个个key/value 对，依次调用用户 自定义的map() 函数进行处理，最终将临时结果存放到本地磁盘上, 其中临时数据被分成若干个partition，每个partition 将被一个Reduce Task 处理。<br><img src=\"http://img.wqkenqing.ren//file/2017/10/09d902f773ff4e30b1cf995705d4f03c-image.png\" alt=\"09d902f773ff4e30b1cf995705d4f03c-image.png\"></li>\n</ul>\n<pre><code>Reduce Task 执行过程下图所示。该过程分为三个阶段\n![2f9ff84d09cf424cb8a1c4d24db637c0-image.png](http://img.wqkenqing.ren//file/2017/10/2f9ff84d09cf424cb8a1c4d24db637c0-image.png)</code></pre><p><strong>提交作业</strong></p>\n<ul>\n<li>在作业提交之前，需要对作业进行配置</li>\n<li>程序代码，主要是自己书写的MapReduce程序</li>\n<li>输入输出路径</li>\n<li>其他配置，如输出压缩等</li>\n<li>配置完成后，通过JobClient来提交</li>\n</ul>\n<p><strong>作业的初始化</strong></p>\n<ul>\n<li>客户端提交完成后，JobTracker会将作业加入队列，然后进行调度，默认的调度方法是FIFO调试方式<br><strong>任务的分配</strong></li>\n<li>TaskTracker和JobTracker之间的通信与任务的分配是通过心跳机制完成的。</li>\n<li>TaskTracker会主动向JobTracker询问是否有作业要做，如果自己能做，那么就会申请作业任务，这个任务可以使Map，也可能是Reduce任务<br><strong>任务的执行</strong></li>\n<li>申请到任务后，TaskTracker会做如下事情：</li>\n<li>拷贝代码到本地</li>\n<li>拷贝任务的信息到本地</li>\n<li>启动Jvm运行任务<br><strong>状态与任务的更新</strong></li>\n<li>任务在运行过程中，首先会将自己的状态汇报给TaskTracker，然后由TaskTracker汇总报给JobTracker</li>\n<li>任务进度是通过计数器来实现的。</li>\n</ul>\n<p><strong>作业的完成</strong></p>\n<ul>\n<li>JobTracker 是在接受到最后一个任务运行完成后，才会将任务标志为成功</li>\n<li>此时会做删除中间结果等善后处理工作<br><img src=\"http://img.wqkenqing.ren//file/2017/10/8fba570574f6491c96b51698743466b2-image.png\" alt=\"8fba570574f6491c96b51698743466b2-image.png\"></li>\n</ul>\n<h3 id=\"MapReduce任务执行流程与数据处理流程详解\"><a href=\"#MapReduce任务执行流程与数据处理流程详解\" class=\"headerlink\" title=\"MapReduce任务执行流程与数据处理流程详解\"></a>MapReduce任务执行流程与数据处理流程详解</h3><p><code>就任务流程而言，上文中有些或已经涉及，有些也介绍的比较详细了。但就整体而言，不是特别具体，或这个整体性，所以在此我们再集中总结一下，即使重复内容，就也当加深印象吧。</code></p>\n<h4 id=\"任务执行流程详解\"><a href=\"#任务执行流程详解\" class=\"headerlink\" title=\"任务执行流程详解\"></a>任务执行流程详解</h4><ol>\n<li>通过jobClient提交当mapreduce的job提交至JobTracker<br>,提交的具体信息大致会有，conf配置内容，path，相关的Map，Reduce函数等。（数据的切片会在client上完成）</li>\n<li>JobTracker中的Master服务会完成创建一个Task（MapTask与ReduceTask），并将这个任务加载至任务队列中，等待TaskTracker来获取。同进JobTracker会处于一种监听状态，监听所有TaskTracker与Job的健康情况。面对故障时，提供服务转移等。同时它还会记录任务的执行进度，资源的使用情况，提交至任务调度器，由调度器进行资源的调度。</li>\n<li>TaskTracker会主动向jobTacker去询问是否有任务，如果有，就会申请到作业，作业可以是map,也可以是reduce任务。TaskTracker获取的不仅是任务，还有相关的处理代码也会copy一份至本地，然后TaskTracker再针对所分配的split进行处理。TaskTracker还会周期性地通过HearBeat将本节点上的资源的使用情况和任务的进行进度汇报给JobTracker，同时接收JobTracker发过来的相关命令并执行，</li>\n<li>当TaskTracker中的任务完成后会上报给JobTracker,而当最后一个TaskTracker完成后，JobTracker才会将任务标志为成功，并执行一些如删除中间结果等善后工作。</li>\n</ol>\n<hr>\n<p><code>从这里我们知道了mapreduce中任务执行流程，但mapreduce作为hadoop的计算框架，它对数据的处理流程我们还没明确涉及，所以接下来我们再深入了解下具体的数据处理流程</code></p>\n<h4 id=\"数据处理流程详解\"><a href=\"#数据处理流程详解\" class=\"headerlink\" title=\"数据处理流程详解\"></a>数据处理流程详解</h4><p>这里的数据处理流程，主要指的是mapreduce执行后，Task中对split的任务具体处理的这一流程，其中还包括，数据的切片，mapTask完成后将中间结果上传等动作。下面我们来具体讨论<br>当jobClient向JobTracker提交了任务后，数据处理流程也随之开始</p>\n<ul>\n<li>在Client端将输入源的数据进行切片(split)，具体的切片机制参考后面</li>\n<li>JobTracker中的MRAppMaster将每个Split信息计算出需要的MapTask的实例数量，然后向集群申请机器启动相应数量的mapTask进程</li>\n<li>进程启动后，根据给定的数据切片范围进行数据处理，主要流程为<br>a)通过inputFormat来获取RecordReader读取数据，并形成输入的KV对<br>b)将输入KV对传递给用户定义的map（）方法，做逻辑处理，并map()方法的输出的kv对手机到缓存中(这里用到了缓存机制)<br>简而言之map中输入时要做的事是<br>1.反射构造InputFormat.<br>2.反射构造InputSplit.<br>3.创建RecordReader.<br>4.反射创建MapperRunner</li>\n</ul>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/3a461434b0604118aad45a4d38cf3649-image.png\" alt=\"3a461434b0604118aad45a4d38cf3649-image.png\"></p>\n<p>而map输出时相对复杂，主要涉及到的有Partitioner，shuffle，sort，combiner等概念，我们就来一一讨论。<br>在map（）方法执行后，map阶段是会有处理的数据输出，正常来说，就是每个split对应的每一行。如上图MapRunner的next为false时，对输入数据的map完成，这时对存内中这些map的数据，会对其进行sort,如果我们事先设置的有combiner那么，还会对sort完的数据执行combiner(<strong>一个类reduce操作，不过是对本地数据的reduce，使用它的原则是combiner的输入不会影响到reduce计算的最终输入，例如：如果计算只是求总数，最大值，最小值可以使用combiner，但是做平均值计算使用combiner的话，最终的reduce计算结果就会出错。</strong>)，然后开始map的内容spill到磁盘中，如果频繁的spill对磁盘会带来较大的损耗和效率影响。所以引入了一个写缓冲区的概念，即每一个Map Task都拥有一个“环形缓冲区”作为Mapper输出的写缓冲区。写缓冲区大小默认为100MB（通过属性io.sort.mb调整），当写缓冲区的数据量达到一定的容量限额时（默认为80%，通过属性io.sort.spill.percent调整），后台线程开始将写缓冲区的数据溢写到本地磁盘。在数据溢写的过程中，只要写缓冲区没有被写满，Mappper依然可以将数据写出到缓冲区中；否则Mapper的执行过程将被阻塞，直到溢写结束。<br>溢写以循环的方式进行（即写缓冲区的数据量大致限额时就会执行溢写），可以通过属性mapred.local.dir指定写出的目录。<br>spill结束前 溢写线程将数据最终写出到本地磁盘之前，首先根据Reducer的数目对这部分数据进行分区（即每一个分区中的数据会被传送至同一个Reducer进行处理，分区数目与Reducer数据保持一致）即 <strong>partition</strong>，partition是一个类inputSplit()的操作，即根据有多少个ReduceTask生成多少个partition,并通过jobTracker指定给相应的ReduceTask。<br>当spill完成后，本地磁盘中会有多个溢出文件存在。在MapTask结束前，这些文件会根据相应的分区进行合并，并排序，合并可能发生多次，具体由<strong>io.sort.factor控制一次最多合并多少个文件。</strong></p>\n<p>如果溢写文件个数超过3（通过属性min.num.spills.for.combine设置），会对合并且分区排序后的结果执行Combine过程（如果MapReduce有设置Combiner），而且combine过程在不影响最终结果的前提下可能会被执行多次；否则不会执行Combine过程（相对而言，Combine开销过大）。</p>\n<p>注意：Map Task执行过程中，Combine可能出现在两个地方：写缓冲区溢写过程中、溢写文件合并过程中。</p>\n<p>注意：Mapper的一条输出结果（由key、value表示）写出到写缓冲区之前，已经提前计算好相应的分区信息，即分区的过程在数据写入写缓冲区之前就已经完成，溢写过程实际是写缓冲区数据排序的过程（先按分区排序，如果分区相同时，再按键值排序）。</p>\n<p>这里涉及到MapReduce的两个组件：Comparator、Partitioner。<br>(由于篇幅的原因，这里暂不引入对这两个组件的源码分析，和自定义方式，后面有机会则单开文章讨论)</p>\n<p>在将map输出结果作为reducTask中的输入时，会涉及到磁盘写入，网络传输等资源的限制，所以对出于节省资源的考虑，可以在对map的输出结果进行压缩。默认情况下，压缩是不被开启的，可以通过属性<strong>mapred.compress.map.output</strong>、<strong>mapred.map.output.compression.codec</strong>进行相应设置。</p>\n<p>当MapTask任务结束后，被指定的分区ReduceTask会立即开始执行，即开始拷贝对应MapTask分区中的输出结果。<br>Reduce Task的这个阶段被称为“Copy Phase”。Reduce Task拥有少量的线程用于并行地获取Map Tasks的输出结果，默认线程数为5，可以通过属性mapred.reduce.parallel.copies进行设置。<br>同样：如果Map Task的输出结果足够小，它会被拷贝至Reduce Task的缓冲区中；否则拷贝至磁盘。当缓冲区中的数据达到一定量（由属性mapred.job.shuffle.merge.percent、mapred.inmem.merge.threshold），这些数据将被合并且溢写到磁盘。如果Combine过程被指定，它将在合并过程被执行，用来减少需要写出到磁盘的数据量。</p>\n<p>随着拷贝文件中磁盘上的不断积累，一个后台线程会将它们合并为更大地、有序的文件，用来节省后期的合并时间。如果Map Tasks的输出结合使用了压缩机制，则在合并的过程中需要对数据进行解压处理。</p>\n<p>当Reduce Task的所有Map Tasks输出结果均完成拷贝，Reduce Task进入“Sort Phase”（更为合适地应该被称为“Merge Phase”，排序在Map阶段已经被执行），该阶段在保持原有顺序的情况下进行合并。这种合并是以循环方式进行的，循环次数与合并因子（io.sort.factor）有关。<br>sort phase 通常不是合并成一个文件，而是略过磁盘操作，直接将数据合并输入至Reduce方法中 这次合并的数据可以结合内存、磁盘两部分进行操作），即“Reduce Phase”。</p>\n<p>通常这里还有一个“Group”的阶段，这个阶段决定着哪些键值对属于同一个键。如果没有特殊设置，只有在Map Task输出时那些键完全一样的数据属于同一个键，但这是可以被改变的。</p>\n<p>描述至这里终于能引用mapreduce中相当重要的一个概念，即shuffle。这个词在这里该怎么定义，我暂未找到个一个比较满意的答案，但我比较喜欢有人把这个比作是搓完牌一桌子人，在下一局开始前的整个过程。<br>即Shuffle操作，涉及到数据的partition、sort、[combine]、spill、[comress]、[merge]、copy、[combine]、merge、group，而这些操作不但决定着程序逻辑的正确性，也决定着MapReduce的运行效率。</p>\n<p>shuffle完后进入了ReduceTask的reduce()方法中<br>在Reduce Phase的过程中，它处理的是所有Map Tasks输出结果中某一个分区中的所有数据，这些数据整体表现为一个根据键有序的输入，对于每一个键都会相应地调用一次Reduce Function（同一个键对应的值可能有多个，这些值将作为Reduce Function的参数）</p>\n<p>至此MapReduce的逻辑过程基本描述完成，虽然洋洋洒洒可能会有数千字，但本文的出发点就不是简析，而更多是自我概念原理部份的总结，所以力求整个流程完整详细。后面我配上一些网络图片，方便大家快速理解，结合文字加深印象。<br><img src=\"http://img.wqkenqing.ren//file/2017/10/b26c54ff10ad4e2b9832a960ef4aab90-image.png\" alt=\"b26c54ff10ad4e2b9832a960ef4aab90-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/a179f15b88cc403b8bd84d7963823762-image.png\" alt=\"a179f15b88cc403b8bd84d7963823762-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/4a5b5498dd764087ade380db394e6f84-image.png\" alt=\"4a5b5498dd764087ade380db394e6f84-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/74ed215c305747a49348430782e5636a-image.png\" alt=\"74ed215c305747a49348430782e5636a-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/b55be177bd514ce79b7444c2dd3ddcfb-image.png\" alt=\"b55be177bd514ce79b7444c2dd3ddcfb-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/286bb24da172471793924b2b9b7c857c-image.png\" alt=\"286bb24da172471793924b2b9b7c857c-image.png\"><br><img src=\"http://img.wqkenqing.ren//file/2017/10/68bbc5f114f3496d886402cbb0da8fc1-image.png\" alt=\"68bbc5f114f3496d886402cbb0da8fc1-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/38d8bf9498274367b22856f62a8f7fcf-image.png\" alt=\"38d8bf9498274367b22856f62a8f7fcf-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/7b7e5da815064fdfa0d060910f8dfb9b-image.png\" alt=\"7b7e5da815064fdfa0d060910f8dfb9b-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/a4ac8a6f758b4bdfb5e1a752a02f0654-image.png\" alt=\"a4ac8a6f758b4bdfb5e1a752a02f0654-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/9e91f8a6b0ab488abbad0714487fe10f-image.png\" alt=\"9e91f8a6b0ab488abbad0714487fe10f-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/87a4d55fff15408c87f94029b8fb2aea-image.png\" alt=\"87a4d55fff15408c87f94029b8fb2aea-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/eb099e53d6fa44a5b76410040f41f3ae-image.png\" alt=\"eb099e53d6fa44a5b76410040f41f3ae-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/98aac8b77be64d53b276f7a112aba12d-image.png\" alt=\"98aac8b77be64d53b276f7a112aba12d-image.png\"></p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<p><code>mapreduce在hadoop中更多的承担的是计算的角色</code></p>\n<h2 id=\"什么是MapReduce？\"><a href=\"#什么是MapReduce？\" class=\"headerlink\" title=\"什么是MapReduce？\"></a>什么是MapReduce？</h2><p>mapreduce源于谷歌公司为研究大规模数据处理而研发出的一种并行计算模型和方法。<br>它将并行编程中的难点和有相对门槛的方法进行高度封装，而给开发者一套接口，让开发者理专注于自己的业务逻辑，即可让自己的代码运行在分布式集群中，大大降低了开发一些并发程序的门槛。从字面上就可以知道，MapReduce分为Map(映射)、Reduce(规约)</p>\n<h2 id=\"MapReduce的核心思想\"><a href=\"#MapReduce的核心思想\" class=\"headerlink\" title=\"MapReduce的核心思想\"></a>MapReduce的核心思想</h2><p>MapReduce主要是两种经典函数：</p>\n<ul>\n<li>映射（Mapping）将一个整体按某种规则映射成N份。并对这N份进行同一种操作。</li>\n<li>规约（Reducing）将N份文件，按某种策略进行合并。</li>\n</ul>\n<h2 id=\"MapReduce的角色与动作\"><a href=\"#MapReduce的角色与动作\" class=\"headerlink\" title=\"MapReduce的角色与动作\"></a>MapReduce的角色与动作</h2><p>　 MapReduce包含四个组成部分，分别为<strong>Client</strong>、<strong>JobTracker</strong>、<strong>TaskTracker</strong>和<strong>Task</strong>，下面我们详细介绍这四个组成部分。</p>\n<ul>\n<li>Client：作业提交的发起者， 每一个 Job 都会在用户端通过 Client 类将应用程序以及配置参数 Configuration 打包成 JAR 文件存储在 HDFS，并把路径提交到 JobTracker 的 master 服务，然后由 master 创建每一个 Task（即 MapTask 和 ReduceTask） 将它们分发到各个 TaskTracker 服务中去执行。</li>\n<li>JobTracker：初始化作业，分配作业，与TaskTracker通信，协调整个作业 JobTracke负责资源监控和作业调度。JobTracker 监控所有TaskTracker 与job的健康状况，一旦发现失败，就将相应的任务转移到其他节点；同时，JobTracker 会跟踪任务的执行进度、资源使用量等信息，并将这些信息告诉任务调度器，而调度器会在资源出现空闲时，选择合适的任务使用这些资源。在Hadoop 中，任务调度器是一个可插拔的模块，用户可以根据自己的需要设计相应的调度器。</li>\n<li>TaskTracker：TaskTracker 会周期性地通过Heartbeat 将本节点上资源的使用情况和任务的运行进度汇报给JobTracker，同时接收JobTracker 发送过来的命令并执行相应的操作（如启动新任务、杀死任务等）。TaskTracker 使用“slot”等量划分本节点上的资源量。“slot”代表计算资源（CPU、内存等）。一个Task 获取到一个slot 后才有机会运行，而Hadoop 调度器的作用就是将各个TaskTracker 上的空闲slot 分配给Task 使用。slot 分为Map slot 和Reduce slot 两种，分别供Map Task 和Reduce Task 使用。TaskTracker 通过slot 数目（可配置参数）限定Task 的并发度。</li>\n<li>Task ： Task 分为Map Task 和Reduce Task 两种，均由TaskTracker 启动。HDFS 以固定大小的block 为基本单位存储数据，而对于MapReduce 而言，其处理单位是split。</li>\n<li>Map Task 执行过程如下图 所示：由该图可知，Map Task 先将对应的split 迭代解析成一个个key/value 对，依次调用用户 自定义的map() 函数进行处理，最终将临时结果存放到本地磁盘上, 其中临时数据被分成若干个partition，每个partition 将被一个Reduce Task 处理。<br><img src=\"http://img.wqkenqing.ren//file/2017/10/09d902f773ff4e30b1cf995705d4f03c-image.png\" alt=\"09d902f773ff4e30b1cf995705d4f03c-image.png\"></li>\n</ul>\n<pre><code>Reduce Task 执行过程下图所示。该过程分为三个阶段\n![2f9ff84d09cf424cb8a1c4d24db637c0-image.png](http://img.wqkenqing.ren//file/2017/10/2f9ff84d09cf424cb8a1c4d24db637c0-image.png)</code></pre><p><strong>提交作业</strong></p>\n<ul>\n<li>在作业提交之前，需要对作业进行配置</li>\n<li>程序代码，主要是自己书写的MapReduce程序</li>\n<li>输入输出路径</li>\n<li>其他配置，如输出压缩等</li>\n<li>配置完成后，通过JobClient来提交</li>\n</ul>\n<p><strong>作业的初始化</strong></p>\n<ul>\n<li>客户端提交完成后，JobTracker会将作业加入队列，然后进行调度，默认的调度方法是FIFO调试方式<br><strong>任务的分配</strong></li>\n<li>TaskTracker和JobTracker之间的通信与任务的分配是通过心跳机制完成的。</li>\n<li>TaskTracker会主动向JobTracker询问是否有作业要做，如果自己能做，那么就会申请作业任务，这个任务可以使Map，也可能是Reduce任务<br><strong>任务的执行</strong></li>\n<li>申请到任务后，TaskTracker会做如下事情：</li>\n<li>拷贝代码到本地</li>\n<li>拷贝任务的信息到本地</li>\n<li>启动Jvm运行任务<br><strong>状态与任务的更新</strong></li>\n<li>任务在运行过程中，首先会将自己的状态汇报给TaskTracker，然后由TaskTracker汇总报给JobTracker</li>\n<li>任务进度是通过计数器来实现的。</li>\n</ul>\n<p><strong>作业的完成</strong></p>\n<ul>\n<li>JobTracker 是在接受到最后一个任务运行完成后，才会将任务标志为成功</li>\n<li>此时会做删除中间结果等善后处理工作<br><img src=\"http://img.wqkenqing.ren//file/2017/10/8fba570574f6491c96b51698743466b2-image.png\" alt=\"8fba570574f6491c96b51698743466b2-image.png\"></li>\n</ul>\n<h3 id=\"MapReduce任务执行流程与数据处理流程详解\"><a href=\"#MapReduce任务执行流程与数据处理流程详解\" class=\"headerlink\" title=\"MapReduce任务执行流程与数据处理流程详解\"></a>MapReduce任务执行流程与数据处理流程详解</h3><p><code>就任务流程而言，上文中有些或已经涉及，有些也介绍的比较详细了。但就整体而言，不是特别具体，或这个整体性，所以在此我们再集中总结一下，即使重复内容，就也当加深印象吧。</code></p>\n<h4 id=\"任务执行流程详解\"><a href=\"#任务执行流程详解\" class=\"headerlink\" title=\"任务执行流程详解\"></a>任务执行流程详解</h4><ol>\n<li>通过jobClient提交当mapreduce的job提交至JobTracker<br>,提交的具体信息大致会有，conf配置内容，path，相关的Map，Reduce函数等。（数据的切片会在client上完成）</li>\n<li>JobTracker中的Master服务会完成创建一个Task（MapTask与ReduceTask），并将这个任务加载至任务队列中，等待TaskTracker来获取。同进JobTracker会处于一种监听状态，监听所有TaskTracker与Job的健康情况。面对故障时，提供服务转移等。同时它还会记录任务的执行进度，资源的使用情况，提交至任务调度器，由调度器进行资源的调度。</li>\n<li>TaskTracker会主动向jobTacker去询问是否有任务，如果有，就会申请到作业，作业可以是map,也可以是reduce任务。TaskTracker获取的不仅是任务，还有相关的处理代码也会copy一份至本地，然后TaskTracker再针对所分配的split进行处理。TaskTracker还会周期性地通过HearBeat将本节点上的资源的使用情况和任务的进行进度汇报给JobTracker，同时接收JobTracker发过来的相关命令并执行，</li>\n<li>当TaskTracker中的任务完成后会上报给JobTracker,而当最后一个TaskTracker完成后，JobTracker才会将任务标志为成功，并执行一些如删除中间结果等善后工作。</li>\n</ol>\n<hr>\n<p><code>从这里我们知道了mapreduce中任务执行流程，但mapreduce作为hadoop的计算框架，它对数据的处理流程我们还没明确涉及，所以接下来我们再深入了解下具体的数据处理流程</code></p>\n<h4 id=\"数据处理流程详解\"><a href=\"#数据处理流程详解\" class=\"headerlink\" title=\"数据处理流程详解\"></a>数据处理流程详解</h4><p>这里的数据处理流程，主要指的是mapreduce执行后，Task中对split的任务具体处理的这一流程，其中还包括，数据的切片，mapTask完成后将中间结果上传等动作。下面我们来具体讨论<br>当jobClient向JobTracker提交了任务后，数据处理流程也随之开始</p>\n<ul>\n<li>在Client端将输入源的数据进行切片(split)，具体的切片机制参考后面</li>\n<li>JobTracker中的MRAppMaster将每个Split信息计算出需要的MapTask的实例数量，然后向集群申请机器启动相应数量的mapTask进程</li>\n<li>进程启动后，根据给定的数据切片范围进行数据处理，主要流程为<br>a)通过inputFormat来获取RecordReader读取数据，并形成输入的KV对<br>b)将输入KV对传递给用户定义的map（）方法，做逻辑处理，并map()方法的输出的kv对手机到缓存中(这里用到了缓存机制)<br>简而言之map中输入时要做的事是<br>1.反射构造InputFormat.<br>2.反射构造InputSplit.<br>3.创建RecordReader.<br>4.反射创建MapperRunner</li>\n</ul>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/3a461434b0604118aad45a4d38cf3649-image.png\" alt=\"3a461434b0604118aad45a4d38cf3649-image.png\"></p>\n<p>而map输出时相对复杂，主要涉及到的有Partitioner，shuffle，sort，combiner等概念，我们就来一一讨论。<br>在map（）方法执行后，map阶段是会有处理的数据输出，正常来说，就是每个split对应的每一行。如上图MapRunner的next为false时，对输入数据的map完成，这时对存内中这些map的数据，会对其进行sort,如果我们事先设置的有combiner那么，还会对sort完的数据执行combiner(<strong>一个类reduce操作，不过是对本地数据的reduce，使用它的原则是combiner的输入不会影响到reduce计算的最终输入，例如：如果计算只是求总数，最大值，最小值可以使用combiner，但是做平均值计算使用combiner的话，最终的reduce计算结果就会出错。</strong>)，然后开始map的内容spill到磁盘中，如果频繁的spill对磁盘会带来较大的损耗和效率影响。所以引入了一个写缓冲区的概念，即每一个Map Task都拥有一个“环形缓冲区”作为Mapper输出的写缓冲区。写缓冲区大小默认为100MB（通过属性io.sort.mb调整），当写缓冲区的数据量达到一定的容量限额时（默认为80%，通过属性io.sort.spill.percent调整），后台线程开始将写缓冲区的数据溢写到本地磁盘。在数据溢写的过程中，只要写缓冲区没有被写满，Mappper依然可以将数据写出到缓冲区中；否则Mapper的执行过程将被阻塞，直到溢写结束。<br>溢写以循环的方式进行（即写缓冲区的数据量大致限额时就会执行溢写），可以通过属性mapred.local.dir指定写出的目录。<br>spill结束前 溢写线程将数据最终写出到本地磁盘之前，首先根据Reducer的数目对这部分数据进行分区（即每一个分区中的数据会被传送至同一个Reducer进行处理，分区数目与Reducer数据保持一致）即 <strong>partition</strong>，partition是一个类inputSplit()的操作，即根据有多少个ReduceTask生成多少个partition,并通过jobTracker指定给相应的ReduceTask。<br>当spill完成后，本地磁盘中会有多个溢出文件存在。在MapTask结束前，这些文件会根据相应的分区进行合并，并排序，合并可能发生多次，具体由<strong>io.sort.factor控制一次最多合并多少个文件。</strong></p>\n<p>如果溢写文件个数超过3（通过属性min.num.spills.for.combine设置），会对合并且分区排序后的结果执行Combine过程（如果MapReduce有设置Combiner），而且combine过程在不影响最终结果的前提下可能会被执行多次；否则不会执行Combine过程（相对而言，Combine开销过大）。</p>\n<p>注意：Map Task执行过程中，Combine可能出现在两个地方：写缓冲区溢写过程中、溢写文件合并过程中。</p>\n<p>注意：Mapper的一条输出结果（由key、value表示）写出到写缓冲区之前，已经提前计算好相应的分区信息，即分区的过程在数据写入写缓冲区之前就已经完成，溢写过程实际是写缓冲区数据排序的过程（先按分区排序，如果分区相同时，再按键值排序）。</p>\n<p>这里涉及到MapReduce的两个组件：Comparator、Partitioner。<br>(由于篇幅的原因，这里暂不引入对这两个组件的源码分析，和自定义方式，后面有机会则单开文章讨论)</p>\n<p>在将map输出结果作为reducTask中的输入时，会涉及到磁盘写入，网络传输等资源的限制，所以对出于节省资源的考虑，可以在对map的输出结果进行压缩。默认情况下，压缩是不被开启的，可以通过属性<strong>mapred.compress.map.output</strong>、<strong>mapred.map.output.compression.codec</strong>进行相应设置。</p>\n<p>当MapTask任务结束后，被指定的分区ReduceTask会立即开始执行，即开始拷贝对应MapTask分区中的输出结果。<br>Reduce Task的这个阶段被称为“Copy Phase”。Reduce Task拥有少量的线程用于并行地获取Map Tasks的输出结果，默认线程数为5，可以通过属性mapred.reduce.parallel.copies进行设置。<br>同样：如果Map Task的输出结果足够小，它会被拷贝至Reduce Task的缓冲区中；否则拷贝至磁盘。当缓冲区中的数据达到一定量（由属性mapred.job.shuffle.merge.percent、mapred.inmem.merge.threshold），这些数据将被合并且溢写到磁盘。如果Combine过程被指定，它将在合并过程被执行，用来减少需要写出到磁盘的数据量。</p>\n<p>随着拷贝文件中磁盘上的不断积累，一个后台线程会将它们合并为更大地、有序的文件，用来节省后期的合并时间。如果Map Tasks的输出结合使用了压缩机制，则在合并的过程中需要对数据进行解压处理。</p>\n<p>当Reduce Task的所有Map Tasks输出结果均完成拷贝，Reduce Task进入“Sort Phase”（更为合适地应该被称为“Merge Phase”，排序在Map阶段已经被执行），该阶段在保持原有顺序的情况下进行合并。这种合并是以循环方式进行的，循环次数与合并因子（io.sort.factor）有关。<br>sort phase 通常不是合并成一个文件，而是略过磁盘操作，直接将数据合并输入至Reduce方法中 这次合并的数据可以结合内存、磁盘两部分进行操作），即“Reduce Phase”。</p>\n<p>通常这里还有一个“Group”的阶段，这个阶段决定着哪些键值对属于同一个键。如果没有特殊设置，只有在Map Task输出时那些键完全一样的数据属于同一个键，但这是可以被改变的。</p>\n<p>描述至这里终于能引用mapreduce中相当重要的一个概念，即shuffle。这个词在这里该怎么定义，我暂未找到个一个比较满意的答案，但我比较喜欢有人把这个比作是搓完牌一桌子人，在下一局开始前的整个过程。<br>即Shuffle操作，涉及到数据的partition、sort、[combine]、spill、[comress]、[merge]、copy、[combine]、merge、group，而这些操作不但决定着程序逻辑的正确性，也决定着MapReduce的运行效率。</p>\n<p>shuffle完后进入了ReduceTask的reduce()方法中<br>在Reduce Phase的过程中，它处理的是所有Map Tasks输出结果中某一个分区中的所有数据，这些数据整体表现为一个根据键有序的输入，对于每一个键都会相应地调用一次Reduce Function（同一个键对应的值可能有多个，这些值将作为Reduce Function的参数）</p>\n<p>至此MapReduce的逻辑过程基本描述完成，虽然洋洋洒洒可能会有数千字，但本文的出发点就不是简析，而更多是自我概念原理部份的总结，所以力求整个流程完整详细。后面我配上一些网络图片，方便大家快速理解，结合文字加深印象。<br><img src=\"http://img.wqkenqing.ren//file/2017/10/b26c54ff10ad4e2b9832a960ef4aab90-image.png\" alt=\"b26c54ff10ad4e2b9832a960ef4aab90-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/a179f15b88cc403b8bd84d7963823762-image.png\" alt=\"a179f15b88cc403b8bd84d7963823762-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/4a5b5498dd764087ade380db394e6f84-image.png\" alt=\"4a5b5498dd764087ade380db394e6f84-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/74ed215c305747a49348430782e5636a-image.png\" alt=\"74ed215c305747a49348430782e5636a-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/b55be177bd514ce79b7444c2dd3ddcfb-image.png\" alt=\"b55be177bd514ce79b7444c2dd3ddcfb-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/286bb24da172471793924b2b9b7c857c-image.png\" alt=\"286bb24da172471793924b2b9b7c857c-image.png\"><br><img src=\"http://img.wqkenqing.ren//file/2017/10/68bbc5f114f3496d886402cbb0da8fc1-image.png\" alt=\"68bbc5f114f3496d886402cbb0da8fc1-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/38d8bf9498274367b22856f62a8f7fcf-image.png\" alt=\"38d8bf9498274367b22856f62a8f7fcf-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/7b7e5da815064fdfa0d060910f8dfb9b-image.png\" alt=\"7b7e5da815064fdfa0d060910f8dfb9b-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/a4ac8a6f758b4bdfb5e1a752a02f0654-image.png\" alt=\"a4ac8a6f758b4bdfb5e1a752a02f0654-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/9e91f8a6b0ab488abbad0714487fe10f-image.png\" alt=\"9e91f8a6b0ab488abbad0714487fe10f-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/87a4d55fff15408c87f94029b8fb2aea-image.png\" alt=\"87a4d55fff15408c87f94029b8fb2aea-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/eb099e53d6fa44a5b76410040f41f3ae-image.png\" alt=\"eb099e53d6fa44a5b76410040f41f3ae-image.png\"></p>\n<p><img src=\"http://img.wqkenqing.ren//file/2017/10/98aac8b77be64d53b276f7a112aba12d-image.png\" alt=\"98aac8b77be64d53b276f7a112aba12d-image.png\"></p>"},{"title":"反射小结","date":"2019-07-15T16:00:00.000Z","_content":"\n此处简介\n\n<!--more-->\n\n## 反射小结\n### 什么是反射\n反射机制是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称为java语言的反射机制。\n`对于反射我的理解是：正java的核心思想，万物对象，那么类的类也可被描述，如类也会有名，属性，方法的特性。皆是对类的类型的一种描述。在jvm中反射机制的存在让java也拥有了动态的特性，即我们可以在运行时才确定类的类型，即相应的方法与属性`\n\n### 反射的功能\n* 在运行时获取其类的相关特性，如名称，属性，方法\n* 可以构造一个类的对象\n* 动态代理\n\n### 反射的三种形式\n\n1. Class.forName(\" \");通过Class的静态方法加载相应的相对路径，获得指定的类的类型\n2. 类.class获取类的类型\n3. 实例.getClass();\n\n`要访问私有属性，要设置setAccessible`\nClass cls ~~\nField file =cls.getDeclaredFields();","source":"_posts/王阁/技术/hexo/oldblog/blog6.md","raw":"---\n\ntitle: 反射小结\ndate: 2019-07-16\ntags:\n\n---\n\n此处简介\n\n<!--more-->\n\n## 反射小结\n### 什么是反射\n反射机制是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称为java语言的反射机制。\n`对于反射我的理解是：正java的核心思想，万物对象，那么类的类也可被描述，如类也会有名，属性，方法的特性。皆是对类的类型的一种描述。在jvm中反射机制的存在让java也拥有了动态的特性，即我们可以在运行时才确定类的类型，即相应的方法与属性`\n\n### 反射的功能\n* 在运行时获取其类的相关特性，如名称，属性，方法\n* 可以构造一个类的对象\n* 动态代理\n\n### 反射的三种形式\n\n1. Class.forName(\" \");通过Class的静态方法加载相应的相对路径，获得指定的类的类型\n2. 类.class获取类的类型\n3. 实例.getClass();\n\n`要访问私有属性，要设置setAccessible`\nClass cls ~~\nField file =cls.getDeclaredFields();","slug":"王阁/技术/hexo/oldblog/blog6","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg4004vu6pw9qdf9243","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h2 id=\"反射小结\"><a href=\"#反射小结\" class=\"headerlink\" title=\"反射小结\"></a>反射小结</h2><h3 id=\"什么是反射\"><a href=\"#什么是反射\" class=\"headerlink\" title=\"什么是反射\"></a>什么是反射</h3><p>反射机制是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称为java语言的反射机制。<br><code>对于反射我的理解是：正java的核心思想，万物对象，那么类的类也可被描述，如类也会有名，属性，方法的特性。皆是对类的类型的一种描述。在jvm中反射机制的存在让java也拥有了动态的特性，即我们可以在运行时才确定类的类型，即相应的方法与属性</code></p>\n<h3 id=\"反射的功能\"><a href=\"#反射的功能\" class=\"headerlink\" title=\"反射的功能\"></a>反射的功能</h3><ul>\n<li>在运行时获取其类的相关特性，如名称，属性，方法</li>\n<li>可以构造一个类的对象</li>\n<li>动态代理</li>\n</ul>\n<h3 id=\"反射的三种形式\"><a href=\"#反射的三种形式\" class=\"headerlink\" title=\"反射的三种形式\"></a>反射的三种形式</h3><ol>\n<li>Class.forName(“ “);通过Class的静态方法加载相应的相对路径，获得指定的类的类型</li>\n<li>类.class获取类的类型</li>\n<li>实例.getClass();</li>\n</ol>\n<p><code>要访问私有属性，要设置setAccessible</code><br>Class cls ~~<br>Field file =cls.getDeclaredFields();</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h2 id=\"反射小结\"><a href=\"#反射小结\" class=\"headerlink\" title=\"反射小结\"></a>反射小结</h2><h3 id=\"什么是反射\"><a href=\"#什么是反射\" class=\"headerlink\" title=\"什么是反射\"></a>什么是反射</h3><p>反射机制是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称为java语言的反射机制。<br><code>对于反射我的理解是：正java的核心思想，万物对象，那么类的类也可被描述，如类也会有名，属性，方法的特性。皆是对类的类型的一种描述。在jvm中反射机制的存在让java也拥有了动态的特性，即我们可以在运行时才确定类的类型，即相应的方法与属性</code></p>\n<h3 id=\"反射的功能\"><a href=\"#反射的功能\" class=\"headerlink\" title=\"反射的功能\"></a>反射的功能</h3><ul>\n<li>在运行时获取其类的相关特性，如名称，属性，方法</li>\n<li>可以构造一个类的对象</li>\n<li>动态代理</li>\n</ul>\n<h3 id=\"反射的三种形式\"><a href=\"#反射的三种形式\" class=\"headerlink\" title=\"反射的三种形式\"></a>反射的三种形式</h3><ol>\n<li>Class.forName(“ “);通过Class的静态方法加载相应的相对路径，获得指定的类的类型</li>\n<li>类.class获取类的类型</li>\n<li>实例.getClass();</li>\n</ol>\n<p><code>要访问私有属性，要设置setAccessible</code><br>Class cls ~~<br>Field file =cls.getDeclaredFields();</p>"},{"title":"Hadoop总结(第一版---HDFS篇)","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n<!--more-->\n\n# Hadoop总结(第一版---HDFS篇)\n```接触hadoop生态也有大半年了，一直碎片化的查阅，学习了一些博客和书籍。随着使用的深入，对一些常用的模块有较熟练的使用，也有写过一些日常小结，但对hadoop本身背后的原理没有系统性的学习，回顾来看，就提升曲线来说，现在亟需总结这环节，这也是本文的由来```\n## 什么是hadoop？\n>hadoop是稳定的，高容错的，可大规模布署的分布式文件，存储，并行编程框架。\n```本文默认是已经有hadoop使用经验,所以暂不涉及具体的hadoop生态的各组件的部署和调优细节，后续单开文章来总结。但在具体讲解时会涉及说参数配置会对相关组件参生影响```\n具体而言，hadoop核心组件内容有：**hdfs**、**mapredcue**。所以接下来的总结主要针对这两在核心组件展开\n## HDFS篇\n### 什么是HDFS？\n**分布式文件系统**：分布式文件系统是一种允许文件通过网络在多台主机上分享的 文件的系统，可让多机器上的多用户分享文件和存储空间\nHDFS:（Hadoop Distribute File System）即hadoop分布式文件系统  主要用于适合运行在通用硬件上的分布式文件系统，特点是高度容错，适合布署在廉价服务器上，具有高吞吐量的数据访问等特点  1\\. 保存多个副本，且提供容错机制，副本丢失或宕机自动恢复。默认存3份。  2\\. 运行在廉价的机器上。  3\\. 适合大数据的处理。多大？多小？HDFS默认会将文件分割成block，64M为1个block。然后将block按键值对存储在HDFS上，并将键值对的映射存到内存中。如果小文件太多，那内存的负担会很重。  4\\. 适用于一次写入、多次查询的情况  5\\. 不支持并发写情况，小文件不合适。因为小文件也占用一个块，小文件越多（1000个1k文件）块越 多，NameNode压力越大。\n``hdfs得部署在linux系统上``\n### HDFS的具体内容\n文件、节点、数据块 HDFS主要是是围绕着这三个关键词设计的.\n#### **数据块**\n* Block：在HDFS中，每个文件都是采用的分块的方式存储，每个block放在不同的dataNode节点上，每个block的标识是一个三元组(block id , numBytes,generationStamp),block id 具有唯一性，具体分配是由namenode节点设置，然后在datanode上建立对应的Block文件，同时建立对应的block meta文件(问题是block meta文件存放位，block size可以通过配置文件设置，所以修改block size会对以前持续化的数据有何影响?）\n* Packet:是HDFS文件在DFSClient与DataNode之间通信的过程中文件的形式(一般一个Block对应多个Packet)\n* Chunk:是通过程中具体传输的文件单位，发送过程以Packet的方式进行，但 一个packet包含多个Chunk,同时对于每个chunk进行checksum计算，生成checksum bytes。\n\n**Packet**\nPacket的结构：数据包和heatbeat包  一个Packet数据包的组成结构主要分为 Packet Header 、PacketData  Packet Header 中又分为：\n![10eed6bcc563463ea0b8cd5adf99adec-image.png](//img.wqkenqing.ren/.qiniudns.com/file/2017/7/10eed6bcc563463ea0b8cd5adf99adec-image.png)\nPacket Data部分是一个Packet的实际数据部分。\n主要内容有\n\n* 一个4字节校验\n* Checksum\n* Chunk部分，Chunk部分最大为512字节\n![c68e61da1e8148ab99b43fe8e3f5408e-image.png](//img.wqkenqing.ren//file/2017/7/c68e61da1e8148ab99b43fe8e3f5408e-image.png)\nPacket创建过程：首先将字节流数据写入一个buffer缓冲区中，也就是从偏移量为25的位置（checksumStart）开 始写Packet数据Chunk的Checksum部分，从偏移量为533的位置（dataStart）开始写Packet数据的Chunk Data部分，直到一个Packet创建完成为止。\n\n```注意：当写一个文件的最后一个Block的最后一个Packet时，如果一个Packet的大小未能达到最大长度，也就是上图对应的缓冲区 中，Checksum与Chunk Data之间还保留了一段未被写过的缓冲区位置，在发送这个Packet之前，会检查Chunksum与Chunk Data之间的缓冲区是否为空白缓冲区（gap），如果有则将Chunk Data部分向前移动，使得Chunk Data 1与Chunk Checksum N相邻，然后才会被发送到DataNode节点```\n\n#### hdsf架构(主要组成是节点）\n主要的构成角色有：Client、NameNode、SecondayNameNode、DataNode\n![5ba6f1ec6b9c4b0982dc2ce73ff9c444-image.png](//img.wqkenqing.ren//file/2017/7/5ba6f1ec6b9c4b0982dc2ce73ff9c444-image.png)\n\n+ Client：系统使用者，调用HDFS API操作文件；与NN交互获取文件元数据;与DN交互进行数据读写, 注意：写数据时文件切分由Client完成\n+ Namenode：Master节点 （也称元数据节点）是系统唯一的管理者。负责元数据的管理(名称空间和数据块映射信息);配置副本策略；处理客户端请求\n+ Datanode：数据存储节点(也称Slave节点)，存储实际的数据；执行数据块的读写；汇报存储信息给NN\n+ Secondary NameNode：备胎，namenode的工作量；是NameNode的冷备份；合并fsimage和fsedits然后再发给namenode\n\n```careful:``` 注意：在hadoop 2.x 版本，当启用 hdfs ha 时，将没有这一角色\n**热冷备份说明**：\n热备份：b是a的热备份，如果a坏掉。那么b马上运行代替a的工作  冷备份：b是a的冷备份，如果a坏掉。那么b不能马上代替a工作。但是b上存储a的一些信息，减少a坏掉之后的损失\n**hdfs构架原则**\n\n1. 元数据与数据分离：文件本身的属性（即元数据）与文件所持有的数据分离\n2. 主/从架构：一个HDFS集群是由一个NameNode和一定数目的DataNode组成\n3. 一次写入多次读取：HDFS中的文件在任何时间只能有一个Writer。当文件被创建，接着写入数据，最后，一旦文件被关闭，就不能再修改。\n4. 移动计算比移动数据更划算：数据运算，越靠近数据，执行运算的性能就越好，由于hdfs数据分布在不同机器上，要让网络的消耗最低，并提高系统的吞吐量，最佳方式是将运算的执行移到离它要处理的数据更近的地方，而不是移动数据\n\n**针对第四条的解释**：\n在上文中交代到hdfs中的文件是以block的形式存放在集群中，所以一个文件可以是被切分成很多block存放在集群的机器中针对第四条，移动计算比移动数据更划算，是因为，从理论上讲，集群的计算能力是很方便扩展的，如服务器的硬件提升，或增加服务器等。但网络带宽等资源却很容易达到瓶颈或增加经济负担，所以将计算转移至每个block就近的机器进行计算，会比将所有的block合到一个机器上再进行计算要划算，所以，叫移动计算要比移动数据划算\n\n##### NameNode\nNameNode是整个文件系统的管理与计算节点，是HDFS中最复杂的一个实体，它与管理着HDFS文件系统中最重要的两个关系\n\n\n1. HDFS文件系统中的文件目录树，以及文件的数据块索引，即每个文件对应的数据块列表  数据块和数据节点的对应关系，即某一块数据块保存在哪些数据节点的信息  **第一个关系**即目录树、元数据和数据块的索引信息持久化到物理存储中，具体的实现是保存在命名空间的镜像fsimage和编辑日志edits中，**careful**：在fsimage中，并没有记录每一个block对应到那几个Datanodes的对应表信息\n2. **第二个关系是**在NameNode启动后，每个DataNode对本地的磁盘进行扫描，将本DataNode上保存的block信息上报至NameNode,Namenode在接收到每个Datanode的块信息汇报后，将接收到的块信息，以及其所在的Datanode信息等保存在内存中。HDFS就是通过这种块信息汇报的方式来完成 block -> Datanodes list的对应表构建（**careful**）\n类似于数据库中的检查点，为了避免edits日志过大，在Hadoop1.X 中，SecondaryNameNode会按照时间阈值（比如24小时）或者edits大小阈值（比如1G），周期性的将fsimage和edits的合 并，然后将最新的fsimage推送给NameNode。而在Hadoop2.X中，这个动作是由Standby NameNode来完成.\n由此可看出，这两个文件一旦损坏或丢失，将导致整个HDFS文件系统不可用\n在hadoop1.X为了保证这两种元数据文件的高可用性，一般的做法，将dfs.namenode.name.dir设置成以逗号分隔的多个目录，这多个目录至少不要在一块磁盘上，最好放在不同的机器上，比如：挂载一个共享文件系统\nfsimage\\edits 是序列化后的文件，想要查看或编辑里面的内容，可通过 hdfs 提供的 oiv\\oev 命令，\n命令: hdfs oiv （offline image viewer） 用于将fsimage文件的内容转储到指定文件中以便于阅读,，如文本文件、XML文件，该命令需要以下参数：\n-i (必填参数) –inputFile <arg> 输入FSImage文件\n-o (必填参数) –outputFile <arg> 输出转换后的文件，如果存在，则会覆盖\n-p (可选参数） –processor <arg> 将FSImage文件转换成哪种格式： (Ls|XML|FileDistribution).默认为Ls\n示例：hdfs oiv -i /data1/hadoop/dfs/name/current/fsimage_0000000000019372521 -o /home/hadoop/fsimage.txt\n命令：hdfs oev (offline edits viewer 离线edits查看器）的缩写， 该工具只操作文件因而并不需要hadoop集群处于运行状态。\n示例: hdfs oev -i edits_0000000000000042778-0000000000000042779 -o edits.xml\n支持的输出格式有binary（hadoop使用的二进制格式）、xml（在不使用参数p时的默认输出格式）和stats（输出edits文件的统计信息）\n由此可以总结到：NameNode管理着DataNode，接收DataNode的注册、心跳、数据块提交等信息的上报，并且在心跳中发送数据块**复制**、**删除**、**恢复**等指令；同时，NameNode还为客户端对**文件系统目录树的操作**和对**文件数据读写**、对**HDFS系统进行管理提供支持**\n另 Namenode 启动后会进入一个称为**安全模式**的特殊状态。处于安全模式 的 Namenode 是不会进行数据块的复制的。 Namenode 从所有的 Datanode 接收心跳信号和块状态报告。 块状态报告包括了某个 Datanode 所有的数据 块列表。每个数据块都有一个指定的最小副本数。当 Namenode 检测确认某 个数据块的副本数目达到这个最小值，那么该数据块就会被认为是副本安全 (safely replicated) 的；在一定百分比（这个参数可配置）的数据块被 Namenode 检测确认是安全之后（加上一个额外的 30 秒等待时间）， Namenode 将退出安全模式状态。接下来它会确定还有哪些数据块的副本没 有达到指定数目，并将这些数据块复制到其他 Datanode 上。  ##### Secondary NameNode  在HA cluster中又称为standby node\n主要作用：  1.如上文提到的合并fsimage和eits日志，将eits日志文件大小控制在一个限度下  大致流程如下  namenode 响应 Secondary namenode 请求，将 edit log 推送给 Secondary namenode ， 开始重新写一个新的 edit log  Secondary namenode 收到来自 namenode 的 fsimage 文件和 edit log  Secondary namenode 将 fsimage 加载到内存，应用 edit log ， 并生成一 个新的 fsimage 文件  Secondary namenode 将新的 fsimage 推送给 Namenode  Namenode 用新的 fsimage 取代旧的 fsimage ， 在 fstime 文件中记下检查 点发生的时\n![aed541bebcc04fb79e2de3c504b7ee46-image.png](//img.wqkenqing.ren//file/2017/7/aed541bebcc04fb79e2de3c504b7ee46-image.png)\n\n\n#### HDFS写文件  1.x 默认的block大小是64M 2.X版本默认block的大小是 128M ![d0c33b33bfbc41e8a493553395e52ef0-image.png](//img.wqkenqing.ren//file/2017/7/d0c33b33bfbc41e8a493553395e52ef0-image.png)\n如上图所示  + Client预先设置的block参数切分FIle\n\n+ CLient向NameNode发送写数据请求，\n+ NameNode，记录block信息，并返回可用的DataNode(具体的返回规则参考下文)\n+ client向DataNode发送block1；发送过程是以流式写入具体流程是\n\n1. 将64M的block1按64k的packet划分\n2. 然后将第一个packet发送给host2\n3. host2接收完后，将第一个packet发送给host1，同时client想host2发送第二个packet\n4. host1接收完第一个packet后，发送给host3，同时接收host2发来的第二个packet\n5. 以此类推，如图红线实线所示，直到将block1发送完毕\n6. host2,host1,host3向NameNode，host2向Client发送通知，说“消息发送完了”。\n7. client收到host2发来的消息后，向namenode发送消息，说我写完了。这样就真完成了。\n8. 发送完block1后，再向host7，host8，host4发送block2  当客户端向 HDFS 文件写入数据的时候，一开始是写到本地临时文件中。假设该文件的副 本系数设置为 3 ，当本地临时文件累积到一个数据块的大小时，客户端会从 Namenode 获取一个 Datanode 列表用于存放副本。然后客户端开始向第一个 Datanode 传输数据，第一个 Datanode 一小部分一小部分 (4 KB) 地接收数据，将每一部分写入本地仓库，并同时传输该部分到列表中 第二个 Datanode 节点。第二个 Datanode 也是这样，一小部分一小部分地接收数据，写入本地 仓库，并同时传给第三个 Datanode 。最后，第三个 Datanode 接收数据并存储在本地。因此， Datanode 能流水线式地从前一个节点接收数据，并在同时转发给下一个节点，数据以流水线的 方式从前一个 Datanode 复制到下一个\n![2c77aaad2f684820bf8a6b475b79d2f1-image.png](//img.wqkenqing.ren//file/2017/7/2c77aaad2f684820bf8a6b475b79d2f1-image.png)\n\n  写入的过程，按hdsf默认设置，1T文件，我们需要3T的存储，3T的网络流量  在执行读或写的过程中，NameNode和DataNode通过HeartBeat进行保存通信，确定DataNode活着。如果发现DataNode死掉了，就将死掉的DataNode上的数据，放到其他节点去。读取时，要读其他节点去  挂掉一个节点，没关系，还有其他节点可以备份；甚至，挂掉某一个机架，也没关系；其他机架上，也有备份\n##### hdfs读文件\n\n  ![8fb62c84f57a4203a2dbedf5f68920d9-image.png](//img.wqkenqing.ren//file/2017/7/8fb62c84f57a4203a2dbedf5f68920d9-image.png)\n\n  客户端通过调用FileSystem对象的open()方法来打开希望读取的文件，对于HDFS来说，这个对象时分布文件系统的一个实例；  DistributedFileSystem通过使用RPC来调用NameNode以确定文件起始块的位置，同一Block按照重复数会返回多个位置，这些位置按照Hadoop集群拓扑结构排序，距离客户端近的排在前面  前两步会返回一个FSDataInputStream对象，该对象会被封装成DFSInputStream对象，DFSInputStream可以方便的管理datanode和namenode数据流，客户端对这个输入流调用read()方法  存储着文件起始块的DataNode地址的DFSInputStream随即连接距离最近的DataNode，通过对数据流反复调用read()方法，将数据从DataNode传输到客户端  到达块的末端时，DFSInputStream会关闭与该DataNode的连接，然后寻找下一个块的最佳DataNode，这些操作对客户端来说是透明的，客户端的角度看来只是读一个持续不断的流  一旦客户端完成读取，就对FSDataInputStream调用close()方法关闭文件读取\n  ##### block持续化结构\n  DataNode节点上一个Block持久化到磁盘上的物理存储结构，如下图所示：  ![df10f0ac586f4baebc2587842aec5675-image.png](//img.wqkenqing.ren//file/2017/7/df10f0ac586f4baebc2587842aec5675-image.png)\n\n 每个Block文件（如上图中blk_1084013198文件）都对应一个meta文件（如上图中blk_1084013198_10273532.meta文件），Block文件是一个一个Chunk的二进制数据（每个Chunk的大小是512字节），而meta文件是与每一个Chunk对应的Checksum数据，是序列化形式存储  ---  至上我们大致了解了HDFS。正如上文提到的Hadoop的特点，高可能，高容错性。若光从上文提到的特性可能还不足以说明，如NameNode环节就提到了NameNode的重要作用，但若NameNode出现了故障，对整个机集会是毁灭性的打击，于是Hadoop也引入其它的一些手段来保存高可用，高容错。接下来我们就来探讨下\n### Hadoop HA的引入\n HA：High Available即高可用性集群，是保证业务连续性的有效解决方案，一般有两个或两个以上的节点，且分为活动节点及备用节点。  在HA具体实现方法不同的情况下，HA框架的流程是一致的, 不一致的就是如何存储和管理日志。在Active NN和Standby NN之间要有个共享的存储日志的地方，Active NN把EditLog写到这个共享的存储日志的地方，Standby NN去读取日志然后执行，这样Active和Standby NN内存中的HDFS元数据保持着同步。一旦发生主从切换Standby NN可以尽快接管Active NN的工作; 默认并未启用 hdfs ha。\n SPOF方案回顾：\n\n1. Secondary NameNode：它不是HA，它只是阶段性的合并edits和fsimage，以缩短集群启动的时间。当NN失效的时候，Secondary NN并无法立刻提供服务，Secondary NN甚至无法保证数据完整性：如果NN数据丢失的话，在上一次合并后的文件系统的改动会丢失\n2. Backup NameNode (HADOOP-4539)：它在内存中复制了NN的当前状态，算是Warm Standby，可也就仅限于此，并没有failover等。它同样是阶段性的做checkpoint，也无法保证数据完整性\n3\\. 手动把name.dir指向NFS（Network File System），这是安全的Cold Standby，可以保证元数据不丢失，但集群的恢复则完全靠手动\n4\\. Facebook AvatarNode：Facebook有强大的运维做后盾，所以Avatarnode只是Hot Standby，并没有自动切换，当主NN失效的时候，需要管理员确认，然后手动把对外提供服务的虚拟IP映射到Standby NN，这样做的好处是确保不会发生脑裂的场景。其某些设计思想和Hadoop 2.0里的HA非常相似，从时间上来看，Hadoop 2.0应该是借鉴了Facebook的做法 ![32ec8d45379b4e4d99505b03b1b33e61-image.png](//img.wqkenqing.ren//file/2017/7/32ec8d45379b4e4d99505b03b1b33e61-image.png)\n\n5\\. PrimaryNN 与StandbyNN之间通过NFS来共享FsEdits、FsImage文件，这样主备NN之间就拥有了一致的目录树和block信息；而block的 位置信息，可以根据DN向两个NN上报的信息过程中构建起来。这样再辅以虚IP，可以较好达到主备NN快速热切的目的。但是显然，这里的NFS又引入了新的SPOF\n6\\. 在主备NN共享元数据的过程中，也有方案通过主NN将FsEdits的内容通过与备NN建立的网络IO流，实时写入备NN，并且保证整个过程的原子性。这种方案，解决了NFS共享元数据引入的SPOF，但是主备NN之间的网络连接又会成为新的问题\n#### hadoop2.X ha 原理:  hadoop2.x之后，Clouera提出了QJM/Qurom Journal Manager，这是一个基于Paxos算法实现的HDFS HA方案，它给出了一种较好的解决思路和方案,示意图如下：\n![bc057fbb4b4047928bf06b7a43364335-image.png](//img.wqkenqing.ren//file/2017/7/bc057fbb4b4047928bf06b7a43364335-image.png)\n\n  + 基本原理就是用2N+1台 JN 存储EditLog，每次写数据操作有大多数（>=N+1）返回成功时即认为该次写成功，数据不会丢失了。当然这个算法所能容忍的是最多有N台机器挂掉，如果多于N台挂掉，这个算法就失效了。这个原理是基于Paxos算法\n  + 在HA架构里面SecondaryNameNode这个冷备角色已经不存在了，为了保持standby NN时时的与主Active NN的元数据保持一致，他们之间交互通过一系列守护的轻量级进程JournalNode  + 任何修改操作在 Active NN上执行时，JN进程同时也会记录修改log到至少半数以上的JN中，这时 Standby NN 监测到JN 里面的同步log发生变化了会读取 JN 里面的修改log，然后同步到自己的的目录镜像树里面，\n  ![608621d2ab52466db89e8a95d165f6e7-image.png](//img.wqkenqing.ren//file/2017/7/608621d2ab52466db89e8a95d165f6e7-image.png)\n\n 当发生故障时，Active的 NN 挂掉后，Standby NN 会在它成为Active NN 前，读取所有的JN里面的修改日志，这样就能高可靠的保证与挂掉的NN的目录镜像树一致，然后无缝的接替它的职责，维护来自客户端请求，从而达到一个高可用的目的  QJM方式来实现HA的主要优势：\n 1\\. 不需要配置额外的高共享存储，降低了复杂度和维护成本\n 2\\. 消除spof\n 3\\. 系统鲁棒性(Robust:健壮)的程度是可配置\n 4\\. JN不会因为其中一台的延迟而影响整体的延迟，而且也不会因为JN的数量增多而影响性能（因为NN向JN发送日志是并行的）  datanode的fencing: 确保只有一个NN能命令DN。HDFS-1972中详细描述了DN如何实现fencing\n 1\\. 每个NN改变状态的时候，向DN发送自己的状态和一个序列号\n 2\\. DN在运行过程中维护此序列号，当failover时，新的NN在返回DN心跳时会返回自己的active状态和一个更大的序列号。DN接收到这个返回则认为该NN为新的active  3\\. 如果这时原来的active NN恢复，返回给DN的心跳信息包含active状态和原来的序列号，这时DN就会拒绝这个NN的命令  客户端fencing：确保只有一个NN能响应客户端请求，让访问standby nn的客户端直接失败。在RPC层封装了一层，通过FailoverProxyProvider以重试的方式连接NN。通过若干次连接一个NN失败后尝试连接新的NN，对客户端的影响是重试的时候增加一定的延迟。客户端可以设置重试此时和时间  Hadoop提供了ZKFailoverController角色，部署在每个NameNode的节点上，作为一个deamon进程, 简称zkfc，\n ![3cfc6fc17a8e47509465442f6eaf7c14-image.png](//img.wqkenqing.ren//file/2017/7/3cfc6fc17a8e47509465442f6eaf7c14-image.png)\n\n   FailoverController主要包括三个组件:\n   1\\. HealthMonitor: 监控NameNode是否处于unavailable或unhealthy状态。当前通过RPC调用NN相应的方法完成\n   2\\. ActiveStandbyElector: 管理和监控自己在ZK中的状态\n   3\\. ZKFailoverController 它订阅HealthMonitor 和ActiveStandbyElector 的事件，并管理NameNode的状态  ZKFailoverController主要职责：      1\\. 健康监测：周期性的向它监控的NN发送健康探测命令，从而来确定某个NameNode是否处于健康状态，如果机器宕机，心跳失败，那么zkfc就会标记它处于一个不健康的状态\n   2\\. 会话管理：如 果NN是健康的，zkfc就会在zookeeper中保持一个打开的会话，如果NameNode同时还是Active状态的，那么zkfc还会在 Zookeeper中占有一个类型为短暂类型的znode，当这个NN挂掉时，这个znode将会被删除，然后备用的NN，将会得到这把锁，升级为主 NN，同时标记状态为Active\n   3\\. 当宕机的NN新启动时，它会再次注册zookeper，发现已经有znode锁了，便会自动变为Standby状态，如此往复循环，保证高可靠，需要注意，目前仅仅支持最多配置2个NN\n   4\\. master选举：如上所述，通过在zookeeper中维持一个短暂类型的znode，来实现抢占式的锁机制，从而判断那个NameNode为Active状态  **hadoop2.x Federation**：  单Active NN的架构使得HDFS在集群扩展性和性能上都有潜在的问题，当集群大到一定程度后，NN进程使用的内存可能会达到上百G，NN成为了性能的瓶颈  常用的估算公式为1G对应1百万个块，按缺省块大小计算的话，大概是64T (这个估算比例是有比较大的富裕的，其实，即使是每个文件只有一个块，所有元数据信息也不会有1KB/block)  为了解决这个问题,Hadoop 2.x提供了HDFS Federation, 示意图如下：\n   ![e5015b90accf4fe6a7729afe692ffa64-image.png](//img.wqkenqing.ren//file/2017/7/e5015b90accf4fe6a7729afe692ffa64-image.png)\n\n  多个NN共用一个集群里的存储资源，每个NN都可以单独对外提供服务  每个NN都会定义一个存储池，有单独的id，每个DN都为所有存储池提供存储  DN会按照存储池id向其对应的NN汇报块信息，同时，DN会向所有NN汇报本地存储可用资源情况  如果需要在客户端方便的访问若干个NN上的资源，可以使用客户端挂载表，把不同的目录映射到不同的NN，但NN上必须存在相应的目录  设计优势：  改动最小，向前兼容；现有的NN无需任何配置改动；如果现有的客户端只连某台NN的话  分离命名空间管理和块存储管理  客户端挂载表：通过路径自动对应NN、使Federation的配置改动对应用透明  (与上面ha方案中介绍的最多2个NN冲突？)  至此hadoop中的hdfs高可用特性，高容错的实现又有了更深理解，但针对hdfs还一层设计实现**机架感知**\n#### 机架感知\n分布式的集群通常包含非常多的机器，由于受到机架槽位和交换机网口的限制，通常大型的分布式集群都会跨好几个机架，由多个机架上的机器共同组成一个分布 式集群。机架内的机器之间的网络速度通常都会高于跨机架机器之间的网络速度，并且机架之间机器的网络通信通常受到上层交换机间网络带宽的限制。  具体到hadoop集群，由于hadoop的HDFS对数据文件的分布式存放是按照分块block存储，每个block会有多个副本(默认为3)，并且为了数据的安全和高效，所以hadoop默认对3个副本的存放策略为：\n在本地机器的hdfs目录下存储一个block  在另外一个rack的某个datanode上存储一个block\n在该机器的同一个rack下的某台机器上存储最后一个block\n这样的策略可以保证对该block所属文件的访问能够优先在本rack下找到，如果整个rack发生了异常，也可以在另外的rack上找到该block的副本。这样足够的高效，并且同时做到了数据的容错。\nhadoop对机架的感知并非是自适应的，亦即，hadoop集群分辨某台slave机器是属于哪个rack并非是只能的感知的，而是需要 hadoop的管理者人为的告知hadoop哪台机器属于哪个rack，这样在hadoop的namenode启动初始化时，会将这些机器与rack的对 应信息保存在内存中，用来作为对接下来所有的HDFS的写块操作分配datanode列表时（比如3个block对应三台datanode）的选择 datanode策略，做到hadoop allocate block的策略：尽量将三个副本分布到不同的rack。\n具体实现本文不在深究，在此附上网上的一些解决方式\n[机架感知实现1](http://www.cnblogs.com/cloudma/articles/hadoop-topology.html)  [机架感知实现2](http://blog.csdn.net/magicdreaming/article/details/7629773)\n\n---\n\n至此对hdfs的理解与总结告一段落，后续有了新的理解再进行补充\n\n\n\n","source":"_posts/王阁/技术/hexo/oldblog/blog24.md","raw":"---\n\ntitle: Hadoop总结(第一版---HDFS篇)\ndate: 2019-07-16\ntags: \n\n---\n此处简介\n<!--more-->\n\n# Hadoop总结(第一版---HDFS篇)\n```接触hadoop生态也有大半年了，一直碎片化的查阅，学习了一些博客和书籍。随着使用的深入，对一些常用的模块有较熟练的使用，也有写过一些日常小结，但对hadoop本身背后的原理没有系统性的学习，回顾来看，就提升曲线来说，现在亟需总结这环节，这也是本文的由来```\n## 什么是hadoop？\n>hadoop是稳定的，高容错的，可大规模布署的分布式文件，存储，并行编程框架。\n```本文默认是已经有hadoop使用经验,所以暂不涉及具体的hadoop生态的各组件的部署和调优细节，后续单开文章来总结。但在具体讲解时会涉及说参数配置会对相关组件参生影响```\n具体而言，hadoop核心组件内容有：**hdfs**、**mapredcue**。所以接下来的总结主要针对这两在核心组件展开\n## HDFS篇\n### 什么是HDFS？\n**分布式文件系统**：分布式文件系统是一种允许文件通过网络在多台主机上分享的 文件的系统，可让多机器上的多用户分享文件和存储空间\nHDFS:（Hadoop Distribute File System）即hadoop分布式文件系统  主要用于适合运行在通用硬件上的分布式文件系统，特点是高度容错，适合布署在廉价服务器上，具有高吞吐量的数据访问等特点  1\\. 保存多个副本，且提供容错机制，副本丢失或宕机自动恢复。默认存3份。  2\\. 运行在廉价的机器上。  3\\. 适合大数据的处理。多大？多小？HDFS默认会将文件分割成block，64M为1个block。然后将block按键值对存储在HDFS上，并将键值对的映射存到内存中。如果小文件太多，那内存的负担会很重。  4\\. 适用于一次写入、多次查询的情况  5\\. 不支持并发写情况，小文件不合适。因为小文件也占用一个块，小文件越多（1000个1k文件）块越 多，NameNode压力越大。\n``hdfs得部署在linux系统上``\n### HDFS的具体内容\n文件、节点、数据块 HDFS主要是是围绕着这三个关键词设计的.\n#### **数据块**\n* Block：在HDFS中，每个文件都是采用的分块的方式存储，每个block放在不同的dataNode节点上，每个block的标识是一个三元组(block id , numBytes,generationStamp),block id 具有唯一性，具体分配是由namenode节点设置，然后在datanode上建立对应的Block文件，同时建立对应的block meta文件(问题是block meta文件存放位，block size可以通过配置文件设置，所以修改block size会对以前持续化的数据有何影响?）\n* Packet:是HDFS文件在DFSClient与DataNode之间通信的过程中文件的形式(一般一个Block对应多个Packet)\n* Chunk:是通过程中具体传输的文件单位，发送过程以Packet的方式进行，但 一个packet包含多个Chunk,同时对于每个chunk进行checksum计算，生成checksum bytes。\n\n**Packet**\nPacket的结构：数据包和heatbeat包  一个Packet数据包的组成结构主要分为 Packet Header 、PacketData  Packet Header 中又分为：\n![10eed6bcc563463ea0b8cd5adf99adec-image.png](//img.wqkenqing.ren/.qiniudns.com/file/2017/7/10eed6bcc563463ea0b8cd5adf99adec-image.png)\nPacket Data部分是一个Packet的实际数据部分。\n主要内容有\n\n* 一个4字节校验\n* Checksum\n* Chunk部分，Chunk部分最大为512字节\n![c68e61da1e8148ab99b43fe8e3f5408e-image.png](//img.wqkenqing.ren//file/2017/7/c68e61da1e8148ab99b43fe8e3f5408e-image.png)\nPacket创建过程：首先将字节流数据写入一个buffer缓冲区中，也就是从偏移量为25的位置（checksumStart）开 始写Packet数据Chunk的Checksum部分，从偏移量为533的位置（dataStart）开始写Packet数据的Chunk Data部分，直到一个Packet创建完成为止。\n\n```注意：当写一个文件的最后一个Block的最后一个Packet时，如果一个Packet的大小未能达到最大长度，也就是上图对应的缓冲区 中，Checksum与Chunk Data之间还保留了一段未被写过的缓冲区位置，在发送这个Packet之前，会检查Chunksum与Chunk Data之间的缓冲区是否为空白缓冲区（gap），如果有则将Chunk Data部分向前移动，使得Chunk Data 1与Chunk Checksum N相邻，然后才会被发送到DataNode节点```\n\n#### hdsf架构(主要组成是节点）\n主要的构成角色有：Client、NameNode、SecondayNameNode、DataNode\n![5ba6f1ec6b9c4b0982dc2ce73ff9c444-image.png](//img.wqkenqing.ren//file/2017/7/5ba6f1ec6b9c4b0982dc2ce73ff9c444-image.png)\n\n+ Client：系统使用者，调用HDFS API操作文件；与NN交互获取文件元数据;与DN交互进行数据读写, 注意：写数据时文件切分由Client完成\n+ Namenode：Master节点 （也称元数据节点）是系统唯一的管理者。负责元数据的管理(名称空间和数据块映射信息);配置副本策略；处理客户端请求\n+ Datanode：数据存储节点(也称Slave节点)，存储实际的数据；执行数据块的读写；汇报存储信息给NN\n+ Secondary NameNode：备胎，namenode的工作量；是NameNode的冷备份；合并fsimage和fsedits然后再发给namenode\n\n```careful:``` 注意：在hadoop 2.x 版本，当启用 hdfs ha 时，将没有这一角色\n**热冷备份说明**：\n热备份：b是a的热备份，如果a坏掉。那么b马上运行代替a的工作  冷备份：b是a的冷备份，如果a坏掉。那么b不能马上代替a工作。但是b上存储a的一些信息，减少a坏掉之后的损失\n**hdfs构架原则**\n\n1. 元数据与数据分离：文件本身的属性（即元数据）与文件所持有的数据分离\n2. 主/从架构：一个HDFS集群是由一个NameNode和一定数目的DataNode组成\n3. 一次写入多次读取：HDFS中的文件在任何时间只能有一个Writer。当文件被创建，接着写入数据，最后，一旦文件被关闭，就不能再修改。\n4. 移动计算比移动数据更划算：数据运算，越靠近数据，执行运算的性能就越好，由于hdfs数据分布在不同机器上，要让网络的消耗最低，并提高系统的吞吐量，最佳方式是将运算的执行移到离它要处理的数据更近的地方，而不是移动数据\n\n**针对第四条的解释**：\n在上文中交代到hdfs中的文件是以block的形式存放在集群中，所以一个文件可以是被切分成很多block存放在集群的机器中针对第四条，移动计算比移动数据更划算，是因为，从理论上讲，集群的计算能力是很方便扩展的，如服务器的硬件提升，或增加服务器等。但网络带宽等资源却很容易达到瓶颈或增加经济负担，所以将计算转移至每个block就近的机器进行计算，会比将所有的block合到一个机器上再进行计算要划算，所以，叫移动计算要比移动数据划算\n\n##### NameNode\nNameNode是整个文件系统的管理与计算节点，是HDFS中最复杂的一个实体，它与管理着HDFS文件系统中最重要的两个关系\n\n\n1. HDFS文件系统中的文件目录树，以及文件的数据块索引，即每个文件对应的数据块列表  数据块和数据节点的对应关系，即某一块数据块保存在哪些数据节点的信息  **第一个关系**即目录树、元数据和数据块的索引信息持久化到物理存储中，具体的实现是保存在命名空间的镜像fsimage和编辑日志edits中，**careful**：在fsimage中，并没有记录每一个block对应到那几个Datanodes的对应表信息\n2. **第二个关系是**在NameNode启动后，每个DataNode对本地的磁盘进行扫描，将本DataNode上保存的block信息上报至NameNode,Namenode在接收到每个Datanode的块信息汇报后，将接收到的块信息，以及其所在的Datanode信息等保存在内存中。HDFS就是通过这种块信息汇报的方式来完成 block -> Datanodes list的对应表构建（**careful**）\n类似于数据库中的检查点，为了避免edits日志过大，在Hadoop1.X 中，SecondaryNameNode会按照时间阈值（比如24小时）或者edits大小阈值（比如1G），周期性的将fsimage和edits的合 并，然后将最新的fsimage推送给NameNode。而在Hadoop2.X中，这个动作是由Standby NameNode来完成.\n由此可看出，这两个文件一旦损坏或丢失，将导致整个HDFS文件系统不可用\n在hadoop1.X为了保证这两种元数据文件的高可用性，一般的做法，将dfs.namenode.name.dir设置成以逗号分隔的多个目录，这多个目录至少不要在一块磁盘上，最好放在不同的机器上，比如：挂载一个共享文件系统\nfsimage\\edits 是序列化后的文件，想要查看或编辑里面的内容，可通过 hdfs 提供的 oiv\\oev 命令，\n命令: hdfs oiv （offline image viewer） 用于将fsimage文件的内容转储到指定文件中以便于阅读,，如文本文件、XML文件，该命令需要以下参数：\n-i (必填参数) –inputFile <arg> 输入FSImage文件\n-o (必填参数) –outputFile <arg> 输出转换后的文件，如果存在，则会覆盖\n-p (可选参数） –processor <arg> 将FSImage文件转换成哪种格式： (Ls|XML|FileDistribution).默认为Ls\n示例：hdfs oiv -i /data1/hadoop/dfs/name/current/fsimage_0000000000019372521 -o /home/hadoop/fsimage.txt\n命令：hdfs oev (offline edits viewer 离线edits查看器）的缩写， 该工具只操作文件因而并不需要hadoop集群处于运行状态。\n示例: hdfs oev -i edits_0000000000000042778-0000000000000042779 -o edits.xml\n支持的输出格式有binary（hadoop使用的二进制格式）、xml（在不使用参数p时的默认输出格式）和stats（输出edits文件的统计信息）\n由此可以总结到：NameNode管理着DataNode，接收DataNode的注册、心跳、数据块提交等信息的上报，并且在心跳中发送数据块**复制**、**删除**、**恢复**等指令；同时，NameNode还为客户端对**文件系统目录树的操作**和对**文件数据读写**、对**HDFS系统进行管理提供支持**\n另 Namenode 启动后会进入一个称为**安全模式**的特殊状态。处于安全模式 的 Namenode 是不会进行数据块的复制的。 Namenode 从所有的 Datanode 接收心跳信号和块状态报告。 块状态报告包括了某个 Datanode 所有的数据 块列表。每个数据块都有一个指定的最小副本数。当 Namenode 检测确认某 个数据块的副本数目达到这个最小值，那么该数据块就会被认为是副本安全 (safely replicated) 的；在一定百分比（这个参数可配置）的数据块被 Namenode 检测确认是安全之后（加上一个额外的 30 秒等待时间）， Namenode 将退出安全模式状态。接下来它会确定还有哪些数据块的副本没 有达到指定数目，并将这些数据块复制到其他 Datanode 上。  ##### Secondary NameNode  在HA cluster中又称为standby node\n主要作用：  1.如上文提到的合并fsimage和eits日志，将eits日志文件大小控制在一个限度下  大致流程如下  namenode 响应 Secondary namenode 请求，将 edit log 推送给 Secondary namenode ， 开始重新写一个新的 edit log  Secondary namenode 收到来自 namenode 的 fsimage 文件和 edit log  Secondary namenode 将 fsimage 加载到内存，应用 edit log ， 并生成一 个新的 fsimage 文件  Secondary namenode 将新的 fsimage 推送给 Namenode  Namenode 用新的 fsimage 取代旧的 fsimage ， 在 fstime 文件中记下检查 点发生的时\n![aed541bebcc04fb79e2de3c504b7ee46-image.png](//img.wqkenqing.ren//file/2017/7/aed541bebcc04fb79e2de3c504b7ee46-image.png)\n\n\n#### HDFS写文件  1.x 默认的block大小是64M 2.X版本默认block的大小是 128M ![d0c33b33bfbc41e8a493553395e52ef0-image.png](//img.wqkenqing.ren//file/2017/7/d0c33b33bfbc41e8a493553395e52ef0-image.png)\n如上图所示  + Client预先设置的block参数切分FIle\n\n+ CLient向NameNode发送写数据请求，\n+ NameNode，记录block信息，并返回可用的DataNode(具体的返回规则参考下文)\n+ client向DataNode发送block1；发送过程是以流式写入具体流程是\n\n1. 将64M的block1按64k的packet划分\n2. 然后将第一个packet发送给host2\n3. host2接收完后，将第一个packet发送给host1，同时client想host2发送第二个packet\n4. host1接收完第一个packet后，发送给host3，同时接收host2发来的第二个packet\n5. 以此类推，如图红线实线所示，直到将block1发送完毕\n6. host2,host1,host3向NameNode，host2向Client发送通知，说“消息发送完了”。\n7. client收到host2发来的消息后，向namenode发送消息，说我写完了。这样就真完成了。\n8. 发送完block1后，再向host7，host8，host4发送block2  当客户端向 HDFS 文件写入数据的时候，一开始是写到本地临时文件中。假设该文件的副 本系数设置为 3 ，当本地临时文件累积到一个数据块的大小时，客户端会从 Namenode 获取一个 Datanode 列表用于存放副本。然后客户端开始向第一个 Datanode 传输数据，第一个 Datanode 一小部分一小部分 (4 KB) 地接收数据，将每一部分写入本地仓库，并同时传输该部分到列表中 第二个 Datanode 节点。第二个 Datanode 也是这样，一小部分一小部分地接收数据，写入本地 仓库，并同时传给第三个 Datanode 。最后，第三个 Datanode 接收数据并存储在本地。因此， Datanode 能流水线式地从前一个节点接收数据，并在同时转发给下一个节点，数据以流水线的 方式从前一个 Datanode 复制到下一个\n![2c77aaad2f684820bf8a6b475b79d2f1-image.png](//img.wqkenqing.ren//file/2017/7/2c77aaad2f684820bf8a6b475b79d2f1-image.png)\n\n  写入的过程，按hdsf默认设置，1T文件，我们需要3T的存储，3T的网络流量  在执行读或写的过程中，NameNode和DataNode通过HeartBeat进行保存通信，确定DataNode活着。如果发现DataNode死掉了，就将死掉的DataNode上的数据，放到其他节点去。读取时，要读其他节点去  挂掉一个节点，没关系，还有其他节点可以备份；甚至，挂掉某一个机架，也没关系；其他机架上，也有备份\n##### hdfs读文件\n\n  ![8fb62c84f57a4203a2dbedf5f68920d9-image.png](//img.wqkenqing.ren//file/2017/7/8fb62c84f57a4203a2dbedf5f68920d9-image.png)\n\n  客户端通过调用FileSystem对象的open()方法来打开希望读取的文件，对于HDFS来说，这个对象时分布文件系统的一个实例；  DistributedFileSystem通过使用RPC来调用NameNode以确定文件起始块的位置，同一Block按照重复数会返回多个位置，这些位置按照Hadoop集群拓扑结构排序，距离客户端近的排在前面  前两步会返回一个FSDataInputStream对象，该对象会被封装成DFSInputStream对象，DFSInputStream可以方便的管理datanode和namenode数据流，客户端对这个输入流调用read()方法  存储着文件起始块的DataNode地址的DFSInputStream随即连接距离最近的DataNode，通过对数据流反复调用read()方法，将数据从DataNode传输到客户端  到达块的末端时，DFSInputStream会关闭与该DataNode的连接，然后寻找下一个块的最佳DataNode，这些操作对客户端来说是透明的，客户端的角度看来只是读一个持续不断的流  一旦客户端完成读取，就对FSDataInputStream调用close()方法关闭文件读取\n  ##### block持续化结构\n  DataNode节点上一个Block持久化到磁盘上的物理存储结构，如下图所示：  ![df10f0ac586f4baebc2587842aec5675-image.png](//img.wqkenqing.ren//file/2017/7/df10f0ac586f4baebc2587842aec5675-image.png)\n\n 每个Block文件（如上图中blk_1084013198文件）都对应一个meta文件（如上图中blk_1084013198_10273532.meta文件），Block文件是一个一个Chunk的二进制数据（每个Chunk的大小是512字节），而meta文件是与每一个Chunk对应的Checksum数据，是序列化形式存储  ---  至上我们大致了解了HDFS。正如上文提到的Hadoop的特点，高可能，高容错性。若光从上文提到的特性可能还不足以说明，如NameNode环节就提到了NameNode的重要作用，但若NameNode出现了故障，对整个机集会是毁灭性的打击，于是Hadoop也引入其它的一些手段来保存高可用，高容错。接下来我们就来探讨下\n### Hadoop HA的引入\n HA：High Available即高可用性集群，是保证业务连续性的有效解决方案，一般有两个或两个以上的节点，且分为活动节点及备用节点。  在HA具体实现方法不同的情况下，HA框架的流程是一致的, 不一致的就是如何存储和管理日志。在Active NN和Standby NN之间要有个共享的存储日志的地方，Active NN把EditLog写到这个共享的存储日志的地方，Standby NN去读取日志然后执行，这样Active和Standby NN内存中的HDFS元数据保持着同步。一旦发生主从切换Standby NN可以尽快接管Active NN的工作; 默认并未启用 hdfs ha。\n SPOF方案回顾：\n\n1. Secondary NameNode：它不是HA，它只是阶段性的合并edits和fsimage，以缩短集群启动的时间。当NN失效的时候，Secondary NN并无法立刻提供服务，Secondary NN甚至无法保证数据完整性：如果NN数据丢失的话，在上一次合并后的文件系统的改动会丢失\n2. Backup NameNode (HADOOP-4539)：它在内存中复制了NN的当前状态，算是Warm Standby，可也就仅限于此，并没有failover等。它同样是阶段性的做checkpoint，也无法保证数据完整性\n3\\. 手动把name.dir指向NFS（Network File System），这是安全的Cold Standby，可以保证元数据不丢失，但集群的恢复则完全靠手动\n4\\. Facebook AvatarNode：Facebook有强大的运维做后盾，所以Avatarnode只是Hot Standby，并没有自动切换，当主NN失效的时候，需要管理员确认，然后手动把对外提供服务的虚拟IP映射到Standby NN，这样做的好处是确保不会发生脑裂的场景。其某些设计思想和Hadoop 2.0里的HA非常相似，从时间上来看，Hadoop 2.0应该是借鉴了Facebook的做法 ![32ec8d45379b4e4d99505b03b1b33e61-image.png](//img.wqkenqing.ren//file/2017/7/32ec8d45379b4e4d99505b03b1b33e61-image.png)\n\n5\\. PrimaryNN 与StandbyNN之间通过NFS来共享FsEdits、FsImage文件，这样主备NN之间就拥有了一致的目录树和block信息；而block的 位置信息，可以根据DN向两个NN上报的信息过程中构建起来。这样再辅以虚IP，可以较好达到主备NN快速热切的目的。但是显然，这里的NFS又引入了新的SPOF\n6\\. 在主备NN共享元数据的过程中，也有方案通过主NN将FsEdits的内容通过与备NN建立的网络IO流，实时写入备NN，并且保证整个过程的原子性。这种方案，解决了NFS共享元数据引入的SPOF，但是主备NN之间的网络连接又会成为新的问题\n#### hadoop2.X ha 原理:  hadoop2.x之后，Clouera提出了QJM/Qurom Journal Manager，这是一个基于Paxos算法实现的HDFS HA方案，它给出了一种较好的解决思路和方案,示意图如下：\n![bc057fbb4b4047928bf06b7a43364335-image.png](//img.wqkenqing.ren//file/2017/7/bc057fbb4b4047928bf06b7a43364335-image.png)\n\n  + 基本原理就是用2N+1台 JN 存储EditLog，每次写数据操作有大多数（>=N+1）返回成功时即认为该次写成功，数据不会丢失了。当然这个算法所能容忍的是最多有N台机器挂掉，如果多于N台挂掉，这个算法就失效了。这个原理是基于Paxos算法\n  + 在HA架构里面SecondaryNameNode这个冷备角色已经不存在了，为了保持standby NN时时的与主Active NN的元数据保持一致，他们之间交互通过一系列守护的轻量级进程JournalNode  + 任何修改操作在 Active NN上执行时，JN进程同时也会记录修改log到至少半数以上的JN中，这时 Standby NN 监测到JN 里面的同步log发生变化了会读取 JN 里面的修改log，然后同步到自己的的目录镜像树里面，\n  ![608621d2ab52466db89e8a95d165f6e7-image.png](//img.wqkenqing.ren//file/2017/7/608621d2ab52466db89e8a95d165f6e7-image.png)\n\n 当发生故障时，Active的 NN 挂掉后，Standby NN 会在它成为Active NN 前，读取所有的JN里面的修改日志，这样就能高可靠的保证与挂掉的NN的目录镜像树一致，然后无缝的接替它的职责，维护来自客户端请求，从而达到一个高可用的目的  QJM方式来实现HA的主要优势：\n 1\\. 不需要配置额外的高共享存储，降低了复杂度和维护成本\n 2\\. 消除spof\n 3\\. 系统鲁棒性(Robust:健壮)的程度是可配置\n 4\\. JN不会因为其中一台的延迟而影响整体的延迟，而且也不会因为JN的数量增多而影响性能（因为NN向JN发送日志是并行的）  datanode的fencing: 确保只有一个NN能命令DN。HDFS-1972中详细描述了DN如何实现fencing\n 1\\. 每个NN改变状态的时候，向DN发送自己的状态和一个序列号\n 2\\. DN在运行过程中维护此序列号，当failover时，新的NN在返回DN心跳时会返回自己的active状态和一个更大的序列号。DN接收到这个返回则认为该NN为新的active  3\\. 如果这时原来的active NN恢复，返回给DN的心跳信息包含active状态和原来的序列号，这时DN就会拒绝这个NN的命令  客户端fencing：确保只有一个NN能响应客户端请求，让访问standby nn的客户端直接失败。在RPC层封装了一层，通过FailoverProxyProvider以重试的方式连接NN。通过若干次连接一个NN失败后尝试连接新的NN，对客户端的影响是重试的时候增加一定的延迟。客户端可以设置重试此时和时间  Hadoop提供了ZKFailoverController角色，部署在每个NameNode的节点上，作为一个deamon进程, 简称zkfc，\n ![3cfc6fc17a8e47509465442f6eaf7c14-image.png](//img.wqkenqing.ren//file/2017/7/3cfc6fc17a8e47509465442f6eaf7c14-image.png)\n\n   FailoverController主要包括三个组件:\n   1\\. HealthMonitor: 监控NameNode是否处于unavailable或unhealthy状态。当前通过RPC调用NN相应的方法完成\n   2\\. ActiveStandbyElector: 管理和监控自己在ZK中的状态\n   3\\. ZKFailoverController 它订阅HealthMonitor 和ActiveStandbyElector 的事件，并管理NameNode的状态  ZKFailoverController主要职责：      1\\. 健康监测：周期性的向它监控的NN发送健康探测命令，从而来确定某个NameNode是否处于健康状态，如果机器宕机，心跳失败，那么zkfc就会标记它处于一个不健康的状态\n   2\\. 会话管理：如 果NN是健康的，zkfc就会在zookeeper中保持一个打开的会话，如果NameNode同时还是Active状态的，那么zkfc还会在 Zookeeper中占有一个类型为短暂类型的znode，当这个NN挂掉时，这个znode将会被删除，然后备用的NN，将会得到这把锁，升级为主 NN，同时标记状态为Active\n   3\\. 当宕机的NN新启动时，它会再次注册zookeper，发现已经有znode锁了，便会自动变为Standby状态，如此往复循环，保证高可靠，需要注意，目前仅仅支持最多配置2个NN\n   4\\. master选举：如上所述，通过在zookeeper中维持一个短暂类型的znode，来实现抢占式的锁机制，从而判断那个NameNode为Active状态  **hadoop2.x Federation**：  单Active NN的架构使得HDFS在集群扩展性和性能上都有潜在的问题，当集群大到一定程度后，NN进程使用的内存可能会达到上百G，NN成为了性能的瓶颈  常用的估算公式为1G对应1百万个块，按缺省块大小计算的话，大概是64T (这个估算比例是有比较大的富裕的，其实，即使是每个文件只有一个块，所有元数据信息也不会有1KB/block)  为了解决这个问题,Hadoop 2.x提供了HDFS Federation, 示意图如下：\n   ![e5015b90accf4fe6a7729afe692ffa64-image.png](//img.wqkenqing.ren//file/2017/7/e5015b90accf4fe6a7729afe692ffa64-image.png)\n\n  多个NN共用一个集群里的存储资源，每个NN都可以单独对外提供服务  每个NN都会定义一个存储池，有单独的id，每个DN都为所有存储池提供存储  DN会按照存储池id向其对应的NN汇报块信息，同时，DN会向所有NN汇报本地存储可用资源情况  如果需要在客户端方便的访问若干个NN上的资源，可以使用客户端挂载表，把不同的目录映射到不同的NN，但NN上必须存在相应的目录  设计优势：  改动最小，向前兼容；现有的NN无需任何配置改动；如果现有的客户端只连某台NN的话  分离命名空间管理和块存储管理  客户端挂载表：通过路径自动对应NN、使Federation的配置改动对应用透明  (与上面ha方案中介绍的最多2个NN冲突？)  至此hadoop中的hdfs高可用特性，高容错的实现又有了更深理解，但针对hdfs还一层设计实现**机架感知**\n#### 机架感知\n分布式的集群通常包含非常多的机器，由于受到机架槽位和交换机网口的限制，通常大型的分布式集群都会跨好几个机架，由多个机架上的机器共同组成一个分布 式集群。机架内的机器之间的网络速度通常都会高于跨机架机器之间的网络速度，并且机架之间机器的网络通信通常受到上层交换机间网络带宽的限制。  具体到hadoop集群，由于hadoop的HDFS对数据文件的分布式存放是按照分块block存储，每个block会有多个副本(默认为3)，并且为了数据的安全和高效，所以hadoop默认对3个副本的存放策略为：\n在本地机器的hdfs目录下存储一个block  在另外一个rack的某个datanode上存储一个block\n在该机器的同一个rack下的某台机器上存储最后一个block\n这样的策略可以保证对该block所属文件的访问能够优先在本rack下找到，如果整个rack发生了异常，也可以在另外的rack上找到该block的副本。这样足够的高效，并且同时做到了数据的容错。\nhadoop对机架的感知并非是自适应的，亦即，hadoop集群分辨某台slave机器是属于哪个rack并非是只能的感知的，而是需要 hadoop的管理者人为的告知hadoop哪台机器属于哪个rack，这样在hadoop的namenode启动初始化时，会将这些机器与rack的对 应信息保存在内存中，用来作为对接下来所有的HDFS的写块操作分配datanode列表时（比如3个block对应三台datanode）的选择 datanode策略，做到hadoop allocate block的策略：尽量将三个副本分布到不同的rack。\n具体实现本文不在深究，在此附上网上的一些解决方式\n[机架感知实现1](http://www.cnblogs.com/cloudma/articles/hadoop-topology.html)  [机架感知实现2](http://blog.csdn.net/magicdreaming/article/details/7629773)\n\n---\n\n至此对hdfs的理解与总结告一段落，后续有了新的理解再进行补充\n\n\n\n","slug":"王阁/技术/hexo/oldblog/blog24","published":1,"updated":"2023-02-23T02:51:20.906Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg4004xu6pw3xxo7i7g","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h1 id=\"Hadoop总结-第一版—HDFS篇\"><a href=\"#Hadoop总结-第一版—HDFS篇\" class=\"headerlink\" title=\"Hadoop总结(第一版—HDFS篇)\"></a>Hadoop总结(第一版—HDFS篇)</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 什么是hadoop？</span><br><span class=\"line\">&gt;hadoop是稳定的，高容错的，可大规模布署的分布式文件，存储，并行编程框架。</span><br><span class=\"line\">&#96;&#96;&#96;本文默认是已经有hadoop使用经验,所以暂不涉及具体的hadoop生态的各组件的部署和调优细节，后续单开文章来总结。但在具体讲解时会涉及说参数配置会对相关组件参生影响</span><br></pre></td></tr></table></figure>\n<p>具体而言，hadoop核心组件内容有：<strong>hdfs</strong>、<strong>mapredcue</strong>。所以接下来的总结主要针对这两在核心组件展开</p>\n<h2 id=\"HDFS篇\"><a href=\"#HDFS篇\" class=\"headerlink\" title=\"HDFS篇\"></a>HDFS篇</h2><h3 id=\"什么是HDFS？\"><a href=\"#什么是HDFS？\" class=\"headerlink\" title=\"什么是HDFS？\"></a>什么是HDFS？</h3><p><strong>分布式文件系统</strong>：分布式文件系统是一种允许文件通过网络在多台主机上分享的 文件的系统，可让多机器上的多用户分享文件和存储空间<br>HDFS:（Hadoop Distribute File System）即hadoop分布式文件系统  主要用于适合运行在通用硬件上的分布式文件系统，特点是高度容错，适合布署在廉价服务器上，具有高吞吐量的数据访问等特点  1. 保存多个副本，且提供容错机制，副本丢失或宕机自动恢复。默认存3份。  2. 运行在廉价的机器上。  3. 适合大数据的处理。多大？多小？HDFS默认会将文件分割成block，64M为1个block。然后将block按键值对存储在HDFS上，并将键值对的映射存到内存中。如果小文件太多，那内存的负担会很重。  4. 适用于一次写入、多次查询的情况  5. 不支持并发写情况，小文件不合适。因为小文件也占用一个块，小文件越多（1000个1k文件）块越 多，NameNode压力越大。<br><code>hdfs得部署在linux系统上</code></p>\n<h3 id=\"HDFS的具体内容\"><a href=\"#HDFS的具体内容\" class=\"headerlink\" title=\"HDFS的具体内容\"></a>HDFS的具体内容</h3><p>文件、节点、数据块 HDFS主要是是围绕着这三个关键词设计的.</p>\n<h4 id=\"数据块\"><a href=\"#数据块\" class=\"headerlink\" title=\"数据块\"></a><strong>数据块</strong></h4><ul>\n<li>Block：在HDFS中，每个文件都是采用的分块的方式存储，每个block放在不同的dataNode节点上，每个block的标识是一个三元组(block id , numBytes,generationStamp),block id 具有唯一性，具体分配是由namenode节点设置，然后在datanode上建立对应的Block文件，同时建立对应的block meta文件(问题是block meta文件存放位，block size可以通过配置文件设置，所以修改block size会对以前持续化的数据有何影响?）</li>\n<li>Packet:是HDFS文件在DFSClient与DataNode之间通信的过程中文件的形式(一般一个Block对应多个Packet)</li>\n<li>Chunk:是通过程中具体传输的文件单位，发送过程以Packet的方式进行，但 一个packet包含多个Chunk,同时对于每个chunk进行checksum计算，生成checksum bytes。</li>\n</ul>\n<p><strong>Packet</strong><br>Packet的结构：数据包和heatbeat包  一个Packet数据包的组成结构主要分为 Packet Header 、PacketData  Packet Header 中又分为：<br><img src=\"//img.wqkenqing.ren/.qiniudns.com/file/2017/7/10eed6bcc563463ea0b8cd5adf99adec-image.png\" alt=\"10eed6bcc563463ea0b8cd5adf99adec-image.png\"><br>Packet Data部分是一个Packet的实际数据部分。<br>主要内容有</p>\n<ul>\n<li>一个4字节校验</li>\n<li>Checksum</li>\n<li>Chunk部分，Chunk部分最大为512字节<br><img src=\"//img.wqkenqing.ren//file/2017/7/c68e61da1e8148ab99b43fe8e3f5408e-image.png\" alt=\"c68e61da1e8148ab99b43fe8e3f5408e-image.png\"><br>Packet创建过程：首先将字节流数据写入一个buffer缓冲区中，也就是从偏移量为25的位置（checksumStart）开 始写Packet数据Chunk的Checksum部分，从偏移量为533的位置（dataStart）开始写Packet数据的Chunk Data部分，直到一个Packet创建完成为止。</li>\n</ul>\n<p><code>注意：当写一个文件的最后一个Block的最后一个Packet时，如果一个Packet的大小未能达到最大长度，也就是上图对应的缓冲区 中，Checksum与Chunk Data之间还保留了一段未被写过的缓冲区位置，在发送这个Packet之前，会检查Chunksum与Chunk Data之间的缓冲区是否为空白缓冲区（gap），如果有则将Chunk Data部分向前移动，使得Chunk Data 1与Chunk Checksum N相邻，然后才会被发送到DataNode节点</code></p>\n<h4 id=\"hdsf架构-主要组成是节点）\"><a href=\"#hdsf架构-主要组成是节点）\" class=\"headerlink\" title=\"hdsf架构(主要组成是节点）\"></a>hdsf架构(主要组成是节点）</h4><p>主要的构成角色有：Client、NameNode、SecondayNameNode、DataNode<br><img src=\"//img.wqkenqing.ren//file/2017/7/5ba6f1ec6b9c4b0982dc2ce73ff9c444-image.png\" alt=\"5ba6f1ec6b9c4b0982dc2ce73ff9c444-image.png\"></p>\n<ul>\n<li>Client：系统使用者，调用HDFS API操作文件；与NN交互获取文件元数据;与DN交互进行数据读写, 注意：写数据时文件切分由Client完成</li>\n<li>Namenode：Master节点 （也称元数据节点）是系统唯一的管理者。负责元数据的管理(名称空间和数据块映射信息);配置副本策略；处理客户端请求</li>\n<li>Datanode：数据存储节点(也称Slave节点)，存储实际的数据；执行数据块的读写；汇报存储信息给NN</li>\n<li>Secondary NameNode：备胎，namenode的工作量；是NameNode的冷备份；合并fsimage和fsedits然后再发给namenode</li>\n</ul>\n<p><code>careful:</code> 注意：在hadoop 2.x 版本，当启用 hdfs ha 时，将没有这一角色<br><strong>热冷备份说明</strong>：<br>热备份：b是a的热备份，如果a坏掉。那么b马上运行代替a的工作  冷备份：b是a的冷备份，如果a坏掉。那么b不能马上代替a工作。但是b上存储a的一些信息，减少a坏掉之后的损失<br><strong>hdfs构架原则</strong></p>\n<ol>\n<li>元数据与数据分离：文件本身的属性（即元数据）与文件所持有的数据分离</li>\n<li>主/从架构：一个HDFS集群是由一个NameNode和一定数目的DataNode组成</li>\n<li>一次写入多次读取：HDFS中的文件在任何时间只能有一个Writer。当文件被创建，接着写入数据，最后，一旦文件被关闭，就不能再修改。</li>\n<li>移动计算比移动数据更划算：数据运算，越靠近数据，执行运算的性能就越好，由于hdfs数据分布在不同机器上，要让网络的消耗最低，并提高系统的吞吐量，最佳方式是将运算的执行移到离它要处理的数据更近的地方，而不是移动数据</li>\n</ol>\n<p><strong>针对第四条的解释</strong>：<br>在上文中交代到hdfs中的文件是以block的形式存放在集群中，所以一个文件可以是被切分成很多block存放在集群的机器中针对第四条，移动计算比移动数据更划算，是因为，从理论上讲，集群的计算能力是很方便扩展的，如服务器的硬件提升，或增加服务器等。但网络带宽等资源却很容易达到瓶颈或增加经济负担，所以将计算转移至每个block就近的机器进行计算，会比将所有的block合到一个机器上再进行计算要划算，所以，叫移动计算要比移动数据划算</p>\n<h5 id=\"NameNode\"><a href=\"#NameNode\" class=\"headerlink\" title=\"NameNode\"></a>NameNode</h5><p>NameNode是整个文件系统的管理与计算节点，是HDFS中最复杂的一个实体，它与管理着HDFS文件系统中最重要的两个关系</p>\n<ol>\n<li>HDFS文件系统中的文件目录树，以及文件的数据块索引，即每个文件对应的数据块列表  数据块和数据节点的对应关系，即某一块数据块保存在哪些数据节点的信息  <strong>第一个关系</strong>即目录树、元数据和数据块的索引信息持久化到物理存储中，具体的实现是保存在命名空间的镜像fsimage和编辑日志edits中，<strong>careful</strong>：在fsimage中，并没有记录每一个block对应到那几个Datanodes的对应表信息</li>\n<li><strong>第二个关系是</strong>在NameNode启动后，每个DataNode对本地的磁盘进行扫描，将本DataNode上保存的block信息上报至NameNode,Namenode在接收到每个Datanode的块信息汇报后，将接收到的块信息，以及其所在的Datanode信息等保存在内存中。HDFS就是通过这种块信息汇报的方式来完成 block -&gt; Datanodes list的对应表构建（<strong>careful</strong>）<br>类似于数据库中的检查点，为了避免edits日志过大，在Hadoop1.X 中，SecondaryNameNode会按照时间阈值（比如24小时）或者edits大小阈值（比如1G），周期性的将fsimage和edits的合 并，然后将最新的fsimage推送给NameNode。而在Hadoop2.X中，这个动作是由Standby NameNode来完成.<br>由此可看出，这两个文件一旦损坏或丢失，将导致整个HDFS文件系统不可用<br>在hadoop1.X为了保证这两种元数据文件的高可用性，一般的做法，将dfs.namenode.name.dir设置成以逗号分隔的多个目录，这多个目录至少不要在一块磁盘上，最好放在不同的机器上，比如：挂载一个共享文件系统<br>fsimage\\edits 是序列化后的文件，想要查看或编辑里面的内容，可通过 hdfs 提供的 oiv\\oev 命令，<br>命令: hdfs oiv （offline image viewer） 用于将fsimage文件的内容转储到指定文件中以便于阅读,，如文本文件、XML文件，该命令需要以下参数：</li>\n</ol>\n<p>-i (必填参数) –inputFile <arg> 输入FSImage文件<br>-o (必填参数) –outputFile <arg> 输出转换后的文件，如果存在，则会覆盖<br>-p (可选参数） –processor <arg> 将FSImage文件转换成哪种格式： (Ls|XML|FileDistribution).默认为Ls<br>示例：hdfs oiv -i /data1/hadoop/dfs/name/current/fsimage_0000000000019372521 -o /home/hadoop/fsimage.txt<br>命令：hdfs oev (offline edits viewer 离线edits查看器）的缩写， 该工具只操作文件因而并不需要hadoop集群处于运行状态。<br>示例: hdfs oev -i edits_0000000000000042778-0000000000000042779 -o edits.xml<br>支持的输出格式有binary（hadoop使用的二进制格式）、xml（在不使用参数p时的默认输出格式）和stats（输出edits文件的统计信息）<br>由此可以总结到：NameNode管理着DataNode，接收DataNode的注册、心跳、数据块提交等信息的上报，并且在心跳中发送数据块<strong>复制</strong>、<strong>删除</strong>、<strong>恢复</strong>等指令；同时，NameNode还为客户端对<strong>文件系统目录树的操作</strong>和对<strong>文件数据读写</strong>、对<strong>HDFS系统进行管理提供支持</strong><br>另 Namenode 启动后会进入一个称为<strong>安全模式</strong>的特殊状态。处于安全模式 的 Namenode 是不会进行数据块的复制的。 Namenode 从所有的 Datanode 接收心跳信号和块状态报告。 块状态报告包括了某个 Datanode 所有的数据 块列表。每个数据块都有一个指定的最小副本数。当 Namenode 检测确认某 个数据块的副本数目达到这个最小值，那么该数据块就会被认为是副本安全 (safely replicated) 的；在一定百分比（这个参数可配置）的数据块被 Namenode 检测确认是安全之后（加上一个额外的 30 秒等待时间）， Namenode 将退出安全模式状态。接下来它会确定还有哪些数据块的副本没 有达到指定数目，并将这些数据块复制到其他 Datanode 上。  ##### Secondary NameNode  在HA cluster中又称为standby node<br>主要作用：  1.如上文提到的合并fsimage和eits日志，将eits日志文件大小控制在一个限度下  大致流程如下  namenode 响应 Secondary namenode 请求，将 edit log 推送给 Secondary namenode ， 开始重新写一个新的 edit log  Secondary namenode 收到来自 namenode 的 fsimage 文件和 edit log  Secondary namenode 将 fsimage 加载到内存，应用 edit log ， 并生成一 个新的 fsimage 文件  Secondary namenode 将新的 fsimage 推送给 Namenode  Namenode 用新的 fsimage 取代旧的 fsimage ， 在 fstime 文件中记下检查 点发生的时<br><img src=\"//img.wqkenqing.ren//file/2017/7/aed541bebcc04fb79e2de3c504b7ee46-image.png\" alt=\"aed541bebcc04fb79e2de3c504b7ee46-image.png\"></p>\n<h4 id=\"HDFS写文件-1-x-默认的block大小是64M-2-X版本默认block的大小是-128M\"><a href=\"#HDFS写文件-1-x-默认的block大小是64M-2-X版本默认block的大小是-128M\" class=\"headerlink\" title=\"HDFS写文件  1.x 默认的block大小是64M 2.X版本默认block的大小是 128M \"></a>HDFS写文件  1.x 默认的block大小是64M 2.X版本默认block的大小是 128M <img src=\"//img.wqkenqing.ren//file/2017/7/d0c33b33bfbc41e8a493553395e52ef0-image.png\" alt=\"d0c33b33bfbc41e8a493553395e52ef0-image.png\"></h4><p>如上图所示  + Client预先设置的block参数切分FIle</p>\n<ul>\n<li>CLient向NameNode发送写数据请求，</li>\n<li>NameNode，记录block信息，并返回可用的DataNode(具体的返回规则参考下文)</li>\n<li>client向DataNode发送block1；发送过程是以流式写入具体流程是</li>\n</ul>\n<ol>\n<li><p>将64M的block1按64k的packet划分</p>\n</li>\n<li><p>然后将第一个packet发送给host2</p>\n</li>\n<li><p>host2接收完后，将第一个packet发送给host1，同时client想host2发送第二个packet</p>\n</li>\n<li><p>host1接收完第一个packet后，发送给host3，同时接收host2发来的第二个packet</p>\n</li>\n<li><p>以此类推，如图红线实线所示，直到将block1发送完毕</p>\n</li>\n<li><p>host2,host1,host3向NameNode，host2向Client发送通知，说“消息发送完了”。</p>\n</li>\n<li><p>client收到host2发来的消息后，向namenode发送消息，说我写完了。这样就真完成了。</p>\n</li>\n<li><p>发送完block1后，再向host7，host8，host4发送block2  当客户端向 HDFS 文件写入数据的时候，一开始是写到本地临时文件中。假设该文件的副 本系数设置为 3 ，当本地临时文件累积到一个数据块的大小时，客户端会从 Namenode 获取一个 Datanode 列表用于存放副本。然后客户端开始向第一个 Datanode 传输数据，第一个 Datanode 一小部分一小部分 (4 KB) 地接收数据，将每一部分写入本地仓库，并同时传输该部分到列表中 第二个 Datanode 节点。第二个 Datanode 也是这样，一小部分一小部分地接收数据，写入本地 仓库，并同时传给第三个 Datanode 。最后，第三个 Datanode 接收数据并存储在本地。因此， Datanode 能流水线式地从前一个节点接收数据，并在同时转发给下一个节点，数据以流水线的 方式从前一个 Datanode 复制到下一个<br><img src=\"//img.wqkenqing.ren//file/2017/7/2c77aaad2f684820bf8a6b475b79d2f1-image.png\" alt=\"2c77aaad2f684820bf8a6b475b79d2f1-image.png\"></p>\n<p>写入的过程，按hdsf默认设置，1T文件，我们需要3T的存储，3T的网络流量  在执行读或写的过程中，NameNode和DataNode通过HeartBeat进行保存通信，确定DataNode活着。如果发现DataNode死掉了，就将死掉的DataNode上的数据，放到其他节点去。读取时，要读其他节点去  挂掉一个节点，没关系，还有其他节点可以备份；甚至，挂掉某一个机架，也没关系；其他机架上，也有备份</p>\n<h5 id=\"hdfs读文件\"><a href=\"#hdfs读文件\" class=\"headerlink\" title=\"hdfs读文件\"></a>hdfs读文件</h5><p><img src=\"//img.wqkenqing.ren//file/2017/7/8fb62c84f57a4203a2dbedf5f68920d9-image.png\" alt=\"8fb62c84f57a4203a2dbedf5f68920d9-image.png\"></p>\n<p>客户端通过调用FileSystem对象的open()方法来打开希望读取的文件，对于HDFS来说，这个对象时分布文件系统的一个实例；  DistributedFileSystem通过使用RPC来调用NameNode以确定文件起始块的位置，同一Block按照重复数会返回多个位置，这些位置按照Hadoop集群拓扑结构排序，距离客户端近的排在前面  前两步会返回一个FSDataInputStream对象，该对象会被封装成DFSInputStream对象，DFSInputStream可以方便的管理datanode和namenode数据流，客户端对这个输入流调用read()方法  存储着文件起始块的DataNode地址的DFSInputStream随即连接距离最近的DataNode，通过对数据流反复调用read()方法，将数据从DataNode传输到客户端  到达块的末端时，DFSInputStream会关闭与该DataNode的连接，然后寻找下一个块的最佳DataNode，这些操作对客户端来说是透明的，客户端的角度看来只是读一个持续不断的流  一旦客户端完成读取，就对FSDataInputStream调用close()方法关闭文件读取</p>\n<h5 id=\"block持续化结构\"><a href=\"#block持续化结构\" class=\"headerlink\" title=\"block持续化结构\"></a>block持续化结构</h5><p>DataNode节点上一个Block持久化到磁盘上的物理存储结构，如下图所示：  <img src=\"//img.wqkenqing.ren//file/2017/7/df10f0ac586f4baebc2587842aec5675-image.png\" alt=\"df10f0ac586f4baebc2587842aec5675-image.png\"></p>\n<p>每个Block文件（如上图中blk_1084013198文件）都对应一个meta文件（如上图中blk_1084013198_10273532.meta文件），Block文件是一个一个Chunk的二进制数据（每个Chunk的大小是512字节），而meta文件是与每一个Chunk对应的Checksum数据，是序列化形式存储  —  至上我们大致了解了HDFS。正如上文提到的Hadoop的特点，高可能，高容错性。若光从上文提到的特性可能还不足以说明，如NameNode环节就提到了NameNode的重要作用，但若NameNode出现了故障，对整个机集会是毁灭性的打击，于是Hadoop也引入其它的一些手段来保存高可用，高容错。接下来我们就来探讨下</p>\n<h3 id=\"Hadoop-HA的引入\"><a href=\"#Hadoop-HA的引入\" class=\"headerlink\" title=\"Hadoop HA的引入\"></a>Hadoop HA的引入</h3><p>HA：High Available即高可用性集群，是保证业务连续性的有效解决方案，一般有两个或两个以上的节点，且分为活动节点及备用节点。  在HA具体实现方法不同的情况下，HA框架的流程是一致的, 不一致的就是如何存储和管理日志。在Active NN和Standby NN之间要有个共享的存储日志的地方，Active NN把EditLog写到这个共享的存储日志的地方，Standby NN去读取日志然后执行，这样Active和Standby NN内存中的HDFS元数据保持着同步。一旦发生主从切换Standby NN可以尽快接管Active NN的工作; 默认并未启用 hdfs ha。<br>SPOF方案回顾：</p>\n</li>\n<li><p>Secondary NameNode：它不是HA，它只是阶段性的合并edits和fsimage，以缩短集群启动的时间。当NN失效的时候，Secondary NN并无法立刻提供服务，Secondary NN甚至无法保证数据完整性：如果NN数据丢失的话，在上一次合并后的文件系统的改动会丢失</p>\n</li>\n<li><p>Backup NameNode (HADOOP-4539)：它在内存中复制了NN的当前状态，算是Warm Standby，可也就仅限于此，并没有failover等。它同样是阶段性的做checkpoint，也无法保证数据完整性<br>3. 手动把name.dir指向NFS（Network File System），这是安全的Cold Standby，可以保证元数据不丢失，但集群的恢复则完全靠手动<br>4. Facebook AvatarNode：Facebook有强大的运维做后盾，所以Avatarnode只是Hot Standby，并没有自动切换，当主NN失效的时候，需要管理员确认，然后手动把对外提供服务的虚拟IP映射到Standby NN，这样做的好处是确保不会发生脑裂的场景。其某些设计思想和Hadoop 2.0里的HA非常相似，从时间上来看，Hadoop 2.0应该是借鉴了Facebook的做法 <img src=\"//img.wqkenqing.ren//file/2017/7/32ec8d45379b4e4d99505b03b1b33e61-image.png\" alt=\"32ec8d45379b4e4d99505b03b1b33e61-image.png\"></p>\n</li>\n</ol>\n<p>5. PrimaryNN 与StandbyNN之间通过NFS来共享FsEdits、FsImage文件，这样主备NN之间就拥有了一致的目录树和block信息；而block的 位置信息，可以根据DN向两个NN上报的信息过程中构建起来。这样再辅以虚IP，可以较好达到主备NN快速热切的目的。但是显然，这里的NFS又引入了新的SPOF<br>6. 在主备NN共享元数据的过程中，也有方案通过主NN将FsEdits的内容通过与备NN建立的网络IO流，实时写入备NN，并且保证整个过程的原子性。这种方案，解决了NFS共享元数据引入的SPOF，但是主备NN之间的网络连接又会成为新的问题</p>\n<h4 id=\"hadoop2-X-ha-原理-hadoop2-x之后，Clouera提出了QJM-Qurom-Journal-Manager，这是一个基于Paxos算法实现的HDFS-HA方案，它给出了一种较好的解决思路和方案-示意图如下：\"><a href=\"#hadoop2-X-ha-原理-hadoop2-x之后，Clouera提出了QJM-Qurom-Journal-Manager，这是一个基于Paxos算法实现的HDFS-HA方案，它给出了一种较好的解决思路和方案-示意图如下：\" class=\"headerlink\" title=\"hadoop2.X ha 原理:  hadoop2.x之后，Clouera提出了QJM/Qurom Journal Manager，这是一个基于Paxos算法实现的HDFS HA方案，它给出了一种较好的解决思路和方案,示意图如下：\"></a>hadoop2.X ha 原理:  hadoop2.x之后，Clouera提出了QJM/Qurom Journal Manager，这是一个基于Paxos算法实现的HDFS HA方案，它给出了一种较好的解决思路和方案,示意图如下：</h4><p><img src=\"//img.wqkenqing.ren//file/2017/7/bc057fbb4b4047928bf06b7a43364335-image.png\" alt=\"bc057fbb4b4047928bf06b7a43364335-image.png\"></p>\n<ul>\n<li><p>基本原理就是用2N+1台 JN 存储EditLog，每次写数据操作有大多数（&gt;=N+1）返回成功时即认为该次写成功，数据不会丢失了。当然这个算法所能容忍的是最多有N台机器挂掉，如果多于N台挂掉，这个算法就失效了。这个原理是基于Paxos算法</p>\n</li>\n<li><p>在HA架构里面SecondaryNameNode这个冷备角色已经不存在了，为了保持standby NN时时的与主Active NN的元数据保持一致，他们之间交互通过一系列守护的轻量级进程JournalNode  + 任何修改操作在 Active NN上执行时，JN进程同时也会记录修改log到至少半数以上的JN中，这时 Standby NN 监测到JN 里面的同步log发生变化了会读取 JN 里面的修改log，然后同步到自己的的目录镜像树里面，<br><img src=\"//img.wqkenqing.ren//file/2017/7/608621d2ab52466db89e8a95d165f6e7-image.png\" alt=\"608621d2ab52466db89e8a95d165f6e7-image.png\"></p>\n<p>当发生故障时，Active的 NN 挂掉后，Standby NN 会在它成为Active NN 前，读取所有的JN里面的修改日志，这样就能高可靠的保证与挂掉的NN的目录镜像树一致，然后无缝的接替它的职责，维护来自客户端请求，从而达到一个高可用的目的  QJM方式来实现HA的主要优势：<br>1. 不需要配置额外的高共享存储，降低了复杂度和维护成本<br>2. 消除spof<br>3. 系统鲁棒性(Robust:健壮)的程度是可配置<br>4. JN不会因为其中一台的延迟而影响整体的延迟，而且也不会因为JN的数量增多而影响性能（因为NN向JN发送日志是并行的）  datanode的fencing: 确保只有一个NN能命令DN。HDFS-1972中详细描述了DN如何实现fencing<br>1. 每个NN改变状态的时候，向DN发送自己的状态和一个序列号<br>2. DN在运行过程中维护此序列号，当failover时，新的NN在返回DN心跳时会返回自己的active状态和一个更大的序列号。DN接收到这个返回则认为该NN为新的active  3. 如果这时原来的active NN恢复，返回给DN的心跳信息包含active状态和原来的序列号，这时DN就会拒绝这个NN的命令  客户端fencing：确保只有一个NN能响应客户端请求，让访问standby nn的客户端直接失败。在RPC层封装了一层，通过FailoverProxyProvider以重试的方式连接NN。通过若干次连接一个NN失败后尝试连接新的NN，对客户端的影响是重试的时候增加一定的延迟。客户端可以设置重试此时和时间  Hadoop提供了ZKFailoverController角色，部署在每个NameNode的节点上，作为一个deamon进程, 简称zkfc，<br><img src=\"//img.wqkenqing.ren//file/2017/7/3cfc6fc17a8e47509465442f6eaf7c14-image.png\" alt=\"3cfc6fc17a8e47509465442f6eaf7c14-image.png\"></p>\n<p>FailoverController主要包括三个组件:<br>1. HealthMonitor: 监控NameNode是否处于unavailable或unhealthy状态。当前通过RPC调用NN相应的方法完成<br>2. ActiveStandbyElector: 管理和监控自己在ZK中的状态<br>3. ZKFailoverController 它订阅HealthMonitor 和ActiveStandbyElector 的事件，并管理NameNode的状态  ZKFailoverController主要职责：      1. 健康监测：周期性的向它监控的NN发送健康探测命令，从而来确定某个NameNode是否处于健康状态，如果机器宕机，心跳失败，那么zkfc就会标记它处于一个不健康的状态<br>2. 会话管理：如 果NN是健康的，zkfc就会在zookeeper中保持一个打开的会话，如果NameNode同时还是Active状态的，那么zkfc还会在 Zookeeper中占有一个类型为短暂类型的znode，当这个NN挂掉时，这个znode将会被删除，然后备用的NN，将会得到这把锁，升级为主 NN，同时标记状态为Active<br>3. 当宕机的NN新启动时，它会再次注册zookeper，发现已经有znode锁了，便会自动变为Standby状态，如此往复循环，保证高可靠，需要注意，目前仅仅支持最多配置2个NN<br>4. master选举：如上所述，通过在zookeeper中维持一个短暂类型的znode，来实现抢占式的锁机制，从而判断那个NameNode为Active状态  <strong>hadoop2.x Federation</strong>：  单Active NN的架构使得HDFS在集群扩展性和性能上都有潜在的问题，当集群大到一定程度后，NN进程使用的内存可能会达到上百G，NN成为了性能的瓶颈  常用的估算公式为1G对应1百万个块，按缺省块大小计算的话，大概是64T (这个估算比例是有比较大的富裕的，其实，即使是每个文件只有一个块，所有元数据信息也不会有1KB/block)  为了解决这个问题,Hadoop 2.x提供了HDFS Federation, 示意图如下：<br><img src=\"//img.wqkenqing.ren//file/2017/7/e5015b90accf4fe6a7729afe692ffa64-image.png\" alt=\"e5015b90accf4fe6a7729afe692ffa64-image.png\"></p>\n<p>多个NN共用一个集群里的存储资源，每个NN都可以单独对外提供服务  每个NN都会定义一个存储池，有单独的id，每个DN都为所有存储池提供存储  DN会按照存储池id向其对应的NN汇报块信息，同时，DN会向所有NN汇报本地存储可用资源情况  如果需要在客户端方便的访问若干个NN上的资源，可以使用客户端挂载表，把不同的目录映射到不同的NN，但NN上必须存在相应的目录  设计优势：  改动最小，向前兼容；现有的NN无需任何配置改动；如果现有的客户端只连某台NN的话  分离命名空间管理和块存储管理  客户端挂载表：通过路径自动对应NN、使Federation的配置改动对应用透明  (与上面ha方案中介绍的最多2个NN冲突？)  至此hadoop中的hdfs高可用特性，高容错的实现又有了更深理解，但针对hdfs还一层设计实现<strong>机架感知</strong></p>\n<h4 id=\"机架感知\"><a href=\"#机架感知\" class=\"headerlink\" title=\"机架感知\"></a>机架感知</h4><p>分布式的集群通常包含非常多的机器，由于受到机架槽位和交换机网口的限制，通常大型的分布式集群都会跨好几个机架，由多个机架上的机器共同组成一个分布 式集群。机架内的机器之间的网络速度通常都会高于跨机架机器之间的网络速度，并且机架之间机器的网络通信通常受到上层交换机间网络带宽的限制。  具体到hadoop集群，由于hadoop的HDFS对数据文件的分布式存放是按照分块block存储，每个block会有多个副本(默认为3)，并且为了数据的安全和高效，所以hadoop默认对3个副本的存放策略为：<br>在本地机器的hdfs目录下存储一个block  在另外一个rack的某个datanode上存储一个block<br>在该机器的同一个rack下的某台机器上存储最后一个block<br>这样的策略可以保证对该block所属文件的访问能够优先在本rack下找到，如果整个rack发生了异常，也可以在另外的rack上找到该block的副本。这样足够的高效，并且同时做到了数据的容错。<br>hadoop对机架的感知并非是自适应的，亦即，hadoop集群分辨某台slave机器是属于哪个rack并非是只能的感知的，而是需要 hadoop的管理者人为的告知hadoop哪台机器属于哪个rack，这样在hadoop的namenode启动初始化时，会将这些机器与rack的对 应信息保存在内存中，用来作为对接下来所有的HDFS的写块操作分配datanode列表时（比如3个block对应三台datanode）的选择 datanode策略，做到hadoop allocate block的策略：尽量将三个副本分布到不同的rack。<br>具体实现本文不在深究，在此附上网上的一些解决方式<br><a href=\"http://www.cnblogs.com/cloudma/articles/hadoop-topology.html\" target=\"_blank\" rel=\"noopener\">机架感知实现1</a>  <a href=\"http://blog.csdn.net/magicdreaming/article/details/7629773\" target=\"_blank\" rel=\"noopener\">机架感知实现2</a></p>\n</li>\n</ul>\n<hr>\n<p>至此对hdfs的理解与总结告一段落，后续有了新的理解再进行补充</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h1 id=\"Hadoop总结-第一版—HDFS篇\"><a href=\"#Hadoop总结-第一版—HDFS篇\" class=\"headerlink\" title=\"Hadoop总结(第一版—HDFS篇)\"></a>Hadoop总结(第一版—HDFS篇)</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 什么是hadoop？</span><br><span class=\"line\">&gt;hadoop是稳定的，高容错的，可大规模布署的分布式文件，存储，并行编程框架。</span><br><span class=\"line\">&#96;&#96;&#96;本文默认是已经有hadoop使用经验,所以暂不涉及具体的hadoop生态的各组件的部署和调优细节，后续单开文章来总结。但在具体讲解时会涉及说参数配置会对相关组件参生影响</span><br></pre></td></tr></table></figure>\n<p>具体而言，hadoop核心组件内容有：<strong>hdfs</strong>、<strong>mapredcue</strong>。所以接下来的总结主要针对这两在核心组件展开</p>\n<h2 id=\"HDFS篇\"><a href=\"#HDFS篇\" class=\"headerlink\" title=\"HDFS篇\"></a>HDFS篇</h2><h3 id=\"什么是HDFS？\"><a href=\"#什么是HDFS？\" class=\"headerlink\" title=\"什么是HDFS？\"></a>什么是HDFS？</h3><p><strong>分布式文件系统</strong>：分布式文件系统是一种允许文件通过网络在多台主机上分享的 文件的系统，可让多机器上的多用户分享文件和存储空间<br>HDFS:（Hadoop Distribute File System）即hadoop分布式文件系统  主要用于适合运行在通用硬件上的分布式文件系统，特点是高度容错，适合布署在廉价服务器上，具有高吞吐量的数据访问等特点  1. 保存多个副本，且提供容错机制，副本丢失或宕机自动恢复。默认存3份。  2. 运行在廉价的机器上。  3. 适合大数据的处理。多大？多小？HDFS默认会将文件分割成block，64M为1个block。然后将block按键值对存储在HDFS上，并将键值对的映射存到内存中。如果小文件太多，那内存的负担会很重。  4. 适用于一次写入、多次查询的情况  5. 不支持并发写情况，小文件不合适。因为小文件也占用一个块，小文件越多（1000个1k文件）块越 多，NameNode压力越大。<br><code>hdfs得部署在linux系统上</code></p>\n<h3 id=\"HDFS的具体内容\"><a href=\"#HDFS的具体内容\" class=\"headerlink\" title=\"HDFS的具体内容\"></a>HDFS的具体内容</h3><p>文件、节点、数据块 HDFS主要是是围绕着这三个关键词设计的.</p>\n<h4 id=\"数据块\"><a href=\"#数据块\" class=\"headerlink\" title=\"数据块\"></a><strong>数据块</strong></h4><ul>\n<li>Block：在HDFS中，每个文件都是采用的分块的方式存储，每个block放在不同的dataNode节点上，每个block的标识是一个三元组(block id , numBytes,generationStamp),block id 具有唯一性，具体分配是由namenode节点设置，然后在datanode上建立对应的Block文件，同时建立对应的block meta文件(问题是block meta文件存放位，block size可以通过配置文件设置，所以修改block size会对以前持续化的数据有何影响?）</li>\n<li>Packet:是HDFS文件在DFSClient与DataNode之间通信的过程中文件的形式(一般一个Block对应多个Packet)</li>\n<li>Chunk:是通过程中具体传输的文件单位，发送过程以Packet的方式进行，但 一个packet包含多个Chunk,同时对于每个chunk进行checksum计算，生成checksum bytes。</li>\n</ul>\n<p><strong>Packet</strong><br>Packet的结构：数据包和heatbeat包  一个Packet数据包的组成结构主要分为 Packet Header 、PacketData  Packet Header 中又分为：<br><img src=\"//img.wqkenqing.ren/.qiniudns.com/file/2017/7/10eed6bcc563463ea0b8cd5adf99adec-image.png\" alt=\"10eed6bcc563463ea0b8cd5adf99adec-image.png\"><br>Packet Data部分是一个Packet的实际数据部分。<br>主要内容有</p>\n<ul>\n<li>一个4字节校验</li>\n<li>Checksum</li>\n<li>Chunk部分，Chunk部分最大为512字节<br><img src=\"//img.wqkenqing.ren//file/2017/7/c68e61da1e8148ab99b43fe8e3f5408e-image.png\" alt=\"c68e61da1e8148ab99b43fe8e3f5408e-image.png\"><br>Packet创建过程：首先将字节流数据写入一个buffer缓冲区中，也就是从偏移量为25的位置（checksumStart）开 始写Packet数据Chunk的Checksum部分，从偏移量为533的位置（dataStart）开始写Packet数据的Chunk Data部分，直到一个Packet创建完成为止。</li>\n</ul>\n<p><code>注意：当写一个文件的最后一个Block的最后一个Packet时，如果一个Packet的大小未能达到最大长度，也就是上图对应的缓冲区 中，Checksum与Chunk Data之间还保留了一段未被写过的缓冲区位置，在发送这个Packet之前，会检查Chunksum与Chunk Data之间的缓冲区是否为空白缓冲区（gap），如果有则将Chunk Data部分向前移动，使得Chunk Data 1与Chunk Checksum N相邻，然后才会被发送到DataNode节点</code></p>\n<h4 id=\"hdsf架构-主要组成是节点）\"><a href=\"#hdsf架构-主要组成是节点）\" class=\"headerlink\" title=\"hdsf架构(主要组成是节点）\"></a>hdsf架构(主要组成是节点）</h4><p>主要的构成角色有：Client、NameNode、SecondayNameNode、DataNode<br><img src=\"//img.wqkenqing.ren//file/2017/7/5ba6f1ec6b9c4b0982dc2ce73ff9c444-image.png\" alt=\"5ba6f1ec6b9c4b0982dc2ce73ff9c444-image.png\"></p>\n<ul>\n<li>Client：系统使用者，调用HDFS API操作文件；与NN交互获取文件元数据;与DN交互进行数据读写, 注意：写数据时文件切分由Client完成</li>\n<li>Namenode：Master节点 （也称元数据节点）是系统唯一的管理者。负责元数据的管理(名称空间和数据块映射信息);配置副本策略；处理客户端请求</li>\n<li>Datanode：数据存储节点(也称Slave节点)，存储实际的数据；执行数据块的读写；汇报存储信息给NN</li>\n<li>Secondary NameNode：备胎，namenode的工作量；是NameNode的冷备份；合并fsimage和fsedits然后再发给namenode</li>\n</ul>\n<p><code>careful:</code> 注意：在hadoop 2.x 版本，当启用 hdfs ha 时，将没有这一角色<br><strong>热冷备份说明</strong>：<br>热备份：b是a的热备份，如果a坏掉。那么b马上运行代替a的工作  冷备份：b是a的冷备份，如果a坏掉。那么b不能马上代替a工作。但是b上存储a的一些信息，减少a坏掉之后的损失<br><strong>hdfs构架原则</strong></p>\n<ol>\n<li>元数据与数据分离：文件本身的属性（即元数据）与文件所持有的数据分离</li>\n<li>主/从架构：一个HDFS集群是由一个NameNode和一定数目的DataNode组成</li>\n<li>一次写入多次读取：HDFS中的文件在任何时间只能有一个Writer。当文件被创建，接着写入数据，最后，一旦文件被关闭，就不能再修改。</li>\n<li>移动计算比移动数据更划算：数据运算，越靠近数据，执行运算的性能就越好，由于hdfs数据分布在不同机器上，要让网络的消耗最低，并提高系统的吞吐量，最佳方式是将运算的执行移到离它要处理的数据更近的地方，而不是移动数据</li>\n</ol>\n<p><strong>针对第四条的解释</strong>：<br>在上文中交代到hdfs中的文件是以block的形式存放在集群中，所以一个文件可以是被切分成很多block存放在集群的机器中针对第四条，移动计算比移动数据更划算，是因为，从理论上讲，集群的计算能力是很方便扩展的，如服务器的硬件提升，或增加服务器等。但网络带宽等资源却很容易达到瓶颈或增加经济负担，所以将计算转移至每个block就近的机器进行计算，会比将所有的block合到一个机器上再进行计算要划算，所以，叫移动计算要比移动数据划算</p>\n<h5 id=\"NameNode\"><a href=\"#NameNode\" class=\"headerlink\" title=\"NameNode\"></a>NameNode</h5><p>NameNode是整个文件系统的管理与计算节点，是HDFS中最复杂的一个实体，它与管理着HDFS文件系统中最重要的两个关系</p>\n<ol>\n<li>HDFS文件系统中的文件目录树，以及文件的数据块索引，即每个文件对应的数据块列表  数据块和数据节点的对应关系，即某一块数据块保存在哪些数据节点的信息  <strong>第一个关系</strong>即目录树、元数据和数据块的索引信息持久化到物理存储中，具体的实现是保存在命名空间的镜像fsimage和编辑日志edits中，<strong>careful</strong>：在fsimage中，并没有记录每一个block对应到那几个Datanodes的对应表信息</li>\n<li><strong>第二个关系是</strong>在NameNode启动后，每个DataNode对本地的磁盘进行扫描，将本DataNode上保存的block信息上报至NameNode,Namenode在接收到每个Datanode的块信息汇报后，将接收到的块信息，以及其所在的Datanode信息等保存在内存中。HDFS就是通过这种块信息汇报的方式来完成 block -&gt; Datanodes list的对应表构建（<strong>careful</strong>）<br>类似于数据库中的检查点，为了避免edits日志过大，在Hadoop1.X 中，SecondaryNameNode会按照时间阈值（比如24小时）或者edits大小阈值（比如1G），周期性的将fsimage和edits的合 并，然后将最新的fsimage推送给NameNode。而在Hadoop2.X中，这个动作是由Standby NameNode来完成.<br>由此可看出，这两个文件一旦损坏或丢失，将导致整个HDFS文件系统不可用<br>在hadoop1.X为了保证这两种元数据文件的高可用性，一般的做法，将dfs.namenode.name.dir设置成以逗号分隔的多个目录，这多个目录至少不要在一块磁盘上，最好放在不同的机器上，比如：挂载一个共享文件系统<br>fsimage\\edits 是序列化后的文件，想要查看或编辑里面的内容，可通过 hdfs 提供的 oiv\\oev 命令，<br>命令: hdfs oiv （offline image viewer） 用于将fsimage文件的内容转储到指定文件中以便于阅读,，如文本文件、XML文件，该命令需要以下参数：</li>\n</ol>\n<p>-i (必填参数) –inputFile <arg> 输入FSImage文件<br>-o (必填参数) –outputFile <arg> 输出转换后的文件，如果存在，则会覆盖<br>-p (可选参数） –processor <arg> 将FSImage文件转换成哪种格式： (Ls|XML|FileDistribution).默认为Ls<br>示例：hdfs oiv -i /data1/hadoop/dfs/name/current/fsimage_0000000000019372521 -o /home/hadoop/fsimage.txt<br>命令：hdfs oev (offline edits viewer 离线edits查看器）的缩写， 该工具只操作文件因而并不需要hadoop集群处于运行状态。<br>示例: hdfs oev -i edits_0000000000000042778-0000000000000042779 -o edits.xml<br>支持的输出格式有binary（hadoop使用的二进制格式）、xml（在不使用参数p时的默认输出格式）和stats（输出edits文件的统计信息）<br>由此可以总结到：NameNode管理着DataNode，接收DataNode的注册、心跳、数据块提交等信息的上报，并且在心跳中发送数据块<strong>复制</strong>、<strong>删除</strong>、<strong>恢复</strong>等指令；同时，NameNode还为客户端对<strong>文件系统目录树的操作</strong>和对<strong>文件数据读写</strong>、对<strong>HDFS系统进行管理提供支持</strong><br>另 Namenode 启动后会进入一个称为<strong>安全模式</strong>的特殊状态。处于安全模式 的 Namenode 是不会进行数据块的复制的。 Namenode 从所有的 Datanode 接收心跳信号和块状态报告。 块状态报告包括了某个 Datanode 所有的数据 块列表。每个数据块都有一个指定的最小副本数。当 Namenode 检测确认某 个数据块的副本数目达到这个最小值，那么该数据块就会被认为是副本安全 (safely replicated) 的；在一定百分比（这个参数可配置）的数据块被 Namenode 检测确认是安全之后（加上一个额外的 30 秒等待时间）， Namenode 将退出安全模式状态。接下来它会确定还有哪些数据块的副本没 有达到指定数目，并将这些数据块复制到其他 Datanode 上。  ##### Secondary NameNode  在HA cluster中又称为standby node<br>主要作用：  1.如上文提到的合并fsimage和eits日志，将eits日志文件大小控制在一个限度下  大致流程如下  namenode 响应 Secondary namenode 请求，将 edit log 推送给 Secondary namenode ， 开始重新写一个新的 edit log  Secondary namenode 收到来自 namenode 的 fsimage 文件和 edit log  Secondary namenode 将 fsimage 加载到内存，应用 edit log ， 并生成一 个新的 fsimage 文件  Secondary namenode 将新的 fsimage 推送给 Namenode  Namenode 用新的 fsimage 取代旧的 fsimage ， 在 fstime 文件中记下检查 点发生的时<br><img src=\"//img.wqkenqing.ren//file/2017/7/aed541bebcc04fb79e2de3c504b7ee46-image.png\" alt=\"aed541bebcc04fb79e2de3c504b7ee46-image.png\"></p>\n<h4 id=\"HDFS写文件-1-x-默认的block大小是64M-2-X版本默认block的大小是-128M\"><a href=\"#HDFS写文件-1-x-默认的block大小是64M-2-X版本默认block的大小是-128M\" class=\"headerlink\" title=\"HDFS写文件  1.x 默认的block大小是64M 2.X版本默认block的大小是 128M \"></a>HDFS写文件  1.x 默认的block大小是64M 2.X版本默认block的大小是 128M <img src=\"//img.wqkenqing.ren//file/2017/7/d0c33b33bfbc41e8a493553395e52ef0-image.png\" alt=\"d0c33b33bfbc41e8a493553395e52ef0-image.png\"></h4><p>如上图所示  + Client预先设置的block参数切分FIle</p>\n<ul>\n<li>CLient向NameNode发送写数据请求，</li>\n<li>NameNode，记录block信息，并返回可用的DataNode(具体的返回规则参考下文)</li>\n<li>client向DataNode发送block1；发送过程是以流式写入具体流程是</li>\n</ul>\n<ol>\n<li><p>将64M的block1按64k的packet划分</p>\n</li>\n<li><p>然后将第一个packet发送给host2</p>\n</li>\n<li><p>host2接收完后，将第一个packet发送给host1，同时client想host2发送第二个packet</p>\n</li>\n<li><p>host1接收完第一个packet后，发送给host3，同时接收host2发来的第二个packet</p>\n</li>\n<li><p>以此类推，如图红线实线所示，直到将block1发送完毕</p>\n</li>\n<li><p>host2,host1,host3向NameNode，host2向Client发送通知，说“消息发送完了”。</p>\n</li>\n<li><p>client收到host2发来的消息后，向namenode发送消息，说我写完了。这样就真完成了。</p>\n</li>\n<li><p>发送完block1后，再向host7，host8，host4发送block2  当客户端向 HDFS 文件写入数据的时候，一开始是写到本地临时文件中。假设该文件的副 本系数设置为 3 ，当本地临时文件累积到一个数据块的大小时，客户端会从 Namenode 获取一个 Datanode 列表用于存放副本。然后客户端开始向第一个 Datanode 传输数据，第一个 Datanode 一小部分一小部分 (4 KB) 地接收数据，将每一部分写入本地仓库，并同时传输该部分到列表中 第二个 Datanode 节点。第二个 Datanode 也是这样，一小部分一小部分地接收数据，写入本地 仓库，并同时传给第三个 Datanode 。最后，第三个 Datanode 接收数据并存储在本地。因此， Datanode 能流水线式地从前一个节点接收数据，并在同时转发给下一个节点，数据以流水线的 方式从前一个 Datanode 复制到下一个<br><img src=\"//img.wqkenqing.ren//file/2017/7/2c77aaad2f684820bf8a6b475b79d2f1-image.png\" alt=\"2c77aaad2f684820bf8a6b475b79d2f1-image.png\"></p>\n<p>写入的过程，按hdsf默认设置，1T文件，我们需要3T的存储，3T的网络流量  在执行读或写的过程中，NameNode和DataNode通过HeartBeat进行保存通信，确定DataNode活着。如果发现DataNode死掉了，就将死掉的DataNode上的数据，放到其他节点去。读取时，要读其他节点去  挂掉一个节点，没关系，还有其他节点可以备份；甚至，挂掉某一个机架，也没关系；其他机架上，也有备份</p>\n<h5 id=\"hdfs读文件\"><a href=\"#hdfs读文件\" class=\"headerlink\" title=\"hdfs读文件\"></a>hdfs读文件</h5><p><img src=\"//img.wqkenqing.ren//file/2017/7/8fb62c84f57a4203a2dbedf5f68920d9-image.png\" alt=\"8fb62c84f57a4203a2dbedf5f68920d9-image.png\"></p>\n<p>客户端通过调用FileSystem对象的open()方法来打开希望读取的文件，对于HDFS来说，这个对象时分布文件系统的一个实例；  DistributedFileSystem通过使用RPC来调用NameNode以确定文件起始块的位置，同一Block按照重复数会返回多个位置，这些位置按照Hadoop集群拓扑结构排序，距离客户端近的排在前面  前两步会返回一个FSDataInputStream对象，该对象会被封装成DFSInputStream对象，DFSInputStream可以方便的管理datanode和namenode数据流，客户端对这个输入流调用read()方法  存储着文件起始块的DataNode地址的DFSInputStream随即连接距离最近的DataNode，通过对数据流反复调用read()方法，将数据从DataNode传输到客户端  到达块的末端时，DFSInputStream会关闭与该DataNode的连接，然后寻找下一个块的最佳DataNode，这些操作对客户端来说是透明的，客户端的角度看来只是读一个持续不断的流  一旦客户端完成读取，就对FSDataInputStream调用close()方法关闭文件读取</p>\n<h5 id=\"block持续化结构\"><a href=\"#block持续化结构\" class=\"headerlink\" title=\"block持续化结构\"></a>block持续化结构</h5><p>DataNode节点上一个Block持久化到磁盘上的物理存储结构，如下图所示：  <img src=\"//img.wqkenqing.ren//file/2017/7/df10f0ac586f4baebc2587842aec5675-image.png\" alt=\"df10f0ac586f4baebc2587842aec5675-image.png\"></p>\n<p>每个Block文件（如上图中blk_1084013198文件）都对应一个meta文件（如上图中blk_1084013198_10273532.meta文件），Block文件是一个一个Chunk的二进制数据（每个Chunk的大小是512字节），而meta文件是与每一个Chunk对应的Checksum数据，是序列化形式存储  —  至上我们大致了解了HDFS。正如上文提到的Hadoop的特点，高可能，高容错性。若光从上文提到的特性可能还不足以说明，如NameNode环节就提到了NameNode的重要作用，但若NameNode出现了故障，对整个机集会是毁灭性的打击，于是Hadoop也引入其它的一些手段来保存高可用，高容错。接下来我们就来探讨下</p>\n<h3 id=\"Hadoop-HA的引入\"><a href=\"#Hadoop-HA的引入\" class=\"headerlink\" title=\"Hadoop HA的引入\"></a>Hadoop HA的引入</h3><p>HA：High Available即高可用性集群，是保证业务连续性的有效解决方案，一般有两个或两个以上的节点，且分为活动节点及备用节点。  在HA具体实现方法不同的情况下，HA框架的流程是一致的, 不一致的就是如何存储和管理日志。在Active NN和Standby NN之间要有个共享的存储日志的地方，Active NN把EditLog写到这个共享的存储日志的地方，Standby NN去读取日志然后执行，这样Active和Standby NN内存中的HDFS元数据保持着同步。一旦发生主从切换Standby NN可以尽快接管Active NN的工作; 默认并未启用 hdfs ha。<br>SPOF方案回顾：</p>\n</li>\n<li><p>Secondary NameNode：它不是HA，它只是阶段性的合并edits和fsimage，以缩短集群启动的时间。当NN失效的时候，Secondary NN并无法立刻提供服务，Secondary NN甚至无法保证数据完整性：如果NN数据丢失的话，在上一次合并后的文件系统的改动会丢失</p>\n</li>\n<li><p>Backup NameNode (HADOOP-4539)：它在内存中复制了NN的当前状态，算是Warm Standby，可也就仅限于此，并没有failover等。它同样是阶段性的做checkpoint，也无法保证数据完整性<br>3. 手动把name.dir指向NFS（Network File System），这是安全的Cold Standby，可以保证元数据不丢失，但集群的恢复则完全靠手动<br>4. Facebook AvatarNode：Facebook有强大的运维做后盾，所以Avatarnode只是Hot Standby，并没有自动切换，当主NN失效的时候，需要管理员确认，然后手动把对外提供服务的虚拟IP映射到Standby NN，这样做的好处是确保不会发生脑裂的场景。其某些设计思想和Hadoop 2.0里的HA非常相似，从时间上来看，Hadoop 2.0应该是借鉴了Facebook的做法 <img src=\"//img.wqkenqing.ren//file/2017/7/32ec8d45379b4e4d99505b03b1b33e61-image.png\" alt=\"32ec8d45379b4e4d99505b03b1b33e61-image.png\"></p>\n</li>\n</ol>\n<p>5. PrimaryNN 与StandbyNN之间通过NFS来共享FsEdits、FsImage文件，这样主备NN之间就拥有了一致的目录树和block信息；而block的 位置信息，可以根据DN向两个NN上报的信息过程中构建起来。这样再辅以虚IP，可以较好达到主备NN快速热切的目的。但是显然，这里的NFS又引入了新的SPOF<br>6. 在主备NN共享元数据的过程中，也有方案通过主NN将FsEdits的内容通过与备NN建立的网络IO流，实时写入备NN，并且保证整个过程的原子性。这种方案，解决了NFS共享元数据引入的SPOF，但是主备NN之间的网络连接又会成为新的问题</p>\n<h4 id=\"hadoop2-X-ha-原理-hadoop2-x之后，Clouera提出了QJM-Qurom-Journal-Manager，这是一个基于Paxos算法实现的HDFS-HA方案，它给出了一种较好的解决思路和方案-示意图如下：\"><a href=\"#hadoop2-X-ha-原理-hadoop2-x之后，Clouera提出了QJM-Qurom-Journal-Manager，这是一个基于Paxos算法实现的HDFS-HA方案，它给出了一种较好的解决思路和方案-示意图如下：\" class=\"headerlink\" title=\"hadoop2.X ha 原理:  hadoop2.x之后，Clouera提出了QJM/Qurom Journal Manager，这是一个基于Paxos算法实现的HDFS HA方案，它给出了一种较好的解决思路和方案,示意图如下：\"></a>hadoop2.X ha 原理:  hadoop2.x之后，Clouera提出了QJM/Qurom Journal Manager，这是一个基于Paxos算法实现的HDFS HA方案，它给出了一种较好的解决思路和方案,示意图如下：</h4><p><img src=\"//img.wqkenqing.ren//file/2017/7/bc057fbb4b4047928bf06b7a43364335-image.png\" alt=\"bc057fbb4b4047928bf06b7a43364335-image.png\"></p>\n<ul>\n<li><p>基本原理就是用2N+1台 JN 存储EditLog，每次写数据操作有大多数（&gt;=N+1）返回成功时即认为该次写成功，数据不会丢失了。当然这个算法所能容忍的是最多有N台机器挂掉，如果多于N台挂掉，这个算法就失效了。这个原理是基于Paxos算法</p>\n</li>\n<li><p>在HA架构里面SecondaryNameNode这个冷备角色已经不存在了，为了保持standby NN时时的与主Active NN的元数据保持一致，他们之间交互通过一系列守护的轻量级进程JournalNode  + 任何修改操作在 Active NN上执行时，JN进程同时也会记录修改log到至少半数以上的JN中，这时 Standby NN 监测到JN 里面的同步log发生变化了会读取 JN 里面的修改log，然后同步到自己的的目录镜像树里面，<br><img src=\"//img.wqkenqing.ren//file/2017/7/608621d2ab52466db89e8a95d165f6e7-image.png\" alt=\"608621d2ab52466db89e8a95d165f6e7-image.png\"></p>\n<p>当发生故障时，Active的 NN 挂掉后，Standby NN 会在它成为Active NN 前，读取所有的JN里面的修改日志，这样就能高可靠的保证与挂掉的NN的目录镜像树一致，然后无缝的接替它的职责，维护来自客户端请求，从而达到一个高可用的目的  QJM方式来实现HA的主要优势：<br>1. 不需要配置额外的高共享存储，降低了复杂度和维护成本<br>2. 消除spof<br>3. 系统鲁棒性(Robust:健壮)的程度是可配置<br>4. JN不会因为其中一台的延迟而影响整体的延迟，而且也不会因为JN的数量增多而影响性能（因为NN向JN发送日志是并行的）  datanode的fencing: 确保只有一个NN能命令DN。HDFS-1972中详细描述了DN如何实现fencing<br>1. 每个NN改变状态的时候，向DN发送自己的状态和一个序列号<br>2. DN在运行过程中维护此序列号，当failover时，新的NN在返回DN心跳时会返回自己的active状态和一个更大的序列号。DN接收到这个返回则认为该NN为新的active  3. 如果这时原来的active NN恢复，返回给DN的心跳信息包含active状态和原来的序列号，这时DN就会拒绝这个NN的命令  客户端fencing：确保只有一个NN能响应客户端请求，让访问standby nn的客户端直接失败。在RPC层封装了一层，通过FailoverProxyProvider以重试的方式连接NN。通过若干次连接一个NN失败后尝试连接新的NN，对客户端的影响是重试的时候增加一定的延迟。客户端可以设置重试此时和时间  Hadoop提供了ZKFailoverController角色，部署在每个NameNode的节点上，作为一个deamon进程, 简称zkfc，<br><img src=\"//img.wqkenqing.ren//file/2017/7/3cfc6fc17a8e47509465442f6eaf7c14-image.png\" alt=\"3cfc6fc17a8e47509465442f6eaf7c14-image.png\"></p>\n<p>FailoverController主要包括三个组件:<br>1. HealthMonitor: 监控NameNode是否处于unavailable或unhealthy状态。当前通过RPC调用NN相应的方法完成<br>2. ActiveStandbyElector: 管理和监控自己在ZK中的状态<br>3. ZKFailoverController 它订阅HealthMonitor 和ActiveStandbyElector 的事件，并管理NameNode的状态  ZKFailoverController主要职责：      1. 健康监测：周期性的向它监控的NN发送健康探测命令，从而来确定某个NameNode是否处于健康状态，如果机器宕机，心跳失败，那么zkfc就会标记它处于一个不健康的状态<br>2. 会话管理：如 果NN是健康的，zkfc就会在zookeeper中保持一个打开的会话，如果NameNode同时还是Active状态的，那么zkfc还会在 Zookeeper中占有一个类型为短暂类型的znode，当这个NN挂掉时，这个znode将会被删除，然后备用的NN，将会得到这把锁，升级为主 NN，同时标记状态为Active<br>3. 当宕机的NN新启动时，它会再次注册zookeper，发现已经有znode锁了，便会自动变为Standby状态，如此往复循环，保证高可靠，需要注意，目前仅仅支持最多配置2个NN<br>4. master选举：如上所述，通过在zookeeper中维持一个短暂类型的znode，来实现抢占式的锁机制，从而判断那个NameNode为Active状态  <strong>hadoop2.x Federation</strong>：  单Active NN的架构使得HDFS在集群扩展性和性能上都有潜在的问题，当集群大到一定程度后，NN进程使用的内存可能会达到上百G，NN成为了性能的瓶颈  常用的估算公式为1G对应1百万个块，按缺省块大小计算的话，大概是64T (这个估算比例是有比较大的富裕的，其实，即使是每个文件只有一个块，所有元数据信息也不会有1KB/block)  为了解决这个问题,Hadoop 2.x提供了HDFS Federation, 示意图如下：<br><img src=\"//img.wqkenqing.ren//file/2017/7/e5015b90accf4fe6a7729afe692ffa64-image.png\" alt=\"e5015b90accf4fe6a7729afe692ffa64-image.png\"></p>\n<p>多个NN共用一个集群里的存储资源，每个NN都可以单独对外提供服务  每个NN都会定义一个存储池，有单独的id，每个DN都为所有存储池提供存储  DN会按照存储池id向其对应的NN汇报块信息，同时，DN会向所有NN汇报本地存储可用资源情况  如果需要在客户端方便的访问若干个NN上的资源，可以使用客户端挂载表，把不同的目录映射到不同的NN，但NN上必须存在相应的目录  设计优势：  改动最小，向前兼容；现有的NN无需任何配置改动；如果现有的客户端只连某台NN的话  分离命名空间管理和块存储管理  客户端挂载表：通过路径自动对应NN、使Federation的配置改动对应用透明  (与上面ha方案中介绍的最多2个NN冲突？)  至此hadoop中的hdfs高可用特性，高容错的实现又有了更深理解，但针对hdfs还一层设计实现<strong>机架感知</strong></p>\n<h4 id=\"机架感知\"><a href=\"#机架感知\" class=\"headerlink\" title=\"机架感知\"></a>机架感知</h4><p>分布式的集群通常包含非常多的机器，由于受到机架槽位和交换机网口的限制，通常大型的分布式集群都会跨好几个机架，由多个机架上的机器共同组成一个分布 式集群。机架内的机器之间的网络速度通常都会高于跨机架机器之间的网络速度，并且机架之间机器的网络通信通常受到上层交换机间网络带宽的限制。  具体到hadoop集群，由于hadoop的HDFS对数据文件的分布式存放是按照分块block存储，每个block会有多个副本(默认为3)，并且为了数据的安全和高效，所以hadoop默认对3个副本的存放策略为：<br>在本地机器的hdfs目录下存储一个block  在另外一个rack的某个datanode上存储一个block<br>在该机器的同一个rack下的某台机器上存储最后一个block<br>这样的策略可以保证对该block所属文件的访问能够优先在本rack下找到，如果整个rack发生了异常，也可以在另外的rack上找到该block的副本。这样足够的高效，并且同时做到了数据的容错。<br>hadoop对机架的感知并非是自适应的，亦即，hadoop集群分辨某台slave机器是属于哪个rack并非是只能的感知的，而是需要 hadoop的管理者人为的告知hadoop哪台机器属于哪个rack，这样在hadoop的namenode启动初始化时，会将这些机器与rack的对 应信息保存在内存中，用来作为对接下来所有的HDFS的写块操作分配datanode列表时（比如3个block对应三台datanode）的选择 datanode策略，做到hadoop allocate block的策略：尽量将三个副本分布到不同的rack。<br>具体实现本文不在深究，在此附上网上的一些解决方式<br><a href=\"http://www.cnblogs.com/cloudma/articles/hadoop-topology.html\" target=\"_blank\" rel=\"noopener\">机架感知实现1</a>  <a href=\"http://blog.csdn.net/magicdreaming/article/details/7629773\" target=\"_blank\" rel=\"noopener\">机架感知实现2</a></p>\n</li>\n</ul>\n<hr>\n<p>至此对hdfs的理解与总结告一段落，后续有了新的理解再进行补充</p>"},{"title":"java中枚举的使用","date":"2019-07-15T16:00:00.000Z","_content":"\n此处简介\n<!--more-->\n### java中枚举的使用\n**enum** 的全称为 enumeration 是 JDK 1.5  中引入的新特性，存放在 java.lang 包中。\n1. 原始的接口定义常量\n\n2. 语法（定义）\n\n3. 遍历、switch 等常用操作\n\n4. enum 对象的常用方法介绍\n\n5. 给 enum 自定义属性和方法\n\n6. EnumSet，EnumMap 的应用\n\n7. enum 的原理分析\n\n8. 总结\n\n***\n原始的接口定义常量\n\n```\npublic interface IConstants {\n    String MON = \"Mon\";\n    String TUE = \"Tue\";\n    String WED = \"Wed\";\n    String THU = \"Thu\";\n    String FRI = \"Fri\";\n    String SAT = \"Sat\";\n    String SUN = \"Sun\";\n}\n```\n***\n**语法（定义）**\n 创建枚举类型要使用 enum 关键字，隐含了所创建的类型都是 java.lang.Enum 类的子类（java.lang.Enum 是一个抽象类）。枚举类型符合通用模式 Class Enum<E extends Enum<E>>，而 E 表示枚举类型的名称。枚举类型的每一个值都将映射到 protected Enum(String name, int ordinal) 构造函数中，在这里，每个值的名称都被转换成一个字符串，并且序数设置表示了此设置被创建的顺序。\n\n\n\n```\npackage com.hmw.test;\n/**\n * 枚举测试类\n * @author <a href=\"mailto:hemingwang0902@126.com\">何明旺</a>\n */\npublic enum EnumTest {\n    MON, TUE, WED, THU, FRI, SAT, SUN;\n}\n这段代码实际上调用了7次 Enum(String name, int ordinal)：\n\nnew Enum<EnumTest>(\"MON\",0);\nnew Enum<EnumTest>(\"TUE\",1);\nnew Enum<EnumTest>(\"WED\",2);\n```\n***\n**遍历、switch 等常用操作**\n\n\npublic class Test {\n    public static void main(String[] args) {\n        for (EnumTest e : EnumTest.values()) {\n            System.out.println(e.toString());\n        }\n\n        System.out.println(\"----------------我是分隔线------------------\");\n\n        EnumTest test = EnumTest.TUE;\n        switch (test) {\n        case MON:\n            System.out.println(\"今天是星期一\");\n            break;\n        case TUE:\n            System.out.println(\"今天是星期二\");\n            break;\n        // ... ...\n        default:\n            System.out.println(test);\n            break;\n        }\n    }\n    }\n***\n**enum 对象的常用方法介绍**\nint compareTo(E o)\n          比较此枚举与指定对象的顺序。\n\nClass<E> getDeclaringClass()\n          返回与此枚举常量的枚举类型相对应的 Class 对象。\n\nString name()\n          返回此枚举常量的名称，在其枚举声明中对其进行声明。\n\nint ordinal()\n          返回枚举常量的序数（它在枚举声明中的位置，其中初始常量序数为零）。\n\nString toString()\n\n           返回枚举常量的名称，它包含在声明中。\n\nstatic <T extends Enum<T>> T valueOf(Class<T> enumType, String name)\n          返回带指定名称的指定枚举类型的枚举常量。\n\n***\n**给 enum 自定义属性和方法**\n\n```\n给 enum 对象加一下 value 的属性和 getValue() 的方法：\n\npackage com.hmw.test;\n\n/**\n * 枚举测试类\n *\n * @author <a href=\"mailto:hemingwang0902@126.com\">何明旺</a>\n */\npublic enum EnumTest {\n    MON(1), TUE(2), WED(3), THU(4), FRI(5), SAT(6) {\n        @Override\n        public boolean isRest() {\n            return true;\n        }\n    },\n    SUN(0) {\n        @Override\n        public boolean isRest() {\n            return true;\n        }\n    };\n\n    private int value;\n\n    private EnumTest(int value) {\n        this.value = value;\n    }\n\n    public int getValue() {\n        return value;\n    }\n\n    public boolean isRest() {\n        return false;\n    }\n}\npublic class Test {\n    public static void main(String[] args) {\n        System.out.println(\"EnumTest.FRI 的 value = \" + EnumTest.FRI.getValue());\n    }\n}\n输出结果：\nEnumTest.FRI 的 value = 5\n```\n***\n**EnumSet，EnumMap 的应用**\n\n```\npublic class Test {\n    public static void main(String[] args) {\n        // EnumSet的使用\n        EnumSet<EnumTest> weekSet = EnumSet.allOf(EnumTest.class);\n        for (EnumTest day : weekSet) {\n            System.out.println(day);\n        }\n\n        // EnumMap的使用\n        EnumMap<EnumTest, String> weekMap = new EnumMap(EnumTest.class);\n        weekMap.put(EnumTest.MON, \"星期一\");\n        weekMap.put(EnumTest.TUE, \"星期二\");\n        // ... ...\n        for (Iterator<Entry<EnumTest, String>> iter = weekMap.entrySet().iterator(); iter.hasNext();) {\n            Entry<EnumTest, String> entry = iter.next();\n            System.out.println(entry.getKey().name() + \":\" + entry.getValue());\n        }\n    }\n}\n```\n***\n原理分析\n        enum 的语法结构尽管和 class 的语法不一样，但是经过编译器编译之后产生的是一个class文件。该class文件经过反编译可以看到实际上是生成了一个类，该类继承了java.lang.Enum<E>。EnumTest 经过反编译(javap com.hmw.test.EnumTest 命令)之后得到的内容如下：\n\n```\npublic class com.hmw.test.EnumTest extends java.lang.Enum{\n    public static final com.hmw.test.EnumTest MON;\n    public static final com.hmw.test.EnumTest TUE;\n    public static final com.hmw.test.EnumTest WED;\n    public static final com.hmw.test.EnumTest THU;\n    public static final com.hmw.test.EnumTest FRI;\n    public static final com.hmw.test.EnumTest SAT;\n    public static final com.hmw.test.EnumTest SUN;\n    static {};\n    public int getValue();\n    public boolean isRest();\n    public static com.hmw.test.EnumTest[] values();\n    public static com.hmw.test.EnumTest valueOf(java.lang.String);\n    com.hmw.test.EnumTest(java.lang.String, int, int, com.hmw.test.EnumTest);\n}\n```\n\n所以，实际上 enum 就是一个 class，只不过 java 编译器帮我们做了语法的解析和编译而已。\n总结\n    可以把 enum 看成是一个普通的 class，它们都可以定义一些属性和方法，不同之处是：enum 不能使用 extends 关键字继承其他类，因为 enum 已经继承了 java.lang.Enum（java是单一继承）。","source":"_posts/王阁/技术/hexo/oldblog/blog3.md","raw":"---\n\ntitle: java中枚举的使用\ndate: 2019-07-16\ntags:\n\n---\n\n此处简介\n<!--more-->\n### java中枚举的使用\n**enum** 的全称为 enumeration 是 JDK 1.5  中引入的新特性，存放在 java.lang 包中。\n1. 原始的接口定义常量\n\n2. 语法（定义）\n\n3. 遍历、switch 等常用操作\n\n4. enum 对象的常用方法介绍\n\n5. 给 enum 自定义属性和方法\n\n6. EnumSet，EnumMap 的应用\n\n7. enum 的原理分析\n\n8. 总结\n\n***\n原始的接口定义常量\n\n```\npublic interface IConstants {\n    String MON = \"Mon\";\n    String TUE = \"Tue\";\n    String WED = \"Wed\";\n    String THU = \"Thu\";\n    String FRI = \"Fri\";\n    String SAT = \"Sat\";\n    String SUN = \"Sun\";\n}\n```\n***\n**语法（定义）**\n 创建枚举类型要使用 enum 关键字，隐含了所创建的类型都是 java.lang.Enum 类的子类（java.lang.Enum 是一个抽象类）。枚举类型符合通用模式 Class Enum<E extends Enum<E>>，而 E 表示枚举类型的名称。枚举类型的每一个值都将映射到 protected Enum(String name, int ordinal) 构造函数中，在这里，每个值的名称都被转换成一个字符串，并且序数设置表示了此设置被创建的顺序。\n\n\n\n```\npackage com.hmw.test;\n/**\n * 枚举测试类\n * @author <a href=\"mailto:hemingwang0902@126.com\">何明旺</a>\n */\npublic enum EnumTest {\n    MON, TUE, WED, THU, FRI, SAT, SUN;\n}\n这段代码实际上调用了7次 Enum(String name, int ordinal)：\n\nnew Enum<EnumTest>(\"MON\",0);\nnew Enum<EnumTest>(\"TUE\",1);\nnew Enum<EnumTest>(\"WED\",2);\n```\n***\n**遍历、switch 等常用操作**\n\n\npublic class Test {\n    public static void main(String[] args) {\n        for (EnumTest e : EnumTest.values()) {\n            System.out.println(e.toString());\n        }\n\n        System.out.println(\"----------------我是分隔线------------------\");\n\n        EnumTest test = EnumTest.TUE;\n        switch (test) {\n        case MON:\n            System.out.println(\"今天是星期一\");\n            break;\n        case TUE:\n            System.out.println(\"今天是星期二\");\n            break;\n        // ... ...\n        default:\n            System.out.println(test);\n            break;\n        }\n    }\n    }\n***\n**enum 对象的常用方法介绍**\nint compareTo(E o)\n          比较此枚举与指定对象的顺序。\n\nClass<E> getDeclaringClass()\n          返回与此枚举常量的枚举类型相对应的 Class 对象。\n\nString name()\n          返回此枚举常量的名称，在其枚举声明中对其进行声明。\n\nint ordinal()\n          返回枚举常量的序数（它在枚举声明中的位置，其中初始常量序数为零）。\n\nString toString()\n\n           返回枚举常量的名称，它包含在声明中。\n\nstatic <T extends Enum<T>> T valueOf(Class<T> enumType, String name)\n          返回带指定名称的指定枚举类型的枚举常量。\n\n***\n**给 enum 自定义属性和方法**\n\n```\n给 enum 对象加一下 value 的属性和 getValue() 的方法：\n\npackage com.hmw.test;\n\n/**\n * 枚举测试类\n *\n * @author <a href=\"mailto:hemingwang0902@126.com\">何明旺</a>\n */\npublic enum EnumTest {\n    MON(1), TUE(2), WED(3), THU(4), FRI(5), SAT(6) {\n        @Override\n        public boolean isRest() {\n            return true;\n        }\n    },\n    SUN(0) {\n        @Override\n        public boolean isRest() {\n            return true;\n        }\n    };\n\n    private int value;\n\n    private EnumTest(int value) {\n        this.value = value;\n    }\n\n    public int getValue() {\n        return value;\n    }\n\n    public boolean isRest() {\n        return false;\n    }\n}\npublic class Test {\n    public static void main(String[] args) {\n        System.out.println(\"EnumTest.FRI 的 value = \" + EnumTest.FRI.getValue());\n    }\n}\n输出结果：\nEnumTest.FRI 的 value = 5\n```\n***\n**EnumSet，EnumMap 的应用**\n\n```\npublic class Test {\n    public static void main(String[] args) {\n        // EnumSet的使用\n        EnumSet<EnumTest> weekSet = EnumSet.allOf(EnumTest.class);\n        for (EnumTest day : weekSet) {\n            System.out.println(day);\n        }\n\n        // EnumMap的使用\n        EnumMap<EnumTest, String> weekMap = new EnumMap(EnumTest.class);\n        weekMap.put(EnumTest.MON, \"星期一\");\n        weekMap.put(EnumTest.TUE, \"星期二\");\n        // ... ...\n        for (Iterator<Entry<EnumTest, String>> iter = weekMap.entrySet().iterator(); iter.hasNext();) {\n            Entry<EnumTest, String> entry = iter.next();\n            System.out.println(entry.getKey().name() + \":\" + entry.getValue());\n        }\n    }\n}\n```\n***\n原理分析\n        enum 的语法结构尽管和 class 的语法不一样，但是经过编译器编译之后产生的是一个class文件。该class文件经过反编译可以看到实际上是生成了一个类，该类继承了java.lang.Enum<E>。EnumTest 经过反编译(javap com.hmw.test.EnumTest 命令)之后得到的内容如下：\n\n```\npublic class com.hmw.test.EnumTest extends java.lang.Enum{\n    public static final com.hmw.test.EnumTest MON;\n    public static final com.hmw.test.EnumTest TUE;\n    public static final com.hmw.test.EnumTest WED;\n    public static final com.hmw.test.EnumTest THU;\n    public static final com.hmw.test.EnumTest FRI;\n    public static final com.hmw.test.EnumTest SAT;\n    public static final com.hmw.test.EnumTest SUN;\n    static {};\n    public int getValue();\n    public boolean isRest();\n    public static com.hmw.test.EnumTest[] values();\n    public static com.hmw.test.EnumTest valueOf(java.lang.String);\n    com.hmw.test.EnumTest(java.lang.String, int, int, com.hmw.test.EnumTest);\n}\n```\n\n所以，实际上 enum 就是一个 class，只不过 java 编译器帮我们做了语法的解析和编译而已。\n总结\n    可以把 enum 看成是一个普通的 class，它们都可以定义一些属性和方法，不同之处是：enum 不能使用 extends 关键字继承其他类，因为 enum 已经继承了 java.lang.Enum（java是单一继承）。","slug":"王阁/技术/hexo/oldblog/blog3","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg4004zu6pw9kw01cys","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n<h3 id=\"java中枚举的使用\"><a href=\"#java中枚举的使用\" class=\"headerlink\" title=\"java中枚举的使用\"></a>java中枚举的使用</h3><p><strong>enum</strong> 的全称为 enumeration 是 JDK 1.5  中引入的新特性，存放在 java.lang 包中。</p>\n<ol>\n<li><p>原始的接口定义常量</p>\n</li>\n<li><p>语法（定义）</p>\n</li>\n<li><p>遍历、switch 等常用操作</p>\n</li>\n<li><p>enum 对象的常用方法介绍</p>\n</li>\n<li><p>给 enum 自定义属性和方法</p>\n</li>\n<li><p>EnumSet，EnumMap 的应用</p>\n</li>\n<li><p>enum 的原理分析</p>\n</li>\n<li><p>总结</p>\n</li>\n</ol>\n<hr>\n<p>原始的接口定义常量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface IConstants &#123;</span><br><span class=\"line\">    String MON &#x3D; &quot;Mon&quot;;</span><br><span class=\"line\">    String TUE &#x3D; &quot;Tue&quot;;</span><br><span class=\"line\">    String WED &#x3D; &quot;Wed&quot;;</span><br><span class=\"line\">    String THU &#x3D; &quot;Thu&quot;;</span><br><span class=\"line\">    String FRI &#x3D; &quot;Fri&quot;;</span><br><span class=\"line\">    String SAT &#x3D; &quot;Sat&quot;;</span><br><span class=\"line\">    String SUN &#x3D; &quot;Sun&quot;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<p><strong>语法（定义）</strong><br> 创建枚举类型要使用 enum 关键字，隐含了所创建的类型都是 java.lang.Enum 类的子类（java.lang.Enum 是一个抽象类）。枚举类型符合通用模式 Class Enum&lt;E extends Enum<E>&gt;，而 E 表示枚举类型的名称。枚举类型的每一个值都将映射到 protected Enum(String name, int ordinal) 构造函数中，在这里，每个值的名称都被转换成一个字符串，并且序数设置表示了此设置被创建的顺序。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.hmw.test;</span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * 枚举测试类</span><br><span class=\"line\"> * @author &lt;a href&#x3D;&quot;mailto:hemingwang0902@126.com&quot;&gt;何明旺&lt;&#x2F;a&gt;</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">public enum EnumTest &#123;</span><br><span class=\"line\">    MON, TUE, WED, THU, FRI, SAT, SUN;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">这段代码实际上调用了7次 Enum(String name, int ordinal)：</span><br><span class=\"line\"></span><br><span class=\"line\">new Enum&lt;EnumTest&gt;(&quot;MON&quot;,0);</span><br><span class=\"line\">new Enum&lt;EnumTest&gt;(&quot;TUE&quot;,1);</span><br><span class=\"line\">new Enum&lt;EnumTest&gt;(&quot;WED&quot;,2);</span><br></pre></td></tr></table></figure>\n<hr>\n<p><strong>遍历、switch 等常用操作</strong></p>\n<p>public class Test {<br>    public static void main(String[] args) {<br>        for (EnumTest e : EnumTest.values()) {<br>            System.out.println(e.toString());<br>        }</p>\n<pre><code>    System.out.println(&quot;----------------我是分隔线------------------&quot;);\n\n    EnumTest test = EnumTest.TUE;\n    switch (test) {\n    case MON:\n        System.out.println(&quot;今天是星期一&quot;);\n        break;\n    case TUE:\n        System.out.println(&quot;今天是星期二&quot;);\n        break;\n    // ... ...\n    default:\n        System.out.println(test);\n        break;\n    }\n}\n}</code></pre><hr>\n<p><strong>enum 对象的常用方法介绍</strong><br>int compareTo(E o)<br>          比较此枚举与指定对象的顺序。</p>\n<p>Class<E> getDeclaringClass()<br>          返回与此枚举常量的枚举类型相对应的 Class 对象。</p>\n<p>String name()<br>          返回此枚举常量的名称，在其枚举声明中对其进行声明。</p>\n<p>int ordinal()<br>          返回枚举常量的序数（它在枚举声明中的位置，其中初始常量序数为零）。</p>\n<p>String toString()</p>\n<pre><code>返回枚举常量的名称，它包含在声明中。</code></pre><p>static &lt;T extends Enum<T>&gt; T valueOf(Class<T> enumType, String name)<br>          返回带指定名称的指定枚举类型的枚举常量。</p>\n<hr>\n<p><strong>给 enum 自定义属性和方法</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">给 enum 对象加一下 value 的属性和 getValue() 的方法：</span><br><span class=\"line\"></span><br><span class=\"line\">package com.hmw.test;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * 枚举测试类</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * @author &lt;a href&#x3D;&quot;mailto:hemingwang0902@126.com&quot;&gt;何明旺&lt;&#x2F;a&gt;</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">public enum EnumTest &#123;</span><br><span class=\"line\">    MON(1), TUE(2), WED(3), THU(4), FRI(5), SAT(6) &#123;</span><br><span class=\"line\">        @Override</span><br><span class=\"line\">        public boolean isRest() &#123;</span><br><span class=\"line\">            return true;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    SUN(0) &#123;</span><br><span class=\"line\">        @Override</span><br><span class=\"line\">        public boolean isRest() &#123;</span><br><span class=\"line\">            return true;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    private int value;</span><br><span class=\"line\"></span><br><span class=\"line\">    private EnumTest(int value) &#123;</span><br><span class=\"line\">        this.value &#x3D; value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public int getValue() &#123;</span><br><span class=\"line\">        return value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public boolean isRest() &#123;</span><br><span class=\"line\">        return false;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">public class Test &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        System.out.println(&quot;EnumTest.FRI 的 value &#x3D; &quot; + EnumTest.FRI.getValue());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">输出结果：</span><br><span class=\"line\">EnumTest.FRI 的 value &#x3D; 5</span><br></pre></td></tr></table></figure>\n<hr>\n<p><strong>EnumSet，EnumMap 的应用</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Test &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        &#x2F;&#x2F; EnumSet的使用</span><br><span class=\"line\">        EnumSet&lt;EnumTest&gt; weekSet &#x3D; EnumSet.allOf(EnumTest.class);</span><br><span class=\"line\">        for (EnumTest day : weekSet) &#123;</span><br><span class=\"line\">            System.out.println(day);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#x2F;&#x2F; EnumMap的使用</span><br><span class=\"line\">        EnumMap&lt;EnumTest, String&gt; weekMap &#x3D; new EnumMap(EnumTest.class);</span><br><span class=\"line\">        weekMap.put(EnumTest.MON, &quot;星期一&quot;);</span><br><span class=\"line\">        weekMap.put(EnumTest.TUE, &quot;星期二&quot;);</span><br><span class=\"line\">        &#x2F;&#x2F; ... ...</span><br><span class=\"line\">        for (Iterator&lt;Entry&lt;EnumTest, String&gt;&gt; iter &#x3D; weekMap.entrySet().iterator(); iter.hasNext();) &#123;</span><br><span class=\"line\">            Entry&lt;EnumTest, String&gt; entry &#x3D; iter.next();</span><br><span class=\"line\">            System.out.println(entry.getKey().name() + &quot;:&quot; + entry.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>原理分析<br>        enum 的语法结构尽管和 class 的语法不一样，但是经过编译器编译之后产生的是一个class文件。该class文件经过反编译可以看到实际上是生成了一个类，该类继承了java.lang.Enum<E>。EnumTest 经过反编译(javap com.hmw.test.EnumTest 命令)之后得到的内容如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class com.hmw.test.EnumTest extends java.lang.Enum&#123;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest MON;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest TUE;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest WED;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest THU;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest FRI;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest SAT;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest SUN;</span><br><span class=\"line\">    static &#123;&#125;;</span><br><span class=\"line\">    public int getValue();</span><br><span class=\"line\">    public boolean isRest();</span><br><span class=\"line\">    public static com.hmw.test.EnumTest[] values();</span><br><span class=\"line\">    public static com.hmw.test.EnumTest valueOf(java.lang.String);</span><br><span class=\"line\">    com.hmw.test.EnumTest(java.lang.String, int, int, com.hmw.test.EnumTest);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>所以，实际上 enum 就是一个 class，只不过 java 编译器帮我们做了语法的解析和编译而已。<br>总结<br>    可以把 enum 看成是一个普通的 class，它们都可以定义一些属性和方法，不同之处是：enum 不能使用 extends 关键字继承其他类，因为 enum 已经继承了 java.lang.Enum（java是单一继承）。</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h3 id=\"java中枚举的使用\"><a href=\"#java中枚举的使用\" class=\"headerlink\" title=\"java中枚举的使用\"></a>java中枚举的使用</h3><p><strong>enum</strong> 的全称为 enumeration 是 JDK 1.5  中引入的新特性，存放在 java.lang 包中。</p>\n<ol>\n<li><p>原始的接口定义常量</p>\n</li>\n<li><p>语法（定义）</p>\n</li>\n<li><p>遍历、switch 等常用操作</p>\n</li>\n<li><p>enum 对象的常用方法介绍</p>\n</li>\n<li><p>给 enum 自定义属性和方法</p>\n</li>\n<li><p>EnumSet，EnumMap 的应用</p>\n</li>\n<li><p>enum 的原理分析</p>\n</li>\n<li><p>总结</p>\n</li>\n</ol>\n<hr>\n<p>原始的接口定义常量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface IConstants &#123;</span><br><span class=\"line\">    String MON &#x3D; &quot;Mon&quot;;</span><br><span class=\"line\">    String TUE &#x3D; &quot;Tue&quot;;</span><br><span class=\"line\">    String WED &#x3D; &quot;Wed&quot;;</span><br><span class=\"line\">    String THU &#x3D; &quot;Thu&quot;;</span><br><span class=\"line\">    String FRI &#x3D; &quot;Fri&quot;;</span><br><span class=\"line\">    String SAT &#x3D; &quot;Sat&quot;;</span><br><span class=\"line\">    String SUN &#x3D; &quot;Sun&quot;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<p><strong>语法（定义）</strong><br> 创建枚举类型要使用 enum 关键字，隐含了所创建的类型都是 java.lang.Enum 类的子类（java.lang.Enum 是一个抽象类）。枚举类型符合通用模式 Class Enum&lt;E extends Enum<E>&gt;，而 E 表示枚举类型的名称。枚举类型的每一个值都将映射到 protected Enum(String name, int ordinal) 构造函数中，在这里，每个值的名称都被转换成一个字符串，并且序数设置表示了此设置被创建的顺序。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.hmw.test;</span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * 枚举测试类</span><br><span class=\"line\"> * @author &lt;a href&#x3D;&quot;mailto:hemingwang0902@126.com&quot;&gt;何明旺&lt;&#x2F;a&gt;</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">public enum EnumTest &#123;</span><br><span class=\"line\">    MON, TUE, WED, THU, FRI, SAT, SUN;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">这段代码实际上调用了7次 Enum(String name, int ordinal)：</span><br><span class=\"line\"></span><br><span class=\"line\">new Enum&lt;EnumTest&gt;(&quot;MON&quot;,0);</span><br><span class=\"line\">new Enum&lt;EnumTest&gt;(&quot;TUE&quot;,1);</span><br><span class=\"line\">new Enum&lt;EnumTest&gt;(&quot;WED&quot;,2);</span><br></pre></td></tr></table></figure>\n<hr>\n<p><strong>遍历、switch 等常用操作</strong></p>\n<p>public class Test {<br>    public static void main(String[] args) {<br>        for (EnumTest e : EnumTest.values()) {<br>            System.out.println(e.toString());<br>        }</p>\n<pre><code>    System.out.println(&quot;----------------我是分隔线------------------&quot;);\n\n    EnumTest test = EnumTest.TUE;\n    switch (test) {\n    case MON:\n        System.out.println(&quot;今天是星期一&quot;);\n        break;\n    case TUE:\n        System.out.println(&quot;今天是星期二&quot;);\n        break;\n    // ... ...\n    default:\n        System.out.println(test);\n        break;\n    }\n}\n}</code></pre><hr>\n<p><strong>enum 对象的常用方法介绍</strong><br>int compareTo(E o)<br>          比较此枚举与指定对象的顺序。</p>\n<p>Class<E> getDeclaringClass()<br>          返回与此枚举常量的枚举类型相对应的 Class 对象。</p>\n<p>String name()<br>          返回此枚举常量的名称，在其枚举声明中对其进行声明。</p>\n<p>int ordinal()<br>          返回枚举常量的序数（它在枚举声明中的位置，其中初始常量序数为零）。</p>\n<p>String toString()</p>\n<pre><code>返回枚举常量的名称，它包含在声明中。</code></pre><p>static &lt;T extends Enum<T>&gt; T valueOf(Class<T> enumType, String name)<br>          返回带指定名称的指定枚举类型的枚举常量。</p>\n<hr>\n<p><strong>给 enum 自定义属性和方法</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">给 enum 对象加一下 value 的属性和 getValue() 的方法：</span><br><span class=\"line\"></span><br><span class=\"line\">package com.hmw.test;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * 枚举测试类</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * @author &lt;a href&#x3D;&quot;mailto:hemingwang0902@126.com&quot;&gt;何明旺&lt;&#x2F;a&gt;</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">public enum EnumTest &#123;</span><br><span class=\"line\">    MON(1), TUE(2), WED(3), THU(4), FRI(5), SAT(6) &#123;</span><br><span class=\"line\">        @Override</span><br><span class=\"line\">        public boolean isRest() &#123;</span><br><span class=\"line\">            return true;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    SUN(0) &#123;</span><br><span class=\"line\">        @Override</span><br><span class=\"line\">        public boolean isRest() &#123;</span><br><span class=\"line\">            return true;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    private int value;</span><br><span class=\"line\"></span><br><span class=\"line\">    private EnumTest(int value) &#123;</span><br><span class=\"line\">        this.value &#x3D; value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public int getValue() &#123;</span><br><span class=\"line\">        return value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public boolean isRest() &#123;</span><br><span class=\"line\">        return false;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">public class Test &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        System.out.println(&quot;EnumTest.FRI 的 value &#x3D; &quot; + EnumTest.FRI.getValue());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">输出结果：</span><br><span class=\"line\">EnumTest.FRI 的 value &#x3D; 5</span><br></pre></td></tr></table></figure>\n<hr>\n<p><strong>EnumSet，EnumMap 的应用</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class Test &#123;</span><br><span class=\"line\">    public static void main(String[] args) &#123;</span><br><span class=\"line\">        &#x2F;&#x2F; EnumSet的使用</span><br><span class=\"line\">        EnumSet&lt;EnumTest&gt; weekSet &#x3D; EnumSet.allOf(EnumTest.class);</span><br><span class=\"line\">        for (EnumTest day : weekSet) &#123;</span><br><span class=\"line\">            System.out.println(day);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#x2F;&#x2F; EnumMap的使用</span><br><span class=\"line\">        EnumMap&lt;EnumTest, String&gt; weekMap &#x3D; new EnumMap(EnumTest.class);</span><br><span class=\"line\">        weekMap.put(EnumTest.MON, &quot;星期一&quot;);</span><br><span class=\"line\">        weekMap.put(EnumTest.TUE, &quot;星期二&quot;);</span><br><span class=\"line\">        &#x2F;&#x2F; ... ...</span><br><span class=\"line\">        for (Iterator&lt;Entry&lt;EnumTest, String&gt;&gt; iter &#x3D; weekMap.entrySet().iterator(); iter.hasNext();) &#123;</span><br><span class=\"line\">            Entry&lt;EnumTest, String&gt; entry &#x3D; iter.next();</span><br><span class=\"line\">            System.out.println(entry.getKey().name() + &quot;:&quot; + entry.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>原理分析<br>        enum 的语法结构尽管和 class 的语法不一样，但是经过编译器编译之后产生的是一个class文件。该class文件经过反编译可以看到实际上是生成了一个类，该类继承了java.lang.Enum<E>。EnumTest 经过反编译(javap com.hmw.test.EnumTest 命令)之后得到的内容如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class com.hmw.test.EnumTest extends java.lang.Enum&#123;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest MON;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest TUE;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest WED;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest THU;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest FRI;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest SAT;</span><br><span class=\"line\">    public static final com.hmw.test.EnumTest SUN;</span><br><span class=\"line\">    static &#123;&#125;;</span><br><span class=\"line\">    public int getValue();</span><br><span class=\"line\">    public boolean isRest();</span><br><span class=\"line\">    public static com.hmw.test.EnumTest[] values();</span><br><span class=\"line\">    public static com.hmw.test.EnumTest valueOf(java.lang.String);</span><br><span class=\"line\">    com.hmw.test.EnumTest(java.lang.String, int, int, com.hmw.test.EnumTest);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>所以，实际上 enum 就是一个 class，只不过 java 编译器帮我们做了语法的解析和编译而已。<br>总结<br>    可以把 enum 看成是一个普通的 class，它们都可以定义一些属性和方法，不同之处是：enum 不能使用 extends 关键字继承其他类，因为 enum 已经继承了 java.lang.Enum（java是单一继承）。</p>"},{"title":"List学习","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n<!--more-->\n\n### List学习\n `ArrayList不是线程安全的，只能用在单线程环境下，多线程环境下可以考虑用Collections.synchronizedList(List l)函数返回一个线程安全的ArrayList类，也可以使用concurrent并发包下的CopyOnWriteArrayList类`\n\nArrayList实现了Serializable接口，因此它支持序列化，能够通过序列化传输，实现了RandomAccess接口，支持快速随机访问，实际上就是通过下标序号进行快速访问，实现了Cloneable接口，能被克隆。\n\n每个ArrayList实例都有一个容量，该容量是指用来存储列表元素的数组的大小。它总是至少等于列表的大小。随着向ArrayList中不断添加元素，其容量也自动增长。自动增长会带来数据向新数组的重新拷贝，因此，如果可预知数据量的多少，可在构造ArrayList时指定其容量。在添加大量元素前，应用程序也可以使用ensureCapacity操作来增加ArrayList实例的容量，这可以减少递增式再分配的数量。\n每个ArrayList实例都有一个容量，该容量是指用来存储列表元素的数组的大小。它总是至少等于列表的大小。随着向ArrayList中不断添加元素，其容量也自动增长。自动增长会带来数据向新数组的重新拷贝，因此，如果可预知数据量的多少，可在构造ArrayList时指定其容量。在添加大量元素前，应用程序也可以使用ensureCapacity操作来增加ArrayList实例的容量，这可以减少递增式再分配的数量。\n从上述代码中可以看出，数组进行扩容时，会将老数组中的元素重新拷贝一份到新的数组中，每次数组容量的增长大约是其原容量的1.5倍。这种操作的代价是很高的，因此在实际使用时，我们应该尽量避免数组容量的扩张。当我们可预知要保存的元素的多少时，要在构造ArrayList实例时，就指定其容量，以避免数组扩容的发生。或者根据实际需求，通过调用ensureCapacity方法来手动增加ArrayList实例的容量。\n\nObject oldData[] = elementData;//为什么要用到oldData[]\n乍一看来后面并没有用到关于oldData， 这句话显得多此一举！但是这是一个牵涉到内存管理的类， 所以要了解内部的问题。 而且为什么这一句还在if的内部，这跟elementData = Arrays.copyOf(elementData, newCapacity); 这句是有关系的，下面这句Arrays.copyOf的实现时新创建了newCapacity大小的内存，然后把老的elementData放入。好像也没有用到oldData，有什么问题呢。问题就在于旧的内存的引用是elementData， elementData指向了新的内存块，如果有一个局部变量oldData变量引用旧的内存块的话，在copy的过程中就会比较安全，因为这样证明这块老的内存依然有引用，分配内存的时候就不会被侵占掉，然后copy完成后这个局部变量的生命期也过去了，然后释放才是安全的。不然在copy的的时候万一新的内存或其他线程的分配内存侵占了这块老的内存，而copy还没有结束，这将是个严重的事情。 关于ArrayList和Vector区别如下：\n\n    ArrayList在内存不够时默认是扩展50% + 1个，Vector是默认扩展1倍。\n    Vector提供indexOf(obj, start)接口，ArrayList没有。\n    Vector属于线程安全级别的，但是大多数情况下不使用Vector，因为线程安全需要更大的系统开销。\n\n\n\n ArrayList还给我们提供了将底层数组的容量调整为当前列表保存的实际元素的大小的功能。它可以通过trimToSize方法来实现。代码如下：\n\n关于ArrayList的源码，给出几点比较重要的总结：\n\n    1、注意其三个不同的构造方法。无参构造方法构造的ArrayList的容量默认为10，带有Collection参数的构造方法，将Collection转化为数组赋给ArrayList的实现数组elementData。\n\n    2、注意扩充容量的方法ensureCapacity。ArrayList在每次增加元素（可能是1个，也可能是一组）时，都要调用该方法来确保足够的容量。当容量不足以容纳当前的元素个数时，就设置新的容量为旧的容量的1.5倍加1，如果设置后的新容量还不够，则直接新容量设置为传入的参数（也就是所需的容量），而后用Arrays.copyof()方法将元素拷贝到新的数组（详见下面的第3点）。从中可以看出，当容量不够时，每次增加元素，都要将原来的元素拷贝到一个新的数组中，非常之耗时，也因此建议在事先能确定元素数量的情况下，才使用ArrayList，否则建议使用LinkedList。\n\n    3、ArrayList的实现中大量地调用了Arrays.copyof()和System.arraycopy()方法。我们有必要对这两个方法的实现做下深入的了解。\n\nhttp://www.cnblogs.com/ITtangtang/p/3948555.html\n\n\n. LinkedList是用链表结构存储数据的，很适合数据的动态插入和删除，随机访问和遍历速度比较慢。另外，接口中没有定义的方法get，remove，insertList，专门用于操作表头和表尾元素，可以当作堆栈、队列和双向队列使用。LinkedList没有同步方法。如果多个线程同时访问一个List，则必须自己实现访问同步。一种解决方法是在创建 List时构造一个同步的List：\n             List list = Collections.synchronizedList(new LinkedList(...));\n\n查看Java源代码，发现当数组的大小不够的时候，\n需要重新建立数组，然后将元素拷贝到新的数组内，ArrayList和Vector的扩展数组的大小不同。\n\nhttp://www.tuicool.com/articles/iQZBFb\n\n\nhttp://www.cnblogs.com/azai/archive/2010/12/09/1901272.html\n\n---\n#### 简化\n+ Collections.synchronizedList(List l)\n+ Serializable 、RandomAccess 、Cloneable\n+ ensureCapacity\n\n  从上面的源码剖析可以看出这三种List实现的一些典型适用场景，如果经常对数组做随机插入操作，特别是插入的比较靠前，那么LinkedList的性能优势就非常明显，而如果都只是末尾插入，则ArrayList更占据优势，如果需要线程安全，则使用Vector或者创建线程安全的ArrayList。\n\n在使用基于数组实现的ArrayList 和Vector 时我们要指定初始容量，因为我们在源码中也看到了，在添加时首先要进行容量的判断，如果容量不够则要创建新数组，还要将原来数组中的数据复制到新数组中，这个过程会减低效率并且会浪费资源。","source":"_posts/王阁/技术/hexo/oldblog/blog4.md","raw":"---\n\ntitle: List学习\ndate: 2019-07-16\ntags:\n\n---\n此处简介\n<!--more-->\n\n### List学习\n `ArrayList不是线程安全的，只能用在单线程环境下，多线程环境下可以考虑用Collections.synchronizedList(List l)函数返回一个线程安全的ArrayList类，也可以使用concurrent并发包下的CopyOnWriteArrayList类`\n\nArrayList实现了Serializable接口，因此它支持序列化，能够通过序列化传输，实现了RandomAccess接口，支持快速随机访问，实际上就是通过下标序号进行快速访问，实现了Cloneable接口，能被克隆。\n\n每个ArrayList实例都有一个容量，该容量是指用来存储列表元素的数组的大小。它总是至少等于列表的大小。随着向ArrayList中不断添加元素，其容量也自动增长。自动增长会带来数据向新数组的重新拷贝，因此，如果可预知数据量的多少，可在构造ArrayList时指定其容量。在添加大量元素前，应用程序也可以使用ensureCapacity操作来增加ArrayList实例的容量，这可以减少递增式再分配的数量。\n每个ArrayList实例都有一个容量，该容量是指用来存储列表元素的数组的大小。它总是至少等于列表的大小。随着向ArrayList中不断添加元素，其容量也自动增长。自动增长会带来数据向新数组的重新拷贝，因此，如果可预知数据量的多少，可在构造ArrayList时指定其容量。在添加大量元素前，应用程序也可以使用ensureCapacity操作来增加ArrayList实例的容量，这可以减少递增式再分配的数量。\n从上述代码中可以看出，数组进行扩容时，会将老数组中的元素重新拷贝一份到新的数组中，每次数组容量的增长大约是其原容量的1.5倍。这种操作的代价是很高的，因此在实际使用时，我们应该尽量避免数组容量的扩张。当我们可预知要保存的元素的多少时，要在构造ArrayList实例时，就指定其容量，以避免数组扩容的发生。或者根据实际需求，通过调用ensureCapacity方法来手动增加ArrayList实例的容量。\n\nObject oldData[] = elementData;//为什么要用到oldData[]\n乍一看来后面并没有用到关于oldData， 这句话显得多此一举！但是这是一个牵涉到内存管理的类， 所以要了解内部的问题。 而且为什么这一句还在if的内部，这跟elementData = Arrays.copyOf(elementData, newCapacity); 这句是有关系的，下面这句Arrays.copyOf的实现时新创建了newCapacity大小的内存，然后把老的elementData放入。好像也没有用到oldData，有什么问题呢。问题就在于旧的内存的引用是elementData， elementData指向了新的内存块，如果有一个局部变量oldData变量引用旧的内存块的话，在copy的过程中就会比较安全，因为这样证明这块老的内存依然有引用，分配内存的时候就不会被侵占掉，然后copy完成后这个局部变量的生命期也过去了，然后释放才是安全的。不然在copy的的时候万一新的内存或其他线程的分配内存侵占了这块老的内存，而copy还没有结束，这将是个严重的事情。 关于ArrayList和Vector区别如下：\n\n    ArrayList在内存不够时默认是扩展50% + 1个，Vector是默认扩展1倍。\n    Vector提供indexOf(obj, start)接口，ArrayList没有。\n    Vector属于线程安全级别的，但是大多数情况下不使用Vector，因为线程安全需要更大的系统开销。\n\n\n\n ArrayList还给我们提供了将底层数组的容量调整为当前列表保存的实际元素的大小的功能。它可以通过trimToSize方法来实现。代码如下：\n\n关于ArrayList的源码，给出几点比较重要的总结：\n\n    1、注意其三个不同的构造方法。无参构造方法构造的ArrayList的容量默认为10，带有Collection参数的构造方法，将Collection转化为数组赋给ArrayList的实现数组elementData。\n\n    2、注意扩充容量的方法ensureCapacity。ArrayList在每次增加元素（可能是1个，也可能是一组）时，都要调用该方法来确保足够的容量。当容量不足以容纳当前的元素个数时，就设置新的容量为旧的容量的1.5倍加1，如果设置后的新容量还不够，则直接新容量设置为传入的参数（也就是所需的容量），而后用Arrays.copyof()方法将元素拷贝到新的数组（详见下面的第3点）。从中可以看出，当容量不够时，每次增加元素，都要将原来的元素拷贝到一个新的数组中，非常之耗时，也因此建议在事先能确定元素数量的情况下，才使用ArrayList，否则建议使用LinkedList。\n\n    3、ArrayList的实现中大量地调用了Arrays.copyof()和System.arraycopy()方法。我们有必要对这两个方法的实现做下深入的了解。\n\nhttp://www.cnblogs.com/ITtangtang/p/3948555.html\n\n\n. LinkedList是用链表结构存储数据的，很适合数据的动态插入和删除，随机访问和遍历速度比较慢。另外，接口中没有定义的方法get，remove，insertList，专门用于操作表头和表尾元素，可以当作堆栈、队列和双向队列使用。LinkedList没有同步方法。如果多个线程同时访问一个List，则必须自己实现访问同步。一种解决方法是在创建 List时构造一个同步的List：\n             List list = Collections.synchronizedList(new LinkedList(...));\n\n查看Java源代码，发现当数组的大小不够的时候，\n需要重新建立数组，然后将元素拷贝到新的数组内，ArrayList和Vector的扩展数组的大小不同。\n\nhttp://www.tuicool.com/articles/iQZBFb\n\n\nhttp://www.cnblogs.com/azai/archive/2010/12/09/1901272.html\n\n---\n#### 简化\n+ Collections.synchronizedList(List l)\n+ Serializable 、RandomAccess 、Cloneable\n+ ensureCapacity\n\n  从上面的源码剖析可以看出这三种List实现的一些典型适用场景，如果经常对数组做随机插入操作，特别是插入的比较靠前，那么LinkedList的性能优势就非常明显，而如果都只是末尾插入，则ArrayList更占据优势，如果需要线程安全，则使用Vector或者创建线程安全的ArrayList。\n\n在使用基于数组实现的ArrayList 和Vector 时我们要指定初始容量，因为我们在源码中也看到了，在添加时首先要进行容量的判断，如果容量不够则要创建新数组，还要将原来数组中的数据复制到新数组中，这个过程会减低效率并且会浪费资源。","slug":"王阁/技术/hexo/oldblog/blog4","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg50051u6pw6m44gngy","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h3 id=\"List学习\"><a href=\"#List学习\" class=\"headerlink\" title=\"List学习\"></a>List学习</h3><p> <code>ArrayList不是线程安全的，只能用在单线程环境下，多线程环境下可以考虑用Collections.synchronizedList(List l)函数返回一个线程安全的ArrayList类，也可以使用concurrent并发包下的CopyOnWriteArrayList类</code></p>\n<p>ArrayList实现了Serializable接口，因此它支持序列化，能够通过序列化传输，实现了RandomAccess接口，支持快速随机访问，实际上就是通过下标序号进行快速访问，实现了Cloneable接口，能被克隆。</p>\n<p>每个ArrayList实例都有一个容量，该容量是指用来存储列表元素的数组的大小。它总是至少等于列表的大小。随着向ArrayList中不断添加元素，其容量也自动增长。自动增长会带来数据向新数组的重新拷贝，因此，如果可预知数据量的多少，可在构造ArrayList时指定其容量。在添加大量元素前，应用程序也可以使用ensureCapacity操作来增加ArrayList实例的容量，这可以减少递增式再分配的数量。<br>每个ArrayList实例都有一个容量，该容量是指用来存储列表元素的数组的大小。它总是至少等于列表的大小。随着向ArrayList中不断添加元素，其容量也自动增长。自动增长会带来数据向新数组的重新拷贝，因此，如果可预知数据量的多少，可在构造ArrayList时指定其容量。在添加大量元素前，应用程序也可以使用ensureCapacity操作来增加ArrayList实例的容量，这可以减少递增式再分配的数量。<br>从上述代码中可以看出，数组进行扩容时，会将老数组中的元素重新拷贝一份到新的数组中，每次数组容量的增长大约是其原容量的1.5倍。这种操作的代价是很高的，因此在实际使用时，我们应该尽量避免数组容量的扩张。当我们可预知要保存的元素的多少时，要在构造ArrayList实例时，就指定其容量，以避免数组扩容的发生。或者根据实际需求，通过调用ensureCapacity方法来手动增加ArrayList实例的容量。</p>\n<p>Object oldData[] = elementData;//为什么要用到oldData[]<br>乍一看来后面并没有用到关于oldData， 这句话显得多此一举！但是这是一个牵涉到内存管理的类， 所以要了解内部的问题。 而且为什么这一句还在if的内部，这跟elementData = Arrays.copyOf(elementData, newCapacity); 这句是有关系的，下面这句Arrays.copyOf的实现时新创建了newCapacity大小的内存，然后把老的elementData放入。好像也没有用到oldData，有什么问题呢。问题就在于旧的内存的引用是elementData， elementData指向了新的内存块，如果有一个局部变量oldData变量引用旧的内存块的话，在copy的过程中就会比较安全，因为这样证明这块老的内存依然有引用，分配内存的时候就不会被侵占掉，然后copy完成后这个局部变量的生命期也过去了，然后释放才是安全的。不然在copy的的时候万一新的内存或其他线程的分配内存侵占了这块老的内存，而copy还没有结束，这将是个严重的事情。 关于ArrayList和Vector区别如下：</p>\n<pre><code>ArrayList在内存不够时默认是扩展50% + 1个，Vector是默认扩展1倍。\nVector提供indexOf(obj, start)接口，ArrayList没有。\nVector属于线程安全级别的，但是大多数情况下不使用Vector，因为线程安全需要更大的系统开销。</code></pre><p> ArrayList还给我们提供了将底层数组的容量调整为当前列表保存的实际元素的大小的功能。它可以通过trimToSize方法来实现。代码如下：</p>\n<p>关于ArrayList的源码，给出几点比较重要的总结：</p>\n<pre><code>1、注意其三个不同的构造方法。无参构造方法构造的ArrayList的容量默认为10，带有Collection参数的构造方法，将Collection转化为数组赋给ArrayList的实现数组elementData。\n\n2、注意扩充容量的方法ensureCapacity。ArrayList在每次增加元素（可能是1个，也可能是一组）时，都要调用该方法来确保足够的容量。当容量不足以容纳当前的元素个数时，就设置新的容量为旧的容量的1.5倍加1，如果设置后的新容量还不够，则直接新容量设置为传入的参数（也就是所需的容量），而后用Arrays.copyof()方法将元素拷贝到新的数组（详见下面的第3点）。从中可以看出，当容量不够时，每次增加元素，都要将原来的元素拷贝到一个新的数组中，非常之耗时，也因此建议在事先能确定元素数量的情况下，才使用ArrayList，否则建议使用LinkedList。\n\n3、ArrayList的实现中大量地调用了Arrays.copyof()和System.arraycopy()方法。我们有必要对这两个方法的实现做下深入的了解。</code></pre><p><a href=\"http://www.cnblogs.com/ITtangtang/p/3948555.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/ITtangtang/p/3948555.html</a></p>\n<p>. LinkedList是用链表结构存储数据的，很适合数据的动态插入和删除，随机访问和遍历速度比较慢。另外，接口中没有定义的方法get，remove，insertList，专门用于操作表头和表尾元素，可以当作堆栈、队列和双向队列使用。LinkedList没有同步方法。如果多个线程同时访问一个List，则必须自己实现访问同步。一种解决方法是在创建 List时构造一个同步的List：<br>             List list = Collections.synchronizedList(new LinkedList(…));</p>\n<p>查看Java源代码，发现当数组的大小不够的时候，<br>需要重新建立数组，然后将元素拷贝到新的数组内，ArrayList和Vector的扩展数组的大小不同。</p>\n<p><a href=\"http://www.tuicool.com/articles/iQZBFb\" target=\"_blank\" rel=\"noopener\">http://www.tuicool.com/articles/iQZBFb</a></p>\n<p><a href=\"http://www.cnblogs.com/azai/archive/2010/12/09/1901272.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/azai/archive/2010/12/09/1901272.html</a></p>\n<hr>\n<h4 id=\"简化\"><a href=\"#简化\" class=\"headerlink\" title=\"简化\"></a>简化</h4><ul>\n<li><p>Collections.synchronizedList(List l)</p>\n</li>\n<li><p>Serializable 、RandomAccess 、Cloneable</p>\n</li>\n<li><p>ensureCapacity</p>\n<p>从上面的源码剖析可以看出这三种List实现的一些典型适用场景，如果经常对数组做随机插入操作，特别是插入的比较靠前，那么LinkedList的性能优势就非常明显，而如果都只是末尾插入，则ArrayList更占据优势，如果需要线程安全，则使用Vector或者创建线程安全的ArrayList。</p>\n</li>\n</ul>\n<p>在使用基于数组实现的ArrayList 和Vector 时我们要指定初始容量，因为我们在源码中也看到了，在添加时首先要进行容量的判断，如果容量不够则要创建新数组，还要将原来数组中的数据复制到新数组中，这个过程会减低效率并且会浪费资源。</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h3 id=\"List学习\"><a href=\"#List学习\" class=\"headerlink\" title=\"List学习\"></a>List学习</h3><p> <code>ArrayList不是线程安全的，只能用在单线程环境下，多线程环境下可以考虑用Collections.synchronizedList(List l)函数返回一个线程安全的ArrayList类，也可以使用concurrent并发包下的CopyOnWriteArrayList类</code></p>\n<p>ArrayList实现了Serializable接口，因此它支持序列化，能够通过序列化传输，实现了RandomAccess接口，支持快速随机访问，实际上就是通过下标序号进行快速访问，实现了Cloneable接口，能被克隆。</p>\n<p>每个ArrayList实例都有一个容量，该容量是指用来存储列表元素的数组的大小。它总是至少等于列表的大小。随着向ArrayList中不断添加元素，其容量也自动增长。自动增长会带来数据向新数组的重新拷贝，因此，如果可预知数据量的多少，可在构造ArrayList时指定其容量。在添加大量元素前，应用程序也可以使用ensureCapacity操作来增加ArrayList实例的容量，这可以减少递增式再分配的数量。<br>每个ArrayList实例都有一个容量，该容量是指用来存储列表元素的数组的大小。它总是至少等于列表的大小。随着向ArrayList中不断添加元素，其容量也自动增长。自动增长会带来数据向新数组的重新拷贝，因此，如果可预知数据量的多少，可在构造ArrayList时指定其容量。在添加大量元素前，应用程序也可以使用ensureCapacity操作来增加ArrayList实例的容量，这可以减少递增式再分配的数量。<br>从上述代码中可以看出，数组进行扩容时，会将老数组中的元素重新拷贝一份到新的数组中，每次数组容量的增长大约是其原容量的1.5倍。这种操作的代价是很高的，因此在实际使用时，我们应该尽量避免数组容量的扩张。当我们可预知要保存的元素的多少时，要在构造ArrayList实例时，就指定其容量，以避免数组扩容的发生。或者根据实际需求，通过调用ensureCapacity方法来手动增加ArrayList实例的容量。</p>\n<p>Object oldData[] = elementData;//为什么要用到oldData[]<br>乍一看来后面并没有用到关于oldData， 这句话显得多此一举！但是这是一个牵涉到内存管理的类， 所以要了解内部的问题。 而且为什么这一句还在if的内部，这跟elementData = Arrays.copyOf(elementData, newCapacity); 这句是有关系的，下面这句Arrays.copyOf的实现时新创建了newCapacity大小的内存，然后把老的elementData放入。好像也没有用到oldData，有什么问题呢。问题就在于旧的内存的引用是elementData， elementData指向了新的内存块，如果有一个局部变量oldData变量引用旧的内存块的话，在copy的过程中就会比较安全，因为这样证明这块老的内存依然有引用，分配内存的时候就不会被侵占掉，然后copy完成后这个局部变量的生命期也过去了，然后释放才是安全的。不然在copy的的时候万一新的内存或其他线程的分配内存侵占了这块老的内存，而copy还没有结束，这将是个严重的事情。 关于ArrayList和Vector区别如下：</p>\n<pre><code>ArrayList在内存不够时默认是扩展50% + 1个，Vector是默认扩展1倍。\nVector提供indexOf(obj, start)接口，ArrayList没有。\nVector属于线程安全级别的，但是大多数情况下不使用Vector，因为线程安全需要更大的系统开销。</code></pre><p> ArrayList还给我们提供了将底层数组的容量调整为当前列表保存的实际元素的大小的功能。它可以通过trimToSize方法来实现。代码如下：</p>\n<p>关于ArrayList的源码，给出几点比较重要的总结：</p>\n<pre><code>1、注意其三个不同的构造方法。无参构造方法构造的ArrayList的容量默认为10，带有Collection参数的构造方法，将Collection转化为数组赋给ArrayList的实现数组elementData。\n\n2、注意扩充容量的方法ensureCapacity。ArrayList在每次增加元素（可能是1个，也可能是一组）时，都要调用该方法来确保足够的容量。当容量不足以容纳当前的元素个数时，就设置新的容量为旧的容量的1.5倍加1，如果设置后的新容量还不够，则直接新容量设置为传入的参数（也就是所需的容量），而后用Arrays.copyof()方法将元素拷贝到新的数组（详见下面的第3点）。从中可以看出，当容量不够时，每次增加元素，都要将原来的元素拷贝到一个新的数组中，非常之耗时，也因此建议在事先能确定元素数量的情况下，才使用ArrayList，否则建议使用LinkedList。\n\n3、ArrayList的实现中大量地调用了Arrays.copyof()和System.arraycopy()方法。我们有必要对这两个方法的实现做下深入的了解。</code></pre><p><a href=\"http://www.cnblogs.com/ITtangtang/p/3948555.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/ITtangtang/p/3948555.html</a></p>\n<p>. LinkedList是用链表结构存储数据的，很适合数据的动态插入和删除，随机访问和遍历速度比较慢。另外，接口中没有定义的方法get，remove，insertList，专门用于操作表头和表尾元素，可以当作堆栈、队列和双向队列使用。LinkedList没有同步方法。如果多个线程同时访问一个List，则必须自己实现访问同步。一种解决方法是在创建 List时构造一个同步的List：<br>             List list = Collections.synchronizedList(new LinkedList(…));</p>\n<p>查看Java源代码，发现当数组的大小不够的时候，<br>需要重新建立数组，然后将元素拷贝到新的数组内，ArrayList和Vector的扩展数组的大小不同。</p>\n<p><a href=\"http://www.tuicool.com/articles/iQZBFb\" target=\"_blank\" rel=\"noopener\">http://www.tuicool.com/articles/iQZBFb</a></p>\n<p><a href=\"http://www.cnblogs.com/azai/archive/2010/12/09/1901272.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/azai/archive/2010/12/09/1901272.html</a></p>\n<hr>\n<h4 id=\"简化\"><a href=\"#简化\" class=\"headerlink\" title=\"简化\"></a>简化</h4><ul>\n<li><p>Collections.synchronizedList(List l)</p>\n</li>\n<li><p>Serializable 、RandomAccess 、Cloneable</p>\n</li>\n<li><p>ensureCapacity</p>\n<p>从上面的源码剖析可以看出这三种List实现的一些典型适用场景，如果经常对数组做随机插入操作，特别是插入的比较靠前，那么LinkedList的性能优势就非常明显，而如果都只是末尾插入，则ArrayList更占据优势，如果需要线程安全，则使用Vector或者创建线程安全的ArrayList。</p>\n</li>\n</ul>\n<p>在使用基于数组实现的ArrayList 和Vector 时我们要指定初始容量，因为我们在源码中也看到了，在添加时首先要进行容量的判断，如果容量不够则要创建新数组，还要将原来数组中的数据复制到新数组中，这个过程会减低效率并且会浪费资源。</p>"},{"title":"map总结","date":"2019-07-15T16:00:00.000Z","_content":"\n此处简介\n\n<!--more-->\n\n### map总结\n\nHashtable\n├-HashMap\n└-WeakHashMap\n\n\n通用Map，用于在应用程序中管理映射，通常在 java.util 程序包中实现\n\n+ HashMap\n+ Hashtable\n+ Properties\n+ LinkedHashMap\n+ IdentityHashMap\n+ TreeMap\n+ WeakHashMap\n+ ConcurrentHashMap\n\n\n**HashMap**\n\n```\n最常用的Map,它根据键的HashCode 值存储数据,根据键可以直接获取它的值，具有很快的访问速度。HashMap最多只允许一条记录的键为Null(多条会覆盖);允许多条记录的值为 Null。非同步的。\n```\n\n**Hashtable**\n\n```\n与 HashMap类似,不同的是:key和value的值均不允许为null;它支持线程的同步，即任一时刻只有一个线程能写Hashtable,因此也导致了Hashtale在写入时会比较慢。\nLinkedHashMap\n\n保存了记录的插入顺序，在用Iterator遍历LinkedHashMap时，先得到的记录肯定是先插入的.在遍历的时候会比HashMap慢。key和value均允许为空，非同步的。\n```\n**TreeMap**\n\n![d98ba033b20b4f48a430419e96e98fa3-image.png](//img.wqkenqing.ren//file/2017/7/d98ba033b20b4f48a430419e96e98fa3-image.png)\n\n\n\n\n    + 增强for循环使用方便，但性能较差，不适合处理超大量级的数据。\n    + 迭代器的遍历速度要比增强for循环快很多，是增强for循环的2倍左右。\n    + 使用entrySet遍历的速度要比keySet快很多，是keySet的1.5倍左右。","source":"_posts/王阁/技术/hexo/oldblog/blog9.md","raw":"\n---\n\ntitle: map总结\ndate: 2019-07-16\ntags:\n\n---\n\n此处简介\n\n<!--more-->\n\n### map总结\n\nHashtable\n├-HashMap\n└-WeakHashMap\n\n\n通用Map，用于在应用程序中管理映射，通常在 java.util 程序包中实现\n\n+ HashMap\n+ Hashtable\n+ Properties\n+ LinkedHashMap\n+ IdentityHashMap\n+ TreeMap\n+ WeakHashMap\n+ ConcurrentHashMap\n\n\n**HashMap**\n\n```\n最常用的Map,它根据键的HashCode 值存储数据,根据键可以直接获取它的值，具有很快的访问速度。HashMap最多只允许一条记录的键为Null(多条会覆盖);允许多条记录的值为 Null。非同步的。\n```\n\n**Hashtable**\n\n```\n与 HashMap类似,不同的是:key和value的值均不允许为null;它支持线程的同步，即任一时刻只有一个线程能写Hashtable,因此也导致了Hashtale在写入时会比较慢。\nLinkedHashMap\n\n保存了记录的插入顺序，在用Iterator遍历LinkedHashMap时，先得到的记录肯定是先插入的.在遍历的时候会比HashMap慢。key和value均允许为空，非同步的。\n```\n**TreeMap**\n\n![d98ba033b20b4f48a430419e96e98fa3-image.png](//img.wqkenqing.ren//file/2017/7/d98ba033b20b4f48a430419e96e98fa3-image.png)\n\n\n\n\n    + 增强for循环使用方便，但性能较差，不适合处理超大量级的数据。\n    + 迭代器的遍历速度要比增强for循环快很多，是增强for循环的2倍左右。\n    + 使用entrySet遍历的速度要比keySet快很多，是keySet的1.5倍左右。","slug":"王阁/技术/hexo/oldblog/blog9","published":1,"updated":"2023-02-23T02:51:20.907Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg50053u6pw8cpr3xj7","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h3 id=\"map总结\"><a href=\"#map总结\" class=\"headerlink\" title=\"map总结\"></a>map总结</h3><p>Hashtable<br>├-HashMap<br>└-WeakHashMap</p>\n<p>通用Map，用于在应用程序中管理映射，通常在 java.util 程序包中实现</p>\n<ul>\n<li>HashMap</li>\n<li>Hashtable</li>\n<li>Properties</li>\n<li>LinkedHashMap</li>\n<li>IdentityHashMap</li>\n<li>TreeMap</li>\n<li>WeakHashMap</li>\n<li>ConcurrentHashMap</li>\n</ul>\n<p><strong>HashMap</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">最常用的Map,它根据键的HashCode 值存储数据,根据键可以直接获取它的值，具有很快的访问速度。HashMap最多只允许一条记录的键为Null(多条会覆盖);允许多条记录的值为 Null。非同步的。</span><br></pre></td></tr></table></figure>\n\n<p><strong>Hashtable</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">与 HashMap类似,不同的是:key和value的值均不允许为null;它支持线程的同步，即任一时刻只有一个线程能写Hashtable,因此也导致了Hashtale在写入时会比较慢。</span><br><span class=\"line\">LinkedHashMap</span><br><span class=\"line\"></span><br><span class=\"line\">保存了记录的插入顺序，在用Iterator遍历LinkedHashMap时，先得到的记录肯定是先插入的.在遍历的时候会比HashMap慢。key和value均允许为空，非同步的。</span><br></pre></td></tr></table></figure>\n<p><strong>TreeMap</strong></p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/7/d98ba033b20b4f48a430419e96e98fa3-image.png\" alt=\"d98ba033b20b4f48a430419e96e98fa3-image.png\"></p>\n<pre><code>+ 增强for循环使用方便，但性能较差，不适合处理超大量级的数据。\n+ 迭代器的遍历速度要比增强for循环快很多，是增强for循环的2倍左右。\n+ 使用entrySet遍历的速度要比keySet快很多，是keySet的1.5倍左右。</code></pre>","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h3 id=\"map总结\"><a href=\"#map总结\" class=\"headerlink\" title=\"map总结\"></a>map总结</h3><p>Hashtable<br>├-HashMap<br>└-WeakHashMap</p>\n<p>通用Map，用于在应用程序中管理映射，通常在 java.util 程序包中实现</p>\n<ul>\n<li>HashMap</li>\n<li>Hashtable</li>\n<li>Properties</li>\n<li>LinkedHashMap</li>\n<li>IdentityHashMap</li>\n<li>TreeMap</li>\n<li>WeakHashMap</li>\n<li>ConcurrentHashMap</li>\n</ul>\n<p><strong>HashMap</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">最常用的Map,它根据键的HashCode 值存储数据,根据键可以直接获取它的值，具有很快的访问速度。HashMap最多只允许一条记录的键为Null(多条会覆盖);允许多条记录的值为 Null。非同步的。</span><br></pre></td></tr></table></figure>\n\n<p><strong>Hashtable</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">与 HashMap类似,不同的是:key和value的值均不允许为null;它支持线程的同步，即任一时刻只有一个线程能写Hashtable,因此也导致了Hashtale在写入时会比较慢。</span><br><span class=\"line\">LinkedHashMap</span><br><span class=\"line\"></span><br><span class=\"line\">保存了记录的插入顺序，在用Iterator遍历LinkedHashMap时，先得到的记录肯定是先插入的.在遍历的时候会比HashMap慢。key和value均允许为空，非同步的。</span><br></pre></td></tr></table></figure>\n<p><strong>TreeMap</strong></p>\n<p><img src=\"//img.wqkenqing.ren//file/2017/7/d98ba033b20b4f48a430419e96e98fa3-image.png\" alt=\"d98ba033b20b4f48a430419e96e98fa3-image.png\"></p>\n<pre><code>+ 增强for循环使用方便，但性能较差，不适合处理超大量级的数据。\n+ 迭代器的遍历速度要比增强for循环快很多，是增强for循环的2倍左右。\n+ 使用entrySet遍历的速度要比keySet快很多，是keySet的1.5倍左右。</code></pre>"},{"title":"java中的形参与实参的理解","date":"2019-07-15T16:00:00.000Z","_content":"此处简介\n\n<!--more-->\n\n## java中的形参与实参的理解\n#### 值传递：\n方法调用时，实际参数把它的值传递给对应的形式参数，函数接收的是原始值的一个copy，此时内存中存在两个相等的基本类型，即实际参数和形式参数，后面方法中的操作都是对形参这个值的修改，不影响实际参数的值。\n#### 引用传递：\n也称为传地址。方法调用时，实际参数的引用(地址，而不是参数的值)被传递给方法中相对应的形式参数，函数接收的是原始值的内存地址；\n在方法执行中，形参和实参内容相同，指向同一块内存地址，方法执行中对引用的操作将会影响到实际对象。\n\n`*值传递：方法调用时，实际参数将它的值传递给对应的形式参数，函数接收到的是原始值的副本，此时内存中存在两个相等的基本类型，若方法中对形参执行处理操作，并不会影响实际参数的值。`\n\n`*引用传递：方法调用时，实际参数的引用（是指地址，而不是参数的值）被传递给方法中相应的形式参数，函数接收到的是原始值的内存地址，在方法中，形参与实参的内容相同，方法中对形参的处理会影响实参的值。`\n\n\n1）形参为基本类型时，对形参的处理不会影响实参。\n2）形参为引用类型时，对形参的处理会影响实参。\n3）String,Integer,Double等immutable类型的特殊处理，可以理解为值传递，形参操作不会影响实参对象。","source":"_posts/王阁/技术/hexo/oldblog/blog8.md","raw":"---\n\ntitle: java中的形参与实参的理解\ndate: 2019-07-16\ntags:\n\n---\n此处简介\n\n<!--more-->\n\n## java中的形参与实参的理解\n#### 值传递：\n方法调用时，实际参数把它的值传递给对应的形式参数，函数接收的是原始值的一个copy，此时内存中存在两个相等的基本类型，即实际参数和形式参数，后面方法中的操作都是对形参这个值的修改，不影响实际参数的值。\n#### 引用传递：\n也称为传地址。方法调用时，实际参数的引用(地址，而不是参数的值)被传递给方法中相对应的形式参数，函数接收的是原始值的内存地址；\n在方法执行中，形参和实参内容相同，指向同一块内存地址，方法执行中对引用的操作将会影响到实际对象。\n\n`*值传递：方法调用时，实际参数将它的值传递给对应的形式参数，函数接收到的是原始值的副本，此时内存中存在两个相等的基本类型，若方法中对形参执行处理操作，并不会影响实际参数的值。`\n\n`*引用传递：方法调用时，实际参数的引用（是指地址，而不是参数的值）被传递给方法中相应的形式参数，函数接收到的是原始值的内存地址，在方法中，形参与实参的内容相同，方法中对形参的处理会影响实参的值。`\n\n\n1）形参为基本类型时，对形参的处理不会影响实参。\n2）形参为引用类型时，对形参的处理会影响实参。\n3）String,Integer,Double等immutable类型的特殊处理，可以理解为值传递，形参操作不会影响实参对象。","slug":"王阁/技术/hexo/oldblog/blog8","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg50054u6pw760o6oze","content":"<p>此处简介</p>\n<a id=\"more\"></a>\n\n<h2 id=\"java中的形参与实参的理解\"><a href=\"#java中的形参与实参的理解\" class=\"headerlink\" title=\"java中的形参与实参的理解\"></a>java中的形参与实参的理解</h2><h4 id=\"值传递：\"><a href=\"#值传递：\" class=\"headerlink\" title=\"值传递：\"></a>值传递：</h4><p>方法调用时，实际参数把它的值传递给对应的形式参数，函数接收的是原始值的一个copy，此时内存中存在两个相等的基本类型，即实际参数和形式参数，后面方法中的操作都是对形参这个值的修改，不影响实际参数的值。</p>\n<h4 id=\"引用传递：\"><a href=\"#引用传递：\" class=\"headerlink\" title=\"引用传递：\"></a>引用传递：</h4><p>也称为传地址。方法调用时，实际参数的引用(地址，而不是参数的值)被传递给方法中相对应的形式参数，函数接收的是原始值的内存地址；<br>在方法执行中，形参和实参内容相同，指向同一块内存地址，方法执行中对引用的操作将会影响到实际对象。</p>\n<p><code>*值传递：方法调用时，实际参数将它的值传递给对应的形式参数，函数接收到的是原始值的副本，此时内存中存在两个相等的基本类型，若方法中对形参执行处理操作，并不会影响实际参数的值。</code></p>\n<p><code>*引用传递：方法调用时，实际参数的引用（是指地址，而不是参数的值）被传递给方法中相应的形式参数，函数接收到的是原始值的内存地址，在方法中，形参与实参的内容相同，方法中对形参的处理会影响实参的值。</code></p>\n<p>1）形参为基本类型时，对形参的处理不会影响实参。<br>2）形参为引用类型时，对形参的处理会影响实参。<br>3）String,Integer,Double等immutable类型的特殊处理，可以理解为值传递，形参操作不会影响实参对象。</p>\n","site":{"data":{}},"excerpt":"<p>此处简介</p>","more":"<h2 id=\"java中的形参与实参的理解\"><a href=\"#java中的形参与实参的理解\" class=\"headerlink\" title=\"java中的形参与实参的理解\"></a>java中的形参与实参的理解</h2><h4 id=\"值传递：\"><a href=\"#值传递：\" class=\"headerlink\" title=\"值传递：\"></a>值传递：</h4><p>方法调用时，实际参数把它的值传递给对应的形式参数，函数接收的是原始值的一个copy，此时内存中存在两个相等的基本类型，即实际参数和形式参数，后面方法中的操作都是对形参这个值的修改，不影响实际参数的值。</p>\n<h4 id=\"引用传递：\"><a href=\"#引用传递：\" class=\"headerlink\" title=\"引用传递：\"></a>引用传递：</h4><p>也称为传地址。方法调用时，实际参数的引用(地址，而不是参数的值)被传递给方法中相对应的形式参数，函数接收的是原始值的内存地址；<br>在方法执行中，形参和实参内容相同，指向同一块内存地址，方法执行中对引用的操作将会影响到实际对象。</p>\n<p><code>*值传递：方法调用时，实际参数将它的值传递给对应的形式参数，函数接收到的是原始值的副本，此时内存中存在两个相等的基本类型，若方法中对形参执行处理操作，并不会影响实际参数的值。</code></p>\n<p><code>*引用传递：方法调用时，实际参数的引用（是指地址，而不是参数的值）被传递给方法中相应的形式参数，函数接收到的是原始值的内存地址，在方法中，形参与实参的内容相同，方法中对形参的处理会影响实参的值。</code></p>\n<p>1）形参为基本类型时，对形参的处理不会影响实参。<br>2）形参为引用类型时，对形参的处理会影响实参。<br>3）String,Integer,Double等immutable类型的特殊处理，可以理解为值传递，形参操作不会影响实参对象。</p>"},{"title":"updateStateByKey&mapStateWithKey","date":"2019-07-14T16:00:00.000Z","_content":"\nspark中如何实现全局count\n\n<!--more-->\n\n## 说明\n\n两种方式都可以实现对同一key的累计统计\n\n区别\nupdateStateByKey会返回无增量数据的状态,所以会相对较大的数据资源开销\nmapStateWithKey 相当于增量统计\n\n## 使用\n\nupdateStateByKey :\n\n```java\n\n public static Function2<List<Integer>, Optional<Integer>, Optional<Integer>> updateFunctionByUpdate() {\n        Function2<List<Integer>, Optional<Integer>, Optional<Integer>> updateFunction = (values, s1) -> {\n            Integer newSum = 0;\n            if (s1.isPresent()) {\n                newSum = s1.get();\n            }\n\n            Iterator<Integer> i = values.iterator();\n            while (i.hasNext()) {\n                newSum += i.next();\n            }\n            return Optional.of(newSum);\n        };\n        return updateFunction;\n    }\n\n```\nmapStateWithKey :\n\n```java\n public static Function3<String, Optional<Integer>, State<Integer>, Tuple2<String, Integer>> updateFunctionByMap() {\n        Function3<String, Optional<Integer>, State<Integer>, Tuple2<String, Integer>> updateFunction2 = (word, one,\n                                                                                                         state) -> {\n            int sum = one.or(0) + (state.exists() ? state.get() : 0);\n            Tuple2<String, Integer> output = new Tuple2<String, Integer>(word, sum);\n            state.update(sum);\n            return output;\n        };\n        return updateFunction2;\n    }\n\n```\n","source":"_posts/王阁/技术/hexo/spark/stream.md","raw":"---\n\ntitle: updateStateByKey&mapStateWithKey\ndate: 2019-07-15\ntags: sparkstream\n\n---\n\nspark中如何实现全局count\n\n<!--more-->\n\n## 说明\n\n两种方式都可以实现对同一key的累计统计\n\n区别\nupdateStateByKey会返回无增量数据的状态,所以会相对较大的数据资源开销\nmapStateWithKey 相当于增量统计\n\n## 使用\n\nupdateStateByKey :\n\n```java\n\n public static Function2<List<Integer>, Optional<Integer>, Optional<Integer>> updateFunctionByUpdate() {\n        Function2<List<Integer>, Optional<Integer>, Optional<Integer>> updateFunction = (values, s1) -> {\n            Integer newSum = 0;\n            if (s1.isPresent()) {\n                newSum = s1.get();\n            }\n\n            Iterator<Integer> i = values.iterator();\n            while (i.hasNext()) {\n                newSum += i.next();\n            }\n            return Optional.of(newSum);\n        };\n        return updateFunction;\n    }\n\n```\nmapStateWithKey :\n\n```java\n public static Function3<String, Optional<Integer>, State<Integer>, Tuple2<String, Integer>> updateFunctionByMap() {\n        Function3<String, Optional<Integer>, State<Integer>, Tuple2<String, Integer>> updateFunction2 = (word, one,\n                                                                                                         state) -> {\n            int sum = one.or(0) + (state.exists() ? state.get() : 0);\n            Tuple2<String, Integer> output = new Tuple2<String, Integer>(word, sum);\n            state.update(sum);\n            return output;\n        };\n        return updateFunction2;\n    }\n\n```\n","slug":"王阁/技术/hexo/spark/stream","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg60057u6pw5zp1ao3m","content":"<p>spark中如何实现全局count</p>\n<a id=\"more\"></a>\n\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>两种方式都可以实现对同一key的累计统计</p>\n<p>区别<br>updateStateByKey会返回无增量数据的状态,所以会相对较大的数据资源开销<br>mapStateWithKey 相当于增量统计</p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><p>updateStateByKey :</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Function2&lt;List&lt;Integer&gt;, Optional&lt;Integer&gt;, Optional&lt;Integer&gt;&gt; updateFunctionByUpdate() &#123;</span><br><span class=\"line\">       Function2&lt;List&lt;Integer&gt;, Optional&lt;Integer&gt;, Optional&lt;Integer&gt;&gt; updateFunction = (values, s1) -&gt; &#123;</span><br><span class=\"line\">           Integer newSum = <span class=\"number\">0</span>;</span><br><span class=\"line\">           <span class=\"keyword\">if</span> (s1.isPresent()) &#123;</span><br><span class=\"line\">               newSum = s1.get();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">           Iterator&lt;Integer&gt; i = values.iterator();</span><br><span class=\"line\">           <span class=\"keyword\">while</span> (i.hasNext()) &#123;</span><br><span class=\"line\">               newSum += i.next();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> Optional.of(newSum);</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> updateFunction;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>mapStateWithKey :</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Function3&lt;String, Optional&lt;Integer&gt;, State&lt;Integer&gt;, Tuple2&lt;String, Integer&gt;&gt; updateFunctionByMap() &#123;</span><br><span class=\"line\">       Function3&lt;String, Optional&lt;Integer&gt;, State&lt;Integer&gt;, Tuple2&lt;String, Integer&gt;&gt; updateFunction2 = (word, one,</span><br><span class=\"line\">                                                                                                        state) -&gt; &#123;</span><br><span class=\"line\">           <span class=\"keyword\">int</span> sum = one.or(<span class=\"number\">0</span>) + (state.exists() ? state.get() : <span class=\"number\">0</span>);</span><br><span class=\"line\">           Tuple2&lt;String, Integer&gt; output = <span class=\"keyword\">new</span> Tuple2&lt;String, Integer&gt;(word, sum);</span><br><span class=\"line\">           state.update(sum);</span><br><span class=\"line\">           <span class=\"keyword\">return</span> output;</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> updateFunction2;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>spark中如何实现全局count</p>","more":"<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>两种方式都可以实现对同一key的累计统计</p>\n<p>区别<br>updateStateByKey会返回无增量数据的状态,所以会相对较大的数据资源开销<br>mapStateWithKey 相当于增量统计</p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><p>updateStateByKey :</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Function2&lt;List&lt;Integer&gt;, Optional&lt;Integer&gt;, Optional&lt;Integer&gt;&gt; updateFunctionByUpdate() &#123;</span><br><span class=\"line\">       Function2&lt;List&lt;Integer&gt;, Optional&lt;Integer&gt;, Optional&lt;Integer&gt;&gt; updateFunction = (values, s1) -&gt; &#123;</span><br><span class=\"line\">           Integer newSum = <span class=\"number\">0</span>;</span><br><span class=\"line\">           <span class=\"keyword\">if</span> (s1.isPresent()) &#123;</span><br><span class=\"line\">               newSum = s1.get();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">           Iterator&lt;Integer&gt; i = values.iterator();</span><br><span class=\"line\">           <span class=\"keyword\">while</span> (i.hasNext()) &#123;</span><br><span class=\"line\">               newSum += i.next();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> Optional.of(newSum);</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> updateFunction;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>mapStateWithKey :</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Function3&lt;String, Optional&lt;Integer&gt;, State&lt;Integer&gt;, Tuple2&lt;String, Integer&gt;&gt; updateFunctionByMap() &#123;</span><br><span class=\"line\">       Function3&lt;String, Optional&lt;Integer&gt;, State&lt;Integer&gt;, Tuple2&lt;String, Integer&gt;&gt; updateFunction2 = (word, one,</span><br><span class=\"line\">                                                                                                        state) -&gt; &#123;</span><br><span class=\"line\">           <span class=\"keyword\">int</span> sum = one.or(<span class=\"number\">0</span>) + (state.exists() ? state.get() : <span class=\"number\">0</span>);</span><br><span class=\"line\">           Tuple2&lt;String, Integer&gt; output = <span class=\"keyword\">new</span> Tuple2&lt;String, Integer&gt;(word, sum);</span><br><span class=\"line\">           state.update(sum);</span><br><span class=\"line\">           <span class=\"keyword\">return</span> output;</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> updateFunction2;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>"},{"title":"sparkstreaming 窗口操作","date":"2019-07-15T16:00:00.000Z","_content":"\nsparkstreaming时间窗口设置\n\n<!--more-->\n\n## 说明\n\n通过sparkstreaming设置窗口函数,可达到如,每10秒计算前30秒内数据的效果\n\n如上 主要有两个参数\n\n1. 窗口大小\n2. 滑动距离\n\nval windowedWordCounts = pairs.reduceByKeyAndWindow(_ + _, Seconds(30), Seconds(10))\n\n如上\n\n## 常用api\n\n| Transformation | Meaning |\n| :--- | :----: |\n| window(windowLength, slideInterval)\t | Return a new DStream which is computed based on windowed batches of the source DStream.|\n| countByWindow(windowLength,slideInterval)\t    | Return a sliding window count of elements in the stream.|\n|reduceByWindow(func, windowLength,slideInterval)| |\n|reduceByKeyAndWindow(func,windowLength, slideInterval, [numTasks])| |\n|reduceByKeyAndWindow(func, invFunc,windowLength, slideInterval, [numTasks])\t| |\n|countByValueAndWindow(windowLength,slideInterval, [numTasks])\t| |\n\n","source":"_posts/王阁/技术/hexo/spark/stream2.md","raw":"---\n\ntitle: sparkstreaming 窗口操作\ndate: 2019-07-16\ntags: sparkstreaming\n\n---\n\nsparkstreaming时间窗口设置\n\n<!--more-->\n\n## 说明\n\n通过sparkstreaming设置窗口函数,可达到如,每10秒计算前30秒内数据的效果\n\n如上 主要有两个参数\n\n1. 窗口大小\n2. 滑动距离\n\nval windowedWordCounts = pairs.reduceByKeyAndWindow(_ + _, Seconds(30), Seconds(10))\n\n如上\n\n## 常用api\n\n| Transformation | Meaning |\n| :--- | :----: |\n| window(windowLength, slideInterval)\t | Return a new DStream which is computed based on windowed batches of the source DStream.|\n| countByWindow(windowLength,slideInterval)\t    | Return a sliding window count of elements in the stream.|\n|reduceByWindow(func, windowLength,slideInterval)| |\n|reduceByKeyAndWindow(func,windowLength, slideInterval, [numTasks])| |\n|reduceByKeyAndWindow(func, invFunc,windowLength, slideInterval, [numTasks])\t| |\n|countByValueAndWindow(windowLength,slideInterval, [numTasks])\t| |\n\n","slug":"王阁/技术/hexo/spark/stream2","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg60058u6pw7xmi3qvs","content":"<p>sparkstreaming时间窗口设置</p>\n<a id=\"more\"></a>\n\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>通过sparkstreaming设置窗口函数,可达到如,每10秒计算前30秒内数据的效果</p>\n<p>如上 主要有两个参数</p>\n<ol>\n<li>窗口大小</li>\n<li>滑动距离</li>\n</ol>\n<p>val windowedWordCounts = pairs.reduceByKeyAndWindow(_ + _, Seconds(30), Seconds(10))</p>\n<p>如上</p>\n<h2 id=\"常用api\"><a href=\"#常用api\" class=\"headerlink\" title=\"常用api\"></a>常用api</h2><table>\n<thead>\n<tr>\n<th align=\"left\">Transformation</th>\n<th align=\"center\">Meaning</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">window(windowLength, slideInterval)</td>\n<td align=\"center\">Return a new DStream which is computed based on windowed batches of the source DStream.</td>\n</tr>\n<tr>\n<td align=\"left\">countByWindow(windowLength,slideInterval)</td>\n<td align=\"center\">Return a sliding window count of elements in the stream.</td>\n</tr>\n<tr>\n<td align=\"left\">reduceByWindow(func, windowLength,slideInterval)</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"left\">reduceByKeyAndWindow(func,windowLength, slideInterval, [numTasks])</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"left\">reduceByKeyAndWindow(func, invFunc,windowLength, slideInterval, [numTasks])</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"left\">countByValueAndWindow(windowLength,slideInterval, [numTasks])</td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"<p>sparkstreaming时间窗口设置</p>","more":"<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>通过sparkstreaming设置窗口函数,可达到如,每10秒计算前30秒内数据的效果</p>\n<p>如上 主要有两个参数</p>\n<ol>\n<li>窗口大小</li>\n<li>滑动距离</li>\n</ol>\n<p>val windowedWordCounts = pairs.reduceByKeyAndWindow(_ + _, Seconds(30), Seconds(10))</p>\n<p>如上</p>\n<h2 id=\"常用api\"><a href=\"#常用api\" class=\"headerlink\" title=\"常用api\"></a>常用api</h2><table>\n<thead>\n<tr>\n<th align=\"left\">Transformation</th>\n<th align=\"center\">Meaning</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">window(windowLength, slideInterval)</td>\n<td align=\"center\">Return a new DStream which is computed based on windowed batches of the source DStream.</td>\n</tr>\n<tr>\n<td align=\"left\">countByWindow(windowLength,slideInterval)</td>\n<td align=\"center\">Return a sliding window count of elements in the stream.</td>\n</tr>\n<tr>\n<td align=\"left\">reduceByWindow(func, windowLength,slideInterval)</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"left\">reduceByKeyAndWindow(func,windowLength, slideInterval, [numTasks])</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"left\">reduceByKeyAndWindow(func, invFunc,windowLength, slideInterval, [numTasks])</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"left\">countByValueAndWindow(windowLength,slideInterval, [numTasks])</td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>"},{"title":"宽窄依赖","date":"2019-07-15T16:00:00.000Z","_content":"\nspark依赖说明\n\n<!--more-->\n\n## 种类\n\nspark的依赖关系大致有两类\n\n* narrow dependency\n* wide dependency\n\n## 说明\n\n### narrow dependency\n\n父Partition ===> 子partition 多对一或一对一   flatMap ,mapToPair ,map ,filter等算子\n父partition ===> 子partition 一对多          reduce ,group by 等.\n\n### stage\n\n当一个dag串联遇到宽依赖时形成stage.一个stage对应一个task.这个task的并行度由最后一个依赖决定.应该就是说由wide dependency 的具体并行度决度.如\nreduce ,partition=3.就3的并行度.这里的参数可以设置.\n\nwide dependency 必定对应的有shuffle.但shuffle不一定是wide dependency  如sort orderby\n\njoin 即可能发生shuffle也可能不,具体看情况.\n\n### pipeline\n\n一个stage划分好后.一条数据的具体运算逻辑是会一直走完所有计算逻辑后才会落地.这是与mapreduce的区别\nmapreduce是计算逻辑走完落地,再启动,计算又落地.\n\n所以说spark的效率比mapreduce高也是有这个原因.dag串联后,运算优先.\n\n","source":"_posts/王阁/技术/hexo/spark/宽窄依赖.md","raw":"---\n\ntitle: 宽窄依赖\ndate: 2019-07-16\ntags: spark dependency\n\n---\n\nspark依赖说明\n\n<!--more-->\n\n## 种类\n\nspark的依赖关系大致有两类\n\n* narrow dependency\n* wide dependency\n\n## 说明\n\n### narrow dependency\n\n父Partition ===> 子partition 多对一或一对一   flatMap ,mapToPair ,map ,filter等算子\n父partition ===> 子partition 一对多          reduce ,group by 等.\n\n### stage\n\n当一个dag串联遇到宽依赖时形成stage.一个stage对应一个task.这个task的并行度由最后一个依赖决定.应该就是说由wide dependency 的具体并行度决度.如\nreduce ,partition=3.就3的并行度.这里的参数可以设置.\n\nwide dependency 必定对应的有shuffle.但shuffle不一定是wide dependency  如sort orderby\n\njoin 即可能发生shuffle也可能不,具体看情况.\n\n### pipeline\n\n一个stage划分好后.一条数据的具体运算逻辑是会一直走完所有计算逻辑后才会落地.这是与mapreduce的区别\nmapreduce是计算逻辑走完落地,再启动,计算又落地.\n\n所以说spark的效率比mapreduce高也是有这个原因.dag串联后,运算优先.\n\n","slug":"王阁/技术/hexo/spark/宽窄依赖","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg7005au6pw165b71oo","content":"<p>spark依赖说明</p>\n<a id=\"more\"></a>\n\n<h2 id=\"种类\"><a href=\"#种类\" class=\"headerlink\" title=\"种类\"></a>种类</h2><p>spark的依赖关系大致有两类</p>\n<ul>\n<li>narrow dependency</li>\n<li>wide dependency</li>\n</ul>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><h3 id=\"narrow-dependency\"><a href=\"#narrow-dependency\" class=\"headerlink\" title=\"narrow dependency\"></a>narrow dependency</h3><p>父Partition ===&gt; 子partition 多对一或一对一   flatMap ,mapToPair ,map ,filter等算子<br>父partition ===&gt; 子partition 一对多          reduce ,group by 等.</p>\n<h3 id=\"stage\"><a href=\"#stage\" class=\"headerlink\" title=\"stage\"></a>stage</h3><p>当一个dag串联遇到宽依赖时形成stage.一个stage对应一个task.这个task的并行度由最后一个依赖决定.应该就是说由wide dependency 的具体并行度决度.如<br>reduce ,partition=3.就3的并行度.这里的参数可以设置.</p>\n<p>wide dependency 必定对应的有shuffle.但shuffle不一定是wide dependency  如sort orderby</p>\n<p>join 即可能发生shuffle也可能不,具体看情况.</p>\n<h3 id=\"pipeline\"><a href=\"#pipeline\" class=\"headerlink\" title=\"pipeline\"></a>pipeline</h3><p>一个stage划分好后.一条数据的具体运算逻辑是会一直走完所有计算逻辑后才会落地.这是与mapreduce的区别<br>mapreduce是计算逻辑走完落地,再启动,计算又落地.</p>\n<p>所以说spark的效率比mapreduce高也是有这个原因.dag串联后,运算优先.</p>\n","site":{"data":{}},"excerpt":"<p>spark依赖说明</p>","more":"<h2 id=\"种类\"><a href=\"#种类\" class=\"headerlink\" title=\"种类\"></a>种类</h2><p>spark的依赖关系大致有两类</p>\n<ul>\n<li>narrow dependency</li>\n<li>wide dependency</li>\n</ul>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><h3 id=\"narrow-dependency\"><a href=\"#narrow-dependency\" class=\"headerlink\" title=\"narrow dependency\"></a>narrow dependency</h3><p>父Partition ===&gt; 子partition 多对一或一对一   flatMap ,mapToPair ,map ,filter等算子<br>父partition ===&gt; 子partition 一对多          reduce ,group by 等.</p>\n<h3 id=\"stage\"><a href=\"#stage\" class=\"headerlink\" title=\"stage\"></a>stage</h3><p>当一个dag串联遇到宽依赖时形成stage.一个stage对应一个task.这个task的并行度由最后一个依赖决定.应该就是说由wide dependency 的具体并行度决度.如<br>reduce ,partition=3.就3的并行度.这里的参数可以设置.</p>\n<p>wide dependency 必定对应的有shuffle.但shuffle不一定是wide dependency  如sort orderby</p>\n<p>join 即可能发生shuffle也可能不,具体看情况.</p>\n<h3 id=\"pipeline\"><a href=\"#pipeline\" class=\"headerlink\" title=\"pipeline\"></a>pipeline</h3><p>一个stage划分好后.一条数据的具体运算逻辑是会一直走完所有计算逻辑后才会落地.这是与mapreduce的区别<br>mapreduce是计算逻辑走完落地,再启动,计算又落地.</p>\n<p>所以说spark的效率比mapreduce高也是有这个原因.dag串联后,运算优先.</p>"},{"_content":"```\n指标=数据+业务场景，能够指导业务制定下一步行动方案。\n```\n\n**一个好的指标的应该能够解决以下5W的问题：**\n\n## 1、 初识指标与指标体系\n\n### 1.1、使用场景（who、when、where)\n\n解决指标的维度问题，通过定义维度可以明确指标所能支持的分析场景，例如【体脂率】可以支持性别、年龄段、地区等维度，那对应的可以支持对不同性别、年龄段、地区人群的分析。\n\n![img](http://img.wqkenqing.ren/typora_img/d78ca97898e7389cfc605a08ab9a29e4.jpeg)\n\n#### 1.1.2、指标定义（what)\n\n解决指标的计算口径问题，大多数情况下需要解决的是同名不同义、同义不同名的问题，如下图的销售额、上架数量两个指标所示。\n\n#### **1.1.3、指标用途（why）**\n\n\n\n解决指标的逻辑问题，明确指标与指标之间的逻辑关系，如：销售利润=销售额-采购成本-头程税费-退税差额，毛利润=销售利润-呆滞计提-资金占用利息。\n\n### 1.2 指标体系\n\n#### 1.2.1、海盗指标法（AARRR)\n\n![img](http://img.wqkenqing.ren/typora_img/41ab4c78a27cf0f143973503178ba10a.jpeg)\n\n1. Acquisition (获取)\n2. Activation （激活）\n3. Retention (留存)\n4. Revenue  （收入）\n5. Referral (推荐)\n\n![img](http://img.wqkenqing.ren/typora_img/8a6b93260f5efad8fa90c6013175369d.jpeg)\n\n这个模型对于流量→收入转化的指标建设有相当的指导意义，适用于大部分的互联网公司。但对于传统电商这类关注供应链、管理成本的企业来说，这套指标体系并不能覆盖所有的场景，因此我们主要采用的是第一关键指标法作为指标体系建设的理论基础。\n\n#### 1.2.2、第一关键指标法\n\n核心思想:在任意一个时间点，肯定只有一个最关键的指标,但随着业务的发展关注重点会有变化。\n\n![img](http://img.wqkenqing.ren/typora_img/73c45235ef43a13578bccc1c41c764b4.jpeg)\n\n#### 1.2.3 指标体系搭建过程\n\n#### 1.2.3.1. 确定第一关键指标\n\n\n\n![img](http://img.wqkenqing.ren/typora_img/fcc3aa8d6aca9f55c9606a4130bb913e.jpeg)\n\n#### 1.2.3.2. 划分模块\n\n​\t![img](http://img.wqkenqing.ren/typora_img/1e5a5f0b67f63d57e1522f050577d958.jpeg)\n\n#### 1. 2.3.3. 梳理指标逻辑关系\n\n\n\n确定各个模块的核心关注指标之后，我们从第一关键指标开始，从上往下梳理指标之间的逻辑关系。\n\n![img](http://img.wqkenqing.ren/typora_img/27c2b0aebbbc94160c43ed45616a1bde.jpeg)\n\n原文地址\n\n[指标](https://blog.csdn.net/rlnLo2pNEfx9c/article/details/117376482)\n\n## 2、指标体系构建方法-四个模型\n\n### 2.1 构建数据指标体系的方法概括\n\n数据指标体系建设的方法可以总结为三个步骤\n\n1. 明确业务目标\n2. 理清用户生命周期及行为路径\n3. 指标分层治理\n\n以上三个步骤涉及了\n\n1. OSM(Object,Strategy,Measure)\n2. AARRR(Acquisition,Activation,Retention,Revenue,Referral)\n3. UJM(User, Journey, Map)\n4. MECE (Mutually Exclusive, Collectively Exhaustive)\n\n四个模型\n\n![img](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16.png)\n\n\n\n**1.OSM模型-明确业务目标，数据赋能业务**\n\nOSM模型是 Object, Strategy, Measure的缩写。\n\n数据服务于业务才能赋能业务，数据脱离业务，那么数据就会失去其价值。\n\n我们在建立数据指标体系之前，一定要清晰的了解业务目标，也就是模型中的O,Object。换句话说，业务的目标也就是业务的核心KPI，了解业务的核心KPI能够帮助我们快速理清指标体系的方向。\n\n了解业务目标方向之后，就需要制定相应的行动策略，也就是模型中的S,Strategy。行动策略的制定可以根据产品生命周期或者用户行为路径进行拆解，也就是把业务的核心KPI拆解到产品生命周期(AARRR)或者用户行为路径(UJM)当中，在整条链路当中分析可以提升核心KPI的点。\n\n就需要我们制定较细的评估指标，也就是模型中的M,Measure。评估指标的制定是将产品链路或者行为路径中的各个核心KPI进行下钻细分，这里用到的方法就是麦肯锡著名的MECE模型，需保证每个细分指标是完全独立且相互穷尽的。\n\n总结一下OSM模型的内容及其与AARRR,UJM,MECE模型之间的关系，OSM模型是指标体系建设的指导思想，理解业务KPI是OSM模型的核心；制定行动策略是实现业务KPI的手段，而AARRR和UJM模型是实现策略制定的方法论；制定细分指标是评估业务策略优劣的方法，而MECE模型制定细分指标的方法论。\n\n![](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428135830696-20220428140228425.png)\n\n####  **2. AARRR模型和UJM模型--理清用户生命周期以及行为路径**\n\nAARRR和UJM模型都是路径模型，二者原理相似\n\n不过AARRR是从产品角度出发，简而言之就是 拉新，促活，留存，付费，推广。\n\nUJM是从用户角度出发，描述了用户进入产品的整个路径流程，即注册，登陆，加购，购买，复购链路流程。\n\n![img](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140235721.png)\n\n**3.MECE模型--指标体系分级治理**\n\n指标体系分级治理\n\n![img](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140457796.png)\n\n示例：以GMV为例，用三个步骤，四个模型教会你搭建指标体系的方法 \n\n![img](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140643364.png)\n\n\n\n![img](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16.jpeg)\n\nQ：指标分级治理拆这么细有什么用？\n\n","source":"_posts/王阁/技术/专题/数据建模/数据指标体系.md","raw":"```\n指标=数据+业务场景，能够指导业务制定下一步行动方案。\n```\n\n**一个好的指标的应该能够解决以下5W的问题：**\n\n## 1、 初识指标与指标体系\n\n### 1.1、使用场景（who、when、where)\n\n解决指标的维度问题，通过定义维度可以明确指标所能支持的分析场景，例如【体脂率】可以支持性别、年龄段、地区等维度，那对应的可以支持对不同性别、年龄段、地区人群的分析。\n\n![img](http://img.wqkenqing.ren/typora_img/d78ca97898e7389cfc605a08ab9a29e4.jpeg)\n\n#### 1.1.2、指标定义（what)\n\n解决指标的计算口径问题，大多数情况下需要解决的是同名不同义、同义不同名的问题，如下图的销售额、上架数量两个指标所示。\n\n#### **1.1.3、指标用途（why）**\n\n\n\n解决指标的逻辑问题，明确指标与指标之间的逻辑关系，如：销售利润=销售额-采购成本-头程税费-退税差额，毛利润=销售利润-呆滞计提-资金占用利息。\n\n### 1.2 指标体系\n\n#### 1.2.1、海盗指标法（AARRR)\n\n![img](http://img.wqkenqing.ren/typora_img/41ab4c78a27cf0f143973503178ba10a.jpeg)\n\n1. Acquisition (获取)\n2. Activation （激活）\n3. Retention (留存)\n4. Revenue  （收入）\n5. Referral (推荐)\n\n![img](http://img.wqkenqing.ren/typora_img/8a6b93260f5efad8fa90c6013175369d.jpeg)\n\n这个模型对于流量→收入转化的指标建设有相当的指导意义，适用于大部分的互联网公司。但对于传统电商这类关注供应链、管理成本的企业来说，这套指标体系并不能覆盖所有的场景，因此我们主要采用的是第一关键指标法作为指标体系建设的理论基础。\n\n#### 1.2.2、第一关键指标法\n\n核心思想:在任意一个时间点，肯定只有一个最关键的指标,但随着业务的发展关注重点会有变化。\n\n![img](http://img.wqkenqing.ren/typora_img/73c45235ef43a13578bccc1c41c764b4.jpeg)\n\n#### 1.2.3 指标体系搭建过程\n\n#### 1.2.3.1. 确定第一关键指标\n\n\n\n![img](http://img.wqkenqing.ren/typora_img/fcc3aa8d6aca9f55c9606a4130bb913e.jpeg)\n\n#### 1.2.3.2. 划分模块\n\n​\t![img](http://img.wqkenqing.ren/typora_img/1e5a5f0b67f63d57e1522f050577d958.jpeg)\n\n#### 1. 2.3.3. 梳理指标逻辑关系\n\n\n\n确定各个模块的核心关注指标之后，我们从第一关键指标开始，从上往下梳理指标之间的逻辑关系。\n\n![img](http://img.wqkenqing.ren/typora_img/27c2b0aebbbc94160c43ed45616a1bde.jpeg)\n\n原文地址\n\n[指标](https://blog.csdn.net/rlnLo2pNEfx9c/article/details/117376482)\n\n## 2、指标体系构建方法-四个模型\n\n### 2.1 构建数据指标体系的方法概括\n\n数据指标体系建设的方法可以总结为三个步骤\n\n1. 明确业务目标\n2. 理清用户生命周期及行为路径\n3. 指标分层治理\n\n以上三个步骤涉及了\n\n1. OSM(Object,Strategy,Measure)\n2. AARRR(Acquisition,Activation,Retention,Revenue,Referral)\n3. UJM(User, Journey, Map)\n4. MECE (Mutually Exclusive, Collectively Exhaustive)\n\n四个模型\n\n![img](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16.png)\n\n\n\n**1.OSM模型-明确业务目标，数据赋能业务**\n\nOSM模型是 Object, Strategy, Measure的缩写。\n\n数据服务于业务才能赋能业务，数据脱离业务，那么数据就会失去其价值。\n\n我们在建立数据指标体系之前，一定要清晰的了解业务目标，也就是模型中的O,Object。换句话说，业务的目标也就是业务的核心KPI，了解业务的核心KPI能够帮助我们快速理清指标体系的方向。\n\n了解业务目标方向之后，就需要制定相应的行动策略，也就是模型中的S,Strategy。行动策略的制定可以根据产品生命周期或者用户行为路径进行拆解，也就是把业务的核心KPI拆解到产品生命周期(AARRR)或者用户行为路径(UJM)当中，在整条链路当中分析可以提升核心KPI的点。\n\n就需要我们制定较细的评估指标，也就是模型中的M,Measure。评估指标的制定是将产品链路或者行为路径中的各个核心KPI进行下钻细分，这里用到的方法就是麦肯锡著名的MECE模型，需保证每个细分指标是完全独立且相互穷尽的。\n\n总结一下OSM模型的内容及其与AARRR,UJM,MECE模型之间的关系，OSM模型是指标体系建设的指导思想，理解业务KPI是OSM模型的核心；制定行动策略是实现业务KPI的手段，而AARRR和UJM模型是实现策略制定的方法论；制定细分指标是评估业务策略优劣的方法，而MECE模型制定细分指标的方法论。\n\n![](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428135830696-20220428140228425.png)\n\n####  **2. AARRR模型和UJM模型--理清用户生命周期以及行为路径**\n\nAARRR和UJM模型都是路径模型，二者原理相似\n\n不过AARRR是从产品角度出发，简而言之就是 拉新，促活，留存，付费，推广。\n\nUJM是从用户角度出发，描述了用户进入产品的整个路径流程，即注册，登陆，加购，购买，复购链路流程。\n\n![img](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140235721.png)\n\n**3.MECE模型--指标体系分级治理**\n\n指标体系分级治理\n\n![img](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140457796.png)\n\n示例：以GMV为例，用三个步骤，四个模型教会你搭建指标体系的方法 \n\n![img](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140643364.png)\n\n\n\n![img](http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16.jpeg)\n\nQ：指标分级治理拆这么细有什么用？\n\n","slug":"王阁/技术/专题/数据建模/数据指标体系","published":1,"date":"2023-02-23T02:51:20.907Z","updated":"2023-02-23T02:51:20.908Z","title":"王阁/技术/专题/数据建模/数据指标体系","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg7005cu6pwe0js53e4","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">指标&#x3D;数据+业务场景，能够指导业务制定下一步行动方案。</span><br></pre></td></tr></table></figure>\n\n<p><strong>一个好的指标的应该能够解决以下5W的问题：</strong></p>\n<h2 id=\"1、-初识指标与指标体系\"><a href=\"#1、-初识指标与指标体系\" class=\"headerlink\" title=\"1、 初识指标与指标体系\"></a>1、 初识指标与指标体系</h2><h3 id=\"1-1、使用场景（who、when、where\"><a href=\"#1-1、使用场景（who、when、where\" class=\"headerlink\" title=\"1.1、使用场景（who、when、where)\"></a>1.1、使用场景（who、when、where)</h3><p>解决指标的维度问题，通过定义维度可以明确指标所能支持的分析场景，例如【体脂率】可以支持性别、年龄段、地区等维度，那对应的可以支持对不同性别、年龄段、地区人群的分析。</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/d78ca97898e7389cfc605a08ab9a29e4.jpeg\" alt=\"img\"></p>\n<h4 id=\"1-1-2、指标定义（what\"><a href=\"#1-1-2、指标定义（what\" class=\"headerlink\" title=\"1.1.2、指标定义（what)\"></a>1.1.2、指标定义（what)</h4><p>解决指标的计算口径问题，大多数情况下需要解决的是同名不同义、同义不同名的问题，如下图的销售额、上架数量两个指标所示。</p>\n<h4 id=\"1-1-3、指标用途（why）\"><a href=\"#1-1-3、指标用途（why）\" class=\"headerlink\" title=\"1.1.3、指标用途（why）\"></a><strong>1.1.3、指标用途（why）</strong></h4><p>解决指标的逻辑问题，明确指标与指标之间的逻辑关系，如：销售利润=销售额-采购成本-头程税费-退税差额，毛利润=销售利润-呆滞计提-资金占用利息。</p>\n<h3 id=\"1-2-指标体系\"><a href=\"#1-2-指标体系\" class=\"headerlink\" title=\"1.2 指标体系\"></a>1.2 指标体系</h3><h4 id=\"1-2-1、海盗指标法（AARRR\"><a href=\"#1-2-1、海盗指标法（AARRR\" class=\"headerlink\" title=\"1.2.1、海盗指标法（AARRR)\"></a>1.2.1、海盗指标法（AARRR)</h4><p><img src=\"http://img.wqkenqing.ren/typora_img/41ab4c78a27cf0f143973503178ba10a.jpeg\" alt=\"img\"></p>\n<ol>\n<li>Acquisition (获取)</li>\n<li>Activation （激活）</li>\n<li>Retention (留存)</li>\n<li>Revenue  （收入）</li>\n<li>Referral (推荐)</li>\n</ol>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/8a6b93260f5efad8fa90c6013175369d.jpeg\" alt=\"img\"></p>\n<p>这个模型对于流量→收入转化的指标建设有相当的指导意义，适用于大部分的互联网公司。但对于传统电商这类关注供应链、管理成本的企业来说，这套指标体系并不能覆盖所有的场景，因此我们主要采用的是第一关键指标法作为指标体系建设的理论基础。</p>\n<h4 id=\"1-2-2、第一关键指标法\"><a href=\"#1-2-2、第一关键指标法\" class=\"headerlink\" title=\"1.2.2、第一关键指标法\"></a>1.2.2、第一关键指标法</h4><p>核心思想:在任意一个时间点，肯定只有一个最关键的指标,但随着业务的发展关注重点会有变化。</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/73c45235ef43a13578bccc1c41c764b4.jpeg\" alt=\"img\"></p>\n<h4 id=\"1-2-3-指标体系搭建过程\"><a href=\"#1-2-3-指标体系搭建过程\" class=\"headerlink\" title=\"1.2.3 指标体系搭建过程\"></a>1.2.3 指标体系搭建过程</h4><h4 id=\"1-2-3-1-确定第一关键指标\"><a href=\"#1-2-3-1-确定第一关键指标\" class=\"headerlink\" title=\"1.2.3.1. 确定第一关键指标\"></a>1.2.3.1. 确定第一关键指标</h4><p><img src=\"http://img.wqkenqing.ren/typora_img/fcc3aa8d6aca9f55c9606a4130bb913e.jpeg\" alt=\"img\"></p>\n<h4 id=\"1-2-3-2-划分模块\"><a href=\"#1-2-3-2-划分模块\" class=\"headerlink\" title=\"1.2.3.2. 划分模块\"></a>1.2.3.2. 划分模块</h4><p>​    <img src=\"http://img.wqkenqing.ren/typora_img/1e5a5f0b67f63d57e1522f050577d958.jpeg\" alt=\"img\"></p>\n<h4 id=\"1-2-3-3-梳理指标逻辑关系\"><a href=\"#1-2-3-3-梳理指标逻辑关系\" class=\"headerlink\" title=\"1. 2.3.3. 梳理指标逻辑关系\"></a>1. 2.3.3. 梳理指标逻辑关系</h4><p>确定各个模块的核心关注指标之后，我们从第一关键指标开始，从上往下梳理指标之间的逻辑关系。</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/27c2b0aebbbc94160c43ed45616a1bde.jpeg\" alt=\"img\"></p>\n<p>原文地址</p>\n<p><a href=\"https://blog.csdn.net/rlnLo2pNEfx9c/article/details/117376482\" target=\"_blank\" rel=\"noopener\">指标</a></p>\n<h2 id=\"2、指标体系构建方法-四个模型\"><a href=\"#2、指标体系构建方法-四个模型\" class=\"headerlink\" title=\"2、指标体系构建方法-四个模型\"></a>2、指标体系构建方法-四个模型</h2><h3 id=\"2-1-构建数据指标体系的方法概括\"><a href=\"#2-1-构建数据指标体系的方法概括\" class=\"headerlink\" title=\"2.1 构建数据指标体系的方法概括\"></a>2.1 构建数据指标体系的方法概括</h3><p>数据指标体系建设的方法可以总结为三个步骤</p>\n<ol>\n<li>明确业务目标</li>\n<li>理清用户生命周期及行为路径</li>\n<li>指标分层治理</li>\n</ol>\n<p>以上三个步骤涉及了</p>\n<ol>\n<li>OSM(Object,Strategy,Measure)</li>\n<li>AARRR(Acquisition,Activation,Retention,Revenue,Referral)</li>\n<li>UJM(User, Journey, Map)</li>\n<li>MECE (Mutually Exclusive, Collectively Exhaustive)</li>\n</ol>\n<p>四个模型</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16.png\" alt=\"img\"></p>\n<p><strong>1.OSM模型-明确业务目标，数据赋能业务</strong></p>\n<p>OSM模型是 Object, Strategy, Measure的缩写。</p>\n<p>数据服务于业务才能赋能业务，数据脱离业务，那么数据就会失去其价值。</p>\n<p>我们在建立数据指标体系之前，一定要清晰的了解业务目标，也就是模型中的O,Object。换句话说，业务的目标也就是业务的核心KPI，了解业务的核心KPI能够帮助我们快速理清指标体系的方向。</p>\n<p>了解业务目标方向之后，就需要制定相应的行动策略，也就是模型中的S,Strategy。行动策略的制定可以根据产品生命周期或者用户行为路径进行拆解，也就是把业务的核心KPI拆解到产品生命周期(AARRR)或者用户行为路径(UJM)当中，在整条链路当中分析可以提升核心KPI的点。</p>\n<p>就需要我们制定较细的评估指标，也就是模型中的M,Measure。评估指标的制定是将产品链路或者行为路径中的各个核心KPI进行下钻细分，这里用到的方法就是麦肯锡著名的MECE模型，需保证每个细分指标是完全独立且相互穷尽的。</p>\n<p>总结一下OSM模型的内容及其与AARRR,UJM,MECE模型之间的关系，OSM模型是指标体系建设的指导思想，理解业务KPI是OSM模型的核心；制定行动策略是实现业务KPI的手段，而AARRR和UJM模型是实现策略制定的方法论；制定细分指标是评估业务策略优劣的方法，而MECE模型制定细分指标的方法论。</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428135830696-20220428140228425.png\" alt=\"\"></p>\n<h4 id=\"2-AARRR模型和UJM模型–理清用户生命周期以及行为路径\"><a href=\"#2-AARRR模型和UJM模型–理清用户生命周期以及行为路径\" class=\"headerlink\" title=\"2. AARRR模型和UJM模型–理清用户生命周期以及行为路径\"></a><strong>2. AARRR模型和UJM模型–理清用户生命周期以及行为路径</strong></h4><p>AARRR和UJM模型都是路径模型，二者原理相似</p>\n<p>不过AARRR是从产品角度出发，简而言之就是 拉新，促活，留存，付费，推广。</p>\n<p>UJM是从用户角度出发，描述了用户进入产品的整个路径流程，即注册，登陆，加购，购买，复购链路流程。</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140235721.png\" alt=\"img\"></p>\n<p><strong>3.MECE模型–指标体系分级治理</strong></p>\n<p>指标体系分级治理</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140457796.png\" alt=\"img\"></p>\n<p>示例：以GMV为例，用三个步骤，四个模型教会你搭建指标体系的方法 </p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140643364.png\" alt=\"img\"></p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16.jpeg\" alt=\"img\"></p>\n<p>Q：指标分级治理拆这么细有什么用？</p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">指标&#x3D;数据+业务场景，能够指导业务制定下一步行动方案。</span><br></pre></td></tr></table></figure>\n\n<p><strong>一个好的指标的应该能够解决以下5W的问题：</strong></p>\n<h2 id=\"1、-初识指标与指标体系\"><a href=\"#1、-初识指标与指标体系\" class=\"headerlink\" title=\"1、 初识指标与指标体系\"></a>1、 初识指标与指标体系</h2><h3 id=\"1-1、使用场景（who、when、where\"><a href=\"#1-1、使用场景（who、when、where\" class=\"headerlink\" title=\"1.1、使用场景（who、when、where)\"></a>1.1、使用场景（who、when、where)</h3><p>解决指标的维度问题，通过定义维度可以明确指标所能支持的分析场景，例如【体脂率】可以支持性别、年龄段、地区等维度，那对应的可以支持对不同性别、年龄段、地区人群的分析。</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/d78ca97898e7389cfc605a08ab9a29e4.jpeg\" alt=\"img\"></p>\n<h4 id=\"1-1-2、指标定义（what\"><a href=\"#1-1-2、指标定义（what\" class=\"headerlink\" title=\"1.1.2、指标定义（what)\"></a>1.1.2、指标定义（what)</h4><p>解决指标的计算口径问题，大多数情况下需要解决的是同名不同义、同义不同名的问题，如下图的销售额、上架数量两个指标所示。</p>\n<h4 id=\"1-1-3、指标用途（why）\"><a href=\"#1-1-3、指标用途（why）\" class=\"headerlink\" title=\"1.1.3、指标用途（why）\"></a><strong>1.1.3、指标用途（why）</strong></h4><p>解决指标的逻辑问题，明确指标与指标之间的逻辑关系，如：销售利润=销售额-采购成本-头程税费-退税差额，毛利润=销售利润-呆滞计提-资金占用利息。</p>\n<h3 id=\"1-2-指标体系\"><a href=\"#1-2-指标体系\" class=\"headerlink\" title=\"1.2 指标体系\"></a>1.2 指标体系</h3><h4 id=\"1-2-1、海盗指标法（AARRR\"><a href=\"#1-2-1、海盗指标法（AARRR\" class=\"headerlink\" title=\"1.2.1、海盗指标法（AARRR)\"></a>1.2.1、海盗指标法（AARRR)</h4><p><img src=\"http://img.wqkenqing.ren/typora_img/41ab4c78a27cf0f143973503178ba10a.jpeg\" alt=\"img\"></p>\n<ol>\n<li>Acquisition (获取)</li>\n<li>Activation （激活）</li>\n<li>Retention (留存)</li>\n<li>Revenue  （收入）</li>\n<li>Referral (推荐)</li>\n</ol>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/8a6b93260f5efad8fa90c6013175369d.jpeg\" alt=\"img\"></p>\n<p>这个模型对于流量→收入转化的指标建设有相当的指导意义，适用于大部分的互联网公司。但对于传统电商这类关注供应链、管理成本的企业来说，这套指标体系并不能覆盖所有的场景，因此我们主要采用的是第一关键指标法作为指标体系建设的理论基础。</p>\n<h4 id=\"1-2-2、第一关键指标法\"><a href=\"#1-2-2、第一关键指标法\" class=\"headerlink\" title=\"1.2.2、第一关键指标法\"></a>1.2.2、第一关键指标法</h4><p>核心思想:在任意一个时间点，肯定只有一个最关键的指标,但随着业务的发展关注重点会有变化。</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/73c45235ef43a13578bccc1c41c764b4.jpeg\" alt=\"img\"></p>\n<h4 id=\"1-2-3-指标体系搭建过程\"><a href=\"#1-2-3-指标体系搭建过程\" class=\"headerlink\" title=\"1.2.3 指标体系搭建过程\"></a>1.2.3 指标体系搭建过程</h4><h4 id=\"1-2-3-1-确定第一关键指标\"><a href=\"#1-2-3-1-确定第一关键指标\" class=\"headerlink\" title=\"1.2.3.1. 确定第一关键指标\"></a>1.2.3.1. 确定第一关键指标</h4><p><img src=\"http://img.wqkenqing.ren/typora_img/fcc3aa8d6aca9f55c9606a4130bb913e.jpeg\" alt=\"img\"></p>\n<h4 id=\"1-2-3-2-划分模块\"><a href=\"#1-2-3-2-划分模块\" class=\"headerlink\" title=\"1.2.3.2. 划分模块\"></a>1.2.3.2. 划分模块</h4><p>​    <img src=\"http://img.wqkenqing.ren/typora_img/1e5a5f0b67f63d57e1522f050577d958.jpeg\" alt=\"img\"></p>\n<h4 id=\"1-2-3-3-梳理指标逻辑关系\"><a href=\"#1-2-3-3-梳理指标逻辑关系\" class=\"headerlink\" title=\"1. 2.3.3. 梳理指标逻辑关系\"></a>1. 2.3.3. 梳理指标逻辑关系</h4><p>确定各个模块的核心关注指标之后，我们从第一关键指标开始，从上往下梳理指标之间的逻辑关系。</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/27c2b0aebbbc94160c43ed45616a1bde.jpeg\" alt=\"img\"></p>\n<p>原文地址</p>\n<p><a href=\"https://blog.csdn.net/rlnLo2pNEfx9c/article/details/117376482\" target=\"_blank\" rel=\"noopener\">指标</a></p>\n<h2 id=\"2、指标体系构建方法-四个模型\"><a href=\"#2、指标体系构建方法-四个模型\" class=\"headerlink\" title=\"2、指标体系构建方法-四个模型\"></a>2、指标体系构建方法-四个模型</h2><h3 id=\"2-1-构建数据指标体系的方法概括\"><a href=\"#2-1-构建数据指标体系的方法概括\" class=\"headerlink\" title=\"2.1 构建数据指标体系的方法概括\"></a>2.1 构建数据指标体系的方法概括</h3><p>数据指标体系建设的方法可以总结为三个步骤</p>\n<ol>\n<li>明确业务目标</li>\n<li>理清用户生命周期及行为路径</li>\n<li>指标分层治理</li>\n</ol>\n<p>以上三个步骤涉及了</p>\n<ol>\n<li>OSM(Object,Strategy,Measure)</li>\n<li>AARRR(Acquisition,Activation,Retention,Revenue,Referral)</li>\n<li>UJM(User, Journey, Map)</li>\n<li>MECE (Mutually Exclusive, Collectively Exhaustive)</li>\n</ol>\n<p>四个模型</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16.png\" alt=\"img\"></p>\n<p><strong>1.OSM模型-明确业务目标，数据赋能业务</strong></p>\n<p>OSM模型是 Object, Strategy, Measure的缩写。</p>\n<p>数据服务于业务才能赋能业务，数据脱离业务，那么数据就会失去其价值。</p>\n<p>我们在建立数据指标体系之前，一定要清晰的了解业务目标，也就是模型中的O,Object。换句话说，业务的目标也就是业务的核心KPI，了解业务的核心KPI能够帮助我们快速理清指标体系的方向。</p>\n<p>了解业务目标方向之后，就需要制定相应的行动策略，也就是模型中的S,Strategy。行动策略的制定可以根据产品生命周期或者用户行为路径进行拆解，也就是把业务的核心KPI拆解到产品生命周期(AARRR)或者用户行为路径(UJM)当中，在整条链路当中分析可以提升核心KPI的点。</p>\n<p>就需要我们制定较细的评估指标，也就是模型中的M,Measure。评估指标的制定是将产品链路或者行为路径中的各个核心KPI进行下钻细分，这里用到的方法就是麦肯锡著名的MECE模型，需保证每个细分指标是完全独立且相互穷尽的。</p>\n<p>总结一下OSM模型的内容及其与AARRR,UJM,MECE模型之间的关系，OSM模型是指标体系建设的指导思想，理解业务KPI是OSM模型的核心；制定行动策略是实现业务KPI的手段，而AARRR和UJM模型是实现策略制定的方法论；制定细分指标是评估业务策略优劣的方法，而MECE模型制定细分指标的方法论。</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428135830696-20220428140228425.png\" alt=\"\"></p>\n<h4 id=\"2-AARRR模型和UJM模型–理清用户生命周期以及行为路径\"><a href=\"#2-AARRR模型和UJM模型–理清用户生命周期以及行为路径\" class=\"headerlink\" title=\"2. AARRR模型和UJM模型–理清用户生命周期以及行为路径\"></a><strong>2. AARRR模型和UJM模型–理清用户生命周期以及行为路径</strong></h4><p>AARRR和UJM模型都是路径模型，二者原理相似</p>\n<p>不过AARRR是从产品角度出发，简而言之就是 拉新，促活，留存，付费，推广。</p>\n<p>UJM是从用户角度出发，描述了用户进入产品的整个路径流程，即注册，登陆，加购，购买，复购链路流程。</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140235721.png\" alt=\"img\"></p>\n<p><strong>3.MECE模型–指标体系分级治理</strong></p>\n<p>指标体系分级治理</p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140457796.png\" alt=\"img\"></p>\n<p>示例：以GMV为例，用三个步骤，四个模型教会你搭建指标体系的方法 </p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16-20220428140643364.png\" alt=\"img\"></p>\n<p><img src=\"http://img.wqkenqing.ren/typora_img/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5piv54eV546L5ZGA,size_20,color_FFFFFF,t_70,g_se,x_16.jpeg\" alt=\"img\"></p>\n<p>Q：指标分级治理拆这么细有什么用？</p>\n"},{"title":"elk使用","date":"2020-06-16T16:00:00.000Z","_content":" <!--more-->\n\n # elk使用\n\n \n","source":"_posts/王阁/技术/大数据/es/elk使用.md","raw":"title:  elk使用\ndate: 2020-06-17\ntags: [logstash,beats]\n---\n <!--more-->\n\n # elk使用\n\n \n","slug":"王阁/技术/大数据/es/elk使用","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsg8005eu6pw00iohuov","content":" <a id=\"more\"></a>\n\n<h1 id=\"elk使用\"><a href=\"#elk使用\" class=\"headerlink\" title=\"elk使用\"></a>elk使用</h1>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"elk使用\"><a href=\"#elk使用\" class=\"headerlink\" title=\"elk使用\"></a>elk使用</h1>"},{"title":"Mongodb使用","date":"2021-04-26T13:52:35.000Z","_content":" <!--more-->\n # Mongodb\n ## 导出\n `json`\n\n mongoexport --host 172.23.8.16 --port=1240 -u spark -p spark --db locateInfo --collection dataCollect --out locateInfo.json\n\n\n`csv`\nmongoexport --host 172.23.8.16 --port=1240 -u spark -p spark --db locateInfo --collection dataCollect  --csv -f deviceId, gnssTime --out locateInfo.dat\n","source":"_posts/王阁/技术/大数据/Mongodb/常用命令.md","raw":"title:  Mongodb使用\ndate: \ntags: [ ]\n---\n <!--more-->\n # Mongodb\n ## 导出\n `json`\n\n mongoexport --host 172.23.8.16 --port=1240 -u spark -p spark --db locateInfo --collection dataCollect --out locateInfo.json\n\n\n`csv`\nmongoexport --host 172.23.8.16 --port=1240 -u spark -p spark --db locateInfo --collection dataCollect  --csv -f deviceId, gnssTime --out locateInfo.dat\n","slug":"王阁/技术/大数据/Mongodb/常用命令","published":1,"updated":"2022-05-09T06:58:32.590Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgc005gu6pwbkfaaucp","content":" <a id=\"more\"></a>\n<h1 id=\"Mongodb\"><a href=\"#Mongodb\" class=\"headerlink\" title=\"Mongodb\"></a>Mongodb</h1><h2 id=\"导出\"><a href=\"#导出\" class=\"headerlink\" title=\"导出\"></a>导出</h2><p> <code>json</code></p>\n<p> mongoexport –host 172.23.8.16 –port=1240 -u spark -p spark –db locateInfo –collection dataCollect –out locateInfo.json</p>\n<p><code>csv</code><br>mongoexport –host 172.23.8.16 –port=1240 -u spark -p spark –db locateInfo –collection dataCollect  –csv -f deviceId, gnssTime –out locateInfo.dat</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Mongodb\"><a href=\"#Mongodb\" class=\"headerlink\" title=\"Mongodb\"></a>Mongodb</h1><h2 id=\"导出\"><a href=\"#导出\" class=\"headerlink\" title=\"导出\"></a>导出</h2><p> <code>json</code></p>\n<p> mongoexport –host 172.23.8.16 –port=1240 -u spark -p spark –db locateInfo –collection dataCollect –out locateInfo.json</p>\n<p><code>csv</code><br>mongoexport –host 172.23.8.16 –port=1240 -u spark -p spark –db locateInfo –collection dataCollect  –csv -f deviceId, gnssTime –out locateInfo.dat</p>"},{"title":"elasticsearch dsl 详解","date":"2020-06-15T16:00:00.000Z","_content":" <!--more-->\n\n # DSL\n\n dsl the full name is \n`Domain Specific Language`\n\nit is divided to two parts \n\nLeaf query clauses:\n\nparticular query such as :term, match,range\n\n\nCompound query clauses:\n\nCompound query clauses wrap other leaf or compound queries and are used to combine multiple queries in a logical fashion (such as the bool or dis_max query), or to alter their behaviour (such as the constant_score query).\n\n\n ## Match all query\n\n全文查询，用于对分词的字段进行搜索。会用查询字段的分词器对查询的文本进行分词生成查询。可用于短语查询、模糊查询、前缀查询、临近查询等查询场景\n\n`query_all`\n\n```\nGET /_search\n{\n    \"query\": {\n        \"match_all\": {}\n    }\n}\n\n```\n\n## Full text queries\n\n### match \n### match_phrase\n\n对句子,进行短语查询 \n\n### match_phrase_prefix\n### multi_match\n### common terms \n### query_string \n### simple_query_string ","source":"_posts/王阁/技术/大数据/es/esDSL详解.md","raw":"title:  elasticsearch dsl 详解\ndate: 2020-06-16\ntags: [dsl,elasticsearch]\n\n---\n <!--more-->\n\n # DSL\n\n dsl the full name is \n`Domain Specific Language`\n\nit is divided to two parts \n\nLeaf query clauses:\n\nparticular query such as :term, match,range\n\n\nCompound query clauses:\n\nCompound query clauses wrap other leaf or compound queries and are used to combine multiple queries in a logical fashion (such as the bool or dis_max query), or to alter their behaviour (such as the constant_score query).\n\n\n ## Match all query\n\n全文查询，用于对分词的字段进行搜索。会用查询字段的分词器对查询的文本进行分词生成查询。可用于短语查询、模糊查询、前缀查询、临近查询等查询场景\n\n`query_all`\n\n```\nGET /_search\n{\n    \"query\": {\n        \"match_all\": {}\n    }\n}\n\n```\n\n## Full text queries\n\n### match \n### match_phrase\n\n对句子,进行短语查询 \n\n### match_phrase_prefix\n### multi_match\n### common terms \n### query_string \n### simple_query_string ","slug":"王阁/技术/大数据/es/esDSL详解","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgd005iu6pw7m569363","content":" <a id=\"more\"></a>\n\n<h1 id=\"DSL\"><a href=\"#DSL\" class=\"headerlink\" title=\"DSL\"></a>DSL</h1><p> dsl the full name is<br><code>Domain Specific Language</code></p>\n<p>it is divided to two parts </p>\n<p>Leaf query clauses:</p>\n<p>particular query such as :term, match,range</p>\n<p>Compound query clauses:</p>\n<p>Compound query clauses wrap other leaf or compound queries and are used to combine multiple queries in a logical fashion (such as the bool or dis_max query), or to alter their behaviour (such as the constant_score query).</p>\n<h2 id=\"Match-all-query\"><a href=\"#Match-all-query\" class=\"headerlink\" title=\"Match all query\"></a>Match all query</h2><p>全文查询，用于对分词的字段进行搜索。会用查询字段的分词器对查询的文本进行分词生成查询。可用于短语查询、模糊查询、前缀查询、临近查询等查询场景</p>\n<p><code>query_all</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;query&quot;: &#123;</span><br><span class=\"line\">        &quot;match_all&quot;: &#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Full-text-queries\"><a href=\"#Full-text-queries\" class=\"headerlink\" title=\"Full text queries\"></a>Full text queries</h2><h3 id=\"match\"><a href=\"#match\" class=\"headerlink\" title=\"match\"></a>match</h3><h3 id=\"match-phrase\"><a href=\"#match-phrase\" class=\"headerlink\" title=\"match_phrase\"></a>match_phrase</h3><p>对句子,进行短语查询 </p>\n<h3 id=\"match-phrase-prefix\"><a href=\"#match-phrase-prefix\" class=\"headerlink\" title=\"match_phrase_prefix\"></a>match_phrase_prefix</h3><h3 id=\"multi-match\"><a href=\"#multi-match\" class=\"headerlink\" title=\"multi_match\"></a>multi_match</h3><h3 id=\"common-terms\"><a href=\"#common-terms\" class=\"headerlink\" title=\"common terms\"></a>common terms</h3><h3 id=\"query-string\"><a href=\"#query-string\" class=\"headerlink\" title=\"query_string\"></a>query_string</h3><h3 id=\"simple-query-string\"><a href=\"#simple-query-string\" class=\"headerlink\" title=\"simple_query_string\"></a>simple_query_string</h3>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"DSL\"><a href=\"#DSL\" class=\"headerlink\" title=\"DSL\"></a>DSL</h1><p> dsl the full name is<br><code>Domain Specific Language</code></p>\n<p>it is divided to two parts </p>\n<p>Leaf query clauses:</p>\n<p>particular query such as :term, match,range</p>\n<p>Compound query clauses:</p>\n<p>Compound query clauses wrap other leaf or compound queries and are used to combine multiple queries in a logical fashion (such as the bool or dis_max query), or to alter their behaviour (such as the constant_score query).</p>\n<h2 id=\"Match-all-query\"><a href=\"#Match-all-query\" class=\"headerlink\" title=\"Match all query\"></a>Match all query</h2><p>全文查询，用于对分词的字段进行搜索。会用查询字段的分词器对查询的文本进行分词生成查询。可用于短语查询、模糊查询、前缀查询、临近查询等查询场景</p>\n<p><code>query_all</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;query&quot;: &#123;</span><br><span class=\"line\">        &quot;match_all&quot;: &#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Full-text-queries\"><a href=\"#Full-text-queries\" class=\"headerlink\" title=\"Full text queries\"></a>Full text queries</h2><h3 id=\"match\"><a href=\"#match\" class=\"headerlink\" title=\"match\"></a>match</h3><h3 id=\"match-phrase\"><a href=\"#match-phrase\" class=\"headerlink\" title=\"match_phrase\"></a>match_phrase</h3><p>对句子,进行短语查询 </p>\n<h3 id=\"match-phrase-prefix\"><a href=\"#match-phrase-prefix\" class=\"headerlink\" title=\"match_phrase_prefix\"></a>match_phrase_prefix</h3><h3 id=\"multi-match\"><a href=\"#multi-match\" class=\"headerlink\" title=\"multi_match\"></a>multi_match</h3><h3 id=\"common-terms\"><a href=\"#common-terms\" class=\"headerlink\" title=\"common terms\"></a>common terms</h3><h3 id=\"query-string\"><a href=\"#query-string\" class=\"headerlink\" title=\"query_string\"></a>query_string</h3><h3 id=\"simple-query-string\"><a href=\"#simple-query-string\" class=\"headerlink\" title=\"simple_query_string\"></a>simple_query_string</h3>"},{"title":"spark操作.md","date":"2019-05-16T16:00:00.000Z","_content":"spark编程积累\n\n<!--more-->\n\n# spark编程\n\n## Input\n### hdfs\n操作hdfs比较常规,直接通过\ncontext.textfile(path) //即可实现\n### hbase\nhbase 则要通过newAPIHadoopRDD来实现\n```java\n\nJavaPairRDD<ImmutableBytesWritable, Result> javaRDD = jsc.newAPIHadoopRDD(HbaseOperate.getConf(), TableInputFormat.class, ImmutableBytesWritable.class, Result.class);\n\n```\n这里要特别说明的是,这里的conf承担了更多的责任,如指定表名,指定scan传输字符串等.\n```java\n\n    Configuration hconf = HbaseOperate.getConf();\n        Scan scan = new Scan();\n        hconf.set(TableInputFormat.INPUT_TABLE, \"company\");\n        hconf.set(TableInputFormat.SCAN, convertScanToString(scan));\n\n```\n参考以上这段代码\n\n另\n```java\n   static String convertScanToString(Scan scan) throws IOException {\n        ClientProtos.Scan proto = ProtobufUtil.toScan(scan);\n        return Base64.encodeBytes(proto.toByteArray());\n    }\n```\n以上是为实现scan指令传输字符的封装.\n\n两者底层都是通过persist实现\n\n","source":"_posts/王阁/技术/hexo/spark/spark操作.md","raw":"---\n\ntitle: spark操作.md\ndate: 2019-05-17\ntags: \n\n---\nspark编程积累\n\n<!--more-->\n\n# spark编程\n\n## Input\n### hdfs\n操作hdfs比较常规,直接通过\ncontext.textfile(path) //即可实现\n### hbase\nhbase 则要通过newAPIHadoopRDD来实现\n```java\n\nJavaPairRDD<ImmutableBytesWritable, Result> javaRDD = jsc.newAPIHadoopRDD(HbaseOperate.getConf(), TableInputFormat.class, ImmutableBytesWritable.class, Result.class);\n\n```\n这里要特别说明的是,这里的conf承担了更多的责任,如指定表名,指定scan传输字符串等.\n```java\n\n    Configuration hconf = HbaseOperate.getConf();\n        Scan scan = new Scan();\n        hconf.set(TableInputFormat.INPUT_TABLE, \"company\");\n        hconf.set(TableInputFormat.SCAN, convertScanToString(scan));\n\n```\n参考以上这段代码\n\n另\n```java\n   static String convertScanToString(Scan scan) throws IOException {\n        ClientProtos.Scan proto = ProtobufUtil.toScan(scan);\n        return Base64.encodeBytes(proto.toByteArray());\n    }\n```\n以上是为实现scan指令传输字符的封装.\n\n两者底层都是通过persist实现\n\n","slug":"王阁/技术/hexo/spark/spark操作","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgd005ku6pwab764vi6","content":"<p>spark编程积累</p>\n<a id=\"more\"></a>\n\n<h1 id=\"spark编程\"><a href=\"#spark编程\" class=\"headerlink\" title=\"spark编程\"></a>spark编程</h1><h2 id=\"Input\"><a href=\"#Input\" class=\"headerlink\" title=\"Input\"></a>Input</h2><h3 id=\"hdfs\"><a href=\"#hdfs\" class=\"headerlink\" title=\"hdfs\"></a>hdfs</h3><p>操作hdfs比较常规,直接通过<br>context.textfile(path) //即可实现</p>\n<h3 id=\"hbase\"><a href=\"#hbase\" class=\"headerlink\" title=\"hbase\"></a>hbase</h3><p>hbase 则要通过newAPIHadoopRDD来实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">JavaPairRDD&lt;ImmutableBytesWritable, Result&gt; javaRDD = jsc.newAPIHadoopRDD(HbaseOperate.getConf(), TableInputFormat<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">ImmutableBytesWritable</span>.<span class=\"title\">class</span>, <span class=\"title\">Result</span>.<span class=\"title\">class</span>)</span>;</span><br></pre></td></tr></table></figure>\n<p>这里要特别说明的是,这里的conf承担了更多的责任,如指定表名,指定scan传输字符串等.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">Configuration hconf = HbaseOperate.getConf();</span><br><span class=\"line\">    Scan scan = <span class=\"keyword\">new</span> Scan();</span><br><span class=\"line\">    hconf.set(TableInputFormat.INPUT_TABLE, <span class=\"string\">\"company\"</span>);</span><br><span class=\"line\">    hconf.set(TableInputFormat.SCAN, convertScanToString(scan));</span><br></pre></td></tr></table></figure>\n<p>参考以上这段代码</p>\n<p>另</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> String <span class=\"title\">convertScanToString</span><span class=\"params\">(Scan scan)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">     ClientProtos.Scan proto = ProtobufUtil.toScan(scan);</span><br><span class=\"line\">     <span class=\"keyword\">return</span> Base64.encodeBytes(proto.toByteArray());</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>以上是为实现scan指令传输字符的封装.</p>\n<p>两者底层都是通过persist实现</p>\n","site":{"data":{}},"excerpt":"<p>spark编程积累</p>","more":"<h1 id=\"spark编程\"><a href=\"#spark编程\" class=\"headerlink\" title=\"spark编程\"></a>spark编程</h1><h2 id=\"Input\"><a href=\"#Input\" class=\"headerlink\" title=\"Input\"></a>Input</h2><h3 id=\"hdfs\"><a href=\"#hdfs\" class=\"headerlink\" title=\"hdfs\"></a>hdfs</h3><p>操作hdfs比较常规,直接通过<br>context.textfile(path) //即可实现</p>\n<h3 id=\"hbase\"><a href=\"#hbase\" class=\"headerlink\" title=\"hbase\"></a>hbase</h3><p>hbase 则要通过newAPIHadoopRDD来实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">JavaPairRDD&lt;ImmutableBytesWritable, Result&gt; javaRDD = jsc.newAPIHadoopRDD(HbaseOperate.getConf(), TableInputFormat<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">ImmutableBytesWritable</span>.<span class=\"title\">class</span>, <span class=\"title\">Result</span>.<span class=\"title\">class</span>)</span>;</span><br></pre></td></tr></table></figure>\n<p>这里要特别说明的是,这里的conf承担了更多的责任,如指定表名,指定scan传输字符串等.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">Configuration hconf = HbaseOperate.getConf();</span><br><span class=\"line\">    Scan scan = <span class=\"keyword\">new</span> Scan();</span><br><span class=\"line\">    hconf.set(TableInputFormat.INPUT_TABLE, <span class=\"string\">\"company\"</span>);</span><br><span class=\"line\">    hconf.set(TableInputFormat.SCAN, convertScanToString(scan));</span><br></pre></td></tr></table></figure>\n<p>参考以上这段代码</p>\n<p>另</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> String <span class=\"title\">convertScanToString</span><span class=\"params\">(Scan scan)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">     ClientProtos.Scan proto = ProtobufUtil.toScan(scan);</span><br><span class=\"line\">     <span class=\"keyword\">return</span> Base64.encodeBytes(proto.toByteArray());</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>以上是为实现scan指令传输字符的封装.</p>\n<p>两者底层都是通过persist实现</p>"},{"title":"es常用命令","date":"2020-02-24T16:00:00.000Z","_content":"\n查看集群是否健康\n\n\n```\nGET /_cluster/healt\n\n```\n\n查看节点列表\n\n\n```\nGET /_cat/nodes?v\n\n加v将表头显示出来\n\n```\n\n\n## 索引\n\n### 查询所有索引\n\n```\nGET /_cat/indices?v\n```\n\n### 查看某个索引的映射\n\n```\nGET /indeName/mapping\n```\n\n### 查看某个索引的设置\n\n```\nGET /indeName/mapping\n\n```\n### 添加一个索引\n\n```\nPUT /indexName\n{\n  \"settings\": {\n     \"number_of_shards\": 3,\n     \"number_of_replicas\": 1\n   },\n   \"mappings\": {\n     \"man\": {\n       \"dynamic\": \"strict\",\n       \"properties\": {\n         \"name\": {\n           \"type\": \"text\"\n         },\n         \"age\": {\n           \"type\": \"integer\"\n         },\n         \"birthday\": {\n           \"type\": \"date\",\n           \"format\": \"yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis\"\n         },\n         \"address\":{\n           \"dynamic\": \"true\",\n           \"type\": \"object\"\n         }\n       }\n     }\n   }\n  }\n\n```\n\ndynamic关键词说明:\n\"dynamic\":\"strict\"  表示如果遇到陌生field会报错\n\"dynamic\": true  表示如果遇到陌生字段，就进行dynamic mapping\n\"dynamic\": \"false\"   表示如果遇到陌生字段，就忽略\n\n---\n\n### 删除索引\n\n删除单个索引\n\n```\n\nDELETE /indexName\n\n```\n\n删除多个\n\n```\n\nDELETE /indexName1,indexName2\n\n```\n\n### 添加字段映射\n\n\n```\nPUT /indexName/_mapping/Field\n{\n  \"properties\":{\n    \"Field\":{\n      \"type\":\"text\"\n    }\n  }\n}\n```\n\n### 索引的别名\n\n\n#### 创建索引别名\n\n```\nPUT /indeName/_alias/aliasName\n\n```\n\n获取索引别名\n\n```\nGET /indexName/_alias/*\n\n```\n查询别名对应的索引\n\n```\nGET /*/_alias/aliasName\n\n```\n\n\n## 文档\n\n### 向索引中添加文档\n\n1. 自定义ID\n\n```\nPUT /indexName/type/id\n{\n  \"Field1\":\"message\",\n  \"Field2\":\"message\",\n  \"Field3\":\"message\",\n  \"Field4\":\"message\"\n}\n\n```  \n\n2. 随机生成id\n\n```\nPOST /indexName/type\n{\n  \"Field1\":\"message\",\n  \"Field2\":\"message\",\n  \"Field3\":\"message\",\n  \"Field4\":\"message\"\n}\n\n```\n\n后者则会自动生成id字符串\n\n3. 修改文档\n\n全文修改,即所有字段信息都要修改\n\n```\nPUT /indexName/type/id\n{\n  \"Field1\":\"update message\",\n  \"Field2\":\"update message\",\n  \"Field3\":\"message\",\n  \"Field4\":\"message\"\n}\n```\n部份修改\n\n```\nPOST /indexName/type/id/_update\n{\n  \"doc\": {\n    \"FIELD\": \"message\"\n  }\n}\n\n```\n脚本(再深入)\n\n```\n\nPOST /indexName/type/_id/_update\n{\n  \"script\": {\n    \"lang\": \"painless\",\n    \"source\": \"ctx._source.age += 10\"\n  }\n}\n```\n在修改document的时候，如果该文档不存在，则使用upsert操作进行初始化\n\n```\nPOST people/man/1/_update\n{\n  \"script\": \"ctx._source.age += 10\",\n  \"upsert\": {\n    \"age\": 20\n  }\n}\n```\n\n### 删除文档\n\n\n删除单个文档\n\n```\nDELETE /indexName/type/id\n\n```\n\n删除type下所有的文档\n\n```\nPOST /indexName/type/_delete_by_query?conflicts=proceed\n{\n  \"query\":{\n    \"match_all\":{\n\n    }\n  }\n}\n\n```\n\n### 查询文档\n\n查询单个文档\n\n```\nGET /indexName/type/id\n\n```\n\n批量查询文档(待验证)\n\n```\nGET /_mget\n{\n  \"docs\": [\n      {\n        \"_index\": \"index1\",\n        \"_type\": \"type\",\n        \"_id\": 1\n      },\n      {\n        \"_index\": \"index2\",\n        \"_type\": \"type\",\n        \"_id\": 2\n      }\n    ]\n}\n\n```\n```\n\nGET /indexName/type/_mget\n{\n\"docs\":[\n{\n  \"FEILD\":\"value\"\n},\n{\n  \"FEILD2\":\"value\"\n}\n  ]\n}\n\n\n```\n\n\n查询所有文档\n\n简单查询\n\n```\nGET /indexName/_serach\n\n```\n\n法二\n\n```\nPOST /people/_serach\n{\n  \"query\":{\n    \"match_all\":{\n    }\n  }\n}\n\n```\n查询某些字段内容\n```\n\n后面跟了 ?_source=field1,field2\n\nPOST /people/_serach?_source=field1,field2\n{\n  \"query\":{\n    \"match_all\":{\n    }\n  }\n}\n\n```\n\n查询多个索引下的多个type\n\n```\nGET /index1,index2/type1,type2/_search\n```\n\n查询所有索引下的部分type\n```\nGET /_all/type1,type2/_search\n\n```\n\n\n### 模糊查询\n```\n\nPOST /indexName/_search\n{\n  \"query\":{\n    \"match\":{\n      \"field\":\"message\"\n    }\n  }\n  ,\n  \"sort\":[\n  {\n    \"filed\":{\"order\":\"desc\"}\n  }\n  ]\n}\n\n\n```\n**注意**\nmessage将会被拆分进行匹配,若message是中文,则会按切分后的每个字来匹配,若\nmessage是英语,则会是按每个单词来匹配\n\n![](http://img.wqkenqing.ren/51ccc5cad8b8fbbbb6ef55d3106bfe43.png)\n![示列图](http://img.wqkenqing.ren/47a3ffe716f0026c004b155836a56641.png)\n\n\n全文搜索(按准度)\n\n```\nGET indexName/_search\n{\n  \"query\":{\n    \"match\":{\n      \"Field\":{\n        \"query\":\"val1 val2\",\n        \"operator\":\"and\"\n      }\n    }\n  }\n}\n\n```\n\n即Fileld 中必须有val1,val2\n\n\n按匹配度查询\n```\nGET /indexName/_search\n{\n\"query\":{\n  \"match\":{\n    \"Field\":{\n      \"query\":\"val1 val2 val3\"\n      \"minimum_should_match\":\"val\" eg:20%\n    }\n\n  }\n}\n}\n```\n即indexName,按Field中 val1 val2 val3 匹配度达到val即返回查询\n\n\n### 高级查询\n\n简单精准查询\n\n```\nGET /indexName/_search\n{\n  \"query\":{\n    \"match_phrase\":{\n      \"Field\":\"val\"\n    }\n  }\n}\n```\n即查询要完全匹配val,但若val只有一个中文,则会Field只要含有val,就会被查出\n\n\nslop结合\n```\nGET /people/_search\n{\n  \"query\": {\n    \"match_phrase\": {\n      \"name\": {\n        \"query\": \"张三\",\n        \"slop\": 3\n      }\n    }\n  }\n}\n```\n解读：slop是移动次数，上面案例表示“张”、“三”两个字可以经过最多挪动3次查询到！\n\nrescore (重打分）\n\n```\nGET /forum/article/_search\n{\n  \"query\": {\n    \"match\": {\n      \"content\": \"java spark\"\n    }\n  },\n  \"rescore\":{\n    \"window_size\": 50,\n    \"query\": {\n      \"rescore_query\": {\n        \"match_phrase\": {\n          \"content\": {\n            \"query\": \"java spark\",\n            \"slop\": 50\n          }\n        }\n      }\n    }\n  }\n}\n\n```\n\n\n多字段匹配查询\n\n```\nGET /indexName/_search\n{\n  \"query\":{\n    \"multi_match\":{\n      \"query\":\"val\"\n      \"fields\":[\"val1\",\"val2\"]\n    }\n  }\n}\n\n```\n\n在多个字段中,也是模糊查询val\n```\nGET /people/_search\n{\n  \"query\": {\n    \"query_string\": {\n      \"query\": \"(叶良辰 AND 火) OR (赵日天 AND 风)\",\n      \"fields\": [\"name\",\"desc\"]\n    }\n  }\n}\n```\n\n### 字段查询\n\n精准查询\n\n```\nGET /indexName/_search\n{\n\"query\":{\n  \"term\":{\n    \"field\":\"val\"\n  }\n}\n}\n\n\n```\n\n分页查询\n\n```\nGET /indexName/_search\n{\n  \"query\":{\n    \"match_all\":{}\n  },\n  \"from\":num,\n  \"size\":num\n}\n```\n\n### 范围查询\n\n数据值型\n\n```\n\nGET /people/_search\n{\n  \"query\": {\n    \"range\": {\n      \"age\": {\n        \"gt\": 16,\n        \"lte\": 30\n      }\n    }\n  }\n}\n\n```\n日期类型\n\n```\nGET /people/_search\n{\n  \"query\": {\n    \"range\": {\n      \"birthday\": {\n        \"gte\": \"2013-01-01\",\n        \"lte\": \"now\"\n      }\n    }\n  }\n}\n\n```\n\n\n```\n\n\nGET book/_search\n{\n  \"query\": {\n    \"constant_score\": {\n      \"filter\": {\n        \"range\": {\n          \"date\": {\n            \"gt\": \"now-1M\"\n          }\n        }\n      },\n      \"boost\": 1.2\n    }\n  }\n}\n\n```\n\n\"gt\": \"now-1M\"表示从今天开始，往前推一个月！\n\n\n### 过滤查询\n\n法一\n\n```\n\n\nPOST /people/man/_search\n{\n  \"query\": {\n    \"constant_score\": {\n      \"filter\": {\n        \"range\": {\n          \"age\": {\n            \"gte\": 20,\n            \"lte\": 30\n          }\n        }\n      },\n      \"boost\": 1.2\n    }\n  }\n}\n\n\n```\n\n法二\n\n```\nPOST /people/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"filter\": {\n        \"term\": {\n          \"age\": 18\n        }\n      }\n    }\n  }\n}\n```\n\n\n### 布尔查询\nshould查询\n注意：should相当于 或 ，里面的match也是模糊匹配\n\n```\nPOST /people/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"should\": [\n        {\n          \"match\": {\n            \"name\": \"叶良辰\"\n          }\n        },\n        {\n          \"match\": {\n            \"desc\": \"赵日天\"\n          }\n        }\n      ]\n    }\n  }\n}\n\n```\n\nmust查询\n注意：两个条件都要满足，并且这里也会把must里面的“叶良辰”拆分成“叶”、“良”和“辰”进行查询；“赵日天”拆分成“赵”、“日”、和“天”！\n\n\n\n```\n\nPOST /people/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"match\": {\n            \"name\": \"叶良辰\"\n          }\n        },\n        {\n          \"match\": {\n            \"desc\": \"赵日天\"\n          }\n        }\n      ]\n    }\n  }\n}\n\n```\n\nmust与filter相结合\n这里也会把must里面的“叶良辰”拆分成“叶”、“良”和“辰”进行查询\n\n\n\n```\n\nPOST /people/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"match\": {\n            \"name\": \"叶良辰\"\n          }\n        },\n        {\n          \"match\": {\n            \"desc\": \"赵日天\"\n          }\n        }\n      ],\n      \"filter\": [\n        {\n          \"term\": {\n            \"age\": 18\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\nmust_not\n注意：下面语句是精准匹配\n\n```\nPOST /people/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"must_not\": {\n        \"term\": {\n          \"name\": \"叶良辰\"\n        }\n      }\n    }\n  }\n}\n```\n\n### 聚合查询\n\n根据字段类型查询\n\n\n```\n\nGET /people/man/_search\n{\n  \"size\": 0,\n  \"aggs\": {\n    \"group_by_age\": {\n      \"terms\": {\n        \"field\": \"age\"\n      }\n    }\n  }\n}\n```\n\n\n查询总体值\n\n```\nPOST /people/_search\n{\n  \"aggs\": {\n    \"grads_age\": {\n      \"stats\": {\n        \"field\": \"age\"\n      }\n    }\n  }\n}\n\n```\n\n查询最小值\n\n```\nPOST /people/_search\n{\n  \"aggs\": {\n    \"grads_age\": {\n      \"min\": {\n        \"field\": \"age\"\n      }\n    }\n  }\n}\n\n```\n\n根据国家分组，然后计算年龄平均值：\n\n\n\n```\n\nGET /people/man/_search\n{\n  \"size\": 0,\n  \"aggs\": {\n    \"group_by_age\": {\n      \"terms\": {\n        \"field\": \"country\"\n      },\n      \"aggs\": {\n        \"avg_age\": {\n          \"avg\": {\n            \"field\": \"age\"\n          }\n        }\n      }\n    }\n  }\n}\n\n```\n解决：上面的reason里面说的很清楚，将fielddata设置为true就行了：\n\n```\n\nPOST /people/_mapping/man\n{\n  \"properties\": {\n    \"country\": {\n      \"type\": \"text\",\n      \"fielddata\": true\n    }\n  }\n}\n```\n\n\n### 排序查询\n\n```\n排序查询通常没有排到我们想要的结果，因为字段分词后，有很多单词，再排序跟我们想要的结果又出入\n\n解决办法：把需要排序的字段建立两次索引，一个排序，另一个不排序。\n\n如下面的案例：把title.raw的fielddata设置为true，是排序的；而title的fielddata默认是false，可以用来搜索\n\nindex: true 是在title.raw建立索引可以被搜索到，\n\nfielddata: true是让其可以排序\n\nPUT /blog\n{\n  \"mappings\": {\n    \"article\": {\n      \"properties\": {\n        \"auther\": {\n          \"type\": \"text\"\n        },\n        \"title\": {\n          \"type\": \"text\",\n          \"fields\": {\n            \"raw\":{\n              \"type\": \"text\",\n              \"index\": true,\n              \"fielddata\": true\n            }\n          }\n        },\n        \"content\":{\n          \"type\": \"text\",\n          \"analyzer\": \"english\"\n        },\n        \"publishdate\": {\n          \"type\": \"date\"\n        }\n      }\n    }\n  }\n}\n\n```\n\n\n```\nGET /blog/article/_search\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"sort\": [\n    {\n      \"title.raw\": {\n        \"order\": \"desc\"\n      }\n    }\n  ]\n}\n\n```\n\n\n### scroll查询\n\n\n```\n当搜索量比较大的时候，我们在短时间内不可能一次性搜索完然后展示出来\n\n这个时候，可以使用scroll进行搜索\n\n比如下面的案例，可以先搜索3条数据，然后结果中会有一个_scroll_id，下次搜索就可以直接用这个_scroll_id进行搜索了\n```\n\n\n```\nGET test_index/test_type/_search?scroll=1m\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"sort\": \"_doc\",\n  \"size\": 3\n}\n```\n\nstep3 把scroll_id粘贴到下面的命令中再次搜索\n\n```\nGET _search/scroll\n{\n  \"scroll\": \"1m\",\n  \"scroll_id\": \"DnF1ZXJ5VGhlbkZldGNoBQAAAAAAAAA6FnZPSl9sbVR4UVVDU1NLb2wxVXJlbWcAAAAAAAAAPhZ2T0pfbG1UeFFVQ1NTS29sMVVyZW1nAAAAAAAAADsWdk9KX2xtVHhRVUNTU0tvbDFVcmVtZwAAAAAAAAA8FnZPSl9sbVR4UVVDU1NLb2wxVXJlbWcAAAAAAAAAPRZ2T0pfbG1UeFFVQ1NTS29sMVVyZW1n\"\n}\n\n```\n","source":"_posts/王阁/技术/大数据/es/es常用命令.md","raw":"---\n\ntitle: es常用命令\ndate: 2020-02-25\ntags:\n\n---\n\n查看集群是否健康\n\n\n```\nGET /_cluster/healt\n\n```\n\n查看节点列表\n\n\n```\nGET /_cat/nodes?v\n\n加v将表头显示出来\n\n```\n\n\n## 索引\n\n### 查询所有索引\n\n```\nGET /_cat/indices?v\n```\n\n### 查看某个索引的映射\n\n```\nGET /indeName/mapping\n```\n\n### 查看某个索引的设置\n\n```\nGET /indeName/mapping\n\n```\n### 添加一个索引\n\n```\nPUT /indexName\n{\n  \"settings\": {\n     \"number_of_shards\": 3,\n     \"number_of_replicas\": 1\n   },\n   \"mappings\": {\n     \"man\": {\n       \"dynamic\": \"strict\",\n       \"properties\": {\n         \"name\": {\n           \"type\": \"text\"\n         },\n         \"age\": {\n           \"type\": \"integer\"\n         },\n         \"birthday\": {\n           \"type\": \"date\",\n           \"format\": \"yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis\"\n         },\n         \"address\":{\n           \"dynamic\": \"true\",\n           \"type\": \"object\"\n         }\n       }\n     }\n   }\n  }\n\n```\n\ndynamic关键词说明:\n\"dynamic\":\"strict\"  表示如果遇到陌生field会报错\n\"dynamic\": true  表示如果遇到陌生字段，就进行dynamic mapping\n\"dynamic\": \"false\"   表示如果遇到陌生字段，就忽略\n\n---\n\n### 删除索引\n\n删除单个索引\n\n```\n\nDELETE /indexName\n\n```\n\n删除多个\n\n```\n\nDELETE /indexName1,indexName2\n\n```\n\n### 添加字段映射\n\n\n```\nPUT /indexName/_mapping/Field\n{\n  \"properties\":{\n    \"Field\":{\n      \"type\":\"text\"\n    }\n  }\n}\n```\n\n### 索引的别名\n\n\n#### 创建索引别名\n\n```\nPUT /indeName/_alias/aliasName\n\n```\n\n获取索引别名\n\n```\nGET /indexName/_alias/*\n\n```\n查询别名对应的索引\n\n```\nGET /*/_alias/aliasName\n\n```\n\n\n## 文档\n\n### 向索引中添加文档\n\n1. 自定义ID\n\n```\nPUT /indexName/type/id\n{\n  \"Field1\":\"message\",\n  \"Field2\":\"message\",\n  \"Field3\":\"message\",\n  \"Field4\":\"message\"\n}\n\n```  \n\n2. 随机生成id\n\n```\nPOST /indexName/type\n{\n  \"Field1\":\"message\",\n  \"Field2\":\"message\",\n  \"Field3\":\"message\",\n  \"Field4\":\"message\"\n}\n\n```\n\n后者则会自动生成id字符串\n\n3. 修改文档\n\n全文修改,即所有字段信息都要修改\n\n```\nPUT /indexName/type/id\n{\n  \"Field1\":\"update message\",\n  \"Field2\":\"update message\",\n  \"Field3\":\"message\",\n  \"Field4\":\"message\"\n}\n```\n部份修改\n\n```\nPOST /indexName/type/id/_update\n{\n  \"doc\": {\n    \"FIELD\": \"message\"\n  }\n}\n\n```\n脚本(再深入)\n\n```\n\nPOST /indexName/type/_id/_update\n{\n  \"script\": {\n    \"lang\": \"painless\",\n    \"source\": \"ctx._source.age += 10\"\n  }\n}\n```\n在修改document的时候，如果该文档不存在，则使用upsert操作进行初始化\n\n```\nPOST people/man/1/_update\n{\n  \"script\": \"ctx._source.age += 10\",\n  \"upsert\": {\n    \"age\": 20\n  }\n}\n```\n\n### 删除文档\n\n\n删除单个文档\n\n```\nDELETE /indexName/type/id\n\n```\n\n删除type下所有的文档\n\n```\nPOST /indexName/type/_delete_by_query?conflicts=proceed\n{\n  \"query\":{\n    \"match_all\":{\n\n    }\n  }\n}\n\n```\n\n### 查询文档\n\n查询单个文档\n\n```\nGET /indexName/type/id\n\n```\n\n批量查询文档(待验证)\n\n```\nGET /_mget\n{\n  \"docs\": [\n      {\n        \"_index\": \"index1\",\n        \"_type\": \"type\",\n        \"_id\": 1\n      },\n      {\n        \"_index\": \"index2\",\n        \"_type\": \"type\",\n        \"_id\": 2\n      }\n    ]\n}\n\n```\n```\n\nGET /indexName/type/_mget\n{\n\"docs\":[\n{\n  \"FEILD\":\"value\"\n},\n{\n  \"FEILD2\":\"value\"\n}\n  ]\n}\n\n\n```\n\n\n查询所有文档\n\n简单查询\n\n```\nGET /indexName/_serach\n\n```\n\n法二\n\n```\nPOST /people/_serach\n{\n  \"query\":{\n    \"match_all\":{\n    }\n  }\n}\n\n```\n查询某些字段内容\n```\n\n后面跟了 ?_source=field1,field2\n\nPOST /people/_serach?_source=field1,field2\n{\n  \"query\":{\n    \"match_all\":{\n    }\n  }\n}\n\n```\n\n查询多个索引下的多个type\n\n```\nGET /index1,index2/type1,type2/_search\n```\n\n查询所有索引下的部分type\n```\nGET /_all/type1,type2/_search\n\n```\n\n\n### 模糊查询\n```\n\nPOST /indexName/_search\n{\n  \"query\":{\n    \"match\":{\n      \"field\":\"message\"\n    }\n  }\n  ,\n  \"sort\":[\n  {\n    \"filed\":{\"order\":\"desc\"}\n  }\n  ]\n}\n\n\n```\n**注意**\nmessage将会被拆分进行匹配,若message是中文,则会按切分后的每个字来匹配,若\nmessage是英语,则会是按每个单词来匹配\n\n![](http://img.wqkenqing.ren/51ccc5cad8b8fbbbb6ef55d3106bfe43.png)\n![示列图](http://img.wqkenqing.ren/47a3ffe716f0026c004b155836a56641.png)\n\n\n全文搜索(按准度)\n\n```\nGET indexName/_search\n{\n  \"query\":{\n    \"match\":{\n      \"Field\":{\n        \"query\":\"val1 val2\",\n        \"operator\":\"and\"\n      }\n    }\n  }\n}\n\n```\n\n即Fileld 中必须有val1,val2\n\n\n按匹配度查询\n```\nGET /indexName/_search\n{\n\"query\":{\n  \"match\":{\n    \"Field\":{\n      \"query\":\"val1 val2 val3\"\n      \"minimum_should_match\":\"val\" eg:20%\n    }\n\n  }\n}\n}\n```\n即indexName,按Field中 val1 val2 val3 匹配度达到val即返回查询\n\n\n### 高级查询\n\n简单精准查询\n\n```\nGET /indexName/_search\n{\n  \"query\":{\n    \"match_phrase\":{\n      \"Field\":\"val\"\n    }\n  }\n}\n```\n即查询要完全匹配val,但若val只有一个中文,则会Field只要含有val,就会被查出\n\n\nslop结合\n```\nGET /people/_search\n{\n  \"query\": {\n    \"match_phrase\": {\n      \"name\": {\n        \"query\": \"张三\",\n        \"slop\": 3\n      }\n    }\n  }\n}\n```\n解读：slop是移动次数，上面案例表示“张”、“三”两个字可以经过最多挪动3次查询到！\n\nrescore (重打分）\n\n```\nGET /forum/article/_search\n{\n  \"query\": {\n    \"match\": {\n      \"content\": \"java spark\"\n    }\n  },\n  \"rescore\":{\n    \"window_size\": 50,\n    \"query\": {\n      \"rescore_query\": {\n        \"match_phrase\": {\n          \"content\": {\n            \"query\": \"java spark\",\n            \"slop\": 50\n          }\n        }\n      }\n    }\n  }\n}\n\n```\n\n\n多字段匹配查询\n\n```\nGET /indexName/_search\n{\n  \"query\":{\n    \"multi_match\":{\n      \"query\":\"val\"\n      \"fields\":[\"val1\",\"val2\"]\n    }\n  }\n}\n\n```\n\n在多个字段中,也是模糊查询val\n```\nGET /people/_search\n{\n  \"query\": {\n    \"query_string\": {\n      \"query\": \"(叶良辰 AND 火) OR (赵日天 AND 风)\",\n      \"fields\": [\"name\",\"desc\"]\n    }\n  }\n}\n```\n\n### 字段查询\n\n精准查询\n\n```\nGET /indexName/_search\n{\n\"query\":{\n  \"term\":{\n    \"field\":\"val\"\n  }\n}\n}\n\n\n```\n\n分页查询\n\n```\nGET /indexName/_search\n{\n  \"query\":{\n    \"match_all\":{}\n  },\n  \"from\":num,\n  \"size\":num\n}\n```\n\n### 范围查询\n\n数据值型\n\n```\n\nGET /people/_search\n{\n  \"query\": {\n    \"range\": {\n      \"age\": {\n        \"gt\": 16,\n        \"lte\": 30\n      }\n    }\n  }\n}\n\n```\n日期类型\n\n```\nGET /people/_search\n{\n  \"query\": {\n    \"range\": {\n      \"birthday\": {\n        \"gte\": \"2013-01-01\",\n        \"lte\": \"now\"\n      }\n    }\n  }\n}\n\n```\n\n\n```\n\n\nGET book/_search\n{\n  \"query\": {\n    \"constant_score\": {\n      \"filter\": {\n        \"range\": {\n          \"date\": {\n            \"gt\": \"now-1M\"\n          }\n        }\n      },\n      \"boost\": 1.2\n    }\n  }\n}\n\n```\n\n\"gt\": \"now-1M\"表示从今天开始，往前推一个月！\n\n\n### 过滤查询\n\n法一\n\n```\n\n\nPOST /people/man/_search\n{\n  \"query\": {\n    \"constant_score\": {\n      \"filter\": {\n        \"range\": {\n          \"age\": {\n            \"gte\": 20,\n            \"lte\": 30\n          }\n        }\n      },\n      \"boost\": 1.2\n    }\n  }\n}\n\n\n```\n\n法二\n\n```\nPOST /people/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"filter\": {\n        \"term\": {\n          \"age\": 18\n        }\n      }\n    }\n  }\n}\n```\n\n\n### 布尔查询\nshould查询\n注意：should相当于 或 ，里面的match也是模糊匹配\n\n```\nPOST /people/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"should\": [\n        {\n          \"match\": {\n            \"name\": \"叶良辰\"\n          }\n        },\n        {\n          \"match\": {\n            \"desc\": \"赵日天\"\n          }\n        }\n      ]\n    }\n  }\n}\n\n```\n\nmust查询\n注意：两个条件都要满足，并且这里也会把must里面的“叶良辰”拆分成“叶”、“良”和“辰”进行查询；“赵日天”拆分成“赵”、“日”、和“天”！\n\n\n\n```\n\nPOST /people/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"match\": {\n            \"name\": \"叶良辰\"\n          }\n        },\n        {\n          \"match\": {\n            \"desc\": \"赵日天\"\n          }\n        }\n      ]\n    }\n  }\n}\n\n```\n\nmust与filter相结合\n这里也会把must里面的“叶良辰”拆分成“叶”、“良”和“辰”进行查询\n\n\n\n```\n\nPOST /people/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"match\": {\n            \"name\": \"叶良辰\"\n          }\n        },\n        {\n          \"match\": {\n            \"desc\": \"赵日天\"\n          }\n        }\n      ],\n      \"filter\": [\n        {\n          \"term\": {\n            \"age\": 18\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\nmust_not\n注意：下面语句是精准匹配\n\n```\nPOST /people/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"must_not\": {\n        \"term\": {\n          \"name\": \"叶良辰\"\n        }\n      }\n    }\n  }\n}\n```\n\n### 聚合查询\n\n根据字段类型查询\n\n\n```\n\nGET /people/man/_search\n{\n  \"size\": 0,\n  \"aggs\": {\n    \"group_by_age\": {\n      \"terms\": {\n        \"field\": \"age\"\n      }\n    }\n  }\n}\n```\n\n\n查询总体值\n\n```\nPOST /people/_search\n{\n  \"aggs\": {\n    \"grads_age\": {\n      \"stats\": {\n        \"field\": \"age\"\n      }\n    }\n  }\n}\n\n```\n\n查询最小值\n\n```\nPOST /people/_search\n{\n  \"aggs\": {\n    \"grads_age\": {\n      \"min\": {\n        \"field\": \"age\"\n      }\n    }\n  }\n}\n\n```\n\n根据国家分组，然后计算年龄平均值：\n\n\n\n```\n\nGET /people/man/_search\n{\n  \"size\": 0,\n  \"aggs\": {\n    \"group_by_age\": {\n      \"terms\": {\n        \"field\": \"country\"\n      },\n      \"aggs\": {\n        \"avg_age\": {\n          \"avg\": {\n            \"field\": \"age\"\n          }\n        }\n      }\n    }\n  }\n}\n\n```\n解决：上面的reason里面说的很清楚，将fielddata设置为true就行了：\n\n```\n\nPOST /people/_mapping/man\n{\n  \"properties\": {\n    \"country\": {\n      \"type\": \"text\",\n      \"fielddata\": true\n    }\n  }\n}\n```\n\n\n### 排序查询\n\n```\n排序查询通常没有排到我们想要的结果，因为字段分词后，有很多单词，再排序跟我们想要的结果又出入\n\n解决办法：把需要排序的字段建立两次索引，一个排序，另一个不排序。\n\n如下面的案例：把title.raw的fielddata设置为true，是排序的；而title的fielddata默认是false，可以用来搜索\n\nindex: true 是在title.raw建立索引可以被搜索到，\n\nfielddata: true是让其可以排序\n\nPUT /blog\n{\n  \"mappings\": {\n    \"article\": {\n      \"properties\": {\n        \"auther\": {\n          \"type\": \"text\"\n        },\n        \"title\": {\n          \"type\": \"text\",\n          \"fields\": {\n            \"raw\":{\n              \"type\": \"text\",\n              \"index\": true,\n              \"fielddata\": true\n            }\n          }\n        },\n        \"content\":{\n          \"type\": \"text\",\n          \"analyzer\": \"english\"\n        },\n        \"publishdate\": {\n          \"type\": \"date\"\n        }\n      }\n    }\n  }\n}\n\n```\n\n\n```\nGET /blog/article/_search\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"sort\": [\n    {\n      \"title.raw\": {\n        \"order\": \"desc\"\n      }\n    }\n  ]\n}\n\n```\n\n\n### scroll查询\n\n\n```\n当搜索量比较大的时候，我们在短时间内不可能一次性搜索完然后展示出来\n\n这个时候，可以使用scroll进行搜索\n\n比如下面的案例，可以先搜索3条数据，然后结果中会有一个_scroll_id，下次搜索就可以直接用这个_scroll_id进行搜索了\n```\n\n\n```\nGET test_index/test_type/_search?scroll=1m\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"sort\": \"_doc\",\n  \"size\": 3\n}\n```\n\nstep3 把scroll_id粘贴到下面的命令中再次搜索\n\n```\nGET _search/scroll\n{\n  \"scroll\": \"1m\",\n  \"scroll_id\": \"DnF1ZXJ5VGhlbkZldGNoBQAAAAAAAAA6FnZPSl9sbVR4UVVDU1NLb2wxVXJlbWcAAAAAAAAAPhZ2T0pfbG1UeFFVQ1NTS29sMVVyZW1nAAAAAAAAADsWdk9KX2xtVHhRVUNTU0tvbDFVcmVtZwAAAAAAAAA8FnZPSl9sbVR4UVVDU1NLb2wxVXJlbWcAAAAAAAAAPRZ2T0pfbG1UeFFVQ1NTS29sMVVyZW1n\"\n}\n\n```\n","slug":"王阁/技术/大数据/es/es常用命令","published":1,"updated":"2023-02-23T02:51:20.908Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsge005mu6pwel8aepk6","content":"<p>查看集群是否健康</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;_cluster&#x2F;healt</span><br></pre></td></tr></table></figure>\n\n<p>查看节点列表</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;_cat&#x2F;nodes?v</span><br><span class=\"line\"></span><br><span class=\"line\">加v将表头显示出来</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"索引\"><a href=\"#索引\" class=\"headerlink\" title=\"索引\"></a>索引</h2><h3 id=\"查询所有索引\"><a href=\"#查询所有索引\" class=\"headerlink\" title=\"查询所有索引\"></a>查询所有索引</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;_cat&#x2F;indices?v</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看某个索引的映射\"><a href=\"#查看某个索引的映射\" class=\"headerlink\" title=\"查看某个索引的映射\"></a>查看某个索引的映射</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indeName&#x2F;mapping</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看某个索引的设置\"><a href=\"#查看某个索引的设置\" class=\"headerlink\" title=\"查看某个索引的设置\"></a>查看某个索引的设置</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indeName&#x2F;mapping</span><br></pre></td></tr></table></figure>\n<h3 id=\"添加一个索引\"><a href=\"#添加一个索引\" class=\"headerlink\" title=\"添加一个索引\"></a>添加一个索引</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;settings&quot;: &#123;</span><br><span class=\"line\">     &quot;number_of_shards&quot;: 3,</span><br><span class=\"line\">     &quot;number_of_replicas&quot;: 1</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   &quot;mappings&quot;: &#123;</span><br><span class=\"line\">     &quot;man&quot;: &#123;</span><br><span class=\"line\">       &quot;dynamic&quot;: &quot;strict&quot;,</span><br><span class=\"line\">       &quot;properties&quot;: &#123;</span><br><span class=\"line\">         &quot;name&quot;: &#123;</span><br><span class=\"line\">           &quot;type&quot;: &quot;text&quot;</span><br><span class=\"line\">         &#125;,</span><br><span class=\"line\">         &quot;age&quot;: &#123;</span><br><span class=\"line\">           &quot;type&quot;: &quot;integer&quot;</span><br><span class=\"line\">         &#125;,</span><br><span class=\"line\">         &quot;birthday&quot;: &#123;</span><br><span class=\"line\">           &quot;type&quot;: &quot;date&quot;,</span><br><span class=\"line\">           &quot;format&quot;: &quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot;</span><br><span class=\"line\">         &#125;,</span><br><span class=\"line\">         &quot;address&quot;:&#123;</span><br><span class=\"line\">           &quot;dynamic&quot;: &quot;true&quot;,</span><br><span class=\"line\">           &quot;type&quot;: &quot;object&quot;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<p>dynamic关键词说明:<br>“dynamic”:”strict”  表示如果遇到陌生field会报错<br>“dynamic”: true  表示如果遇到陌生字段，就进行dynamic mapping<br>“dynamic”: “false”   表示如果遇到陌生字段，就忽略</p>\n<hr>\n<h3 id=\"删除索引\"><a href=\"#删除索引\" class=\"headerlink\" title=\"删除索引\"></a>删除索引</h3><p>删除单个索引</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">DELETE &#x2F;indexName</span><br></pre></td></tr></table></figure>\n\n<p>删除多个</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">DELETE &#x2F;indexName1,indexName2</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加字段映射\"><a href=\"#添加字段映射\" class=\"headerlink\" title=\"添加字段映射\"></a>添加字段映射</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName&#x2F;_mapping&#x2F;Field</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;properties&quot;:&#123;</span><br><span class=\"line\">    &quot;Field&quot;:&#123;</span><br><span class=\"line\">      &quot;type&quot;:&quot;text&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"索引的别名\"><a href=\"#索引的别名\" class=\"headerlink\" title=\"索引的别名\"></a>索引的别名</h3><h4 id=\"创建索引别名\"><a href=\"#创建索引别名\" class=\"headerlink\" title=\"创建索引别名\"></a>创建索引别名</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indeName&#x2F;_alias&#x2F;aliasName</span><br></pre></td></tr></table></figure>\n\n<p>获取索引别名</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_alias&#x2F;*</span><br></pre></td></tr></table></figure>\n<p>查询别名对应的索引</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;*&#x2F;_alias&#x2F;aliasName</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"文档\"><a href=\"#文档\" class=\"headerlink\" title=\"文档\"></a>文档</h2><h3 id=\"向索引中添加文档\"><a href=\"#向索引中添加文档\" class=\"headerlink\" title=\"向索引中添加文档\"></a>向索引中添加文档</h3><ol>\n<li>自定义ID</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName&#x2F;type&#x2F;id</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;Field1&quot;:&quot;message&quot;,</span><br><span class=\"line\">  &quot;Field2&quot;:&quot;message&quot;,</span><br><span class=\"line\">  &quot;Field3&quot;:&quot;message&quot;,</span><br><span class=\"line\">  &quot;Field4&quot;:&quot;message&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;  </span><br><span class=\"line\"></span><br><span class=\"line\">2. 随机生成id</span><br></pre></td></tr></table></figure>\n<p>POST /indexName/type<br>{<br>  “Field1”:”message”,<br>  “Field2”:”message”,<br>  “Field3”:”message”,<br>  “Field4”:”message”<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">后者则会自动生成id字符串</span><br><span class=\"line\"></span><br><span class=\"line\">3. 修改文档</span><br><span class=\"line\"></span><br><span class=\"line\">全文修改,即所有字段信息都要修改</span><br></pre></td></tr></table></figure>\n<p>PUT /indexName/type/id<br>{<br>  “Field1”:”update message”,<br>  “Field2”:”update message”,<br>  “Field3”:”message”,<br>  “Field4”:”message”<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">部份修改</span><br></pre></td></tr></table></figure>\n<p>POST /indexName/type/id/_update<br>{<br>  “doc”: {<br>    “FIELD”: “message”<br>  }<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">脚本(再深入)</span><br></pre></td></tr></table></figure>\n\n<p>POST /indexName/type/_id/_update<br>{<br>  “script”: {<br>    “lang”: “painless”,<br>    “source”: “ctx._source.age += 10”<br>  }<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在修改document的时候，如果该文档不存在，则使用upsert操作进行初始化</span><br></pre></td></tr></table></figure>\n<p>POST people/man/1/_update<br>{<br>  “script”: “ctx._source.age += 10”,<br>  “upsert”: {<br>    “age”: 20<br>  }<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">### 删除文档</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">删除单个文档</span><br></pre></td></tr></table></figure>\n<p>DELETE /indexName/type/id</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">删除type下所有的文档</span><br></pre></td></tr></table></figure>\n<p>POST /indexName/type/_delete_by_query?conflicts=proceed<br>{<br>  “query”:{<br>    “match_all”:{</p>\n<pre><code>}</code></pre><p>  }<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">### 查询文档</span><br><span class=\"line\"></span><br><span class=\"line\">查询单个文档</span><br></pre></td></tr></table></figure>\n<p>GET /indexName/type/id</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">批量查询文档(待验证)</span><br></pre></td></tr></table></figure>\n<p>GET /_mget<br>{<br>  “docs”: [<br>      {<br>        “_index”: “index1”,<br>        “_type”: “type”,<br>        “_id”: 1<br>      },<br>      {<br>        “_index”: “index2”,<br>        “_type”: “type”,<br>        “_id”: 2<br>      }<br>    ]<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#96;&#96;&#96;</span><br><span class=\"line\"></span><br><span class=\"line\">GET &#x2F;indexName&#x2F;type&#x2F;_mget</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;docs&quot;:[</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;FEILD&quot;:&quot;value&quot;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;FEILD2&quot;:&quot;value&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<p>查询所有文档</p>\n<p>简单查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_serach</span><br></pre></td></tr></table></figure>\n\n<p>法二</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_serach</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match_all&quot;:&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>查询某些字段内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">后面跟了 ?_source&#x3D;field1,field2</span><br><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;people&#x2F;_serach?_source&#x3D;field1,field2</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match_all&quot;:&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>查询多个索引下的多个type</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;index1,index2&#x2F;type1,type2&#x2F;_search</span><br></pre></td></tr></table></figure>\n\n<p>查询所有索引下的部分type</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;_all&#x2F;type1,type2&#x2F;_search</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"模糊查询\"><a href=\"#模糊查询\" class=\"headerlink\" title=\"模糊查询\"></a>模糊查询</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match&quot;:&#123;</span><br><span class=\"line\">      &quot;field&quot;:&quot;message&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ,</span><br><span class=\"line\">  &quot;sort&quot;:[</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    &quot;filed&quot;:&#123;&quot;order&quot;:&quot;desc&quot;&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>注意</strong><br>message将会被拆分进行匹配,若message是中文,则会按切分后的每个字来匹配,若<br>message是英语,则会是按每个单词来匹配</p>\n<p><img src=\"http://img.wqkenqing.ren/51ccc5cad8b8fbbbb6ef55d3106bfe43.png\" alt=\"\"><br><img src=\"http://img.wqkenqing.ren/47a3ffe716f0026c004b155836a56641.png\" alt=\"示列图\"></p>\n<p>全文搜索(按准度)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match&quot;:&#123;</span><br><span class=\"line\">      &quot;Field&quot;:&#123;</span><br><span class=\"line\">        &quot;query&quot;:&quot;val1 val2&quot;,</span><br><span class=\"line\">        &quot;operator&quot;:&quot;and&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>即Fileld 中必须有val1,val2</p>\n<p>按匹配度查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;query&quot;:&#123;</span><br><span class=\"line\">  &quot;match&quot;:&#123;</span><br><span class=\"line\">    &quot;Field&quot;:&#123;</span><br><span class=\"line\">      &quot;query&quot;:&quot;val1 val2 val3&quot;</span><br><span class=\"line\">      &quot;minimum_should_match&quot;:&quot;val&quot; eg:20%</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>即indexName,按Field中 val1 val2 val3 匹配度达到val即返回查询</p>\n<h3 id=\"高级查询\"><a href=\"#高级查询\" class=\"headerlink\" title=\"高级查询\"></a>高级查询</h3><p>简单精准查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match_phrase&quot;:&#123;</span><br><span class=\"line\">      &quot;Field&quot;:&quot;val&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>即查询要完全匹配val,但若val只有一个中文,则会Field只要含有val,就会被查出</p>\n<p>slop结合</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;match_phrase&quot;: &#123;</span><br><span class=\"line\">      &quot;name&quot;: &#123;</span><br><span class=\"line\">        &quot;query&quot;: &quot;张三&quot;,</span><br><span class=\"line\">        &quot;slop&quot;: 3</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>解读：slop是移动次数，上面案例表示“张”、“三”两个字可以经过最多挪动3次查询到！</p>\n<p>rescore (重打分）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;forum&#x2F;article&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;match&quot;: &#123;</span><br><span class=\"line\">      &quot;content&quot;: &quot;java spark&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;rescore&quot;:&#123;</span><br><span class=\"line\">    &quot;window_size&quot;: 50,</span><br><span class=\"line\">    &quot;query&quot;: &#123;</span><br><span class=\"line\">      &quot;rescore_query&quot;: &#123;</span><br><span class=\"line\">        &quot;match_phrase&quot;: &#123;</span><br><span class=\"line\">          &quot;content&quot;: &#123;</span><br><span class=\"line\">            &quot;query&quot;: &quot;java spark&quot;,</span><br><span class=\"line\">            &quot;slop&quot;: 50</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<p>多字段匹配查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;multi_match&quot;:&#123;</span><br><span class=\"line\">      &quot;query&quot;:&quot;val&quot;</span><br><span class=\"line\">      &quot;fields&quot;:[&quot;val1&quot;,&quot;val2&quot;]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在多个字段中,也是模糊查询val</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;query_string&quot;: &#123;</span><br><span class=\"line\">      &quot;query&quot;: &quot;(叶良辰 AND 火) OR (赵日天 AND 风)&quot;,</span><br><span class=\"line\">      &quot;fields&quot;: [&quot;name&quot;,&quot;desc&quot;]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"字段查询\"><a href=\"#字段查询\" class=\"headerlink\" title=\"字段查询\"></a>字段查询</h3><p>精准查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;query&quot;:&#123;</span><br><span class=\"line\">  &quot;term&quot;:&#123;</span><br><span class=\"line\">    &quot;field&quot;:&quot;val&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>分页查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match_all&quot;:&#123;&#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;from&quot;:num,</span><br><span class=\"line\">  &quot;size&quot;:num</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"范围查询\"><a href=\"#范围查询\" class=\"headerlink\" title=\"范围查询\"></a>范围查询</h3><p>数据值型</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">GET &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;range&quot;: &#123;</span><br><span class=\"line\">      &quot;age&quot;: &#123;</span><br><span class=\"line\">        &quot;gt&quot;: 16,</span><br><span class=\"line\">        &quot;lte&quot;: 30</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>日期类型</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;range&quot;: &#123;</span><br><span class=\"line\">      &quot;birthday&quot;: &#123;</span><br><span class=\"line\">        &quot;gte&quot;: &quot;2013-01-01&quot;,</span><br><span class=\"line\">        &quot;lte&quot;: &quot;now&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">GET book&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;constant_score&quot;: &#123;</span><br><span class=\"line\">      &quot;filter&quot;: &#123;</span><br><span class=\"line\">        &quot;range&quot;: &#123;</span><br><span class=\"line\">          &quot;date&quot;: &#123;</span><br><span class=\"line\">            &quot;gt&quot;: &quot;now-1M&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &quot;boost&quot;: 1.2</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>“gt”: “now-1M”表示从今天开始，往前推一个月！</p>\n<h3 id=\"过滤查询\"><a href=\"#过滤查询\" class=\"headerlink\" title=\"过滤查询\"></a>过滤查询</h3><p>法一</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;people&#x2F;man&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;constant_score&quot;: &#123;</span><br><span class=\"line\">      &quot;filter&quot;: &#123;</span><br><span class=\"line\">        &quot;range&quot;: &#123;</span><br><span class=\"line\">          &quot;age&quot;: &#123;</span><br><span class=\"line\">            &quot;gte&quot;: 20,</span><br><span class=\"line\">            &quot;lte&quot;: 30</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &quot;boost&quot;: 1.2</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>法二</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;bool&quot;: &#123;</span><br><span class=\"line\">      &quot;filter&quot;: &#123;</span><br><span class=\"line\">        &quot;term&quot;: &#123;</span><br><span class=\"line\">          &quot;age&quot;: 18</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"布尔查询\"><a href=\"#布尔查询\" class=\"headerlink\" title=\"布尔查询\"></a>布尔查询</h3><p>should查询<br>注意：should相当于 或 ，里面的match也是模糊匹配</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;bool&quot;: &#123;</span><br><span class=\"line\">      &quot;should&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;name&quot;: &quot;叶良辰&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;desc&quot;: &quot;赵日天&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>must查询<br>注意：两个条件都要满足，并且这里也会把must里面的“叶良辰”拆分成“叶”、“良”和“辰”进行查询；“赵日天”拆分成“赵”、“日”、和“天”！</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;bool&quot;: &#123;</span><br><span class=\"line\">      &quot;must&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;name&quot;: &quot;叶良辰&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;desc&quot;: &quot;赵日天&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>must与filter相结合<br>这里也会把must里面的“叶良辰”拆分成“叶”、“良”和“辰”进行查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;bool&quot;: &#123;</span><br><span class=\"line\">      &quot;must&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;name&quot;: &quot;叶良辰&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;desc&quot;: &quot;赵日天&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      &quot;filter&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;term&quot;: &#123;</span><br><span class=\"line\">            &quot;age&quot;: 18</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>must_not<br>注意：下面语句是精准匹配</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;bool&quot;: &#123;</span><br><span class=\"line\">      &quot;must_not&quot;: &#123;</span><br><span class=\"line\">        &quot;term&quot;: &#123;</span><br><span class=\"line\">          &quot;name&quot;: &quot;叶良辰&quot;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"聚合查询\"><a href=\"#聚合查询\" class=\"headerlink\" title=\"聚合查询\"></a>聚合查询</h3><p>根据字段类型查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">GET &#x2F;people&#x2F;man&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;size&quot;: 0,</span><br><span class=\"line\">  &quot;aggs&quot;: &#123;</span><br><span class=\"line\">    &quot;group_by_age&quot;: &#123;</span><br><span class=\"line\">      &quot;terms&quot;: &#123;</span><br><span class=\"line\">        &quot;field&quot;: &quot;age&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<p>查询总体值</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;aggs&quot;: &#123;</span><br><span class=\"line\">    &quot;grads_age&quot;: &#123;</span><br><span class=\"line\">      &quot;stats&quot;: &#123;</span><br><span class=\"line\">        &quot;field&quot;: &quot;age&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>查询最小值</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;aggs&quot;: &#123;</span><br><span class=\"line\">    &quot;grads_age&quot;: &#123;</span><br><span class=\"line\">      &quot;min&quot;: &#123;</span><br><span class=\"line\">        &quot;field&quot;: &quot;age&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>根据国家分组，然后计算年龄平均值：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">GET &#x2F;people&#x2F;man&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;size&quot;: 0,</span><br><span class=\"line\">  &quot;aggs&quot;: &#123;</span><br><span class=\"line\">    &quot;group_by_age&quot;: &#123;</span><br><span class=\"line\">      &quot;terms&quot;: &#123;</span><br><span class=\"line\">        &quot;field&quot;: &quot;country&quot;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &quot;aggs&quot;: &#123;</span><br><span class=\"line\">        &quot;avg_age&quot;: &#123;</span><br><span class=\"line\">          &quot;avg&quot;: &#123;</span><br><span class=\"line\">            &quot;field&quot;: &quot;age&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>解决：上面的reason里面说的很清楚，将fielddata设置为true就行了：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;people&#x2F;_mapping&#x2F;man</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;properties&quot;: &#123;</span><br><span class=\"line\">    &quot;country&quot;: &#123;</span><br><span class=\"line\">      &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">      &quot;fielddata&quot;: true</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"排序查询\"><a href=\"#排序查询\" class=\"headerlink\" title=\"排序查询\"></a>排序查询</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">排序查询通常没有排到我们想要的结果，因为字段分词后，有很多单词，再排序跟我们想要的结果又出入</span><br><span class=\"line\"></span><br><span class=\"line\">解决办法：把需要排序的字段建立两次索引，一个排序，另一个不排序。</span><br><span class=\"line\"></span><br><span class=\"line\">如下面的案例：把title.raw的fielddata设置为true，是排序的；而title的fielddata默认是false，可以用来搜索</span><br><span class=\"line\"></span><br><span class=\"line\">index: true 是在title.raw建立索引可以被搜索到，</span><br><span class=\"line\"></span><br><span class=\"line\">fielddata: true是让其可以排序</span><br><span class=\"line\"></span><br><span class=\"line\">PUT &#x2F;blog</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;mappings&quot;: &#123;</span><br><span class=\"line\">    &quot;article&quot;: &#123;</span><br><span class=\"line\">      &quot;properties&quot;: &#123;</span><br><span class=\"line\">        &quot;auther&quot;: &#123;</span><br><span class=\"line\">          &quot;type&quot;: &quot;text&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;title&quot;: &#123;</span><br><span class=\"line\">          &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">          &quot;fields&quot;: &#123;</span><br><span class=\"line\">            &quot;raw&quot;:&#123;</span><br><span class=\"line\">              &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">              &quot;index&quot;: true,</span><br><span class=\"line\">              &quot;fielddata&quot;: true</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;content&quot;:&#123;</span><br><span class=\"line\">          &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">          &quot;analyzer&quot;: &quot;english&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;publishdate&quot;: &#123;</span><br><span class=\"line\">          &quot;type&quot;: &quot;date&quot;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;blog&#x2F;article&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;match_all&quot;: &#123;&#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;sort&quot;: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      &quot;title.raw&quot;: &#123;</span><br><span class=\"line\">        &quot;order&quot;: &quot;desc&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"scroll查询\"><a href=\"#scroll查询\" class=\"headerlink\" title=\"scroll查询\"></a>scroll查询</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">当搜索量比较大的时候，我们在短时间内不可能一次性搜索完然后展示出来</span><br><span class=\"line\"></span><br><span class=\"line\">这个时候，可以使用scroll进行搜索</span><br><span class=\"line\"></span><br><span class=\"line\">比如下面的案例，可以先搜索3条数据，然后结果中会有一个_scroll_id，下次搜索就可以直接用这个_scroll_id进行搜索了</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET test_index&#x2F;test_type&#x2F;_search?scroll&#x3D;1m</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;match_all&quot;: &#123;&#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;sort&quot;: &quot;_doc&quot;,</span><br><span class=\"line\">  &quot;size&quot;: 3</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>step3 把scroll_id粘贴到下面的命令中再次搜索</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET _search&#x2F;scroll</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;scroll&quot;: &quot;1m&quot;,</span><br><span class=\"line\">  &quot;scroll_id&quot;: &quot;DnF1ZXJ5VGhlbkZldGNoBQAAAAAAAAA6FnZPSl9sbVR4UVVDU1NLb2wxVXJlbWcAAAAAAAAAPhZ2T0pfbG1UeFFVQ1NTS29sMVVyZW1nAAAAAAAAADsWdk9KX2xtVHhRVUNTU0tvbDFVcmVtZwAAAAAAAAA8FnZPSl9sbVR4UVVDU1NLb2wxVXJlbWcAAAAAAAAAPRZ2T0pfbG1UeFFVQ1NTS29sMVVyZW1n&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>查看集群是否健康</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;_cluster&#x2F;healt</span><br></pre></td></tr></table></figure>\n\n<p>查看节点列表</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;_cat&#x2F;nodes?v</span><br><span class=\"line\"></span><br><span class=\"line\">加v将表头显示出来</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"索引\"><a href=\"#索引\" class=\"headerlink\" title=\"索引\"></a>索引</h2><h3 id=\"查询所有索引\"><a href=\"#查询所有索引\" class=\"headerlink\" title=\"查询所有索引\"></a>查询所有索引</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;_cat&#x2F;indices?v</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看某个索引的映射\"><a href=\"#查看某个索引的映射\" class=\"headerlink\" title=\"查看某个索引的映射\"></a>查看某个索引的映射</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indeName&#x2F;mapping</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看某个索引的设置\"><a href=\"#查看某个索引的设置\" class=\"headerlink\" title=\"查看某个索引的设置\"></a>查看某个索引的设置</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indeName&#x2F;mapping</span><br></pre></td></tr></table></figure>\n<h3 id=\"添加一个索引\"><a href=\"#添加一个索引\" class=\"headerlink\" title=\"添加一个索引\"></a>添加一个索引</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;settings&quot;: &#123;</span><br><span class=\"line\">     &quot;number_of_shards&quot;: 3,</span><br><span class=\"line\">     &quot;number_of_replicas&quot;: 1</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   &quot;mappings&quot;: &#123;</span><br><span class=\"line\">     &quot;man&quot;: &#123;</span><br><span class=\"line\">       &quot;dynamic&quot;: &quot;strict&quot;,</span><br><span class=\"line\">       &quot;properties&quot;: &#123;</span><br><span class=\"line\">         &quot;name&quot;: &#123;</span><br><span class=\"line\">           &quot;type&quot;: &quot;text&quot;</span><br><span class=\"line\">         &#125;,</span><br><span class=\"line\">         &quot;age&quot;: &#123;</span><br><span class=\"line\">           &quot;type&quot;: &quot;integer&quot;</span><br><span class=\"line\">         &#125;,</span><br><span class=\"line\">         &quot;birthday&quot;: &#123;</span><br><span class=\"line\">           &quot;type&quot;: &quot;date&quot;,</span><br><span class=\"line\">           &quot;format&quot;: &quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot;</span><br><span class=\"line\">         &#125;,</span><br><span class=\"line\">         &quot;address&quot;:&#123;</span><br><span class=\"line\">           &quot;dynamic&quot;: &quot;true&quot;,</span><br><span class=\"line\">           &quot;type&quot;: &quot;object&quot;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<p>dynamic关键词说明:<br>“dynamic”:”strict”  表示如果遇到陌生field会报错<br>“dynamic”: true  表示如果遇到陌生字段，就进行dynamic mapping<br>“dynamic”: “false”   表示如果遇到陌生字段，就忽略</p>\n<hr>\n<h3 id=\"删除索引\"><a href=\"#删除索引\" class=\"headerlink\" title=\"删除索引\"></a>删除索引</h3><p>删除单个索引</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">DELETE &#x2F;indexName</span><br></pre></td></tr></table></figure>\n\n<p>删除多个</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">DELETE &#x2F;indexName1,indexName2</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加字段映射\"><a href=\"#添加字段映射\" class=\"headerlink\" title=\"添加字段映射\"></a>添加字段映射</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName&#x2F;_mapping&#x2F;Field</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;properties&quot;:&#123;</span><br><span class=\"line\">    &quot;Field&quot;:&#123;</span><br><span class=\"line\">      &quot;type&quot;:&quot;text&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"索引的别名\"><a href=\"#索引的别名\" class=\"headerlink\" title=\"索引的别名\"></a>索引的别名</h3><h4 id=\"创建索引别名\"><a href=\"#创建索引别名\" class=\"headerlink\" title=\"创建索引别名\"></a>创建索引别名</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indeName&#x2F;_alias&#x2F;aliasName</span><br></pre></td></tr></table></figure>\n\n<p>获取索引别名</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_alias&#x2F;*</span><br></pre></td></tr></table></figure>\n<p>查询别名对应的索引</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;*&#x2F;_alias&#x2F;aliasName</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"文档\"><a href=\"#文档\" class=\"headerlink\" title=\"文档\"></a>文档</h2><h3 id=\"向索引中添加文档\"><a href=\"#向索引中添加文档\" class=\"headerlink\" title=\"向索引中添加文档\"></a>向索引中添加文档</h3><ol>\n<li>自定义ID</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName&#x2F;type&#x2F;id</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;Field1&quot;:&quot;message&quot;,</span><br><span class=\"line\">  &quot;Field2&quot;:&quot;message&quot;,</span><br><span class=\"line\">  &quot;Field3&quot;:&quot;message&quot;,</span><br><span class=\"line\">  &quot;Field4&quot;:&quot;message&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;  </span><br><span class=\"line\"></span><br><span class=\"line\">2. 随机生成id</span><br></pre></td></tr></table></figure>\n<p>POST /indexName/type<br>{<br>  “Field1”:”message”,<br>  “Field2”:”message”,<br>  “Field3”:”message”,<br>  “Field4”:”message”<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">后者则会自动生成id字符串</span><br><span class=\"line\"></span><br><span class=\"line\">3. 修改文档</span><br><span class=\"line\"></span><br><span class=\"line\">全文修改,即所有字段信息都要修改</span><br></pre></td></tr></table></figure>\n<p>PUT /indexName/type/id<br>{<br>  “Field1”:”update message”,<br>  “Field2”:”update message”,<br>  “Field3”:”message”,<br>  “Field4”:”message”<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">部份修改</span><br></pre></td></tr></table></figure>\n<p>POST /indexName/type/id/_update<br>{<br>  “doc”: {<br>    “FIELD”: “message”<br>  }<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">脚本(再深入)</span><br></pre></td></tr></table></figure>\n\n<p>POST /indexName/type/_id/_update<br>{<br>  “script”: {<br>    “lang”: “painless”,<br>    “source”: “ctx._source.age += 10”<br>  }<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在修改document的时候，如果该文档不存在，则使用upsert操作进行初始化</span><br></pre></td></tr></table></figure>\n<p>POST people/man/1/_update<br>{<br>  “script”: “ctx._source.age += 10”,<br>  “upsert”: {<br>    “age”: 20<br>  }<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">### 删除文档</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">删除单个文档</span><br></pre></td></tr></table></figure>\n<p>DELETE /indexName/type/id</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">删除type下所有的文档</span><br></pre></td></tr></table></figure>\n<p>POST /indexName/type/_delete_by_query?conflicts=proceed<br>{<br>  “query”:{<br>    “match_all”:{</p>\n<pre><code>}</code></pre><p>  }<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">### 查询文档</span><br><span class=\"line\"></span><br><span class=\"line\">查询单个文档</span><br></pre></td></tr></table></figure>\n<p>GET /indexName/type/id</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">批量查询文档(待验证)</span><br></pre></td></tr></table></figure>\n<p>GET /_mget<br>{<br>  “docs”: [<br>      {<br>        “_index”: “index1”,<br>        “_type”: “type”,<br>        “_id”: 1<br>      },<br>      {<br>        “_index”: “index2”,<br>        “_type”: “type”,<br>        “_id”: 2<br>      }<br>    ]<br>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#96;&#96;&#96;</span><br><span class=\"line\"></span><br><span class=\"line\">GET &#x2F;indexName&#x2F;type&#x2F;_mget</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;docs&quot;:[</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;FEILD&quot;:&quot;value&quot;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;FEILD2&quot;:&quot;value&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<p>查询所有文档</p>\n<p>简单查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_serach</span><br></pre></td></tr></table></figure>\n\n<p>法二</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_serach</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match_all&quot;:&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>查询某些字段内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">后面跟了 ?_source&#x3D;field1,field2</span><br><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;people&#x2F;_serach?_source&#x3D;field1,field2</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match_all&quot;:&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>查询多个索引下的多个type</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;index1,index2&#x2F;type1,type2&#x2F;_search</span><br></pre></td></tr></table></figure>\n\n<p>查询所有索引下的部分type</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;_all&#x2F;type1,type2&#x2F;_search</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"模糊查询\"><a href=\"#模糊查询\" class=\"headerlink\" title=\"模糊查询\"></a>模糊查询</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match&quot;:&#123;</span><br><span class=\"line\">      &quot;field&quot;:&quot;message&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ,</span><br><span class=\"line\">  &quot;sort&quot;:[</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    &quot;filed&quot;:&#123;&quot;order&quot;:&quot;desc&quot;&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>注意</strong><br>message将会被拆分进行匹配,若message是中文,则会按切分后的每个字来匹配,若<br>message是英语,则会是按每个单词来匹配</p>\n<p><img src=\"http://img.wqkenqing.ren/51ccc5cad8b8fbbbb6ef55d3106bfe43.png\" alt=\"\"><br><img src=\"http://img.wqkenqing.ren/47a3ffe716f0026c004b155836a56641.png\" alt=\"示列图\"></p>\n<p>全文搜索(按准度)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match&quot;:&#123;</span><br><span class=\"line\">      &quot;Field&quot;:&#123;</span><br><span class=\"line\">        &quot;query&quot;:&quot;val1 val2&quot;,</span><br><span class=\"line\">        &quot;operator&quot;:&quot;and&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>即Fileld 中必须有val1,val2</p>\n<p>按匹配度查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;query&quot;:&#123;</span><br><span class=\"line\">  &quot;match&quot;:&#123;</span><br><span class=\"line\">    &quot;Field&quot;:&#123;</span><br><span class=\"line\">      &quot;query&quot;:&quot;val1 val2 val3&quot;</span><br><span class=\"line\">      &quot;minimum_should_match&quot;:&quot;val&quot; eg:20%</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>即indexName,按Field中 val1 val2 val3 匹配度达到val即返回查询</p>\n<h3 id=\"高级查询\"><a href=\"#高级查询\" class=\"headerlink\" title=\"高级查询\"></a>高级查询</h3><p>简单精准查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match_phrase&quot;:&#123;</span><br><span class=\"line\">      &quot;Field&quot;:&quot;val&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>即查询要完全匹配val,但若val只有一个中文,则会Field只要含有val,就会被查出</p>\n<p>slop结合</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;match_phrase&quot;: &#123;</span><br><span class=\"line\">      &quot;name&quot;: &#123;</span><br><span class=\"line\">        &quot;query&quot;: &quot;张三&quot;,</span><br><span class=\"line\">        &quot;slop&quot;: 3</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>解读：slop是移动次数，上面案例表示“张”、“三”两个字可以经过最多挪动3次查询到！</p>\n<p>rescore (重打分）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;forum&#x2F;article&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;match&quot;: &#123;</span><br><span class=\"line\">      &quot;content&quot;: &quot;java spark&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;rescore&quot;:&#123;</span><br><span class=\"line\">    &quot;window_size&quot;: 50,</span><br><span class=\"line\">    &quot;query&quot;: &#123;</span><br><span class=\"line\">      &quot;rescore_query&quot;: &#123;</span><br><span class=\"line\">        &quot;match_phrase&quot;: &#123;</span><br><span class=\"line\">          &quot;content&quot;: &#123;</span><br><span class=\"line\">            &quot;query&quot;: &quot;java spark&quot;,</span><br><span class=\"line\">            &quot;slop&quot;: 50</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<p>多字段匹配查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;multi_match&quot;:&#123;</span><br><span class=\"line\">      &quot;query&quot;:&quot;val&quot;</span><br><span class=\"line\">      &quot;fields&quot;:[&quot;val1&quot;,&quot;val2&quot;]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在多个字段中,也是模糊查询val</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;query_string&quot;: &#123;</span><br><span class=\"line\">      &quot;query&quot;: &quot;(叶良辰 AND 火) OR (赵日天 AND 风)&quot;,</span><br><span class=\"line\">      &quot;fields&quot;: [&quot;name&quot;,&quot;desc&quot;]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"字段查询\"><a href=\"#字段查询\" class=\"headerlink\" title=\"字段查询\"></a>字段查询</h3><p>精准查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;query&quot;:&#123;</span><br><span class=\"line\">  &quot;term&quot;:&#123;</span><br><span class=\"line\">    &quot;field&quot;:&quot;val&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>分页查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;indexName&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;:&#123;</span><br><span class=\"line\">    &quot;match_all&quot;:&#123;&#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;from&quot;:num,</span><br><span class=\"line\">  &quot;size&quot;:num</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"范围查询\"><a href=\"#范围查询\" class=\"headerlink\" title=\"范围查询\"></a>范围查询</h3><p>数据值型</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">GET &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;range&quot;: &#123;</span><br><span class=\"line\">      &quot;age&quot;: &#123;</span><br><span class=\"line\">        &quot;gt&quot;: 16,</span><br><span class=\"line\">        &quot;lte&quot;: 30</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>日期类型</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;range&quot;: &#123;</span><br><span class=\"line\">      &quot;birthday&quot;: &#123;</span><br><span class=\"line\">        &quot;gte&quot;: &quot;2013-01-01&quot;,</span><br><span class=\"line\">        &quot;lte&quot;: &quot;now&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">GET book&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;constant_score&quot;: &#123;</span><br><span class=\"line\">      &quot;filter&quot;: &#123;</span><br><span class=\"line\">        &quot;range&quot;: &#123;</span><br><span class=\"line\">          &quot;date&quot;: &#123;</span><br><span class=\"line\">            &quot;gt&quot;: &quot;now-1M&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &quot;boost&quot;: 1.2</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>“gt”: “now-1M”表示从今天开始，往前推一个月！</p>\n<h3 id=\"过滤查询\"><a href=\"#过滤查询\" class=\"headerlink\" title=\"过滤查询\"></a>过滤查询</h3><p>法一</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;people&#x2F;man&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;constant_score&quot;: &#123;</span><br><span class=\"line\">      &quot;filter&quot;: &#123;</span><br><span class=\"line\">        &quot;range&quot;: &#123;</span><br><span class=\"line\">          &quot;age&quot;: &#123;</span><br><span class=\"line\">            &quot;gte&quot;: 20,</span><br><span class=\"line\">            &quot;lte&quot;: 30</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &quot;boost&quot;: 1.2</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>法二</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;bool&quot;: &#123;</span><br><span class=\"line\">      &quot;filter&quot;: &#123;</span><br><span class=\"line\">        &quot;term&quot;: &#123;</span><br><span class=\"line\">          &quot;age&quot;: 18</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"布尔查询\"><a href=\"#布尔查询\" class=\"headerlink\" title=\"布尔查询\"></a>布尔查询</h3><p>should查询<br>注意：should相当于 或 ，里面的match也是模糊匹配</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;bool&quot;: &#123;</span><br><span class=\"line\">      &quot;should&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;name&quot;: &quot;叶良辰&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;desc&quot;: &quot;赵日天&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>must查询<br>注意：两个条件都要满足，并且这里也会把must里面的“叶良辰”拆分成“叶”、“良”和“辰”进行查询；“赵日天”拆分成“赵”、“日”、和“天”！</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;bool&quot;: &#123;</span><br><span class=\"line\">      &quot;must&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;name&quot;: &quot;叶良辰&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;desc&quot;: &quot;赵日天&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>must与filter相结合<br>这里也会把must里面的“叶良辰”拆分成“叶”、“良”和“辰”进行查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;bool&quot;: &#123;</span><br><span class=\"line\">      &quot;must&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;name&quot;: &quot;叶良辰&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;match&quot;: &#123;</span><br><span class=\"line\">            &quot;desc&quot;: &quot;赵日天&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      &quot;filter&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          &quot;term&quot;: &#123;</span><br><span class=\"line\">            &quot;age&quot;: 18</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>must_not<br>注意：下面语句是精准匹配</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;bool&quot;: &#123;</span><br><span class=\"line\">      &quot;must_not&quot;: &#123;</span><br><span class=\"line\">        &quot;term&quot;: &#123;</span><br><span class=\"line\">          &quot;name&quot;: &quot;叶良辰&quot;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"聚合查询\"><a href=\"#聚合查询\" class=\"headerlink\" title=\"聚合查询\"></a>聚合查询</h3><p>根据字段类型查询</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">GET &#x2F;people&#x2F;man&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;size&quot;: 0,</span><br><span class=\"line\">  &quot;aggs&quot;: &#123;</span><br><span class=\"line\">    &quot;group_by_age&quot;: &#123;</span><br><span class=\"line\">      &quot;terms&quot;: &#123;</span><br><span class=\"line\">        &quot;field&quot;: &quot;age&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<p>查询总体值</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;aggs&quot;: &#123;</span><br><span class=\"line\">    &quot;grads_age&quot;: &#123;</span><br><span class=\"line\">      &quot;stats&quot;: &#123;</span><br><span class=\"line\">        &quot;field&quot;: &quot;age&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>查询最小值</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST &#x2F;people&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;aggs&quot;: &#123;</span><br><span class=\"line\">    &quot;grads_age&quot;: &#123;</span><br><span class=\"line\">      &quot;min&quot;: &#123;</span><br><span class=\"line\">        &quot;field&quot;: &quot;age&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>根据国家分组，然后计算年龄平均值：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">GET &#x2F;people&#x2F;man&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;size&quot;: 0,</span><br><span class=\"line\">  &quot;aggs&quot;: &#123;</span><br><span class=\"line\">    &quot;group_by_age&quot;: &#123;</span><br><span class=\"line\">      &quot;terms&quot;: &#123;</span><br><span class=\"line\">        &quot;field&quot;: &quot;country&quot;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &quot;aggs&quot;: &#123;</span><br><span class=\"line\">        &quot;avg_age&quot;: &#123;</span><br><span class=\"line\">          &quot;avg&quot;: &#123;</span><br><span class=\"line\">            &quot;field&quot;: &quot;age&quot;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>解决：上面的reason里面说的很清楚，将fielddata设置为true就行了：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">POST &#x2F;people&#x2F;_mapping&#x2F;man</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;properties&quot;: &#123;</span><br><span class=\"line\">    &quot;country&quot;: &#123;</span><br><span class=\"line\">      &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">      &quot;fielddata&quot;: true</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"排序查询\"><a href=\"#排序查询\" class=\"headerlink\" title=\"排序查询\"></a>排序查询</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">排序查询通常没有排到我们想要的结果，因为字段分词后，有很多单词，再排序跟我们想要的结果又出入</span><br><span class=\"line\"></span><br><span class=\"line\">解决办法：把需要排序的字段建立两次索引，一个排序，另一个不排序。</span><br><span class=\"line\"></span><br><span class=\"line\">如下面的案例：把title.raw的fielddata设置为true，是排序的；而title的fielddata默认是false，可以用来搜索</span><br><span class=\"line\"></span><br><span class=\"line\">index: true 是在title.raw建立索引可以被搜索到，</span><br><span class=\"line\"></span><br><span class=\"line\">fielddata: true是让其可以排序</span><br><span class=\"line\"></span><br><span class=\"line\">PUT &#x2F;blog</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;mappings&quot;: &#123;</span><br><span class=\"line\">    &quot;article&quot;: &#123;</span><br><span class=\"line\">      &quot;properties&quot;: &#123;</span><br><span class=\"line\">        &quot;auther&quot;: &#123;</span><br><span class=\"line\">          &quot;type&quot;: &quot;text&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;title&quot;: &#123;</span><br><span class=\"line\">          &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">          &quot;fields&quot;: &#123;</span><br><span class=\"line\">            &quot;raw&quot;:&#123;</span><br><span class=\"line\">              &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">              &quot;index&quot;: true,</span><br><span class=\"line\">              &quot;fielddata&quot;: true</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;content&quot;:&#123;</span><br><span class=\"line\">          &quot;type&quot;: &quot;text&quot;,</span><br><span class=\"line\">          &quot;analyzer&quot;: &quot;english&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;publishdate&quot;: &#123;</span><br><span class=\"line\">          &quot;type&quot;: &quot;date&quot;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET &#x2F;blog&#x2F;article&#x2F;_search</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;match_all&quot;: &#123;&#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;sort&quot;: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      &quot;title.raw&quot;: &#123;</span><br><span class=\"line\">        &quot;order&quot;: &quot;desc&quot;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"scroll查询\"><a href=\"#scroll查询\" class=\"headerlink\" title=\"scroll查询\"></a>scroll查询</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">当搜索量比较大的时候，我们在短时间内不可能一次性搜索完然后展示出来</span><br><span class=\"line\"></span><br><span class=\"line\">这个时候，可以使用scroll进行搜索</span><br><span class=\"line\"></span><br><span class=\"line\">比如下面的案例，可以先搜索3条数据，然后结果中会有一个_scroll_id，下次搜索就可以直接用这个_scroll_id进行搜索了</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET test_index&#x2F;test_type&#x2F;_search?scroll&#x3D;1m</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;query&quot;: &#123;</span><br><span class=\"line\">    &quot;match_all&quot;: &#123;&#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;sort&quot;: &quot;_doc&quot;,</span><br><span class=\"line\">  &quot;size&quot;: 3</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>step3 把scroll_id粘贴到下面的命令中再次搜索</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET _search&#x2F;scroll</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;scroll&quot;: &quot;1m&quot;,</span><br><span class=\"line\">  &quot;scroll_id&quot;: &quot;DnF1ZXJ5VGhlbkZldGNoBQAAAAAAAAA6FnZPSl9sbVR4UVVDU1NLb2wxVXJlbWcAAAAAAAAAPhZ2T0pfbG1UeFFVQ1NTS29sMVVyZW1nAAAAAAAAADsWdk9KX2xtVHhRVUNTU0tvbDFVcmVtZwAAAAAAAAA8FnZPSl9sbVR4UVVDU1NLb2wxVXJlbWcAAAAAAAAAPRZ2T0pfbG1UeFFVQ1NTS29sMVVyZW1n&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"_content":"\n集成的ElasticSearch-Kinaba\n\ndocker pull nshou/elasticsearch-kibana\n\ndocker run -d -p 9200:9200 -p 5601:5601 nshou/elasticsearch-kibana\n\n\ndocker run -d --name elasticsearch --net host -e \"discovery.type=single-node\" elasticsearch:6.7.2\ndocker run -d --name kibana --net host -e \"discovery.type=single-node\"  -e ELASTICSEARCH_URL=http://localhost:9200  kibana:6.7.2\n\n\nelasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.3.2/elasticsearch-analysis-ik-6.7.2.zip\n","source":"_posts/王阁/技术/大数据/es/es的docker安装.md","raw":"\n集成的ElasticSearch-Kinaba\n\ndocker pull nshou/elasticsearch-kibana\n\ndocker run -d -p 9200:9200 -p 5601:5601 nshou/elasticsearch-kibana\n\n\ndocker run -d --name elasticsearch --net host -e \"discovery.type=single-node\" elasticsearch:6.7.2\ndocker run -d --name kibana --net host -e \"discovery.type=single-node\"  -e ELASTICSEARCH_URL=http://localhost:9200  kibana:6.7.2\n\n\nelasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.3.2/elasticsearch-analysis-ik-6.7.2.zip\n","slug":"王阁/技术/大数据/es/es的docker安装","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/es/es的docker安装","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsge005ou6pw79xyg41e","content":"<p>集成的ElasticSearch-Kinaba</p>\n<p>docker pull nshou/elasticsearch-kibana</p>\n<p>docker run -d -p 9200:9200 -p 5601:5601 nshou/elasticsearch-kibana</p>\n<p>docker run -d –name elasticsearch –net host -e “discovery.type=single-node” elasticsearch:6.7.2<br>docker run -d –name kibana –net host -e “discovery.type=single-node”  -e ELASTICSEARCH_URL=<a href=\"http://localhost:9200\" target=\"_blank\" rel=\"noopener\">http://localhost:9200</a>  kibana:6.7.2</p>\n<p>elasticsearch-plugin install <a href=\"https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.3.2/elasticsearch-analysis-ik-6.7.2.zip\" target=\"_blank\" rel=\"noopener\">https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.3.2/elasticsearch-analysis-ik-6.7.2.zip</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>集成的ElasticSearch-Kinaba</p>\n<p>docker pull nshou/elasticsearch-kibana</p>\n<p>docker run -d -p 9200:9200 -p 5601:5601 nshou/elasticsearch-kibana</p>\n<p>docker run -d –name elasticsearch –net host -e “discovery.type=single-node” elasticsearch:6.7.2<br>docker run -d –name kibana –net host -e “discovery.type=single-node”  -e ELASTICSEARCH_URL=<a href=\"http://localhost:9200\" target=\"_blank\" rel=\"noopener\">http://localhost:9200</a>  kibana:6.7.2</p>\n<p>elasticsearch-plugin install <a href=\"https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.3.2/elasticsearch-analysis-ik-6.7.2.zip\" target=\"_blank\" rel=\"noopener\">https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.3.2/elasticsearch-analysis-ik-6.7.2.zip</a></p>\n"},{"_content":"```\n针对es的一些操作小结\n\n```\n\nes主要的重点在于查询,所以针对es的一些查询进行小结.\n\nes的查询分类\n\n主要有以下\n\n\n\n\nelasticsearch term 匹配索引值, macth匹配文本内容\n所以对text 类,用term会匹配不到 需要用match or match_phrase;\n\n\nsettings的设置\n\n```\n//静态设置：只能在索引创建时或者在状态为 closed index（闭合的索引）上设置\n\nindex.number_of_shards //主分片数，默认为5.只能在创建索引时设置，不能修改\n\nindex.shard.check_on_startup //是否应在索引打开前检查分片是否损坏，当检查到分片损坏将禁止分片被打开\n   false //默认值\n   checksum //检查物理损坏\n   true //检查物理和逻辑损坏，这将消耗大量内存和CPU\n   fix //检查物理和逻辑损坏。有损坏的分片将被集群自动删除，这可能导致数据丢失\n\nindex.routing_partition_size //自定义路由值可以转发的目的分片数。默认为 1，只能在索引创建时设置。此值必须小于index.number_of_shards\n\nindex.codec //默认使用LZ4压缩方式存储数据，也可以设置为 best_compression，它使用 DEFLATE 方式以牺牲字段存储性能为代价来获得更高的压缩比例。\n\n\n```\n\n```\n\nindex.number_of_replicas //每个主分片的副本数。默认为 1。\n\nindex.auto_expand_replicas //基于可用节点的数量自动分配副本数量,默认为 false（即禁用此功能）\n\nindex.refresh_interval //执行刷新操作的频率，这使得索引的最近更改可以被搜索。默认为 1s。可以设置为 -1 以禁用刷新。\n\nindex.max_result_window //用于索引搜索的 from+size 的最大值。默认为 10000\n\nindex.max_rescore_window // 在搜索此索引中 rescore 的 window_size 的最大值\n\nindex.blocks.read_only //设置为 true 使索引和索引元数据为只读，false 为允许写入和元数据更改。\n\nindex.blocks.read // 设置为 true 可禁用对索引的读取操作\n\nindex.blocks.write //设置为 true 可禁用对索引的写入操作。\n\nindex.blocks.metadata // 设置为 true 可禁用索引元数据的读取和写入。\n\nindex.max_refresh_listeners //索引的每个分片上可用的最大刷新侦听器数\n\n\n```\n","source":"_posts/王阁/技术/大数据/es/es小结.md","raw":"```\n针对es的一些操作小结\n\n```\n\nes主要的重点在于查询,所以针对es的一些查询进行小结.\n\nes的查询分类\n\n主要有以下\n\n\n\n\nelasticsearch term 匹配索引值, macth匹配文本内容\n所以对text 类,用term会匹配不到 需要用match or match_phrase;\n\n\nsettings的设置\n\n```\n//静态设置：只能在索引创建时或者在状态为 closed index（闭合的索引）上设置\n\nindex.number_of_shards //主分片数，默认为5.只能在创建索引时设置，不能修改\n\nindex.shard.check_on_startup //是否应在索引打开前检查分片是否损坏，当检查到分片损坏将禁止分片被打开\n   false //默认值\n   checksum //检查物理损坏\n   true //检查物理和逻辑损坏，这将消耗大量内存和CPU\n   fix //检查物理和逻辑损坏。有损坏的分片将被集群自动删除，这可能导致数据丢失\n\nindex.routing_partition_size //自定义路由值可以转发的目的分片数。默认为 1，只能在索引创建时设置。此值必须小于index.number_of_shards\n\nindex.codec //默认使用LZ4压缩方式存储数据，也可以设置为 best_compression，它使用 DEFLATE 方式以牺牲字段存储性能为代价来获得更高的压缩比例。\n\n\n```\n\n```\n\nindex.number_of_replicas //每个主分片的副本数。默认为 1。\n\nindex.auto_expand_replicas //基于可用节点的数量自动分配副本数量,默认为 false（即禁用此功能）\n\nindex.refresh_interval //执行刷新操作的频率，这使得索引的最近更改可以被搜索。默认为 1s。可以设置为 -1 以禁用刷新。\n\nindex.max_result_window //用于索引搜索的 from+size 的最大值。默认为 10000\n\nindex.max_rescore_window // 在搜索此索引中 rescore 的 window_size 的最大值\n\nindex.blocks.read_only //设置为 true 使索引和索引元数据为只读，false 为允许写入和元数据更改。\n\nindex.blocks.read // 设置为 true 可禁用对索引的读取操作\n\nindex.blocks.write //设置为 true 可禁用对索引的写入操作。\n\nindex.blocks.metadata // 设置为 true 可禁用索引元数据的读取和写入。\n\nindex.max_refresh_listeners //索引的每个分片上可用的最大刷新侦听器数\n\n\n```\n","slug":"王阁/技术/大数据/es/es小结","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/es/es小结","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsge005qu6pw20c40sm0","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">针对es的一些操作小结</span><br></pre></td></tr></table></figure>\n\n<p>es主要的重点在于查询,所以针对es的一些查询进行小结.</p>\n<p>es的查询分类</p>\n<p>主要有以下</p>\n<p>elasticsearch term 匹配索引值, macth匹配文本内容<br>所以对text 类,用term会匹配不到 需要用match or match_phrase;</p>\n<p>settings的设置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;静态设置：只能在索引创建时或者在状态为 closed index（闭合的索引）上设置</span><br><span class=\"line\"></span><br><span class=\"line\">index.number_of_shards &#x2F;&#x2F;主分片数，默认为5.只能在创建索引时设置，不能修改</span><br><span class=\"line\"></span><br><span class=\"line\">index.shard.check_on_startup &#x2F;&#x2F;是否应在索引打开前检查分片是否损坏，当检查到分片损坏将禁止分片被打开</span><br><span class=\"line\">   false &#x2F;&#x2F;默认值</span><br><span class=\"line\">   checksum &#x2F;&#x2F;检查物理损坏</span><br><span class=\"line\">   true &#x2F;&#x2F;检查物理和逻辑损坏，这将消耗大量内存和CPU</span><br><span class=\"line\">   fix &#x2F;&#x2F;检查物理和逻辑损坏。有损坏的分片将被集群自动删除，这可能导致数据丢失</span><br><span class=\"line\"></span><br><span class=\"line\">index.routing_partition_size &#x2F;&#x2F;自定义路由值可以转发的目的分片数。默认为 1，只能在索引创建时设置。此值必须小于index.number_of_shards</span><br><span class=\"line\"></span><br><span class=\"line\">index.codec &#x2F;&#x2F;默认使用LZ4压缩方式存储数据，也可以设置为 best_compression，它使用 DEFLATE 方式以牺牲字段存储性能为代价来获得更高的压缩比例。</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">index.number_of_replicas &#x2F;&#x2F;每个主分片的副本数。默认为 1。</span><br><span class=\"line\"></span><br><span class=\"line\">index.auto_expand_replicas &#x2F;&#x2F;基于可用节点的数量自动分配副本数量,默认为 false（即禁用此功能）</span><br><span class=\"line\"></span><br><span class=\"line\">index.refresh_interval &#x2F;&#x2F;执行刷新操作的频率，这使得索引的最近更改可以被搜索。默认为 1s。可以设置为 -1 以禁用刷新。</span><br><span class=\"line\"></span><br><span class=\"line\">index.max_result_window &#x2F;&#x2F;用于索引搜索的 from+size 的最大值。默认为 10000</span><br><span class=\"line\"></span><br><span class=\"line\">index.max_rescore_window &#x2F;&#x2F; 在搜索此索引中 rescore 的 window_size 的最大值</span><br><span class=\"line\"></span><br><span class=\"line\">index.blocks.read_only &#x2F;&#x2F;设置为 true 使索引和索引元数据为只读，false 为允许写入和元数据更改。</span><br><span class=\"line\"></span><br><span class=\"line\">index.blocks.read &#x2F;&#x2F; 设置为 true 可禁用对索引的读取操作</span><br><span class=\"line\"></span><br><span class=\"line\">index.blocks.write &#x2F;&#x2F;设置为 true 可禁用对索引的写入操作。</span><br><span class=\"line\"></span><br><span class=\"line\">index.blocks.metadata &#x2F;&#x2F; 设置为 true 可禁用索引元数据的读取和写入。</span><br><span class=\"line\"></span><br><span class=\"line\">index.max_refresh_listeners &#x2F;&#x2F;索引的每个分片上可用的最大刷新侦听器数</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">针对es的一些操作小结</span><br></pre></td></tr></table></figure>\n\n<p>es主要的重点在于查询,所以针对es的一些查询进行小结.</p>\n<p>es的查询分类</p>\n<p>主要有以下</p>\n<p>elasticsearch term 匹配索引值, macth匹配文本内容<br>所以对text 类,用term会匹配不到 需要用match or match_phrase;</p>\n<p>settings的设置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;静态设置：只能在索引创建时或者在状态为 closed index（闭合的索引）上设置</span><br><span class=\"line\"></span><br><span class=\"line\">index.number_of_shards &#x2F;&#x2F;主分片数，默认为5.只能在创建索引时设置，不能修改</span><br><span class=\"line\"></span><br><span class=\"line\">index.shard.check_on_startup &#x2F;&#x2F;是否应在索引打开前检查分片是否损坏，当检查到分片损坏将禁止分片被打开</span><br><span class=\"line\">   false &#x2F;&#x2F;默认值</span><br><span class=\"line\">   checksum &#x2F;&#x2F;检查物理损坏</span><br><span class=\"line\">   true &#x2F;&#x2F;检查物理和逻辑损坏，这将消耗大量内存和CPU</span><br><span class=\"line\">   fix &#x2F;&#x2F;检查物理和逻辑损坏。有损坏的分片将被集群自动删除，这可能导致数据丢失</span><br><span class=\"line\"></span><br><span class=\"line\">index.routing_partition_size &#x2F;&#x2F;自定义路由值可以转发的目的分片数。默认为 1，只能在索引创建时设置。此值必须小于index.number_of_shards</span><br><span class=\"line\"></span><br><span class=\"line\">index.codec &#x2F;&#x2F;默认使用LZ4压缩方式存储数据，也可以设置为 best_compression，它使用 DEFLATE 方式以牺牲字段存储性能为代价来获得更高的压缩比例。</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">index.number_of_replicas &#x2F;&#x2F;每个主分片的副本数。默认为 1。</span><br><span class=\"line\"></span><br><span class=\"line\">index.auto_expand_replicas &#x2F;&#x2F;基于可用节点的数量自动分配副本数量,默认为 false（即禁用此功能）</span><br><span class=\"line\"></span><br><span class=\"line\">index.refresh_interval &#x2F;&#x2F;执行刷新操作的频率，这使得索引的最近更改可以被搜索。默认为 1s。可以设置为 -1 以禁用刷新。</span><br><span class=\"line\"></span><br><span class=\"line\">index.max_result_window &#x2F;&#x2F;用于索引搜索的 from+size 的最大值。默认为 10000</span><br><span class=\"line\"></span><br><span class=\"line\">index.max_rescore_window &#x2F;&#x2F; 在搜索此索引中 rescore 的 window_size 的最大值</span><br><span class=\"line\"></span><br><span class=\"line\">index.blocks.read_only &#x2F;&#x2F;设置为 true 使索引和索引元数据为只读，false 为允许写入和元数据更改。</span><br><span class=\"line\"></span><br><span class=\"line\">index.blocks.read &#x2F;&#x2F; 设置为 true 可禁用对索引的读取操作</span><br><span class=\"line\"></span><br><span class=\"line\">index.blocks.write &#x2F;&#x2F;设置为 true 可禁用对索引的写入操作。</span><br><span class=\"line\"></span><br><span class=\"line\">index.blocks.metadata &#x2F;&#x2F; 设置为 true 可禁用索引元数据的读取和写入。</span><br><span class=\"line\"></span><br><span class=\"line\">index.max_refresh_listeners &#x2F;&#x2F;索引的每个分片上可用的最大刷新侦听器数</span><br></pre></td></tr></table></figure>\n"},{"_content":"`针对es的掌握,总有些地方不通透,想来还是从头从细粒度上再捋一遍`\n\n`总得来讲es的掌握需要分为两个大块,一是es的使用,二是es的运维`\n\n\n\n`默认选择kibana操作`\n\n[TOC]\n\n## 前言\n\n以<<Elasticsearch技术解析与实战>>一书为例.\n\n具体的使用章节内容大致有\n\n第二章部份\n\n第三章\n\n第四章\n\n第五章\n\n第七章\n\n运维相关\n\n第二章部份\n\n第六章\n\n第八章\n\n第九章\n\n\n\n## 索引\n\n### 创建索引\n\n```\nPUT /indexName/\n{\n\"settings\":{\n},\n\"mappings\":{\n}\n}\n```\n\n### 修改索引\n\n```\nPUT /indexName/\n{\n\n}\n```\n\n<font color=red>mappings映射只能添加,不能修改.所以一个index的mapping设计需要事先把握清楚.不然后续治理困难</font>\n\n### 删除索引\n\n### 别名\n\n#### 添加\n\n```\nPUT /alias\n{\n    \"actions\": [\n        {\"add\": {\"index\": \"test1\", \"alias\": \"alias1\"}}\n    ]\n}\n```\n\n#### 删除\n\n```\nPUT /alias\n{\n    \"actions\": [\n        {\"remove\": {\"index\": \"test1\", \"alias\": \"alias1\"}}\n    ]\n}\n```\n\n\n\n<strong>别名只能通过删除后再建立来进行修改</strong>\n\n\n\n#### 添加多个别名\n\n```\n{\n    \"actions\": [\n        {\"add\": {\"index\": \"test1\", \"alias\":\"alias1\"}},\n        {\"add\": {\"index\": \"test2\", \"alias\":\"alias1\"}}\n    ]\n}\n```\n\n\n\n\n\n### 索引配置\n\n常规的replica,shard\n\n然后还能配置analyzer\n\n```\nPUT /indexName/_settings\n{\n\"analysis\":{\n\"analyzer\":{\n\"content\":{\n\"type\":\"\",\n\"tokenizer\":\"\"\n}\n}\n}\n}\n```\n\n\n\n<strong>索引只能在关闭后,再进行一些设置上的调整</strong>\n\n\n\n\n### 映射\n\n#### 字符串数据可接受的参数\n\n\n\n\n\n","source":"_posts/王阁/技术/大数据/es/es详细.md","raw":"`针对es的掌握,总有些地方不通透,想来还是从头从细粒度上再捋一遍`\n\n`总得来讲es的掌握需要分为两个大块,一是es的使用,二是es的运维`\n\n\n\n`默认选择kibana操作`\n\n[TOC]\n\n## 前言\n\n以<<Elasticsearch技术解析与实战>>一书为例.\n\n具体的使用章节内容大致有\n\n第二章部份\n\n第三章\n\n第四章\n\n第五章\n\n第七章\n\n运维相关\n\n第二章部份\n\n第六章\n\n第八章\n\n第九章\n\n\n\n## 索引\n\n### 创建索引\n\n```\nPUT /indexName/\n{\n\"settings\":{\n},\n\"mappings\":{\n}\n}\n```\n\n### 修改索引\n\n```\nPUT /indexName/\n{\n\n}\n```\n\n<font color=red>mappings映射只能添加,不能修改.所以一个index的mapping设计需要事先把握清楚.不然后续治理困难</font>\n\n### 删除索引\n\n### 别名\n\n#### 添加\n\n```\nPUT /alias\n{\n    \"actions\": [\n        {\"add\": {\"index\": \"test1\", \"alias\": \"alias1\"}}\n    ]\n}\n```\n\n#### 删除\n\n```\nPUT /alias\n{\n    \"actions\": [\n        {\"remove\": {\"index\": \"test1\", \"alias\": \"alias1\"}}\n    ]\n}\n```\n\n\n\n<strong>别名只能通过删除后再建立来进行修改</strong>\n\n\n\n#### 添加多个别名\n\n```\n{\n    \"actions\": [\n        {\"add\": {\"index\": \"test1\", \"alias\":\"alias1\"}},\n        {\"add\": {\"index\": \"test2\", \"alias\":\"alias1\"}}\n    ]\n}\n```\n\n\n\n\n\n### 索引配置\n\n常规的replica,shard\n\n然后还能配置analyzer\n\n```\nPUT /indexName/_settings\n{\n\"analysis\":{\n\"analyzer\":{\n\"content\":{\n\"type\":\"\",\n\"tokenizer\":\"\"\n}\n}\n}\n}\n```\n\n\n\n<strong>索引只能在关闭后,再进行一些设置上的调整</strong>\n\n\n\n\n### 映射\n\n#### 字符串数据可接受的参数\n\n\n\n\n\n","slug":"王阁/技术/大数据/es/es详细","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/es/es详细","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgf005su6pwf6q3gso5","content":"<p><code>针对es的掌握,总有些地方不通透,想来还是从头从细粒度上再捋一遍</code></p>\n<p><code>总得来讲es的掌握需要分为两个大块,一是es的使用,二是es的运维</code></p>\n<p><code>默认选择kibana操作</code></p>\n<p>[TOC]</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>以&lt;&lt;Elasticsearch技术解析与实战&gt;&gt;一书为例.</p>\n<p>具体的使用章节内容大致有</p>\n<p>第二章部份</p>\n<p>第三章</p>\n<p>第四章</p>\n<p>第五章</p>\n<p>第七章</p>\n<p>运维相关</p>\n<p>第二章部份</p>\n<p>第六章</p>\n<p>第八章</p>\n<p>第九章</p>\n<h2 id=\"索引\"><a href=\"#索引\" class=\"headerlink\" title=\"索引\"></a>索引</h2><h3 id=\"创建索引\"><a href=\"#创建索引\" class=\"headerlink\" title=\"创建索引\"></a>创建索引</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName&#x2F;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;settings&quot;:&#123;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">&quot;mappings&quot;:&#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改索引\"><a href=\"#修改索引\" class=\"headerlink\" title=\"修改索引\"></a>修改索引</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName&#x2F;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=red>mappings映射只能添加,不能修改.所以一个index的mapping设计需要事先把握清楚.不然后续治理困难</font></p>\n<h3 id=\"删除索引\"><a href=\"#删除索引\" class=\"headerlink\" title=\"删除索引\"></a>删除索引</h3><h3 id=\"别名\"><a href=\"#别名\" class=\"headerlink\" title=\"别名\"></a>别名</h3><h4 id=\"添加\"><a href=\"#添加\" class=\"headerlink\" title=\"添加\"></a>添加</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;alias</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;actions&quot;: [</span><br><span class=\"line\">        &#123;&quot;add&quot;: &#123;&quot;index&quot;: &quot;test1&quot;, &quot;alias&quot;: &quot;alias1&quot;&#125;&#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;alias</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;actions&quot;: [</span><br><span class=\"line\">        &#123;&quot;remove&quot;: &#123;&quot;index&quot;: &quot;test1&quot;, &quot;alias&quot;: &quot;alias1&quot;&#125;&#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>别名只能通过删除后再建立来进行修改</strong></p>\n<h4 id=\"添加多个别名\"><a href=\"#添加多个别名\" class=\"headerlink\" title=\"添加多个别名\"></a>添加多个别名</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;actions&quot;: [</span><br><span class=\"line\">        &#123;&quot;add&quot;: &#123;&quot;index&quot;: &quot;test1&quot;, &quot;alias&quot;:&quot;alias1&quot;&#125;&#125;,</span><br><span class=\"line\">        &#123;&quot;add&quot;: &#123;&quot;index&quot;: &quot;test2&quot;, &quot;alias&quot;:&quot;alias1&quot;&#125;&#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"索引配置\"><a href=\"#索引配置\" class=\"headerlink\" title=\"索引配置\"></a>索引配置</h3><p>常规的replica,shard</p>\n<p>然后还能配置analyzer</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName&#x2F;_settings</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;analysis&quot;:&#123;</span><br><span class=\"line\">&quot;analyzer&quot;:&#123;</span><br><span class=\"line\">&quot;content&quot;:&#123;</span><br><span class=\"line\">&quot;type&quot;:&quot;&quot;,</span><br><span class=\"line\">&quot;tokenizer&quot;:&quot;&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>索引只能在关闭后,再进行一些设置上的调整</strong></p>\n<h3 id=\"映射\"><a href=\"#映射\" class=\"headerlink\" title=\"映射\"></a>映射</h3><h4 id=\"字符串数据可接受的参数\"><a href=\"#字符串数据可接受的参数\" class=\"headerlink\" title=\"字符串数据可接受的参数\"></a>字符串数据可接受的参数</h4>","site":{"data":{}},"excerpt":"","more":"<p><code>针对es的掌握,总有些地方不通透,想来还是从头从细粒度上再捋一遍</code></p>\n<p><code>总得来讲es的掌握需要分为两个大块,一是es的使用,二是es的运维</code></p>\n<p><code>默认选择kibana操作</code></p>\n<p>[TOC]</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>以&lt;&lt;Elasticsearch技术解析与实战&gt;&gt;一书为例.</p>\n<p>具体的使用章节内容大致有</p>\n<p>第二章部份</p>\n<p>第三章</p>\n<p>第四章</p>\n<p>第五章</p>\n<p>第七章</p>\n<p>运维相关</p>\n<p>第二章部份</p>\n<p>第六章</p>\n<p>第八章</p>\n<p>第九章</p>\n<h2 id=\"索引\"><a href=\"#索引\" class=\"headerlink\" title=\"索引\"></a>索引</h2><h3 id=\"创建索引\"><a href=\"#创建索引\" class=\"headerlink\" title=\"创建索引\"></a>创建索引</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName&#x2F;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;settings&quot;:&#123;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">&quot;mappings&quot;:&#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改索引\"><a href=\"#修改索引\" class=\"headerlink\" title=\"修改索引\"></a>修改索引</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName&#x2F;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><font color=red>mappings映射只能添加,不能修改.所以一个index的mapping设计需要事先把握清楚.不然后续治理困难</font></p>\n<h3 id=\"删除索引\"><a href=\"#删除索引\" class=\"headerlink\" title=\"删除索引\"></a>删除索引</h3><h3 id=\"别名\"><a href=\"#别名\" class=\"headerlink\" title=\"别名\"></a>别名</h3><h4 id=\"添加\"><a href=\"#添加\" class=\"headerlink\" title=\"添加\"></a>添加</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;alias</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;actions&quot;: [</span><br><span class=\"line\">        &#123;&quot;add&quot;: &#123;&quot;index&quot;: &quot;test1&quot;, &quot;alias&quot;: &quot;alias1&quot;&#125;&#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;alias</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;actions&quot;: [</span><br><span class=\"line\">        &#123;&quot;remove&quot;: &#123;&quot;index&quot;: &quot;test1&quot;, &quot;alias&quot;: &quot;alias1&quot;&#125;&#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>别名只能通过删除后再建立来进行修改</strong></p>\n<h4 id=\"添加多个别名\"><a href=\"#添加多个别名\" class=\"headerlink\" title=\"添加多个别名\"></a>添加多个别名</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;actions&quot;: [</span><br><span class=\"line\">        &#123;&quot;add&quot;: &#123;&quot;index&quot;: &quot;test1&quot;, &quot;alias&quot;:&quot;alias1&quot;&#125;&#125;,</span><br><span class=\"line\">        &#123;&quot;add&quot;: &#123;&quot;index&quot;: &quot;test2&quot;, &quot;alias&quot;:&quot;alias1&quot;&#125;&#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"索引配置\"><a href=\"#索引配置\" class=\"headerlink\" title=\"索引配置\"></a>索引配置</h3><p>常规的replica,shard</p>\n<p>然后还能配置analyzer</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUT &#x2F;indexName&#x2F;_settings</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;analysis&quot;:&#123;</span><br><span class=\"line\">&quot;analyzer&quot;:&#123;</span><br><span class=\"line\">&quot;content&quot;:&#123;</span><br><span class=\"line\">&quot;type&quot;:&quot;&quot;,</span><br><span class=\"line\">&quot;tokenizer&quot;:&quot;&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>索引只能在关闭后,再进行一些设置上的调整</strong></p>\n<h3 id=\"映射\"><a href=\"#映射\" class=\"headerlink\" title=\"映射\"></a>映射</h3><h4 id=\"字符串数据可接受的参数\"><a href=\"#字符串数据可接受的参数\" class=\"headerlink\" title=\"字符串数据可接受的参数\"></a>字符串数据可接受的参数</h4>"},{"_content":"`flink相关记录`\n\n## yarn启动\n\n\n```js\nUsage:\n   Required\n     -n,--container <arg>   Number of YARN container to allocate (=Number of Task Managers)\n   Optional\n     -D <arg>                        Dynamic properties\n     -d,--detached                   Start detached\n     -jm,--jobManagerMemory <arg>    Memory for JobManager Container with optional unit (default: MB)\n     -nm,--name                      Set a custom name for the application on YARN\n     -q,--query                      Display available YARN resources (memory, cores)\n     -qu,--queue <arg>               Specify YARN queue.\n     -s,--slots <arg>                Number of slots per TaskManager\n     -tm,--taskManagerMemory <arg>   Memory per TaskManager Container with optional unit (default: MB)\n     -z,--zookeeperNamespace <arg>   Namespace to create the Zookeeper sub-paths for HA mode\n```\n\nyarn-session.sh -n 8 -jm 2048 -tm 4096 -d\n参数解释：\n```\n//-n 2 表示指定两个容器\n// -jm 1024 表示jobmanager 1024M内存\n// -tm 1024表示taskmanager 1024M内存\n//-d 任务后台运行\n//-nm,--name  YARN上为一个自定义的应用设置一个名字\n//-q,--query  显示yarn中可用的资源 (内存, cpu核数)\n//-z,--zookeeperNamespace <arg>   针对HA模式在zookeeper上创建NameSpace\n//-id,--applicationId <yarnAppId>   YARN集群上的任务id，附着到一个后台运行的yarn session中\n```\n**命令**:\n\n` yarn-session.sh -n 10 -tm 8192 -s 32`\n` yarn-session.sh -n 2 -tm 2048 -s 2`\n` yarn-session.sh -n 1 -tm 1024 -s 2`\n\nyarn-session.sh -n 1 -tm 1024 -s 2\nyarn-session.sh -n 2 -tm 4096 -jm  4096\n\nyarn-session.sh -id application_1563854073510_0006\n\nflink run -m yarn-cluster -yn 2 -yjm 4096 -ytm  4096\n\n\n2020年 01月 13日 星期一 16:39:12\n\nyarn-session.sh -n 2 -tm 4096 -jm  4096\n","source":"_posts/王阁/技术/大数据/flink/Flink记录.md","raw":"`flink相关记录`\n\n## yarn启动\n\n\n```js\nUsage:\n   Required\n     -n,--container <arg>   Number of YARN container to allocate (=Number of Task Managers)\n   Optional\n     -D <arg>                        Dynamic properties\n     -d,--detached                   Start detached\n     -jm,--jobManagerMemory <arg>    Memory for JobManager Container with optional unit (default: MB)\n     -nm,--name                      Set a custom name for the application on YARN\n     -q,--query                      Display available YARN resources (memory, cores)\n     -qu,--queue <arg>               Specify YARN queue.\n     -s,--slots <arg>                Number of slots per TaskManager\n     -tm,--taskManagerMemory <arg>   Memory per TaskManager Container with optional unit (default: MB)\n     -z,--zookeeperNamespace <arg>   Namespace to create the Zookeeper sub-paths for HA mode\n```\n\nyarn-session.sh -n 8 -jm 2048 -tm 4096 -d\n参数解释：\n```\n//-n 2 表示指定两个容器\n// -jm 1024 表示jobmanager 1024M内存\n// -tm 1024表示taskmanager 1024M内存\n//-d 任务后台运行\n//-nm,--name  YARN上为一个自定义的应用设置一个名字\n//-q,--query  显示yarn中可用的资源 (内存, cpu核数)\n//-z,--zookeeperNamespace <arg>   针对HA模式在zookeeper上创建NameSpace\n//-id,--applicationId <yarnAppId>   YARN集群上的任务id，附着到一个后台运行的yarn session中\n```\n**命令**:\n\n` yarn-session.sh -n 10 -tm 8192 -s 32`\n` yarn-session.sh -n 2 -tm 2048 -s 2`\n` yarn-session.sh -n 1 -tm 1024 -s 2`\n\nyarn-session.sh -n 1 -tm 1024 -s 2\nyarn-session.sh -n 2 -tm 4096 -jm  4096\n\nyarn-session.sh -id application_1563854073510_0006\n\nflink run -m yarn-cluster -yn 2 -yjm 4096 -ytm  4096\n\n\n2020年 01月 13日 星期一 16:39:12\n\nyarn-session.sh -n 2 -tm 4096 -jm  4096\n","slug":"王阁/技术/大数据/flink/Flink记录","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-06-24T02:35:54.519Z","title":"王阁/技术/大数据/flink/Flink记录","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgf005uu6pw6jlrd3yg","content":"<p><code>flink相关记录</code></p>\n<h2 id=\"yarn启动\"><a href=\"#yarn启动\" class=\"headerlink\" title=\"yarn启动\"></a>yarn启动</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Usage:</span><br><span class=\"line\">   Required</span><br><span class=\"line\">     -n,--container &lt;arg&gt;   <span class=\"built_in\">Number</span> <span class=\"keyword\">of</span> YARN container to allocate (=<span class=\"built_in\">Number</span> <span class=\"keyword\">of</span> Task Managers)</span><br><span class=\"line\">   Optional</span><br><span class=\"line\">     -D &lt;arg&gt;                        Dynamic properties</span><br><span class=\"line\">     -d,--detached                   Start detached</span><br><span class=\"line\">     -jm,--jobManagerMemory &lt;arg&gt;    Memory <span class=\"keyword\">for</span> JobManager Container <span class=\"keyword\">with</span> optional unit (<span class=\"keyword\">default</span>: MB)</span><br><span class=\"line\">     -nm,--name                      <span class=\"built_in\">Set</span> a custom name <span class=\"keyword\">for</span> the application on YARN</span><br><span class=\"line\">     -q,--query                      Display available YARN resources (memory, cores)</span><br><span class=\"line\">     -qu,--queue &lt;arg&gt;               Specify YARN queue.</span><br><span class=\"line\">     -s,--slots &lt;arg&gt;                <span class=\"built_in\">Number</span> <span class=\"keyword\">of</span> slots per TaskManager</span><br><span class=\"line\">     -tm,--taskManagerMemory &lt;arg&gt;   Memory per TaskManager Container <span class=\"keyword\">with</span> optional unit (<span class=\"keyword\">default</span>: MB)</span><br><span class=\"line\">     -z,--zookeeperNamespace &lt;arg&gt;   Namespace to create the Zookeeper sub-paths <span class=\"keyword\">for</span> HA mode</span><br></pre></td></tr></table></figure>\n\n<p>yarn-session.sh -n 8 -jm 2048 -tm 4096 -d<br>参数解释：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;-n 2 表示指定两个容器</span><br><span class=\"line\">&#x2F;&#x2F; -jm 1024 表示jobmanager 1024M内存</span><br><span class=\"line\">&#x2F;&#x2F; -tm 1024表示taskmanager 1024M内存</span><br><span class=\"line\">&#x2F;&#x2F;-d 任务后台运行</span><br><span class=\"line\">&#x2F;&#x2F;-nm,--name  YARN上为一个自定义的应用设置一个名字</span><br><span class=\"line\">&#x2F;&#x2F;-q,--query  显示yarn中可用的资源 (内存, cpu核数)</span><br><span class=\"line\">&#x2F;&#x2F;-z,--zookeeperNamespace &lt;arg&gt;   针对HA模式在zookeeper上创建NameSpace</span><br><span class=\"line\">&#x2F;&#x2F;-id,--applicationId &lt;yarnAppId&gt;   YARN集群上的任务id，附着到一个后台运行的yarn session中</span><br></pre></td></tr></table></figure>\n<p><strong>命令</strong>:</p>\n<p><code>yarn-session.sh -n 10 -tm 8192 -s 32</code><br><code>yarn-session.sh -n 2 -tm 2048 -s 2</code><br><code>yarn-session.sh -n 1 -tm 1024 -s 2</code></p>\n<p>yarn-session.sh -n 1 -tm 1024 -s 2<br>yarn-session.sh -n 2 -tm 4096 -jm  4096</p>\n<p>yarn-session.sh -id application_1563854073510_0006</p>\n<p>flink run -m yarn-cluster -yn 2 -yjm 4096 -ytm  4096</p>\n<p>2020年 01月 13日 星期一 16:39:12</p>\n<p>yarn-session.sh -n 2 -tm 4096 -jm  4096</p>\n","site":{"data":{}},"excerpt":"","more":"<p><code>flink相关记录</code></p>\n<h2 id=\"yarn启动\"><a href=\"#yarn启动\" class=\"headerlink\" title=\"yarn启动\"></a>yarn启动</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Usage:</span><br><span class=\"line\">   Required</span><br><span class=\"line\">     -n,--container &lt;arg&gt;   <span class=\"built_in\">Number</span> <span class=\"keyword\">of</span> YARN container to allocate (=<span class=\"built_in\">Number</span> <span class=\"keyword\">of</span> Task Managers)</span><br><span class=\"line\">   Optional</span><br><span class=\"line\">     -D &lt;arg&gt;                        Dynamic properties</span><br><span class=\"line\">     -d,--detached                   Start detached</span><br><span class=\"line\">     -jm,--jobManagerMemory &lt;arg&gt;    Memory <span class=\"keyword\">for</span> JobManager Container <span class=\"keyword\">with</span> optional unit (<span class=\"keyword\">default</span>: MB)</span><br><span class=\"line\">     -nm,--name                      <span class=\"built_in\">Set</span> a custom name <span class=\"keyword\">for</span> the application on YARN</span><br><span class=\"line\">     -q,--query                      Display available YARN resources (memory, cores)</span><br><span class=\"line\">     -qu,--queue &lt;arg&gt;               Specify YARN queue.</span><br><span class=\"line\">     -s,--slots &lt;arg&gt;                <span class=\"built_in\">Number</span> <span class=\"keyword\">of</span> slots per TaskManager</span><br><span class=\"line\">     -tm,--taskManagerMemory &lt;arg&gt;   Memory per TaskManager Container <span class=\"keyword\">with</span> optional unit (<span class=\"keyword\">default</span>: MB)</span><br><span class=\"line\">     -z,--zookeeperNamespace &lt;arg&gt;   Namespace to create the Zookeeper sub-paths <span class=\"keyword\">for</span> HA mode</span><br></pre></td></tr></table></figure>\n\n<p>yarn-session.sh -n 8 -jm 2048 -tm 4096 -d<br>参数解释：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;-n 2 表示指定两个容器</span><br><span class=\"line\">&#x2F;&#x2F; -jm 1024 表示jobmanager 1024M内存</span><br><span class=\"line\">&#x2F;&#x2F; -tm 1024表示taskmanager 1024M内存</span><br><span class=\"line\">&#x2F;&#x2F;-d 任务后台运行</span><br><span class=\"line\">&#x2F;&#x2F;-nm,--name  YARN上为一个自定义的应用设置一个名字</span><br><span class=\"line\">&#x2F;&#x2F;-q,--query  显示yarn中可用的资源 (内存, cpu核数)</span><br><span class=\"line\">&#x2F;&#x2F;-z,--zookeeperNamespace &lt;arg&gt;   针对HA模式在zookeeper上创建NameSpace</span><br><span class=\"line\">&#x2F;&#x2F;-id,--applicationId &lt;yarnAppId&gt;   YARN集群上的任务id，附着到一个后台运行的yarn session中</span><br></pre></td></tr></table></figure>\n<p><strong>命令</strong>:</p>\n<p><code>yarn-session.sh -n 10 -tm 8192 -s 32</code><br><code>yarn-session.sh -n 2 -tm 2048 -s 2</code><br><code>yarn-session.sh -n 1 -tm 1024 -s 2</code></p>\n<p>yarn-session.sh -n 1 -tm 1024 -s 2<br>yarn-session.sh -n 2 -tm 4096 -jm  4096</p>\n<p>yarn-session.sh -id application_1563854073510_0006</p>\n<p>flink run -m yarn-cluster -yn 2 -yjm 4096 -ytm  4096</p>\n<p>2020年 01月 13日 星期一 16:39:12</p>\n<p>yarn-session.sh -n 2 -tm 4096 -jm  4096</p>\n"},{"_content":"redis address: 192.168.10.101\nport :5601\n\n\nLYDSJ_DATA_BASE_TYPE\n\n![基础映射类型](http://img.wqkenqing.ren/ce745f99167b91191debfc65fad693b4.png)\n\nLYDSJ_DATA_SOURCE\n\n![共享数据源](http://img.wqkenqing.ren/215be461e444100be5552e288a00caba.png)\n\n\nLYDSJ_DATA_TYPE\n\n![数据类型](http://img.wqkenqing.ren/f6e0b3711855e7f65380444470913900.png)\n\n\nLYDSJ_GATHER_DATA_SOURCE_MAP\n\n\nLYDSJ_GATHER_DATA_TYPE_MAP\n\n\n所以这里要确定一下\n这里的类目后续需不需要与可视化中心的类目统一\n","source":"_posts/王阁/技术/大数据/es/共享数据集合.md","raw":"redis address: 192.168.10.101\nport :5601\n\n\nLYDSJ_DATA_BASE_TYPE\n\n![基础映射类型](http://img.wqkenqing.ren/ce745f99167b91191debfc65fad693b4.png)\n\nLYDSJ_DATA_SOURCE\n\n![共享数据源](http://img.wqkenqing.ren/215be461e444100be5552e288a00caba.png)\n\n\nLYDSJ_DATA_TYPE\n\n![数据类型](http://img.wqkenqing.ren/f6e0b3711855e7f65380444470913900.png)\n\n\nLYDSJ_GATHER_DATA_SOURCE_MAP\n\n\nLYDSJ_GATHER_DATA_TYPE_MAP\n\n\n所以这里要确定一下\n这里的类目后续需不需要与可视化中心的类目统一\n","slug":"王阁/技术/大数据/es/共享数据集合","published":1,"date":"2023-02-23T02:51:20.908Z","updated":"2023-02-23T02:51:20.908Z","title":"王阁/技术/大数据/es/共享数据集合","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgg005wu6pwae8zab6v","content":"<p>redis address: 192.168.10.101<br>port :5601</p>\n<p>LYDSJ_DATA_BASE_TYPE</p>\n<p><img src=\"http://img.wqkenqing.ren/ce745f99167b91191debfc65fad693b4.png\" alt=\"基础映射类型\"></p>\n<p>LYDSJ_DATA_SOURCE</p>\n<p><img src=\"http://img.wqkenqing.ren/215be461e444100be5552e288a00caba.png\" alt=\"共享数据源\"></p>\n<p>LYDSJ_DATA_TYPE</p>\n<p><img src=\"http://img.wqkenqing.ren/f6e0b3711855e7f65380444470913900.png\" alt=\"数据类型\"></p>\n<p>LYDSJ_GATHER_DATA_SOURCE_MAP</p>\n<p>LYDSJ_GATHER_DATA_TYPE_MAP</p>\n<p>所以这里要确定一下<br>这里的类目后续需不需要与可视化中心的类目统一</p>\n","site":{"data":{}},"excerpt":"","more":"<p>redis address: 192.168.10.101<br>port :5601</p>\n<p>LYDSJ_DATA_BASE_TYPE</p>\n<p><img src=\"http://img.wqkenqing.ren/ce745f99167b91191debfc65fad693b4.png\" alt=\"基础映射类型\"></p>\n<p>LYDSJ_DATA_SOURCE</p>\n<p><img src=\"http://img.wqkenqing.ren/215be461e444100be5552e288a00caba.png\" alt=\"共享数据源\"></p>\n<p>LYDSJ_DATA_TYPE</p>\n<p><img src=\"http://img.wqkenqing.ren/f6e0b3711855e7f65380444470913900.png\" alt=\"数据类型\"></p>\n<p>LYDSJ_GATHER_DATA_SOURCE_MAP</p>\n<p>LYDSJ_GATHER_DATA_TYPE_MAP</p>\n<p>所以这里要确定一下<br>这里的类目后续需不需要与可视化中心的类目统一</p>\n"},{"_content":" ---\n title:  flink学习\n date:\n tags:\n ---\n\n <!--more-->\n\n base of flink\n\n * checkpoint\n * state\n * time\n * window\n\n\n##\n\nflink\n\nenvStream\naddSource\nfunction\naddSink\n\n## addSource\n\n### 基于集合\n\n* fromCollection(Collection)\n* fromCollection(Iterator, Class)\n* fromElements(T …)\n* fromParallelCollection(SplittableIterator, Class)\n* generateSequence(from,to)\n\n`fromCollection`\n\n```java\n\npublic static void fromCollection() {\n      List<String> list = new ArrayList<>();\n      for (int i = 0; i < 5; i++) {\n          list.add(i + \"\");\n      }\n      DataStream<String> dstrem = env.fromCollection(list);\n      dstrem.map(s -> new Tuple2(s, 1)).returns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String.class, Integer.class))\n              .print();\n  }\n\n```\n`generateSequence`\n\n```java\n\npublic static void fromGenerateSequence() {\n      DataStreamSource<Long> interStream = env.generateSequence(10, 1000);\n      interStream.print();\n  }\n\n```\n\n### 基于文件\n\n* readFile()\n\n```java\nDataStream<String> text = env.readTextFile(\"/Users/wqkenqing/Desktop/out/keyCount.txt\");\n       FlatMapFunction<String, Tuple2<String, String>> spliter = (String sentence, Collector<Tuple2<String, String>> out) -> {\n           String ss[] = sentence.split(\"\\\\s+\");\n           out.collect(new Tuple2<String, String>(ss[0], ss[1]));\n       };\n       FilterFunction<Tuple2<String, String>> filter = (Tuple2<String, String> message) -> {\n           if (message.f1.contains(\"m\")) {\n               return true;\n           }\n           return false;\n       };\n       ReduceFunction<String> reduceFunction = (m1, m2) -> {\n           return m1 + m2;\n       };\n       text.flatMap(spliter).returns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String.class, String.class))\n               .keyBy(0)\n               .reduce(reduceFunction)\n               .print();\n```\n\n\n### 基于socket\n\n\n```java\n\n```\n\n\n\n### 自定义Source\n\n分两部份,一是一些现有的source,但未集成至flink.另一种是纯自己写的source\n\npart one:\n\n* kafkaSource\n* hdfsSource\n\n\n`kafaSource`\n","source":"_posts/王阁/技术/大数据/flink/flink.md","raw":" ---\n title:  flink学习\n date:\n tags:\n ---\n\n <!--more-->\n\n base of flink\n\n * checkpoint\n * state\n * time\n * window\n\n\n##\n\nflink\n\nenvStream\naddSource\nfunction\naddSink\n\n## addSource\n\n### 基于集合\n\n* fromCollection(Collection)\n* fromCollection(Iterator, Class)\n* fromElements(T …)\n* fromParallelCollection(SplittableIterator, Class)\n* generateSequence(from,to)\n\n`fromCollection`\n\n```java\n\npublic static void fromCollection() {\n      List<String> list = new ArrayList<>();\n      for (int i = 0; i < 5; i++) {\n          list.add(i + \"\");\n      }\n      DataStream<String> dstrem = env.fromCollection(list);\n      dstrem.map(s -> new Tuple2(s, 1)).returns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String.class, Integer.class))\n              .print();\n  }\n\n```\n`generateSequence`\n\n```java\n\npublic static void fromGenerateSequence() {\n      DataStreamSource<Long> interStream = env.generateSequence(10, 1000);\n      interStream.print();\n  }\n\n```\n\n### 基于文件\n\n* readFile()\n\n```java\nDataStream<String> text = env.readTextFile(\"/Users/wqkenqing/Desktop/out/keyCount.txt\");\n       FlatMapFunction<String, Tuple2<String, String>> spliter = (String sentence, Collector<Tuple2<String, String>> out) -> {\n           String ss[] = sentence.split(\"\\\\s+\");\n           out.collect(new Tuple2<String, String>(ss[0], ss[1]));\n       };\n       FilterFunction<Tuple2<String, String>> filter = (Tuple2<String, String> message) -> {\n           if (message.f1.contains(\"m\")) {\n               return true;\n           }\n           return false;\n       };\n       ReduceFunction<String> reduceFunction = (m1, m2) -> {\n           return m1 + m2;\n       };\n       text.flatMap(spliter).returns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String.class, String.class))\n               .keyBy(0)\n               .reduce(reduceFunction)\n               .print();\n```\n\n\n### 基于socket\n\n\n```java\n\n```\n\n\n\n### 自定义Source\n\n分两部份,一是一些现有的source,但未集成至flink.另一种是纯自己写的source\n\npart one:\n\n* kafkaSource\n* hdfsSource\n\n\n`kafaSource`\n","slug":"王阁/技术/大数据/flink/flink","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/flink/flink","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgg005xu6pw6qjzh3lm","content":"<hr>\n<p> title:  flink学习<br> date:<br> tags:</p>\n<hr>\n <a id=\"more\"></a>\n\n<p> base of flink</p>\n<ul>\n<li>checkpoint</li>\n<li>state</li>\n<li>time</li>\n<li>window</li>\n</ul>\n<p>##</p>\n<p>flink</p>\n<p>envStream<br>addSource<br>function<br>addSink</p>\n<h2 id=\"addSource\"><a href=\"#addSource\" class=\"headerlink\" title=\"addSource\"></a>addSource</h2><h3 id=\"基于集合\"><a href=\"#基于集合\" class=\"headerlink\" title=\"基于集合\"></a>基于集合</h3><ul>\n<li>fromCollection(Collection)</li>\n<li>fromCollection(Iterator, Class)</li>\n<li>fromElements(T …)</li>\n<li>fromParallelCollection(SplittableIterator, Class)</li>\n<li>generateSequence(from,to)</li>\n</ul>\n<p><code>fromCollection</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">fromCollection</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      List&lt;String&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">          list.add(i + <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      DataStream&lt;String&gt; dstrem = env.fromCollection(list);</span><br><span class=\"line\">      dstrem.map(s -&gt; <span class=\"keyword\">new</span> Tuple2(s, <span class=\"number\">1</span>)).returns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">Integer</span>.<span class=\"title\">class</span>))</span></span><br><span class=\"line\"><span class=\"class\">              .<span class=\"title\">print</span>()</span>;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p><code>generateSequence</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">fromGenerateSequence</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      DataStreamSource&lt;Long&gt; interStream = env.generateSequence(<span class=\"number\">10</span>, <span class=\"number\">1000</span>);</span><br><span class=\"line\">      interStream.print();</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"基于文件\"><a href=\"#基于文件\" class=\"headerlink\" title=\"基于文件\"></a>基于文件</h3><ul>\n<li>readFile()</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DataStream&lt;String&gt; text = env.readTextFile(<span class=\"string\">\"/Users/wqkenqing/Desktop/out/keyCount.txt\"</span>);</span><br><span class=\"line\">       FlatMapFunction&lt;String, Tuple2&lt;String, String&gt;&gt; spliter = (String sentence, Collector&lt;Tuple2&lt;String, String&gt;&gt; out) -&gt; &#123;</span><br><span class=\"line\">           String ss[] = sentence.split(<span class=\"string\">\"\\\\s+\"</span>);</span><br><span class=\"line\">           out.collect(<span class=\"keyword\">new</span> Tuple2&lt;String, String&gt;(ss[<span class=\"number\">0</span>], ss[<span class=\"number\">1</span>]));</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       FilterFunction&lt;Tuple2&lt;String, String&gt;&gt; filter = (Tuple2&lt;String, String&gt; message) -&gt; &#123;</span><br><span class=\"line\">           <span class=\"keyword\">if</span> (message.f1.contains(<span class=\"string\">\"m\"</span>)) &#123;</span><br><span class=\"line\">               <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       ReduceFunction&lt;String&gt; reduceFunction = (m1, m2) -&gt; &#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> m1 + m2;</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       text.flatMap(spliter).returns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">String</span>.<span class=\"title\">class</span>))</span></span><br><span class=\"line\"><span class=\"class\">               .<span class=\"title\">keyBy</span>(0)</span></span><br><span class=\"line\"><span class=\"class\">               .<span class=\"title\">reduce</span>(<span class=\"title\">reduceFunction</span>)</span></span><br><span class=\"line\"><span class=\"class\">               .<span class=\"title\">print</span>()</span>;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"基于socket\"><a href=\"#基于socket\" class=\"headerlink\" title=\"基于socket\"></a>基于socket</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"自定义Source\"><a href=\"#自定义Source\" class=\"headerlink\" title=\"自定义Source\"></a>自定义Source</h3><p>分两部份,一是一些现有的source,但未集成至flink.另一种是纯自己写的source</p>\n<p>part one:</p>\n<ul>\n<li>kafkaSource</li>\n<li>hdfsSource</li>\n</ul>\n<p><code>kafaSource</code></p>\n","site":{"data":{}},"excerpt":"<hr>\n<p> title:  flink学习<br> date:<br> tags:</p>\n<hr>","more":"<p> base of flink</p>\n<ul>\n<li>checkpoint</li>\n<li>state</li>\n<li>time</li>\n<li>window</li>\n</ul>\n<p>##</p>\n<p>flink</p>\n<p>envStream<br>addSource<br>function<br>addSink</p>\n<h2 id=\"addSource\"><a href=\"#addSource\" class=\"headerlink\" title=\"addSource\"></a>addSource</h2><h3 id=\"基于集合\"><a href=\"#基于集合\" class=\"headerlink\" title=\"基于集合\"></a>基于集合</h3><ul>\n<li>fromCollection(Collection)</li>\n<li>fromCollection(Iterator, Class)</li>\n<li>fromElements(T …)</li>\n<li>fromParallelCollection(SplittableIterator, Class)</li>\n<li>generateSequence(from,to)</li>\n</ul>\n<p><code>fromCollection</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">fromCollection</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      List&lt;String&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">          list.add(i + <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      DataStream&lt;String&gt; dstrem = env.fromCollection(list);</span><br><span class=\"line\">      dstrem.map(s -&gt; <span class=\"keyword\">new</span> Tuple2(s, <span class=\"number\">1</span>)).returns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">Integer</span>.<span class=\"title\">class</span>))</span></span><br><span class=\"line\"><span class=\"class\">              .<span class=\"title\">print</span>()</span>;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p><code>generateSequence</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">fromGenerateSequence</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      DataStreamSource&lt;Long&gt; interStream = env.generateSequence(<span class=\"number\">10</span>, <span class=\"number\">1000</span>);</span><br><span class=\"line\">      interStream.print();</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"基于文件\"><a href=\"#基于文件\" class=\"headerlink\" title=\"基于文件\"></a>基于文件</h3><ul>\n<li>readFile()</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DataStream&lt;String&gt; text = env.readTextFile(<span class=\"string\">\"/Users/wqkenqing/Desktop/out/keyCount.txt\"</span>);</span><br><span class=\"line\">       FlatMapFunction&lt;String, Tuple2&lt;String, String&gt;&gt; spliter = (String sentence, Collector&lt;Tuple2&lt;String, String&gt;&gt; out) -&gt; &#123;</span><br><span class=\"line\">           String ss[] = sentence.split(<span class=\"string\">\"\\\\s+\"</span>);</span><br><span class=\"line\">           out.collect(<span class=\"keyword\">new</span> Tuple2&lt;String, String&gt;(ss[<span class=\"number\">0</span>], ss[<span class=\"number\">1</span>]));</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       FilterFunction&lt;Tuple2&lt;String, String&gt;&gt; filter = (Tuple2&lt;String, String&gt; message) -&gt; &#123;</span><br><span class=\"line\">           <span class=\"keyword\">if</span> (message.f1.contains(<span class=\"string\">\"m\"</span>)) &#123;</span><br><span class=\"line\">               <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       ReduceFunction&lt;String&gt; reduceFunction = (m1, m2) -&gt; &#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> m1 + m2;</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">       text.flatMap(spliter).returns((TypeInformation) TupleTypeInfo.getBasicTupleTypeInfo(String<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">String</span>.<span class=\"title\">class</span>))</span></span><br><span class=\"line\"><span class=\"class\">               .<span class=\"title\">keyBy</span>(0)</span></span><br><span class=\"line\"><span class=\"class\">               .<span class=\"title\">reduce</span>(<span class=\"title\">reduceFunction</span>)</span></span><br><span class=\"line\"><span class=\"class\">               .<span class=\"title\">print</span>()</span>;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"基于socket\"><a href=\"#基于socket\" class=\"headerlink\" title=\"基于socket\"></a>基于socket</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"自定义Source\"><a href=\"#自定义Source\" class=\"headerlink\" title=\"自定义Source\"></a>自定义Source</h3><p>分两部份,一是一些现有的source,但未集成至flink.另一种是纯自己写的source</p>\n<p>part one:</p>\n<ul>\n<li>kafkaSource</li>\n<li>hdfsSource</li>\n</ul>\n<p><code>kafaSource</code></p>"},{"_content":"## ES基本术语与组成\n\n### 索引index\n\nES中的索引概念可不是关系型数据库中的“索引”，ES中的索引指的是存储数据的地方，类似关系型数据库中的数据库概念\n\n### 类型type\n\n类型Type\n有的文章指出ES中的类型Type对应的就是关系型数据库中的表，在使用ES中我们会遇到另外一个概念映射（Mapping），也有不少的文章指出Mapping对应的就是关系型数据库中的表。关系型数据库中表与表是物理独立的，即使在两个表中存在相同名称不同类型的列，这在我们的关系型数据库也是极为合理的，但这在ES中就不合理，ES中即使是在同一个索引Index下，如果字段Field存在于不同的类型Type中，即使他们代表不同的含义，但是只要它们的名称相同也必须要求类型相同，在ES中类型Type对应于关系型数据库中表的概念已经名存实亡。实际上在ES中Type作为表的概念在后期版本中越来越被弱化，在未被ES正式移除前，ES后期版本已经不允许一个索引Index创建多个Type，相信在后面的版本会彻底移除类型Type。\n\n（注：ES6已经不允许一个Index创建多个Type，https://github.com/elastic/elasticsearch/pull/24317）\n\n如果在现阶段一定要理解ES中的Type，那么一定要和Mapping结合起来。可以理解为类型Type就是定义一个表，仅仅是定义而已，而映射Mapping定义了表结构（有哪些列，列的类型是什么）\n\n### 文档Document\n\n在非关系型数据库中，有部分被称之为“文档数据库”，对应于关系型数据库中的一行记录。\n\n### 字段Field\n\n对应关系型数据库中的列。\n\n\n### 分片\n","source":"_posts/王阁/技术/大数据/es/积累.md","raw":"## ES基本术语与组成\n\n### 索引index\n\nES中的索引概念可不是关系型数据库中的“索引”，ES中的索引指的是存储数据的地方，类似关系型数据库中的数据库概念\n\n### 类型type\n\n类型Type\n有的文章指出ES中的类型Type对应的就是关系型数据库中的表，在使用ES中我们会遇到另外一个概念映射（Mapping），也有不少的文章指出Mapping对应的就是关系型数据库中的表。关系型数据库中表与表是物理独立的，即使在两个表中存在相同名称不同类型的列，这在我们的关系型数据库也是极为合理的，但这在ES中就不合理，ES中即使是在同一个索引Index下，如果字段Field存在于不同的类型Type中，即使他们代表不同的含义，但是只要它们的名称相同也必须要求类型相同，在ES中类型Type对应于关系型数据库中表的概念已经名存实亡。实际上在ES中Type作为表的概念在后期版本中越来越被弱化，在未被ES正式移除前，ES后期版本已经不允许一个索引Index创建多个Type，相信在后面的版本会彻底移除类型Type。\n\n（注：ES6已经不允许一个Index创建多个Type，https://github.com/elastic/elasticsearch/pull/24317）\n\n如果在现阶段一定要理解ES中的Type，那么一定要和Mapping结合起来。可以理解为类型Type就是定义一个表，仅仅是定义而已，而映射Mapping定义了表结构（有哪些列，列的类型是什么）\n\n### 文档Document\n\n在非关系型数据库中，有部分被称之为“文档数据库”，对应于关系型数据库中的一行记录。\n\n### 字段Field\n\n对应关系型数据库中的列。\n\n\n### 分片\n","slug":"王阁/技术/大数据/es/积累","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/es/积累","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgh0060u6pw6qpq0bqp","content":"<h2 id=\"ES基本术语与组成\"><a href=\"#ES基本术语与组成\" class=\"headerlink\" title=\"ES基本术语与组成\"></a>ES基本术语与组成</h2><h3 id=\"索引index\"><a href=\"#索引index\" class=\"headerlink\" title=\"索引index\"></a>索引index</h3><p>ES中的索引概念可不是关系型数据库中的“索引”，ES中的索引指的是存储数据的地方，类似关系型数据库中的数据库概念</p>\n<h3 id=\"类型type\"><a href=\"#类型type\" class=\"headerlink\" title=\"类型type\"></a>类型type</h3><p>类型Type<br>有的文章指出ES中的类型Type对应的就是关系型数据库中的表，在使用ES中我们会遇到另外一个概念映射（Mapping），也有不少的文章指出Mapping对应的就是关系型数据库中的表。关系型数据库中表与表是物理独立的，即使在两个表中存在相同名称不同类型的列，这在我们的关系型数据库也是极为合理的，但这在ES中就不合理，ES中即使是在同一个索引Index下，如果字段Field存在于不同的类型Type中，即使他们代表不同的含义，但是只要它们的名称相同也必须要求类型相同，在ES中类型Type对应于关系型数据库中表的概念已经名存实亡。实际上在ES中Type作为表的概念在后期版本中越来越被弱化，在未被ES正式移除前，ES后期版本已经不允许一个索引Index创建多个Type，相信在后面的版本会彻底移除类型Type。</p>\n<p>（注：ES6已经不允许一个Index创建多个Type，<a href=\"https://github.com/elastic/elasticsearch/pull/24317）\" target=\"_blank\" rel=\"noopener\">https://github.com/elastic/elasticsearch/pull/24317）</a></p>\n<p>如果在现阶段一定要理解ES中的Type，那么一定要和Mapping结合起来。可以理解为类型Type就是定义一个表，仅仅是定义而已，而映射Mapping定义了表结构（有哪些列，列的类型是什么）</p>\n<h3 id=\"文档Document\"><a href=\"#文档Document\" class=\"headerlink\" title=\"文档Document\"></a>文档Document</h3><p>在非关系型数据库中，有部分被称之为“文档数据库”，对应于关系型数据库中的一行记录。</p>\n<h3 id=\"字段Field\"><a href=\"#字段Field\" class=\"headerlink\" title=\"字段Field\"></a>字段Field</h3><p>对应关系型数据库中的列。</p>\n<h3 id=\"分片\"><a href=\"#分片\" class=\"headerlink\" title=\"分片\"></a>分片</h3>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"ES基本术语与组成\"><a href=\"#ES基本术语与组成\" class=\"headerlink\" title=\"ES基本术语与组成\"></a>ES基本术语与组成</h2><h3 id=\"索引index\"><a href=\"#索引index\" class=\"headerlink\" title=\"索引index\"></a>索引index</h3><p>ES中的索引概念可不是关系型数据库中的“索引”，ES中的索引指的是存储数据的地方，类似关系型数据库中的数据库概念</p>\n<h3 id=\"类型type\"><a href=\"#类型type\" class=\"headerlink\" title=\"类型type\"></a>类型type</h3><p>类型Type<br>有的文章指出ES中的类型Type对应的就是关系型数据库中的表，在使用ES中我们会遇到另外一个概念映射（Mapping），也有不少的文章指出Mapping对应的就是关系型数据库中的表。关系型数据库中表与表是物理独立的，即使在两个表中存在相同名称不同类型的列，这在我们的关系型数据库也是极为合理的，但这在ES中就不合理，ES中即使是在同一个索引Index下，如果字段Field存在于不同的类型Type中，即使他们代表不同的含义，但是只要它们的名称相同也必须要求类型相同，在ES中类型Type对应于关系型数据库中表的概念已经名存实亡。实际上在ES中Type作为表的概念在后期版本中越来越被弱化，在未被ES正式移除前，ES后期版本已经不允许一个索引Index创建多个Type，相信在后面的版本会彻底移除类型Type。</p>\n<p>（注：ES6已经不允许一个Index创建多个Type，<a href=\"https://github.com/elastic/elasticsearch/pull/24317）\" target=\"_blank\" rel=\"noopener\">https://github.com/elastic/elasticsearch/pull/24317）</a></p>\n<p>如果在现阶段一定要理解ES中的Type，那么一定要和Mapping结合起来。可以理解为类型Type就是定义一个表，仅仅是定义而已，而映射Mapping定义了表结构（有哪些列，列的类型是什么）</p>\n<h3 id=\"文档Document\"><a href=\"#文档Document\" class=\"headerlink\" title=\"文档Document\"></a>文档Document</h3><p>在非关系型数据库中，有部分被称之为“文档数据库”，对应于关系型数据库中的一行记录。</p>\n<h3 id=\"字段Field\"><a href=\"#字段Field\" class=\"headerlink\" title=\"字段Field\"></a>字段Field</h3><p>对应关系型数据库中的列。</p>\n<h3 id=\"分片\"><a href=\"#分片\" class=\"headerlink\" title=\"分片\"></a>分片</h3>"},{"_content":" ---\n title:  flink_book.md\n date: 2020-8-24\n tags:  [flink,book]\n\n ---\n\n <!--more-->\n\n # flink book\n","source":"_posts/王阁/技术/大数据/flink/flink_book.md","raw":" ---\n title:  flink_book.md\n date: 2020-8-24\n tags:  [flink,book]\n\n ---\n\n <!--more-->\n\n # flink book\n","slug":"王阁/技术/大数据/flink/flink_book","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/flink/flink_book","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgh0061u6pw2bbl05pw","content":"<hr>\n<p> title:  flink_book.md<br> date: 2020-8-24<br> tags:  [flink,book]</p>\n<hr>\n <a id=\"more\"></a>\n\n<h1 id=\"flink-book\"><a href=\"#flink-book\" class=\"headerlink\" title=\"flink book\"></a>flink book</h1>","site":{"data":{}},"excerpt":"<hr>\n<p> title:  flink_book.md<br> date: 2020-8-24<br> tags:  [flink,book]</p>\n<hr>","more":"<h1 id=\"flink-book\"><a href=\"#flink-book\" class=\"headerlink\" title=\"flink book\"></a>flink book</h1>"},{"title":"flume记录","date":"2019-06-18T16:00:00.000Z","_content":"flume几种source and sink实际操作\n<!--more-->\n\n## soruce\n\nflume自身就支持多种source.\nchanel这里暂用mem\nsink to hdfs\n\n简单测试几种source\n\n\n\n```properties\n\n# 配置Agent\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# 配置Source\na1.sources.r1.type = exec\na1.sources.r1.channels = c1\na1.sources.r1.deserializer.outputCharset = UTF-8\n\n# 配置需要监控的日志输出目录\na1.sources.r1.command = tail\n\n# 配置Sink\na1.sinks.k1.type = hdfs\na1.sinks.k1.hdfs.useLocalTimeStamp = true\na1.sinks.k1.hdfs.path = hdfs://namenode:9000/flume/events/%Y-%m\na1.sinks.k1.hdfs.filePrefix = %Y-%m-%d-%H\na1.sinks.k1.hdfs.fileSuffix = .log\na1.sinks.k1.hdfs.minBlockReplicas = 1\na1.sinks.k1.hdfs.fileType = DataStream\na1.sinks.k1.hdfs.writeFormat = Text\n#a1.sinks.k1.hdfs.rollInterval = 86400\na1.sinks.k1.hdfs.rollSize =0\na1.sinks.k1.hdfs.rollCount =0\n#a1.sinks.k1.hdfs.idleTimeout = 0\n\n# 配置Channel\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# 将三者连接\na1.sources.r1.channel = c1\na1.sinks.k1.channel = c1\n\n```\n\n## 命令\n\nflume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f demo2.conf -n a1 -Dflume.root.logger=INFO,console\n16228\n\n\n## 解决Flume采集数据时在HDFS上产生大量小文件的问题\n\n以上conf为例\n\na1为agent的名称\ndemo.conf为flume配置文件的名称\n-c指向log4j.properties文件和flume_env.sh文件所在目录。\n--Dflume.root.logger=INFO,console 在终端输出运行日志\n\n查阅flume配置参数，如下：\n\nrollSize\n默认值：1024，当临时文件达到该大小（单位：bytes）时，滚动成目标文件。如果设置成0，则表示不根据临时文件大小来滚动文件。\n\nrollCount\n默认值：10，当events数据达到该数量时候，将临时文件滚动成目标文件，如果设置成0，则表示不根据events数据来滚动文件。\n\nround\n默认值：false，是否启用时间上的”舍弃”，类似于”四舍五入”，如果启用，则会影响除了%t的其他所有时间表达式；\n\nroundValue\n默认值：1，时间上进行“舍弃”的值；\n\nroundUnit\n\n默认值：seconds，时间上进行”舍弃”的单位，包含：second,minute,hour\n\n当设置了round、roundValue、roundUnit参数收，需要在sink指定的HDFS路径上指定按照时间生成的目录的格式，例如有需求，每采集1小时就在HDFS目录上生成一个目录，里面存放这1小时内采集到的数据。\n\n## flume file to avro\n\n```properties\n#########a1 agent#####\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# 配置Source\na1.sources.r1.type = exec\na1.sources.r1.channels = c1\na1.sources.r1.deserializer.outputCharset = UTF-8\na1.sources.r1.command = cat  /data/upload/theme_item_pool.csv\n\n# 配置需要监控的日志输出目录\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\na1.sinks.k1.type = avro\na1.sinks.k1.hostname = namenode\na1.sinks.k1.port = 4444\na1.sinks.k1.requiredAcks = 1\na1.sinks.k1.channel = c1\n\n```\n\n## flume avro to kafka\n\n```properties\n#########a1 agent#####\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# 配置Source\na1.sources.r1.type = exec\na1.sources.r1.channels = c1\na1.sources.r1.deserializer.outputCharset = UTF-8\na1.sources.r1.command = cat  /data/upload/theme_item_pool.csv\n\n# 配置需要监控的日志输出目录\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\na1.sinks.k1.type = avro\na1.sinks.k1.hostname = namenode\na1.sinks.k1.port = 4444\na1.sinks.k1.requiredAcks = 1\na1.sinks.k1.channel = c1\n```\n\n\n## avro source\n\n```properties\n#test avro sources\na1.sources=r1\na1.channels=c1\na1.sinks=k1\n\na1.sources.r1.type = avro\na1.sources.r1.channels=c1\na1.sources.r1.bind=localhost\na1.sources.r1.port=55555\n\n#Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity=1000\na1.channels.c1.transactionCapacity = 100\n\n#sink配置\na1.sinks.k1.type = hdfs\na1.sinks.k1.hdfs.useLocalTimeStamp = true\na1.sinks.k1.hdfs.path = hdfs://namenode:8020/flume/events/%Y-%m\na1.sinks.k1.hdfs.filePrefix = %Y-%m-%d-%H\na1.sinks.k1.hdfs.fileSuffix = .log\na1.sinks.k1.hdfs.minBlockReplicas = 1\na1.sinks.k1.hdfs.fileType = DataStream\na1.sinks.k1.hdfs.writeFormat = Text\n#a1.sinks.k1.hdfs.rollInterval = 86400\na1.sinks.k1.hdfs.rollSize =0\na1.sinks.k1.hdfs.rollCount =0\n#a1.sinks.k1.hdfs.idleTimeout = 0\na1.sinks.k1.channel = c1\n\n```\n## avro to file\n\n```properties\n#test avro sources\na1.sources=r1\na1.channels=c1\na1.sinks=k1\n\na1.sources.r1.type = exec\na1.sources.r1.channels = c1\na1.sources.r1.deserializer.outputCharset = UTF-8\na1.sources.r1.command =curl http://192.168.10.104:8088/ws/v1/cluster/apps\n\n#Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity=1000\na1.channels.c1.transactionCapacity = 100\n\n#sink配置\n\na1.sinks.k1.type=file_roll\n\na1.sinks.k1.channel=c1\n\na1.sinks.k1.sink.directory=/data/hadoop/flume-ng/config/log\n\n```\n\n\n```properties\n### 多个sink\n\n#test avro sources\na1.sources=r1\na1.channels=c1 c2\na1.sinks=k1 k2\n\n\na1.sources.r1.type = netcat\na1.sources.r1.bind=192.168.10.101\na1.sources.r1.port=55555\na1.sources.r1.channels = c1 c2\n\n#Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity=1000\na1.channels.c1.transactionCapacity = 100\n\n###channel2\na1.channels.c2.type = memory\na1.channels.c2.capacity=1000\na1.channels.c2.transactionCapacity = 100\n\n\n#sink配置\n\n#a1.sinks.k1.type=logger\na1.sinks.k1.type=file_roll\na1.sinks.k1.channel=c1\na1.sinks.k1.sink.directory=/data/hadoop/flume-ng/config/log\n\n###sink2\na1.sinks.k2.type = org.apache.flume.sink.kafka.KafkaSink\na1.sinks.k2.brokerList = namenode:9092\na1.sinks.k2.topic = carstream\na1.sinks.k2.batchSize = 100\na1.sinks.k2.requiredAcks = 1\na1.sinks.k2.channel=c2\n\n```\n\n## 目录变化\n\n```properties\n\na1.sources=r1\na1.channels=c1\na1.sinks=k1\n\na1.sources.r1.type = spooldir\na1.sources.r1.spoolDir = /data/hadoop/flume-ng/config/log\na1.sources.r1.fileHeader = true\na1.sources.r1.channels = c1\n\n#Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity=1000\na1.channels.c1.transactionCapacity = 100\n\na1.sinks.k1.type=logger\na1.sinks.k1.channel=c1\n\n\n```\n\n## tailDir\n```properties\n\n# in this case called 'a1'\n\na1.sources = s1\na1.channels = c1\na1.sinks = k1\n\n# For each one of the sources, the type is defined\na1.sources.s1.type = org.apache.flume.source.taildir.TaildirSource\na1.sources.s1.positionFile = /opt/cdhmoduels/apache-flume-1.5.0-cdh5.3.6-bin/taidir/dirsource/taildir_position.json\na1.sources.s1.filegroups = f1\na1.sources.s1.filegroups.f1 = /data/hadoop/flume-ng/log/\n\n# The channel can be defined as follows.\na1.sources.s1.channels = c1\na1.sinks.k1.channel = c1\n\n# Each sink's type must be defined\na1.sinks.k1.type = hdfs\na1.sinks.k1.hdfs.path = /flume/event/taildir\na1.sinks.k1.hdfs.filePrefix = hive-log\n#Specify the channel the sink should use\n\n# Each channel's type is defined.\na1.channels.c1.type = memory\n\n# Other config values specific to each type of channel(sink or source)\n# can be defined as well\n# In this case, it specifies the capacity of the memory channel\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 1000\n\n\n```\n\n\n\n\n\n## 操作记录\n\nflume-ng avro-client -c conf -H localhost -p 55555  -F /data/upload/trip_coord.csv\n\n/data/upload/trip_coord.csv\n\nflume-ng agent -c /etc/flume-ng/conf/ -f avro.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f avro2.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f curl.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f self2.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp_logger.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f avro3.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp_hdfs.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f avro.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f avro2.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp4.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f syslog.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f http_logger.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f api_logger.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f api_logger_twosink.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f demo4.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp_two_sink.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f spool.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f taildir.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f udp.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f udp_two_sink.conf -n a1 -Dflume.root.logger=INFO,console\n---\n\n2020-7-22\n\ndocker run --restart=unless-stopped  -d -p 9200:9200 -p 9300:9300 -e \"discovery.type=single-node\"  --name=\"hankoues\" elasticsearch:7.1.0\n\n\ndocker pull docker.io/cerebro\ndocker pull docker.io/cerebro\n\n---\n","source":"_posts/王阁/技术/大数据/flume/Flume.md","raw":"---\n\ntitle: flume记录\ndate: 2019-06-19\ntags:\n\n---\nflume几种source and sink实际操作\n<!--more-->\n\n## soruce\n\nflume自身就支持多种source.\nchanel这里暂用mem\nsink to hdfs\n\n简单测试几种source\n\n\n\n```properties\n\n# 配置Agent\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# 配置Source\na1.sources.r1.type = exec\na1.sources.r1.channels = c1\na1.sources.r1.deserializer.outputCharset = UTF-8\n\n# 配置需要监控的日志输出目录\na1.sources.r1.command = tail\n\n# 配置Sink\na1.sinks.k1.type = hdfs\na1.sinks.k1.hdfs.useLocalTimeStamp = true\na1.sinks.k1.hdfs.path = hdfs://namenode:9000/flume/events/%Y-%m\na1.sinks.k1.hdfs.filePrefix = %Y-%m-%d-%H\na1.sinks.k1.hdfs.fileSuffix = .log\na1.sinks.k1.hdfs.minBlockReplicas = 1\na1.sinks.k1.hdfs.fileType = DataStream\na1.sinks.k1.hdfs.writeFormat = Text\n#a1.sinks.k1.hdfs.rollInterval = 86400\na1.sinks.k1.hdfs.rollSize =0\na1.sinks.k1.hdfs.rollCount =0\n#a1.sinks.k1.hdfs.idleTimeout = 0\n\n# 配置Channel\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# 将三者连接\na1.sources.r1.channel = c1\na1.sinks.k1.channel = c1\n\n```\n\n## 命令\n\nflume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f demo2.conf -n a1 -Dflume.root.logger=INFO,console\n16228\n\n\n## 解决Flume采集数据时在HDFS上产生大量小文件的问题\n\n以上conf为例\n\na1为agent的名称\ndemo.conf为flume配置文件的名称\n-c指向log4j.properties文件和flume_env.sh文件所在目录。\n--Dflume.root.logger=INFO,console 在终端输出运行日志\n\n查阅flume配置参数，如下：\n\nrollSize\n默认值：1024，当临时文件达到该大小（单位：bytes）时，滚动成目标文件。如果设置成0，则表示不根据临时文件大小来滚动文件。\n\nrollCount\n默认值：10，当events数据达到该数量时候，将临时文件滚动成目标文件，如果设置成0，则表示不根据events数据来滚动文件。\n\nround\n默认值：false，是否启用时间上的”舍弃”，类似于”四舍五入”，如果启用，则会影响除了%t的其他所有时间表达式；\n\nroundValue\n默认值：1，时间上进行“舍弃”的值；\n\nroundUnit\n\n默认值：seconds，时间上进行”舍弃”的单位，包含：second,minute,hour\n\n当设置了round、roundValue、roundUnit参数收，需要在sink指定的HDFS路径上指定按照时间生成的目录的格式，例如有需求，每采集1小时就在HDFS目录上生成一个目录，里面存放这1小时内采集到的数据。\n\n## flume file to avro\n\n```properties\n#########a1 agent#####\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# 配置Source\na1.sources.r1.type = exec\na1.sources.r1.channels = c1\na1.sources.r1.deserializer.outputCharset = UTF-8\na1.sources.r1.command = cat  /data/upload/theme_item_pool.csv\n\n# 配置需要监控的日志输出目录\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\na1.sinks.k1.type = avro\na1.sinks.k1.hostname = namenode\na1.sinks.k1.port = 4444\na1.sinks.k1.requiredAcks = 1\na1.sinks.k1.channel = c1\n\n```\n\n## flume avro to kafka\n\n```properties\n#########a1 agent#####\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# 配置Source\na1.sources.r1.type = exec\na1.sources.r1.channels = c1\na1.sources.r1.deserializer.outputCharset = UTF-8\na1.sources.r1.command = cat  /data/upload/theme_item_pool.csv\n\n# 配置需要监控的日志输出目录\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\na1.sinks.k1.type = avro\na1.sinks.k1.hostname = namenode\na1.sinks.k1.port = 4444\na1.sinks.k1.requiredAcks = 1\na1.sinks.k1.channel = c1\n```\n\n\n## avro source\n\n```properties\n#test avro sources\na1.sources=r1\na1.channels=c1\na1.sinks=k1\n\na1.sources.r1.type = avro\na1.sources.r1.channels=c1\na1.sources.r1.bind=localhost\na1.sources.r1.port=55555\n\n#Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity=1000\na1.channels.c1.transactionCapacity = 100\n\n#sink配置\na1.sinks.k1.type = hdfs\na1.sinks.k1.hdfs.useLocalTimeStamp = true\na1.sinks.k1.hdfs.path = hdfs://namenode:8020/flume/events/%Y-%m\na1.sinks.k1.hdfs.filePrefix = %Y-%m-%d-%H\na1.sinks.k1.hdfs.fileSuffix = .log\na1.sinks.k1.hdfs.minBlockReplicas = 1\na1.sinks.k1.hdfs.fileType = DataStream\na1.sinks.k1.hdfs.writeFormat = Text\n#a1.sinks.k1.hdfs.rollInterval = 86400\na1.sinks.k1.hdfs.rollSize =0\na1.sinks.k1.hdfs.rollCount =0\n#a1.sinks.k1.hdfs.idleTimeout = 0\na1.sinks.k1.channel = c1\n\n```\n## avro to file\n\n```properties\n#test avro sources\na1.sources=r1\na1.channels=c1\na1.sinks=k1\n\na1.sources.r1.type = exec\na1.sources.r1.channels = c1\na1.sources.r1.deserializer.outputCharset = UTF-8\na1.sources.r1.command =curl http://192.168.10.104:8088/ws/v1/cluster/apps\n\n#Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity=1000\na1.channels.c1.transactionCapacity = 100\n\n#sink配置\n\na1.sinks.k1.type=file_roll\n\na1.sinks.k1.channel=c1\n\na1.sinks.k1.sink.directory=/data/hadoop/flume-ng/config/log\n\n```\n\n\n```properties\n### 多个sink\n\n#test avro sources\na1.sources=r1\na1.channels=c1 c2\na1.sinks=k1 k2\n\n\na1.sources.r1.type = netcat\na1.sources.r1.bind=192.168.10.101\na1.sources.r1.port=55555\na1.sources.r1.channels = c1 c2\n\n#Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity=1000\na1.channels.c1.transactionCapacity = 100\n\n###channel2\na1.channels.c2.type = memory\na1.channels.c2.capacity=1000\na1.channels.c2.transactionCapacity = 100\n\n\n#sink配置\n\n#a1.sinks.k1.type=logger\na1.sinks.k1.type=file_roll\na1.sinks.k1.channel=c1\na1.sinks.k1.sink.directory=/data/hadoop/flume-ng/config/log\n\n###sink2\na1.sinks.k2.type = org.apache.flume.sink.kafka.KafkaSink\na1.sinks.k2.brokerList = namenode:9092\na1.sinks.k2.topic = carstream\na1.sinks.k2.batchSize = 100\na1.sinks.k2.requiredAcks = 1\na1.sinks.k2.channel=c2\n\n```\n\n## 目录变化\n\n```properties\n\na1.sources=r1\na1.channels=c1\na1.sinks=k1\n\na1.sources.r1.type = spooldir\na1.sources.r1.spoolDir = /data/hadoop/flume-ng/config/log\na1.sources.r1.fileHeader = true\na1.sources.r1.channels = c1\n\n#Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity=1000\na1.channels.c1.transactionCapacity = 100\n\na1.sinks.k1.type=logger\na1.sinks.k1.channel=c1\n\n\n```\n\n## tailDir\n```properties\n\n# in this case called 'a1'\n\na1.sources = s1\na1.channels = c1\na1.sinks = k1\n\n# For each one of the sources, the type is defined\na1.sources.s1.type = org.apache.flume.source.taildir.TaildirSource\na1.sources.s1.positionFile = /opt/cdhmoduels/apache-flume-1.5.0-cdh5.3.6-bin/taidir/dirsource/taildir_position.json\na1.sources.s1.filegroups = f1\na1.sources.s1.filegroups.f1 = /data/hadoop/flume-ng/log/\n\n# The channel can be defined as follows.\na1.sources.s1.channels = c1\na1.sinks.k1.channel = c1\n\n# Each sink's type must be defined\na1.sinks.k1.type = hdfs\na1.sinks.k1.hdfs.path = /flume/event/taildir\na1.sinks.k1.hdfs.filePrefix = hive-log\n#Specify the channel the sink should use\n\n# Each channel's type is defined.\na1.channels.c1.type = memory\n\n# Other config values specific to each type of channel(sink or source)\n# can be defined as well\n# In this case, it specifies the capacity of the memory channel\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 1000\n\n\n```\n\n\n\n\n\n## 操作记录\n\nflume-ng avro-client -c conf -H localhost -p 55555  -F /data/upload/trip_coord.csv\n\n/data/upload/trip_coord.csv\n\nflume-ng agent -c /etc/flume-ng/conf/ -f avro.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f avro2.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f curl.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f self2.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp_logger.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f avro3.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp_hdfs.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f avro.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f avro2.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp4.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f syslog.conf -n a1 -Dflume.root.logger=INFO,console\n\nflume-ng agent -c /etc/flume-ng/conf/ -f http_logger.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f api_logger.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f api_logger_twosink.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f demo4.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f tcp_two_sink.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f spool.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f taildir.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f udp.conf -n a1 -Dflume.root.logger=INFO,console\nflume-ng agent -c /etc/flume-ng/conf/ -f udp_two_sink.conf -n a1 -Dflume.root.logger=INFO,console\n---\n\n2020-7-22\n\ndocker run --restart=unless-stopped  -d -p 9200:9200 -p 9300:9300 -e \"discovery.type=single-node\"  --name=\"hankoues\" elasticsearch:7.1.0\n\n\ndocker pull docker.io/cerebro\ndocker pull docker.io/cerebro\n\n---\n","slug":"王阁/技术/大数据/flume/Flume","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgh0064u6pw13us9k51","content":"<p>flume几种source and sink实际操作</p>\n<a id=\"more\"></a>\n\n<h2 id=\"soruce\"><a href=\"#soruce\" class=\"headerlink\" title=\"soruce\"></a>soruce</h2><p>flume自身就支持多种source.<br>chanel这里暂用mem<br>sink to hdfs</p>\n<p>简单测试几种source</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Agent</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span> = <span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span> = <span class=\"string\">k1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Source</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">exec</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.deserializer.outputCharset</span> = <span class=\"string\">UTF-8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置需要监控的日志输出目录</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.command</span> = <span class=\"string\">tail</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Sink</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span> = <span class=\"string\">hdfs</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.useLocalTimeStamp</span> = <span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.path</span> = <span class=\"string\">hdfs://namenode:9000/flume/events/%Y-%m</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.filePrefix</span> = <span class=\"string\">%Y-%m-%d-%H</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.fileSuffix</span> = <span class=\"string\">.log</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.minBlockReplicas</span> = <span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.fileType</span> = <span class=\"string\">DataStream</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.writeFormat</span> = <span class=\"string\">Text</span></span><br><span class=\"line\"><span class=\"comment\">#a1.sinks.k1.hdfs.rollInterval = 86400</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.rollSize</span> =<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.rollCount</span> =<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"comment\">#a1.sinks.k1.hdfs.idleTimeout = 0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Channel</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span> = <span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 将三者连接</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channel</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span> = <span class=\"string\">c1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"命令\"><a href=\"#命令\" class=\"headerlink\" title=\"命令\"></a>命令</h2><p>flume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f demo2.conf -n a1 -Dflume.root.logger=INFO,console<br>16228</p>\n<h2 id=\"解决Flume采集数据时在HDFS上产生大量小文件的问题\"><a href=\"#解决Flume采集数据时在HDFS上产生大量小文件的问题\" class=\"headerlink\" title=\"解决Flume采集数据时在HDFS上产生大量小文件的问题\"></a>解决Flume采集数据时在HDFS上产生大量小文件的问题</h2><p>以上conf为例</p>\n<p>a1为agent的名称<br>demo.conf为flume配置文件的名称<br>-c指向log4j.properties文件和flume_env.sh文件所在目录。<br>–Dflume.root.logger=INFO,console 在终端输出运行日志</p>\n<p>查阅flume配置参数，如下：</p>\n<p>rollSize<br>默认值：1024，当临时文件达到该大小（单位：bytes）时，滚动成目标文件。如果设置成0，则表示不根据临时文件大小来滚动文件。</p>\n<p>rollCount<br>默认值：10，当events数据达到该数量时候，将临时文件滚动成目标文件，如果设置成0，则表示不根据events数据来滚动文件。</p>\n<p>round<br>默认值：false，是否启用时间上的”舍弃”，类似于”四舍五入”，如果启用，则会影响除了%t的其他所有时间表达式；</p>\n<p>roundValue<br>默认值：1，时间上进行“舍弃”的值；</p>\n<p>roundUnit</p>\n<p>默认值：seconds，时间上进行”舍弃”的单位，包含：second,minute,hour</p>\n<p>当设置了round、roundValue、roundUnit参数收，需要在sink指定的HDFS路径上指定按照时间生成的目录的格式，例如有需求，每采集1小时就在HDFS目录上生成一个目录，里面存放这1小时内采集到的数据。</p>\n<h2 id=\"flume-file-to-avro\"><a href=\"#flume-file-to-avro\" class=\"headerlink\" title=\"flume file to avro\"></a>flume file to avro</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#########a1 agent#####</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span> = <span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span> = <span class=\"string\">k1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Source</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">exec</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.deserializer.outputCharset</span> = <span class=\"string\">UTF-8</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.command</span> = <span class=\"string\">cat  /data/upload/theme_item_pool.csv</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置需要监控的日志输出目录</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span> = <span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span> = <span class=\"string\">avro</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hostname</span> = <span class=\"string\">namenode</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.port</span> = <span class=\"string\">4444</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.requiredAcks</span> = <span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span> = <span class=\"string\">c1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"flume-avro-to-kafka\"><a href=\"#flume-avro-to-kafka\" class=\"headerlink\" title=\"flume avro to kafka\"></a>flume avro to kafka</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#########a1 agent#####</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span> = <span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span> = <span class=\"string\">k1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Source</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">exec</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.deserializer.outputCharset</span> = <span class=\"string\">UTF-8</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.command</span> = <span class=\"string\">cat  /data/upload/theme_item_pool.csv</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置需要监控的日志输出目录</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span> = <span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span> = <span class=\"string\">avro</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hostname</span> = <span class=\"string\">namenode</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.port</span> = <span class=\"string\">4444</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.requiredAcks</span> = <span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span> = <span class=\"string\">c1</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"avro-source\"><a href=\"#avro-source\" class=\"headerlink\" title=\"avro source\"></a>avro source</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#test avro sources</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span>=<span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span>=<span class=\"string\">k1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">avro</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.bind</span>=<span class=\"string\">localhost</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.port</span>=<span class=\"string\">55555</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Use a channel which buffers events in memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span>=<span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#sink配置</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span> = <span class=\"string\">hdfs</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.useLocalTimeStamp</span> = <span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.path</span> = <span class=\"string\">hdfs://namenode:8020/flume/events/%Y-%m</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.filePrefix</span> = <span class=\"string\">%Y-%m-%d-%H</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.fileSuffix</span> = <span class=\"string\">.log</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.minBlockReplicas</span> = <span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.fileType</span> = <span class=\"string\">DataStream</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.writeFormat</span> = <span class=\"string\">Text</span></span><br><span class=\"line\"><span class=\"comment\">#a1.sinks.k1.hdfs.rollInterval = 86400</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.rollSize</span> =<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.rollCount</span> =<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"comment\">#a1.sinks.k1.hdfs.idleTimeout = 0</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span> = <span class=\"string\">c1</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"avro-to-file\"><a href=\"#avro-to-file\" class=\"headerlink\" title=\"avro to file\"></a>avro to file</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#test avro sources</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span>=<span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span>=<span class=\"string\">k1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">exec</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.deserializer.outputCharset</span> = <span class=\"string\">UTF-8</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.command</span> =<span class=\"string\">curl http://192.168.10.104:8088/ws/v1/cluster/apps</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Use a channel which buffers events in memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span>=<span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#sink配置</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span>=<span class=\"string\">file_roll</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.sink.directory</span>=<span class=\"string\">/data/hadoop/flume-ng/config/log</span></span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 多个sink</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#test avro sources</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span>=<span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span>=<span class=\"string\">c1 c2</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span>=<span class=\"string\">k1 k2</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">netcat</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.bind</span>=<span class=\"string\">192.168.10.101</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.port</span>=<span class=\"string\">55555</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1 c2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Use a channel which buffers events in memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span>=<span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###channel2</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c2.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c2.capacity</span>=<span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c2.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#sink配置</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#a1.sinks.k1.type=logger</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span>=<span class=\"string\">file_roll</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.sink.directory</span>=<span class=\"string\">/data/hadoop/flume-ng/config/log</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###sink2</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.type</span> = <span class=\"string\">org.apache.flume.sink.kafka.KafkaSink</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.brokerList</span> = <span class=\"string\">namenode:9092</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.topic</span> = <span class=\"string\">carstream</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.batchSize</span> = <span class=\"string\">100</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.requiredAcks</span> = <span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.channel</span>=<span class=\"string\">c2</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"目录变化\"><a href=\"#目录变化\" class=\"headerlink\" title=\"目录变化\"></a>目录变化</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span>=<span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span>=<span class=\"string\">k1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">spooldir</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.spoolDir</span> = <span class=\"string\">/data/hadoop/flume-ng/config/log</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.fileHeader</span> = <span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Use a channel which buffers events in memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span>=<span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span>=<span class=\"string\">logger</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span>=<span class=\"string\">c1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"tailDir\"><a href=\"#tailDir\" class=\"headerlink\" title=\"tailDir\"></a>tailDir</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># in this case called 'a1'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span> = <span class=\"string\">s1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span> = <span class=\"string\">k1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># For each one of the sources, the type is defined</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.s1.type</span> = <span class=\"string\">org.apache.flume.source.taildir.TaildirSource</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.s1.positionFile</span> = <span class=\"string\">/opt/cdhmoduels/apache-flume-1.5.0-cdh5.3.6-bin/taidir/dirsource/taildir_position.json</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.s1.filegroups</span> = <span class=\"string\">f1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.s1.filegroups.f1</span> = <span class=\"string\">/data/hadoop/flume-ng/log/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The channel can be defined as follows.</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.s1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Each sink's type must be defined</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span> = <span class=\"string\">hdfs</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.path</span> = <span class=\"string\">/flume/event/taildir</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.filePrefix</span> = <span class=\"string\">hive-log</span></span><br><span class=\"line\"><span class=\"comment\">#Specify the channel the sink should use</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Each channel's type is defined.</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Other config values specific to each type of channel(sink or source)</span></span><br><span class=\"line\"><span class=\"comment\"># can be defined as well</span></span><br><span class=\"line\"><span class=\"comment\"># In this case, it specifies the capacity of the memory channel</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span> = <span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">1000</span></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"操作记录\"><a href=\"#操作记录\" class=\"headerlink\" title=\"操作记录\"></a>操作记录</h2><p>flume-ng avro-client -c conf -H localhost -p 55555  -F /data/upload/trip_coord.csv</p>\n<p>/data/upload/trip_coord.csv</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f avro.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f avro2.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f curl.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f self2.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f tcp_logger.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f avro3.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f tcp_hdfs.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f avro.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f avro2.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f tcp.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f tcp4.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f syslog.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f http_logger.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f api_logger.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f api_logger_twosink.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f demo4.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f tcp.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f tcp_two_sink.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f spool.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f taildir.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f udp.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f udp_two_sink.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<hr>\n<p>2020-7-22</p>\n<p>docker run –restart=unless-stopped  -d -p 9200:9200 -p 9300:9300 -e “discovery.type=single-node”  –name=”hankoues” elasticsearch:7.1.0</p>\n<p>docker pull docker.io/cerebro<br>docker pull docker.io/cerebro</p>\n<hr>\n","site":{"data":{}},"excerpt":"<p>flume几种source and sink实际操作</p>","more":"<h2 id=\"soruce\"><a href=\"#soruce\" class=\"headerlink\" title=\"soruce\"></a>soruce</h2><p>flume自身就支持多种source.<br>chanel这里暂用mem<br>sink to hdfs</p>\n<p>简单测试几种source</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Agent</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span> = <span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span> = <span class=\"string\">k1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Source</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">exec</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.deserializer.outputCharset</span> = <span class=\"string\">UTF-8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置需要监控的日志输出目录</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.command</span> = <span class=\"string\">tail</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Sink</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span> = <span class=\"string\">hdfs</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.useLocalTimeStamp</span> = <span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.path</span> = <span class=\"string\">hdfs://namenode:9000/flume/events/%Y-%m</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.filePrefix</span> = <span class=\"string\">%Y-%m-%d-%H</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.fileSuffix</span> = <span class=\"string\">.log</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.minBlockReplicas</span> = <span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.fileType</span> = <span class=\"string\">DataStream</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.writeFormat</span> = <span class=\"string\">Text</span></span><br><span class=\"line\"><span class=\"comment\">#a1.sinks.k1.hdfs.rollInterval = 86400</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.rollSize</span> =<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.rollCount</span> =<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"comment\">#a1.sinks.k1.hdfs.idleTimeout = 0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Channel</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span> = <span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 将三者连接</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channel</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span> = <span class=\"string\">c1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"命令\"><a href=\"#命令\" class=\"headerlink\" title=\"命令\"></a>命令</h2><p>flume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f demo2.conf -n a1 -Dflume.root.logger=INFO,console<br>16228</p>\n<h2 id=\"解决Flume采集数据时在HDFS上产生大量小文件的问题\"><a href=\"#解决Flume采集数据时在HDFS上产生大量小文件的问题\" class=\"headerlink\" title=\"解决Flume采集数据时在HDFS上产生大量小文件的问题\"></a>解决Flume采集数据时在HDFS上产生大量小文件的问题</h2><p>以上conf为例</p>\n<p>a1为agent的名称<br>demo.conf为flume配置文件的名称<br>-c指向log4j.properties文件和flume_env.sh文件所在目录。<br>–Dflume.root.logger=INFO,console 在终端输出运行日志</p>\n<p>查阅flume配置参数，如下：</p>\n<p>rollSize<br>默认值：1024，当临时文件达到该大小（单位：bytes）时，滚动成目标文件。如果设置成0，则表示不根据临时文件大小来滚动文件。</p>\n<p>rollCount<br>默认值：10，当events数据达到该数量时候，将临时文件滚动成目标文件，如果设置成0，则表示不根据events数据来滚动文件。</p>\n<p>round<br>默认值：false，是否启用时间上的”舍弃”，类似于”四舍五入”，如果启用，则会影响除了%t的其他所有时间表达式；</p>\n<p>roundValue<br>默认值：1，时间上进行“舍弃”的值；</p>\n<p>roundUnit</p>\n<p>默认值：seconds，时间上进行”舍弃”的单位，包含：second,minute,hour</p>\n<p>当设置了round、roundValue、roundUnit参数收，需要在sink指定的HDFS路径上指定按照时间生成的目录的格式，例如有需求，每采集1小时就在HDFS目录上生成一个目录，里面存放这1小时内采集到的数据。</p>\n<h2 id=\"flume-file-to-avro\"><a href=\"#flume-file-to-avro\" class=\"headerlink\" title=\"flume file to avro\"></a>flume file to avro</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#########a1 agent#####</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span> = <span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span> = <span class=\"string\">k1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Source</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">exec</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.deserializer.outputCharset</span> = <span class=\"string\">UTF-8</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.command</span> = <span class=\"string\">cat  /data/upload/theme_item_pool.csv</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置需要监控的日志输出目录</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span> = <span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span> = <span class=\"string\">avro</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hostname</span> = <span class=\"string\">namenode</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.port</span> = <span class=\"string\">4444</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.requiredAcks</span> = <span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span> = <span class=\"string\">c1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"flume-avro-to-kafka\"><a href=\"#flume-avro-to-kafka\" class=\"headerlink\" title=\"flume avro to kafka\"></a>flume avro to kafka</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#########a1 agent#####</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span> = <span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span> = <span class=\"string\">k1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置Source</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">exec</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.deserializer.outputCharset</span> = <span class=\"string\">UTF-8</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.command</span> = <span class=\"string\">cat  /data/upload/theme_item_pool.csv</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置需要监控的日志输出目录</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span> = <span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span> = <span class=\"string\">avro</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hostname</span> = <span class=\"string\">namenode</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.port</span> = <span class=\"string\">4444</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.requiredAcks</span> = <span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span> = <span class=\"string\">c1</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"avro-source\"><a href=\"#avro-source\" class=\"headerlink\" title=\"avro source\"></a>avro source</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#test avro sources</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span>=<span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span>=<span class=\"string\">k1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">avro</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.bind</span>=<span class=\"string\">localhost</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.port</span>=<span class=\"string\">55555</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Use a channel which buffers events in memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span>=<span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#sink配置</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span> = <span class=\"string\">hdfs</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.useLocalTimeStamp</span> = <span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.path</span> = <span class=\"string\">hdfs://namenode:8020/flume/events/%Y-%m</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.filePrefix</span> = <span class=\"string\">%Y-%m-%d-%H</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.fileSuffix</span> = <span class=\"string\">.log</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.minBlockReplicas</span> = <span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.fileType</span> = <span class=\"string\">DataStream</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.writeFormat</span> = <span class=\"string\">Text</span></span><br><span class=\"line\"><span class=\"comment\">#a1.sinks.k1.hdfs.rollInterval = 86400</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.rollSize</span> =<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.rollCount</span> =<span class=\"string\">0</span></span><br><span class=\"line\"><span class=\"comment\">#a1.sinks.k1.hdfs.idleTimeout = 0</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span> = <span class=\"string\">c1</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"avro-to-file\"><a href=\"#avro-to-file\" class=\"headerlink\" title=\"avro to file\"></a>avro to file</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#test avro sources</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span>=<span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span>=<span class=\"string\">k1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">exec</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.deserializer.outputCharset</span> = <span class=\"string\">UTF-8</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.command</span> =<span class=\"string\">curl http://192.168.10.104:8088/ws/v1/cluster/apps</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Use a channel which buffers events in memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span>=<span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#sink配置</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span>=<span class=\"string\">file_roll</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.sink.directory</span>=<span class=\"string\">/data/hadoop/flume-ng/config/log</span></span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### 多个sink</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#test avro sources</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span>=<span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span>=<span class=\"string\">c1 c2</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span>=<span class=\"string\">k1 k2</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">netcat</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.bind</span>=<span class=\"string\">192.168.10.101</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.port</span>=<span class=\"string\">55555</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1 c2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Use a channel which buffers events in memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span>=<span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###channel2</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c2.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c2.capacity</span>=<span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c2.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#sink配置</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#a1.sinks.k1.type=logger</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span>=<span class=\"string\">file_roll</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.sink.directory</span>=<span class=\"string\">/data/hadoop/flume-ng/config/log</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###sink2</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.type</span> = <span class=\"string\">org.apache.flume.sink.kafka.KafkaSink</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.brokerList</span> = <span class=\"string\">namenode:9092</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.topic</span> = <span class=\"string\">carstream</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.batchSize</span> = <span class=\"string\">100</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.requiredAcks</span> = <span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k2.channel</span>=<span class=\"string\">c2</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"目录变化\"><a href=\"#目录变化\" class=\"headerlink\" title=\"目录变化\"></a>目录变化</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span>=<span class=\"string\">r1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span>=<span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span>=<span class=\"string\">k1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.type</span> = <span class=\"string\">spooldir</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.spoolDir</span> = <span class=\"string\">/data/hadoop/flume-ng/config/log</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.fileHeader</span> = <span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.r1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Use a channel which buffers events in memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span>=<span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span>=<span class=\"string\">logger</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span>=<span class=\"string\">c1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"tailDir\"><a href=\"#tailDir\" class=\"headerlink\" title=\"tailDir\"></a>tailDir</h2><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># in this case called 'a1'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">a1.sources</span> = <span class=\"string\">s1</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks</span> = <span class=\"string\">k1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># For each one of the sources, the type is defined</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.s1.type</span> = <span class=\"string\">org.apache.flume.source.taildir.TaildirSource</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.s1.positionFile</span> = <span class=\"string\">/opt/cdhmoduels/apache-flume-1.5.0-cdh5.3.6-bin/taidir/dirsource/taildir_position.json</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.s1.filegroups</span> = <span class=\"string\">f1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.s1.filegroups.f1</span> = <span class=\"string\">/data/hadoop/flume-ng/log/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The channel can be defined as follows.</span></span><br><span class=\"line\"><span class=\"meta\">a1.sources.s1.channels</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.channel</span> = <span class=\"string\">c1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Each sink's type must be defined</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.type</span> = <span class=\"string\">hdfs</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.path</span> = <span class=\"string\">/flume/event/taildir</span></span><br><span class=\"line\"><span class=\"meta\">a1.sinks.k1.hdfs.filePrefix</span> = <span class=\"string\">hive-log</span></span><br><span class=\"line\"><span class=\"comment\">#Specify the channel the sink should use</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Each channel's type is defined.</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.type</span> = <span class=\"string\">memory</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Other config values specific to each type of channel(sink or source)</span></span><br><span class=\"line\"><span class=\"comment\"># can be defined as well</span></span><br><span class=\"line\"><span class=\"comment\"># In this case, it specifies the capacity of the memory channel</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.capacity</span> = <span class=\"string\">1000</span></span><br><span class=\"line\"><span class=\"meta\">a1.channels.c1.transactionCapacity</span> = <span class=\"string\">1000</span></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"操作记录\"><a href=\"#操作记录\" class=\"headerlink\" title=\"操作记录\"></a>操作记录</h2><p>flume-ng avro-client -c conf -H localhost -p 55555  -F /data/upload/trip_coord.csv</p>\n<p>/data/upload/trip_coord.csv</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f avro.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f avro2.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f curl.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f self2.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f tcp_logger.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f avro3.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f tcp_hdfs.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f avro.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f avro2.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f tcp.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f tcp4.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f syslog.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<p>flume-ng agent -c /etc/flume-ng/conf/ -f http_logger.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f api_logger.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f api_logger_twosink.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f kafka.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f demo4.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f tcp.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f tcp_two_sink.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f spool.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f taildir.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f udp.conf -n a1 -Dflume.root.logger=INFO,console<br>flume-ng agent -c /etc/flume-ng/conf/ -f udp_two_sink.conf -n a1 -Dflume.root.logger=INFO,console</p>\n<hr>\n<p>2020-7-22</p>\n<p>docker run –restart=unless-stopped  -d -p 9200:9200 -p 9300:9300 -e “discovery.type=single-node”  –name=”hankoues” elasticsearch:7.1.0</p>\n<p>docker pull docker.io/cerebro<br>docker pull docker.io/cerebro</p>\n<hr>"},{"_content":"# flume in docker\n\n```\n公司flume的docker镜像,\n```\n","source":"_posts/王阁/技术/大数据/flume/docker版flume使用.md","raw":"# flume in docker\n\n```\n公司flume的docker镜像,\n```\n","slug":"王阁/技术/大数据/flume/docker版flume使用","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/flume/docker版flume使用","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgi0065u6pw80uz0fd7","content":"<h1 id=\"flume-in-docker\"><a href=\"#flume-in-docker\" class=\"headerlink\" title=\"flume in docker\"></a>flume in docker</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">公司flume的docker镜像,</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"flume-in-docker\"><a href=\"#flume-in-docker\" class=\"headerlink\" title=\"flume in docker\"></a>flume in docker</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">公司flume的docker镜像,</span><br></pre></td></tr></table></figure>\n"},{"_content":"# summary of today\n`今日总结`\n  * hive外部表的创建与删除\n  * hbase filter的使用\n  * hbase rowkey 的使用\n\n  1. hive 外部表的创建,主要是 postion_gps_online表\n  2. hbase rowkey的使用,这里涉及到相关逻辑里的实现问题,如轨迹某段时间里所有设备的轨迹,rowkey 若设计成\n  device_id+\"_\"+ts_time 形式,则会出现通过start_row与stop_row的模糊区间匹配未找到现成的方案.所以后\n  续rowkey设计成的是ts_time+\"_\"+device_id的形式,这样可以只通过传时间就可以筛选出这个时间区间里的所有\n  device_id.\n\n\n","source":"_posts/王阁/技术/大数据/hbase/hbase20190109.md","raw":"# summary of today\n`今日总结`\n  * hive外部表的创建与删除\n  * hbase filter的使用\n  * hbase rowkey 的使用\n\n  1. hive 外部表的创建,主要是 postion_gps_online表\n  2. hbase rowkey的使用,这里涉及到相关逻辑里的实现问题,如轨迹某段时间里所有设备的轨迹,rowkey 若设计成\n  device_id+\"_\"+ts_time 形式,则会出现通过start_row与stop_row的模糊区间匹配未找到现成的方案.所以后\n  续rowkey设计成的是ts_time+\"_\"+device_id的形式,这样可以只通过传时间就可以筛选出这个时间区间里的所有\n  device_id.\n\n\n","slug":"王阁/技术/大数据/hbase/hbase20190109","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/hbase/hbase20190109","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgi0067u6pw9wxd6z1l","content":"<h1 id=\"summary-of-today\"><a href=\"#summary-of-today\" class=\"headerlink\" title=\"summary of today\"></a>summary of today</h1><p><code>今日总结</code></p>\n<ul>\n<li>hive外部表的创建与删除</li>\n<li>hbase filter的使用</li>\n<li>hbase rowkey 的使用</li>\n</ul>\n<ol>\n<li>hive 外部表的创建,主要是 postion_gps_online表</li>\n<li>hbase rowkey的使用,这里涉及到相关逻辑里的实现问题,如轨迹某段时间里所有设备的轨迹,rowkey 若设计成<br>device_id+”<em>“+ts_time 形式,则会出现通过start_row与stop_row的模糊区间匹配未找到现成的方案.所以后<br>续rowkey设计成的是ts_time+”</em>“+device_id的形式,这样可以只通过传时间就可以筛选出这个时间区间里的所有<br>device_id.</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"summary-of-today\"><a href=\"#summary-of-today\" class=\"headerlink\" title=\"summary of today\"></a>summary of today</h1><p><code>今日总结</code></p>\n<ul>\n<li>hive外部表的创建与删除</li>\n<li>hbase filter的使用</li>\n<li>hbase rowkey 的使用</li>\n</ul>\n<ol>\n<li>hive 外部表的创建,主要是 postion_gps_online表</li>\n<li>hbase rowkey的使用,这里涉及到相关逻辑里的实现问题,如轨迹某段时间里所有设备的轨迹,rowkey 若设计成<br>device_id+”<em>“+ts_time 形式,则会出现通过start_row与stop_row的模糊区间匹配未找到现成的方案.所以后<br>续rowkey设计成的是ts_time+”</em>“+device_id的形式,这样可以只通过传时间就可以筛选出这个时间区间里的所有<br>device_id.</li>\n</ol>\n"},{"_content":"# flink任务提交\n\n","source":"_posts/王阁/技术/大数据/flink/flink任务提交.md","raw":"# flink任务提交\n\n","slug":"王阁/技术/大数据/flink/flink任务提交","published":1,"date":"2022-03-21T02:01:35.205Z","updated":"2022-03-22T06:55:57.236Z","title":"王阁/技术/大数据/flink/flink任务提交","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgl0069u6pw1lr0cera","content":"<h1 id=\"flink任务提交\"><a href=\"#flink任务提交\" class=\"headerlink\" title=\"flink任务提交\"></a>flink任务提交</h1>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"flink任务提交\"><a href=\"#flink任务提交\" class=\"headerlink\" title=\"flink任务提交\"></a>flink任务提交</h1>"},{"_content":"```\nkafka细粒度学习与总结\n```\n\n### \n\n[相对干货](Kafka史上最详细原理总结)\n\n[Kafka学习笔记——Kafka原理与使用详解](https://blog.csdn.net/fuyuwei2015/article/details/72943207)\n\n记录点\n\n1. kafka组成部分\n2. 数据流转过程\n3. 备份\n4. 安全性\n5. 持久性\n6. 性能\n7. api储备\n8. 消息传输机制(相关语义)\n9. zookeer的作用\n\n\n\n着重点\n\n1. 备份同步(ISR)\n2. 消费请求处理(处理能力,出现总是的恢复)\n3. **Consumer Rebalance** 触发条件\n   1. consumer的增加或删除\n   2. broker的增加或删除\n4. 分区策略\n   1. Rangeassignor\n   2. RoundRobinAssignor\n   3. StickyAssignor\n   4. 自定义\n5. 再均衡\n   1. 均衡器\n      1. GroupCoordinator\n      2. ConsumerCoordinator\n   2. 原因\n      1. 新的消费者入组\n      2. 消息者宕机失联\n      3. 消息者主动退组(leaveGroupRequest),fg 调用unsubscribe()取消订阅\n      4. 消费组对应分区数量发生变化\n\n6. 分区管理\n   1. 优先副本(分区broker)\n      1. leader副本承担读写服务,分区leader被怼坏意味着该分区不可用.即broker节点中对应的leader副本多少,决定了该节点的负载高低.\n      2. \n\n\n\n\n\n\n\nHigh Level Consumer将从某个Partition读取的最后一条消息的offset存于Zookeeper中（从**0.8.2**开始同时支持将Offset存于Zookeeper中和专用的Kafka Topic中）。\n\n\n\n\n\nQ: 为什么kafka吞吐量高\n\n\n\nA: 同一个topic同个CG下的consumer只有一个消费它.\n\n\n\n\n\nQ:为什么要支持存储于专用的Kafka Topic中？\n\n\n\n\n\nKafkaConsumer 多线程思路:\n\n应该不单是只开启多个consumer线程\n\n\n\n\n\n","source":"_posts/王阁/技术/大数据/kafka/kafka小结.md","raw":"```\nkafka细粒度学习与总结\n```\n\n### \n\n[相对干货](Kafka史上最详细原理总结)\n\n[Kafka学习笔记——Kafka原理与使用详解](https://blog.csdn.net/fuyuwei2015/article/details/72943207)\n\n记录点\n\n1. kafka组成部分\n2. 数据流转过程\n3. 备份\n4. 安全性\n5. 持久性\n6. 性能\n7. api储备\n8. 消息传输机制(相关语义)\n9. zookeer的作用\n\n\n\n着重点\n\n1. 备份同步(ISR)\n2. 消费请求处理(处理能力,出现总是的恢复)\n3. **Consumer Rebalance** 触发条件\n   1. consumer的增加或删除\n   2. broker的增加或删除\n4. 分区策略\n   1. Rangeassignor\n   2. RoundRobinAssignor\n   3. StickyAssignor\n   4. 自定义\n5. 再均衡\n   1. 均衡器\n      1. GroupCoordinator\n      2. ConsumerCoordinator\n   2. 原因\n      1. 新的消费者入组\n      2. 消息者宕机失联\n      3. 消息者主动退组(leaveGroupRequest),fg 调用unsubscribe()取消订阅\n      4. 消费组对应分区数量发生变化\n\n6. 分区管理\n   1. 优先副本(分区broker)\n      1. leader副本承担读写服务,分区leader被怼坏意味着该分区不可用.即broker节点中对应的leader副本多少,决定了该节点的负载高低.\n      2. \n\n\n\n\n\n\n\nHigh Level Consumer将从某个Partition读取的最后一条消息的offset存于Zookeeper中（从**0.8.2**开始同时支持将Offset存于Zookeeper中和专用的Kafka Topic中）。\n\n\n\n\n\nQ: 为什么kafka吞吐量高\n\n\n\nA: 同一个topic同个CG下的consumer只有一个消费它.\n\n\n\n\n\nQ:为什么要支持存储于专用的Kafka Topic中？\n\n\n\n\n\nKafkaConsumer 多线程思路:\n\n应该不单是只开启多个consumer线程\n\n\n\n\n\n","slug":"王阁/技术/大数据/kafka/kafka小结","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/kafka/kafka小结","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgn006bu6pw4fixhsv3","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kafka细粒度学习与总结</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"Kafka史上最详细原理总结\">相对干货</a></p>\n<p><a href=\"https://blog.csdn.net/fuyuwei2015/article/details/72943207\" target=\"_blank\" rel=\"noopener\">Kafka学习笔记——Kafka原理与使用详解</a></p>\n<p>记录点</p>\n<ol>\n<li>kafka组成部分</li>\n<li>数据流转过程</li>\n<li>备份</li>\n<li>安全性</li>\n<li>持久性</li>\n<li>性能</li>\n<li>api储备</li>\n<li>消息传输机制(相关语义)</li>\n<li>zookeer的作用</li>\n</ol>\n<p>着重点</p>\n<ol>\n<li><p>备份同步(ISR)</p>\n</li>\n<li><p>消费请求处理(处理能力,出现总是的恢复)</p>\n</li>\n<li><p><strong>Consumer Rebalance</strong> 触发条件</p>\n<ol>\n<li>consumer的增加或删除</li>\n<li>broker的增加或删除</li>\n</ol>\n</li>\n<li><p>分区策略</p>\n<ol>\n<li>Rangeassignor</li>\n<li>RoundRobinAssignor</li>\n<li>StickyAssignor</li>\n<li>自定义</li>\n</ol>\n</li>\n<li><p>再均衡</p>\n<ol>\n<li>均衡器<ol>\n<li>GroupCoordinator</li>\n<li>ConsumerCoordinator</li>\n</ol>\n</li>\n<li>原因<ol>\n<li>新的消费者入组</li>\n<li>消息者宕机失联</li>\n<li>消息者主动退组(leaveGroupRequest),fg 调用unsubscribe()取消订阅</li>\n<li>消费组对应分区数量发生变化</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>分区管理</p>\n<ol>\n<li>优先副本(分区broker)<ol>\n<li>leader副本承担读写服务,分区leader被怼坏意味着该分区不可用.即broker节点中对应的leader副本多少,决定了该节点的负载高低.</li>\n<li></li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<p>High Level Consumer将从某个Partition读取的最后一条消息的offset存于Zookeeper中（从<strong>0.8.2</strong>开始同时支持将Offset存于Zookeeper中和专用的Kafka Topic中）。</p>\n<p>Q: 为什么kafka吞吐量高</p>\n<p>A: 同一个topic同个CG下的consumer只有一个消费它.</p>\n<p>Q:为什么要支持存储于专用的Kafka Topic中？</p>\n<p>KafkaConsumer 多线程思路:</p>\n<p>应该不单是只开启多个consumer线程</p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kafka细粒度学习与总结</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"Kafka史上最详细原理总结\">相对干货</a></p>\n<p><a href=\"https://blog.csdn.net/fuyuwei2015/article/details/72943207\" target=\"_blank\" rel=\"noopener\">Kafka学习笔记——Kafka原理与使用详解</a></p>\n<p>记录点</p>\n<ol>\n<li>kafka组成部分</li>\n<li>数据流转过程</li>\n<li>备份</li>\n<li>安全性</li>\n<li>持久性</li>\n<li>性能</li>\n<li>api储备</li>\n<li>消息传输机制(相关语义)</li>\n<li>zookeer的作用</li>\n</ol>\n<p>着重点</p>\n<ol>\n<li><p>备份同步(ISR)</p>\n</li>\n<li><p>消费请求处理(处理能力,出现总是的恢复)</p>\n</li>\n<li><p><strong>Consumer Rebalance</strong> 触发条件</p>\n<ol>\n<li>consumer的增加或删除</li>\n<li>broker的增加或删除</li>\n</ol>\n</li>\n<li><p>分区策略</p>\n<ol>\n<li>Rangeassignor</li>\n<li>RoundRobinAssignor</li>\n<li>StickyAssignor</li>\n<li>自定义</li>\n</ol>\n</li>\n<li><p>再均衡</p>\n<ol>\n<li>均衡器<ol>\n<li>GroupCoordinator</li>\n<li>ConsumerCoordinator</li>\n</ol>\n</li>\n<li>原因<ol>\n<li>新的消费者入组</li>\n<li>消息者宕机失联</li>\n<li>消息者主动退组(leaveGroupRequest),fg 调用unsubscribe()取消订阅</li>\n<li>消费组对应分区数量发生变化</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>分区管理</p>\n<ol>\n<li>优先副本(分区broker)<ol>\n<li>leader副本承担读写服务,分区leader被怼坏意味着该分区不可用.即broker节点中对应的leader副本多少,决定了该节点的负载高低.</li>\n<li></li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<p>High Level Consumer将从某个Partition读取的最后一条消息的offset存于Zookeeper中（从<strong>0.8.2</strong>开始同时支持将Offset存于Zookeeper中和专用的Kafka Topic中）。</p>\n<p>Q: 为什么kafka吞吐量高</p>\n<p>A: 同一个topic同个CG下的consumer只有一个消费它.</p>\n<p>Q:为什么要支持存储于专用的Kafka Topic中？</p>\n<p>KafkaConsumer 多线程思路:</p>\n<p>应该不单是只开启多个consumer线程</p>\n"},{"title":"hbase api升级","date":"2021-06-18T06:09:09.371Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n\n ## hbase 0.9X api升级为1.x\n hbase 现在版本是2.0.3\n\n这次api升级感知到的api的调整主要有\n引入了\norg.apache.hadoop.hbase.client.Connection 类\n即现在与hbase的交互都先拿到Connection这个实例，然后再进行后续操作，如获取Admin,Table。等\n附一些代码片段进行示例说明\n\n### 获取table\n\n``` java\n public static Table getTable(String tableName) {\n        table = null;\n        Connection connection = null;\n\n        try {\n            connection = ConnectionFactory.createConnection(getConf());\n            table = connection.getTable(TableName.valueOf(tableName.getBytes(StandardCharsets.UTF_8)));\n        } catch (Exception e) {\n            log.error(\"htable获取失败\");\n        }\n        return table;\n    }\n```\n\n### 展示所有表\n\n``` java\npublic void listAllTables() {\n        Connection connection = null;\n        try {\n            connection = ConnectionFactory.createConnection(conf);\n            Admin hAdmin = connection.getAdmin();\n            log.info(\"以下是所有的表...\");\n            Arrays.asList(hAdmin.listTableNames()).forEach(t -> {\n                System.out.println(t.toString());\n            });\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n```","source":"_posts/王阁/技术/大数据/hbase/hbase_api升级.md","raw":"title: hbase api升级 \ndate:  2021年 6月18日\ntags: [hbase,api升级]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n\n ## hbase 0.9X api升级为1.x\n hbase 现在版本是2.0.3\n\n这次api升级感知到的api的调整主要有\n引入了\norg.apache.hadoop.hbase.client.Connection 类\n即现在与hbase的交互都先拿到Connection这个实例，然后再进行后续操作，如获取Admin,Table。等\n附一些代码片段进行示例说明\n\n### 获取table\n\n``` java\n public static Table getTable(String tableName) {\n        table = null;\n        Connection connection = null;\n\n        try {\n            connection = ConnectionFactory.createConnection(getConf());\n            table = connection.getTable(TableName.valueOf(tableName.getBytes(StandardCharsets.UTF_8)));\n        } catch (Exception e) {\n            log.error(\"htable获取失败\");\n        }\n        return table;\n    }\n```\n\n### 展示所有表\n\n``` java\npublic void listAllTables() {\n        Connection connection = null;\n        try {\n            connection = ConnectionFactory.createConnection(conf);\n            Admin hAdmin = connection.getAdmin();\n            log.info(\"以下是所有的表...\");\n            Arrays.asList(hAdmin.listTableNames()).forEach(t -> {\n                System.out.println(t.toString());\n            });\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n```","slug":"王阁/技术/大数据/hbase/hbase_api升级","published":1,"updated":"2021-06-19T07:59:32.272Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgq006du6pw440524g7","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"84f1c8c046e2ca1c30b5c2acc57a34f3bc3913f05cf5c99b2bf8c099e5a3d840\">f29c680708acd02cbb1b6cceaba061923032f7e4dba91a54baae523d10fb7f3661990822ffa3c945fde7651169b8f2508d42844fbba147d7314bb312742199a1dade35be2986b750bfd6a35d822073dab2b382d4eaf63e7833f19723646eaf3f8ac68ee10904616fffd30afca002c846d9c95334d4ef7d40a168848f2795071f106689bbe718e17d5a841473dec6b148d389223b42e425168f4724042c485d8872d0581e276d44055905f6242c4794d7d119fea011ac85cfb0041f7a3cb56afec583eccc4bc9b0e07cb06b34ae534211ff494d38290a627826e1bff6d1621ff57b4d03962e66366c92e4aa1aad1de697dc7614029fd49342307b2ee410eb5267a33acbf321917b91d5cc1d849c1f44327a74d9a2cb238507d524b09883c66c18ed7fbe85b2ff3cc9cedca94a8efb6fa16a9a0b3fe3e6d4cde14858e824180dc06a4960762b19dc14eaaba48a7dab1a9b4780d640643b574d9b457afed28b663f40063fe2ea5667ec0ecdebf2e213e0aecd100a93111d8be13149811422563d348de56514d8eaaf3e6ad8f7403c73a667ccb7dee03453e4d01a66d547925ede4629b4e8cb7e4ac15753c7b41d121cb826251e2d64b64e11cff24850b6ed6f625a605a2c6d4dc07c9676ae6518fac36dd6df40b9168a6b89a965e460d3701c4954884a73f1ce2c570bda1d4fef36bad146ef83fc3b521f07e1588530915e331a21a7499e02420c67492ba40974aa8087cb448c874fcceaa308f856513515781556a9f0f9199ef1595cc4e19f0b6ba9236fcb622d83513861074e7610a62f84265621e650a576eab7669b5e77cb4dcfc9a950bec095227eaf6777892e4b567a437a362e94b626837d51aaf427b82f36ecfe9b3e6191f46d7b3b9a420dce16c9c9a1c17c1a5009f97252fc0f95b261ba40477fc757a998af9b8c88f88c0f800b9a2d9c8586644feb1fca17862ec81f41447b40c7fc2568be7debba7f49d7ffc722ffb7df3afaac803eefc3fb4ee9b462a6419383cc3a5ddcd9859a65246d00603ddecab63fd99a87821c62149b024b45993cf8e78c99cb106bfd6e6d8bc170021fee7db725dd8e01bbb970840366dd10dafd7c882647bc932a132fef05386ca927699bb88894bf03b5e7a6195098f4f46aa3a97ff6542ba19319dbc846747ba4f061d9e8657ac57683c649a7dcbbec1ebad9a15416b1944ef90af963a465fd1adf6b0168401fd559f7381f33688cfa6411547dbf408f99b1f3c2fa2267bac4380ac43e05ec72b9fdcb28df07625de096ab1f5879761afb39e8fd21e19735d5394bc4e2d766a1a475e9499c25499d33e066186cd35659a9a820a418cf0db4602ad61877fdb7821a6c0359f79746de5b78993639196dcfd00163577d1b18a70ef1a21794c3880d1db210171a90da7afdaf7526900af040cc3ac0410dbf9cc2063f2d3843e64aecdb1bbb496f49934ab87e5aee09aea217b7f2a29e917c8bffe763285fdce46768ff47eef269ddb5cad07211d33fc8ce974238b0fa8f39711b61e6d759dcbda521bee6a77fb291f48394c72f7646e2c6d0b684e2006c7ed7f5db1e2a4cc62b6f32b758d08fe22c9752bab97e058580f78996801d33c2d768c2280ee76572ddc92d3accdc914eb2ea6ee27304a9525c3cb7a3ab8d926c162e4925a0d3c3459c45ace7473501ef7d531c3bad40951f96faa1a017be0aca7d6eedbbca803064513ed0e1c3f233ee64fd49bc50545c2e6fd7c3906c01d39d71fc882c0d30dcf15d4114935b595c7db27feb6e57b4a7ed2febc501f5cbdc39fcb7987518de2971134e74bce18cba31066d1492a2642b6972006d5e0e82f654bae812da0a690512d838972c9ffd05f8aeeb4b60ffbab388b7e0245a0798f21b601f3edea7dad7e1c5512e2101429b1448fb0cc500bb0290e84488253f1022c7363c21be975866bc58866370dad0b3917f8d6fd937d5912f34a66ccc122b25ea02ee015f6c4b648b8de8f21ffe1a89e6d8c8c46faaca4f93b17b16e0d4eeb5e76ebda04893d9cc9e4487193a2c13bae5665c9419f04ed78df6c1232dfd511da95171b43b353e081086bda21ac618ca733e8f456f206068fb1e6328bd4ac7a1cb4d25a2be81a43f3c9fffac0bb338adcba7172e114e8f8e047ff4d80aa56955d83297a3041ca479d7880a97538f4a17517b4a5cea888084586fd7cd10f0c01f2fe819543d326b86fddb62febe2455dc1f60d25b8ce2e5edc1f9854cbcf363029720c2fd0f232e860b09d9e880269777c0f2938b7ead7d83cdcc65a5862a3c8e51a3ac09f4e9fadde5bf99aa9fa5c9de5f23c398a0576d3f306b79d18a2795d0891fb2f6987c25787a30bb6b20600a61b8003911e2a86453e996bf625cd8855a6fe119dabd7f6e126b12e0a37ce58336926bbdbfdce623af1f4117f581d1dd42ba9c978b4a3785e1e6f86eec5aba4b75517ef1247401a332df708232a94e10140d7e2030a106734fdcf123a15e2bfdeb2b2c077323ec2cbdac60c620db3b0ce77aefdab18ad6df83ac90695876433e988abc10798aebeb2a4fefefdeb30b2bccd4b8d0484f5f573975d42905bd5d887e0d64a766c1f85d9a3b00f93047b6b74d6253c23333cfcac025bfb18274898f307c8f7b1744491717b5ee60c49377bcd2bb94b221c135489bf657782a574e3ad01cd15bb12be0bc63a22f6eed3c725af3dd7299b1476406d734cc6a1dedca2ed41cb2f229d9306bbfc84c55ecd20281173e05f5e0b054e8df34ea82507729b36c6ea80cbdf4964cfccdc5bb1cdef7ba996868bf84bb37cf985bfec8a74c12075814f7a34daa249781ee4061fee10919cfe6d7bf8d3c412553d2cfd27d4023f386ecfaafa557a394f524e66b057a827fca03972b6cc86085154003bf57ee0fa120cd3c83fbabddffd9c260a3280db0c664d38d9d91ae83a2100f454e7dd7fdbd9124a2fd7a15782e1221d3cfa83872a4138e6e15cd202075f6f2944c51bf98b40828e837543969b24cc79e44a67140a8318d024a2f36de942183de14ecafb4b9b1fb425c9d43fc9f2e00f423c1d3ba54bd467722bd513f98fdeb69d26affd09498a47164d44df0cee918fe5f6debe528cd855001d64c2e27338b41dc231da950fa99f21c9a9c6b71436223737ad720197c69e0dc8121f6848e30f62b68e7b5621b951158f6294e2ceeb2ecb6a31ff654e8c7bee60ea4ebab8a11b3d8ee29e184d47931a2d9e661923c22c1790310eba7e4297be3b6b79dba22c0abf4bba8a6e68204f0357bad8c74c021523396ed10bd2169a62be9e94701cf2da5071c8af46605a4697cc09fc9fbcdc3d69c590622304c324f295107c67555737afd3504a3734aaa4c744ebd8dfb12aa184ac6e0312d1615ec289a9b63ab535dc5778bf93ef8f20a83bb69bb0f608462e6d8279973bb28cfced39d7278cda61f7169533ae7d3dd7a365f186692e93a584c2162a544bf7d01c9d2071202741e6ca39528c7ede1a84ae0320f0241ecbd407a00f02afe291ee91bf7aaf47a909558b37edc0a6b7328d8781b930475ac11c1e15e6a9b7d0c2bcc109e8c513b9033ae31e2f892a9ad1185363c3cb78be55af2913d7f4952b7fec11f306db0f1c1c65aac345a87fd7d680ad1e34dc3c063f35a87423dd17ab2cb976191a2efedcadd88361fe41092075fcb77ae626587a4f49965d5d3050cb163e4929b109af727964bef67d2cd6f9e4db880b2e2a200d87b542a387effa51ff2f8b526893ec244d182d66549ef0855f68fdea813f2d07b42ece00844fdba0f1c9b34e5f0a684c914b70f0127b431356dd5b1252a7228919e0146793ae6dc5409d523970e617ef7286560f561272dbd5005052ffdb2ee94dc7220af5ba176162e9844f8c08513b6f0d456707f55cacccae46e329b1b6ce5087dd7afce5922022a9a3c25e3aa5f076a99cb90c636961e9ead1436b4f3b8e00c455ba0424c85424d84beb09bd9aade5f8efb576f0f6d1b11894533cf488a945c0b41d89a2aabdcb4db8e07dc7df39c3d28094e5d203cd7628c98bea66066000bc3257da9fb39d101566fad06b92fa4233294f060f3c9e7ffa717ae00c0fa2f6acb8d936e276ff8c74c73390e835d84215ee42c9fba2a88628855ff8ee80c534f39cae4e2ef9cbd94bbf57b7a3a62841e983e005aec5a242bfe2172cdebc148a05d6906cd19a79f13dcc6f73289dc9fcd8a1da8ddc56d7f5f75955ee1cd18940848a57e25753a215cd532957971a75cd0412ff9887cfc8f753bc330f68a2fab60b4c59feba2b014f9d34648c39b0fb72176117dd746f417fa6ddee247468ba2284d9ada86a067175163072da832099607909853867e1a6a2d5e1aebfda72bc9d503cfd787e3de03365c9b8dd013e6220d996ce78fc721b03b0caadb866e503caf5dc263b987b6b913e752237863bfb42ae8f8fb4adf1e79ee193b3e2839954b4df2f6d966d09807d8d3a2dbea0fbc4739481914c4cc5b72e48260043c10713930f735afd822816314ff43e7bfcdb2a1c1848090412049e922c207e2015be50b64f62aa4a73b958ca0e7b0987d568fe4dd96e76047c77e69f24fa8118e74c37d9e9e7915433e76bf94b5f1bee8dda733286a03d31c98d6c91e7dadbed1b0334fe5b6203582dfc0f63e8184a9fc42a8e66004d13480b44acaff084ba1c47d683df7a6ffca1894c99b863477f47745db9089010ca65704150c3a7534e1ffae466f4361335b8f2c05f4698957488cfa1fab5ef57015b62ebf20305fb6e99b5939414f4139be37e111a95234f5c51acd4dcce494039141da1b54563d4d77acd3be1cf996bcc55a3386fc1bf5dd6998ede727601dfb4d87d239e06f5a8b1bf346fe93658056c0113af18f58886af39611f5daed28b3a4ddf99f572d6dfa160faebe6cdf7e0f70edefaf5f2b209ad280d24a6933f5dca79ef580cea6d4f872bbdd24cbc0f9ac6f8b0026658046d83f63db551ebdb99eeb6b607fd5fad207fd8420be3a99dcbd1a7f1527112ccaa7db194334fb82908356f0ab4aab2ac74f371791555ff9fbed539ec7e484172ad862258feba413097939b7869bdab328087f7758b8f25e86338ba43efc614bbfab1c52fcc5bf37ee7401db7ac071cc6a607cfa24c550e0834dc4779f809c7d40105befc11b96b0b0d185b1600bbb8b1ef3830718f4c85a0c11d9b0b4063b24ae1f0f11196817f76c53424aa90e46fcd95774aa69dba4d567cbfd2e29b5aefbef33ef6f5e22f6b8e73d303b9cdd1fb1fe508e0d6e4c7ab06bc496cb66618a5dcba2bf870a3a4022a1948f2a42c780923349f94fe31338d86689b42041c91a45686fad820150c4626ed23322d9ce5d3dfb641c01aa78181c7938509c3019fa03f0ee4f3c6fa3fc439abf5129650e14edfb6dd45f6a477f80f2957b4e705647fa896f1cff293c12d265cd2f136a02cfeb58777ee75ec0edf843c5d9822e6914bd4e2103a2c9743cfac509a47373f1e4cc33a8c146b53f80ab3c94ea5ba42e347b9638210230d3770442224b1de4fb86be3c5e02e15e1699c03d12fb0bb210b003fcf023abc451d6daf30aaf48aeb471523ac45b3f252cbd75896fa7bcb6a42bc00e327f44a0e3a8ad3872d8a740d8457806738a2104ceec63092d26868cc153067eaaf0546d14aa067e1ebe55cf8be96c22d98274fbc6261a</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h2 id=\"hbase-0-9X-api升级为1-x\"><a href=\"#hbase-0-9X-api升级为1-x\" class=\"headerlink\" title=\"hbase 0.9X api升级为1.x\"></a>hbase 0.9X api升级为1.x</h2><p> hbase 现在版本是2.0.3</p>\n<p>这次api升级感知到的api的调整主要有<br>引入了<br>org.apache.hadoop.hbase.client.Connection 类<br>即现在与hbase的交互都先拿到Connection这个实例，然后再进行后续操作，如获取Admin,Table。等<br>附一些代码片段进行示例说明</p>\n<h3 id=\"获取table\"><a href=\"#获取table\" class=\"headerlink\" title=\"获取table\"></a>获取table</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Table <span class=\"title\">getTable</span><span class=\"params\">(String tableName)</span> </span>&#123;</span><br><span class=\"line\">       table = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       Connection connection = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">           connection = ConnectionFactory.createConnection(getConf());</span><br><span class=\"line\">           table = connection.getTable(TableName.valueOf(tableName.getBytes(StandardCharsets.UTF_8)));</span><br><span class=\"line\">       &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">           log.error(<span class=\"string\">\"htable获取失败\"</span>);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> table;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"展示所有表\"><a href=\"#展示所有表\" class=\"headerlink\" title=\"展示所有表\"></a>展示所有表</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">listAllTables</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Connection connection = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            connection = ConnectionFactory.createConnection(conf);</span><br><span class=\"line\">            Admin hAdmin = connection.getAdmin();</span><br><span class=\"line\">            log.info(<span class=\"string\">\"以下是所有的表...\"</span>);</span><br><span class=\"line\">            Arrays.asList(hAdmin.listTableNames()).forEach(t -&gt; &#123;</span><br><span class=\"line\">                System.out.println(t.toString());</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>","encrypt":true},{"title":"kafka原理","date":"2021-04-26T13:52:35.000Z","_content":" <!--more-->\n\n[TOC]\n\n## 正常kafka服务运行的组件组成\n\n1. kafka\n2. zookeeper\n\n kafka运行主要的逻辑角色组成\n\n * producer\n * consumer\n * broker\n\n kafka 组成拓扑结构\n\n* broker\n    * topic\n      * partition\n    * AR\n      * ISR\n      * OSR\n* consumer\n  * consumer_group\n    * offset\n* producer\n\n## Producer\n### Q: server.properies(服务端参数配置)\n\n相关参数\n\n| 参数名               | 默认设置 | 建议设置 | 说明 |      |\n| -------------------- | -------- | -------- | ---- | ---- |\n| zookeeper.connect    |          |          |      |      |\n| listeners            |          |          |      |      |\n| advertised.listeners |          |          |      |      |\n| broker.id |          |          |      |      |\n|log.dir,log.dirs |          |          |      |      |\n|message.max.bytes |          |          |      |      |\n\n\n#### Q:listeners 与 advertised.listeners 是否有区别\n\n\n\n#### message.max.bytes修改对conusmer端的级联影响\n\n\n### Q: HW & LEO是什么,HW如何指定,有什么作用?\n\nHW: hight watermark 高水位\nLEO: log end offset 日志末尾偏移量\n\n<font color=red>`HW决定了能该topic能被消费的最大offset`</font>\n\n### Q: HW如何决定topic最大可被消息offset?\n\n需要知道:\n<font size=1>**HW 是由ISR中最小被同步partition的offset决定**</font>\n\nHW是最小被同offset+1;\n\nLEO也是落地日志offset+1;\n\n这也很好理解,因为ISR是作为数据备份队列.那么限制用户只能消费ISR队列中每个节点都已经同步的数据.这有利于保证如果消费不成功,并遇到broker发生异常,在重新选举broker后\n新选举的broker能尽可能有完整的数据备份(考虑到OSR也可能被设定参与选举).这样尽可能保证消息服务的稳定性.\n\n<font color=yellow size=2> 但这里也抛出一个问题,就是若真发生了异常,HW后的数据能否保证不丢失!</font>\n\n\nQ: kafka为什么没有完全采用同步复制或异步复制,而采用ISR模式\n\n\n\n### Q: 生产者必要参数\n\n| 参数名             | 设置内容 | 说明                                                         |\n| ------------------ | -------- | ------------------------------------------------------------ |\n| bootstrap.servers  |          | host:port,指定broker地址.可以不用完全按照完整的broker列表来设置 |\n| key. serializer    |          |                                                              |\n| value . serializer |          |                                                              |\n\n\n\n\n\n### Q:producer发送消费涉及到的异常\n\n\n\n### Q: producer发送消息的三种方法\n\n* fire-and- forget\n* sync\n* async\n\n### Q:producer 一条信息到broker主要经历的流程\n\n1. Interceptor\n2. Serializer\n3. Partitioner\n\n分区器不一定是必须的,但后两者则是必需的.\n\n\n\n### Q: 拦截器的主要用法与实际用途\n\n\n\n\n\n### Q: kafka发送吞吐量受影响参数与可能原因\n\n\n\n\n\n### T:kafka producer原理分析\n\n\n\n## Consumer\n\n### Q:消费者与消费组,topic中分区与消费组与消费者的关系\n\n\n\n\n\n### Q:消费者消费的内部逻辑\n\n\n\n### Q: 如何获得每个分区最大offset\n\n### Q:consumer订阅的几种方式,与区别\n\n主要分为subscribe 与assign\n\n前者能够自动再均衡,后者不行.\n\n### Q:三种不同的订阅状态分别是什么\n\n\n\n### Q:常见的反序列化协议\n\n\n\n\n\n### Q:consumer poll(Duration timeout ),这个timeout起到什么作用.\n\n#### 另timeout设置成0或Long.MAX_VALUE有什么区别\n\n### Q:consumer 消费后提交的主要方式有几种,各有什么区别\n\n\n\n### consumer poll()背后涉及到的逻辑简示\n\n1. 消费位移\n2. 消费者协调\n3. 组协调\n4. 消费者选举\n5. 分区分配的分发\n6. 再均衡逻辑\n7. heartbroker\n\n---\n\n\n\n\n\n\n\n### Q:消费者位移信息存放位置\n\n之前老版本存放在zookeeper中,但因为这样kafka的消费性能会受到zookeeper,controller节点负载能力的影响.而zookeeper ,常常不止被一个组件使用.所以,在新版本中,kafka客户端将consumer offset的维护信息放在内部主题\n\n__consumer_offsets中.这个主题中存放着各consumer group 与consumer对订阅topic的消费位移信息\n\n\n\n\n\n### Q:消费者多线程实现方式(大致三种)\n\n\n\n\n\n### T: consumer异常提交与处理\n\n\n\n\n\n## 日志存储\n\n` kafka在服务器硬盘上的具体存储形式` \n\n### 日志格式的演变\n\n1. v0\n2. v1\n3. v2\n\n### Q: 各版本间主要的区别\n\n\n\n### Q:swap对kafka的影响\n\n\n\n\n\n## 服务端一些核心设计\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/王阁/技术/大数据/kafka/kafka原理.md","raw":"title:  kafka原理\ndate:  \ntags: []\n\n---\n <!--more-->\n\n[TOC]\n\n## 正常kafka服务运行的组件组成\n\n1. kafka\n2. zookeeper\n\n kafka运行主要的逻辑角色组成\n\n * producer\n * consumer\n * broker\n\n kafka 组成拓扑结构\n\n* broker\n    * topic\n      * partition\n    * AR\n      * ISR\n      * OSR\n* consumer\n  * consumer_group\n    * offset\n* producer\n\n## Producer\n### Q: server.properies(服务端参数配置)\n\n相关参数\n\n| 参数名               | 默认设置 | 建议设置 | 说明 |      |\n| -------------------- | -------- | -------- | ---- | ---- |\n| zookeeper.connect    |          |          |      |      |\n| listeners            |          |          |      |      |\n| advertised.listeners |          |          |      |      |\n| broker.id |          |          |      |      |\n|log.dir,log.dirs |          |          |      |      |\n|message.max.bytes |          |          |      |      |\n\n\n#### Q:listeners 与 advertised.listeners 是否有区别\n\n\n\n#### message.max.bytes修改对conusmer端的级联影响\n\n\n### Q: HW & LEO是什么,HW如何指定,有什么作用?\n\nHW: hight watermark 高水位\nLEO: log end offset 日志末尾偏移量\n\n<font color=red>`HW决定了能该topic能被消费的最大offset`</font>\n\n### Q: HW如何决定topic最大可被消息offset?\n\n需要知道:\n<font size=1>**HW 是由ISR中最小被同步partition的offset决定**</font>\n\nHW是最小被同offset+1;\n\nLEO也是落地日志offset+1;\n\n这也很好理解,因为ISR是作为数据备份队列.那么限制用户只能消费ISR队列中每个节点都已经同步的数据.这有利于保证如果消费不成功,并遇到broker发生异常,在重新选举broker后\n新选举的broker能尽可能有完整的数据备份(考虑到OSR也可能被设定参与选举).这样尽可能保证消息服务的稳定性.\n\n<font color=yellow size=2> 但这里也抛出一个问题,就是若真发生了异常,HW后的数据能否保证不丢失!</font>\n\n\nQ: kafka为什么没有完全采用同步复制或异步复制,而采用ISR模式\n\n\n\n### Q: 生产者必要参数\n\n| 参数名             | 设置内容 | 说明                                                         |\n| ------------------ | -------- | ------------------------------------------------------------ |\n| bootstrap.servers  |          | host:port,指定broker地址.可以不用完全按照完整的broker列表来设置 |\n| key. serializer    |          |                                                              |\n| value . serializer |          |                                                              |\n\n\n\n\n\n### Q:producer发送消费涉及到的异常\n\n\n\n### Q: producer发送消息的三种方法\n\n* fire-and- forget\n* sync\n* async\n\n### Q:producer 一条信息到broker主要经历的流程\n\n1. Interceptor\n2. Serializer\n3. Partitioner\n\n分区器不一定是必须的,但后两者则是必需的.\n\n\n\n### Q: 拦截器的主要用法与实际用途\n\n\n\n\n\n### Q: kafka发送吞吐量受影响参数与可能原因\n\n\n\n\n\n### T:kafka producer原理分析\n\n\n\n## Consumer\n\n### Q:消费者与消费组,topic中分区与消费组与消费者的关系\n\n\n\n\n\n### Q:消费者消费的内部逻辑\n\n\n\n### Q: 如何获得每个分区最大offset\n\n### Q:consumer订阅的几种方式,与区别\n\n主要分为subscribe 与assign\n\n前者能够自动再均衡,后者不行.\n\n### Q:三种不同的订阅状态分别是什么\n\n\n\n### Q:常见的反序列化协议\n\n\n\n\n\n### Q:consumer poll(Duration timeout ),这个timeout起到什么作用.\n\n#### 另timeout设置成0或Long.MAX_VALUE有什么区别\n\n### Q:consumer 消费后提交的主要方式有几种,各有什么区别\n\n\n\n### consumer poll()背后涉及到的逻辑简示\n\n1. 消费位移\n2. 消费者协调\n3. 组协调\n4. 消费者选举\n5. 分区分配的分发\n6. 再均衡逻辑\n7. heartbroker\n\n---\n\n\n\n\n\n\n\n### Q:消费者位移信息存放位置\n\n之前老版本存放在zookeeper中,但因为这样kafka的消费性能会受到zookeeper,controller节点负载能力的影响.而zookeeper ,常常不止被一个组件使用.所以,在新版本中,kafka客户端将consumer offset的维护信息放在内部主题\n\n__consumer_offsets中.这个主题中存放着各consumer group 与consumer对订阅topic的消费位移信息\n\n\n\n\n\n### Q:消费者多线程实现方式(大致三种)\n\n\n\n\n\n### T: consumer异常提交与处理\n\n\n\n\n\n## 日志存储\n\n` kafka在服务器硬盘上的具体存储形式` \n\n### 日志格式的演变\n\n1. v0\n2. v1\n3. v2\n\n### Q: 各版本间主要的区别\n\n\n\n### Q:swap对kafka的影响\n\n\n\n\n\n## 服务端一些核心设计\n\n\n\n\n\n\n\n\n\n\n\n","slug":"王阁/技术/大数据/kafka/kafka原理","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgs006fu6pw2ourb19a","content":" <a id=\"more\"></a>\n\n<p>[TOC]</p>\n<h2 id=\"正常kafka服务运行的组件组成\"><a href=\"#正常kafka服务运行的组件组成\" class=\"headerlink\" title=\"正常kafka服务运行的组件组成\"></a>正常kafka服务运行的组件组成</h2><ol>\n<li><p>kafka</p>\n</li>\n<li><p>zookeeper</p>\n<p>kafka运行主要的逻辑角色组成</p>\n<ul>\n<li>producer</li>\n<li>consumer</li>\n<li>broker</li>\n</ul>\n<p>kafka 组成拓扑结构</p>\n</li>\n</ol>\n<ul>\n<li>broker<ul>\n<li>topic<ul>\n<li>partition</li>\n</ul>\n</li>\n<li>AR<ul>\n<li>ISR</li>\n<li>OSR</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>consumer<ul>\n<li>consumer_group<ul>\n<li>offset</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>producer</li>\n</ul>\n<h2 id=\"Producer\"><a href=\"#Producer\" class=\"headerlink\" title=\"Producer\"></a>Producer</h2><h3 id=\"Q-server-properies-服务端参数配置\"><a href=\"#Q-server-properies-服务端参数配置\" class=\"headerlink\" title=\"Q: server.properies(服务端参数配置)\"></a>Q: server.properies(服务端参数配置)</h3><p>相关参数</p>\n<table>\n<thead>\n<tr>\n<th>参数名</th>\n<th>默认设置</th>\n<th>建议设置</th>\n<th>说明</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>zookeeper.connect</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>listeners</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>advertised.listeners</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>broker.id</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>log.dir,log.dirs</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>message.max.bytes</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<h4 id=\"Q-listeners-与-advertised-listeners-是否有区别\"><a href=\"#Q-listeners-与-advertised-listeners-是否有区别\" class=\"headerlink\" title=\"Q:listeners 与 advertised.listeners 是否有区别\"></a>Q:listeners 与 advertised.listeners 是否有区别</h4><h4 id=\"message-max-bytes修改对conusmer端的级联影响\"><a href=\"#message-max-bytes修改对conusmer端的级联影响\" class=\"headerlink\" title=\"message.max.bytes修改对conusmer端的级联影响\"></a>message.max.bytes修改对conusmer端的级联影响</h4><h3 id=\"Q-HW-amp-LEO是什么-HW如何指定-有什么作用\"><a href=\"#Q-HW-amp-LEO是什么-HW如何指定-有什么作用\" class=\"headerlink\" title=\"Q: HW &amp; LEO是什么,HW如何指定,有什么作用?\"></a>Q: HW &amp; LEO是什么,HW如何指定,有什么作用?</h3><p>HW: hight watermark 高水位<br>LEO: log end offset 日志末尾偏移量</p>\n<p><font color=red><code>HW决定了能该topic能被消费的最大offset</code></font></p>\n<h3 id=\"Q-HW如何决定topic最大可被消息offset\"><a href=\"#Q-HW如何决定topic最大可被消息offset\" class=\"headerlink\" title=\"Q: HW如何决定topic最大可被消息offset?\"></a>Q: HW如何决定topic最大可被消息offset?</h3><p>需要知道:<br><font size=1><strong>HW 是由ISR中最小被同步partition的offset决定</strong></font></p>\n<p>HW是最小被同offset+1;</p>\n<p>LEO也是落地日志offset+1;</p>\n<p>这也很好理解,因为ISR是作为数据备份队列.那么限制用户只能消费ISR队列中每个节点都已经同步的数据.这有利于保证如果消费不成功,并遇到broker发生异常,在重新选举broker后<br>新选举的broker能尽可能有完整的数据备份(考虑到OSR也可能被设定参与选举).这样尽可能保证消息服务的稳定性.</p>\n<p><font color=yellow size=2> 但这里也抛出一个问题,就是若真发生了异常,HW后的数据能否保证不丢失!</font></p>\n<p>Q: kafka为什么没有完全采用同步复制或异步复制,而采用ISR模式</p>\n<h3 id=\"Q-生产者必要参数\"><a href=\"#Q-生产者必要参数\" class=\"headerlink\" title=\"Q: 生产者必要参数\"></a>Q: 生产者必要参数</h3><table>\n<thead>\n<tr>\n<th>参数名</th>\n<th>设置内容</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>bootstrap.servers</td>\n<td></td>\n<td>host:port,指定broker地址.可以不用完全按照完整的broker列表来设置</td>\n</tr>\n<tr>\n<td>key. serializer</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>value . serializer</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"Q-producer发送消费涉及到的异常\"><a href=\"#Q-producer发送消费涉及到的异常\" class=\"headerlink\" title=\"Q:producer发送消费涉及到的异常\"></a>Q:producer发送消费涉及到的异常</h3><h3 id=\"Q-producer发送消息的三种方法\"><a href=\"#Q-producer发送消息的三种方法\" class=\"headerlink\" title=\"Q: producer发送消息的三种方法\"></a>Q: producer发送消息的三种方法</h3><ul>\n<li>fire-and- forget</li>\n<li>sync</li>\n<li>async</li>\n</ul>\n<h3 id=\"Q-producer-一条信息到broker主要经历的流程\"><a href=\"#Q-producer-一条信息到broker主要经历的流程\" class=\"headerlink\" title=\"Q:producer 一条信息到broker主要经历的流程\"></a>Q:producer 一条信息到broker主要经历的流程</h3><ol>\n<li>Interceptor</li>\n<li>Serializer</li>\n<li>Partitioner</li>\n</ol>\n<p>分区器不一定是必须的,但后两者则是必需的.</p>\n<h3 id=\"Q-拦截器的主要用法与实际用途\"><a href=\"#Q-拦截器的主要用法与实际用途\" class=\"headerlink\" title=\"Q: 拦截器的主要用法与实际用途\"></a>Q: 拦截器的主要用法与实际用途</h3><h3 id=\"Q-kafka发送吞吐量受影响参数与可能原因\"><a href=\"#Q-kafka发送吞吐量受影响参数与可能原因\" class=\"headerlink\" title=\"Q: kafka发送吞吐量受影响参数与可能原因\"></a>Q: kafka发送吞吐量受影响参数与可能原因</h3><h3 id=\"T-kafka-producer原理分析\"><a href=\"#T-kafka-producer原理分析\" class=\"headerlink\" title=\"T:kafka producer原理分析\"></a>T:kafka producer原理分析</h3><h2 id=\"Consumer\"><a href=\"#Consumer\" class=\"headerlink\" title=\"Consumer\"></a>Consumer</h2><h3 id=\"Q-消费者与消费组-topic中分区与消费组与消费者的关系\"><a href=\"#Q-消费者与消费组-topic中分区与消费组与消费者的关系\" class=\"headerlink\" title=\"Q:消费者与消费组,topic中分区与消费组与消费者的关系\"></a>Q:消费者与消费组,topic中分区与消费组与消费者的关系</h3><h3 id=\"Q-消费者消费的内部逻辑\"><a href=\"#Q-消费者消费的内部逻辑\" class=\"headerlink\" title=\"Q:消费者消费的内部逻辑\"></a>Q:消费者消费的内部逻辑</h3><h3 id=\"Q-如何获得每个分区最大offset\"><a href=\"#Q-如何获得每个分区最大offset\" class=\"headerlink\" title=\"Q: 如何获得每个分区最大offset\"></a>Q: 如何获得每个分区最大offset</h3><h3 id=\"Q-consumer订阅的几种方式-与区别\"><a href=\"#Q-consumer订阅的几种方式-与区别\" class=\"headerlink\" title=\"Q:consumer订阅的几种方式,与区别\"></a>Q:consumer订阅的几种方式,与区别</h3><p>主要分为subscribe 与assign</p>\n<p>前者能够自动再均衡,后者不行.</p>\n<h3 id=\"Q-三种不同的订阅状态分别是什么\"><a href=\"#Q-三种不同的订阅状态分别是什么\" class=\"headerlink\" title=\"Q:三种不同的订阅状态分别是什么\"></a>Q:三种不同的订阅状态分别是什么</h3><h3 id=\"Q-常见的反序列化协议\"><a href=\"#Q-常见的反序列化协议\" class=\"headerlink\" title=\"Q:常见的反序列化协议\"></a>Q:常见的反序列化协议</h3><h3 id=\"Q-consumer-poll-Duration-timeout-这个timeout起到什么作用\"><a href=\"#Q-consumer-poll-Duration-timeout-这个timeout起到什么作用\" class=\"headerlink\" title=\"Q:consumer poll(Duration timeout ),这个timeout起到什么作用.\"></a>Q:consumer poll(Duration timeout ),这个timeout起到什么作用.</h3><h4 id=\"另timeout设置成0或Long-MAX-VALUE有什么区别\"><a href=\"#另timeout设置成0或Long-MAX-VALUE有什么区别\" class=\"headerlink\" title=\"另timeout设置成0或Long.MAX_VALUE有什么区别\"></a>另timeout设置成0或Long.MAX_VALUE有什么区别</h4><h3 id=\"Q-consumer-消费后提交的主要方式有几种-各有什么区别\"><a href=\"#Q-consumer-消费后提交的主要方式有几种-各有什么区别\" class=\"headerlink\" title=\"Q:consumer 消费后提交的主要方式有几种,各有什么区别\"></a>Q:consumer 消费后提交的主要方式有几种,各有什么区别</h3><h3 id=\"consumer-poll-背后涉及到的逻辑简示\"><a href=\"#consumer-poll-背后涉及到的逻辑简示\" class=\"headerlink\" title=\"consumer poll()背后涉及到的逻辑简示\"></a>consumer poll()背后涉及到的逻辑简示</h3><ol>\n<li>消费位移</li>\n<li>消费者协调</li>\n<li>组协调</li>\n<li>消费者选举</li>\n<li>分区分配的分发</li>\n<li>再均衡逻辑</li>\n<li>heartbroker</li>\n</ol>\n<hr>\n<h3 id=\"Q-消费者位移信息存放位置\"><a href=\"#Q-消费者位移信息存放位置\" class=\"headerlink\" title=\"Q:消费者位移信息存放位置\"></a>Q:消费者位移信息存放位置</h3><p>之前老版本存放在zookeeper中,但因为这样kafka的消费性能会受到zookeeper,controller节点负载能力的影响.而zookeeper ,常常不止被一个组件使用.所以,在新版本中,kafka客户端将consumer offset的维护信息放在内部主题</p>\n<p>__consumer_offsets中.这个主题中存放着各consumer group 与consumer对订阅topic的消费位移信息</p>\n<h3 id=\"Q-消费者多线程实现方式-大致三种\"><a href=\"#Q-消费者多线程实现方式-大致三种\" class=\"headerlink\" title=\"Q:消费者多线程实现方式(大致三种)\"></a>Q:消费者多线程实现方式(大致三种)</h3><h3 id=\"T-consumer异常提交与处理\"><a href=\"#T-consumer异常提交与处理\" class=\"headerlink\" title=\"T: consumer异常提交与处理\"></a>T: consumer异常提交与处理</h3><h2 id=\"日志存储\"><a href=\"#日志存储\" class=\"headerlink\" title=\"日志存储\"></a>日志存储</h2><p><code>kafka在服务器硬盘上的具体存储形式</code> </p>\n<h3 id=\"日志格式的演变\"><a href=\"#日志格式的演变\" class=\"headerlink\" title=\"日志格式的演变\"></a>日志格式的演变</h3><ol>\n<li>v0</li>\n<li>v1</li>\n<li>v2</li>\n</ol>\n<h3 id=\"Q-各版本间主要的区别\"><a href=\"#Q-各版本间主要的区别\" class=\"headerlink\" title=\"Q: 各版本间主要的区别\"></a>Q: 各版本间主要的区别</h3><h3 id=\"Q-swap对kafka的影响\"><a href=\"#Q-swap对kafka的影响\" class=\"headerlink\" title=\"Q:swap对kafka的影响\"></a>Q:swap对kafka的影响</h3><h2 id=\"服务端一些核心设计\"><a href=\"#服务端一些核心设计\" class=\"headerlink\" title=\"服务端一些核心设计\"></a>服务端一些核心设计</h2>","site":{"data":{}},"excerpt":"","more":"<p>[TOC]</p>\n<h2 id=\"正常kafka服务运行的组件组成\"><a href=\"#正常kafka服务运行的组件组成\" class=\"headerlink\" title=\"正常kafka服务运行的组件组成\"></a>正常kafka服务运行的组件组成</h2><ol>\n<li><p>kafka</p>\n</li>\n<li><p>zookeeper</p>\n<p>kafka运行主要的逻辑角色组成</p>\n<ul>\n<li>producer</li>\n<li>consumer</li>\n<li>broker</li>\n</ul>\n<p>kafka 组成拓扑结构</p>\n</li>\n</ol>\n<ul>\n<li>broker<ul>\n<li>topic<ul>\n<li>partition</li>\n</ul>\n</li>\n<li>AR<ul>\n<li>ISR</li>\n<li>OSR</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>consumer<ul>\n<li>consumer_group<ul>\n<li>offset</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>producer</li>\n</ul>\n<h2 id=\"Producer\"><a href=\"#Producer\" class=\"headerlink\" title=\"Producer\"></a>Producer</h2><h3 id=\"Q-server-properies-服务端参数配置\"><a href=\"#Q-server-properies-服务端参数配置\" class=\"headerlink\" title=\"Q: server.properies(服务端参数配置)\"></a>Q: server.properies(服务端参数配置)</h3><p>相关参数</p>\n<table>\n<thead>\n<tr>\n<th>参数名</th>\n<th>默认设置</th>\n<th>建议设置</th>\n<th>说明</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>zookeeper.connect</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>listeners</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>advertised.listeners</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>broker.id</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>log.dir,log.dirs</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>message.max.bytes</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<h4 id=\"Q-listeners-与-advertised-listeners-是否有区别\"><a href=\"#Q-listeners-与-advertised-listeners-是否有区别\" class=\"headerlink\" title=\"Q:listeners 与 advertised.listeners 是否有区别\"></a>Q:listeners 与 advertised.listeners 是否有区别</h4><h4 id=\"message-max-bytes修改对conusmer端的级联影响\"><a href=\"#message-max-bytes修改对conusmer端的级联影响\" class=\"headerlink\" title=\"message.max.bytes修改对conusmer端的级联影响\"></a>message.max.bytes修改对conusmer端的级联影响</h4><h3 id=\"Q-HW-amp-LEO是什么-HW如何指定-有什么作用\"><a href=\"#Q-HW-amp-LEO是什么-HW如何指定-有什么作用\" class=\"headerlink\" title=\"Q: HW &amp; LEO是什么,HW如何指定,有什么作用?\"></a>Q: HW &amp; LEO是什么,HW如何指定,有什么作用?</h3><p>HW: hight watermark 高水位<br>LEO: log end offset 日志末尾偏移量</p>\n<p><font color=red><code>HW决定了能该topic能被消费的最大offset</code></font></p>\n<h3 id=\"Q-HW如何决定topic最大可被消息offset\"><a href=\"#Q-HW如何决定topic最大可被消息offset\" class=\"headerlink\" title=\"Q: HW如何决定topic最大可被消息offset?\"></a>Q: HW如何决定topic最大可被消息offset?</h3><p>需要知道:<br><font size=1><strong>HW 是由ISR中最小被同步partition的offset决定</strong></font></p>\n<p>HW是最小被同offset+1;</p>\n<p>LEO也是落地日志offset+1;</p>\n<p>这也很好理解,因为ISR是作为数据备份队列.那么限制用户只能消费ISR队列中每个节点都已经同步的数据.这有利于保证如果消费不成功,并遇到broker发生异常,在重新选举broker后<br>新选举的broker能尽可能有完整的数据备份(考虑到OSR也可能被设定参与选举).这样尽可能保证消息服务的稳定性.</p>\n<p><font color=yellow size=2> 但这里也抛出一个问题,就是若真发生了异常,HW后的数据能否保证不丢失!</font></p>\n<p>Q: kafka为什么没有完全采用同步复制或异步复制,而采用ISR模式</p>\n<h3 id=\"Q-生产者必要参数\"><a href=\"#Q-生产者必要参数\" class=\"headerlink\" title=\"Q: 生产者必要参数\"></a>Q: 生产者必要参数</h3><table>\n<thead>\n<tr>\n<th>参数名</th>\n<th>设置内容</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>bootstrap.servers</td>\n<td></td>\n<td>host:port,指定broker地址.可以不用完全按照完整的broker列表来设置</td>\n</tr>\n<tr>\n<td>key. serializer</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>value . serializer</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"Q-producer发送消费涉及到的异常\"><a href=\"#Q-producer发送消费涉及到的异常\" class=\"headerlink\" title=\"Q:producer发送消费涉及到的异常\"></a>Q:producer发送消费涉及到的异常</h3><h3 id=\"Q-producer发送消息的三种方法\"><a href=\"#Q-producer发送消息的三种方法\" class=\"headerlink\" title=\"Q: producer发送消息的三种方法\"></a>Q: producer发送消息的三种方法</h3><ul>\n<li>fire-and- forget</li>\n<li>sync</li>\n<li>async</li>\n</ul>\n<h3 id=\"Q-producer-一条信息到broker主要经历的流程\"><a href=\"#Q-producer-一条信息到broker主要经历的流程\" class=\"headerlink\" title=\"Q:producer 一条信息到broker主要经历的流程\"></a>Q:producer 一条信息到broker主要经历的流程</h3><ol>\n<li>Interceptor</li>\n<li>Serializer</li>\n<li>Partitioner</li>\n</ol>\n<p>分区器不一定是必须的,但后两者则是必需的.</p>\n<h3 id=\"Q-拦截器的主要用法与实际用途\"><a href=\"#Q-拦截器的主要用法与实际用途\" class=\"headerlink\" title=\"Q: 拦截器的主要用法与实际用途\"></a>Q: 拦截器的主要用法与实际用途</h3><h3 id=\"Q-kafka发送吞吐量受影响参数与可能原因\"><a href=\"#Q-kafka发送吞吐量受影响参数与可能原因\" class=\"headerlink\" title=\"Q: kafka发送吞吐量受影响参数与可能原因\"></a>Q: kafka发送吞吐量受影响参数与可能原因</h3><h3 id=\"T-kafka-producer原理分析\"><a href=\"#T-kafka-producer原理分析\" class=\"headerlink\" title=\"T:kafka producer原理分析\"></a>T:kafka producer原理分析</h3><h2 id=\"Consumer\"><a href=\"#Consumer\" class=\"headerlink\" title=\"Consumer\"></a>Consumer</h2><h3 id=\"Q-消费者与消费组-topic中分区与消费组与消费者的关系\"><a href=\"#Q-消费者与消费组-topic中分区与消费组与消费者的关系\" class=\"headerlink\" title=\"Q:消费者与消费组,topic中分区与消费组与消费者的关系\"></a>Q:消费者与消费组,topic中分区与消费组与消费者的关系</h3><h3 id=\"Q-消费者消费的内部逻辑\"><a href=\"#Q-消费者消费的内部逻辑\" class=\"headerlink\" title=\"Q:消费者消费的内部逻辑\"></a>Q:消费者消费的内部逻辑</h3><h3 id=\"Q-如何获得每个分区最大offset\"><a href=\"#Q-如何获得每个分区最大offset\" class=\"headerlink\" title=\"Q: 如何获得每个分区最大offset\"></a>Q: 如何获得每个分区最大offset</h3><h3 id=\"Q-consumer订阅的几种方式-与区别\"><a href=\"#Q-consumer订阅的几种方式-与区别\" class=\"headerlink\" title=\"Q:consumer订阅的几种方式,与区别\"></a>Q:consumer订阅的几种方式,与区别</h3><p>主要分为subscribe 与assign</p>\n<p>前者能够自动再均衡,后者不行.</p>\n<h3 id=\"Q-三种不同的订阅状态分别是什么\"><a href=\"#Q-三种不同的订阅状态分别是什么\" class=\"headerlink\" title=\"Q:三种不同的订阅状态分别是什么\"></a>Q:三种不同的订阅状态分别是什么</h3><h3 id=\"Q-常见的反序列化协议\"><a href=\"#Q-常见的反序列化协议\" class=\"headerlink\" title=\"Q:常见的反序列化协议\"></a>Q:常见的反序列化协议</h3><h3 id=\"Q-consumer-poll-Duration-timeout-这个timeout起到什么作用\"><a href=\"#Q-consumer-poll-Duration-timeout-这个timeout起到什么作用\" class=\"headerlink\" title=\"Q:consumer poll(Duration timeout ),这个timeout起到什么作用.\"></a>Q:consumer poll(Duration timeout ),这个timeout起到什么作用.</h3><h4 id=\"另timeout设置成0或Long-MAX-VALUE有什么区别\"><a href=\"#另timeout设置成0或Long-MAX-VALUE有什么区别\" class=\"headerlink\" title=\"另timeout设置成0或Long.MAX_VALUE有什么区别\"></a>另timeout设置成0或Long.MAX_VALUE有什么区别</h4><h3 id=\"Q-consumer-消费后提交的主要方式有几种-各有什么区别\"><a href=\"#Q-consumer-消费后提交的主要方式有几种-各有什么区别\" class=\"headerlink\" title=\"Q:consumer 消费后提交的主要方式有几种,各有什么区别\"></a>Q:consumer 消费后提交的主要方式有几种,各有什么区别</h3><h3 id=\"consumer-poll-背后涉及到的逻辑简示\"><a href=\"#consumer-poll-背后涉及到的逻辑简示\" class=\"headerlink\" title=\"consumer poll()背后涉及到的逻辑简示\"></a>consumer poll()背后涉及到的逻辑简示</h3><ol>\n<li>消费位移</li>\n<li>消费者协调</li>\n<li>组协调</li>\n<li>消费者选举</li>\n<li>分区分配的分发</li>\n<li>再均衡逻辑</li>\n<li>heartbroker</li>\n</ol>\n<hr>\n<h3 id=\"Q-消费者位移信息存放位置\"><a href=\"#Q-消费者位移信息存放位置\" class=\"headerlink\" title=\"Q:消费者位移信息存放位置\"></a>Q:消费者位移信息存放位置</h3><p>之前老版本存放在zookeeper中,但因为这样kafka的消费性能会受到zookeeper,controller节点负载能力的影响.而zookeeper ,常常不止被一个组件使用.所以,在新版本中,kafka客户端将consumer offset的维护信息放在内部主题</p>\n<p>__consumer_offsets中.这个主题中存放着各consumer group 与consumer对订阅topic的消费位移信息</p>\n<h3 id=\"Q-消费者多线程实现方式-大致三种\"><a href=\"#Q-消费者多线程实现方式-大致三种\" class=\"headerlink\" title=\"Q:消费者多线程实现方式(大致三种)\"></a>Q:消费者多线程实现方式(大致三种)</h3><h3 id=\"T-consumer异常提交与处理\"><a href=\"#T-consumer异常提交与处理\" class=\"headerlink\" title=\"T: consumer异常提交与处理\"></a>T: consumer异常提交与处理</h3><h2 id=\"日志存储\"><a href=\"#日志存储\" class=\"headerlink\" title=\"日志存储\"></a>日志存储</h2><p><code>kafka在服务器硬盘上的具体存储形式</code> </p>\n<h3 id=\"日志格式的演变\"><a href=\"#日志格式的演变\" class=\"headerlink\" title=\"日志格式的演变\"></a>日志格式的演变</h3><ol>\n<li>v0</li>\n<li>v1</li>\n<li>v2</li>\n</ol>\n<h3 id=\"Q-各版本间主要的区别\"><a href=\"#Q-各版本间主要的区别\" class=\"headerlink\" title=\"Q: 各版本间主要的区别\"></a>Q: 各版本间主要的区别</h3><h3 id=\"Q-swap对kafka的影响\"><a href=\"#Q-swap对kafka的影响\" class=\"headerlink\" title=\"Q:swap对kafka的影响\"></a>Q:swap对kafka的影响</h3><h2 id=\"服务端一些核心设计\"><a href=\"#服务端一些核心设计\" class=\"headerlink\" title=\"服务端一些核心设计\"></a>服务端一些核心设计</h2>"},{"_content":"# kafka疑问点\n\n## consumer api\n\n1. High-level && sample-level的区别\n2. 不同api下offset的维护.\n\n","source":"_posts/王阁/技术/大数据/kafka/kafka疑问点.md","raw":"# kafka疑问点\n\n## consumer api\n\n1. High-level && sample-level的区别\n2. 不同api下offset的维护.\n\n","slug":"王阁/技术/大数据/kafka/kafka疑问点","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/kafka/kafka疑问点","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgs006hu6pwdtshhst2","content":"<h1 id=\"kafka疑问点\"><a href=\"#kafka疑问点\" class=\"headerlink\" title=\"kafka疑问点\"></a>kafka疑问点</h1><h2 id=\"consumer-api\"><a href=\"#consumer-api\" class=\"headerlink\" title=\"consumer api\"></a>consumer api</h2><ol>\n<li>High-level &amp;&amp; sample-level的区别</li>\n<li>不同api下offset的维护.</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"kafka疑问点\"><a href=\"#kafka疑问点\" class=\"headerlink\" title=\"kafka疑问点\"></a>kafka疑问点</h1><h2 id=\"consumer-api\"><a href=\"#consumer-api\" class=\"headerlink\" title=\"consumer api\"></a>consumer api</h2><ol>\n<li>High-level &amp;&amp; sample-level的区别</li>\n<li>不同api下offset的维护.</li>\n</ol>\n"},{"title":"spark-streaming","date":"2021-06-07T08:51:13.705Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n\n# spark-streaming\n\n\n示例代码\n\n```java\n\npackage net.sunrise.review.strem;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.kafka.clients.consumer.ConsumerRecord;\nimport org.apache.spark.SparkConf;\nimport org.apache.spark.api.java.Optional;\nimport org.apache.spark.api.java.function.Function2;\nimport org.apache.spark.streaming.Durations;\nimport org.apache.spark.streaming.api.java.JavaInputDStream;\nimport org.apache.spark.streaming.api.java.JavaStreamingContext;\nimport org.apache.spark.streaming.kafka010.ConsumerStrategies;\nimport org.apache.spark.streaming.kafka010.KafkaUtils;\nimport org.apache.spark.streaming.kafka010.LocationStrategies;\nimport scala.Tuple2;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2021/6/10\n * @desc updateStateByKey实现\n */\n@Slf4j\npublic class ProjectCountStream {\n    public static void main(String[] args) throws InterruptedException {\n        SparkConf conf = new SparkConf().setAppName(\"projectCountStream\").setMaster(\"local[1]\");\n        conf.set(\"spark.serializer\", \"org.apache.spark.serializer.KryoSerializer\");\n        JavaStreamingContext jssc = new JavaStreamingContext(conf, Durations.seconds(10));\n        jssc.sparkContext().setLogLevel(\"DEBUG\");\n        jssc.checkpoint(\"/Users/kuiqwang/Desktop/spark_tmp/checkpoint\");\n        HashMap<String, Object> kafkaParams = new HashMap<String, Object>();\n        kafkaParams.put(\"bootstrap.servers\", \"kafka01:9092,kafka02:9092,kafka03:9092\");\n        kafkaParams.put(\"key.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\");\n        kafkaParams.put(\"value.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\");\n        kafkaParams.put(\"auto.offset.reset\", \"earliest\");\n        kafkaParams.put(\"group.id\", \"flume-new5\");\n        HashSet<String> topicsSet = new HashSet<>();\n        topicsSet.add(\"jllsd-mock-camera-data-all-in-one\");\n\n        JavaInputDStream<ConsumerRecord<String, String>> projectCountDStream = KafkaUtils.createDirectStream(jssc, LocationStrategies.PreferConsistent(), ConsumerStrategies.<String, String>Subscribe(topicsSet, kafkaParams));\n        Function2<List<Integer>, Optional<Integer>, Optional<Integer>> funn2 = (List<Integer> list, Optional<Integer> val) -> {\n            Integer updateValue = 0;\n            if (val.isPresent()) {\n                updateValue = val.get();\n            }\n            for (Integer v : list) {\n                updateValue += v;\n            }\n            return Optional.of(updateValue);\n        };\n        projectCountDStream.mapPartitionsToPair(message -> {\n            List<Tuple2<String, Integer>> tlist = new ArrayList();\n            while (message.hasNext()) {\n                ConsumerRecord<String, String> records = message.next();\n                tlist.add(new Tuple2(records.key(), 1));\n            }\n            return tlist.iterator();\n        }).updateStateByKey(funn2).print();\n\n        jssc.start();\n        jssc.awaitTermination();\n\n    }\n}\n\n\n```\n\n上述代码采用了 kafka inputStream\ntransform 算子  mapPartitionsToPair  updateStateByKey\n启用了checkpoint\n\n\n针对spark-streaming 主要的内容还是对\n\n## 共享变量\n\n1. 累加器\n2. 广播变量\n\n## spark windows参数\n\n","source":"_posts/王阁/技术/大数据/spark/spark-streaming.md","raw":"title:  spark-streaming\ndate:  2021年 06月 07日\ntags: [spark-streaming,流式计算引擎]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n\n# spark-streaming\n\n\n示例代码\n\n```java\n\npackage net.sunrise.review.strem;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.kafka.clients.consumer.ConsumerRecord;\nimport org.apache.spark.SparkConf;\nimport org.apache.spark.api.java.Optional;\nimport org.apache.spark.api.java.function.Function2;\nimport org.apache.spark.streaming.Durations;\nimport org.apache.spark.streaming.api.java.JavaInputDStream;\nimport org.apache.spark.streaming.api.java.JavaStreamingContext;\nimport org.apache.spark.streaming.kafka010.ConsumerStrategies;\nimport org.apache.spark.streaming.kafka010.KafkaUtils;\nimport org.apache.spark.streaming.kafka010.LocationStrategies;\nimport scala.Tuple2;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2021/6/10\n * @desc updateStateByKey实现\n */\n@Slf4j\npublic class ProjectCountStream {\n    public static void main(String[] args) throws InterruptedException {\n        SparkConf conf = new SparkConf().setAppName(\"projectCountStream\").setMaster(\"local[1]\");\n        conf.set(\"spark.serializer\", \"org.apache.spark.serializer.KryoSerializer\");\n        JavaStreamingContext jssc = new JavaStreamingContext(conf, Durations.seconds(10));\n        jssc.sparkContext().setLogLevel(\"DEBUG\");\n        jssc.checkpoint(\"/Users/kuiqwang/Desktop/spark_tmp/checkpoint\");\n        HashMap<String, Object> kafkaParams = new HashMap<String, Object>();\n        kafkaParams.put(\"bootstrap.servers\", \"kafka01:9092,kafka02:9092,kafka03:9092\");\n        kafkaParams.put(\"key.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\");\n        kafkaParams.put(\"value.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\");\n        kafkaParams.put(\"auto.offset.reset\", \"earliest\");\n        kafkaParams.put(\"group.id\", \"flume-new5\");\n        HashSet<String> topicsSet = new HashSet<>();\n        topicsSet.add(\"jllsd-mock-camera-data-all-in-one\");\n\n        JavaInputDStream<ConsumerRecord<String, String>> projectCountDStream = KafkaUtils.createDirectStream(jssc, LocationStrategies.PreferConsistent(), ConsumerStrategies.<String, String>Subscribe(topicsSet, kafkaParams));\n        Function2<List<Integer>, Optional<Integer>, Optional<Integer>> funn2 = (List<Integer> list, Optional<Integer> val) -> {\n            Integer updateValue = 0;\n            if (val.isPresent()) {\n                updateValue = val.get();\n            }\n            for (Integer v : list) {\n                updateValue += v;\n            }\n            return Optional.of(updateValue);\n        };\n        projectCountDStream.mapPartitionsToPair(message -> {\n            List<Tuple2<String, Integer>> tlist = new ArrayList();\n            while (message.hasNext()) {\n                ConsumerRecord<String, String> records = message.next();\n                tlist.add(new Tuple2(records.key(), 1));\n            }\n            return tlist.iterator();\n        }).updateStateByKey(funn2).print();\n\n        jssc.start();\n        jssc.awaitTermination();\n\n    }\n}\n\n\n```\n\n上述代码采用了 kafka inputStream\ntransform 算子  mapPartitionsToPair  updateStateByKey\n启用了checkpoint\n\n\n针对spark-streaming 主要的内容还是对\n\n## 共享变量\n\n1. 累加器\n2. 广播变量\n\n## spark windows参数\n\n","slug":"王阁/技术/大数据/spark/spark-streaming","published":1,"updated":"2021-06-18T06:08:59.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgt006iu6pwdp7r8bn9","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"36e6ac7413a92bf9386faa472993077730ac06bc0d9b69dfa7b1d890cd6a220e\">f29c680708acd02cbb1b6cceaba06192fde83986012c252d41358e45df6c1bc5a5ad25abf7b7fcfa97725ef5e5a4bd8789e5ae9850647b5ff74326231452e1bf6f807f1e3c125e96ad4c8221ab1569c34752d5c564078301b7f8945ae5be18fb6daf36791fe74ec8c8cb6c3806f8843c315dc04f7118061b9413c4e833ea5f7764909bffede374a88bf8d44dc0c45a8d0c174f8cd0a421a057e9143584e800b74e33316679cec4d435811b5e2edfc400f23aef5cb958943217141467e725df5a5b5791d0cd7ae151f3481757a1307d2b6fc9cde4d22b569325b4b67614d2f14331e9c1c4e9a21887094a12a5b0b5e012d5e6e4e1437ccbf80cb319c8dbc22a7b2b0ca5988ac3fa528bf38b93a39ca7354f3d496904ca7370fd1c95b94229c48483ffee952aba676ec2b89a93432b2bf0ab3993bd68b8f9a7e0e7ae5fe7d4adfbe338790b2c441c6518d0dd4f2ee4251b8ad59741019a74ac4c99c4e79dd329e844789fd7338acbc220133944643ae50102433dbf6eed8b31cb90b85248672a2d08368674da9e7e10221ad5f9420ba049c6af28f1901b31c5f3adbc19de083541ddf12fe0cdb3a34e56ea9b4af6688643d1ba2a7265d5a72e1099114d532c3203595ea04d087cf68a1f6e8640fbc2b570859c7447f5c77a941e3ab153264a36e4c4b5995f2b01a4169fae2f860101b9086bd36af9105217e543cef483b4b9842daf8dc9f177541ad7c9b13aad79bb069af6305199ab02ab62ec657a0a28bf2e2b9eb967647e1a4c6962b91fa3b8bb56619542026726604f89fe0c5f605f0ed4b57f31bde1acc856a126977736a056c275e2e38cf8b948de9ff99cecf184755ed9c2956d8a79b855eb8eee4bb4114bfa4a849f1c38e4e3ad2b9a1ec659c5ff3b568bb12fd4b76eccffeea96f21f78202922515c4f6c946940d7c2d926becccaf8e453bc7d423442f2fd88332a0144d1235f148af7b96ddca82ce89dd587e944cb2f1f2534e3dab846a2b042e44ddc11283b59bcb66dab05e2b7abfbf67fc6e52e69d95918f8eeed9df39d25627b8a23a68764c060e23a43e617dbd35c83a17c40c7fd9e0e4f64cdabb99743ecfe923fd84b1e01a256ef0dc214beb4bfbddef7fa0fdf3416b471da52777d1e6c53618fb4517917fb7536458929b857666f52b68070c5e949852d18e46d2c4d38cfeff8265b49768dc160fe77e1ab9cb44d102ab5589693b14af75a89ac82e5a3325d47d637b2fbdf495103c9d9c2ef391b8d798a56c2dee9d7fe5063f3b3fa55644e75b099c38227f2e1268dc57ed294cb6523140ad29ca668955189e0c844d9e6c4f6195218d8d2b701969318a0aed9db8e616ebe921c7d924df0eb71c6c1cfabca6f6f892febb65e85779c5fbad76ac535f234303ae26ce28b1b66a610a8eec4f121870905e605e07450cc3ca462c340df363fbea6f2d7ecb318144a136923a8179c55b2570639c91f5b1a6ea40abe3ee0dddc4fecfc72e938c32b5e76800ea512683b2848faae0e102ff6657fcda98c50692e30888d843365a85b5f151f5b2a119dc67eb8bd33f68ac219230bcffd4dff1c2ce107df0f5916b9c74670f3c5b3521bf22dbbb81c1043697407cf42c0d3ee781b9963f6a304e4782b315cd1eca421ebff4ff2af51e322ce32be605fe01e4d0d74902a1613dc84a2f0fad658051a7a9dbb283d7831e2e76d6c1ce9415cd5c081239e306e010590dff3846183dc920096406074e38aecb65db699c322ddb377c32f0558678f665f8b977a1283bf8b2f6518e511eb9b07a11b87816e6eacb614a8c4d44bf500953f176ee9a0580a9839785dc285849428a34a47d9cc0f0a556740d13de6e5a44d5242f6c9848e13fd5b088cd432f01b9e69dbb30233496371e21f0d73a81fe367725b706de017884d057ffb6819d23b66a485f61518eb2cea98e46385b7f47c2e02b841eda141d1821896585371233e56ffd0f19fa84ea77d043c13c392a692d5fb93dbbd77ec1705689ac46d3f27b2ce8687da3135e992d0c95c973021e967a80183d449ecbc6c2858fb1b5a9ee361a5c70cb0758cb79efa5d9dfb384dfd0c5d65ca4e139c1cb3b8971bbfefa746603a9a47220b1e968fcc0e9a02f41dcbd11b5bb306aaa7f2aa46709a8f6d3d44ae848a93a9d35b9d286c692ea10abbaa1fb1c01cc04c6970782055afee3413e00ecf8942808890d7e81b6abbbce62ae1a12a888ed967ea148c07379cfd156de7a10d0fd8a32af633fabac6c478ce6f41348da46fcd2fe7ede6f65a3931ae61420ac4679a84150216d88acdf026a842d22c17d93d8c6acc94f984fe81fd58e8b71f17b2da6e7f1e28e3406e5fe0e98ef9d533816fb0f408a0006dee042c2c2d127d3f58c1540ebbfb494a638a6d3c77e7070c84a4edabc8a607d830970a4418ed8515590d8790503f0b5e677d4d5679af0a67b6c52f096bde4426f58674a34c2843124b7d6a4b45e927e1ac0f8f8daef2eba44bcb455ed12fa2b271c4025081666249a451cc8b3f79c7a158fe7f83c8b6902d90142e083be3a5f19b3e278cfa135d2dd7fc3d02ac45aa7161426dbd02b18226b19a6cb75b1069abe3fe520c593f6cc18cd8d67473d235976a77527e652bc171ac9dec0d558a0f157b7df7ed3d9b2793c09475f1753e784fd374a7f413472a1cc1cfea8e0d563373ba5d4cf071ed08efe6279d8c464ff4c03fe9649facb697b7a97fee9740ffd6099e04fd955e109a53b0144b2813f2519b03f0842553fcf895c9a0016773cf8b48ed777c5a9d06de1d69f10726f3a8baa126fc1a7895dc08dd5bdfa47c11074523f26b0baf366ff45a329eb39c13de5f28d96c1bcce8848d839feb92eea1aeb3408fdae017c33a22e112788cb04bbeaf1019dd7dd3a57c1b93ddbbe37283e5ae023884f6863e35eae306c6a64cb2f83112ffcdeab90385990e895996bbf9b92e7ad9afb67556043e26fd627436be461f0445d8c394cbba66144f5a70a635cb28f23b9d05633ac702375263028d93c92c78ca2751e48be5a698026d571e7693bdb84ec014d3efe698a4f8da0f2685728c6d7b6f8ab9b0bdff8a250722b2c4c5cbd6580496f7d5e998a844d384b3bd65302574028612e955fb6d3f24b8dd37425e2704c228e5cad4784edb1e92c99eac9df5487bc94eff12db155efdbc5f8abea3c00c2de7b8cf721962828e6273684de27b5a0d2aa85b348576769b9b067928359b6d6390a8babac2f5d285b73cd1ce51bcb5b7695e938baeed385951f68dabc7d9b1a8c2db9cb741f9d7992541f2d4178cd12e0dc573a00a5a22a5f0229a37384cba663b249dbb35a27fc306a929f9b8f6f6fcbdc0ccacc934d7a56f1322d7eef333348ce2ffbfca0b617036acbb8f40620e194c2888f8c2e6a9eb22049f7756ef452fff6d000a989aca44e5c078371501c0959a5418969308d92e727eec3a1a7e7f704f8c2856bb92965f1c32be635337cdd290a317823b9482e3c6124b6080859c2d875c0dc790c37197cab7f62645945d30c45786d2dbfa68fddeea359b57d7260e51d0a81dec2346e8794677698bbe148683d00823ec9fe61e284d28a24f5375a6703502f0b33788ffd778abbca1a0c2ccd5e3a6f582696e52eca3573ced861f6a8f6cc0472b2336b3ad5dd30ffd191aa1a910d75bb3bbedf3103aeb1b2a2f811e91ae83d9d6a777cfa111a9484080313bab1fc3364c1ce3733b8eefd865a1c7ac177994cd35f5369d0a7cf81e14084c68868795a6e36a9afee007473f9c35ee0dd94ba4786c6487dcc0fca485fc306e5317ba38d2e5c8b218105afab13dd295083905ef06774de9f08758f96666afb27189c3fdc4b288ac9217b258f679f352be6a3f35b7d9e1d9a884e3a89664e7fd293f6111d4ac4df25d95a67abb2a61f2dbaa9269df2c0122634956975f74e9504227faa088ed8b3e99dc8ef79b50f2a8ae0c61a83c726fd6b1b999690d3fdbbb064c67dd93bb30f07356a16a89d7b4c27c281d0b220b74a4c68cecb3d679b5bf4533a67f634dac9043dd952ef4ff955fd83f870fd27501325e78e9e4e3c62534a099f6972f62cac498cd429b77f509d41ac96d5e005ab294ae8b4217aa92787f59549eceae5f24640385cb1c75efa119ef585e7d9ba8610585ed858de551f8b8d1861f859e1511c658855c2fa08edb545db689c182238e8c00506d57279ef3599d251a135ae7abb025abd32088dbd4d151bcc1710ca5c9ebe10428b1acb171c49f4eea093a221e189c8654f46dd6010726c91212acdfeded2dbf57a7765353f846e9d8884325dc89f2698583f06e294381442dd2cfa56ab3bef429ffd22ea20d3aac3814abbbf42f58e2f717154c0f6f40e29f89e3da422fb0f2809023fbf86224b4847c2c4c52de79afc8f8008b45cf55073a47eae6843acfdafc0f634ca0e871beaef52d18446a9b385b67f566271ae488200c314340781a091e9a99916e370ad0325760b7e1a82ed397d7506abe87a5decd833899bd0783e21d0acfa8e6113ae6b9e7178f706d2be36a77168c42e1cba51003bac9d067512b2ea1a4cd4493dafa7454a24f63979e01cdef243f52ef54c0ca3d8aaac16ae2d41961fbaffb8d25c0e9f2ef7538a3de879cdd359ad38a1ccb4b70a55c722ec0894ac136823e01886488204537c0fe1b3330ccd693e29fa310bd67122126667d037665ad357a064b3d311fbf284790a1d19a5fde9c33aa562efe148991fe158068015d8e2be0b4b88407513c5f6e907ec46edc31d3fc6a04f4fcd197d72ccefe2e9582c5454147d7769dff8154ee163546c6096ad635a1146a79b37168b7b680386d94a4baab83ff2b5440ff0967e73d5b04a0c087cdb128379c23dc98c23ed5c01fc9ec5afba715bdd2e8b9ac91e29d853a11d8c30db1b1a0295726f3e47450420d34f9cd1e3ed67d80d857cdfd7801e67152e9ce0880430cb78710fb89c3189f119229080753de790b823c19ad16f145993b842a4e9b683131922d0d875527db1079087204b8415286740881f2a2ea5e04037685cd5dfde50c898c36f5a6171add404bb265957de8222aca91593063fc5cf61f0eda5e85ec4a9c644587b83386b93ce601f3c50a2b5e1541c04d6df178d9cb46d56cfb924820f4001b7190de6746dd8fa4acb50db22778f8deb195d7e241473c8d4fb9b8e2c177114ab645397ce013fddf570062f0803fccc6115133ace1b1952e13a2acfa8c1adabdf0a93afd9f2aa21e8def03893bee95640546555d6bff414f5289b26a2a551d73c0d33453ca1c85057f27be46272432b429a0a409c1a07e353bb7b824631192019282bf4165ac988499aba4ff3fbe854dd3858bcefdde553bb7bc6cfd759a6fd20957c2e052de3ed2f927a76c708fdeb0c605d01f3017ae13a63bade17c3758dabc2cd99bb6eb81a88cbecaf5c203f51b0d16e14f0ea3c0be9d1ccca5e86f74f1f4968fc32cf36ce4bd6df1e5647626f5cb812a487a1ab65678ccfa4d08238793d9dc22d56f7ee4d17dc93eb77488f484c56aa9140c7ff42f65e1b14e16f88cc3d70151e75bbb62e19ba4577aca8aec22fc51af2cd495f1597ea1f64b31bccb02ff6b134f6be814ba2a2243bcd9dbf37d9375265137296bae6bd0865f35454713c1381a8e42761355844ea1bf0b3e61a764b166c19093aba622fbe9c943b9a4ee44c6b98eafb217cd7f303738eeef6b91c80651ec72c5f7604742492f4eee575756e37666a685160f44c154df8ca7c3189d36e3fd92909494a8d138b8a1bc9ad21abee8fc71355d2e25ad176f50777e0495d66d37505fe5b8c7ce4c2b8aeb1eda4ce1003676dd3cae4d14dccb9d91ef1ede2b87375dffcf5266dc2dc37f50704c8a5c74709907ccba54aa2165ac841e6a82f536659389b47fde462b4335559242606004a5a4147547a2ed819f88b939cf22daf3904e94e71a3f4eff69a91cfc53b9693617cdae52649d8510065f1a4225a3f325faccbcace77bfe2ab226e0bd8add4d9d4684dd6d492649f43bddd2b0fff83de2ce393b5d389bddb5869b148dc1f41b6808a5b1b9f17e81a6a150167cd67d5487cb7a2c03b3cdec073b4793bb2807654ff6f28d2e9b99041664dbb19d64868afd7fd87b5ce9cdfbfca3f18c4b21bfe3ca7f698bee6d65e5c3abd35dc93eceaa0e4ca3e2b1cd4751e205a9b481cc02e8f976f11c56133825cc373fde00669c68a98ce715dc38c43385b52168e42169a918a9ffba1c871d843e2ae557f5c021e6e615dc3923275e1a3c7444003a89a9b6bfbbb5bd32f4c8ddf9bbdfc1e0ce3a7687055999386d62091e1437e033e72a6da809741b3301ba1c832bdc62c52905bc2f2fc1937e29bd3de669425ab6697a074d074e7d6e9e6eb7d6c5ef6e9370581757e48c36b313e6d15320c9ccc4af3e5a51cc3a529e7da3e99c198e8c88870e0ac16f207fe79be8bb4b6fc32c3f3d13afd39fbd3da591947df35fa64ce002b10f7d3c5a5a7b8774ff37ae278ac1f6db3eb13b8c553d4f849f313a5c4eea68aeb2042c8a52ef0e30d9406b55c3b7b95435c5a49d911ad7071f30abeecdc9cf100bc3afd8de4c3f40083469bd6245fdc3aa81017d8f4db8c05409e7502adf8ede6dbfc738fdd7fbc6240929923b7c80dad4ab1226d20f8c8bf0bc4a98bf3c73287f84c0c339a6cd555fe1096edf3cd79c877511f53bac5494997b834023d3e2998a286115171be0ffae4aae56bea9869a62a73945afb6daaf2aface0f52e96f4b402c4cb96810819a74cd653536482791a428c3d3a56e94b756d58747d637c4ca4998c8aff0132d62256c07dc3e1b1f2fa4d746c06a8cd9d3751f9189981fdf64bc8962f8374eda75244ea119aca30823a90394c822e244c3d2ac0ca6d5efbdee5a089463b0a565d4e57d4ff5f38ccbc6e3a9d2c54b43bf969d4ee4974d2e45ecc8ce7b0953182000b140216effc7d720cba4cc4f06777ab5f186aa8e626e7053869eb5c19a45c6fc238e5ff62c72c2169eccc08298b90779010c94756254d8d4d221094222dffac5644a47f79afe408cd27c8a60062d3730567dc2163f7a3ece3474114a1fd5e5abab9841fee237e8390408df459790ddd43c32f3d4f55ba465afac3d2932c611f54c00407ee300437d0bc978a77ee7f5861564c8a73b49a0b0ee2cbf8ab8d95dfc50b091a028869b7b742f7560ced880eb7162dea38304d7e84be4be041e35efe4ced68b938a99b50709f67fc52bc64b046ff3e7ced9e68c1235ed29c44c98917dcaddebaae503f04454fac658cec3bda4af2d90ac4a1bad823bf09019ef953ab7bd49061b20a7ee897165a494ecdcb5d8de3fdeb497656d03f06f4d8b7428786a1d912b89f69199ba43c87deb4d55ac6f1bf282c528f6db56f902bc2e5e91f5953e7bc46710e347e426f7d7f1f452a8b154a4bbe7439377014153becd6cb8cd46e39c54c636adc23c50b5d73c2da974222a3dd7d7af5bcd3d3c6c6d6169609aa5e468d3ae47f87b56915927bf68445766cd4b6dac32f2f964f705207360b0902df57ff2f685ec3a2a0aa59160d00a0e9d1fda32dd0b0ba86ffd16404aa32aa78a9e0943f89f303347c3ec615717d6c739cd7cf978eca48a84b0875ee3553b35e52cd7676966bae311b0173254e9eb4f61305b8c8e3c5c1fa0bca7c4298fadca4b8d439617941dca50aaef268224651ce8bbf6f55c9a1e8823a8c589afdeedb60cc50633dbdac3ba70f5ec3dd9ee71a61ecb0e2597a4928d9db87160144d0a28b0226c1167e5e5852a9676e3abeeb42fa6019d9deacb9452215fc9205a54cb871436e0b7a6f51a6f1d829fa4f274bd7d564aa75762b46b5e4325a03665536bab3f6b1d261af71a1f5bd9ac4f65b55df6c9a4392c51911cc8b24076a38948bbadc0c442e874b8db95485b162a4cc3762717ec261bb389f30c8f63bfd622f7687fa102c5f8a3e069d878a3916e111c1a19cd049971671f0c54ae6a77b023241dbf3baaa62e299cb5289a37e311a6fc92a7fea8ef68b0a93cd1c4fccba7e6a7f60710a227b785edee405385ebbd4a8beace9243a8de6d6f853ae5cceed7b54ae34a76b88989251c9451891f38d41d3d95e1c0db8049d3e9f92fe8c49f061cd90b24acf189b9ff93b1bb71866d48aa7a1dbedde2ef8ef7d65c78f5bcd4bfc17ed00866434dd5c513f00f0e01f197da0ac5053cd3f97a5caae82c5f072bfd633adcab1629ca12c864e2d128baf7f3e927cec678b54802ae1bf38e3344f902ebb4266c38457dbe43505e30e4bcb1c22bdcfb16a397578748265b87e5bcf68db0cc410ed4b9a568524c4d19982d309ea070d15f96f3a7895472db90ed0ec571191466baba4d86924822cd7ccaf3704fe54c51af7effe6b955acd5a980de70a808a830d81d9fa1636b6e34b45ce1c1967145829694bda3d96af248cb0ddb2a7fa3f149c9f8c64085c46ca5777e52c97db43635b04a6fb97fb4f054e7b239ce5e75db975785295f3c4ce95b66ab6dfbc0d65f07b1461ce9811fd7ef37c91159260d8495335b0d27f33e78f9bb1206c7e9e0ad79b510b8fa1afc6d98205bd701ebad7faa14be8b802eb9097bb62e7e82e09671654152156d11eb99f36197d1b91f8e91a17ba5aa538f2ea34ca9a59ce3c4b8c8d3acb75e43baa69c5953706e46321f3be00d36b480fe5a9974f3a61bc94814a5eb09437c3c4956885601fa99e72ad03c1b8450813664c6e65389b76206510830b5db1f72257474321b962dc896cefef3e7f9bdd6539c6a8d24714e24407ef42a26a6d6083c8525cd4dd81f7142539ee53692507ff0c3b0a68d087146661908cc9983b3f30cf1d9b9410db59b0057ee1e7df2ea940bde9e7424533e873ed9be900a8f8e02e8a5649b84842ac3f5eb2a2128e6338e85f8e3786e67608eee33444608925467d43797bd773708b8559eb6abc0e7bb923ce95281944a8bf9d3ee2a91082efc0b0fd8f97f6279cb7ad18a2a7e9cb109882c5c81d3c197374e80879c1c0c2ba841a513b21db60f3783d857097720aecf554cb41778e7f5c79ff9dfc96124639a7a68dfc0c7f3a7634d491756e88a630cea71a9be748661c0d559f354142b7cde04b90fae7e5fa03c74cf5b18e08892c226b3d6075bf8d0b8bec94388f85dda0bb03756e831ed312f87abb4ce7f08d1f93f2db3795b29c27bc1e2480ffff0dd17fc41ce2ee06f0a11d4990336b64f78a7b50318553f9ad0db8c3fe7dc86a4667b6038f89032fcb3a9fe3b623e8d84c068c9841d0183d853073e2f1880e9fb0e3821d7cb4276a2b76f1fde50bfd3f3d5f4c588a0428d690676033b5962a8e7a8179d3b2451bfcbe9d62e4d5dd109d9ad1decd1042e8101bf45ad41d7bb006d6dafb232985e54d3ca4059cc105834c8aa27f27249054346eb148213aad71da3ec35fd8549fa0f7cc8e03459aa5826af432b6e8af09b05c75abb29b1e233c8c8f4d28d2487465bf63f8584da58fc3b0b623854a827551b4d102af6eb743412ec3c458fbc389cc9e612e971167c69d08bcf18e8f3b266e2885d4b1addb89d567f7ba42c47b412c047bc82a642e68a8b6c490612d035ef2293e66f20751ccbca301199352d69b2c0173bae8ae80949ee3ece415aeb00dadc8b42499d59bd1659754acfb82e5fe2f3996ecaa6f52001531f3505584d2eff0f8bfd1e9b1455dedfa79d761912f642cc7059de86236c877013820e86c7760e0ceea4ad349cafca9f3a5dd19f49db03ed8cb817722a540ba2cb12cb664ac352e51360c64d75a042a6ec8a9f911c1c4c828796a9c6e21849fd79c3d70a5da77fb194aaae9279041fe581c37f7013a7b1ce12defdbfce55eedfad012c13bfc408494e59c4c4adda4eabad97eda6b1a81706b02f8fd9f137db3ce418b045a436f513b2db51d7e68b2045f8226abcdf74abe9620cd9f3ee835f2af86fe5bd5fcfaa86743878b34a81bcec71709b8228f2288f827874ec62a1e6c5f822f976cb8774acebaf7e35bcbbe0a0b402c347c616723ec04422bf0d8972c2d33c03f7243eaaa0e4ad47457df2e2ead46c4fca8646fa5218b6fe65f2cad2f71d04d92bcf3e3c3ddb8a0ebc37227084cb0fa3fb9a7e2249f83b383ba5ee4b1031804279b1739431b47580eb1e118ffd73a95d3ab94610724f26863dc2897478a82c98977b60c141c1bc8cde1749ac05f9dc82ea552d2e5d4aaec0547e774797380af9772915f079c4b6cde61cc6709d45d2187ccb80ac0c0758fbc8296f0a9c7e033a0bc8987b3f31c8df36e0a578bda209943abff978b6b6b888d960120c3e9e52367a10d48148353e279c669715df26511a2994aa1a5b2f66c3549679a2cd9d1d119a5b8f776f13b6eb23f2b8de62643117c1efa2ceadeabef2d964df1894945551f26e1fc0561e8ffc6b2ba378207e4ad1cd4c6b86451b5bd9a96e422921e26ecf01f19a0ea2176ff3e66988916204eee43c63e4d4564197ac81f6804c60f448381f14a21304ef5478764decf17aaa63199b2773e4773a2d63115cb4f9983353553c35669fe508aa2911f7b0e290b9d088905b3b62c5923c86f14a97d859cd5f42b41f4a923c7e9f41f9b90c63c1475152d9fbbd3cac662973a35d787ca9d88db662d2d970d748a48a84d1efee9fbb05f5a0af192aed85576e87f4c2ab45261a4c1f2a4875c0679b8c06fbcac9786ed60cc9d0dcafe19077932842e456c4844d61de3f1e7f4829f4b6a6493ad7388f271c8fab040d78e4f82668450058d9f367ecc1532dcd765cea5183279c631cff3454b6b0d739eb6c15a1d3cbb6b1592a0fdd055fea1662d7d16ba8074b0cf1748afb971562f4f17bdadaa9a6d43bf64ce6a6c7e772e2693f4d24c107a8564a0c6d01f9f351979848efe0871d4d600aa0674f37db00b6a9be47be753e8e968dc695343870ab041fb244743cd9fb275dee4cc582ccae07cddde8de407ed297862966d126af7d25059992406b5ad023d91cce95157422a6708fe761bf7a84f57fa88f7fc911e3bd3f4b62b8c26110ec6cc22bd211a3ae44c2f93fb8207bb548fa8a63c8fceae9582f7ba6e91d3d85f9c0991f22a857ca32e139cf941c99c419fe18936e5fda4cb8490cb7635bcb1da11a5f172f2a91c703d1b01b6300e9364513d2487c8eb9279292374a7cc06e20d82de800124fb44f0e6d859449dbf2b86717c360b586013c871fc4fa8d2bf52a4c260cf6126dfff3e2515b2207e150e16f76fbaccf0e4d5302b4ee4dec98d96f92a627c31a33c84bb150bea7a0a5c1631564989b7d39891c5675a75d09b53daf45ea7ca0961f74f7a34dbb53e7f22d9cd5dc90115ea8b114beb43d0585a415c862d9f5fcb9319ab58705cdf87544bd3de41e9a31e60a1246645f17c9531953c9327f33de3fd3f3ddfe25c04b21cfff044e7977153974bc57b66445142e238ab0bd8d5f2db8ba764c39e40a97d74648d6bf7f316c1e2c41bf94e8a96881957a43c7eafba62e5ce78f5df05fa21a69d49cfccccfebdbb37f7d0a2bd35bf4bba1e23adefc1885a29738f625e1ac11826a4eed86e231ec86a5e9e0abb5779b79b081ed525d3b44637d48a4156a39f57154cb4fcc6892c2fb41898d601c19eaabfa706e77372c5d0e0c9ae1275e68d96ea2570e51d746b7f8248bf7342921e0c58702545557ce858cbc6aeda5e3be882d917d3a51b7eba07d12f247199a2ffce898f793a4770ab9f2a10627fdfccc5f111a71926b593cbdc050edd0428f32aa092a6df8cc59c830363e6d8501595e1bba4ace29d6fcb61ad9db4604f56a9595a30482467bd49fafd0563f6d3ac30b5f8af474a3cbedc69ece7eb16cd0f1b2f654339c7eb0a462443276d08f381407addecfb25e842e32f3bb3709a5cb8172fbe3374b111f3f294e6bb5552052daf2c6c6d1ad2b30eea1f4f1a274c248d87de80f6655d312c20067518320ec79ee4f2cf2aa39444c6017bbd9eaaa23e773448031db1a2a169eea9f0d918c578411ab69f47d3f2fdf324bb45f4c0d43194c43064a50ffb09b39989b41972b9d553159a95314e536d7d6534521edeb7169bd2f76f7726b22546a9b1598d7e9d263d2c064bc9bce9d3e3f53e5d5fe12208b60b44a202482a39d1691de82cdfe9d0d426d366a328dc1bf67a393ec3fd903bc01e6f3f22265742516507a702e017402dd05e31baf7553aae03b3d09dab159d60fbc12252d1ea5df2efb50a90f1f84c3cdc240e132b12ba249d2c4572b48bd674890b9c643ffecc39588f74ec553f1ecce848efac61abccc447cb4fcc7ccd298549ea4940db96c07dbac4265248e262d857186994715c64c54718bffa7657fd77ef2194a49fab5d03d4c90aeea03aab96e1c2240785c663c9a4741a13584a9107246d3f3b55c2e0eceebbf30ac81f7bd0358afea7e46b2d3585a08789087cc5e5f2ec4d466b984ecb464f179d3892590dc8ac7428a7556d90508d1d5c5494b359ed8cdb1159a46700f3eb166c9527834f9c210f8b92731d908a98ae34c1e576268e53ff8b0b89ea0f5ba5885d10b4c5d9f6350280facbd3e270ad44c968c5d6705f6b43a4e911371015685c4fe89f3161aa8eedf5fa77f0f2eb73622aca73c12504dfd65df04b4b1f0cc335653020085839daa49b3fa0e3cd5705092a848e65e82922c64da0ed6bcd754b7df44dcfd2177edf46a351b90b2ee0eb7d35d2ccdcdd3287bc1b9618c65a3c563265bdfbb40e49bd01059d0335fda29ffa234f50921fabe385ac1483ee1fa35747fa223b22157aba0c6e3bd8ef295a8c57f9f41cb44644e0616a8a4a5515aa0def4d8b50b7593f81d7529c8eae433d4304b1b256048f4a26cff0d929688fdb8a6c4283447c67ed1cae3afd9031fc622b1f746645ef1f2b4b9c61febd5688cdb2736a4f148320d940e7660633efa53e6be065132217cdb02f0dc4790e77103d2b50f5f5ad63eaf20334afe7cd2940dad520779b8adcf2face8e307ea615a1e63cb93810ca81f5fcebf40e27f28ce71fa8e588de804a18bdd9f56525906c320a0285cd10a02eafb2d6c6797ad2b5488b3ac45f2abffc3693be4a347a6cdd6a65ff342ddf2b172a23dedb94241b484ee0a7cd98fb516fcaf6d2b83039f62a5e1e79b81479bbd988baf3ae62e39cb67a15129b245089bcb43de70cc9c1698491e8e9391f66cb316acbfe8b828e08b1ff8e72f20b411d87a9ae2bc88e07aa98413fb04a2942bfd596d0a36c11dde871a3da67dfc995485666004bfbe82728b8e38809f0f747dad3133ce31b270dd878a59336d43c3a30af24a468a42b04280e113f4ec3b09caeeb9ac33fda37db29bcfe05a9a3a6d3c29612aac6fb46e9bdad9b635f01b3b7dbc73a85508b5ba1cdadd851cebfc58a53e11684d70d843451f43d43c675fbdeac8a6211dc3438e747b80ee4f942cefae7854a7ae3dcc9670fc03709beff4de6d525957cfbee217038d9cb2eecaba9c0860315c87fad61fc8c4474167087aea25ca309d72d3384e41e3abcec75f0048822dbb4237f4ef9612fbea0b4fa70b3baf8d5d7cfe7880d6f29780fd7a4c199fe5a410a01d54d18d7d0f4081e309927877c06d5bc1ee1c737b9aeb3ccdf663256939d41b5ab57dfdf02f1593f57c6ced3b42aa0fc8b174f422da30c17ed004d6b5028d9b8c8e84868b8fb5a1c61e215382c11d5e882282f480437f8aa8a2f0f065a079e01a754e3c5e0c0e19ca65351f572eb3a2fb949276564e2aa36084349f030f6958d9f474d442448d80bae63bee71faeff5f4ca1e265a0ffd091769a48479aeccaa09bfde1b5600a342c4b61f291414f01b29f1776ff06ee2498c6f806114c9692bed49fb16cccef7246df4d0317c16ad6b23f6389171406cecf3311fb16f953bc8b3bc96c9088dc5cb534e4f1cab30d2916c1012951e5449776bc755569a01f0794fce833a57ea40b8b8d8393343cc53c8275cabcc9c3c9a65ca2a8c29cbf2019c2717929433cd64002b3de7bdef404ea6211ef31757950f0e14551e04e4875225aad8ae60a4b72ad04b2c22f2b09ea87d67cfed18fc6b1ffc6b51574391628d47976c4ced884674cd8889aa3ecbc08189841873c2d664d0eb30d79e0fa3eb713c7507b4795b1322c315e2678428b06f10d3990c0be388b92debf186ba730c3f9f5cf770ca881b4a289f51e47c485c78561e4a6aa377558ce959c63941b852c7edffaf1ce4acbfb90cc3dba870fce835b2c5591173216b871680c69636266feb58eb232f6a97418d9e1171760a0de1a4fe27b1bf2692671a9c4ed869df5a798a31a7b6cffb6635521f2b92b94bc642f09d554159ac13e66691dea7294664be9b9749e83bc092d7f9a3955784a6163bfaba1f4979ee764731d88b03cd890ae15cd12ff72fed2aa7d765e20d0ae97982fd9193fc6663fd80a204813e3c8ccb1</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n\n<h1 id=\"spark-streaming\"><a href=\"#spark-streaming\" class=\"headerlink\" title=\"spark-streaming\"></a>spark-streaming</h1><p>示例代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> net.sunrise.review.strem;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.kafka.clients.consumer.ConsumerRecord;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.spark.SparkConf;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.spark.api.java.Optional;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.spark.api.java.function.Function2;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.spark.streaming.Durations;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.spark.streaming.api.java.JavaInputDStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.spark.streaming.api.java.JavaStreamingContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.spark.streaming.kafka010.ConsumerStrategies;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.spark.streaming.kafka010.KafkaUtils;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.spark.streaming.kafka010.LocationStrategies;</span><br><span class=\"line\"><span class=\"keyword\">import</span> scala.Tuple2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> kuiqwang</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@emai</span> wqkenqingto@163.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@time</span> 2021/6/10</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@desc</span> updateStateByKey实现</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProjectCountStream</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        SparkConf conf = <span class=\"keyword\">new</span> SparkConf().setAppName(<span class=\"string\">\"projectCountStream\"</span>).setMaster(<span class=\"string\">\"local[1]\"</span>);</span><br><span class=\"line\">        conf.set(<span class=\"string\">\"spark.serializer\"</span>, <span class=\"string\">\"org.apache.spark.serializer.KryoSerializer\"</span>);</span><br><span class=\"line\">        JavaStreamingContext jssc = <span class=\"keyword\">new</span> JavaStreamingContext(conf, Durations.seconds(<span class=\"number\">10</span>));</span><br><span class=\"line\">        jssc.sparkContext().setLogLevel(<span class=\"string\">\"DEBUG\"</span>);</span><br><span class=\"line\">        jssc.checkpoint(<span class=\"string\">\"/Users/kuiqwang/Desktop/spark_tmp/checkpoint\"</span>);</span><br><span class=\"line\">        HashMap&lt;String, Object&gt; kafkaParams = <span class=\"keyword\">new</span> HashMap&lt;String, Object&gt;();</span><br><span class=\"line\">        kafkaParams.put(<span class=\"string\">\"bootstrap.servers\"</span>, <span class=\"string\">\"kafka01:9092,kafka02:9092,kafka03:9092\"</span>);</span><br><span class=\"line\">        kafkaParams.put(<span class=\"string\">\"key.deserializer\"</span>, <span class=\"string\">\"org.apache.kafka.common.serialization.StringDeserializer\"</span>);</span><br><span class=\"line\">        kafkaParams.put(<span class=\"string\">\"value.deserializer\"</span>, <span class=\"string\">\"org.apache.kafka.common.serialization.StringDeserializer\"</span>);</span><br><span class=\"line\">        kafkaParams.put(<span class=\"string\">\"auto.offset.reset\"</span>, <span class=\"string\">\"earliest\"</span>);</span><br><span class=\"line\">        kafkaParams.put(<span class=\"string\">\"group.id\"</span>, <span class=\"string\">\"flume-new5\"</span>);</span><br><span class=\"line\">        HashSet&lt;String&gt; topicsSet = <span class=\"keyword\">new</span> HashSet&lt;&gt;();</span><br><span class=\"line\">        topicsSet.add(<span class=\"string\">\"jllsd-mock-camera-data-all-in-one\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        JavaInputDStream&lt;ConsumerRecord&lt;String, String&gt;&gt; projectCountDStream = KafkaUtils.createDirectStream(jssc, LocationStrategies.PreferConsistent(), ConsumerStrategies.&lt;String, String&gt;Subscribe(topicsSet, kafkaParams));</span><br><span class=\"line\">        Function2&lt;List&lt;Integer&gt;, Optional&lt;Integer&gt;, Optional&lt;Integer&gt;&gt; funn2 = (List&lt;Integer&gt; list, Optional&lt;Integer&gt; val) -&gt; &#123;</span><br><span class=\"line\">            Integer updateValue = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (val.isPresent()) &#123;</span><br><span class=\"line\">                updateValue = val.get();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (Integer v : list) &#123;</span><br><span class=\"line\">                updateValue += v;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> Optional.of(updateValue);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        projectCountDStream.mapPartitionsToPair(message -&gt; &#123;</span><br><span class=\"line\">            List&lt;Tuple2&lt;String, Integer&gt;&gt; tlist = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (message.hasNext()) &#123;</span><br><span class=\"line\">                ConsumerRecord&lt;String, String&gt; records = message.next();</span><br><span class=\"line\">                tlist.add(<span class=\"keyword\">new</span> Tuple2(records.key(), <span class=\"number\">1</span>));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> tlist.iterator();</span><br><span class=\"line\">        &#125;).updateStateByKey(funn2).print();</span><br><span class=\"line\"></span><br><span class=\"line\">        jssc.start();</span><br><span class=\"line\">        jssc.awaitTermination();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上述代码采用了 kafka inputStream<br>transform 算子  mapPartitionsToPair  updateStateByKey<br>启用了checkpoint</p>\n<p>针对spark-streaming 主要的内容还是对</p>\n<h2 id=\"共享变量\"><a href=\"#共享变量\" class=\"headerlink\" title=\"共享变量\"></a>共享变量</h2><ol>\n<li>累加器</li>\n<li>广播变量</li>\n</ol>\n<h2 id=\"spark-windows参数\"><a href=\"#spark-windows参数\" class=\"headerlink\" title=\"spark windows参数\"></a>spark windows参数</h2>","encrypt":true},{"_content":"# shell collect\n\n\n/Users/wqkenqing/Library/Preferences/IntelliJIdea2019.3/scratches\n\n","source":"_posts/王阁/技术/编程/bash/shell积累.md","raw":"# shell collect\n\n\n/Users/wqkenqing/Library/Preferences/IntelliJIdea2019.3/scratches\n\n","slug":"王阁/技术/编程/bash/shell积累","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/编程/bash/shell积累","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgt006lu6pw5eydgyrm","content":"<h1 id=\"shell-collect\"><a href=\"#shell-collect\" class=\"headerlink\" title=\"shell collect\"></a>shell collect</h1><p>/Users/wqkenqing/Library/Preferences/IntelliJIdea2019.3/scratches</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"shell-collect\"><a href=\"#shell-collect\" class=\"headerlink\" title=\"shell collect\"></a>shell collect</h1><p>/Users/wqkenqing/Library/Preferences/IntelliJIdea2019.3/scratches</p>\n"},{"_content":"9 @(私有集群的搭建)\n###私有集群搭建\n一、服务器的准备\n* 阿里云实例（115.29.97.126）\n* 华为云实例（114.115.203.81）\n* 阿里云实例2(115.29.35.125）\n* 本机实例（）\n1.1）服务器环境设置\n修改服务器hostname\n* 阿里（wqkenqing）\n* 华为（wqkenqing02）\n* 阿里2(wqkenqing03)\n* 虚拟机（wqkneqing04）\n[hostname修改教程](http://blog.csdn.net/huangxy10/article/details/40213095)\n***\n1.2）配置语言环境（取的默认环境）\n![Alt text](./1475308903359.png)\n1.3）[关闭防火墙](https://my.oschina.net/cjun/blog/344836)\n1.4）创建hadoop用户\n1.5）上传相关文件(jdk1.7、hadoop2.7.2)\n***\n1.6）配置环境变量\n**\nexport JAVA_HOME=/usr/local/jdk1.7\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib\n\nexport PATH=${JAVA_HOME}/bin:$PATH **\n***\n1.7）配置免密码登陆\n\t1)实现本机ssh免秘钥登录：\n* $ ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa\n* $ cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys\n* chmod 700 ~/.ssh/authorized_keys\n***\n2)实现集群ssh免秘钥登录\n+ 写入每一个集群机器秘钥到主NN 的authorized_keys中 ssh hadoopXXX 'cat /home/hadoop/.ssh/id_dsa.pub' >> ~/.ssh/authorized_keys\n+  覆盖所有集群机器authorized_keys：scp ~/.ssh/authorized_keys hadoopXXX:/home/hadoop/.ssh/authorized_keys\n\n二、hadoop配置\n2.1）配置hadoop环境\nexport HADOOP_HOME=/usr/local/hadoop/hadoop\n\nexport HIVE_HOME=/usr/local/hadoop/hive\n\nexport HBASE_HOME=/usr/local/hadoop/hbase\n\nPATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HBASE_HOME/bin:$HIVE_HOME/bin\n***\nhadoop配置文件配置\n2.1）wqkenqing节点（以后作为name节点）\n**修改 /home/hadoop/etc/hadoop/ core-site.xml**\n在 <configuration> 块儿中添加：\n\n<property>\n\n<name>fs.defaultFS</name>\n\n<value>hdfs://wqkenqing.com:9000</value>\n\n</property>\n\n<property>\n\n<name>hadoop.tmp.dir</name>\n\n<value>file:/home/hadoop/tmp</value>\n\n</property>\n\n<property>\n\n<name>io.file.buffer.size</name>\n\n<value>131702</value>\n\n<!-- 指定zookeeper地址 -->  \n    <property>  \n        <name>ha.zookeeper.quorum</name>  \n        <value>wqkenqing.com:2181,wqkenqing02.com:2181</value>  \n    </property>  \n</property>\n***\n**修改 /home/hadoop/etc/hadoop/ hdfs-site.xml**\n在 <configuration> 块儿中添加：\n\n<property>\n\n<name>dfs.namenode.name.dir</name>\n\n<value>file:/home/hadoop/hdfs/name</value>\n\n</property>\n\n<property>\n\n<name>dfs.datanode.data.dir</name>\n\n<value>file:/home/hadoop/hdfs/data</value>\n\n</property>\n\n<property>\n\n<name>dfs.replication</name>\n\n<value>2</value>\n\n</property>\n\n<property>\n\n<name>dfs.namenode.secondary.http-address</name>\n\n<value>wqkenqing.com:9001</value>\n\n</property>\n\n<property>\n\n<name>dfs.webhdfs.enabled</name>\n\n<value>true</value>\n</property>\n***\n <!--指定hdfs的nameservice为mycluster，需要和core-site.xml中的保持一致 -->  \n    <property>  \n        <name>dfs.nameservices</name>  \n        <value>wqkenqing.com</value>  \n    </property>  \n\n    <!-- mycluster下面有两个NameNode，分别是nn1，nn2 -->  \n    <property>  \n     <name>dfs.ha.namenodes.mycluster</name>  \n        <value>wqkenqing,wqkenqing02</value>  \n    </property>  \n\n    <!-- nn1的RPC通信地址 -->  \n    <property>  \n        <name>dfs.namenode.rpc-address.mycluster.nn1</name>  \n        <value>wqkenqing:9000</value>  \n    </property>  \n\n    <!-- nn1的http通信地址 -->  \n    <property>  \n        <name>dfs.namenode.http-address.mycluster.nn1</name>  \n        <value>h1m1:50070</value>  \n    </property>  \n\n    <!-- nn2的RPC通信地址 -->  \n    <property>  \n        <name>dfs.namenode.rpc-address.mycluster.nn2</name>  \n        <value>wqkenqing02:9000</value>  \n    </property>  \n\n    <!-- nn2的http通信地址 -->  \n    <property>  \n        <name>dfs.namenode.http-address.mycluster.nn2</name>  \n        <value>wqkenqing02:50070</value>  \n    </property>  \n\n    <!-- 指定NameNode的元数据在JournalNode上的存放位置 -->  \n    <property>  \n        <name>dfs.namenode.shared.edits.dir</name>  \n        <value>qjournal://wqkenqing:8485;wqkenqing02:8485/mycluster</value>  \n    </property>  \n\n    <!-- 指定JournalNode在本地磁盘存放数据的位置 -->  \n    <property>  \n        <name>dfs.journalnode.edits.dir</name>  \n        <value>/usr/lib/hadoop/journal</value>  \n    </property>  \n\n    <!-- 开启NameNode失败自动切换 -->  \n    <property>  \n        <name>dfs.ha.automatic-failover.enabled</name>  \n        <value>true</value>  \n    </property>  \n\n    <!-- 配置失败自动切换实现方式 -->  \n    <property>  \n        <name>dfs.client.failover.proxy.provider.mycluster</name>  \n        <value>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</value>  \n    </property>  \n\n    <!-- 配置隔离机制方法，多个机制用换行分割，即每个机制暂用一行-->  \n    <property>  \n        <name>dfs.ha.fencing.methods</name>  \n        <value>  \n            sshfence  \n            shell(/bin/true)  \n        </value>  \n    </property>  \n\n    <!-- 使用sshfence隔离机制时需要ssh免登陆 -->  \n    <property>  \n        <name>dfs.ha.fencing.ssh.private-key-files</name>  \n        <value>/home/hadoop/.ssh/id_rsa</value>  \n    </property>  \n\n    <!-- 配置sshfence隔离机制超时时间 -->  \n    <property>  \n        <name>dfs.ha.fencing.ssh.connect-timeout</name>  \n        <value>30000</value>  \n    </property>\n***\n**修改 /home/hadoop/etc/hadoop/ mapred-site.xml**\n这个文件默认不存在，需要从 mapred-site.xml.template 复制过来\n在 <configuration> 块儿中添加：\n\n<property>\n\n<name>mapreduce.framework.name</name>\n\n<value>yarn</value>\n\n</property>\n\n<property>\n\n<name>mapreduce.jobhistory.address</name>\n\n<value>wqkenqing:10020</value>\n\n</property>\n\n<property>\n\n<name>mapreduce.jobhistory.webapp.address</name>\n\n<value>wqkenqing:19888</value>\n\n</property>\n***\n**修改 /home/hadoop/etc/hadoop/ yarn-site.xml**\n在 <configuration> 块儿中添加：\n\n<property>\n\n<name>yarn.nodemanager.aux-services</name>\n\n<value>mapreduce_shuffle</value>\n\n</property>\n\n<property>\n\n<name>yarn.nodemanager.auxservices.mapreduce.shuffle.class</name>\n\n<value>org.apache.hadoop.mapred.ShuffleHandler</value>\n\n</property>\n\n<property>\n\n<name>yarn.resourcemanager.address</name>\n\n<value>wqkenqing:8032</value>\n\n</property>\n\n<property>\n\n<name>yarn.resourcemanager.scheduler.address</name>\n\n<value>wqkenqing:8030</value>\n\n</property>\n\n<property>\n\n<name>yarn.resourcemanager.resource-tracker.address</name>\n\n<value>wqkenqing:8031</value>\n\n</property>\n\n<property>\n\n<name>yarn.resourcemanager.admin.address</name>\n\n<value>wqkenqing:8033</value>\n\n</property>\n\n<property>\n\n<name>yarn.resourcemanager.webapp.address</name>\n\n<value>wqkenqing:8088</value>\n\n</property>\n***\n**修改 /home/hadoop/etc/hadoop/ slaves**\n\n删除已有内容，添加：\nwqkenqing02（data节点）\n\n***\nhttp://115.29.97.126:50070/\n***\n**启动 hadoop**\n在master启动hadoop，从节点会自动启动\n**初始化**\n\thadoop-daemon.sh start journalnode\n$ hdfs namenode -format\n$ hadoop-daemon.sh start namenode\n$ hadoop-daemon.sh start datanode\n$ start-dfs.sh\n$ start-yarn.sh\n***\n启动报错\n**java.io.IOException: All specified directories are failed to load.**\n解决方式：配置文件中的地址书写有问题\n***\n至此hadoop集群中的关键功能已经实现\n* hdfs\n* mapreudce\n[集群配置参考文献](http://www.tuicool.com/articles/uAnyEfj)\n***\nhadoop220集群运行状态：\n![Alt text](./1475419804382.png)\n\n[同步时钟参考文献](http://f.dataguru.cn/thread-475940-1-1.html)\n###hbase集成(尚未完成)\n* [hadoop集群搭建参考文献](http://www.linuxidc.com/Linux/2013-06/86347p4.htm)\n*\n\n***\n###hbase集群启动指令\n* start-hbase.sh\n* [hbase中的zookeeper使用教程](http://blog.csdn.net/korder/article/details/47403801)\n\n###集群重置\n* hadoop配置完成(ali1+ali2)\n* 添加hbase\n","source":"_posts/王阁/技术/大数据/集群/私有集群.md","raw":"9 @(私有集群的搭建)\n###私有集群搭建\n一、服务器的准备\n* 阿里云实例（115.29.97.126）\n* 华为云实例（114.115.203.81）\n* 阿里云实例2(115.29.35.125）\n* 本机实例（）\n1.1）服务器环境设置\n修改服务器hostname\n* 阿里（wqkenqing）\n* 华为（wqkenqing02）\n* 阿里2(wqkenqing03)\n* 虚拟机（wqkneqing04）\n[hostname修改教程](http://blog.csdn.net/huangxy10/article/details/40213095)\n***\n1.2）配置语言环境（取的默认环境）\n![Alt text](./1475308903359.png)\n1.3）[关闭防火墙](https://my.oschina.net/cjun/blog/344836)\n1.4）创建hadoop用户\n1.5）上传相关文件(jdk1.7、hadoop2.7.2)\n***\n1.6）配置环境变量\n**\nexport JAVA_HOME=/usr/local/jdk1.7\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib\n\nexport PATH=${JAVA_HOME}/bin:$PATH **\n***\n1.7）配置免密码登陆\n\t1)实现本机ssh免秘钥登录：\n* $ ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa\n* $ cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys\n* chmod 700 ~/.ssh/authorized_keys\n***\n2)实现集群ssh免秘钥登录\n+ 写入每一个集群机器秘钥到主NN 的authorized_keys中 ssh hadoopXXX 'cat /home/hadoop/.ssh/id_dsa.pub' >> ~/.ssh/authorized_keys\n+  覆盖所有集群机器authorized_keys：scp ~/.ssh/authorized_keys hadoopXXX:/home/hadoop/.ssh/authorized_keys\n\n二、hadoop配置\n2.1）配置hadoop环境\nexport HADOOP_HOME=/usr/local/hadoop/hadoop\n\nexport HIVE_HOME=/usr/local/hadoop/hive\n\nexport HBASE_HOME=/usr/local/hadoop/hbase\n\nPATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HBASE_HOME/bin:$HIVE_HOME/bin\n***\nhadoop配置文件配置\n2.1）wqkenqing节点（以后作为name节点）\n**修改 /home/hadoop/etc/hadoop/ core-site.xml**\n在 <configuration> 块儿中添加：\n\n<property>\n\n<name>fs.defaultFS</name>\n\n<value>hdfs://wqkenqing.com:9000</value>\n\n</property>\n\n<property>\n\n<name>hadoop.tmp.dir</name>\n\n<value>file:/home/hadoop/tmp</value>\n\n</property>\n\n<property>\n\n<name>io.file.buffer.size</name>\n\n<value>131702</value>\n\n<!-- 指定zookeeper地址 -->  \n    <property>  \n        <name>ha.zookeeper.quorum</name>  \n        <value>wqkenqing.com:2181,wqkenqing02.com:2181</value>  \n    </property>  \n</property>\n***\n**修改 /home/hadoop/etc/hadoop/ hdfs-site.xml**\n在 <configuration> 块儿中添加：\n\n<property>\n\n<name>dfs.namenode.name.dir</name>\n\n<value>file:/home/hadoop/hdfs/name</value>\n\n</property>\n\n<property>\n\n<name>dfs.datanode.data.dir</name>\n\n<value>file:/home/hadoop/hdfs/data</value>\n\n</property>\n\n<property>\n\n<name>dfs.replication</name>\n\n<value>2</value>\n\n</property>\n\n<property>\n\n<name>dfs.namenode.secondary.http-address</name>\n\n<value>wqkenqing.com:9001</value>\n\n</property>\n\n<property>\n\n<name>dfs.webhdfs.enabled</name>\n\n<value>true</value>\n</property>\n***\n <!--指定hdfs的nameservice为mycluster，需要和core-site.xml中的保持一致 -->  \n    <property>  \n        <name>dfs.nameservices</name>  \n        <value>wqkenqing.com</value>  \n    </property>  \n\n    <!-- mycluster下面有两个NameNode，分别是nn1，nn2 -->  \n    <property>  \n     <name>dfs.ha.namenodes.mycluster</name>  \n        <value>wqkenqing,wqkenqing02</value>  \n    </property>  \n\n    <!-- nn1的RPC通信地址 -->  \n    <property>  \n        <name>dfs.namenode.rpc-address.mycluster.nn1</name>  \n        <value>wqkenqing:9000</value>  \n    </property>  \n\n    <!-- nn1的http通信地址 -->  \n    <property>  \n        <name>dfs.namenode.http-address.mycluster.nn1</name>  \n        <value>h1m1:50070</value>  \n    </property>  \n\n    <!-- nn2的RPC通信地址 -->  \n    <property>  \n        <name>dfs.namenode.rpc-address.mycluster.nn2</name>  \n        <value>wqkenqing02:9000</value>  \n    </property>  \n\n    <!-- nn2的http通信地址 -->  \n    <property>  \n        <name>dfs.namenode.http-address.mycluster.nn2</name>  \n        <value>wqkenqing02:50070</value>  \n    </property>  \n\n    <!-- 指定NameNode的元数据在JournalNode上的存放位置 -->  \n    <property>  \n        <name>dfs.namenode.shared.edits.dir</name>  \n        <value>qjournal://wqkenqing:8485;wqkenqing02:8485/mycluster</value>  \n    </property>  \n\n    <!-- 指定JournalNode在本地磁盘存放数据的位置 -->  \n    <property>  \n        <name>dfs.journalnode.edits.dir</name>  \n        <value>/usr/lib/hadoop/journal</value>  \n    </property>  \n\n    <!-- 开启NameNode失败自动切换 -->  \n    <property>  \n        <name>dfs.ha.automatic-failover.enabled</name>  \n        <value>true</value>  \n    </property>  \n\n    <!-- 配置失败自动切换实现方式 -->  \n    <property>  \n        <name>dfs.client.failover.proxy.provider.mycluster</name>  \n        <value>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider</value>  \n    </property>  \n\n    <!-- 配置隔离机制方法，多个机制用换行分割，即每个机制暂用一行-->  \n    <property>  \n        <name>dfs.ha.fencing.methods</name>  \n        <value>  \n            sshfence  \n            shell(/bin/true)  \n        </value>  \n    </property>  \n\n    <!-- 使用sshfence隔离机制时需要ssh免登陆 -->  \n    <property>  \n        <name>dfs.ha.fencing.ssh.private-key-files</name>  \n        <value>/home/hadoop/.ssh/id_rsa</value>  \n    </property>  \n\n    <!-- 配置sshfence隔离机制超时时间 -->  \n    <property>  \n        <name>dfs.ha.fencing.ssh.connect-timeout</name>  \n        <value>30000</value>  \n    </property>\n***\n**修改 /home/hadoop/etc/hadoop/ mapred-site.xml**\n这个文件默认不存在，需要从 mapred-site.xml.template 复制过来\n在 <configuration> 块儿中添加：\n\n<property>\n\n<name>mapreduce.framework.name</name>\n\n<value>yarn</value>\n\n</property>\n\n<property>\n\n<name>mapreduce.jobhistory.address</name>\n\n<value>wqkenqing:10020</value>\n\n</property>\n\n<property>\n\n<name>mapreduce.jobhistory.webapp.address</name>\n\n<value>wqkenqing:19888</value>\n\n</property>\n***\n**修改 /home/hadoop/etc/hadoop/ yarn-site.xml**\n在 <configuration> 块儿中添加：\n\n<property>\n\n<name>yarn.nodemanager.aux-services</name>\n\n<value>mapreduce_shuffle</value>\n\n</property>\n\n<property>\n\n<name>yarn.nodemanager.auxservices.mapreduce.shuffle.class</name>\n\n<value>org.apache.hadoop.mapred.ShuffleHandler</value>\n\n</property>\n\n<property>\n\n<name>yarn.resourcemanager.address</name>\n\n<value>wqkenqing:8032</value>\n\n</property>\n\n<property>\n\n<name>yarn.resourcemanager.scheduler.address</name>\n\n<value>wqkenqing:8030</value>\n\n</property>\n\n<property>\n\n<name>yarn.resourcemanager.resource-tracker.address</name>\n\n<value>wqkenqing:8031</value>\n\n</property>\n\n<property>\n\n<name>yarn.resourcemanager.admin.address</name>\n\n<value>wqkenqing:8033</value>\n\n</property>\n\n<property>\n\n<name>yarn.resourcemanager.webapp.address</name>\n\n<value>wqkenqing:8088</value>\n\n</property>\n***\n**修改 /home/hadoop/etc/hadoop/ slaves**\n\n删除已有内容，添加：\nwqkenqing02（data节点）\n\n***\nhttp://115.29.97.126:50070/\n***\n**启动 hadoop**\n在master启动hadoop，从节点会自动启动\n**初始化**\n\thadoop-daemon.sh start journalnode\n$ hdfs namenode -format\n$ hadoop-daemon.sh start namenode\n$ hadoop-daemon.sh start datanode\n$ start-dfs.sh\n$ start-yarn.sh\n***\n启动报错\n**java.io.IOException: All specified directories are failed to load.**\n解决方式：配置文件中的地址书写有问题\n***\n至此hadoop集群中的关键功能已经实现\n* hdfs\n* mapreudce\n[集群配置参考文献](http://www.tuicool.com/articles/uAnyEfj)\n***\nhadoop220集群运行状态：\n![Alt text](./1475419804382.png)\n\n[同步时钟参考文献](http://f.dataguru.cn/thread-475940-1-1.html)\n###hbase集成(尚未完成)\n* [hadoop集群搭建参考文献](http://www.linuxidc.com/Linux/2013-06/86347p4.htm)\n*\n\n***\n###hbase集群启动指令\n* start-hbase.sh\n* [hbase中的zookeeper使用教程](http://blog.csdn.net/korder/article/details/47403801)\n\n###集群重置\n* hadoop配置完成(ali1+ali2)\n* 添加hbase\n","slug":"王阁/技术/大数据/集群/私有集群","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/大数据/集群/私有集群","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgu006nu6pwbt93eo8l","content":"<p>9 @(私有集群的搭建)<br>###私有集群搭建<br>一、服务器的准备</p>\n<ul>\n<li>阿里云实例（115.29.97.126）</li>\n<li>华为云实例（114.115.203.81）</li>\n<li>阿里云实例2(115.29.35.125）</li>\n<li>本机实例（）</li>\n</ul>\n<p>1.1）服务器环境设置<br>修改服务器hostname</p>\n<ul>\n<li>阿里（wqkenqing）</li>\n<li>华为（wqkenqing02）</li>\n<li>阿里2(wqkenqing03)</li>\n<li>虚拟机（wqkneqing04）<br><a href=\"http://blog.csdn.net/huangxy10/article/details/40213095\" target=\"_blank\" rel=\"noopener\">hostname修改教程</a></li>\n</ul>\n<hr>\n<p>1.2）配置语言环境（取的默认环境）<br><img src=\"./1475308903359.png\" alt=\"Alt text\"><br>1.3）<a href=\"https://my.oschina.net/cjun/blog/344836\" target=\"_blank\" rel=\"noopener\">关闭防火墙</a><br>1.4）创建hadoop用户<br>1.5）上传相关文件(jdk1.7、hadoop2.7.2)</p>\n<hr>\n<p>1.6）配置环境变量<br>**<br>export JAVA_HOME=/usr/local/jdk1.7<br>export JRE_HOME=${JAVA_HOME}/jre<br>export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib</p>\n<p>export PATH=${JAVA_HOME}/bin:$PATH **</p>\n<hr>\n<p>1.7）配置免密码登陆<br>    1)实现本机ssh免秘钥登录：</p>\n<ul>\n<li>$ ssh-keygen -t dsa -P ‘’ -f ~/.ssh/id_dsa</li>\n<li>$ cat ~/.ssh/id_dsa.pub &gt;&gt; ~/.ssh/authorized_keys</li>\n<li>chmod 700 ~/.ssh/authorized_keys</li>\n</ul>\n<hr>\n<p>2)实现集群ssh免秘钥登录</p>\n<ul>\n<li>写入每一个集群机器秘钥到主NN 的authorized_keys中 ssh hadoopXXX ‘cat /home/hadoop/.ssh/id_dsa.pub’ &gt;&gt; ~/.ssh/authorized_keys</li>\n<li>覆盖所有集群机器authorized_keys：scp ~/.ssh/authorized_keys hadoopXXX:/home/hadoop/.ssh/authorized_keys</li>\n</ul>\n<p>二、hadoop配置<br>2.1）配置hadoop环境<br>export HADOOP_HOME=/usr/local/hadoop/hadoop</p>\n<p>export HIVE_HOME=/usr/local/hadoop/hive</p>\n<p>export HBASE_HOME=/usr/local/hadoop/hbase</p>\n<p>PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HBASE_HOME/bin:$HIVE_HOME/bin</p>\n<hr>\n<p>hadoop配置文件配置<br>2.1）wqkenqing节点（以后作为name节点）<br><strong>修改 /home/hadoop/etc/hadoop/ core-site.xml</strong><br>在 <configuration> 块儿中添加：</p>\n<property>\n\n<p><name>fs.defaultFS</name></p>\n<p><value>hdfs://wqkenqing.com:9000</value></p>\n</property>\n\n<property>\n\n<p><name>hadoop.tmp.dir</name></p>\n<p><value>file:/home/hadoop/tmp</value></p>\n</property>\n\n<property>\n\n<p><name>io.file.buffer.size</name></p>\n<p><value>131702</value></p>\n<!-- 指定zookeeper地址 -->  \n<pre><code>&lt;property&gt;  \n    &lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;  \n    &lt;value&gt;wqkenqing.com:2181,wqkenqing02.com:2181&lt;/value&gt;  \n&lt;/property&gt;  </code></pre></property>\n***\n**修改 /home/hadoop/etc/hadoop/ hdfs-site.xml**\n在 <configuration> 块儿中添加：\n\n<property>\n\n<p><name>dfs.namenode.name.dir</name></p>\n<p><value>file:/home/hadoop/hdfs/name</value></p>\n</property>\n\n<property>\n\n<p><name>dfs.datanode.data.dir</name></p>\n<p><value>file:/home/hadoop/hdfs/data</value></p>\n</property>\n\n<property>\n\n<p><name>dfs.replication</name></p>\n<p><value>2</value></p>\n</property>\n\n<property>\n\n<p><name>dfs.namenode.secondary.http-address</name></p>\n<p><value>wqkenqing.com:9001</value></p>\n</property>\n\n<property>\n\n<p><name>dfs.webhdfs.enabled</name></p>\n<p><value>true</value><br></property></p>\n<hr>\n <!--指定hdfs的nameservice为mycluster，需要和core-site.xml中的保持一致 -->  \n<pre><code>&lt;property&gt;  \n    &lt;name&gt;dfs.nameservices&lt;/name&gt;  \n    &lt;value&gt;wqkenqing.com&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- mycluster下面有两个NameNode，分别是nn1，nn2 --&gt;  \n&lt;property&gt;  \n &lt;name&gt;dfs.ha.namenodes.mycluster&lt;/name&gt;  \n    &lt;value&gt;wqkenqing,wqkenqing02&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- nn1的RPC通信地址 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.namenode.rpc-address.mycluster.nn1&lt;/name&gt;  \n    &lt;value&gt;wqkenqing:9000&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- nn1的http通信地址 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.namenode.http-address.mycluster.nn1&lt;/name&gt;  \n    &lt;value&gt;h1m1:50070&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- nn2的RPC通信地址 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.namenode.rpc-address.mycluster.nn2&lt;/name&gt;  \n    &lt;value&gt;wqkenqing02:9000&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- nn2的http通信地址 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.namenode.http-address.mycluster.nn2&lt;/name&gt;  \n    &lt;value&gt;wqkenqing02:50070&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 指定NameNode的元数据在JournalNode上的存放位置 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;  \n    &lt;value&gt;qjournal://wqkenqing:8485;wqkenqing02:8485/mycluster&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 指定JournalNode在本地磁盘存放数据的位置 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;  \n    &lt;value&gt;/usr/lib/hadoop/journal&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 开启NameNode失败自动切换 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;  \n    &lt;value&gt;true&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 配置失败自动切换实现方式 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.client.failover.proxy.provider.mycluster&lt;/name&gt;  \n    &lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 配置隔离机制方法，多个机制用换行分割，即每个机制暂用一行--&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;  \n    &lt;value&gt;  \n        sshfence  \n        shell(/bin/true)  \n    &lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 使用sshfence隔离机制时需要ssh免登陆 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt;  \n    &lt;value&gt;/home/hadoop/.ssh/id_rsa&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 配置sshfence隔离机制超时时间 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.ha.fencing.ssh.connect-timeout&lt;/name&gt;  \n    &lt;value&gt;30000&lt;/value&gt;  \n&lt;/property&gt;</code></pre><hr>\n<p><strong>修改 /home/hadoop/etc/hadoop/ mapred-site.xml</strong><br>这个文件默认不存在，需要从 mapred-site.xml.template 复制过来<br>在 <configuration> 块儿中添加：</p>\n<property>\n\n<p><name>mapreduce.framework.name</name></p>\n<p><value>yarn</value></p>\n</property>\n\n<property>\n\n<p><name>mapreduce.jobhistory.address</name></p>\n<p><value>wqkenqing:10020</value></p>\n</property>\n\n<property>\n\n<p><name>mapreduce.jobhistory.webapp.address</name></p>\n<p><value>wqkenqing:19888</value></p>\n</property>\n***\n**修改 /home/hadoop/etc/hadoop/ yarn-site.xml**\n在 <configuration> 块儿中添加：\n\n<property>\n\n<p><name>yarn.nodemanager.aux-services</name></p>\n<p><value>mapreduce_shuffle</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.nodemanager.auxservices.mapreduce.shuffle.class</name></p>\n<p><value>org.apache.hadoop.mapred.ShuffleHandler</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.resourcemanager.address</name></p>\n<p><value>wqkenqing:8032</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.resourcemanager.scheduler.address</name></p>\n<p><value>wqkenqing:8030</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.resourcemanager.resource-tracker.address</name></p>\n<p><value>wqkenqing:8031</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.resourcemanager.admin.address</name></p>\n<p><value>wqkenqing:8033</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.resourcemanager.webapp.address</name></p>\n<p><value>wqkenqing:8088</value></p>\n</property>\n***\n**修改 /home/hadoop/etc/hadoop/ slaves**\n\n<p>删除已有内容，添加：<br>wqkenqing02（data节点）</p>\n<hr>\n<p><a href=\"http://115.29.97.126:50070/\" target=\"_blank\" rel=\"noopener\">http://115.29.97.126:50070/</a></p>\n<hr>\n<p><strong>启动 hadoop</strong><br>在master启动hadoop，从节点会自动启动<br><strong>初始化</strong><br>    hadoop-daemon.sh start journalnode<br>$ hdfs namenode -format<br>$ hadoop-daemon.sh start namenode<br>$ hadoop-daemon.sh start datanode<br>$ start-dfs.sh<br>$ start-yarn.sh</p>\n<hr>\n<p>启动报错<br><strong>java.io.IOException: All specified directories are failed to load.</strong><br>解决方式：配置文件中的地址书写有问题</p>\n<hr>\n<p>至此hadoop集群中的关键功能已经实现</p>\n<ul>\n<li>hdfs</li>\n<li>mapreudce<br><a href=\"http://www.tuicool.com/articles/uAnyEfj\" target=\"_blank\" rel=\"noopener\">集群配置参考文献</a></li>\n</ul>\n<hr>\n<p>hadoop220集群运行状态：<br><img src=\"./1475419804382.png\" alt=\"Alt text\"></p>\n<p><a href=\"http://f.dataguru.cn/thread-475940-1-1.html\" target=\"_blank\" rel=\"noopener\">同步时钟参考文献</a><br>###hbase集成(尚未完成)</p>\n<ul>\n<li><a href=\"http://www.linuxidc.com/Linux/2013-06/86347p4.htm\" target=\"_blank\" rel=\"noopener\">hadoop集群搭建参考文献</a></li>\n<li></li>\n</ul>\n<hr>\n<p>###hbase集群启动指令</p>\n<ul>\n<li>start-hbase.sh</li>\n<li><a href=\"http://blog.csdn.net/korder/article/details/47403801\" target=\"_blank\" rel=\"noopener\">hbase中的zookeeper使用教程</a></li>\n</ul>\n<p>###集群重置</p>\n<ul>\n<li>hadoop配置完成(ali1+ali2)</li>\n<li>添加hbase</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>9 @(私有集群的搭建)<br>###私有集群搭建<br>一、服务器的准备</p>\n<ul>\n<li>阿里云实例（115.29.97.126）</li>\n<li>华为云实例（114.115.203.81）</li>\n<li>阿里云实例2(115.29.35.125）</li>\n<li>本机实例（）</li>\n</ul>\n<p>1.1）服务器环境设置<br>修改服务器hostname</p>\n<ul>\n<li>阿里（wqkenqing）</li>\n<li>华为（wqkenqing02）</li>\n<li>阿里2(wqkenqing03)</li>\n<li>虚拟机（wqkneqing04）<br><a href=\"http://blog.csdn.net/huangxy10/article/details/40213095\" target=\"_blank\" rel=\"noopener\">hostname修改教程</a></li>\n</ul>\n<hr>\n<p>1.2）配置语言环境（取的默认环境）<br><img src=\"./1475308903359.png\" alt=\"Alt text\"><br>1.3）<a href=\"https://my.oschina.net/cjun/blog/344836\" target=\"_blank\" rel=\"noopener\">关闭防火墙</a><br>1.4）创建hadoop用户<br>1.5）上传相关文件(jdk1.7、hadoop2.7.2)</p>\n<hr>\n<p>1.6）配置环境变量<br>**<br>export JAVA_HOME=/usr/local/jdk1.7<br>export JRE_HOME=${JAVA_HOME}/jre<br>export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib</p>\n<p>export PATH=${JAVA_HOME}/bin:$PATH **</p>\n<hr>\n<p>1.7）配置免密码登陆<br>    1)实现本机ssh免秘钥登录：</p>\n<ul>\n<li>$ ssh-keygen -t dsa -P ‘’ -f ~/.ssh/id_dsa</li>\n<li>$ cat ~/.ssh/id_dsa.pub &gt;&gt; ~/.ssh/authorized_keys</li>\n<li>chmod 700 ~/.ssh/authorized_keys</li>\n</ul>\n<hr>\n<p>2)实现集群ssh免秘钥登录</p>\n<ul>\n<li>写入每一个集群机器秘钥到主NN 的authorized_keys中 ssh hadoopXXX ‘cat /home/hadoop/.ssh/id_dsa.pub’ &gt;&gt; ~/.ssh/authorized_keys</li>\n<li>覆盖所有集群机器authorized_keys：scp ~/.ssh/authorized_keys hadoopXXX:/home/hadoop/.ssh/authorized_keys</li>\n</ul>\n<p>二、hadoop配置<br>2.1）配置hadoop环境<br>export HADOOP_HOME=/usr/local/hadoop/hadoop</p>\n<p>export HIVE_HOME=/usr/local/hadoop/hive</p>\n<p>export HBASE_HOME=/usr/local/hadoop/hbase</p>\n<p>PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HBASE_HOME/bin:$HIVE_HOME/bin</p>\n<hr>\n<p>hadoop配置文件配置<br>2.1）wqkenqing节点（以后作为name节点）<br><strong>修改 /home/hadoop/etc/hadoop/ core-site.xml</strong><br>在 <configuration> 块儿中添加：</p>\n<property>\n\n<p><name>fs.defaultFS</name></p>\n<p><value>hdfs://wqkenqing.com:9000</value></p>\n</property>\n\n<property>\n\n<p><name>hadoop.tmp.dir</name></p>\n<p><value>file:/home/hadoop/tmp</value></p>\n</property>\n\n<property>\n\n<p><name>io.file.buffer.size</name></p>\n<p><value>131702</value></p>\n<!-- 指定zookeeper地址 -->  \n<pre><code>&lt;property&gt;  \n    &lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;  \n    &lt;value&gt;wqkenqing.com:2181,wqkenqing02.com:2181&lt;/value&gt;  \n&lt;/property&gt;  </code></pre></property>\n***\n**修改 /home/hadoop/etc/hadoop/ hdfs-site.xml**\n在 <configuration> 块儿中添加：\n\n<property>\n\n<p><name>dfs.namenode.name.dir</name></p>\n<p><value>file:/home/hadoop/hdfs/name</value></p>\n</property>\n\n<property>\n\n<p><name>dfs.datanode.data.dir</name></p>\n<p><value>file:/home/hadoop/hdfs/data</value></p>\n</property>\n\n<property>\n\n<p><name>dfs.replication</name></p>\n<p><value>2</value></p>\n</property>\n\n<property>\n\n<p><name>dfs.namenode.secondary.http-address</name></p>\n<p><value>wqkenqing.com:9001</value></p>\n</property>\n\n<property>\n\n<p><name>dfs.webhdfs.enabled</name></p>\n<p><value>true</value><br></property></p>\n<hr>\n <!--指定hdfs的nameservice为mycluster，需要和core-site.xml中的保持一致 -->  \n<pre><code>&lt;property&gt;  \n    &lt;name&gt;dfs.nameservices&lt;/name&gt;  \n    &lt;value&gt;wqkenqing.com&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- mycluster下面有两个NameNode，分别是nn1，nn2 --&gt;  \n&lt;property&gt;  \n &lt;name&gt;dfs.ha.namenodes.mycluster&lt;/name&gt;  \n    &lt;value&gt;wqkenqing,wqkenqing02&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- nn1的RPC通信地址 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.namenode.rpc-address.mycluster.nn1&lt;/name&gt;  \n    &lt;value&gt;wqkenqing:9000&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- nn1的http通信地址 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.namenode.http-address.mycluster.nn1&lt;/name&gt;  \n    &lt;value&gt;h1m1:50070&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- nn2的RPC通信地址 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.namenode.rpc-address.mycluster.nn2&lt;/name&gt;  \n    &lt;value&gt;wqkenqing02:9000&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- nn2的http通信地址 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.namenode.http-address.mycluster.nn2&lt;/name&gt;  \n    &lt;value&gt;wqkenqing02:50070&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 指定NameNode的元数据在JournalNode上的存放位置 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;  \n    &lt;value&gt;qjournal://wqkenqing:8485;wqkenqing02:8485/mycluster&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 指定JournalNode在本地磁盘存放数据的位置 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;  \n    &lt;value&gt;/usr/lib/hadoop/journal&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 开启NameNode失败自动切换 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.ha.automatic-failover.enabled&lt;/name&gt;  \n    &lt;value&gt;true&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 配置失败自动切换实现方式 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.client.failover.proxy.provider.mycluster&lt;/name&gt;  \n    &lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 配置隔离机制方法，多个机制用换行分割，即每个机制暂用一行--&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;  \n    &lt;value&gt;  \n        sshfence  \n        shell(/bin/true)  \n    &lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 使用sshfence隔离机制时需要ssh免登陆 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt;  \n    &lt;value&gt;/home/hadoop/.ssh/id_rsa&lt;/value&gt;  \n&lt;/property&gt;  \n\n&lt;!-- 配置sshfence隔离机制超时时间 --&gt;  \n&lt;property&gt;  \n    &lt;name&gt;dfs.ha.fencing.ssh.connect-timeout&lt;/name&gt;  \n    &lt;value&gt;30000&lt;/value&gt;  \n&lt;/property&gt;</code></pre><hr>\n<p><strong>修改 /home/hadoop/etc/hadoop/ mapred-site.xml</strong><br>这个文件默认不存在，需要从 mapred-site.xml.template 复制过来<br>在 <configuration> 块儿中添加：</p>\n<property>\n\n<p><name>mapreduce.framework.name</name></p>\n<p><value>yarn</value></p>\n</property>\n\n<property>\n\n<p><name>mapreduce.jobhistory.address</name></p>\n<p><value>wqkenqing:10020</value></p>\n</property>\n\n<property>\n\n<p><name>mapreduce.jobhistory.webapp.address</name></p>\n<p><value>wqkenqing:19888</value></p>\n</property>\n***\n**修改 /home/hadoop/etc/hadoop/ yarn-site.xml**\n在 <configuration> 块儿中添加：\n\n<property>\n\n<p><name>yarn.nodemanager.aux-services</name></p>\n<p><value>mapreduce_shuffle</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.nodemanager.auxservices.mapreduce.shuffle.class</name></p>\n<p><value>org.apache.hadoop.mapred.ShuffleHandler</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.resourcemanager.address</name></p>\n<p><value>wqkenqing:8032</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.resourcemanager.scheduler.address</name></p>\n<p><value>wqkenqing:8030</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.resourcemanager.resource-tracker.address</name></p>\n<p><value>wqkenqing:8031</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.resourcemanager.admin.address</name></p>\n<p><value>wqkenqing:8033</value></p>\n</property>\n\n<property>\n\n<p><name>yarn.resourcemanager.webapp.address</name></p>\n<p><value>wqkenqing:8088</value></p>\n</property>\n***\n**修改 /home/hadoop/etc/hadoop/ slaves**\n\n<p>删除已有内容，添加：<br>wqkenqing02（data节点）</p>\n<hr>\n<p><a href=\"http://115.29.97.126:50070/\" target=\"_blank\" rel=\"noopener\">http://115.29.97.126:50070/</a></p>\n<hr>\n<p><strong>启动 hadoop</strong><br>在master启动hadoop，从节点会自动启动<br><strong>初始化</strong><br>    hadoop-daemon.sh start journalnode<br>$ hdfs namenode -format<br>$ hadoop-daemon.sh start namenode<br>$ hadoop-daemon.sh start datanode<br>$ start-dfs.sh<br>$ start-yarn.sh</p>\n<hr>\n<p>启动报错<br><strong>java.io.IOException: All specified directories are failed to load.</strong><br>解决方式：配置文件中的地址书写有问题</p>\n<hr>\n<p>至此hadoop集群中的关键功能已经实现</p>\n<ul>\n<li>hdfs</li>\n<li>mapreudce<br><a href=\"http://www.tuicool.com/articles/uAnyEfj\" target=\"_blank\" rel=\"noopener\">集群配置参考文献</a></li>\n</ul>\n<hr>\n<p>hadoop220集群运行状态：<br><img src=\"./1475419804382.png\" alt=\"Alt text\"></p>\n<p><a href=\"http://f.dataguru.cn/thread-475940-1-1.html\" target=\"_blank\" rel=\"noopener\">同步时钟参考文献</a><br>###hbase集成(尚未完成)</p>\n<ul>\n<li><a href=\"http://www.linuxidc.com/Linux/2013-06/86347p4.htm\" target=\"_blank\" rel=\"noopener\">hadoop集群搭建参考文献</a></li>\n<li></li>\n</ul>\n<hr>\n<p>###hbase集群启动指令</p>\n<ul>\n<li>start-hbase.sh</li>\n<li><a href=\"http://blog.csdn.net/korder/article/details/47403801\" target=\"_blank\" rel=\"noopener\">hbase中的zookeeper使用教程</a></li>\n</ul>\n<p>###集群重置</p>\n<ul>\n<li>hadoop配置完成(ali1+ali2)</li>\n<li>添加hbase</li>\n</ul>\n"},{"_content":"# yarn相关参数提取\n\n## rest web api\nhttp://namenode:8088/ws/v1/cluster/apps\n\n获得json对象\n\n```json\n{\n  \"apps\":{\n    \"app\":[\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"SUCCEEDED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0007\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":349,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0007\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode2:8042\",\n        \"memorySeconds\":538321,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1561963496299,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0007_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"\",\n        \"name\":\"componet_code-jar-with-dependencies.jar\",\n        \"progress\":100,\n        \"finishedTime\":1561963577074,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":80775\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"FAILED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0006\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":197,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0006\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode1:8042\",\n        \"memorySeconds\":261004,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559543218059,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0006_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"Task failed task_1558964977321_0006_m_000000\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\",\n        \"name\":\"N\\/A\",\n        \"progress\":100,\n        \"finishedTime\":1559543260162,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":42103\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"FAILED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0005\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":181,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0005\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode1:8042\",\n        \"memorySeconds\":239683,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559543157210,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0005_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"Task failed task_1558964977321_0005_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\",\n        \"name\":\"N\\/A\",\n        \"progress\":100,\n        \"finishedTime\":1559543203631,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":46421\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"FAILED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0004\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":206,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0004\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode2:8042\",\n        \"memorySeconds\":269329,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559543112981,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0004_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"Task failed task_1558964977321_0004_m_000000\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\",\n        \"name\":\"N\\/A\",\n        \"progress\":100,\n        \"finishedTime\":1559543159096,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":46115\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"FAILED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0003\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":172,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0003\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode1:8042\",\n        \"memorySeconds\":227366,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559543073374,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0003_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"Task failed task_1558964977321_0003_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\",\n        \"name\":\"N\\/A\",\n        \"progress\":100,\n        \"finishedTime\":1559543111009,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":37635\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"FAILED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0002\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":206,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0002\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode2:8042\",\n        \"memorySeconds\":267663,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559543001391,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0002_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"Task failed task_1558964977321_0002_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\",\n        \"name\":\"N\\/A\",\n        \"progress\":100,\n        \"finishedTime\":1559543043050,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":41659\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"SUCCEEDED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0001\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":411,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0001\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode1:8042\",\n        \"memorySeconds\":619025,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559197897433,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0001_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"\",\n        \"name\":\"componet_code-jar-with-dependencies.jar\",\n        \"progress\":100,\n        \"finishedTime\":1559197986948,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":89515\n      }\n    ]\n  }\n}\n\n\n```\n\n对json对象分解后获得如下字段备用\n\n| 字段名 | 含义 |\n| :--- | :----: |\n| applicationType|计算任务类型(mr spark)|\n| finalStatus|最终状态|\n| runningContainers   | 正在运行的容器    |\n\n![](http://img.wqkenqing.ren/r7lvxr.png)\n","source":"_posts/王阁/技术/大数据/yarn/YarnState.md","raw":"# yarn相关参数提取\n\n## rest web api\nhttp://namenode:8088/ws/v1/cluster/apps\n\n获得json对象\n\n```json\n{\n  \"apps\":{\n    \"app\":[\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"SUCCEEDED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0007\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":349,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0007\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode2:8042\",\n        \"memorySeconds\":538321,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1561963496299,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0007_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"\",\n        \"name\":\"componet_code-jar-with-dependencies.jar\",\n        \"progress\":100,\n        \"finishedTime\":1561963577074,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":80775\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"FAILED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0006\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":197,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0006\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode1:8042\",\n        \"memorySeconds\":261004,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559543218059,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0006_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"Task failed task_1558964977321_0006_m_000000\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\",\n        \"name\":\"N\\/A\",\n        \"progress\":100,\n        \"finishedTime\":1559543260162,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":42103\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"FAILED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0005\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":181,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0005\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode1:8042\",\n        \"memorySeconds\":239683,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559543157210,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0005_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"Task failed task_1558964977321_0005_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\",\n        \"name\":\"N\\/A\",\n        \"progress\":100,\n        \"finishedTime\":1559543203631,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":46421\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"FAILED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0004\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":206,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0004\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode2:8042\",\n        \"memorySeconds\":269329,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559543112981,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0004_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"Task failed task_1558964977321_0004_m_000000\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\",\n        \"name\":\"N\\/A\",\n        \"progress\":100,\n        \"finishedTime\":1559543159096,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":46115\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"FAILED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0003\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":172,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0003\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode1:8042\",\n        \"memorySeconds\":227366,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559543073374,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0003_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"Task failed task_1558964977321_0003_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\",\n        \"name\":\"N\\/A\",\n        \"progress\":100,\n        \"finishedTime\":1559543111009,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":37635\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"FAILED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0002\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":206,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0002\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode2:8042\",\n        \"memorySeconds\":267663,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559543001391,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0002_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"Task failed task_1558964977321_0002_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\",\n        \"name\":\"N\\/A\",\n        \"progress\":100,\n        \"finishedTime\":1559543043050,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":41659\n      },\n      {\n        \"applicationType\":\"MAPREDUCE\",\n        \"finalStatus\":\"SUCCEEDED\",\n        \"trackingUrl\":\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0001\\/\",\n        \"runningContainers\":-1,\n        \"clusterId\":1558964977321,\n        \"vcoreSeconds\":411,\n        \"preemptedResourceVCores\":0,\n        \"numAMContainerPreempted\":0,\n        \"allocatedMB\":-1,\n        \"id\":\"application_1558964977321_0001\",\n        \"state\":\"FINISHED\",\n        \"amHostHttpAddress\":\"datanode1:8042\",\n        \"memorySeconds\":619025,\n        \"preemptedResourceMB\":0,\n        \"applicationTags\":\"\",\n        \"startedTime\":1559197897433,\n        \"trackingUI\":\"History\",\n        \"numNonAMContainerPreempted\":0,\n        \"amContainerLogs\":\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0001_01_000001\\/hadoop\",\n        \"allocatedVCores\":-1,\n        \"diagnostics\":\"\",\n        \"name\":\"componet_code-jar-with-dependencies.jar\",\n        \"progress\":100,\n        \"finishedTime\":1559197986948,\n        \"user\":\"hadoop\",\n        \"queue\":\"default\",\n        \"elapsedTime\":89515\n      }\n    ]\n  }\n}\n\n\n```\n\n对json对象分解后获得如下字段备用\n\n| 字段名 | 含义 |\n| :--- | :----: |\n| applicationType|计算任务类型(mr spark)|\n| finalStatus|最终状态|\n| runningContainers   | 正在运行的容器    |\n\n![](http://img.wqkenqing.ren/r7lvxr.png)\n","slug":"王阁/技术/大数据/yarn/YarnState","published":1,"date":"2023-02-23T02:51:20.908Z","updated":"2023-02-23T02:51:20.908Z","title":"王阁/技术/大数据/yarn/YarnState","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgu006pu6pw4vju1ws5","content":"<h1 id=\"yarn相关参数提取\"><a href=\"#yarn相关参数提取\" class=\"headerlink\" title=\"yarn相关参数提取\"></a>yarn相关参数提取</h1><h2 id=\"rest-web-api\"><a href=\"#rest-web-api\" class=\"headerlink\" title=\"rest web api\"></a>rest web api</h2><p><a href=\"http://namenode:8088/ws/v1/cluster/apps\" target=\"_blank\" rel=\"noopener\">http://namenode:8088/ws/v1/cluster/apps</a></p>\n<p>获得json对象</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"apps\"</span>:&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"app\"</span>:[</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"SUCCEEDED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0007\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">349</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0007\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode2:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">538321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1561963496299</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0007_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"componet_code-jar-with-dependencies.jar\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1561963577074</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">80775</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"FAILED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0006\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">197</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0006\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode1:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">261004</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559543218059</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0006_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"Task failed task_1558964977321_0006_m_000000\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"N\\/A\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559543260162</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">42103</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"FAILED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0005\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">181</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0005\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode1:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">239683</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559543157210</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0005_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"Task failed task_1558964977321_0005_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"N\\/A\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559543203631</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">46421</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"FAILED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0004\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">206</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0004\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode2:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">269329</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559543112981</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0004_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"Task failed task_1558964977321_0004_m_000000\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"N\\/A\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559543159096</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">46115</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"FAILED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0003\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">172</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0003\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode1:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">227366</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559543073374</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0003_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"Task failed task_1558964977321_0003_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"N\\/A\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559543111009</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">37635</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"FAILED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0002\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">206</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0002\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode2:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">267663</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559543001391</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0002_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"Task failed task_1558964977321_0002_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"N\\/A\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559543043050</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">41659</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"SUCCEEDED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0001\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">411</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0001\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode1:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">619025</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559197897433</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0001_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"componet_code-jar-with-dependencies.jar\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559197986948</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">89515</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>对json对象分解后获得如下字段备用</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">字段名</th>\n<th align=\"center\">含义</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">applicationType</td>\n<td align=\"center\">计算任务类型(mr spark)</td>\n</tr>\n<tr>\n<td align=\"left\">finalStatus</td>\n<td align=\"center\">最终状态</td>\n</tr>\n<tr>\n<td align=\"left\">runningContainers</td>\n<td align=\"center\">正在运行的容器</td>\n</tr>\n</tbody></table>\n<p><img src=\"http://img.wqkenqing.ren/r7lvxr.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"yarn相关参数提取\"><a href=\"#yarn相关参数提取\" class=\"headerlink\" title=\"yarn相关参数提取\"></a>yarn相关参数提取</h1><h2 id=\"rest-web-api\"><a href=\"#rest-web-api\" class=\"headerlink\" title=\"rest web api\"></a>rest web api</h2><p><a href=\"http://namenode:8088/ws/v1/cluster/apps\" target=\"_blank\" rel=\"noopener\">http://namenode:8088/ws/v1/cluster/apps</a></p>\n<p>获得json对象</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"apps\"</span>:&#123;</span><br><span class=\"line\">    <span class=\"attr\">\"app\"</span>:[</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"SUCCEEDED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0007\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">349</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0007\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode2:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">538321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1561963496299</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0007_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"componet_code-jar-with-dependencies.jar\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1561963577074</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">80775</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"FAILED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0006\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">197</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0006\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode1:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">261004</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559543218059</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0006_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"Task failed task_1558964977321_0006_m_000000\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"N\\/A\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559543260162</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">42103</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"FAILED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0005\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">181</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0005\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode1:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">239683</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559543157210</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0005_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"Task failed task_1558964977321_0005_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"N\\/A\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559543203631</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">46421</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"FAILED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0004\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">206</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0004\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode2:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">269329</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559543112981</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0004_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"Task failed task_1558964977321_0004_m_000000\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"N\\/A\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559543159096</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">46115</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"FAILED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0003\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">172</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0003\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode1:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">227366</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559543073374</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0003_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"Task failed task_1558964977321_0003_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"N\\/A\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559543111009</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">37635</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"FAILED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0002\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">206</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0002\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode2:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">267663</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559543001391</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode2:8042\\/node\\/containerlogs\\/container_1558964977321_0002_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"Task failed task_1558964977321_0002_m_000004\\nJob failed as tasks failed. failedMaps:1 failedReduces:0\\n\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"N\\/A\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559543043050</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">41659</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"applicationType\"</span>:<span class=\"string\">\"MAPREDUCE\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finalStatus\"</span>:<span class=\"string\">\"SUCCEEDED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUrl\"</span>:<span class=\"string\">\"http:\\/\\/namenode:8088\\/proxy\\/application_1558964977321_0001\\/\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"runningContainers\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"clusterId\"</span>:<span class=\"number\">1558964977321</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"vcoreSeconds\"</span>:<span class=\"number\">411</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceVCores\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedMB\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>:<span class=\"string\">\"application_1558964977321_0001\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"state\"</span>:<span class=\"string\">\"FINISHED\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amHostHttpAddress\"</span>:<span class=\"string\">\"datanode1:8042\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"memorySeconds\"</span>:<span class=\"number\">619025</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"preemptedResourceMB\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"applicationTags\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"startedTime\"</span>:<span class=\"number\">1559197897433</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"trackingUI\"</span>:<span class=\"string\">\"History\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"numNonAMContainerPreempted\"</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"amContainerLogs\"</span>:<span class=\"string\">\"http:\\/\\/datanode1:8042\\/node\\/containerlogs\\/container_1558964977321_0001_01_000001\\/hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"allocatedVCores\"</span>:<span class=\"number\">-1</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"diagnostics\"</span>:<span class=\"string\">\"\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"name\"</span>:<span class=\"string\">\"componet_code-jar-with-dependencies.jar\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"progress\"</span>:<span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"finishedTime\"</span>:<span class=\"number\">1559197986948</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"user\"</span>:<span class=\"string\">\"hadoop\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"queue\"</span>:<span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"elapsedTime\"</span>:<span class=\"number\">89515</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>对json对象分解后获得如下字段备用</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">字段名</th>\n<th align=\"center\">含义</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">applicationType</td>\n<td align=\"center\">计算任务类型(mr spark)</td>\n</tr>\n<tr>\n<td align=\"left\">finalStatus</td>\n<td align=\"center\">最终状态</td>\n</tr>\n<tr>\n<td align=\"left\">runningContainers</td>\n<td align=\"center\">正在运行的容器</td>\n</tr>\n</tbody></table>\n<p><img src=\"http://img.wqkenqing.ren/r7lvxr.png\" alt=\"\"></p>\n"},{"_content":"```\n简单学习vue用于自用,本文主要用于记录学习进度与相关知识点\n\n```\n\n","source":"_posts/王阁/技术/开发/前端/vue学习.md","raw":"```\n简单学习vue用于自用,本文主要用于记录学习进度与相关知识点\n\n```\n\n","slug":"王阁/技术/开发/前端/vue学习","published":1,"date":"2022-06-29T06:39:26.426Z","updated":"2022-06-29T06:40:49.256Z","title":"王阁/技术/开发/前端/vue学习","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgu006qu6pw9r233hmg","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">简单学习vue用于自用,本文主要用于记录学习进度与相关知识点</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">简单学习vue用于自用,本文主要用于记录学习进度与相关知识点</span><br></pre></td></tr></table></figure>\n\n"},{"_content":"# python learn\n\n1.print 函数详细用法\n\nprint (value,...,sep='',end='\\n',file=sys.stdout,flush=False)\n\n\n\n\n","source":"_posts/王阁/技术/编程/bash/python_learn.md","raw":"# python learn\n\n1.print 函数详细用法\n\nprint (value,...,sep='',end='\\n',file=sys.stdout,flush=False)\n\n\n\n\n","slug":"王阁/技术/编程/bash/python_learn","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/编程/bash/python_learn","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgv006su6pw1ttvgnwn","content":"<h1 id=\"python-learn\"><a href=\"#python-learn\" class=\"headerlink\" title=\"python learn\"></a>python learn</h1><p>1.print 函数详细用法</p>\n<p>print (value,…,sep=’’,end=’\\n’,file=sys.stdout,flush=False)</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"python-learn\"><a href=\"#python-learn\" class=\"headerlink\" title=\"python learn\"></a>python learn</h1><p>1.print 函数详细用法</p>\n<p>print (value,…,sep=’’,end=’\\n’,file=sys.stdout,flush=False)</p>\n"},{"title":"kafka极客","date":"2020-06-14T16:00:00.000Z","_content":"kafka 极客时间\n <!--more-->\n\n ","source":"_posts/王阁/技术/大数据/kafka/kafka极客.md","raw":"title:  kafka极客\ndate: 2020-06-15\ntags: [kakfa,极客时间]\n\n---\nkafka 极客时间\n <!--more-->\n\n ","slug":"王阁/技术/大数据/kafka/kafka极客","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgv006uu6pw6iij9nu2","content":"<p>kafka 极客时间<br> <a id=\"more\"></a></p>\n","site":{"data":{}},"excerpt":"<p>kafka 极客时间<br>","more":"</p>"},{"_content":"# \n","source":"_posts/王阁/技术/编程/java/并发编程.md","raw":"# \n","slug":"王阁/技术/编程/java/并发编程","published":1,"date":"2022-06-05T06:03:09.000Z","updated":"2022-06-07T02:59:02.000Z","title":"王阁/技术/编程/java/并发编程","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgw006xu6pw751c6wq9","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1>"},{"title":"计算处理","date":"2023-02-19T16:00:00.000Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n\n> java的计算处理梳理，掌握几个常用的工具类，与处理。\n\n通过调研，常规的java计算方式有\n\n1. 运算符运算\n2. Math工具类运算\n3. BigDecimal类运用\n\n## 运算符运行\n\n``` \n+ - * / %\n\n```\n\n### 使用案例\n\n略\n\n### 注意事项\n\n优点：\n\n1. 提高代码的执行效率：使用运算符可以提高代码的执行效率，避免使用大量的条件语句和循环语句来实现相同的功能。\n2. 简化代码的书写：使用运算符可以简化代码的书写，使代码更加简洁明了。\n3. 提高程序的可读性：使用运算符可以使代码更加简单易懂，提高程序的可读性。\n\n#### 缺点\n\n可能会降低代码的可读性：\n在使用运算符时，如果没有遵循运算符的优先级规则，容易引起代码的歧义，使代码的可读性降低。例如，以下代码：\n\n```java\nint a = 2 + 3 * 4;\n\n```\n根据运算符的优先级规则，乘法运算符的优先级高于加法运算符，因此上述代码的运算结果为 14。如果将代码改为以下形式：\n\n```java\nint a = 2 + (3 * 4);\n```\n\n\n则可以明确地指定运算的顺序，使代码更加清晰易懂。\n\n可能会引发运算错误：\n如果使用运算符时没有注意边界条件或者特殊情况，容易引发运算错误。例如，以下代码：\n\n```java\nint a = 10 / 0;\n```\n\n\n在运行时会引发 ArithmeticException 异常，因为除数为 0。因此，在使用运算符时，需要特别注意边界条件和特殊情况，避免引发运算错误。\n\n可能会引起安全问题：\n某些运算符，如位运算符，可能会引起安全问题。例如，以下代码：\n\n```java\nint a = 1;\na |= 2;\n```\n\n\n在运行时，变量 a 的值会变为 3。如果 a 表示一个权限标志，那么通过位运算修改 a 的值就会造成安全问题。因此，在使用这些运算符时，需要格外小心，避免引起潜在的安全问题。\n\n### Math类的使用\n\n> 发现了取模与取余存在区别。这里要注意，后再继续研究\n\n```\n int a =-5;\n        int b = 2;\n        System.out.println(Math.abs(a));\n        System.out.println(Math.max(a, b));\n        System.out.println(Math.min(a, b));\n        System.out.println(Math.sqrt(2));\n        System.out.println(Math.subtractExact(b,a));\n        System.out.println(Math.pow(b,a));\n        System.out.println(Math.random());\n        System.out.println(Math.floorDiv(a,b));\n        System.out.println(Math.floorMod(a,b));\n        System.out.println(a - b * (a / b));\n        System.out.println(-5/2);\n```\n\n### BigDecimal的使用\n\n```java\ndouble val = 4.23;\ndouble val1 = 5.23;\nBigDecimal decimal = new BigDecimal(val);\nBigDecimal decimal1 = new BigDecimal(val1);\nSystem.out.println(decimal.subtract(decimal1).setScale(2, RoundingMode.HALF_UP));\nSystem.out.println(decimal.add(decimal1).setScale(2, RoundingMode.HALF_UP));\nSystem.out.println(decimal.divide(decimal1,2,RoundingMode.HALF_UP));\nSystem.out.println(decimal.multiply(decimal1).setScale(2,RoundingMode.HALF_UP));\n```\n\n八种舍入模式解释如下\n1、ROUND_UP\n\n舍入远离零的舍入模式。\n\n在丢弃非零部分之前始终增加数字(始终对非零舍弃部分前面的数字加1)。\n\n注意，此舍入模式始终不会减少计算值的大小。\n\n2、ROUND_DOWN\n\n接近零的舍入模式。\n\n在丢弃某部分之前始终不增加数字(从不对舍弃部分前面的数字加1，即截短)。\n\n注意，此舍入模式始终不会增加计算值的大小。\n\n3、ROUND_CEILING\n\n接近正无穷大的舍入模式。\n\n如果 BigDecimal 为正，则舍入行为与 ROUND_UP 相同;\n\n如果为负，则舍入行为与 ROUND_DOWN 相同。\n\n注意，此舍入模式始终不会减少计算值。\n\n4、ROUND_FLOOR\n\n接近负无穷大的舍入模式。\n\n如果 BigDecimal 为正，则舍入行为与 ROUND_DOWN 相同;\n\n如果为负，则舍入行为与 ROUND_UP 相同。\n\n注意，此舍入模式始终不会增加计算值。\n\n5、ROUND_HALF_UP\n\n向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。\n\n如果舍弃部分 >= 0.5，则舍入行为与 ROUND_UP 相同;否则舍入行为与 ROUND_DOWN 相同。\n\n注意，这是我们大多数人在小学时就学过的舍入模式(四舍五入)。\n\n6、ROUND_HALF_DOWN\n\n向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为上舍入的舍入模式。\n\n如果舍弃部分 > 0.5，则舍入行为与 ROUND_UP 相同;否则舍入行为与 ROUND_DOWN 相同(五舍六入)。\n\n7、ROUND_HALF_EVEN\n\n向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则向相邻的偶数舍入。\n\n如果舍弃部分左边的数字为奇数，则舍入行为与 ROUND_HALF_UP 相同;\n\n如果为偶数，则舍入行为与 ROUND_HALF_DOWN 相同。\n\n注意，在重复进行一系列计算时，此舍入模式可以将累加错误减到最小。\n\n此舍入模式也称为“银行家舍入法”，主要在美国使用。四舍六入，五分两种情况。\n\n如果前一位为奇数，则入位，否则舍去。\n\n以下例子为保留小数点1位，那么这种舍入方式下的结果。\n\n1.15>1.2 1.25>1.2\n\n8、ROUND_UNNECESSARY\n\n断言请求的操作具有精确的结果，因此不需要舍入。\n\n如果对获得精确结果的操作指定此舍入模式，则抛出ArithmeticException。\n\n\n\n<<<<<<< HEAD\n=======\n\n>>>>>>> 2e07c310e03c8f7ab4b022614225301dabe3ce72\n[BigDecimal使用](https://www.cnblogs.com/zhangyinhua/p/11545305.html)\n","source":"_posts/王阁/技术/编程/java/计算处理.md","raw":"title:  计算处理\ndate:  2023-02-20\ntags: [java,math,BigDecimal]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n\n> java的计算处理梳理，掌握几个常用的工具类，与处理。\n\n通过调研，常规的java计算方式有\n\n1. 运算符运算\n2. Math工具类运算\n3. BigDecimal类运用\n\n## 运算符运行\n\n``` \n+ - * / %\n\n```\n\n### 使用案例\n\n略\n\n### 注意事项\n\n优点：\n\n1. 提高代码的执行效率：使用运算符可以提高代码的执行效率，避免使用大量的条件语句和循环语句来实现相同的功能。\n2. 简化代码的书写：使用运算符可以简化代码的书写，使代码更加简洁明了。\n3. 提高程序的可读性：使用运算符可以使代码更加简单易懂，提高程序的可读性。\n\n#### 缺点\n\n可能会降低代码的可读性：\n在使用运算符时，如果没有遵循运算符的优先级规则，容易引起代码的歧义，使代码的可读性降低。例如，以下代码：\n\n```java\nint a = 2 + 3 * 4;\n\n```\n根据运算符的优先级规则，乘法运算符的优先级高于加法运算符，因此上述代码的运算结果为 14。如果将代码改为以下形式：\n\n```java\nint a = 2 + (3 * 4);\n```\n\n\n则可以明确地指定运算的顺序，使代码更加清晰易懂。\n\n可能会引发运算错误：\n如果使用运算符时没有注意边界条件或者特殊情况，容易引发运算错误。例如，以下代码：\n\n```java\nint a = 10 / 0;\n```\n\n\n在运行时会引发 ArithmeticException 异常，因为除数为 0。因此，在使用运算符时，需要特别注意边界条件和特殊情况，避免引发运算错误。\n\n可能会引起安全问题：\n某些运算符，如位运算符，可能会引起安全问题。例如，以下代码：\n\n```java\nint a = 1;\na |= 2;\n```\n\n\n在运行时，变量 a 的值会变为 3。如果 a 表示一个权限标志，那么通过位运算修改 a 的值就会造成安全问题。因此，在使用这些运算符时，需要格外小心，避免引起潜在的安全问题。\n\n### Math类的使用\n\n> 发现了取模与取余存在区别。这里要注意，后再继续研究\n\n```\n int a =-5;\n        int b = 2;\n        System.out.println(Math.abs(a));\n        System.out.println(Math.max(a, b));\n        System.out.println(Math.min(a, b));\n        System.out.println(Math.sqrt(2));\n        System.out.println(Math.subtractExact(b,a));\n        System.out.println(Math.pow(b,a));\n        System.out.println(Math.random());\n        System.out.println(Math.floorDiv(a,b));\n        System.out.println(Math.floorMod(a,b));\n        System.out.println(a - b * (a / b));\n        System.out.println(-5/2);\n```\n\n### BigDecimal的使用\n\n```java\ndouble val = 4.23;\ndouble val1 = 5.23;\nBigDecimal decimal = new BigDecimal(val);\nBigDecimal decimal1 = new BigDecimal(val1);\nSystem.out.println(decimal.subtract(decimal1).setScale(2, RoundingMode.HALF_UP));\nSystem.out.println(decimal.add(decimal1).setScale(2, RoundingMode.HALF_UP));\nSystem.out.println(decimal.divide(decimal1,2,RoundingMode.HALF_UP));\nSystem.out.println(decimal.multiply(decimal1).setScale(2,RoundingMode.HALF_UP));\n```\n\n八种舍入模式解释如下\n1、ROUND_UP\n\n舍入远离零的舍入模式。\n\n在丢弃非零部分之前始终增加数字(始终对非零舍弃部分前面的数字加1)。\n\n注意，此舍入模式始终不会减少计算值的大小。\n\n2、ROUND_DOWN\n\n接近零的舍入模式。\n\n在丢弃某部分之前始终不增加数字(从不对舍弃部分前面的数字加1，即截短)。\n\n注意，此舍入模式始终不会增加计算值的大小。\n\n3、ROUND_CEILING\n\n接近正无穷大的舍入模式。\n\n如果 BigDecimal 为正，则舍入行为与 ROUND_UP 相同;\n\n如果为负，则舍入行为与 ROUND_DOWN 相同。\n\n注意，此舍入模式始终不会减少计算值。\n\n4、ROUND_FLOOR\n\n接近负无穷大的舍入模式。\n\n如果 BigDecimal 为正，则舍入行为与 ROUND_DOWN 相同;\n\n如果为负，则舍入行为与 ROUND_UP 相同。\n\n注意，此舍入模式始终不会增加计算值。\n\n5、ROUND_HALF_UP\n\n向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。\n\n如果舍弃部分 >= 0.5，则舍入行为与 ROUND_UP 相同;否则舍入行为与 ROUND_DOWN 相同。\n\n注意，这是我们大多数人在小学时就学过的舍入模式(四舍五入)。\n\n6、ROUND_HALF_DOWN\n\n向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为上舍入的舍入模式。\n\n如果舍弃部分 > 0.5，则舍入行为与 ROUND_UP 相同;否则舍入行为与 ROUND_DOWN 相同(五舍六入)。\n\n7、ROUND_HALF_EVEN\n\n向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则向相邻的偶数舍入。\n\n如果舍弃部分左边的数字为奇数，则舍入行为与 ROUND_HALF_UP 相同;\n\n如果为偶数，则舍入行为与 ROUND_HALF_DOWN 相同。\n\n注意，在重复进行一系列计算时，此舍入模式可以将累加错误减到最小。\n\n此舍入模式也称为“银行家舍入法”，主要在美国使用。四舍六入，五分两种情况。\n\n如果前一位为奇数，则入位，否则舍去。\n\n以下例子为保留小数点1位，那么这种舍入方式下的结果。\n\n1.15>1.2 1.25>1.2\n\n8、ROUND_UNNECESSARY\n\n断言请求的操作具有精确的结果，因此不需要舍入。\n\n如果对获得精确结果的操作指定此舍入模式，则抛出ArithmeticException。\n\n\n\n<<<<<<< HEAD\n=======\n\n>>>>>>> 2e07c310e03c8f7ab4b022614225301dabe3ce72\n[BigDecimal使用](https://www.cnblogs.com/zhangyinhua/p/11545305.html)\n","slug":"王阁/技术/编程/java/计算处理","published":1,"updated":"2023-02-23T02:52:15.293Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgw006yu6pw06oifyc2","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"f9028e2b85911667c3898b4ce4267f96285e899543154fe179b54d0790fc99e3\">f29c680708acd02cbb1b6cceaba06192732f8a53b98c6133fc6114efdf3a6ab038d1305cd6f6384d757d1197169826bd8816a780603daace1d05ec3d277c61004b14084bbd80dbeb74504286758d0bb808aea3a1238e3aa64a4950a6f90f96fd6d6ff61356cbda3bffd8f953d3f3858af30ffc3ffe796be146bf63ca3c8f546ea20905438bbb9558de4afec545f68e61e009606053a3f1e47743f48f295ad48f7a73a34e7a00602fb5d20f3c4c65eb3455187f3394ffe7ddb96a2336b212a2392dd800921ac7c1f6c23da483b7205b10686de44a597b55d95a692a634859f7629cce7640a7be7396a488ad2377e4d9a43b2916b2dfe6f89c3c89bba2e751833b5eadd793376381fb1e9a0b55a843102cd9b568e7ada6c9261185c70917b29503cf310fdbcf693703a22ea396e9a8a83af2d044d71652d39415535ce3368ed89b639b18ec584431603051ae5d01cdf14423f3418cd35a6d17824cdb0eb511758af1c7801911c056b2ddcdc8c2a22e60666cd55b8f7f22e485f59f9fdd0a79c2e6248ce8ffd7f295c6c307fb29a24790245abf60053d1742ee770fff2cfe9083d26484fc3f30de6abd4a7681bb8ff59e94b682586d8985709d9f10816fc2c06cb743e9381bf2e4cdc1a965ca063787a9d94b3afe5facb1a4d157f60538fb424a0c70697c4b06506737904a094d062c2e97ac46f599314919cd02f937acff418c7d3c21334ecc400b5ef76368dbe3d0cd60db06a43c8fee1f440d95d5b7ddfc84dfb0b040dd7648e51854ee542d1587a17d709130b1352e9de2d788614344369b6a4efab9838247057d08d41dc2e38f34863f159cc431836a35ba6a1b19fa6f39fb81a1fe2be672040388a0ac0aab72cea01bf83b205f943a0b41f08c218579a48616c157a7d0c51f968b2ceee1490c8649017a8d4b506d0ce33705ecdea0d340ecf987022672a3d186a0b46523d04eae4b0d01b71344142fbf149b0785593a8a0d7488c0df871c471bad932c99771a4f1500499a8695f89ee93273884db58e1754a530f9e77f27d439a2a2fa038c98b9277985a28d3dfc9b528312c9cf3650056f4e5ab8765ee71e00d8d12e9588ebf3567c9b82031d92c1e21e2ce2718b6ee62da2c435c97d54696bc8ab97c803ea977cfb381e3a206f1c86999cf9f7d78b50161e16ff5925db41f0a0d4895be73862ff91131e5887c5232be1f6e72e92f5e3b9a952ee74c7bf337032966dd3dcf1af084fe2ee1b037938b877c49a0263bf86b37e3e9659949daed063e1bb4db2581d16656d6155041a5c2a9cb32dfefc605a40869e0cd48bcfbc60b01500d20a3cf4931f5a5d6a319ce9d798c2c3c19ab325a1ebd0e6d953cd3e1e475ad159adaf665cb96177597cc6c25318663af3cbf589aa739d8bd334408b49c5c40c0310b56c39a4c976390bac6c98a957cebae0c9866a28afbe7e27f2ebfb323e18d4777a09f4d432898fb441570ff3a0a75d83e994a2d01a12fcebcc3e094bee999c232a17e6fd029c9c87ba0e5574db0657e82733db24a784f9a36f9f5d316fa8eb8b114c68b2955f38309b738968106963adaa10f77807c1f95f98b6a12075dfdb63d8920a30b4b65186e170273fcc82601cddacaae3f2ca2bd5728663ab68d41f6cb9e4f731e48d3dd2a236aa3b2c40152f4f4f455287733d094ecc476d02e7431e8e69872c8cc18cb60cca81f2ad82d01db3874af9875373566a17e6290492aaeceec6c3c212947034a1971a9a781cbf09b7b7639f7ca15a4fa03d2d90d9ae9b42a1044ebe9b73aea74d2712bc4e180815f578dd709261690af64a2ec5df1a214c8ce9800681fcca50c7b9d6917434e590d98e9accf45716739165441d17883ce81eea59d475e8ce705f4b912d1329d0ec42ab611cd04ea21038075933d90e776955ab0c9cf993a7add18d4c3152fcc7c1ad70fbd7e6628ab22eacd5afec081791e7b1d87dd81db6a583c8d4b3b39667c496a2bb73201e0039900b8122227a89b1204c5215af5215651781e0c38d47eaf17a59ebb4f379cef00dfae1ba8bae6d6a5011f4f0d434158766a51a0bb9b5e53a6bebd441f76b08be36086b88c9f866ee2cdac545b6410d3cd53baf37ea96c40528cacfab07d4e21d2ac5250299fff91f28c3b3921ec46df597ad2dfc40ad144c2868e9426c861d53a9b2cebe4ec240c2fd9b6a3529a5304d8e08500b89091f79866cc4389aa257897b22158e3d4580cea098f2052e55b58d7f3409cb2f1f97b1117e44636f7e7d1f2bfc3f45c7fdca5d945fe22b01052f70bc4fa27f71342612a918bc85c1d2e1ab610d59954ae0dc17b67a9c59166030ce3ebab13e0ab693e3ad6dd199a4ee6d769f699446046ea2af5a07d2034779f7fb38410e95d66ef9cb59f585cdcbcf6c244413e7b0979b9a33a99d245a5115b3199e14dd10e638099eaa691966c2f4e256a35b2506b410a8a0729a3c62ae67152e2ed26231e9b0de24e64206c5cee05b42cfb0822b84e774d252a34a283bfbd829fb26f9e44cd644e8dbcbcb61459ded38ed5acf75ba58ab2f8b63a126991da492158158c9d074cf935bdf8b77f4a5e9f9258125ba913518003d215a2b9d548fc3b56332cf4cbcbde1f2a7b92d119d9563939487a7d1591f5252b13121e88d945d927b67008bfb69a2e697a5304d4e178eb4749b1de4b8d6844b48f89e70909d9a3787f31a61ed1b1e2372a533d111cb8117225f8f1428fab5e28580b91cdccb580a9e5a8064e61725d716de297a5754f2a049d1d1db665e875b24501130bda6a93c45ec129cc85e8c0260070a997f428af754746cf8e3e884a933f8c9c817219c6eb54d3464bb332bda1c0da990139d41a226cc0003ad8fd21f86717187736768b53d0c59b9a003d1e95321044018f39981fc817c6da6779e379058af443af97973b51972e5781038da8769115ff5941db9da7059fec2b1eea8d8d746b4013a38c0ad012c45c2d5ee0530ec4a229e64720ab0b0bd297ef3688c729c9e2c41bdc8d3a35d55c7c2d6b4dc3be94c75220f76363719a430184b57082a696238797d79b67c1c7ace339200b48faa3ab2693718049edb645dbf8b076669b51067212d5901b24bb390b83065e22622f9fdbde30709edd3e87d51e7d7fd8fc4d07ee283a3ab2e2fd73cc546a8047703a340d5935dc373d10eb498acddc715186bf79a971f7437954159d907d7d12838630391a3d025c2ed9d4c7f4e68d9506a9f07292f3de161fb2efa5544980cdd49b30b7073ca1eaf624a9023890f163341a236cffe601990b3ab18829cd2ccabee34713ca1185460e8debedbebdf53fed75c63f5a65b387161f04fe13a6a7641979c7a781e51b2806de06acc46c90fca03a42363ca2afc9fc8848c800b44c24adc8fffbcb11e9725519aa7b283d63be25eb076f24ac73bd9c53e0b0ff603e568797bedd8cb76dfaf3d01cad609e1b384bb41e928430e4e86adb22f90784759af28ae721beb331c838503dfb79755535b85380c63ca34ae190aa06052bf487b0d80e04536cad22549a9e962b93ef1d9817e498a04e05d6a1fb40eb0b438ddf76e0ecec69bd1be2ab2edf3f61b0b6a309820706ad7c0a3fa2d599f9af42980d2a4511a2f2fa1ef27f4d7310b7e6a554c87b99aba487024af2a1cdcc35b7dc40411d829409813c150c56261973f0c338bf37556e4d67ee49bee317e86099311117e247d5e093e7bc7a71365796d94fbfe0ee7028cbf29f3d2f1d1df076d255ea2050ce2da2a3337db999f297f3a66995c6a6ca8c9da7127e5f012acbb5f5937b3580b1a3b8622e8a0eb0d36fe65d82e3b5f5940897eb0bcf8a0ac6b9d5b9efdd137251dfe80ba079fa4908e66c35484dd4ce25130131951c58defa1144438e4ef3f4baf70c05fba1c94e1058ddf753eb69c5f4dfead6b7c9e9756178b43dac45ed0e3412009c10378dce91a5e0a1488a7d357904dc92c5c82fbfafbf5515d91aef955ecfecbd607858ae4ed651725861354002c18b2bbcd83f335dad59ac5174049570a648543733b10736170d411ead7b7923cced08eecb4fab383a217f5b5df158533168b0ab3108d9781e96c51919bd02c77ca554f007c937cccd8cd6dbd16be2fd99f1431387de5a1d8fd365b4f85f454165f2d0e7e7b64b1feecbb338ab0e9c57a11b0cd2fe1778f1d2e081838cba26ea814056422586ff7c88001a65ad07d925c26a9503588e02ed98c93acd7a5c6dc12bdc962a8e6beff2d848874e12af0201bf02e6bae3fc2da91b8bcb5dbd0d7649fcf193573a52a37ad4c8d83881c84a8af52427e481dd834dfbf423ed6b07e0f10783a398467008d8fd449ddf564f5011fed9c4992bb47547b8ab29c0fbbdc0ac870bc83bc326d35c3b7d1e6156cd41b944a53a3e00a75556de94882e5afcbda6a6b5c9ad6ff53c54e01d337eabe8a9dac325101fce3484e7e39bb23b2f5e0d0a7d5d6ce15475efc93cce293736b692df2619db6a9a2cf2c3eb202d342ad0f0efd393b2c23840a7e595395b795f86a2f649d1771e70a3b2cd9ccc5b9cdb6e5f63ded31adfcdffb2f0e7c825bd2f0c4fa77fc93c7c0b7bebc07a117f9c4a62a91cb893b87b5a6e077542ddca59df99271f84b1fdc7b194fce868c50892a694fb02ec7200ebda5e1aee7a1d63db74d95715834a35f83bd3bc16ab057ae022f1cfe8b370237776edc69936521fbc9d1b5354e72a1bcfae706fed6a311e6982a3e9806e7882c43b54b1e535c2244164bd6c7693d6e8a04c3b2989932b15b9079496867a0a45f42146de66dd8a9b083bd3e82a5c111d4ad7b9ee407c0555ab9f762532ffcdfa66e1124a1c1be0df9ecc5e62f60cc6124c99881a85d45ef3c5191f64fcd137bea81b79f8fdb06d0af4877771d7aa8cefb007bb359b3ae87e35cb66d819d0c8457f161a578569c00933e581f2a0371eefca1a524aacadb529a32bace824f56a2b7ce8c57bbd75ecbae4584d1a0d3d140d54747bf564cfe6d24a06e454a33ee3c284353ce26a8ca12ac7ec4c5994cc9a25824b770b73995dcaa9219861d55c537e5a87c9454b989935e472e057e75b2e8140f01cee356ed2da3eac591f9a5ffe7d5836898933d66cce245d2f36d135c08d087b47be54d9b3e9c31077f4b833a0b243f85007be11981521128e333b7ac40281badc0431273fcdce85ede2a581adbb73d1a1b9d6a34c7c01c4a087279467a89d5d0ed644ae57558e27fa8b84a96ced89c8a89844dc0390767270280c754378dc220ac7b054e8af94d73471e23e8fbe4d03d4bc23539207bcee1eb59b77ba15469c9fe96eb6ab9e2eb25a76dcee177ba57ddd37ebb05f93a61008d310693728cbf90903c75000fa995ab8580ef28200a9cd66e38001904047201e0bbca095576d03d20cae9b9458b75a3812a60fc6a8521c57f01cd6885cd173f2e4062a506142da1b638b681f37d386cb939686bc6917c443f2369e1ae16b7df823b2f079f2204cb085445746b2b7840bd5a86cfd93969f66bce17999905ff3a9865a6abab71c4bd8bdfa296472d9c204f6791f115800259d1b0a1fc23df450ce0ac6f6595879dd7824fe96e8c0b51b664b5a9654b64f5d36e553c62e7b3b7d6c53c39200a08d611008ef602060ebc08167d46f6f1fa0b86aff1190f98c7df3892d332b61d2204f803625d594992d3ae37b52a2142d71e8f34ff64620b096728f456e0d9c32a6ce91e57ee39acb4e4501eef61de1de15380cc541db157e1c644a3382498e5a90cf95c791867039db66f5494dda17cd8161825db3fdb86e292f0bf207004349f61f88fdb6dc9e08cd9621ecbaec36ac207727c53dca9def6c1089d40a0e3b5d1e0257d6719fb63cc06a156ab7e396eaeba2af6cfeb84118df53982f5e599b96014136f0d1687f7ee336ab39adfc06cd64fe65647ce2b1a1d07613f1dcbd17afc787c3e282c9939635c0f7faffb486f1ed88daef327b6e81a1701a584caac13ae46c1065283027061f73329adf3804d26377962f3d71b3889cedef1efcd5ce945b9446ae86fc807d278bde0f650e5c0ec574170ff19b1c5a2d7f40b50d6d8069b0a23671d63cf43206c3f4acbde8995b1ab73eed6e04045445a874811add1c47a734a1d0b7348ff3736fe1e33cdde5a24fbfc495be9ff362c90230f8ad6d09142858c9c57f68dc54e940d6a00205fefef6cc47b385448a27bd6d580f36736b8b74ecfe8e088c4ba610721a266ffd12bb3b502ee0aea1043a458a01de1cd637c3361598cea13841e907691930d7068be2ddb856a5147d98783171832efb33550fb667727393e3646019f2422ca5980751a60bbe3decda43a07b563d8b7e5d51c4d11c634da1570bff1e46e486516e64826aad420d7383201cf2df8ea00ffd97c0ddc2d2d0b38aa8434c88e5bb85410f7cbe94b4eb2d3e91c836ccaff8a67c4906ced746418a750e2af33c0b68658c3fa03b848e6881ea7ac1e1edc22e85ef3672876ee5f8d73a1769c60e1402d945dea2e9785d3a3c895f5122123873276d5fd83ac6cae850fefe82d983b01e2f41482be2695a10afdf7c36200d535a3f0b280ee0a88de727fbff6b0031fe0e51a632fe47eb1c12c9252066b55ca4ce3bc147b5ffd9d765ecbb19bc4a32b8bccf66da48b1b2f7ec1ace501dc920009725f41f9a5e4d816e43dad625d777e118093befa797676e0b48f50f003527467d50c234b913dc848cb943e111000a9e4f2888c1ad93aca2f71581726c17ef4c8fdd1984995a0119dd39e51ed5bf178692388ec6c1ec91c48b98855512325d8df532bcef7b0a7a09e53cf8b44c8f7f7881dba9091fa1242f43c5e11f1e22e3cf4b35ece600d99961d78827e6750b529cc7c56c8249071e73a7df92d31e374baeb5263bb4f36add63dd846e1a00da8e8f589a70581bb2c23385bb2129d78f551574bd418cfd4a517568ee335a03301b18653049063733f6449e7dc7182adab24320a368f34c507b7592fe8fea448003b1ba8a4ec49fa71d288facd7ef0f3eee63c227a2f7ac62261020707734a2f0d5943c7096a9ce978a146fa8012ecbfe225e8746200c2261af126aa9bab75e068d5628ee80fecb91ff82688e1dc8ab5e7251744b8eadf8c5b0ea39b8a5684fc4ecb94d0d30267c35e68e7626bcee81e6838845daa2aee2bbc3595f4944afb0d412e249e148d38054605cfb9bf67525b9f18f4891de3aa1aa928ad3c2a6b8cba127205e0de2e673011745f79dd44f849e24c9c921f9c8d0787b6a5b462dfd2c468d90834dba3c6b5cbf6f1765f653df635962f7c586ad327a54afbd3a4171628ab980b03aef2752d78695bf10d34af1250d47e0b819ec9e17d96ce8b963cab086da7addcb7c9d09a2f95ab042aa93f247ad505802fa54d2c3649b174b2506411e31e5bbbfd861d9d2c2bf3ec52425dc8ea8f098a9d80989c08fc1e0ff7b5b1f6f4a652370e8b4831cdc61c5abf90ab617ef00e8d4c60e22100115acd22fb1e60af93f5aa13cf5df15f750aed9a68596b3928a7665287a79066da9677466ba947d9ab62112f5ed5309ec385076dadb823942f45763cd93188f2262636d46ff150703d0bdb8806fbc28d2fe07c31434277cecfe38e75c826f6e9273625f873a12266be45ae618fd5579315d47a940fd6dbc4d597c6e7f472161e0309deba168ebbda39f102e04d06c357a11f203977383e4a9bdb4b921164a383f927edd1951f06cc3cbb7756f03140229d67cca9c434c49806d2c5923198cb4324a8fd9bed0ec7b3a5425caaadaa10fecce41f5a817e52b9dd5a60ee552a0e90f629246672512f1ac304bd2fbe747f6bdd57ac1d8e56016c9b0e8e69f5597005a73a078e6cc769a96508cb95e448b9157d386bf8719d55739abf1e72a72f4658802e20f5b195cfacaa55fddd54a0a38a08dacb3ac614d113bf9c80b04ef25669c0b39c80b4e53d5d142c9922ed1013fb26bbb0c59657623de7edd095e4e614fb40a575de7921ed6260d744f07bfa14845d46908303a0712727761d7fa4d86520afa342d07deb5e8fdf547987aa06c2df03754d9ec09f36688a9f6be336b536e51c7eb34ba8cadf6db9b3d15c5524d66e1fac8b62209cb0da1127559f1e5873a7907f88b67b062c8130a582273b8525cd4c9580400b490b61bdbf6e6090c73649e8f64033d3972c0bdf6341f53bdd00ce0149c1a5de9d601c7f5309f4a29a176a98ec069e128218c5571064ce6e00371a818c4d2153f63467fb49d173e259315950d96fe450d3ad3e3953dfdcfe98747decfad709fb40abccf37bbd41a8d1de59fd4a01421c9ff7cd0386674610108edf5c636b4a0aae0663381d361008230d6be44fc045c73b317df8c4cf46a754977b12b46bb7e82067cc663c500ef99f56f4ea7c4eb3554cc2e1bcc3413a55f51c65289892e11cd0c5c07d750a471fe92b1550d32264e29f5dba2613229b17c1994387f22d67a0cb87fc53cd603f2fdbfdd962d84f47bbdb8e235ab40161fc806badb207ca8466c3a1919804a316568821432e43c1bc20243b2370fb9188a76f17b34547d07b1edf7a3237119058811a66f0d6699c4f906436ce314cdc38910b4219033fb17faf3de9a40cb685055ba98af2066ebe32f740481253ec9e5fd42eb877a14fe5fb6884fabcd0209a37791692070ef7ce8ca4176f8b47f2c3a5df37f5e3965fe7eac6f6828533cc7f3367310a3674d0b5493283d420f5a51b53bf7f0d959884b5e7a09d93655c2adb7a57f7cb5d11caf6009888861500bc1ce2482e9f1332fde671a4b36ed40719a8ead79544e68fea3c2397f241acf8d3abd5300b381fc0c7f3d2a26817c74b36bda6af67d55cdddfcf931eab619322c3901115136a757a80782705708ae93e80b98c1dc8fbd812e539ee24c68e083d4c9bee4971747f1e0dbe086c53dc65fb8ecac12cb3f548d9b42decd4820d3cdfe71032981c876b40f77f11d4d7447fd36d5fda2de5b40392f1c58e05431c4766f8c9d8e7acfbe9912213f2e9d4f95a3f4a4e37437608c8b1bb01da0d1120b3ca01f70ba447deebb96ae5026f7ffb0a97319e4488a0de7eacab55e4451c8000469f78810d3807b73f8c57b1763c8d3630bd9fadd19c7f5319309d12b1dadcfbc0c949b9db0b1c8b496589e6f1fc1e9d31a655439df86c820232690fcae8e390ee6a7dd44908b10c3381ec2bbda5a29aa123b93116c115fcf262120f7142bfb036d96038aff13553d08630815ff3da43e7e56b3a17ee3d4ec93ed29587aa37e5b6b589d4ce25ef72784a9ff40c6bf6f1d90f77b0d064d895d9e90e3b96c26df8c24eb55053b3ddeb62c38167a843859a70bbed561ad936dba718edcbf19cac4d124868a78d28a583a6c4e5b94e17d884ea57ee60c2bce495dcbff0f887bb30a1266d173d31e033c8fde231495f2d1d10ca56a2026d9065f11c55038c22c794159629c14595ee7aa59d4088af4ba421b64a5439c59c8b3255de6b0ebaae75c407dc2a8c5483df98ba9055a7e17263d2e078eeb44d18d4f8a7c053536783df54d13ebab1f278e55737dc3279dfe86a0f498aede6037a318f8614c98e21fd2d9c32fbfb04d837fde6082ae1e874496555f4eb6e2ae886da2ac36de82d76fb5694849278327db7922e580696af36636f292a5952b6718cdb39bc0eb2f81c749e035b2cd19695677d4b41d9535cd1e7a456139ec8fe6aea81b75b7b18ee6e8f9689c54af252068ba7a27af8783d91d4fefa12dea0eec4a2040a2d1582bf573a6d82026dc85c3b89b30859f352709a8ffccbe03655f92c8084967c73a402b83fc5ef6bba51c641788d713ffc33e9cc9f72c3a2825062b0060bda3f1bca0e1f2b03ae48ab6421017b4fcc8e752da5b1561718c16d70a08b01c7f37094a6709b175665c6ac351706afb9e7e4152d486eba586ae65ec1784009a6f0841a884513be13b20c60d2c7e08c557e97e2f566824a7d5b2b36360e6117654672619ff6912848fab637814679bde74c9cb33690408c3f5ab378eccbd2f20d96c4b95d2e26570a5807c839158f81acb353b60a89cc0595eb654d57fd6330239d77cbba1dfb01c0c46bae54fd2aeeff68ce7b93cd4a68546186516cf389e96ac6faa93a66c1801e6c4f306664c21a608c1629f677441bb3e5fc34738030e5ada65485a8eeb821bd87242d7e3e4bed4db65c25147b848229347fb43e285054fa881b68aa09438e3a9c4be398ab5cd660e8cb9ffae78aa10cd0f4912413673b16a5c0ba50ce565de789902b5151607db2b857e09a479f2ea660acbd6c0169cffc03ba2c942ae173b928ac64b63eadb4bfc61b34a597192164d6c564b3e924db2b518cfcf8c3d30c30bffd40147b0e3aa5444f8b2ac5deacb1c57ede90e2f5e28c7377551645d33c505b4d7f5322339cc3122730ee857b426ba029b8925e706292ad250345c8d80f8db4a6fe459d2c361c0f333ea09584621040a9ece1c121e8d7433e135ab6e523a836ee4924feb69f2b9958eca155f41575cda31f8496060525a6ec882534320cf6a093d6772194b0ef21701c3146eca03b7845ec766c26f34860fac9dc7a10b6f65a266d4001a795eb4729d01f9448ddb64857aaac7beaf3d539be33827cb3f107c5d7fa0daf8dc098932b3120e9513b268112e54139871b0efd2dd1a95f5e576da93ad5d3fac925200b55cf41dc2254ca6016a9fd033d60574fd200253b1cddae10b7bad0dc262f72335e63bf8bc7664c29c2cbe9ac31302a5a55ae85f62d297d644c084c9154ba2dc41c6bae6d2dae33bfdaddb82a6b0a59a38621056d521f0beb4377ca4f55565414fdad2077a64edf9391e46c194479cb656c30da43d3a6ee5ddb4a647dca107db2c3c8403764d556b80f583b64d35be7ff4717ca9e2b2a366e4f78226dc471075a4cf23524790f1b9f81960dfca3ec14bc89de8341e22004c70ec8a7dd84432872bbefd36e21b4697bd3236ba2a369b156e30379bd4b844bc5315085cacfdf15ac709cd21580359ae93cf31c6f525d2880c0342b3a9242e6ce38b9ceee7754a41bce04c022dc9bfe403b015d04c179dd9c72446c0c973ba12f8aaeca26a73bff267503f7ce1872b797fe351c425543d06cc7935222198122ea6687c9fa692bd474fcec67616ec11f32474c70522ce85a3d3d1b045fabf9bd902cd881d2863b1ad082bc7745e118d0527a2ebeefe5cafb088e489229ae50d42ef36f488b9cec8826e02cf3ca5e5c5791bccacff0633ebde12546b6909f5ed53fdc7aad302142f4fed329be3290ee79bb434684e6fdebe9db47245b2ea9ce07553f48b0ade53475abef263cd8b991812da59e0805a6d2b815f8091aedfa66658e08f39d5d880a0769daa3979018b1576eeb625d161f2a25080cc1d29842e447d5db4596d33d61b9904b318f3f4f94f82716af185ad55118f826f908c74a63f1b287fa56aedde444c0db8ece29ca387091ac9bbe838f2d464c83d917314af0641529a73ba239963c43bb9afe3ef596a25738629c5b05be73cd602cf7333091a3c320d26af3953d97b2d88b9eea71af58c2ba127775d7b08782e6f15c6e2eff98ea8485114710acd0bdc26633851022f1aed7a2cba99607ba087d98f7ee0c52cc4d22d2da0b2c469a0adcbe1ca0c23240f9920ab5fbf912a9ba5f6f8b78dfa41cdce116769b5ca2cdbd5709cf6eecfd7a5e480617363c6bcd6fe6159fa3b6736ad9197e89dfa3a18e2a3c149c7e7c0d3bacbd1d099940795ae02ed30361f03fd53173ed32cae31215516cbc40343e1a4ef1443520c776eb9aae2d543bd9f9b5ef484139c9432af561f6fd1338695b897e2039878a9e0b9a5e3c85dbe62ecb2d2de50d57cc51414d4d8064707daeef6d1428212c1bc85b17a608a6e53d4b31a541bead3516fd4c702a2edaec854558032d985ecb8effc003da094be4a6c0fe214227f0e4e2a68b3c64633a140b09cad9ac33b21d53f2c2e45cff8ffaf384669e707da6230726ce3f6b2e626540feaa805ae164e3d31f960dcd42d59001984ec48c0f3887b78b0f5b1ad3af3a454b6f1247679d2263677c4a08e64097aa2a8adf4dc23886e3f57b1b70ca5fd6c9d66c70c62b4d34b5f4d6c4628bb2f80496aa4f0c3c970e61a93ec9f4f562e16dcbc48dd33fddc2444d59451445307e291dc511f93820894bc9135fc655a4d8393c98a4bf095ff6572e5f4da657a3d26fb2f67d5d5d62e31f81f77f2a4d6607a906151b58038062d69ad756a8fdf1a087a99d845c24225af29088f37758f8f18adad8e1f4740692fcede2ea8ccca053a6d855ae6203a61263841cba3aebd4e24c7ef312e50e98a2deacaca863a5266d79755da89988d4f3ca5f32640fac42d9fec15fd3d32261e917da5539103c3116517961ced7ae9c4fd5b6cc2368e3b706fd7fe11d668f7d1530392fb79207e94d98f8ccf8301ea6ff957feb35977a21b781510e8deebc7db5b51f8308fc710f694c9a513722e71f5964aff087cade964a46d0668f3a70f9b51ef3e27ea356f1c8885973b759d76ea85ed05ce8e53cd131fe34e3c84f0841424be34f595f5dfe7b1063580e558d6e80e16e3535ee0115d93a87f78529246bab6efe1838d0e8a0ae1c1b0836939665b4e90b784023317f8e58e022e7abdad9f37e244bf201b269865acfa77ca053d661749b9d0971d2451551e92a5d218e350288dee1b318e59e444d4e5d2cc136e1bd269fc278b7e53f71b81e409332ee2e678035fd8e0e5847609d97bc31c40772b3316df3b81ca455c87ec394025f0ba8c5149054b85157877ce77d264f5bd0cfb46b28058c3e7f604bc2e4a91d925bdd1c4721f779577db666ffc82d453189a9ba79f16ad08b5703f3aee7a3c8c8c4ef0f8ca6a6f004033d8c39d830dfcc03664c2d1801014822dd839fe46f12ada7590b168d08292410d96e1a94be0e2c1f651487b667a6113e6dabf60244cd40baf55d43a0fb97ad69d17c8565ff00033043e4832cf527f9e2dec106047b890840258d3106e0c80170321fbaa60a0dede6d5eee2bae45f70a1cdf71bc84d9471cdca2cc17cf436133133dea62947f2eda005b12d5fa1d89dec2b3ad9fbd169390fe54b4b6abff908cc3d08aa44a1e6302acc87cd42dae2667d7f7972d70691607b817f538e97b0f021b3349f0b25433869073ad9535191d69bafaa6d0577f65ec350104872032172a18d5add7ad64d0fbefee1e8eb876af959ec39e49dc0ba59336d2f57065f05c80dd3b71a6d533b4085d0556a1b36a80b4b55bfce060310b967bdc4274e3e16cca658417c7d4ee0a76ba24a0f63899deed4d9f91b71fe1d8fcc7830614d29bc3a33439c2bc1b60bbb5554c64ca4a568776bd98cab3625db2a630013cce4a99677196f8d0cbb704b07159e7eb9eca54446461ed2a719159fceec3ed65a25a98ae66929db8521859a4aaf6f21a5b50b2aca46903e1245f170c7438c3992654b617a8540d4d9b2713cf01cd4906c6b7956db915d054e1e064d00b88f6816f0699d1045dd62bdb3dbfeef62902f2cde814d755e96ee1181d4de285bba121923066309bdf29ee5b3b10e666a4059c236f456f1bd70c96bcd26548aa7cda41a9b5fc8a932f76f93735a3bab709ffe9ad86e813e77c6aacfbe1e42b1f77850cd218a3552982414a0d96692c911b2c668c239689fb3afd6d29c88da91c8c1c6657c9dd9898f30bd98186bd5b9461a8773917967de3f361bb67c4c7c5ee5cfb84e36b434d2712ae1e2a931b50bfe640503ec687b80278339430cb26ea822d21c028418c556c5a86628419ea06783890b05dbe7b4b11090bac333a22d86c7a33cced019db8d0241e9fa257fab84d36fedbd934ed3d988e4033262797b0a6a6451d154737cd5b26bddc62397a699a55f7580201c2773ecdcc6575bb053ce95384d534698e13912e81f9409d4b4f0d4e52394de10fcddf3dba9b55a878e3a2798dff15f5c08c08e171fb6f264bcbb523409acfe6f51950845a2135f4bdd2e88c1f11c5d93480fb7722636e5559eaf26b12487c015e9fd20382836e570a6d46da97e0c5f0520ee547bcccc591b53ce542c400192a256d5218751df3fc3c1cdd5a30b18a28b01c3b1ed3607f27ae6bf8cee5d0f0acf0269171c94fdb5db596453eca6eb074fb0bb93340476f9498c8c9e3c7a4a3b12aab987adff16ce3680ff107efc6a2ce119e64f2a7f604ecd6963a5b7aea4a004827b7aa1f7236f070263d2e0294ff4c91ce38c08a385653a3b3cace3b7382a1f75d536daa8f3636313ce05e6ab33da</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<blockquote>\n<p>java的计算处理梳理，掌握几个常用的工具类，与处理。</p>\n</blockquote>\n<p>通过调研，常规的java计算方式有</p>\n<ol>\n<li>运算符运算</li>\n<li>Math工具类运算</li>\n<li>BigDecimal类运用</li>\n</ol>\n<h2 id=\"运算符运行\"><a href=\"#运算符运行\" class=\"headerlink\" title=\"运算符运行\"></a>运算符运行</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+ - * &#x2F; %</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"使用案例\"><a href=\"#使用案例\" class=\"headerlink\" title=\"使用案例\"></a>使用案例</h3><p>略</p>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><p>优点：</p>\n<ol>\n<li>提高代码的执行效率：使用运算符可以提高代码的执行效率，避免使用大量的条件语句和循环语句来实现相同的功能。</li>\n<li>简化代码的书写：使用运算符可以简化代码的书写，使代码更加简洁明了。</li>\n<li>提高程序的可读性：使用运算符可以使代码更加简单易懂，提高程序的可读性。</li>\n</ol>\n<h4 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h4><p>可能会降低代码的可读性：<br>在使用运算符时，如果没有遵循运算符的优先级规则，容易引起代码的歧义，使代码的可读性降低。例如，以下代码：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span> + <span class=\"number\">3</span> * <span class=\"number\">4</span>;</span><br></pre></td></tr></table></figure>\n<p>根据运算符的优先级规则，乘法运算符的优先级高于加法运算符，因此上述代码的运算结果为 14。如果将代码改为以下形式：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">2</span> + (<span class=\"number\">3</span> * <span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n\n<p>则可以明确地指定运算的顺序，使代码更加清晰易懂。</p>\n<p>可能会引发运算错误：<br>如果使用运算符时没有注意边界条件或者特殊情况，容易引发运算错误。例如，以下代码：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">10</span> / <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n\n\n<p>在运行时会引发 ArithmeticException 异常，因为除数为 0。因此，在使用运算符时，需要特别注意边界条件和特殊情况，避免引发运算错误。</p>\n<p>可能会引起安全问题：<br>某些运算符，如位运算符，可能会引起安全问题。例如，以下代码：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">a |= <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure>\n\n\n<p>在运行时，变量 a 的值会变为 3。如果 a 表示一个权限标志，那么通过位运算修改 a 的值就会造成安全问题。因此，在使用这些运算符时，需要格外小心，避免引起潜在的安全问题。</p>\n<h3 id=\"Math类的使用\"><a href=\"#Math类的使用\" class=\"headerlink\" title=\"Math类的使用\"></a>Math类的使用</h3><blockquote>\n<p>发现了取模与取余存在区别。这里要注意，后再继续研究</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">int a &#x3D;-5;</span><br><span class=\"line\">       int b &#x3D; 2;</span><br><span class=\"line\">       System.out.println(Math.abs(a));</span><br><span class=\"line\">       System.out.println(Math.max(a, b));</span><br><span class=\"line\">       System.out.println(Math.min(a, b));</span><br><span class=\"line\">       System.out.println(Math.sqrt(2));</span><br><span class=\"line\">       System.out.println(Math.subtractExact(b,a));</span><br><span class=\"line\">       System.out.println(Math.pow(b,a));</span><br><span class=\"line\">       System.out.println(Math.random());</span><br><span class=\"line\">       System.out.println(Math.floorDiv(a,b));</span><br><span class=\"line\">       System.out.println(Math.floorMod(a,b));</span><br><span class=\"line\">       System.out.println(a - b * (a &#x2F; b));</span><br><span class=\"line\">       System.out.println(-5&#x2F;2);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"BigDecimal的使用\"><a href=\"#BigDecimal的使用\" class=\"headerlink\" title=\"BigDecimal的使用\"></a>BigDecimal的使用</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">double</span> val = <span class=\"number\">4.23</span>;</span><br><span class=\"line\"><span class=\"keyword\">double</span> val1 = <span class=\"number\">5.23</span>;</span><br><span class=\"line\">BigDecimal decimal = <span class=\"keyword\">new</span> BigDecimal(val);</span><br><span class=\"line\">BigDecimal decimal1 = <span class=\"keyword\">new</span> BigDecimal(val1);</span><br><span class=\"line\">System.out.println(decimal.subtract(decimal1).setScale(<span class=\"number\">2</span>, RoundingMode.HALF_UP));</span><br><span class=\"line\">System.out.println(decimal.add(decimal1).setScale(<span class=\"number\">2</span>, RoundingMode.HALF_UP));</span><br><span class=\"line\">System.out.println(decimal.divide(decimal1,<span class=\"number\">2</span>,RoundingMode.HALF_UP));</span><br><span class=\"line\">System.out.println(decimal.multiply(decimal1).setScale(<span class=\"number\">2</span>,RoundingMode.HALF_UP));</span><br></pre></td></tr></table></figure>\n\n<p>八种舍入模式解释如下<br>1、ROUND_UP</p>\n<p>舍入远离零的舍入模式。</p>\n<p>在丢弃非零部分之前始终增加数字(始终对非零舍弃部分前面的数字加1)。</p>\n<p>注意，此舍入模式始终不会减少计算值的大小。</p>\n<p>2、ROUND_DOWN</p>\n<p>接近零的舍入模式。</p>\n<p>在丢弃某部分之前始终不增加数字(从不对舍弃部分前面的数字加1，即截短)。</p>\n<p>注意，此舍入模式始终不会增加计算值的大小。</p>\n<p>3、ROUND_CEILING</p>\n<p>接近正无穷大的舍入模式。</p>\n<p>如果 BigDecimal 为正，则舍入行为与 ROUND_UP 相同;</p>\n<p>如果为负，则舍入行为与 ROUND_DOWN 相同。</p>\n<p>注意，此舍入模式始终不会减少计算值。</p>\n<p>4、ROUND_FLOOR</p>\n<p>接近负无穷大的舍入模式。</p>\n<p>如果 BigDecimal 为正，则舍入行为与 ROUND_DOWN 相同;</p>\n<p>如果为负，则舍入行为与 ROUND_UP 相同。</p>\n<p>注意，此舍入模式始终不会增加计算值。</p>\n<p>5、ROUND_HALF_UP</p>\n<p>向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。</p>\n<p>如果舍弃部分 &gt;= 0.5，则舍入行为与 ROUND_UP 相同;否则舍入行为与 ROUND_DOWN 相同。</p>\n<p>注意，这是我们大多数人在小学时就学过的舍入模式(四舍五入)。</p>\n<p>6、ROUND_HALF_DOWN</p>\n<p>向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为上舍入的舍入模式。</p>\n<p>如果舍弃部分 &gt; 0.5，则舍入行为与 ROUND_UP 相同;否则舍入行为与 ROUND_DOWN 相同(五舍六入)。</p>\n<p>7、ROUND_HALF_EVEN</p>\n<p>向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则向相邻的偶数舍入。</p>\n<p>如果舍弃部分左边的数字为奇数，则舍入行为与 ROUND_HALF_UP 相同;</p>\n<p>如果为偶数，则舍入行为与 ROUND_HALF_DOWN 相同。</p>\n<p>注意，在重复进行一系列计算时，此舍入模式可以将累加错误减到最小。</p>\n<p>此舍入模式也称为“银行家舍入法”，主要在美国使用。四舍六入，五分两种情况。</p>\n<p>如果前一位为奇数，则入位，否则舍去。</p>\n<p>以下例子为保留小数点1位，那么这种舍入方式下的结果。</p>\n<p>1.15&gt;1.2 1.25&gt;1.2</p>\n<p>8、ROUND_UNNECESSARY</p>\n<p>断言请求的操作具有精确的结果，因此不需要舍入。</p>\n<p>如果对获得精确结果的操作指定此舍入模式，则抛出ArithmeticException。</p>\n<h1 id=\"lt-lt-lt-lt-lt-lt-lt-HEAD\"><a href=\"#lt-lt-lt-lt-lt-lt-lt-HEAD\" class=\"headerlink\" title=\"&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\"></a>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</h1><blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>2e07c310e03c8f7ab4b022614225301dabe3ce72<br><a href=\"https://www.cnblogs.com/zhangyinhua/p/11545305.html\" target=\"_blank\" rel=\"noopener\">BigDecimal使用</a></p>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n","encrypt":true},{"title":"kibana的使用","date":"2023-02-23T02:51:20.909Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n\n # kibana 的进阶使用\n\n## 配置discover页面\n\n![2021-06-20-18-46-39](http://img.wqkenqing.ren/2021-06-20-18-46-39.png)\n在这里配置相应的索引,并保存\n\n![2021-06-20-18-47-51](http://img.wqkenqing.ren/2021-06-20-18-47-51.png)\n这里就可以选择刚才保存的索引规则。并展相关数据","source":"_posts/王阁/技术/运维/ELK/kibana使用.md","raw":"title:  kibana的使用\ndate:  2021年 6月20日\ntags: [kibana]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n\n # kibana 的进阶使用\n\n## 配置discover页面\n\n![2021-06-20-18-46-39](http://img.wqkenqing.ren/2021-06-20-18-46-39.png)\n在这里配置相应的索引,并保存\n\n![2021-06-20-18-47-51](http://img.wqkenqing.ren/2021-06-20-18-47-51.png)\n这里就可以选择刚才保存的索引规则。并展相关数据","slug":"王阁/技术/运维/ELK/kibana使用","published":1,"updated":"2023-02-23T02:51:20.909Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsgy006zu6pw733i6xm8","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"18b4dc6069ffb960ca82078f4a9e92d736c24a4572dc9f687ad990224d8bbace\">f29c680708acd02cbb1b6cceaba06192340f836ccd91dcf28d1dcba7f8ec3c39bd022249ea9b9cf7faabfc9e8c827c268d1ef0e39e3b2079d8de8b88af433cbb8307c4c9bd524b46ced908e465380cf0c54342d10f65c837ce489ec4b91a17ab00a34d7a074308e3c59ad172f1b11517c1f7978786f013890069df0cdd639258599cc6d5e25e51e0e947343206fb1a1442c8526093d2377979497b685000bd2474f2978d5423f99a7d73d2fbbf619ddf7520e859c00bd2201c92004532c2e5677f462998ad8a8eb47aada844d2a47b6d9de29f07a58560bb8497934f64b9fe9eb6e3f7be7d08e39f973a7746c053324bba308fe6cd2bc3de6d86cb31e68d37933be4ea2aa8cc19092605aff6c1f1da9a63165e3eada0f8ce1a782acc001f7227e031910f9e677ba170750af1a23b363d266a6cf9c55e43e21725376c5ef45aa7fdab9663e928da30c0d12d3866857635fd79c1e52639b0c4a0e06019bf9dbb91299504494025ae10abf15a0e757b273734dc9a979ff4ff4f8bae10487c07c8e283f8c7c72e24f3a604489c1813656ce666761415522b269c18ad780350767b5f70288afa76c6fa930a621efd47d26b89abbedc9f2c830c527b1e94e593cf679032f364b71231101505fb4e007307c66da374a613325b4216524e2b519297edfcf31513ff09bc3d113bb9647332cd01c3f4d07518ae69c84eb57e40c1ffdab10adaae3b2dc079f8ac34321a9fb46dac4a30488ca9298556f814aef34016b059cb903af62d6ac468c6cfbb79cd12ce1535c85c018d8b049ea6a744ecd248f0d281ea516ef20267fd3a86b78ed8d93bbbb03d020f8d358c1573520251aa058e2ec37611f060f4c12c0027eabd9a20b46de9</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"kibana-的进阶使用\"><a href=\"#kibana-的进阶使用\" class=\"headerlink\" title=\"kibana 的进阶使用\"></a>kibana 的进阶使用</h1><h2 id=\"配置discover页面\"><a href=\"#配置discover页面\" class=\"headerlink\" title=\"配置discover页面\"></a>配置discover页面</h2><p><img src=\"http://img.wqkenqing.ren/2021-06-20-18-46-39.png\" alt=\"2021-06-20-18-46-39\"><br>在这里配置相应的索引,并保存</p>\n<p><img src=\"http://img.wqkenqing.ren/2021-06-20-18-47-51.png\" alt=\"2021-06-20-18-47-51\"><br>这里就可以选择刚才保存的索引规则。并展相关数据</p>\n","encrypt":true},{"_content":"# hue 使用\n\n## hive 集成\n\n```sql\n\ncreate table theme_click_log (user_id string , theme_id string,item_id string,leaf_cate_id string,cate_leve1_id string,\nclk_cnt int,reach_time date) row format delimited fields terminated by ',';\n\n```\n\n```sql\n\nalter table user_item_purchase_log set serdeproperties('field.delim'=',');\n\n```\n\n\n```sql\n\n\ncreate table theme_click_log (user_id string , theme_id string,item_id string,leaf_cate_id string,cate_leve1_id string,\nclk_cnt int,reach_time date) row format delimited fields terminated by ',';\ncreate table theme_item_pool (theme_id string,item_id string) row format delimited fields terminated by ',';\ncreate table user_item_purchase_log (user_id string,item_id string,paytime string);\ncreate table item_embedding (item_id string,emb string)row format delimited fields terminated by ',';\ncreate table user_embedding (user_id string,emb string) row format delimited fields terminated by ',';\n\n\n```\n\n```sql\n\ncreate table theme_click_log (user_id string , theme_id string,item_id string,leaf_cate_id string,cate_leve1_id string,\nclk_cnt int,reach_time date) row format delimited fields terminated by ',';\ncreate table theme_item_pool (theme_id string,item_id string) row format delimited fields terminated by ',';\ncreate table user_item_purchase_log (user_id string,item_id string,paytime string);\ncreate table item_embedding (item_id string,emb string)row format delimited fields terminated by ',';\ncreate table user_embedding (user_id string,emb string) row format delimited fields terminated by ',';\ndrop table test;\n\n\nload data local inpath '/data/upload/item_embedding.csv' overwrite into table item_embedding;\n\nselect count(*) from theme_click_log;\n```\n\n```\ncreate table theme_click_log (user_id string , theme_id string,item_id string,leaf_cate_id string,cate_leve1_id string,\nclk_cnt int,reach_time date) row format delimited fields terminated by ',';\ncreate table theme_item_pool (theme_id string,item_id string) row format delimited fields terminated by ',';\ncreate table user_item_purchase_log (user_id string,item_id string,paytime string);\ncreate table item_embedding (item_id string,emb string)row format delimited fields terminated by ',';\ncreate table user_embedding (user_id string,emb string) row format delimited fields terminated by ',';\ndrop table test;\n\n\nload data local inpath '/data/upload/item_embedding.csv' overwrite into table item_embedding;\n\nselect count(*) from item_embedding;\n\nload data local inpath '/data/upload/theme_item_pool.csv' overwrite into table theme_item_pool;\nload data local inpath '/data/upload/user_item_purchase_log.csv' overwrite into table user_item_purchase_log;\n\n```\n\n```sql\n\ncreate table flight_info (flight_id int,flight_time string,area string,flight_number int,rise_up_airport int,arrive_in_airport int,rise_up_time string,arrive_in_time string,airplane_id int,airplane_type int,importance double)\nrow format delimited\nfields terminated by '\\t';\n\n```","source":"_posts/王阁/技术/运维/cdh/hue.md","raw":"# hue 使用\n\n## hive 集成\n\n```sql\n\ncreate table theme_click_log (user_id string , theme_id string,item_id string,leaf_cate_id string,cate_leve1_id string,\nclk_cnt int,reach_time date) row format delimited fields terminated by ',';\n\n```\n\n```sql\n\nalter table user_item_purchase_log set serdeproperties('field.delim'=',');\n\n```\n\n\n```sql\n\n\ncreate table theme_click_log (user_id string , theme_id string,item_id string,leaf_cate_id string,cate_leve1_id string,\nclk_cnt int,reach_time date) row format delimited fields terminated by ',';\ncreate table theme_item_pool (theme_id string,item_id string) row format delimited fields terminated by ',';\ncreate table user_item_purchase_log (user_id string,item_id string,paytime string);\ncreate table item_embedding (item_id string,emb string)row format delimited fields terminated by ',';\ncreate table user_embedding (user_id string,emb string) row format delimited fields terminated by ',';\n\n\n```\n\n```sql\n\ncreate table theme_click_log (user_id string , theme_id string,item_id string,leaf_cate_id string,cate_leve1_id string,\nclk_cnt int,reach_time date) row format delimited fields terminated by ',';\ncreate table theme_item_pool (theme_id string,item_id string) row format delimited fields terminated by ',';\ncreate table user_item_purchase_log (user_id string,item_id string,paytime string);\ncreate table item_embedding (item_id string,emb string)row format delimited fields terminated by ',';\ncreate table user_embedding (user_id string,emb string) row format delimited fields terminated by ',';\ndrop table test;\n\n\nload data local inpath '/data/upload/item_embedding.csv' overwrite into table item_embedding;\n\nselect count(*) from theme_click_log;\n```\n\n```\ncreate table theme_click_log (user_id string , theme_id string,item_id string,leaf_cate_id string,cate_leve1_id string,\nclk_cnt int,reach_time date) row format delimited fields terminated by ',';\ncreate table theme_item_pool (theme_id string,item_id string) row format delimited fields terminated by ',';\ncreate table user_item_purchase_log (user_id string,item_id string,paytime string);\ncreate table item_embedding (item_id string,emb string)row format delimited fields terminated by ',';\ncreate table user_embedding (user_id string,emb string) row format delimited fields terminated by ',';\ndrop table test;\n\n\nload data local inpath '/data/upload/item_embedding.csv' overwrite into table item_embedding;\n\nselect count(*) from item_embedding;\n\nload data local inpath '/data/upload/theme_item_pool.csv' overwrite into table theme_item_pool;\nload data local inpath '/data/upload/user_item_purchase_log.csv' overwrite into table user_item_purchase_log;\n\n```\n\n```sql\n\ncreate table flight_info (flight_id int,flight_time string,area string,flight_number int,rise_up_airport int,arrive_in_airport int,rise_up_time string,arrive_in_time string,airplane_id int,airplane_type int,importance double)\nrow format delimited\nfields terminated by '\\t';\n\n```","slug":"王阁/技术/运维/cdh/hue","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/cdh/hue","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsh20072u6pw2pcv08f7","content":"<h1 id=\"hue-使用\"><a href=\"#hue-使用\" class=\"headerlink\" title=\"hue 使用\"></a>hue 使用</h1><h2 id=\"hive-集成\"><a href=\"#hive-集成\" class=\"headerlink\" title=\"hive 集成\"></a>hive 集成</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> theme_click_log (user_id <span class=\"keyword\">string</span> , theme_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>,leaf_cate_id <span class=\"keyword\">string</span>,cate_leve1_id <span class=\"keyword\">string</span>,</span><br><span class=\"line\">clk_cnt <span class=\"built_in\">int</span>,reach_time <span class=\"built_in\">date</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> user_item_purchase_log <span class=\"keyword\">set</span> serdeproperties(<span class=\"string\">'field.delim'</span>=<span class=\"string\">','</span>);</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> theme_click_log (user_id <span class=\"keyword\">string</span> , theme_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>,leaf_cate_id <span class=\"keyword\">string</span>,cate_leve1_id <span class=\"keyword\">string</span>,</span><br><span class=\"line\">clk_cnt <span class=\"built_in\">int</span>,reach_time <span class=\"built_in\">date</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> theme_item_pool (theme_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_item_purchase_log (user_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>,paytime <span class=\"keyword\">string</span>);</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> item_embedding (item_id <span class=\"keyword\">string</span>,emb <span class=\"keyword\">string</span>)<span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_embedding (user_id <span class=\"keyword\">string</span>,emb <span class=\"keyword\">string</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> theme_click_log (user_id <span class=\"keyword\">string</span> , theme_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>,leaf_cate_id <span class=\"keyword\">string</span>,cate_leve1_id <span class=\"keyword\">string</span>,</span><br><span class=\"line\">clk_cnt <span class=\"built_in\">int</span>,reach_time <span class=\"built_in\">date</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> theme_item_pool (theme_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_item_purchase_log (user_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>,paytime <span class=\"keyword\">string</span>);</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> item_embedding (item_id <span class=\"keyword\">string</span>,emb <span class=\"keyword\">string</span>)<span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_embedding (user_id <span class=\"keyword\">string</span>,emb <span class=\"keyword\">string</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> <span class=\"keyword\">test</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">load</span> <span class=\"keyword\">data</span> <span class=\"keyword\">local</span> inpath <span class=\"string\">'/data/upload/item_embedding.csv'</span> overwrite <span class=\"keyword\">into</span> <span class=\"keyword\">table</span> item_embedding;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">count</span>(*) <span class=\"keyword\">from</span> theme_click_log;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create table theme_click_log (user_id string , theme_id string,item_id string,leaf_cate_id string,cate_leve1_id string,</span><br><span class=\"line\">clk_cnt int,reach_time date) row format delimited fields terminated by &#39;,&#39;;</span><br><span class=\"line\">create table theme_item_pool (theme_id string,item_id string) row format delimited fields terminated by &#39;,&#39;;</span><br><span class=\"line\">create table user_item_purchase_log (user_id string,item_id string,paytime string);</span><br><span class=\"line\">create table item_embedding (item_id string,emb string)row format delimited fields terminated by &#39;,&#39;;</span><br><span class=\"line\">create table user_embedding (user_id string,emb string) row format delimited fields terminated by &#39;,&#39;;</span><br><span class=\"line\">drop table test;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">load data local inpath &#39;&#x2F;data&#x2F;upload&#x2F;item_embedding.csv&#39; overwrite into table item_embedding;</span><br><span class=\"line\"></span><br><span class=\"line\">select count(*) from item_embedding;</span><br><span class=\"line\"></span><br><span class=\"line\">load data local inpath &#39;&#x2F;data&#x2F;upload&#x2F;theme_item_pool.csv&#39; overwrite into table theme_item_pool;</span><br><span class=\"line\">load data local inpath &#39;&#x2F;data&#x2F;upload&#x2F;user_item_purchase_log.csv&#39; overwrite into table user_item_purchase_log;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> flight_info (flight_id <span class=\"built_in\">int</span>,flight_time <span class=\"keyword\">string</span>,area <span class=\"keyword\">string</span>,flight_number <span class=\"built_in\">int</span>,rise_up_airport <span class=\"built_in\">int</span>,arrive_in_airport <span class=\"built_in\">int</span>,rise_up_time <span class=\"keyword\">string</span>,arrive_in_time <span class=\"keyword\">string</span>,airplane_id <span class=\"built_in\">int</span>,airplane_type <span class=\"built_in\">int</span>,importance <span class=\"keyword\">double</span>)</span><br><span class=\"line\"><span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span></span><br><span class=\"line\"><span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">'\\t'</span>;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"hue-使用\"><a href=\"#hue-使用\" class=\"headerlink\" title=\"hue 使用\"></a>hue 使用</h1><h2 id=\"hive-集成\"><a href=\"#hive-集成\" class=\"headerlink\" title=\"hive 集成\"></a>hive 集成</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> theme_click_log (user_id <span class=\"keyword\">string</span> , theme_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>,leaf_cate_id <span class=\"keyword\">string</span>,cate_leve1_id <span class=\"keyword\">string</span>,</span><br><span class=\"line\">clk_cnt <span class=\"built_in\">int</span>,reach_time <span class=\"built_in\">date</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> user_item_purchase_log <span class=\"keyword\">set</span> serdeproperties(<span class=\"string\">'field.delim'</span>=<span class=\"string\">','</span>);</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> theme_click_log (user_id <span class=\"keyword\">string</span> , theme_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>,leaf_cate_id <span class=\"keyword\">string</span>,cate_leve1_id <span class=\"keyword\">string</span>,</span><br><span class=\"line\">clk_cnt <span class=\"built_in\">int</span>,reach_time <span class=\"built_in\">date</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> theme_item_pool (theme_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_item_purchase_log (user_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>,paytime <span class=\"keyword\">string</span>);</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> item_embedding (item_id <span class=\"keyword\">string</span>,emb <span class=\"keyword\">string</span>)<span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_embedding (user_id <span class=\"keyword\">string</span>,emb <span class=\"keyword\">string</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> theme_click_log (user_id <span class=\"keyword\">string</span> , theme_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>,leaf_cate_id <span class=\"keyword\">string</span>,cate_leve1_id <span class=\"keyword\">string</span>,</span><br><span class=\"line\">clk_cnt <span class=\"built_in\">int</span>,reach_time <span class=\"built_in\">date</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> theme_item_pool (theme_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_item_purchase_log (user_id <span class=\"keyword\">string</span>,item_id <span class=\"keyword\">string</span>,paytime <span class=\"keyword\">string</span>);</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> item_embedding (item_id <span class=\"keyword\">string</span>,emb <span class=\"keyword\">string</span>)<span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_embedding (user_id <span class=\"keyword\">string</span>,emb <span class=\"keyword\">string</span>) <span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span> <span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">','</span>;</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> <span class=\"keyword\">test</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">load</span> <span class=\"keyword\">data</span> <span class=\"keyword\">local</span> inpath <span class=\"string\">'/data/upload/item_embedding.csv'</span> overwrite <span class=\"keyword\">into</span> <span class=\"keyword\">table</span> item_embedding;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">count</span>(*) <span class=\"keyword\">from</span> theme_click_log;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create table theme_click_log (user_id string , theme_id string,item_id string,leaf_cate_id string,cate_leve1_id string,</span><br><span class=\"line\">clk_cnt int,reach_time date) row format delimited fields terminated by &#39;,&#39;;</span><br><span class=\"line\">create table theme_item_pool (theme_id string,item_id string) row format delimited fields terminated by &#39;,&#39;;</span><br><span class=\"line\">create table user_item_purchase_log (user_id string,item_id string,paytime string);</span><br><span class=\"line\">create table item_embedding (item_id string,emb string)row format delimited fields terminated by &#39;,&#39;;</span><br><span class=\"line\">create table user_embedding (user_id string,emb string) row format delimited fields terminated by &#39;,&#39;;</span><br><span class=\"line\">drop table test;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">load data local inpath &#39;&#x2F;data&#x2F;upload&#x2F;item_embedding.csv&#39; overwrite into table item_embedding;</span><br><span class=\"line\"></span><br><span class=\"line\">select count(*) from item_embedding;</span><br><span class=\"line\"></span><br><span class=\"line\">load data local inpath &#39;&#x2F;data&#x2F;upload&#x2F;theme_item_pool.csv&#39; overwrite into table theme_item_pool;</span><br><span class=\"line\">load data local inpath &#39;&#x2F;data&#x2F;upload&#x2F;user_item_purchase_log.csv&#39; overwrite into table user_item_purchase_log;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> flight_info (flight_id <span class=\"built_in\">int</span>,flight_time <span class=\"keyword\">string</span>,area <span class=\"keyword\">string</span>,flight_number <span class=\"built_in\">int</span>,rise_up_airport <span class=\"built_in\">int</span>,arrive_in_airport <span class=\"built_in\">int</span>,rise_up_time <span class=\"keyword\">string</span>,arrive_in_time <span class=\"keyword\">string</span>,airplane_id <span class=\"built_in\">int</span>,airplane_type <span class=\"built_in\">int</span>,importance <span class=\"keyword\">double</span>)</span><br><span class=\"line\"><span class=\"keyword\">row</span> <span class=\"keyword\">format</span> <span class=\"keyword\">delimited</span></span><br><span class=\"line\"><span class=\"keyword\">fields</span> <span class=\"keyword\">terminated</span> <span class=\"keyword\">by</span> <span class=\"string\">'\\t'</span>;</span><br></pre></td></tr></table></figure>"},{"_content":" ---\n title:  scala学习\n date:  2020-07-23\n tags:\n ---\n <!--more-->\n","source":"_posts/王阁/技术/编程/scala/scala学习.md","raw":" ---\n title:  scala学习\n date:  2020-07-23\n tags:\n ---\n <!--more-->\n","slug":"王阁/技术/编程/scala/scala学习","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/编程/scala/scala学习","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsh20074u6pw7pvwgnz5","content":"<hr>\n<p> title:  scala学习<br> date:  2020-07-23<br> tags:</p>\n<hr>\n <a id=\"more\"></a>\n","site":{"data":{}},"excerpt":"<hr>\n<p> title:  scala学习<br> date:  2020-07-23<br> tags:</p>\n<hr>","more":""},{"_content":"server {\n  listen 8089;\n  server_name ; // 你的域名或者 ip\n  root /root/H-ui.admin; // 你的克隆到的项目路径\n  index index.html; // 显示首页\n  location ~* ^.+\\.(jpg|jpeg|gif|png|ico|css|js|pdf|txt){\n    root //root/H-ui.admin;\n  } // 静态文件访问\n}\n\n\nserver {\n    listen       9001;\n    server_name  localhost;\n    location / {\n        root   /root/node-project/pm2test;\n        #index  index.html index.htm;\n    }\n}\n\n\n\n# For more information on configuration, see:\n#   * Official English Documentation: http://nginx.org/en/docs/\n#   * Official Russian Documentation: http://nginx.org/ru/docs/\n\nuser root;\nworker_processes auto;\nerror_log /var/log/nginx/error.log;\npid /run/nginx.pid;\n\n# Load dynamic modules. See /usr/share/nginx/README.dynamic.\ninclude /usr/share/nginx/modules/*.conf;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile            on;\n    tcp_nopush          on;\n    tcp_nodelay         on;\n    keepalive_timeout   65;\n    types_hash_max_size 2048;\n\n    include             /etc/nginx/mime.types;\n    default_type        application/octet-stream;\n\n    # Load modular configuration files from the /etc/nginx/conf.d directory.\n    # See http://nginx.org/en/docs/ngx_core_module.html#include\n    # for more information.\n\n    #include /etc/nginx/conf.d/*.conf;\n\n    server {\n  listen 8089;\n  server_name  116.196.81.123;\n  root /root/H-ui.admin;\n  index index.html;\n  location ~* ^.+\\.(jpg|jpeg|gif|png|ico|css|js|pdf|txt){\n    root //root/H-ui.admin;\n  }\n}\n    include /etc/nginx/default.d/*.conf;\n\n# Settings for a TLS enabled server.\n#\n#    server {\n#        listen       443 ssl http2 default_server;\n#        listen       [::]:443 ssl http2 default_server;\n#        server_name  _;\n#        root         /usr/share/nginx/html;\n#\n#        ssl_certificate \"/etc/pki/nginx/server.crt\";\n#        ssl_certificate_key \"/etc/pki/nginx/private/server.key\";\n#        ssl_session_cache shared:SSL:1m;\n#        ssl_session_timeout  10m;\n#        ssl_ciphers HIGH:!aNULL:!MD5;\n#        ssl_prefer_server_ciphers on;\n#\n#        # Load configuration files for the default server block.\n#        include /etc/nginx/default.d/*.conf;\n#\n#        location / {\n#        }\n#\n#        error_page 404 /404.html;\n#            location = /40x.html {\n#        }\n#\n#        error_page 500 502 503 504 /50x.html;\n#            location = /50x.html {\n#        }\n#    }\n\n}\n","source":"_posts/王阁/技术/运维/front_end/nginx部署.md","raw":"server {\n  listen 8089;\n  server_name ; // 你的域名或者 ip\n  root /root/H-ui.admin; // 你的克隆到的项目路径\n  index index.html; // 显示首页\n  location ~* ^.+\\.(jpg|jpeg|gif|png|ico|css|js|pdf|txt){\n    root //root/H-ui.admin;\n  } // 静态文件访问\n}\n\n\nserver {\n    listen       9001;\n    server_name  localhost;\n    location / {\n        root   /root/node-project/pm2test;\n        #index  index.html index.htm;\n    }\n}\n\n\n\n# For more information on configuration, see:\n#   * Official English Documentation: http://nginx.org/en/docs/\n#   * Official Russian Documentation: http://nginx.org/ru/docs/\n\nuser root;\nworker_processes auto;\nerror_log /var/log/nginx/error.log;\npid /run/nginx.pid;\n\n# Load dynamic modules. See /usr/share/nginx/README.dynamic.\ninclude /usr/share/nginx/modules/*.conf;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile            on;\n    tcp_nopush          on;\n    tcp_nodelay         on;\n    keepalive_timeout   65;\n    types_hash_max_size 2048;\n\n    include             /etc/nginx/mime.types;\n    default_type        application/octet-stream;\n\n    # Load modular configuration files from the /etc/nginx/conf.d directory.\n    # See http://nginx.org/en/docs/ngx_core_module.html#include\n    # for more information.\n\n    #include /etc/nginx/conf.d/*.conf;\n\n    server {\n  listen 8089;\n  server_name  116.196.81.123;\n  root /root/H-ui.admin;\n  index index.html;\n  location ~* ^.+\\.(jpg|jpeg|gif|png|ico|css|js|pdf|txt){\n    root //root/H-ui.admin;\n  }\n}\n    include /etc/nginx/default.d/*.conf;\n\n# Settings for a TLS enabled server.\n#\n#    server {\n#        listen       443 ssl http2 default_server;\n#        listen       [::]:443 ssl http2 default_server;\n#        server_name  _;\n#        root         /usr/share/nginx/html;\n#\n#        ssl_certificate \"/etc/pki/nginx/server.crt\";\n#        ssl_certificate_key \"/etc/pki/nginx/private/server.key\";\n#        ssl_session_cache shared:SSL:1m;\n#        ssl_session_timeout  10m;\n#        ssl_ciphers HIGH:!aNULL:!MD5;\n#        ssl_prefer_server_ciphers on;\n#\n#        # Load configuration files for the default server block.\n#        include /etc/nginx/default.d/*.conf;\n#\n#        location / {\n#        }\n#\n#        error_page 404 /404.html;\n#            location = /40x.html {\n#        }\n#\n#        error_page 500 502 503 504 /50x.html;\n#            location = /50x.html {\n#        }\n#    }\n\n}\n","slug":"王阁/技术/运维/front_end/nginx部署","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/front_end/nginx部署","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsh30076u6pwaq8icd9s","content":"<p>server {<br>  listen 8089;<br>  server_name ; // 你的域名或者 ip<br>  root /root/H-ui.admin; // 你的克隆到的项目路径<br>  index index.html; // 显示首页<br>  location ~* ^.+.(jpg|jpeg|gif|png|ico|css|js|pdf|txt){<br>    root //root/H-ui.admin;<br>  } // 静态文件访问<br>}</p>\n<p>server {<br>    listen       9001;<br>    server_name  localhost;<br>    location / {<br>        root   /root/node-project/pm2test;<br>        #index  index.html index.htm;<br>    }<br>}</p>\n<h1 id=\"For-more-information-on-configuration-see\"><a href=\"#For-more-information-on-configuration-see\" class=\"headerlink\" title=\"For more information on configuration, see:\"></a>For more information on configuration, see:</h1><h1 id=\"Official-English-Documentation-http-nginx-org-en-docs\"><a href=\"#Official-English-Documentation-http-nginx-org-en-docs\" class=\"headerlink\" title=\"* Official English Documentation: http://nginx.org/en/docs/\"></a>* Official English Documentation: <a href=\"http://nginx.org/en/docs/\" target=\"_blank\" rel=\"noopener\">http://nginx.org/en/docs/</a></h1><h1 id=\"Official-Russian-Documentation-http-nginx-org-ru-docs\"><a href=\"#Official-Russian-Documentation-http-nginx-org-ru-docs\" class=\"headerlink\" title=\"* Official Russian Documentation: http://nginx.org/ru/docs/\"></a>* Official Russian Documentation: <a href=\"http://nginx.org/ru/docs/\" target=\"_blank\" rel=\"noopener\">http://nginx.org/ru/docs/</a></h1><p>user root;<br>worker_processes auto;<br>error_log /var/log/nginx/error.log;<br>pid /run/nginx.pid;</p>\n<h1 id=\"Load-dynamic-modules-See-usr-share-nginx-README-dynamic\"><a href=\"#Load-dynamic-modules-See-usr-share-nginx-README-dynamic\" class=\"headerlink\" title=\"Load dynamic modules. See /usr/share/nginx/README.dynamic.\"></a>Load dynamic modules. See /usr/share/nginx/README.dynamic.</h1><p>include /usr/share/nginx/modules/*.conf;</p>\n<p>events {<br>    worker_connections 1024;<br>}</p>\n<p>http {<br>    log_format  main  ‘$remote_addr - $remote_user [$time_local] “$request” ‘<br>                      ‘$status $body_bytes_sent “$http_referer” ‘<br>                      ‘“$http_user_agent” “$http_x_forwarded_for”‘;</p>\n<pre><code>access_log  /var/log/nginx/access.log  main;\n\nsendfile            on;\ntcp_nopush          on;\ntcp_nodelay         on;\nkeepalive_timeout   65;\ntypes_hash_max_size 2048;\n\ninclude             /etc/nginx/mime.types;\ndefault_type        application/octet-stream;\n\n# Load modular configuration files from the /etc/nginx/conf.d directory.\n# See http://nginx.org/en/docs/ngx_core_module.html#include\n# for more information.\n\n#include /etc/nginx/conf.d/*.conf;\n\nserver {</code></pre><p>  listen 8089;<br>  server_name  116.196.81.123;<br>  root /root/H-ui.admin;<br>  index index.html;<br>  location ~* ^.+.(jpg|jpeg|gif|png|ico|css|js|pdf|txt){<br>    root //root/H-ui.admin;<br>  }<br>}<br>    include /etc/nginx/default.d/*.conf;</p>\n<h1 id=\"Settings-for-a-TLS-enabled-server\"><a href=\"#Settings-for-a-TLS-enabled-server\" class=\"headerlink\" title=\"Settings for a TLS enabled server.\"></a>Settings for a TLS enabled server.</h1><p>#</p>\n<h1 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server {\"></a>server {</h1><h1 id=\"listen-443-ssl-http2-default-server\"><a href=\"#listen-443-ssl-http2-default-server\" class=\"headerlink\" title=\"listen       443 ssl http2 default_server;\"></a>listen       443 ssl http2 default_server;</h1><h1 id=\"listen-443-ssl-http2-default-server-1\"><a href=\"#listen-443-ssl-http2-default-server-1\" class=\"headerlink\" title=\"listen       [::]:443 ssl http2 default_server;\"></a>listen       [::]:443 ssl http2 default_server;</h1><h1 id=\"server-name\"><a href=\"#server-name\" class=\"headerlink\" title=\"server_name  _;\"></a>server_name  _;</h1><h1 id=\"root-usr-share-nginx-html\"><a href=\"#root-usr-share-nginx-html\" class=\"headerlink\" title=\"root         /usr/share/nginx/html;\"></a>root         /usr/share/nginx/html;</h1><p>#</p>\n<h1 id=\"ssl-certificate-“-etc-pki-nginx-server-crt”\"><a href=\"#ssl-certificate-“-etc-pki-nginx-server-crt”\" class=\"headerlink\" title=\"ssl_certificate “/etc/pki/nginx/server.crt”;\"></a>ssl_certificate “/etc/pki/nginx/server.crt”;</h1><h1 id=\"ssl-certificate-key-“-etc-pki-nginx-private-server-key”\"><a href=\"#ssl-certificate-key-“-etc-pki-nginx-private-server-key”\" class=\"headerlink\" title=\"ssl_certificate_key “/etc/pki/nginx/private/server.key”;\"></a>ssl_certificate_key “/etc/pki/nginx/private/server.key”;</h1><h1 id=\"ssl-session-cache-shared-SSL-1m\"><a href=\"#ssl-session-cache-shared-SSL-1m\" class=\"headerlink\" title=\"ssl_session_cache shared:SSL:1m;\"></a>ssl_session_cache shared:SSL:1m;</h1><h1 id=\"ssl-session-timeout-10m\"><a href=\"#ssl-session-timeout-10m\" class=\"headerlink\" title=\"ssl_session_timeout  10m;\"></a>ssl_session_timeout  10m;</h1><h1 id=\"ssl-ciphers-HIGH-aNULL-MD5\"><a href=\"#ssl-ciphers-HIGH-aNULL-MD5\" class=\"headerlink\" title=\"ssl_ciphers HIGH:!aNULL:!MD5;\"></a>ssl_ciphers HIGH:!aNULL:!MD5;</h1><h1 id=\"ssl-prefer-server-ciphers-on\"><a href=\"#ssl-prefer-server-ciphers-on\" class=\"headerlink\" title=\"ssl_prefer_server_ciphers on;\"></a>ssl_prefer_server_ciphers on;</h1><p>#</p>\n<h1 id=\"Load-configuration-files-for-the-default-server-block\"><a href=\"#Load-configuration-files-for-the-default-server-block\" class=\"headerlink\" title=\"# Load configuration files for the default server block.\"></a># Load configuration files for the default server block.</h1><h1 id=\"include-etc-nginx-default-d-conf\"><a href=\"#include-etc-nginx-default-d-conf\" class=\"headerlink\" title=\"include /etc/nginx/default.d/*.conf;\"></a>include /etc/nginx/default.d/*.conf;</h1><p>#</p>\n<h1 id=\"location\"><a href=\"#location\" class=\"headerlink\" title=\"location / {\"></a>location / {</h1><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"}\"></a>}</h1><p>#</p>\n<h1 id=\"error-page-404-404-html\"><a href=\"#error-page-404-404-html\" class=\"headerlink\" title=\"error_page 404 /404.html;\"></a>error_page 404 /404.html;</h1><h1 id=\"location-40x-html\"><a href=\"#location-40x-html\" class=\"headerlink\" title=\"location = /40x.html {\"></a>location = /40x.html {</h1><h1 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"}\"></a>}</h1><p>#</p>\n<h1 id=\"error-page-500-502-503-504-50x-html\"><a href=\"#error-page-500-502-503-504-50x-html\" class=\"headerlink\" title=\"error_page 500 502 503 504 /50x.html;\"></a>error_page 500 502 503 504 /50x.html;</h1><h1 id=\"location-50x-html\"><a href=\"#location-50x-html\" class=\"headerlink\" title=\"location = /50x.html {\"></a>location = /50x.html {</h1><h1 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"}\"></a>}</h1><h1 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"}\"></a>}</h1><p>}</p>\n","site":{"data":{}},"excerpt":"","more":"<p>server {<br>  listen 8089;<br>  server_name ; // 你的域名或者 ip<br>  root /root/H-ui.admin; // 你的克隆到的项目路径<br>  index index.html; // 显示首页<br>  location ~* ^.+.(jpg|jpeg|gif|png|ico|css|js|pdf|txt){<br>    root //root/H-ui.admin;<br>  } // 静态文件访问<br>}</p>\n<p>server {<br>    listen       9001;<br>    server_name  localhost;<br>    location / {<br>        root   /root/node-project/pm2test;<br>        #index  index.html index.htm;<br>    }<br>}</p>\n<h1 id=\"For-more-information-on-configuration-see\"><a href=\"#For-more-information-on-configuration-see\" class=\"headerlink\" title=\"For more information on configuration, see:\"></a>For more information on configuration, see:</h1><h1 id=\"Official-English-Documentation-http-nginx-org-en-docs\"><a href=\"#Official-English-Documentation-http-nginx-org-en-docs\" class=\"headerlink\" title=\"* Official English Documentation: http://nginx.org/en/docs/\"></a>* Official English Documentation: <a href=\"http://nginx.org/en/docs/\" target=\"_blank\" rel=\"noopener\">http://nginx.org/en/docs/</a></h1><h1 id=\"Official-Russian-Documentation-http-nginx-org-ru-docs\"><a href=\"#Official-Russian-Documentation-http-nginx-org-ru-docs\" class=\"headerlink\" title=\"* Official Russian Documentation: http://nginx.org/ru/docs/\"></a>* Official Russian Documentation: <a href=\"http://nginx.org/ru/docs/\" target=\"_blank\" rel=\"noopener\">http://nginx.org/ru/docs/</a></h1><p>user root;<br>worker_processes auto;<br>error_log /var/log/nginx/error.log;<br>pid /run/nginx.pid;</p>\n<h1 id=\"Load-dynamic-modules-See-usr-share-nginx-README-dynamic\"><a href=\"#Load-dynamic-modules-See-usr-share-nginx-README-dynamic\" class=\"headerlink\" title=\"Load dynamic modules. See /usr/share/nginx/README.dynamic.\"></a>Load dynamic modules. See /usr/share/nginx/README.dynamic.</h1><p>include /usr/share/nginx/modules/*.conf;</p>\n<p>events {<br>    worker_connections 1024;<br>}</p>\n<p>http {<br>    log_format  main  ‘$remote_addr - $remote_user [$time_local] “$request” ‘<br>                      ‘$status $body_bytes_sent “$http_referer” ‘<br>                      ‘“$http_user_agent” “$http_x_forwarded_for”‘;</p>\n<pre><code>access_log  /var/log/nginx/access.log  main;\n\nsendfile            on;\ntcp_nopush          on;\ntcp_nodelay         on;\nkeepalive_timeout   65;\ntypes_hash_max_size 2048;\n\ninclude             /etc/nginx/mime.types;\ndefault_type        application/octet-stream;\n\n# Load modular configuration files from the /etc/nginx/conf.d directory.\n# See http://nginx.org/en/docs/ngx_core_module.html#include\n# for more information.\n\n#include /etc/nginx/conf.d/*.conf;\n\nserver {</code></pre><p>  listen 8089;<br>  server_name  116.196.81.123;<br>  root /root/H-ui.admin;<br>  index index.html;<br>  location ~* ^.+.(jpg|jpeg|gif|png|ico|css|js|pdf|txt){<br>    root //root/H-ui.admin;<br>  }<br>}<br>    include /etc/nginx/default.d/*.conf;</p>\n<h1 id=\"Settings-for-a-TLS-enabled-server\"><a href=\"#Settings-for-a-TLS-enabled-server\" class=\"headerlink\" title=\"Settings for a TLS enabled server.\"></a>Settings for a TLS enabled server.</h1><p>#</p>\n<h1 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server {\"></a>server {</h1><h1 id=\"listen-443-ssl-http2-default-server\"><a href=\"#listen-443-ssl-http2-default-server\" class=\"headerlink\" title=\"listen       443 ssl http2 default_server;\"></a>listen       443 ssl http2 default_server;</h1><h1 id=\"listen-443-ssl-http2-default-server-1\"><a href=\"#listen-443-ssl-http2-default-server-1\" class=\"headerlink\" title=\"listen       [::]:443 ssl http2 default_server;\"></a>listen       [::]:443 ssl http2 default_server;</h1><h1 id=\"server-name\"><a href=\"#server-name\" class=\"headerlink\" title=\"server_name  _;\"></a>server_name  _;</h1><h1 id=\"root-usr-share-nginx-html\"><a href=\"#root-usr-share-nginx-html\" class=\"headerlink\" title=\"root         /usr/share/nginx/html;\"></a>root         /usr/share/nginx/html;</h1><p>#</p>\n<h1 id=\"ssl-certificate-“-etc-pki-nginx-server-crt”\"><a href=\"#ssl-certificate-“-etc-pki-nginx-server-crt”\" class=\"headerlink\" title=\"ssl_certificate “/etc/pki/nginx/server.crt”;\"></a>ssl_certificate “/etc/pki/nginx/server.crt”;</h1><h1 id=\"ssl-certificate-key-“-etc-pki-nginx-private-server-key”\"><a href=\"#ssl-certificate-key-“-etc-pki-nginx-private-server-key”\" class=\"headerlink\" title=\"ssl_certificate_key “/etc/pki/nginx/private/server.key”;\"></a>ssl_certificate_key “/etc/pki/nginx/private/server.key”;</h1><h1 id=\"ssl-session-cache-shared-SSL-1m\"><a href=\"#ssl-session-cache-shared-SSL-1m\" class=\"headerlink\" title=\"ssl_session_cache shared:SSL:1m;\"></a>ssl_session_cache shared:SSL:1m;</h1><h1 id=\"ssl-session-timeout-10m\"><a href=\"#ssl-session-timeout-10m\" class=\"headerlink\" title=\"ssl_session_timeout  10m;\"></a>ssl_session_timeout  10m;</h1><h1 id=\"ssl-ciphers-HIGH-aNULL-MD5\"><a href=\"#ssl-ciphers-HIGH-aNULL-MD5\" class=\"headerlink\" title=\"ssl_ciphers HIGH:!aNULL:!MD5;\"></a>ssl_ciphers HIGH:!aNULL:!MD5;</h1><h1 id=\"ssl-prefer-server-ciphers-on\"><a href=\"#ssl-prefer-server-ciphers-on\" class=\"headerlink\" title=\"ssl_prefer_server_ciphers on;\"></a>ssl_prefer_server_ciphers on;</h1><p>#</p>\n<h1 id=\"Load-configuration-files-for-the-default-server-block\"><a href=\"#Load-configuration-files-for-the-default-server-block\" class=\"headerlink\" title=\"# Load configuration files for the default server block.\"></a># Load configuration files for the default server block.</h1><h1 id=\"include-etc-nginx-default-d-conf\"><a href=\"#include-etc-nginx-default-d-conf\" class=\"headerlink\" title=\"include /etc/nginx/default.d/*.conf;\"></a>include /etc/nginx/default.d/*.conf;</h1><p>#</p>\n<h1 id=\"location\"><a href=\"#location\" class=\"headerlink\" title=\"location / {\"></a>location / {</h1><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"}\"></a>}</h1><p>#</p>\n<h1 id=\"error-page-404-404-html\"><a href=\"#error-page-404-404-html\" class=\"headerlink\" title=\"error_page 404 /404.html;\"></a>error_page 404 /404.html;</h1><h1 id=\"location-40x-html\"><a href=\"#location-40x-html\" class=\"headerlink\" title=\"location = /40x.html {\"></a>location = /40x.html {</h1><h1 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"}\"></a>}</h1><p>#</p>\n<h1 id=\"error-page-500-502-503-504-50x-html\"><a href=\"#error-page-500-502-503-504-50x-html\" class=\"headerlink\" title=\"error_page 500 502 503 504 /50x.html;\"></a>error_page 500 502 503 504 /50x.html;</h1><h1 id=\"location-50x-html\"><a href=\"#location-50x-html\" class=\"headerlink\" title=\"location = /50x.html {\"></a>location = /50x.html {</h1><h1 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"}\"></a>}</h1><h1 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"}\"></a>}</h1><p>}</p>\n"},{"_content":"# docker 积累\n\n## 常用操作命令\n\ndocker pull XXXX\n\ndocker search nginx 搜索镜像\n\ndocker pull nginx 拉取镜像\n\ndocker images 查看镜像\n\ndocker save XXXX 导出镜象\n\n## Dockerfile\n\n```\nDockerfile 的组成 与常用编辑形式\n```\n\n","source":"_posts/王阁/技术/运维/docker/docker.md","raw":"# docker 积累\n\n## 常用操作命令\n\ndocker pull XXXX\n\ndocker search nginx 搜索镜像\n\ndocker pull nginx 拉取镜像\n\ndocker images 查看镜像\n\ndocker save XXXX 导出镜象\n\n## Dockerfile\n\n```\nDockerfile 的组成 与常用编辑形式\n```\n\n","slug":"王阁/技术/运维/docker/docker","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/docker/docker","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsh30077u6pwgkc55qk5","content":"<h1 id=\"docker-积累\"><a href=\"#docker-积累\" class=\"headerlink\" title=\"docker 积累\"></a>docker 积累</h1><h2 id=\"常用操作命令\"><a href=\"#常用操作命令\" class=\"headerlink\" title=\"常用操作命令\"></a>常用操作命令</h2><p>docker pull XXXX</p>\n<p>docker search nginx 搜索镜像</p>\n<p>docker pull nginx 拉取镜像</p>\n<p>docker images 查看镜像</p>\n<p>docker save XXXX 导出镜象</p>\n<h2 id=\"Dockerfile\"><a href=\"#Dockerfile\" class=\"headerlink\" title=\"Dockerfile\"></a>Dockerfile</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Dockerfile 的组成 与常用编辑形式</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"docker-积累\"><a href=\"#docker-积累\" class=\"headerlink\" title=\"docker 积累\"></a>docker 积累</h1><h2 id=\"常用操作命令\"><a href=\"#常用操作命令\" class=\"headerlink\" title=\"常用操作命令\"></a>常用操作命令</h2><p>docker pull XXXX</p>\n<p>docker search nginx 搜索镜像</p>\n<p>docker pull nginx 拉取镜像</p>\n<p>docker images 查看镜像</p>\n<p>docker save XXXX 导出镜象</p>\n<h2 id=\"Dockerfile\"><a href=\"#Dockerfile\" class=\"headerlink\" title=\"Dockerfile\"></a>Dockerfile</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Dockerfile 的组成 与常用编辑形式</span><br></pre></td></tr></table></figure>\n\n"},{"title":"日期处理","date":"2023-02-19T16:00:00.000Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n\n\n # 日期处理\n\n ```java\n //获的localDate\n        LocalDate localDate = LocalDate.now();\n        System.out.println(localDate);\n        LocalTime localTime = LocalTime.now();\n        System.out.println(localTime);\n        LocalDateTime localDateTime = LocalDateTime.now();\n        System.out.println(localDateTime);\n        LocalTime time = LocalTime.of(9, 30, 0);\n        LocalDateTime datetime = LocalDateTime.of(2023, 2, 20, 9, 30, 0);\n        System.out.println(datetime);\n        ZoneId zoneId = ZoneId.of(\"America/New_York\");\n//        ZoneId zoneIdNew = ZoneId.of(\"Asia/Shanghai\");\n        ZonedDateTime zonedDateTime = ZonedDateTime.of(2023, 2, 20, 9, 30, 0, 0, zoneId);\n        System.out.println(zonedDateTime);\n        Duration duration = Duration.ofHours(2);\n        System.out.println(duration.toHours());\n        Period period = Period.of(1, 6, 0);\n        System.out.println(period.toString());\n        System.out.println(period.getYears());\n        //time convert\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"hh:mm:ss a\");\n        System.out.println(time.format(formatter));\n        String timeString = \"09:30:00 上午\";\n        LocalTime time2 = LocalTime.parse(timeString, formatter);\n        System.out.println(time2);\n        System.out.println(Timestamp.valueOf(localDateTime).getTime());\n        Instant instant = Instant.now();\n        System.out.println(instant.toEpochMilli());\n        ZoneId zone = ZoneId.systemDefault();\n        System.out.println(LocalDateTime.ofInstant(instant, zone));\n        System.out.println(localDateTime.atZone(zone).toInstant().toEpochMilli());\n\n ```\n\n\n[日期处理类](https://blog.csdn.net/c15158032319/article/details/116306929)\n\n[日期处理2](https://developer.aliyun.com/article/861856)\n\n[日期处理3](https://blog.csdn.net/zhang89xiao/article/details/78789423)\n","source":"_posts/王阁/技术/编程/java/日期处理.md","raw":"title:  日期处理\ndate:  2023-02-20\ntags: [java,LocalDate,Duration]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n\n\n # 日期处理\n\n ```java\n //获的localDate\n        LocalDate localDate = LocalDate.now();\n        System.out.println(localDate);\n        LocalTime localTime = LocalTime.now();\n        System.out.println(localTime);\n        LocalDateTime localDateTime = LocalDateTime.now();\n        System.out.println(localDateTime);\n        LocalTime time = LocalTime.of(9, 30, 0);\n        LocalDateTime datetime = LocalDateTime.of(2023, 2, 20, 9, 30, 0);\n        System.out.println(datetime);\n        ZoneId zoneId = ZoneId.of(\"America/New_York\");\n//        ZoneId zoneIdNew = ZoneId.of(\"Asia/Shanghai\");\n        ZonedDateTime zonedDateTime = ZonedDateTime.of(2023, 2, 20, 9, 30, 0, 0, zoneId);\n        System.out.println(zonedDateTime);\n        Duration duration = Duration.ofHours(2);\n        System.out.println(duration.toHours());\n        Period period = Period.of(1, 6, 0);\n        System.out.println(period.toString());\n        System.out.println(period.getYears());\n        //time convert\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"hh:mm:ss a\");\n        System.out.println(time.format(formatter));\n        String timeString = \"09:30:00 上午\";\n        LocalTime time2 = LocalTime.parse(timeString, formatter);\n        System.out.println(time2);\n        System.out.println(Timestamp.valueOf(localDateTime).getTime());\n        Instant instant = Instant.now();\n        System.out.println(instant.toEpochMilli());\n        ZoneId zone = ZoneId.systemDefault();\n        System.out.println(LocalDateTime.ofInstant(instant, zone));\n        System.out.println(localDateTime.atZone(zone).toInstant().toEpochMilli());\n\n ```\n\n\n[日期处理类](https://blog.csdn.net/c15158032319/article/details/116306929)\n\n[日期处理2](https://developer.aliyun.com/article/861856)\n\n[日期处理3](https://blog.csdn.net/zhang89xiao/article/details/78789423)\n","slug":"王阁/技术/编程/java/日期处理","published":1,"updated":"2023-02-23T02:51:58.925Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsh70079u6pw97698pj4","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"e417973e86a27d5baad523d636ed2e8e1212987a9c1e3976d0aca0a157d754f0\">f29c680708acd02cbb1b6cceaba061920c4cbe4fe4debffb751a339f551515e45728857bfc859843a530beb65afefebbf1976cf16829b9a466257871efbcdb58e9f7a0f8ca2d859fb7b1d833ac09cbcdaa6133272c3162b5f70f2309c1dfa3a51289dfd324cbfb10228e1f3825ddd91caae3145cf236d74e18fbb072049baa24718cc0b543814a1825b880cbde18234127b1bc42f897291580e77945786698ce22a9baacae0f8af8ae93c1421360a3a9b3609092279eef8fd78804d91221d83275b509b936ce5813054ec276550c81508c3b5a5a3662d238f0001e714ef5778bf09d69fc0f7b55ac34417edf765ec4848ec4ddff856b0a04ff693cc100be57606a159d6aaa841a99414674c92b88cb4b0f451c6e0fa310aae20e6b0fad027d2e81a34685007b0947b95dd08c4600897e90dfe8c92af2cc7a214e6d0e70fb395d327c7816d29bce3b734c3a7f9c16da44828a01b1d630392741af32e1a4531a97e2c6ae5026fc955dc20b2098f1f45a93032d7e525f86db7bb727cd4c8e67b52ef11f18bc9a8b05ba0f3fc0a871714bb2c782b1d25c933aa1e737b12327e1c5a608ee2b21d123d61ff1a279afe30e665874f0889166d316adf58a7b86b7bcbb8b8c435d8297d8ee89ebee5ead55ecd76e611952a412333d5cd51d0deefc05189e6c5ff7eb96344a29922e8ad32cbf35666205f1699c828d804b0ff65b846641e8511136fbc236042d1c3010ec983d9d361dccbce39c861617a9cdfd86223295e5858fdd83709d76d8182076a884e06e4838f4a7d7207d07d63bd90921b3537f5d051ae47fe12909793ebb9aa09a30b8efcdd6e520788bb9d2a291f6e1f4a265bee0ef71581b44a34f04fd3257da915a220fa261661269c8d583d741c53f6b85c3a5411c69bb9d45627df268e4075c130c04e5b578fab9c2e19b222007e9bfa091dd38e74a949e074a63eb1ef9f57ef49109859dbbba5ecc131e52e277c725c134ce6e1111964944bf37657343604decc8bbc377131034527b0f318ef21c1355c0fbaaace6eb45c24b6ac87a3f8ea97daf58f357498c7edd52101f5b677ff6987096aa3cc70b1f045c09ff34b2a8e4f2370821db788074eebd50ddd274efa5f54a7392d124f3bc3a93fd99efcfaddefd0d05422782b4b633a8cf304a89fbd7dd016e2011afa3ad1708450372e3a79efdddd829f51b956f581d541112ea91e25784280d74623e8160290dadb70872dc680479050362363c47f76bdb1861f751aaebda1102809f6d8b73df2c251e8a17bb12da6c2afe881eb421b2e0a3781d9a82a91f3521c4b1948937280b9183804c7add7ec72dca04b83abe749c71a35564d180759871993a7ee3e0ebaf098d502bd2b9bd6639e390f70df96a54bd36ac2961fc666b790b77ec4436a498a7703bc2d84822fc5578b9aef92b0336a3818c72b908826f2062abe7b0e6a978ea450924bfc53aee5fe6e0e2ffc613b89d9ccf6803c8864b09a06c3827384e1207ad8200261fa2d934b740c5c888c98b610458b7e7f2404c3358187e7334e70d81d025f55f71b19cae9c8f1b8db0878fa3e295d052068cccb5d7e9f4a736dbccfd567421627ac243bc1d9030e7f344a842ae0b466f7fe511e62e9e2e95929e6447bfb3219824672357c65e88744354ab6b9c7c19e4e2a891e4d925322826a545a0f2410c2056c4f8c69dc18d24d94cc25a40dd085c5f33f761df56f0f02ea5fd584f2f743b06c682223047b0aeeaabc0bd077f72e6e12b2e7b109bc7b3ff860b2066ec7e128a92c292bc30d1a00f00c402013d0b111261fb2fb03b23fff66c7db037d2c1b8afccf481ca53549af85cb8e221be4532f064672924d235ac172dbb2277a682e9c521832f68ff7d8c204d1ac9bb20e5db186d178befd5dfb8c6c27bca02068a83fd51b0f7930ed991c317a1bc46043ed7f52a02551fc8c2022432bad3fb464010af3171c94fadd4fde6812bf967e868c807b604ff1925506ae0bf3ba796957ef36896b8cebe18ca3d32c3fac98f95e5142f8e798683e665d4aab797a8a03613733ffc5d16ff0a9e0498b2bdfc36ad8122bc066f2eee6fd4e9a47a12839a14604b3e26b819e273ebfc81b2b82f2a2b00c6ec2a5cdb5a132f5ca80ba4e21108885a00c3ca10f9563593c3caf81dfbf2f709740a80b68e1010df6075c526e2e1d0dc181176cc20b262594174dcfb12a8860c3e338bc07d8476b5a36821e536c561bf0e0f4e950876047be3820afd55225fa1ba24da6ef85b5427dc03dabf28cb4ceac4d41d4457531030e907011d9e20c5f06a9f7a6af17dde45b780d6d74388fe8616c0ae34bae00443f2f8ce115cbb2f018c6cc8c92a19c214d49d7735de31e74f726c3a743ec516fdfcf3eff013d9348480f41c9d73562562bff5572328332f2fb842c0cb0e6d06633f93e2ecb871c3a7b4ea36b3c8d1a12672b445682b388963fec74549a8433495e5f90a27f86fc44b08180787d5e5f41579d8189d0b693a46121fd4ad5ae8732828fd7280494e593165468c5e36ab2d5cdb360971595ff68da3797079942a9b75aa792f49d1d6bd2b7bc62520dc3f34f43edf4d589278029f4dbb802aeed3e09a0294eab3337695f646e7a64ac96f33f8c097bcc76586d44f3510c33cc3caf5c1a5a5ad637bd3442514538d8f61774912f33ada42a9e263e4924bae20f85cf2a9be92057f6dbbed96281eacb053a92aaf81ec3053687df7b8a0b08e1e266ed95e493f2bea9da9f87858c96d5b2317cf3849e4093be308a7b84454bccd5b716129b4ad14c70906d6ee854ce0ac4d80ffe9aabdefa80e0461623332ac37e92aba0526686cfc6967b433813487cd4c1bad10a88390f224a6edfe87d101af3d7521f7010bea52da582e70c190d1204db2890f65257389f23234386f0a973cebb015169584e7f1893d5f4999d42faa1614fddcdd1534751dc9d0de4d923676ff848c15bc9d3fc8829fece83fcd373f096a39c387c4ff2fa95d62b22f329c5e5035ed16c7037c84eb257b3a70b7fdf6993db4e8a1edbcfed1055e0e97577cae104c9f0d6656f5b8309bf845eed49e54defa2d6e948a9bbb7a86874cde665f5e524fbe1f45dae4cb19edaa58b2bba12275fbd4d3e85c9f64f7e2f2ba61136cb44e60665c68942e539469625d64b1997051c757c721b089226e75b6eeb2be8d088cd1d5f772129be1a10f8e74900cb5064029f0310a9b6c1016d8f882bba57b18efcc824114cbe9d9b09c106aaf5ce51170d0562f0773f532185366611605b4b902aa0d457be2c7e2f19bd1ee9cbbe0dcfe2ff74c2b1badc6efaa45a944a194543f7fb131db394ebe92484e64821930e3500f36ea5f2c662b0e23059dfcbbb9fb71577027df5d59d7689693e1fdd9f5fe747e07dc3257085ab1b5e6fb23df93db393af8c71a9d9fa4685be70c0ec3249f0f2738363063855aad9283ecf2563a4c9b34d1d157cb4ef985b6cf27fbc08505519631d530e74b7027f81f18c5458233f7eedd0040797a90a5c1518b4dc784c2ba8827954e8d27247d7e3e7220ce7e5a75b3b866cdc3d98b4f4850dbcd867e17762640b5e5cededb9cc5cf8f3820edb758bbdcdf93d5e2839c370ea3d75d3a6ef182b285f43bbfb7e57c2799d91e662f5b3cb23abb31ef37e3dd4fde719faa6a4ad1f2841dcf3d2b08dd1eabc2edb4d2984894531dd09a9c202a0f66159706eded56af15bd9e218fe287b5dc6d383a50baa67b7a158fb1a07f11fabf944f5a7c416e8cc340916da34b0672a0bdd8acb78fb747491c56bc98c0da72df6c9af2e9f12f0a0d6a36e2b2cad6344f8d24f082d9b9cac117d01724849aa1ad086ca4698ae91afedef23b8581b1ffa5cf3bba466a2a36b781eb431507fa37d925142f0610eff88f074d0b0b17c5cb08aa4ba7ec4eff90eb52f16a83983a87b31f16a9652df673c4ea52ece57f8ba90aef1fd88239718911aa15d074ac65cd63b9ccfaf24fe7b3b0d478a9b975b97d1c0be58c4172f514ce0018e44b68725837a76cc029dbce5d3a896de0c5a34ee9edac11e36ad91b5e2000c00f08094333107829d609c2cf6a5618865c100d82891df0d3bc15a307bcb46711be95ca5ab500cbd9a51a315d558ee1df6e2731bf5cf71c62071585acd83c0be27085b36ace4c311dc936417d02639ce53f7845f208423bb283d27bb7bcb86652649426ecfeb9fb74df355d6d03bc488a6490154e9508910019882a46066173fb655a5334bad9ce9d2959c607dcff966c9646d362deead069df89bda11bf7b86d24538c34514dbd1c95331fd84486f0671200115ec203e63c04f40c4c125f61be91e10a99d8d47a523809a3ff0f0d865db49f8b91019596af23db24f3fcf4c5451559f89e49ef022dbc66c1702c8828fdbfe5fa27269ec5ac18d13b2f6291c54794a05ab462913335e4fc739742fff97a8832d603cd345dd5f05f9e6ba925af3be55b82098bab354d34c9c3a9c60bb8398de70ed6c8c0023235f446a5419568055d00e9d262ac7651a74f0d59dcbe188e0c51685ed5c6069066b04f22fabc08a59ffd1c9837914a1d364b59a54b6839a1614c677c7ca12710c5c6e7a7f5714e99a93ca994db2388fb3607b623a9905e4042b7e969e6a1aea5f525280bc05557dbaf820d50e0a14eb01cca79bb2cd326d56c5146898db48ebe6367cbd1afc7ed39907d4f3feed7124d425d610c6c618acc9b60be91060c4d964bb6df9b04f94325726c9d444ef2be35ea34235ba527ada8f9f8a52d6bdd2656ef9a244401f7f90dd9012c8d34bf2947bd1b9909d4cdd7c324f195676de1a6c5ec9ef66f1065469230dc4ea3c0c1e62559cfa3edf14f3e7bfc7587e96649b7d1372c8b770cb7e9a98326114064e23d3b5c6a2b4e91cf48b8f9d98207f80154eaa6dca5f73fd4c2d084368cbaf7d8ece180235007b95b73f9308b644e15c870adcdb1c72a32619b83eabffb9819b83436e7eeba1204925503c410f94a3b11c44a2afcfd459aed3a14ca072ca3210976f2b643bf6f4d98d00f943c9584c4aa14cbe5b4bb3b23898d52631a24554a219dfd23d4915e9a306c73d7e1c970f77052005e78fdbdef63f9c993ab47fc4ca48c7f830317205eb64b48c148ee7a3636b5c9e74ae5ed22028c023442366f88617ca9a283697f9df0c97262cc9c44850b7419bceb6ceba79ac550adbcfb2d52a8a8fb7f816bfaff3d86025b16cf51e80f21fa1fd30de809406e97c472c2221d281353cca6abc459b0bb060ebfdcd188a14b2cbb8c9c7664bf063c373711264e96d4177400cb3c0a91f2d90445415a60395b4a7abaad6d08ea920bce4b11ac5a157300050c82b7cc0f8d37de8271ceb9e10656fe8c5678f299dabee1725f531b5ff85b1dbbc23aee9802f697e4bd6215de3d05b52b51ee00c82c186353f3eb9259cf6550d4c8eeff462cb7d1bc7c738849b9f7d5e81859f8861ffdf64338d70a522698330476e3955e1837586d92945d88092fb220002a5472bd43c35c60d31442d4e9f12f6d142a477fa7fe33519970ae126a2b8793a4717208a6e6f4d6cf1424a3d0e844c19716264a2ee5134c4e156483481d1da5d6a6baba0d30f213436397abc09e9f0b42c332c500c95c088b48632e496a9990998592419dd9a1e827b149b0473b9c6be3de68a5fdd68e557c05c791261c645e8295994ea194bf28ff6293330f33f67de231c75366fc5955471f18000590560f4e00b70e83395a067f3508794546d03bd1908e7c35cf9f99e40e9e305976feee89d5c92814c6c62da9c22e8fd828ada489f905353a5a8f1a6be6860d9099eb00ddb1499862f1a9a93d36fa3067f31061700de8f4bf657606cd60af0d765601505a7e572c7d12c7c038c5c4561c679a5a9fda24abd9069191e27b7593dff77b702ad2c10ee18d7c2f9b5b729bd3f249cf0b203be0ffc12d03a458144f01079423830f0ef0ec5b84ddddc10ecd42a1c245c6e37f7bf0725cdf4f26fa874053ee4683c6ec55f54d803fa41277795f6ea4671a534675bad49924d6c2a93a6f7921be1d3d954f310c0b4b7271ab775676a07a57962d184bc7cd8947bbf451a20d8b87c47dae0b1b16174566cb1ae2b0d1299d18bb15417356ef4afb1fbb0ca6b8ebe097fb839df6794055e925663ce32b2bb817c8ffc5a949cdb34341d9fcbadcaf607139c7a2b4ba8969ccd2ed6e3ed177ad3bf86e0bc4c4462521fb3e2548f686a241c10ed86de824aeae0c67fa13e22502dfc957be09367be1298cb0e76c83e7e2d004d21544f66ac6b02c704d54d6739b1d99374ae15d971e89ab8a3e8515a5cdb3e45cdbae3c85eaa387a8640d46186e43ad8220cc946be7f7c82e64574ed7077846bfac4b0114a718da0e41175e0534af50ab17d5979bb5c6bba286ffc0994f4fc3db9002b46260a7f6cba3a650fe0878d3b8dbb7442bab41b74567a92d6b85897d849f0096d24c9b15dab3798325d35248263fdc7f177b36f30032c5d030a154b18b6d99845b438af85ad6f32038995f0e36f58edcc1b92baf8df2a4d7c6e80307102f79f935f43d4c1060ba66962155494b39dcbb13b0b6727302480d8e4ea0ed93845f6484c97229b7a253ab47c5fcc92d44744db07bf7d3fab99d522fc68f0af3b61843d31395e88ef1d34567e525edececf6d3513652552fc2f6b0819b9eb10b3b823a00c46fc71ce135f5294e5469279a1dd9fd242abcf202cf359fe151cecfba10731cfd7bf2bee8ed906d3c6c0009e85ab3fa5362a6ef2db186bbc979e2b6ec089f3706a05e2d4ed313f4b9a0e6c4daf2db0c4005f793b571d02574be0179b27dbee8531502703b208a96e15d784a592e543a9e5ac491f9</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n\n<h1 id=\"日期处理\"><a href=\"#日期处理\" class=\"headerlink\" title=\"日期处理\"></a>日期处理</h1> <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">//获的localDate</span></span><br><span class=\"line\">        LocalDate localDate = LocalDate.now();</span><br><span class=\"line\">        System.out.println(localDate);</span><br><span class=\"line\">        LocalTime localTime = LocalTime.now();</span><br><span class=\"line\">        System.out.println(localTime);</span><br><span class=\"line\">        LocalDateTime localDateTime = LocalDateTime.now();</span><br><span class=\"line\">        System.out.println(localDateTime);</span><br><span class=\"line\">        LocalTime time = LocalTime.of(<span class=\"number\">9</span>, <span class=\"number\">30</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        LocalDateTime datetime = LocalDateTime.of(<span class=\"number\">2023</span>, <span class=\"number\">2</span>, <span class=\"number\">20</span>, <span class=\"number\">9</span>, <span class=\"number\">30</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        System.out.println(datetime);</span><br><span class=\"line\">        ZoneId zoneId = ZoneId.of(<span class=\"string\">\"America/New_York\"</span>);</span><br><span class=\"line\"><span class=\"comment\">//        ZoneId zoneIdNew = ZoneId.of(\"Asia/Shanghai\");</span></span><br><span class=\"line\">        ZonedDateTime zonedDateTime = ZonedDateTime.of(<span class=\"number\">2023</span>, <span class=\"number\">2</span>, <span class=\"number\">20</span>, <span class=\"number\">9</span>, <span class=\"number\">30</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, zoneId);</span><br><span class=\"line\">        System.out.println(zonedDateTime);</span><br><span class=\"line\">        Duration duration = Duration.ofHours(<span class=\"number\">2</span>);</span><br><span class=\"line\">        System.out.println(duration.toHours());</span><br><span class=\"line\">        Period period = Period.of(<span class=\"number\">1</span>, <span class=\"number\">6</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        System.out.println(period.toString());</span><br><span class=\"line\">        System.out.println(period.getYears());</span><br><span class=\"line\">        <span class=\"comment\">//time convert</span></span><br><span class=\"line\">        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(<span class=\"string\">\"hh:mm:ss a\"</span>);</span><br><span class=\"line\">        System.out.println(time.format(formatter));</span><br><span class=\"line\">        String timeString = <span class=\"string\">\"09:30:00 上午\"</span>;</span><br><span class=\"line\">        LocalTime time2 = LocalTime.parse(timeString, formatter);</span><br><span class=\"line\">        System.out.println(time2);</span><br><span class=\"line\">        System.out.println(Timestamp.valueOf(localDateTime).getTime());</span><br><span class=\"line\">        Instant instant = Instant.now();</span><br><span class=\"line\">        System.out.println(instant.toEpochMilli());</span><br><span class=\"line\">        ZoneId zone = ZoneId.systemDefault();</span><br><span class=\"line\">        System.out.println(LocalDateTime.ofInstant(instant, zone));</span><br><span class=\"line\">        System.out.println(localDateTime.atZone(zone).toInstant().toEpochMilli());</span><br></pre></td></tr></table></figure>\n\n\n<p><a href=\"https://blog.csdn.net/c15158032319/article/details/116306929\" target=\"_blank\" rel=\"noopener\">日期处理类</a></p>\n<p><a href=\"https://developer.aliyun.com/article/861856\" target=\"_blank\" rel=\"noopener\">日期处理2</a></p>\n<p><a href=\"https://blog.csdn.net/zhang89xiao/article/details/78789423\" target=\"_blank\" rel=\"noopener\">日期处理3</a></p>\n","encrypt":true},{"_content":"# Dockerfile基础\n\n```\nDockerfile用于指定docker build 指令时执行时的动作与资源划分等,如指定分配内存大小,cpu个数等.从而构成相应的镜像\n\n```\n\n## 详细指令\n\n![docker详细指令](http://img.wqkenqing.ren/5aaf3a25b3434c7b1ec0cd5b41b2be1a.png)\n\n如上图即docker主要的指令与作用\n\n\nDockerfile由多条指令组成,每条指令在编译镜像时执行相应的程序完成某些功能,指令+参数组成，以逗号分隔，#作为注释起始符，虽说指令不区分大小写，但是一般指令使用大些，参数使用小写.\n\n\n\n### 指令：FROM\n\n功能描述：设置基础镜像\n语法：FROM < image>[:< tag> | @< digest>]\n提示：镜像都是从一个基础镜像（操作系统或其他镜像）生成，可以在一个Dockerfile中添加多条FROM指令，一次生成多个镜像\n注意：如果忽略tag选项，会使用latest镜像\n\n### 指令：MAINTAINER\n\n功能描述：设置镜像作者\n语法：MAINTAINER < name>\n\n\n### 指令：RUN\n\n功能描述：\n语法：RUN < command>\n          RUN [“executable”,”param1”,”param2”]\n提示：RUN指令会生成容器，在容器中执行脚本，容器使用当前镜像，脚本指令完成后，Docker Daemon会将该容器提交为一个中间镜像，供后面的指令使用\n补充：RUN指令第一种方式为shell方式，使用/bin/sh -c < command>运行脚本，可以在其中使用\\将脚本分为多行\n          RUN指令第二种方式为exec方式，镜像中没有/bin/sh或者要使用其他shell时使用该方式，其不会调用shell命令\n例子：RUN source $HOME/.bashrc;\\\n          echo $HOME\n\n          RUN [“/bin/bash”,”-c”,”echo hello”]\n\n          RUN [“sh”,”-c”,”echo”,”$HOME”] 使用第二种方式调用shell读取环境变量\n\n### 指令：CMD\n\n功能描述：设置容器的启动命令\n语法：CMD [“executable”,”param1”,”param2”]\n          CMD [“param1”,”param2”]\n          CMD < command>\n提示：CMD第一种、第三种方式和RUN类似，第二种方式为ENTRYPOINT参数方式，为entrypoint提供参数列表\n注意：**Dockerfile中只能有一条CMD命令，如果写了多条则最后一条生效**\n\n### 指令：LABEL\n功能描述：设置镜像的标签\n延伸：镜像标签可以通过docker inspect查看\n格式：LABEL < key>=< value> < key>=< value> …\n提示：不同标签之间通过空格隔开\n注意：每条指令都会生成一个镜像层，Docker中镜像最多只能有127层，如果超出Docker Daemon就会报错，如LABEL ..=.. <假装这里有个换行> LABEL ..=..合在一起用空格分隔就可以减少镜像层数量，同样，可以使用连接符\\将脚本分为多行镜像会继承基础镜像中的标签，如果存在同名标签则会覆盖\n\n### 指令：EXPOSE\n功能描述：设置镜像暴露端口，记录容器启动时监听哪些端口\n语法：EXPOSE < port> < port> …\n延伸：镜像暴露端口可以通过docker inspect查看\n提示：容器启动时，Docker Daemon会扫描镜像中暴露的端口，如果加入-P参数，Docker Daemon会把镜像中所有暴露端口导出，并为每个暴露端口分配一个随机的主机端口（暴露端口是容器监听端口，主机端口为外部访问容器的端口）\n注意：EXPOSE只设置暴露端口并不导出端口，只有启动容器时使用-P/-p才导出端口，这个时候才能通过外部访问容器提供的服务\n\n### 指令：ENV\n功能描述：设置镜像中的环境变量\n语法：ENV < key>=< value>…|< key> < value>\n注意：环境变量在整个编译周期都有效，第一种方式可设置多个环境变量，第二种方式只设置一个环境变量\n提示：通过${变量名}或者 $变量名使用变量，使用方式${变量名}时可以用${变量名:-default} ${变量名:+cover}设定默认值或者覆盖值 ENV设置的变量值在整个编译过程中总是保持不变的\n\n### 指令：ADD\n功能描述：复制文件到镜像中\n语法：ADD < src>… < dest>|[“< src>”,… “< dest>”]\n注意：当路径中有空格时，需要使用第二种方式\n          当src为文件或目录时，Docker Daemon会从编译目录寻找这些文件或目录，而dest为镜像中的绝对路径或者相对于WORKDIR的路径\n提示：src为目录时，复制目录中所有内容，包括文件系统的元数据，但不包括目录本身\n          src为压缩文件，并且压缩方式为gzip,bzip2或xz时，指令会将其解压为目录\n          如果src为文件，则复制文件和元数据\n          如果dest不存在，指令会自动创建dest和缺失的上级目录\n\n### 指令：COPY\n功能描述：复制文件到镜像中\n语法：COPY < src>… < dest>|[“< src>”,… “< dest>”]\n提示：指令逻辑和ADD十分相似，同样Docker Daemon会从编译目录寻找文件或目录，dest为镜像中的绝对路径或者相对于WORKDIR的路径\n\n### 指令：ENTRYPOINT\n功能描述：设置容器的入口程序\n语法：ENTRYPOINT [“executable”,”param1”,”param2”]\n          ENTRYPOINT command param1 param2（shell方式）\n提示：入口程序是容器启动时执行的程序，docker run中最后的命令将作为参数传递给入口程序\n          入口程序有两种格式：exec、shell，其中shell使用/bin/sh -c运行入口程序，此时入口程序不能接收信号量\n          当Dockerfile有多条ENTRYPOINT时只有最后的ENTRYPOINT指令生效\n          如果使用脚本作为入口程序，需要保证脚本的最后一个程序能够接收信号量，可以在脚本最后使用exec或gosu启动传入脚本的命令\n注意：通过shell方式启动入口程序时，会忽略CMD指令和docker run中的参数\n          为了保证容器能够接受docker stop发送的信号量，需要通过exec启动程序；如果没有加入exec命令，则在启动容器时容器会出现两个进程，并且使用docker stop命令容器无法正常退出（无法接受SIGTERM信号），超时后docker stop发送SIGKILL，强制停止容器\n例子：FROM ubuntu <换行> ENTRYPOINT exec top -b\n\n### 指令：VOLUME\n功能描述：设置容器的挂载点\n语法：VOLUME [“/data”]\n          VOLUME /data1 /data2\n提示：启动容器时，Docker Daemon会新建挂载点，并用镜像中的数据初始化挂载点，可以将主机目录或数据卷容器挂载到这些挂载点\n\n### 指令：USER\n\n功能描述：设置RUN CMD ENTRYPOINT的用户名或UID\n语法：USER < name>\n\n### 指令：WORKDIR\n\n功能描述：设置RUN CMD ENTRYPOINT ADD COPY指令的工作目录\n语法：WORKDIR < Path>\n提示：如果工作目录不存在，则Docker Daemon会自动创建\n          Dockerfile中多个地方都可以调用WORKDIR，如果后面跟的是相对位置，则会跟在上条WORKDIR指定路径后（如WORKDIR /A   WORKDIR B   WORKDIR C，最终路径为/A/B/C\n\n### 指令：ARG\n\n功能描述：设置编译变量\n语法：ARG < name>[=< defaultValue>]\n注意：ARG从定义它的地方开始生效而不是调用的地方，在ARG之前调用编译变量总为空，在编译镜像时，可以通过docker build –build-arg < var>=< value>设置变量，如果var没有通过ARG定义则Daemon会报错\n          可以使用ENV或ARG设置RUN使用的变量，如果同名则ENV定义的值会覆盖ARG定义的值，与ENV不同，ARG的变量值在编译过程中是可变的，会对比使用编译缓存造成影响（ARG值不同则编译过程也不同）\n例子：ARG CONT_IMAG_VER <换行> RUN echo $CONT_IMG_VER\n          ARG CONT_IMAG_VER <换行> RUN echo hello\n          当编译时给ARG变量赋值hello，则两个Dockerfile可以使用相同的中间镜像，如果不为hello，则不能使用同一个中间镜像\n\n\n\n### CMD ENTRYPOINT和RUN的区别\nRUN指令是设置编译镜像时执行的脚本和程序，镜像编译完成后，RUN指令的生命周期结束  \n容器启动时，可以通过CMD和ENTRYPOINT设置启动项，其中CMD叫做容器默认启动命令，如果在docker run命令末尾添加command，则会替换镜像中CMD设置的启动程序；ENRTYPOINT叫做入口程序，不能被docker run命令末尾的command替换，而是将command当作字符串，传递给ENTRYPOINT作为参数\n","source":"_posts/王阁/技术/运维/docker/Dockerfile基础&编写.md","raw":"# Dockerfile基础\n\n```\nDockerfile用于指定docker build 指令时执行时的动作与资源划分等,如指定分配内存大小,cpu个数等.从而构成相应的镜像\n\n```\n\n## 详细指令\n\n![docker详细指令](http://img.wqkenqing.ren/5aaf3a25b3434c7b1ec0cd5b41b2be1a.png)\n\n如上图即docker主要的指令与作用\n\n\nDockerfile由多条指令组成,每条指令在编译镜像时执行相应的程序完成某些功能,指令+参数组成，以逗号分隔，#作为注释起始符，虽说指令不区分大小写，但是一般指令使用大些，参数使用小写.\n\n\n\n### 指令：FROM\n\n功能描述：设置基础镜像\n语法：FROM < image>[:< tag> | @< digest>]\n提示：镜像都是从一个基础镜像（操作系统或其他镜像）生成，可以在一个Dockerfile中添加多条FROM指令，一次生成多个镜像\n注意：如果忽略tag选项，会使用latest镜像\n\n### 指令：MAINTAINER\n\n功能描述：设置镜像作者\n语法：MAINTAINER < name>\n\n\n### 指令：RUN\n\n功能描述：\n语法：RUN < command>\n          RUN [“executable”,”param1”,”param2”]\n提示：RUN指令会生成容器，在容器中执行脚本，容器使用当前镜像，脚本指令完成后，Docker Daemon会将该容器提交为一个中间镜像，供后面的指令使用\n补充：RUN指令第一种方式为shell方式，使用/bin/sh -c < command>运行脚本，可以在其中使用\\将脚本分为多行\n          RUN指令第二种方式为exec方式，镜像中没有/bin/sh或者要使用其他shell时使用该方式，其不会调用shell命令\n例子：RUN source $HOME/.bashrc;\\\n          echo $HOME\n\n          RUN [“/bin/bash”,”-c”,”echo hello”]\n\n          RUN [“sh”,”-c”,”echo”,”$HOME”] 使用第二种方式调用shell读取环境变量\n\n### 指令：CMD\n\n功能描述：设置容器的启动命令\n语法：CMD [“executable”,”param1”,”param2”]\n          CMD [“param1”,”param2”]\n          CMD < command>\n提示：CMD第一种、第三种方式和RUN类似，第二种方式为ENTRYPOINT参数方式，为entrypoint提供参数列表\n注意：**Dockerfile中只能有一条CMD命令，如果写了多条则最后一条生效**\n\n### 指令：LABEL\n功能描述：设置镜像的标签\n延伸：镜像标签可以通过docker inspect查看\n格式：LABEL < key>=< value> < key>=< value> …\n提示：不同标签之间通过空格隔开\n注意：每条指令都会生成一个镜像层，Docker中镜像最多只能有127层，如果超出Docker Daemon就会报错，如LABEL ..=.. <假装这里有个换行> LABEL ..=..合在一起用空格分隔就可以减少镜像层数量，同样，可以使用连接符\\将脚本分为多行镜像会继承基础镜像中的标签，如果存在同名标签则会覆盖\n\n### 指令：EXPOSE\n功能描述：设置镜像暴露端口，记录容器启动时监听哪些端口\n语法：EXPOSE < port> < port> …\n延伸：镜像暴露端口可以通过docker inspect查看\n提示：容器启动时，Docker Daemon会扫描镜像中暴露的端口，如果加入-P参数，Docker Daemon会把镜像中所有暴露端口导出，并为每个暴露端口分配一个随机的主机端口（暴露端口是容器监听端口，主机端口为外部访问容器的端口）\n注意：EXPOSE只设置暴露端口并不导出端口，只有启动容器时使用-P/-p才导出端口，这个时候才能通过外部访问容器提供的服务\n\n### 指令：ENV\n功能描述：设置镜像中的环境变量\n语法：ENV < key>=< value>…|< key> < value>\n注意：环境变量在整个编译周期都有效，第一种方式可设置多个环境变量，第二种方式只设置一个环境变量\n提示：通过${变量名}或者 $变量名使用变量，使用方式${变量名}时可以用${变量名:-default} ${变量名:+cover}设定默认值或者覆盖值 ENV设置的变量值在整个编译过程中总是保持不变的\n\n### 指令：ADD\n功能描述：复制文件到镜像中\n语法：ADD < src>… < dest>|[“< src>”,… “< dest>”]\n注意：当路径中有空格时，需要使用第二种方式\n          当src为文件或目录时，Docker Daemon会从编译目录寻找这些文件或目录，而dest为镜像中的绝对路径或者相对于WORKDIR的路径\n提示：src为目录时，复制目录中所有内容，包括文件系统的元数据，但不包括目录本身\n          src为压缩文件，并且压缩方式为gzip,bzip2或xz时，指令会将其解压为目录\n          如果src为文件，则复制文件和元数据\n          如果dest不存在，指令会自动创建dest和缺失的上级目录\n\n### 指令：COPY\n功能描述：复制文件到镜像中\n语法：COPY < src>… < dest>|[“< src>”,… “< dest>”]\n提示：指令逻辑和ADD十分相似，同样Docker Daemon会从编译目录寻找文件或目录，dest为镜像中的绝对路径或者相对于WORKDIR的路径\n\n### 指令：ENTRYPOINT\n功能描述：设置容器的入口程序\n语法：ENTRYPOINT [“executable”,”param1”,”param2”]\n          ENTRYPOINT command param1 param2（shell方式）\n提示：入口程序是容器启动时执行的程序，docker run中最后的命令将作为参数传递给入口程序\n          入口程序有两种格式：exec、shell，其中shell使用/bin/sh -c运行入口程序，此时入口程序不能接收信号量\n          当Dockerfile有多条ENTRYPOINT时只有最后的ENTRYPOINT指令生效\n          如果使用脚本作为入口程序，需要保证脚本的最后一个程序能够接收信号量，可以在脚本最后使用exec或gosu启动传入脚本的命令\n注意：通过shell方式启动入口程序时，会忽略CMD指令和docker run中的参数\n          为了保证容器能够接受docker stop发送的信号量，需要通过exec启动程序；如果没有加入exec命令，则在启动容器时容器会出现两个进程，并且使用docker stop命令容器无法正常退出（无法接受SIGTERM信号），超时后docker stop发送SIGKILL，强制停止容器\n例子：FROM ubuntu <换行> ENTRYPOINT exec top -b\n\n### 指令：VOLUME\n功能描述：设置容器的挂载点\n语法：VOLUME [“/data”]\n          VOLUME /data1 /data2\n提示：启动容器时，Docker Daemon会新建挂载点，并用镜像中的数据初始化挂载点，可以将主机目录或数据卷容器挂载到这些挂载点\n\n### 指令：USER\n\n功能描述：设置RUN CMD ENTRYPOINT的用户名或UID\n语法：USER < name>\n\n### 指令：WORKDIR\n\n功能描述：设置RUN CMD ENTRYPOINT ADD COPY指令的工作目录\n语法：WORKDIR < Path>\n提示：如果工作目录不存在，则Docker Daemon会自动创建\n          Dockerfile中多个地方都可以调用WORKDIR，如果后面跟的是相对位置，则会跟在上条WORKDIR指定路径后（如WORKDIR /A   WORKDIR B   WORKDIR C，最终路径为/A/B/C\n\n### 指令：ARG\n\n功能描述：设置编译变量\n语法：ARG < name>[=< defaultValue>]\n注意：ARG从定义它的地方开始生效而不是调用的地方，在ARG之前调用编译变量总为空，在编译镜像时，可以通过docker build –build-arg < var>=< value>设置变量，如果var没有通过ARG定义则Daemon会报错\n          可以使用ENV或ARG设置RUN使用的变量，如果同名则ENV定义的值会覆盖ARG定义的值，与ENV不同，ARG的变量值在编译过程中是可变的，会对比使用编译缓存造成影响（ARG值不同则编译过程也不同）\n例子：ARG CONT_IMAG_VER <换行> RUN echo $CONT_IMG_VER\n          ARG CONT_IMAG_VER <换行> RUN echo hello\n          当编译时给ARG变量赋值hello，则两个Dockerfile可以使用相同的中间镜像，如果不为hello，则不能使用同一个中间镜像\n\n\n\n### CMD ENTRYPOINT和RUN的区别\nRUN指令是设置编译镜像时执行的脚本和程序，镜像编译完成后，RUN指令的生命周期结束  \n容器启动时，可以通过CMD和ENTRYPOINT设置启动项，其中CMD叫做容器默认启动命令，如果在docker run命令末尾添加command，则会替换镜像中CMD设置的启动程序；ENRTYPOINT叫做入口程序，不能被docker run命令末尾的command替换，而是将command当作字符串，传递给ENTRYPOINT作为参数\n","slug":"王阁/技术/运维/docker/Dockerfile基础&编写","published":1,"date":"2023-02-23T02:51:20.909Z","updated":"2023-02-23T02:51:20.909Z","title":"王阁/技术/运维/docker/Dockerfile基础&编写","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsh8007bu6pw6obbablp","content":"<h1 id=\"Dockerfile基础\"><a href=\"#Dockerfile基础\" class=\"headerlink\" title=\"Dockerfile基础\"></a>Dockerfile基础</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Dockerfile用于指定docker build 指令时执行时的动作与资源划分等,如指定分配内存大小,cpu个数等.从而构成相应的镜像</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"详细指令\"><a href=\"#详细指令\" class=\"headerlink\" title=\"详细指令\"></a>详细指令</h2><p><img src=\"http://img.wqkenqing.ren/5aaf3a25b3434c7b1ec0cd5b41b2be1a.png\" alt=\"docker详细指令\"></p>\n<p>如上图即docker主要的指令与作用</p>\n<p>Dockerfile由多条指令组成,每条指令在编译镜像时执行相应的程序完成某些功能,指令+参数组成，以逗号分隔，#作为注释起始符，虽说指令不区分大小写，但是一般指令使用大些，参数使用小写.</p>\n<h3 id=\"指令：FROM\"><a href=\"#指令：FROM\" class=\"headerlink\" title=\"指令：FROM\"></a>指令：FROM</h3><p>功能描述：设置基础镜像<br>语法：FROM &lt; image&gt;[:&lt; tag&gt; | @&lt; digest&gt;]<br>提示：镜像都是从一个基础镜像（操作系统或其他镜像）生成，可以在一个Dockerfile中添加多条FROM指令，一次生成多个镜像<br>注意：如果忽略tag选项，会使用latest镜像</p>\n<h3 id=\"指令：MAINTAINER\"><a href=\"#指令：MAINTAINER\" class=\"headerlink\" title=\"指令：MAINTAINER\"></a>指令：MAINTAINER</h3><p>功能描述：设置镜像作者<br>语法：MAINTAINER &lt; name&gt;</p>\n<h3 id=\"指令：RUN\"><a href=\"#指令：RUN\" class=\"headerlink\" title=\"指令：RUN\"></a>指令：RUN</h3><p>功能描述：<br>语法：RUN &lt; command&gt;<br>          RUN [“executable”,”param1”,”param2”]<br>提示：RUN指令会生成容器，在容器中执行脚本，容器使用当前镜像，脚本指令完成后，Docker Daemon会将该容器提交为一个中间镜像，供后面的指令使用<br>补充：RUN指令第一种方式为shell方式，使用/bin/sh -c &lt; command&gt;运行脚本，可以在其中使用\\将脚本分为多行<br>          RUN指令第二种方式为exec方式，镜像中没有/bin/sh或者要使用其他shell时使用该方式，其不会调用shell命令<br>例子：RUN source $HOME/.bashrc;<br>          echo $HOME</p>\n<pre><code>RUN [“/bin/bash”,”-c”,”echo hello”]\n\nRUN [“sh”,”-c”,”echo”,”$HOME”] 使用第二种方式调用shell读取环境变量</code></pre><h3 id=\"指令：CMD\"><a href=\"#指令：CMD\" class=\"headerlink\" title=\"指令：CMD\"></a>指令：CMD</h3><p>功能描述：设置容器的启动命令<br>语法：CMD [“executable”,”param1”,”param2”]<br>          CMD [“param1”,”param2”]<br>          CMD &lt; command&gt;<br>提示：CMD第一种、第三种方式和RUN类似，第二种方式为ENTRYPOINT参数方式，为entrypoint提供参数列表<br>注意：<strong>Dockerfile中只能有一条CMD命令，如果写了多条则最后一条生效</strong></p>\n<h3 id=\"指令：LABEL\"><a href=\"#指令：LABEL\" class=\"headerlink\" title=\"指令：LABEL\"></a>指令：LABEL</h3><p>功能描述：设置镜像的标签<br>延伸：镜像标签可以通过docker inspect查看<br>格式：LABEL &lt; key&gt;=&lt; value&gt; &lt; key&gt;=&lt; value&gt; …<br>提示：不同标签之间通过空格隔开<br>注意：每条指令都会生成一个镜像层，Docker中镜像最多只能有127层，如果超出Docker Daemon就会报错，如LABEL ..=.. &lt;假装这里有个换行&gt; LABEL ..=..合在一起用空格分隔就可以减少镜像层数量，同样，可以使用连接符\\将脚本分为多行镜像会继承基础镜像中的标签，如果存在同名标签则会覆盖</p>\n<h3 id=\"指令：EXPOSE\"><a href=\"#指令：EXPOSE\" class=\"headerlink\" title=\"指令：EXPOSE\"></a>指令：EXPOSE</h3><p>功能描述：设置镜像暴露端口，记录容器启动时监听哪些端口<br>语法：EXPOSE &lt; port&gt; &lt; port&gt; …<br>延伸：镜像暴露端口可以通过docker inspect查看<br>提示：容器启动时，Docker Daemon会扫描镜像中暴露的端口，如果加入-P参数，Docker Daemon会把镜像中所有暴露端口导出，并为每个暴露端口分配一个随机的主机端口（暴露端口是容器监听端口，主机端口为外部访问容器的端口）<br>注意：EXPOSE只设置暴露端口并不导出端口，只有启动容器时使用-P/-p才导出端口，这个时候才能通过外部访问容器提供的服务</p>\n<h3 id=\"指令：ENV\"><a href=\"#指令：ENV\" class=\"headerlink\" title=\"指令：ENV\"></a>指令：ENV</h3><p>功能描述：设置镜像中的环境变量<br>语法：ENV &lt; key&gt;=&lt; value&gt;…|&lt; key&gt; &lt; value&gt;<br>注意：环境变量在整个编译周期都有效，第一种方式可设置多个环境变量，第二种方式只设置一个环境变量<br>提示：通过${变量名}或者 $变量名使用变量，使用方式${变量名}时可以用${变量名:-default} ${变量名:+cover}设定默认值或者覆盖值 ENV设置的变量值在整个编译过程中总是保持不变的</p>\n<h3 id=\"指令：ADD\"><a href=\"#指令：ADD\" class=\"headerlink\" title=\"指令：ADD\"></a>指令：ADD</h3><p>功能描述：复制文件到镜像中<br>语法：ADD &lt; src&gt;… &lt; dest&gt;|[“&lt; src&gt;”,… “&lt; dest&gt;”]<br>注意：当路径中有空格时，需要使用第二种方式<br>          当src为文件或目录时，Docker Daemon会从编译目录寻找这些文件或目录，而dest为镜像中的绝对路径或者相对于WORKDIR的路径<br>提示：src为目录时，复制目录中所有内容，包括文件系统的元数据，但不包括目录本身<br>          src为压缩文件，并且压缩方式为gzip,bzip2或xz时，指令会将其解压为目录<br>          如果src为文件，则复制文件和元数据<br>          如果dest不存在，指令会自动创建dest和缺失的上级目录</p>\n<h3 id=\"指令：COPY\"><a href=\"#指令：COPY\" class=\"headerlink\" title=\"指令：COPY\"></a>指令：COPY</h3><p>功能描述：复制文件到镜像中<br>语法：COPY &lt; src&gt;… &lt; dest&gt;|[“&lt; src&gt;”,… “&lt; dest&gt;”]<br>提示：指令逻辑和ADD十分相似，同样Docker Daemon会从编译目录寻找文件或目录，dest为镜像中的绝对路径或者相对于WORKDIR的路径</p>\n<h3 id=\"指令：ENTRYPOINT\"><a href=\"#指令：ENTRYPOINT\" class=\"headerlink\" title=\"指令：ENTRYPOINT\"></a>指令：ENTRYPOINT</h3><p>功能描述：设置容器的入口程序<br>语法：ENTRYPOINT [“executable”,”param1”,”param2”]<br>          ENTRYPOINT command param1 param2（shell方式）<br>提示：入口程序是容器启动时执行的程序，docker run中最后的命令将作为参数传递给入口程序<br>          入口程序有两种格式：exec、shell，其中shell使用/bin/sh -c运行入口程序，此时入口程序不能接收信号量<br>          当Dockerfile有多条ENTRYPOINT时只有最后的ENTRYPOINT指令生效<br>          如果使用脚本作为入口程序，需要保证脚本的最后一个程序能够接收信号量，可以在脚本最后使用exec或gosu启动传入脚本的命令<br>注意：通过shell方式启动入口程序时，会忽略CMD指令和docker run中的参数<br>          为了保证容器能够接受docker stop发送的信号量，需要通过exec启动程序；如果没有加入exec命令，则在启动容器时容器会出现两个进程，并且使用docker stop命令容器无法正常退出（无法接受SIGTERM信号），超时后docker stop发送SIGKILL，强制停止容器<br>例子：FROM ubuntu &lt;换行&gt; ENTRYPOINT exec top -b</p>\n<h3 id=\"指令：VOLUME\"><a href=\"#指令：VOLUME\" class=\"headerlink\" title=\"指令：VOLUME\"></a>指令：VOLUME</h3><p>功能描述：设置容器的挂载点<br>语法：VOLUME [“/data”]<br>          VOLUME /data1 /data2<br>提示：启动容器时，Docker Daemon会新建挂载点，并用镜像中的数据初始化挂载点，可以将主机目录或数据卷容器挂载到这些挂载点</p>\n<h3 id=\"指令：USER\"><a href=\"#指令：USER\" class=\"headerlink\" title=\"指令：USER\"></a>指令：USER</h3><p>功能描述：设置RUN CMD ENTRYPOINT的用户名或UID<br>语法：USER &lt; name&gt;</p>\n<h3 id=\"指令：WORKDIR\"><a href=\"#指令：WORKDIR\" class=\"headerlink\" title=\"指令：WORKDIR\"></a>指令：WORKDIR</h3><p>功能描述：设置RUN CMD ENTRYPOINT ADD COPY指令的工作目录<br>语法：WORKDIR &lt; Path&gt;<br>提示：如果工作目录不存在，则Docker Daemon会自动创建<br>          Dockerfile中多个地方都可以调用WORKDIR，如果后面跟的是相对位置，则会跟在上条WORKDIR指定路径后（如WORKDIR /A   WORKDIR B   WORKDIR C，最终路径为/A/B/C</p>\n<h3 id=\"指令：ARG\"><a href=\"#指令：ARG\" class=\"headerlink\" title=\"指令：ARG\"></a>指令：ARG</h3><p>功能描述：设置编译变量<br>语法：ARG &lt; name&gt;[=&lt; defaultValue&gt;]<br>注意：ARG从定义它的地方开始生效而不是调用的地方，在ARG之前调用编译变量总为空，在编译镜像时，可以通过docker build –build-arg &lt; var&gt;=&lt; value&gt;设置变量，如果var没有通过ARG定义则Daemon会报错<br>          可以使用ENV或ARG设置RUN使用的变量，如果同名则ENV定义的值会覆盖ARG定义的值，与ENV不同，ARG的变量值在编译过程中是可变的，会对比使用编译缓存造成影响（ARG值不同则编译过程也不同）<br>例子：ARG CONT_IMAG_VER &lt;换行&gt; RUN echo $CONT_IMG_VER<br>          ARG CONT_IMAG_VER &lt;换行&gt; RUN echo hello<br>          当编译时给ARG变量赋值hello，则两个Dockerfile可以使用相同的中间镜像，如果不为hello，则不能使用同一个中间镜像</p>\n<h3 id=\"CMD-ENTRYPOINT和RUN的区别\"><a href=\"#CMD-ENTRYPOINT和RUN的区别\" class=\"headerlink\" title=\"CMD ENTRYPOINT和RUN的区别\"></a>CMD ENTRYPOINT和RUN的区别</h3><p>RUN指令是设置编译镜像时执行的脚本和程序，镜像编译完成后，RUN指令的生命周期结束<br>容器启动时，可以通过CMD和ENTRYPOINT设置启动项，其中CMD叫做容器默认启动命令，如果在docker run命令末尾添加command，则会替换镜像中CMD设置的启动程序；ENRTYPOINT叫做入口程序，不能被docker run命令末尾的command替换，而是将command当作字符串，传递给ENTRYPOINT作为参数</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Dockerfile基础\"><a href=\"#Dockerfile基础\" class=\"headerlink\" title=\"Dockerfile基础\"></a>Dockerfile基础</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Dockerfile用于指定docker build 指令时执行时的动作与资源划分等,如指定分配内存大小,cpu个数等.从而构成相应的镜像</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"详细指令\"><a href=\"#详细指令\" class=\"headerlink\" title=\"详细指令\"></a>详细指令</h2><p><img src=\"http://img.wqkenqing.ren/5aaf3a25b3434c7b1ec0cd5b41b2be1a.png\" alt=\"docker详细指令\"></p>\n<p>如上图即docker主要的指令与作用</p>\n<p>Dockerfile由多条指令组成,每条指令在编译镜像时执行相应的程序完成某些功能,指令+参数组成，以逗号分隔，#作为注释起始符，虽说指令不区分大小写，但是一般指令使用大些，参数使用小写.</p>\n<h3 id=\"指令：FROM\"><a href=\"#指令：FROM\" class=\"headerlink\" title=\"指令：FROM\"></a>指令：FROM</h3><p>功能描述：设置基础镜像<br>语法：FROM &lt; image&gt;[:&lt; tag&gt; | @&lt; digest&gt;]<br>提示：镜像都是从一个基础镜像（操作系统或其他镜像）生成，可以在一个Dockerfile中添加多条FROM指令，一次生成多个镜像<br>注意：如果忽略tag选项，会使用latest镜像</p>\n<h3 id=\"指令：MAINTAINER\"><a href=\"#指令：MAINTAINER\" class=\"headerlink\" title=\"指令：MAINTAINER\"></a>指令：MAINTAINER</h3><p>功能描述：设置镜像作者<br>语法：MAINTAINER &lt; name&gt;</p>\n<h3 id=\"指令：RUN\"><a href=\"#指令：RUN\" class=\"headerlink\" title=\"指令：RUN\"></a>指令：RUN</h3><p>功能描述：<br>语法：RUN &lt; command&gt;<br>          RUN [“executable”,”param1”,”param2”]<br>提示：RUN指令会生成容器，在容器中执行脚本，容器使用当前镜像，脚本指令完成后，Docker Daemon会将该容器提交为一个中间镜像，供后面的指令使用<br>补充：RUN指令第一种方式为shell方式，使用/bin/sh -c &lt; command&gt;运行脚本，可以在其中使用\\将脚本分为多行<br>          RUN指令第二种方式为exec方式，镜像中没有/bin/sh或者要使用其他shell时使用该方式，其不会调用shell命令<br>例子：RUN source $HOME/.bashrc;<br>          echo $HOME</p>\n<pre><code>RUN [“/bin/bash”,”-c”,”echo hello”]\n\nRUN [“sh”,”-c”,”echo”,”$HOME”] 使用第二种方式调用shell读取环境变量</code></pre><h3 id=\"指令：CMD\"><a href=\"#指令：CMD\" class=\"headerlink\" title=\"指令：CMD\"></a>指令：CMD</h3><p>功能描述：设置容器的启动命令<br>语法：CMD [“executable”,”param1”,”param2”]<br>          CMD [“param1”,”param2”]<br>          CMD &lt; command&gt;<br>提示：CMD第一种、第三种方式和RUN类似，第二种方式为ENTRYPOINT参数方式，为entrypoint提供参数列表<br>注意：<strong>Dockerfile中只能有一条CMD命令，如果写了多条则最后一条生效</strong></p>\n<h3 id=\"指令：LABEL\"><a href=\"#指令：LABEL\" class=\"headerlink\" title=\"指令：LABEL\"></a>指令：LABEL</h3><p>功能描述：设置镜像的标签<br>延伸：镜像标签可以通过docker inspect查看<br>格式：LABEL &lt; key&gt;=&lt; value&gt; &lt; key&gt;=&lt; value&gt; …<br>提示：不同标签之间通过空格隔开<br>注意：每条指令都会生成一个镜像层，Docker中镜像最多只能有127层，如果超出Docker Daemon就会报错，如LABEL ..=.. &lt;假装这里有个换行&gt; LABEL ..=..合在一起用空格分隔就可以减少镜像层数量，同样，可以使用连接符\\将脚本分为多行镜像会继承基础镜像中的标签，如果存在同名标签则会覆盖</p>\n<h3 id=\"指令：EXPOSE\"><a href=\"#指令：EXPOSE\" class=\"headerlink\" title=\"指令：EXPOSE\"></a>指令：EXPOSE</h3><p>功能描述：设置镜像暴露端口，记录容器启动时监听哪些端口<br>语法：EXPOSE &lt; port&gt; &lt; port&gt; …<br>延伸：镜像暴露端口可以通过docker inspect查看<br>提示：容器启动时，Docker Daemon会扫描镜像中暴露的端口，如果加入-P参数，Docker Daemon会把镜像中所有暴露端口导出，并为每个暴露端口分配一个随机的主机端口（暴露端口是容器监听端口，主机端口为外部访问容器的端口）<br>注意：EXPOSE只设置暴露端口并不导出端口，只有启动容器时使用-P/-p才导出端口，这个时候才能通过外部访问容器提供的服务</p>\n<h3 id=\"指令：ENV\"><a href=\"#指令：ENV\" class=\"headerlink\" title=\"指令：ENV\"></a>指令：ENV</h3><p>功能描述：设置镜像中的环境变量<br>语法：ENV &lt; key&gt;=&lt; value&gt;…|&lt; key&gt; &lt; value&gt;<br>注意：环境变量在整个编译周期都有效，第一种方式可设置多个环境变量，第二种方式只设置一个环境变量<br>提示：通过${变量名}或者 $变量名使用变量，使用方式${变量名}时可以用${变量名:-default} ${变量名:+cover}设定默认值或者覆盖值 ENV设置的变量值在整个编译过程中总是保持不变的</p>\n<h3 id=\"指令：ADD\"><a href=\"#指令：ADD\" class=\"headerlink\" title=\"指令：ADD\"></a>指令：ADD</h3><p>功能描述：复制文件到镜像中<br>语法：ADD &lt; src&gt;… &lt; dest&gt;|[“&lt; src&gt;”,… “&lt; dest&gt;”]<br>注意：当路径中有空格时，需要使用第二种方式<br>          当src为文件或目录时，Docker Daemon会从编译目录寻找这些文件或目录，而dest为镜像中的绝对路径或者相对于WORKDIR的路径<br>提示：src为目录时，复制目录中所有内容，包括文件系统的元数据，但不包括目录本身<br>          src为压缩文件，并且压缩方式为gzip,bzip2或xz时，指令会将其解压为目录<br>          如果src为文件，则复制文件和元数据<br>          如果dest不存在，指令会自动创建dest和缺失的上级目录</p>\n<h3 id=\"指令：COPY\"><a href=\"#指令：COPY\" class=\"headerlink\" title=\"指令：COPY\"></a>指令：COPY</h3><p>功能描述：复制文件到镜像中<br>语法：COPY &lt; src&gt;… &lt; dest&gt;|[“&lt; src&gt;”,… “&lt; dest&gt;”]<br>提示：指令逻辑和ADD十分相似，同样Docker Daemon会从编译目录寻找文件或目录，dest为镜像中的绝对路径或者相对于WORKDIR的路径</p>\n<h3 id=\"指令：ENTRYPOINT\"><a href=\"#指令：ENTRYPOINT\" class=\"headerlink\" title=\"指令：ENTRYPOINT\"></a>指令：ENTRYPOINT</h3><p>功能描述：设置容器的入口程序<br>语法：ENTRYPOINT [“executable”,”param1”,”param2”]<br>          ENTRYPOINT command param1 param2（shell方式）<br>提示：入口程序是容器启动时执行的程序，docker run中最后的命令将作为参数传递给入口程序<br>          入口程序有两种格式：exec、shell，其中shell使用/bin/sh -c运行入口程序，此时入口程序不能接收信号量<br>          当Dockerfile有多条ENTRYPOINT时只有最后的ENTRYPOINT指令生效<br>          如果使用脚本作为入口程序，需要保证脚本的最后一个程序能够接收信号量，可以在脚本最后使用exec或gosu启动传入脚本的命令<br>注意：通过shell方式启动入口程序时，会忽略CMD指令和docker run中的参数<br>          为了保证容器能够接受docker stop发送的信号量，需要通过exec启动程序；如果没有加入exec命令，则在启动容器时容器会出现两个进程，并且使用docker stop命令容器无法正常退出（无法接受SIGTERM信号），超时后docker stop发送SIGKILL，强制停止容器<br>例子：FROM ubuntu &lt;换行&gt; ENTRYPOINT exec top -b</p>\n<h3 id=\"指令：VOLUME\"><a href=\"#指令：VOLUME\" class=\"headerlink\" title=\"指令：VOLUME\"></a>指令：VOLUME</h3><p>功能描述：设置容器的挂载点<br>语法：VOLUME [“/data”]<br>          VOLUME /data1 /data2<br>提示：启动容器时，Docker Daemon会新建挂载点，并用镜像中的数据初始化挂载点，可以将主机目录或数据卷容器挂载到这些挂载点</p>\n<h3 id=\"指令：USER\"><a href=\"#指令：USER\" class=\"headerlink\" title=\"指令：USER\"></a>指令：USER</h3><p>功能描述：设置RUN CMD ENTRYPOINT的用户名或UID<br>语法：USER &lt; name&gt;</p>\n<h3 id=\"指令：WORKDIR\"><a href=\"#指令：WORKDIR\" class=\"headerlink\" title=\"指令：WORKDIR\"></a>指令：WORKDIR</h3><p>功能描述：设置RUN CMD ENTRYPOINT ADD COPY指令的工作目录<br>语法：WORKDIR &lt; Path&gt;<br>提示：如果工作目录不存在，则Docker Daemon会自动创建<br>          Dockerfile中多个地方都可以调用WORKDIR，如果后面跟的是相对位置，则会跟在上条WORKDIR指定路径后（如WORKDIR /A   WORKDIR B   WORKDIR C，最终路径为/A/B/C</p>\n<h3 id=\"指令：ARG\"><a href=\"#指令：ARG\" class=\"headerlink\" title=\"指令：ARG\"></a>指令：ARG</h3><p>功能描述：设置编译变量<br>语法：ARG &lt; name&gt;[=&lt; defaultValue&gt;]<br>注意：ARG从定义它的地方开始生效而不是调用的地方，在ARG之前调用编译变量总为空，在编译镜像时，可以通过docker build –build-arg &lt; var&gt;=&lt; value&gt;设置变量，如果var没有通过ARG定义则Daemon会报错<br>          可以使用ENV或ARG设置RUN使用的变量，如果同名则ENV定义的值会覆盖ARG定义的值，与ENV不同，ARG的变量值在编译过程中是可变的，会对比使用编译缓存造成影响（ARG值不同则编译过程也不同）<br>例子：ARG CONT_IMAG_VER &lt;换行&gt; RUN echo $CONT_IMG_VER<br>          ARG CONT_IMAG_VER &lt;换行&gt; RUN echo hello<br>          当编译时给ARG变量赋值hello，则两个Dockerfile可以使用相同的中间镜像，如果不为hello，则不能使用同一个中间镜像</p>\n<h3 id=\"CMD-ENTRYPOINT和RUN的区别\"><a href=\"#CMD-ENTRYPOINT和RUN的区别\" class=\"headerlink\" title=\"CMD ENTRYPOINT和RUN的区别\"></a>CMD ENTRYPOINT和RUN的区别</h3><p>RUN指令是设置编译镜像时执行的脚本和程序，镜像编译完成后，RUN指令的生命周期结束<br>容器启动时，可以通过CMD和ENTRYPOINT设置启动项，其中CMD叫做容器默认启动命令，如果在docker run命令末尾添加command，则会替换镜像中CMD设置的启动程序；ENRTYPOINT叫做入口程序，不能被docker run命令末尾的command替换，而是将command当作字符串，传递给ENTRYPOINT作为参数</p>\n"},{"_content":"docker run -d --restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp\ndocker run -d --restart=unless-stopped  -v /Users/wqkenqing/Desktop/newInfo.txt:/newInfo.txt    kafka_tmp\ndocker run -d --restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp\ndocker run  -d  --restart=unless-stopped -v /data/upload/state_info.txt:/state_info.txt    registry.lisong.pub:5000/kafka_tmpn\ndocker run -d --restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp\ndocker run -d --restart=unless-stopped  -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_infonn\n\n\ndocker run -d --restart=unless-stopped  -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafka_all /info.txt jzw_toll_island_infonn\ndocker run   -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafka_all /info.txt jzw_toll_island_infonn\ndocker run  -d --restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_infonn\ndocker run  -d --restart=unless-stopped -v /data/upload/state_info.txt:/info.txt   registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_state\ndocker run  -d --restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_infonn\ndocker run  -d -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafk214 /info.txt jzw_toll_island_infonn\n\n\n214\n\ndocker run  -d --name info  --restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_infonn\n\ndocker run  -d --name info  --restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_info\n\ndocker run  -d --name state --restart=unless-stopped -v /data/upload/state_info.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_state\n","source":"_posts/王阁/技术/运维/docker/docker操作.md","raw":"docker run -d --restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp\ndocker run -d --restart=unless-stopped  -v /Users/wqkenqing/Desktop/newInfo.txt:/newInfo.txt    kafka_tmp\ndocker run -d --restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp\ndocker run  -d  --restart=unless-stopped -v /data/upload/state_info.txt:/state_info.txt    registry.lisong.pub:5000/kafka_tmpn\ndocker run -d --restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp\ndocker run -d --restart=unless-stopped  -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_infonn\n\n\ndocker run -d --restart=unless-stopped  -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafka_all /info.txt jzw_toll_island_infonn\ndocker run   -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafka_all /info.txt jzw_toll_island_infonn\ndocker run  -d --restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_infonn\ndocker run  -d --restart=unless-stopped -v /data/upload/state_info.txt:/info.txt   registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_state\ndocker run  -d --restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_infonn\ndocker run  -d -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafk214 /info.txt jzw_toll_island_infonn\n\n\n214\n\ndocker run  -d --name info  --restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_infonn\n\ndocker run  -d --name info  --restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_info\n\ndocker run  -d --name state --restart=unless-stopped -v /data/upload/state_info.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_state\n","slug":"王阁/技术/运维/docker/docker操作","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/docker/docker操作","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsh9007eu6pwa4e3194u","content":"<p>docker run -d –restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp<br>docker run -d –restart=unless-stopped  -v /Users/wqkenqing/Desktop/newInfo.txt:/newInfo.txt    kafka_tmp<br>docker run -d –restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp<br>docker run  -d  –restart=unless-stopped -v /data/upload/state_info.txt:/state_info.txt    registry.lisong.pub:5000/kafka_tmpn<br>docker run -d –restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp<br>docker run -d –restart=unless-stopped  -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_infonn</p>\n<p>docker run -d –restart=unless-stopped  -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafka_all /info.txt jzw_toll_island_infonn<br>docker run   -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafka_all /info.txt jzw_toll_island_infonn<br>docker run  -d –restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_infonn<br>docker run  -d –restart=unless-stopped -v /data/upload/state_info.txt:/info.txt   registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_state<br>docker run  -d –restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_infonn<br>docker run  -d -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafk214 /info.txt jzw_toll_island_infonn</p>\n<p>214</p>\n<p>docker run  -d –name info  –restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_infonn</p>\n<p>docker run  -d –name info  –restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_info</p>\n<p>docker run  -d –name state –restart=unless-stopped -v /data/upload/state_info.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_state</p>\n","site":{"data":{}},"excerpt":"","more":"<p>docker run -d –restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp<br>docker run -d –restart=unless-stopped  -v /Users/wqkenqing/Desktop/newInfo.txt:/newInfo.txt    kafka_tmp<br>docker run -d –restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp<br>docker run  -d  –restart=unless-stopped -v /data/upload/state_info.txt:/state_info.txt    registry.lisong.pub:5000/kafka_tmpn<br>docker run -d –restart=unless-stopped  -v /data/upload/newInfo.txt:/newInfo.txt    registry.lisong.pub:5000/kafka_tmp<br>docker run -d –restart=unless-stopped  -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_infonn</p>\n<p>docker run -d –restart=unless-stopped  -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafka_all /info.txt jzw_toll_island_infonn<br>docker run   -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafka_all /info.txt jzw_toll_island_infonn<br>docker run  -d –restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_infonn<br>docker run  -d –restart=unless-stopped -v /data/upload/state_info.txt:/info.txt   registry.lisong.pub:5000/kafka_all /info.txt jzw_toll_island_state<br>docker run  -d –restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_infonn<br>docker run  -d -v /Users/wqkenqing/Desktop/newInfo.txt:/info.txt    kafk214 /info.txt jzw_toll_island_infonn</p>\n<p>214</p>\n<p>docker run  -d –name info  –restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_infonn</p>\n<p>docker run  -d –name info  –restart=unless-stopped -v /data/upload/newInfo.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_info</p>\n<p>docker run  -d –name state –restart=unless-stopped -v /data/upload/state_info.txt:/info.txt    registry.lisong.pub:5000/kafka214 /info.txt jzw_toll_island_state</p>\n"},{"_content":"version: \"2.3\"\nservices:\n  sjksh-store-info:\n    image: registry.lisong.pub:28500/hy/hy-sjksh-info-dev-v6\n    container_name: hy-sjksh-info-dev\n    cpus: 2\n    mem_limit: 2g\n    restart: unless-stopped\n    extra_hosts:\n        - \"namenode:192.168.10.100\"\n        - \"datanode1:192.168.10.101\"\n        - \"datanode2:192.168.10.102\"\n        - \"datanode3:192.168.10.103\"\n        - \"namenode2:192.168.10.104\"\n    env_file:\n      - common.env\n    environment:\n      - JAVA_OPTIONS=-XX:CompressedClassSpaceSize=32m\n","source":"_posts/王阁/技术/运维/hy-sjksh-info-dev/docker-compose.yaml","raw":"version: \"2.3\"\nservices:\n  sjksh-store-info:\n    image: registry.lisong.pub:28500/hy/hy-sjksh-info-dev-v6\n    container_name: hy-sjksh-info-dev\n    cpus: 2\n    mem_limit: 2g\n    restart: unless-stopped\n    extra_hosts:\n        - \"namenode:192.168.10.100\"\n        - \"datanode1:192.168.10.101\"\n        - \"datanode2:192.168.10.102\"\n        - \"datanode3:192.168.10.103\"\n        - \"namenode2:192.168.10.104\"\n    env_file:\n      - common.env\n    environment:\n      - JAVA_OPTIONS=-XX:CompressedClassSpaceSize=32m\n","slug":"王阁/技术/运维/hy-sjksh-info-dev/docker-compose","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/hy-sjksh-info-dev/docker-compose","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsh9007fu6pw3gc73ndn","content":"{\"version\":\"2.3\",\"services\":{\"sjksh-store-info\":{\"image\":\"registry.lisong.pub:28500/hy/hy-sjksh-info-dev-v6\",\"container_name\":\"hy-sjksh-info-dev\",\"cpus\":2,\"mem_limit\":\"2g\",\"restart\":\"unless-stopped\",\"extra_hosts\":[\"namenode:192.168.10.100\",\"datanode1:192.168.10.101\",\"datanode2:192.168.10.102\",\"datanode3:192.168.10.103\",\"namenode2:192.168.10.104\"],\"env_file\":[\"common.env\"],\"environment\":[\"JAVA_OPTIONS=-XX:CompressedClassSpaceSize=32m\"]}}}","site":{"data":{}},"excerpt":"","more":"{\"version\":\"2.3\",\"services\":{\"sjksh-store-info\":{\"image\":\"registry.lisong.pub:28500/hy/hy-sjksh-info-dev-v6\",\"container_name\":\"hy-sjksh-info-dev\",\"cpus\":2,\"mem_limit\":\"2g\",\"restart\":\"unless-stopped\",\"extra_hosts\":[\"namenode:192.168.10.100\",\"datanode1:192.168.10.101\",\"datanode2:192.168.10.102\",\"datanode3:192.168.10.103\",\"namenode2:192.168.10.104\"],\"env_file\":[\"common.env\"],\"environment\":[\"JAVA_OPTIONS=-XX:CompressedClassSpaceSize=32m\"]}}}"},{"_content":"调研几款好用的前端框架与架构\n\n1. H-ui\n\n早期接触过\n\n\nkafka管理\n","source":"_posts/王阁/技术/运维/front_end/调研.md","raw":"调研几款好用的前端框架与架构\n\n1. H-ui\n\n早期接触过\n\n\nkafka管理\n","slug":"王阁/技术/运维/front_end/调研","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/front_end/调研","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqshd007gu6pwd8dkbwbp","content":"<p>调研几款好用的前端框架与架构</p>\n<ol>\n<li>H-ui</li>\n</ol>\n<p>早期接触过</p>\n<p>kafka管理</p>\n","site":{"data":{}},"excerpt":"","more":"<p>调研几款好用的前端框架与架构</p>\n<ol>\n<li>H-ui</li>\n</ol>\n<p>早期接触过</p>\n<p>kafka管理</p>\n"},{"_content":"\n安装：\n\nsudo apt-get install vnc4server xfce4\n\n\nvncserver -geometry 1280x800 -alwaysshared :1\n\n\n vncserver -kill :1\n\n\n #!/bin/sh\n\n# Uncomment the following two lines for normal desktop:\n#unset SESSION_MANAGER\n#exec /etc/X11/xinit/xinitrc\n\n#[ -x /etc/vnc/xstartup ] && exec /etc/vnc/xstartup\n#[ -r $HOME/.Xresources ] && xrdb $HOME/.Xresources\n#xsetroot -solid grey\n#vncconfig -iconic &\n#x-terminal-emulator -geometry 80x24+10+10 -ls -title \"$VNCDESKTOP Desktop\" &\n#x-window-manager &\nunset SESSION_MANAGER\nunset DBUS_SESSION_BUS_ADDRESS\n[ -x /etc/vnc/xstartup ] && exec /etc/vnc/xstartup\n[ -r $HOME/.Xresources ] && xrdb $HOME/.Xresources\nvncconfig -iconic &\n-session &\n\n\n sudo x11vnc -display :2 -auth ~/.vnc/passwd -forever -bg -o /var/log/x11vnc.log -rfbauth /etc/x11vnc.pass -shared -noxdamage -xrandr \"resize\" -rfbport 5900\n\n sudo x11vnc -forever -bg -usepw -cursor arrow -display :2\n","source":"_posts/王阁/技术/运维/ubuntu/desk_gui.md","raw":"\n安装：\n\nsudo apt-get install vnc4server xfce4\n\n\nvncserver -geometry 1280x800 -alwaysshared :1\n\n\n vncserver -kill :1\n\n\n #!/bin/sh\n\n# Uncomment the following two lines for normal desktop:\n#unset SESSION_MANAGER\n#exec /etc/X11/xinit/xinitrc\n\n#[ -x /etc/vnc/xstartup ] && exec /etc/vnc/xstartup\n#[ -r $HOME/.Xresources ] && xrdb $HOME/.Xresources\n#xsetroot -solid grey\n#vncconfig -iconic &\n#x-terminal-emulator -geometry 80x24+10+10 -ls -title \"$VNCDESKTOP Desktop\" &\n#x-window-manager &\nunset SESSION_MANAGER\nunset DBUS_SESSION_BUS_ADDRESS\n[ -x /etc/vnc/xstartup ] && exec /etc/vnc/xstartup\n[ -r $HOME/.Xresources ] && xrdb $HOME/.Xresources\nvncconfig -iconic &\n-session &\n\n\n sudo x11vnc -display :2 -auth ~/.vnc/passwd -forever -bg -o /var/log/x11vnc.log -rfbauth /etc/x11vnc.pass -shared -noxdamage -xrandr \"resize\" -rfbport 5900\n\n sudo x11vnc -forever -bg -usepw -cursor arrow -display :2\n","slug":"王阁/技术/运维/ubuntu/desk_gui","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/ubuntu/desk_gui","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqshe007ju6pwav7a8k1v","content":"<p>安装：</p>\n<p>sudo apt-get install vnc4server xfce4</p>\n<p>vncserver -geometry 1280x800 -alwaysshared :1</p>\n<p> vncserver -kill :1</p>\n<p> #!/bin/sh</p>\n<h1 id=\"Uncomment-the-following-two-lines-for-normal-desktop\"><a href=\"#Uncomment-the-following-two-lines-for-normal-desktop\" class=\"headerlink\" title=\"Uncomment the following two lines for normal desktop:\"></a>Uncomment the following two lines for normal desktop:</h1><p>#unset SESSION_MANAGER<br>#exec /etc/X11/xinit/xinitrc</p>\n<p>#[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup<br>#[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources<br>#xsetroot -solid grey<br>#vncconfig -iconic &amp;<br>#x-terminal-emulator -geometry 80x24+10+10 -ls -title “$VNCDESKTOP Desktop” &amp;<br>#x-window-manager &amp;<br>unset SESSION_MANAGER<br>unset DBUS_SESSION_BUS_ADDRESS<br>[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup<br>[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources<br>vncconfig -iconic &amp;<br>-session &amp;</p>\n<p> sudo x11vnc -display :2 -auth ~/.vnc/passwd -forever -bg -o /var/log/x11vnc.log -rfbauth /etc/x11vnc.pass -shared -noxdamage -xrandr “resize” -rfbport 5900</p>\n<p> sudo x11vnc -forever -bg -usepw -cursor arrow -display :2</p>\n","site":{"data":{}},"excerpt":"","more":"<p>安装：</p>\n<p>sudo apt-get install vnc4server xfce4</p>\n<p>vncserver -geometry 1280x800 -alwaysshared :1</p>\n<p> vncserver -kill :1</p>\n<p> #!/bin/sh</p>\n<h1 id=\"Uncomment-the-following-two-lines-for-normal-desktop\"><a href=\"#Uncomment-the-following-two-lines-for-normal-desktop\" class=\"headerlink\" title=\"Uncomment the following two lines for normal desktop:\"></a>Uncomment the following two lines for normal desktop:</h1><p>#unset SESSION_MANAGER<br>#exec /etc/X11/xinit/xinitrc</p>\n<p>#[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup<br>#[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources<br>#xsetroot -solid grey<br>#vncconfig -iconic &amp;<br>#x-terminal-emulator -geometry 80x24+10+10 -ls -title “$VNCDESKTOP Desktop” &amp;<br>#x-window-manager &amp;<br>unset SESSION_MANAGER<br>unset DBUS_SESSION_BUS_ADDRESS<br>[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup<br>[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources<br>vncconfig -iconic &amp;<br>-session &amp;</p>\n<p> sudo x11vnc -display :2 -auth ~/.vnc/passwd -forever -bg -o /var/log/x11vnc.log -rfbauth /etc/x11vnc.pass -shared -noxdamage -xrandr “resize” -rfbport 5900</p>\n<p> sudo x11vnc -forever -bg -usepw -cursor arrow -display :2</p>\n"},{"_content":"记录移动云服务器上部署的服务\n\n| 服务名 | 说明     |\n| :------------- | :------------- |\n| sjksh_store_info | 数据可视化模块的存储信息查询服务  |\n","source":"_posts/王阁/技术/运维/yd_server_config/README.md","raw":"记录移动云服务器上部署的服务\n\n| 服务名 | 说明     |\n| :------------- | :------------- |\n| sjksh_store_info | 数据可视化模块的存储信息查询服务  |\n","slug":"王阁/技术/运维/yd_server_config/README","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/yd_server_config/README","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqshf007lu6pw9fumab73","content":"<p>记录移动云服务器上部署的服务</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">服务名</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">sjksh_store_info</td>\n<td align=\"left\">数据可视化模块的存储信息查询服务</td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<p>记录移动云服务器上部署的服务</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">服务名</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">sjksh_store_info</td>\n<td align=\"left\">数据可视化模块的存储信息查询服务</td>\n</tr>\n</tbody></table>\n"},{"_content":"```\nlinux自启服务\n\n```\n\n## ubuntu","source":"_posts/王阁/技术/运维/ubuntu/linux自启服务.md","raw":"```\nlinux自启服务\n\n```\n\n## ubuntu","slug":"王阁/技术/运维/ubuntu/linux自启服务","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/ubuntu/linux自启服务","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqshf007nu6pwf2uq16kx","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">linux自启服务</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ubuntu\"><a href=\"#ubuntu\" class=\"headerlink\" title=\"ubuntu\"></a>ubuntu</h2>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">linux自启服务</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ubuntu\"><a href=\"#ubuntu\" class=\"headerlink\" title=\"ubuntu\"></a>ubuntu</h2>"},{"_content":"# 账号管理\n\n\n| 账号 | 密码     |\n| :------------- | :-------------|\n| home       | home123       |\n| kuiq.wang       |        |\n","source":"_posts/王阁/技术/运维/owncloud/账号.md","raw":"# 账号管理\n\n\n| 账号 | 密码     |\n| :------------- | :-------------|\n| home       | home123       |\n| kuiq.wang       |        |\n","slug":"王阁/技术/运维/owncloud/账号","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/owncloud/账号","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqshf007ou6pwc3yb1omv","content":"<h1 id=\"账号管理\"><a href=\"#账号管理\" class=\"headerlink\" title=\"账号管理\"></a>账号管理</h1><table>\n<thead>\n<tr>\n<th align=\"left\">账号</th>\n<th align=\"left\">密码</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">home</td>\n<td align=\"left\">home123</td>\n</tr>\n<tr>\n<td align=\"left\">kuiq.wang</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"账号管理\"><a href=\"#账号管理\" class=\"headerlink\" title=\"账号管理\"></a>账号管理</h1><table>\n<thead>\n<tr>\n<th align=\"left\">账号</th>\n<th align=\"left\">密码</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">home</td>\n<td align=\"left\">home123</td>\n</tr>\n<tr>\n<td align=\"left\">kuiq.wang</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n"},{"_content":"# 调度组件部署\n\n## 1、 DolphinScheduler部署\n\n\n\n## 2、airflow部署\n\n```\nairflow users create \\\n    --username admin \\\n    --firstname ken \\\n    --lastname Wong \\\n    --role Admin \\\n    --email wqkenqingto@163.com\n```\n\n","source":"_posts/王阁/技术/运维/调度/调度组件部署.md","raw":"# 调度组件部署\n\n## 1、 DolphinScheduler部署\n\n\n\n## 2、airflow部署\n\n```\nairflow users create \\\n    --username admin \\\n    --firstname ken \\\n    --lastname Wong \\\n    --role Admin \\\n    --email wqkenqingto@163.com\n```\n\n","slug":"王阁/技术/运维/调度/调度组件部署","published":1,"date":"2022-06-19T01:49:14.517Z","updated":"2022-06-20T02:55:29.699Z","title":"王阁/技术/运维/调度/调度组件部署","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqshg007qu6pwfwgv9erd","content":"<h1 id=\"调度组件部署\"><a href=\"#调度组件部署\" class=\"headerlink\" title=\"调度组件部署\"></a>调度组件部署</h1><h2 id=\"1、-DolphinScheduler部署\"><a href=\"#1、-DolphinScheduler部署\" class=\"headerlink\" title=\"1、 DolphinScheduler部署\"></a>1、 DolphinScheduler部署</h2><h2 id=\"2、airflow部署\"><a href=\"#2、airflow部署\" class=\"headerlink\" title=\"2、airflow部署\"></a>2、airflow部署</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">airflow users create \\</span><br><span class=\"line\">    --username admin \\</span><br><span class=\"line\">    --firstname ken \\</span><br><span class=\"line\">    --lastname Wong \\</span><br><span class=\"line\">    --role Admin \\</span><br><span class=\"line\">    --email wqkenqingto@163.com</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"调度组件部署\"><a href=\"#调度组件部署\" class=\"headerlink\" title=\"调度组件部署\"></a>调度组件部署</h1><h2 id=\"1、-DolphinScheduler部署\"><a href=\"#1、-DolphinScheduler部署\" class=\"headerlink\" title=\"1、 DolphinScheduler部署\"></a>1、 DolphinScheduler部署</h2><h2 id=\"2、airflow部署\"><a href=\"#2、airflow部署\" class=\"headerlink\" title=\"2、airflow部署\"></a>2、airflow部署</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">airflow users create \\</span><br><span class=\"line\">    --username admin \\</span><br><span class=\"line\">    --firstname ken \\</span><br><span class=\"line\">    --lastname Wong \\</span><br><span class=\"line\">    --role Admin \\</span><br><span class=\"line\">    --email wqkenqingto@163.com</span><br></pre></td></tr></table></figure>\n\n"},{"title":"flink记录","date":"2022-01-04T06:34:08.742Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n ## 目录\n\n• 分布式流处理模型\n\n• DataStream API 实践原理\n\n• Timestamp 与 Watermark 实践\n\n• Windows 窗口计算(Assigner，Function，Trigger，Evictors) • DataStream 多流合并\n\n• ProcessFunction 应用\n\n• SideOutput 旁路输出\n\n• Asynchronous I/O 异步操作\n\n• Pipeline 与 StreamGraph 生成与转换\n\n• 项目实战:基于 DataStream API 实现 PV，UV 统计","source":"_posts/王阁/技术/课程记录/Flink专项/flink记录.md","raw":"title:  flink记录\ndate:  2022年 1月 4日\ntags: [flink、极客时间]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n ## 目录\n\n• 分布式流处理模型\n\n• DataStream API 实践原理\n\n• Timestamp 与 Watermark 实践\n\n• Windows 窗口计算(Assigner，Function，Trigger，Evictors) • DataStream 多流合并\n\n• ProcessFunction 应用\n\n• SideOutput 旁路输出\n\n• Asynchronous I/O 异步操作\n\n• Pipeline 与 StreamGraph 生成与转换\n\n• 项目实战:基于 DataStream API 实现 PV，UV 统计","slug":"王阁/技术/课程记录/Flink专项/flink记录","published":1,"updated":"2022-05-06T09:38:34.372Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqshg007ru6pwcne61kcz","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"b5246dd1ae22ba3a8315a4b06ba26f46c864a62154324b1d257ed4f2ae9b6d7b\">f29c680708acd02cbb1b6cceaba06192d6c1680c5bc57c2b93157ce4c9dfce9c01758f6328cd944b04e87f2c77b921964a720d41df641bc54255edb22cffee15bf3f25804d1dfb19b5336046fc8aa4601b60305b8858f399a8d92e5ce77928a8f46a79fd584d74a7f98562aeff636e1c3a3902aaa1d8dbc34da50fa6640a7f5a648284ca38b551caf63e8dfa84a131c1868c5ec274b3aebc68fd528f10692ba99e15c2e1d5a81c974775c6ce5056d804334403d29b75c461ebb0549cdd39079173e079cea0dddc6614bb667bf4901a53691c4f9f72207aefe58bcf59adb51cf020f8b79682c7b95465417ec98bf28c3f1eb354acc3a3201b2a0c61181bbf547bbcf10217ce15eba76acc79ab85bf676ca9d8c349d5d5de00175ad1bbf8607e46c46345b691265951fdd2a09e46ca890dd2df583d1faa22b15233594ac575b3df823c828ea57b62912efe836d65e72e2344c087d8bfb985778670648b272a885e408e0082468fba155aac6d02def60da0b6a4f9420c8e7f7e7361376a00ee07673b1b6fcaefa22933da1c9918f66ee02b98c918c2389da36093b7200e115bb90550175abf8488457706fc69aae258f6137e0bbe529b6c7e5ea47e49f22e28561d6bb50020c40dcf6044a1bd9977dfe332b4d099daf6370401222c8b101eb72c9eb0974b57cb23e92957daa4e09a7afc8b997024921acd1f1e4f0df127aa7903c4ab20900ab661529fa4d942342d6ce69056c3be19c5148ace3490e23172eb76ad85b6e118d693995e8a905e32dc306a73</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h2 id=\"目录\"><a href=\"#目录\" class=\"headerlink\" title=\"目录\"></a>目录</h2><p>• 分布式流处理模型</p>\n<p>• DataStream API 实践原理</p>\n<p>• Timestamp 与 Watermark 实践</p>\n<p>• Windows 窗口计算(Assigner，Function，Trigger，Evictors) • DataStream 多流合并</p>\n<p>• ProcessFunction 应用</p>\n<p>• SideOutput 旁路输出</p>\n<p>• Asynchronous I/O 异步操作</p>\n<p>• Pipeline 与 StreamGraph 生成与转换</p>\n<p>• 项目实战:基于 DataStream API 实现 PV，UV 统计</p>\n","encrypt":true},{"title":"es记录","date":"2023-02-23T02:51:20.909Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n ## 版本与升级记录\n\n ![2021-12-20-15-53-25](https://img.wqkenqing.ren//2021-12-20-15-53-25.png)\n ![2021-12-20-15-54-03](https://img.wqkenqing.ren//2021-12-20-15-54-03.png)\n ![2021-12-20-15-54-27](https://img.wqkenqing.ren//2021-12-20-15-54-27.png) \n ![2021-12-20-15-55-43](https://img.wqkenqing.ren//2021-12-20-15-55-43.png)\n ![2021-12-20-15-56-45](https://img.wqkenqing.ren//2021-12-20-15-56-45.png)\n ![2021-12-20-16-09-23](https://img.wqkenqing.ren//2021-12-20-16-09-23.png)\n ![2021-12-20-16-10-15](https://img.wqkenqing.ren//2021-12-20-16-10-15.png)\n ![2021-12-20-16-10-58](https://img.wqkenqing.ren//2021-12-20-16-10-58.png) \n\n ## 内容记录\n \n ** 监控工具 ** \n\n cerebro\n\n ![2021-12-20-16-37-22](https://img.wqkenqing.ren//2021-12-20-16-37-22.png)\n ![2021-12-20-16-38-40](https://img.wqkenqing.ren//2021-12-20-16-38-40.png)\n ![2021-12-20-16-39-57](https://img.wqkenqing.ren//2021-12-20-16-39-57.png)\n ![2021-12-20-17-07-58](https://img.wqkenqing.ren//2021-12-20-17-07-58.png)\n ![2021-12-20-17-13-34](https://img.wqkenqing.ren//2021-12-20-17-13-34.png)\n ![2021-12-20-17-14-59](https://img.wqkenqing.ren//2021-12-20-17-14-59.png)\n ![2021-12-20-17-15-44](https://img.wqkenqing.ren//2021-12-20-17-15-44.png)\n\n ![2021-12-20-17-17-47](https://img.wqkenqing.ren//2021-12-20-17-17-47.png)\n\n ![2021-12-20-17-18-19](https://img.wqkenqing.ren//2021-12-20-17-18-19.png)\n\n ![2021-12-20-17-21-13](https://img.wqkenqing.ren//2021-12-20-17-21-13.png) \n\n ![2021-12-20-17-28-35](https://img.wqkenqing.ren//2021-12-20-17-28-35.png)\n\n ![2021-12-20-17-29-31](https://img.wqkenqing.ren//2021-12-20-17-29-31.png)\n ![2021-12-20-17-30-24](https://img.wqkenqing.ren//2021-12-20-17-30-24.png)\n ![2021-12-20-17-35-40](https://img.wqkenqing.ren//2021-12-20-17-35-40.png)\n ![2021-12-20-17-55-50](https://img.wqkenqing.ren//2021-12-20-17-55-50.png)\n ![2021-12-21-11-07-56](https://img.wqkenqing.ren//2021-12-21-11-07-56.png)\n ![2021-12-21-11-08-26](https://img.wqkenqing.ren//2021-12-21-11-08-26.png) \n ![2021-12-21-11-11-23](https://img.wqkenqing.ren//2021-12-21-11-11-23.png)\n\n ![2021-12-21-11-41-54](https://img.wqkenqing.ren//2021-12-21-11-41-54.png)\n ![2021-12-21-11-42-11](https://img.wqkenqing.ren//2021-12-21-11-42-11.png)\n ![2021-12-21-13-55-09](https://img.wqkenqing.ren//2021-12-21-13-55-09.png)\n ![2021-12-21-13-57-42](https://img.wqkenqing.ren//2021-12-21-13-57-42.png)\n ![2021-12-21-14-00-23](https://img.wqkenqing.ren//2021-12-21-14-00-23.png)\n ![2021-12-21-14-06-39](https://img.wqkenqing.ren//2021-12-21-14-06-39.png)\n ![2021-12-21-14-17-40](https://img.wqkenqing.ren//2021-12-21-14-17-40.png)\n ![2021-12-21-14-22-26](https://img.wqkenqing.ren//2021-12-21-14-22-26.png)\n ![2021-12-21-14-23-52](https://img.wqkenqing.ren//2021-12-21-14-23-52.png)\n ![2021-12-21-14-24-04](https://img.wqkenqing.ren//2021-12-21-14-24-04.png)\n ![2021-12-21-14-28-21](https://img.wqkenqing.ren//2021-12-21-14-28-21.png)\n ![2021-12-21-14-31-10](https://img.wqkenqing.ren//2021-12-21-14-31-10.png)\n ![2021-12-21-14-35-49](https://img.wqkenqing.ren//2021-12-21-14-35-49.png)\n ![2021-12-21-14-36-30](https://img.wqkenqing.ren//2021-12-21-14-36-30.png)\n![2021-12-21-14-37-05](https://img.wqkenqing.ren//2021-12-21-14-37-05.png)\n![2021-12-21-14-37-18](https://img.wqkenqing.ren//2021-12-21-14-37-18.png)\n![2021-12-21-15-20-20](https://img.wqkenqing.ren//2021-12-21-15-20-20.png)\n![2021-12-21-15-21-03](https://img.wqkenqing.ren//2021-12-21-15-21-03.png)\n![2021-12-21-15-22-14](https://img.wqkenqing.ren//2021-12-21-15-22-14.png)\n![2021-12-21-15-22-46](https://img.wqkenqing.ren//2021-12-21-15-22-46.png)\n![2021-12-21-15-23-12](https://img.wqkenqing.ren//2021-12-21-15-23-12.png)\n![2021-12-21-15-24-11](https://img.wqkenqing.ren//2021-12-21-15-24-11.png)\n![2021-12-21-15-24-52](https://img.wqkenqing.ren//2021-12-21-15-24-52.png)\n![2021-12-21-15-41-49](https://img.wqkenqing.ren//2021-12-21-15-41-49.png)\n![2021-12-21-15-44-07](https://img.wqkenqing.ren//2021-12-21-15-44-07.png)\n![2021-12-21-15-47-48](https://img.wqkenqing.ren//2021-12-21-15-47-48.png)\n![2021-12-21-15-49-16](https://img.wqkenqing.ren//2021-12-21-15-49-16.png)\n\n![2021-12-21-15-53-01](https://img.wqkenqing.ren//2021-12-21-15-53-01.png)\n![2021-12-21-15-53-12](https://img.wqkenqing.ren//2021-12-21-15-53-12.png)\n![2021-12-21-15-53-47](https://img.wqkenqing.ren//2021-12-21-15-53-47.png)\n![2021-12-21-15-58-03](https://img.wqkenqing.ren//2021-12-21-15-58-03.png)\n![2021-12-21-16-32-42](https://img.wqkenqing.ren//2021-12-21-16-32-42.png)\n![2021-12-21-16-36-29](https://img.wqkenqing.ren//2021-12-21-16-36-29.png)\n![2021-12-21-16-39-24](https://img.wqkenqing.ren//2021-12-21-16-39-24.png)\n![2021-12-21-16-41-30](https://img.wqkenqing.ren//2021-12-21-16-41-30.png)\n![2021-12-21-16-41-50](https://img.wqkenqing.ren//2021-12-21-16-41-50.png)\n![2021-12-21-16-42-00](https://img.wqkenqing.ren//2021-12-21-16-42-00.png)\n![2021-12-21-16-53-27](https://img.wqkenqing.ren//2021-12-21-16-53-27.png) \n![2021-12-21-16-58-11](https://img.wqkenqing.ren//2021-12-21-16-58-11.png)\n![2021-12-21-16-58-58](https://img.wqkenqing.ren//2021-12-21-16-58-58.png)\n![2021-12-21-16-59-49](https://img.wqkenqing.ren//2021-12-21-16-59-49.png)\n![2021-12-21-17-00-54](https://img.wqkenqing.ren//2021-12-21-17-00-54.png)\n![2021-12-21-17-02-18](https://img.wqkenqing.ren//2021-12-21-17-02-18.png)\n![2021-12-21-17-03-04](https://img.wqkenqing.ren//2021-12-21-17-03-04.png)\n ![2021-12-21-17-28-38](https://img.wqkenqing.ren//2021-12-21-17-28-38.png)\n ![2021-12-21-17-29-20](https://img.wqkenqing.ren//2021-12-21-17-29-20.png)\n ![2021-12-21-17-30-20](https://img.wqkenqing.ren//2021-12-21-17-30-20.png)\n ![2021-12-21-17-30-41](https://img.wqkenqing.ren//2021-12-21-17-30-41.png)\n ![2021-12-21-17-30-49](https://img.wqkenqing.ren//2021-12-21-17-30-49.png))\n \n ![2021-12-21-17-31-43](https://img.wqkenqing.ren//2021-12-21-17-31-43.png)\n\n ![2021-12-21-17-34-46](https://img.wqkenqing.ren//2021-12-21-17-34-46.png)\n ![2021-12-21-17-34-39](https://img.wqkenqing.ren//2021-12-21-17-34-39.png)\n![2021-12-21-17-36-53](https://img.wqkenqing.ren//2021-12-21-17-36-53.png)\n![2021-12-21-17-40-53](https://img.wqkenqing.ren//2021-12-21-17-40-53.png)\n\n![2021-12-21-17-43-09](https://img.wqkenqing.ren//2021-12-21-17-43-09.png)\n\n![2021-12-21-17-44-04](https://img.wqkenqing.ren//2021-12-21-17-44-04.png)\n\n![2021-12-21-17-53-08](https://img.wqkenqing.ren//2021-12-21-17-53-08.png)\n\n![2021-12-21-17-58-39](https://img.wqkenqing.ren//2021-12-21-17-58-39.png)\n\n![2021-12-22-13-52-56](https://img.wqkenqing.ren//2021-12-22-13-52-56.png)\n![2021-12-27-17-06-11](https://img.wqkenqing.ren//2021-12-27-17-06-11.png)\n\n![2021-12-27-17-28-06](https://img.wqkenqing.ren//2021-12-27-17-28-06.png)\n![2021-12-27-17-28-40](https://img.wqkenqing.ren//2021-12-27-17-28-40.png)\n\n![2021-12-28-14-34-13](https://img.wqkenqing.ren//2021-12-28-14-34-13.png)\n![2021-12-28-14-35-11](https://img.wqkenqing.ren//2021-12-28-14-35-11.png)\n![2021-12-28-14-35-58](https://img.wqkenqing.ren//2021-12-28-14-35-58.png)\n![2021-12-28-15-02-36](https://img.wqkenqing.ren//2021-12-28-15-02-36.png)\n![2021-12-28-15-04-42](https://img.wqkenqing.ren//2021-12-28-15-04-42.png)\n![2021-12-28-15-05-21](https://img.wqkenqing.ren//2021-12-28-15-05-21.png)\n![2021-12-28-15-06-08](https://img.wqkenqing.ren//2021-12-28-15-06-08.png)\n![2021-12-28-15-06-26](https://img.wqkenqing.ren//2021-12-28-15-06-26.png)\n![2021-12-28-15-13-56](https://img.wqkenqing.ren//2021-12-28-15-13-56.png)\n\n![2021-12-28-15-14-50](https://img.wqkenqing.ren//2021-12-28-15-14-50.png)\n![2021-12-28-15-16-03](https://img.wqkenqing.ren//2021-12-28-15-16-03.png)\n![2021-12-28-15-17-09](https://img.wqkenqing.ren//2021-12-28-15-17-09.png)\n![2021-12-28-15-17-33](https://img.wqkenqing.ren//2021-12-28-15-17-33.png)\n![2021-12-28-15-19-06](https://img.wqkenqing.ren//2021-12-28-15-19-06.png)\n![2021-12-28-15-22-23](https://img.wqkenqing.ren//2021-12-28-15-22-23.png)\n![2021-12-28-15-24-49](https://img.wqkenqing.ren//2021-12-28-15-24-49.png)\n![2021-12-28-15-26-17](https://img.wqkenqing.ren//2021-12-28-15-26-17.png)\n![2021-12-28-15-27-40](https://img.wqkenqing.ren//2021-12-28-15-27-40.png)\n![2021-12-28-15-49-36](https://img.wqkenqing.ren//2021-12-28-15-49-36.png)\n\n![2021-12-28-15-51-23](https://img.wqkenqing.ren//2021-12-28-15-51-23.png)\n![2021-12-28-15-55-06](https://img.wqkenqing.ren//2021-12-28-15-55-06.png) \n\n![2021-12-28-15-56-51](https://img.wqkenqing.ren//2021-12-28-15-56-51.png)\n\n![2021-12-28-16-26-47](https://img.wqkenqing.ren//2021-12-28-16-26-47.png)\n![2021-12-28-16-27-18](https://img.wqkenqing.ren//2021-12-28-16-27-18.png)\n![2021-12-28-16-29-51](https://img.wqkenqing.ren//2021-12-28-16-29-51.png)\n![2021-12-28-16-34-18](https://img.wqkenqing.ren//2021-12-28-16-34-18.png)\n![2021-12-28-16-35-24](https://img.wqkenqing.ren//2021-12-28-16-35-24.png)\n\n![2021-12-28-16-38-14](https://img.wqkenqing.ren//2021-12-28-16-38-14.png)\n![2021-12-28-16-55-27](https://img.wqkenqing.ren//2021-12-28-16-55-27.png)","source":"_posts/王阁/技术/课程记录/es专项/es记录.md","raw":"title:  es记录\ndate:  \ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n ## 版本与升级记录\n\n ![2021-12-20-15-53-25](https://img.wqkenqing.ren//2021-12-20-15-53-25.png)\n ![2021-12-20-15-54-03](https://img.wqkenqing.ren//2021-12-20-15-54-03.png)\n ![2021-12-20-15-54-27](https://img.wqkenqing.ren//2021-12-20-15-54-27.png) \n ![2021-12-20-15-55-43](https://img.wqkenqing.ren//2021-12-20-15-55-43.png)\n ![2021-12-20-15-56-45](https://img.wqkenqing.ren//2021-12-20-15-56-45.png)\n ![2021-12-20-16-09-23](https://img.wqkenqing.ren//2021-12-20-16-09-23.png)\n ![2021-12-20-16-10-15](https://img.wqkenqing.ren//2021-12-20-16-10-15.png)\n ![2021-12-20-16-10-58](https://img.wqkenqing.ren//2021-12-20-16-10-58.png) \n\n ## 内容记录\n \n ** 监控工具 ** \n\n cerebro\n\n ![2021-12-20-16-37-22](https://img.wqkenqing.ren//2021-12-20-16-37-22.png)\n ![2021-12-20-16-38-40](https://img.wqkenqing.ren//2021-12-20-16-38-40.png)\n ![2021-12-20-16-39-57](https://img.wqkenqing.ren//2021-12-20-16-39-57.png)\n ![2021-12-20-17-07-58](https://img.wqkenqing.ren//2021-12-20-17-07-58.png)\n ![2021-12-20-17-13-34](https://img.wqkenqing.ren//2021-12-20-17-13-34.png)\n ![2021-12-20-17-14-59](https://img.wqkenqing.ren//2021-12-20-17-14-59.png)\n ![2021-12-20-17-15-44](https://img.wqkenqing.ren//2021-12-20-17-15-44.png)\n\n ![2021-12-20-17-17-47](https://img.wqkenqing.ren//2021-12-20-17-17-47.png)\n\n ![2021-12-20-17-18-19](https://img.wqkenqing.ren//2021-12-20-17-18-19.png)\n\n ![2021-12-20-17-21-13](https://img.wqkenqing.ren//2021-12-20-17-21-13.png) \n\n ![2021-12-20-17-28-35](https://img.wqkenqing.ren//2021-12-20-17-28-35.png)\n\n ![2021-12-20-17-29-31](https://img.wqkenqing.ren//2021-12-20-17-29-31.png)\n ![2021-12-20-17-30-24](https://img.wqkenqing.ren//2021-12-20-17-30-24.png)\n ![2021-12-20-17-35-40](https://img.wqkenqing.ren//2021-12-20-17-35-40.png)\n ![2021-12-20-17-55-50](https://img.wqkenqing.ren//2021-12-20-17-55-50.png)\n ![2021-12-21-11-07-56](https://img.wqkenqing.ren//2021-12-21-11-07-56.png)\n ![2021-12-21-11-08-26](https://img.wqkenqing.ren//2021-12-21-11-08-26.png) \n ![2021-12-21-11-11-23](https://img.wqkenqing.ren//2021-12-21-11-11-23.png)\n\n ![2021-12-21-11-41-54](https://img.wqkenqing.ren//2021-12-21-11-41-54.png)\n ![2021-12-21-11-42-11](https://img.wqkenqing.ren//2021-12-21-11-42-11.png)\n ![2021-12-21-13-55-09](https://img.wqkenqing.ren//2021-12-21-13-55-09.png)\n ![2021-12-21-13-57-42](https://img.wqkenqing.ren//2021-12-21-13-57-42.png)\n ![2021-12-21-14-00-23](https://img.wqkenqing.ren//2021-12-21-14-00-23.png)\n ![2021-12-21-14-06-39](https://img.wqkenqing.ren//2021-12-21-14-06-39.png)\n ![2021-12-21-14-17-40](https://img.wqkenqing.ren//2021-12-21-14-17-40.png)\n ![2021-12-21-14-22-26](https://img.wqkenqing.ren//2021-12-21-14-22-26.png)\n ![2021-12-21-14-23-52](https://img.wqkenqing.ren//2021-12-21-14-23-52.png)\n ![2021-12-21-14-24-04](https://img.wqkenqing.ren//2021-12-21-14-24-04.png)\n ![2021-12-21-14-28-21](https://img.wqkenqing.ren//2021-12-21-14-28-21.png)\n ![2021-12-21-14-31-10](https://img.wqkenqing.ren//2021-12-21-14-31-10.png)\n ![2021-12-21-14-35-49](https://img.wqkenqing.ren//2021-12-21-14-35-49.png)\n ![2021-12-21-14-36-30](https://img.wqkenqing.ren//2021-12-21-14-36-30.png)\n![2021-12-21-14-37-05](https://img.wqkenqing.ren//2021-12-21-14-37-05.png)\n![2021-12-21-14-37-18](https://img.wqkenqing.ren//2021-12-21-14-37-18.png)\n![2021-12-21-15-20-20](https://img.wqkenqing.ren//2021-12-21-15-20-20.png)\n![2021-12-21-15-21-03](https://img.wqkenqing.ren//2021-12-21-15-21-03.png)\n![2021-12-21-15-22-14](https://img.wqkenqing.ren//2021-12-21-15-22-14.png)\n![2021-12-21-15-22-46](https://img.wqkenqing.ren//2021-12-21-15-22-46.png)\n![2021-12-21-15-23-12](https://img.wqkenqing.ren//2021-12-21-15-23-12.png)\n![2021-12-21-15-24-11](https://img.wqkenqing.ren//2021-12-21-15-24-11.png)\n![2021-12-21-15-24-52](https://img.wqkenqing.ren//2021-12-21-15-24-52.png)\n![2021-12-21-15-41-49](https://img.wqkenqing.ren//2021-12-21-15-41-49.png)\n![2021-12-21-15-44-07](https://img.wqkenqing.ren//2021-12-21-15-44-07.png)\n![2021-12-21-15-47-48](https://img.wqkenqing.ren//2021-12-21-15-47-48.png)\n![2021-12-21-15-49-16](https://img.wqkenqing.ren//2021-12-21-15-49-16.png)\n\n![2021-12-21-15-53-01](https://img.wqkenqing.ren//2021-12-21-15-53-01.png)\n![2021-12-21-15-53-12](https://img.wqkenqing.ren//2021-12-21-15-53-12.png)\n![2021-12-21-15-53-47](https://img.wqkenqing.ren//2021-12-21-15-53-47.png)\n![2021-12-21-15-58-03](https://img.wqkenqing.ren//2021-12-21-15-58-03.png)\n![2021-12-21-16-32-42](https://img.wqkenqing.ren//2021-12-21-16-32-42.png)\n![2021-12-21-16-36-29](https://img.wqkenqing.ren//2021-12-21-16-36-29.png)\n![2021-12-21-16-39-24](https://img.wqkenqing.ren//2021-12-21-16-39-24.png)\n![2021-12-21-16-41-30](https://img.wqkenqing.ren//2021-12-21-16-41-30.png)\n![2021-12-21-16-41-50](https://img.wqkenqing.ren//2021-12-21-16-41-50.png)\n![2021-12-21-16-42-00](https://img.wqkenqing.ren//2021-12-21-16-42-00.png)\n![2021-12-21-16-53-27](https://img.wqkenqing.ren//2021-12-21-16-53-27.png) \n![2021-12-21-16-58-11](https://img.wqkenqing.ren//2021-12-21-16-58-11.png)\n![2021-12-21-16-58-58](https://img.wqkenqing.ren//2021-12-21-16-58-58.png)\n![2021-12-21-16-59-49](https://img.wqkenqing.ren//2021-12-21-16-59-49.png)\n![2021-12-21-17-00-54](https://img.wqkenqing.ren//2021-12-21-17-00-54.png)\n![2021-12-21-17-02-18](https://img.wqkenqing.ren//2021-12-21-17-02-18.png)\n![2021-12-21-17-03-04](https://img.wqkenqing.ren//2021-12-21-17-03-04.png)\n ![2021-12-21-17-28-38](https://img.wqkenqing.ren//2021-12-21-17-28-38.png)\n ![2021-12-21-17-29-20](https://img.wqkenqing.ren//2021-12-21-17-29-20.png)\n ![2021-12-21-17-30-20](https://img.wqkenqing.ren//2021-12-21-17-30-20.png)\n ![2021-12-21-17-30-41](https://img.wqkenqing.ren//2021-12-21-17-30-41.png)\n ![2021-12-21-17-30-49](https://img.wqkenqing.ren//2021-12-21-17-30-49.png))\n \n ![2021-12-21-17-31-43](https://img.wqkenqing.ren//2021-12-21-17-31-43.png)\n\n ![2021-12-21-17-34-46](https://img.wqkenqing.ren//2021-12-21-17-34-46.png)\n ![2021-12-21-17-34-39](https://img.wqkenqing.ren//2021-12-21-17-34-39.png)\n![2021-12-21-17-36-53](https://img.wqkenqing.ren//2021-12-21-17-36-53.png)\n![2021-12-21-17-40-53](https://img.wqkenqing.ren//2021-12-21-17-40-53.png)\n\n![2021-12-21-17-43-09](https://img.wqkenqing.ren//2021-12-21-17-43-09.png)\n\n![2021-12-21-17-44-04](https://img.wqkenqing.ren//2021-12-21-17-44-04.png)\n\n![2021-12-21-17-53-08](https://img.wqkenqing.ren//2021-12-21-17-53-08.png)\n\n![2021-12-21-17-58-39](https://img.wqkenqing.ren//2021-12-21-17-58-39.png)\n\n![2021-12-22-13-52-56](https://img.wqkenqing.ren//2021-12-22-13-52-56.png)\n![2021-12-27-17-06-11](https://img.wqkenqing.ren//2021-12-27-17-06-11.png)\n\n![2021-12-27-17-28-06](https://img.wqkenqing.ren//2021-12-27-17-28-06.png)\n![2021-12-27-17-28-40](https://img.wqkenqing.ren//2021-12-27-17-28-40.png)\n\n![2021-12-28-14-34-13](https://img.wqkenqing.ren//2021-12-28-14-34-13.png)\n![2021-12-28-14-35-11](https://img.wqkenqing.ren//2021-12-28-14-35-11.png)\n![2021-12-28-14-35-58](https://img.wqkenqing.ren//2021-12-28-14-35-58.png)\n![2021-12-28-15-02-36](https://img.wqkenqing.ren//2021-12-28-15-02-36.png)\n![2021-12-28-15-04-42](https://img.wqkenqing.ren//2021-12-28-15-04-42.png)\n![2021-12-28-15-05-21](https://img.wqkenqing.ren//2021-12-28-15-05-21.png)\n![2021-12-28-15-06-08](https://img.wqkenqing.ren//2021-12-28-15-06-08.png)\n![2021-12-28-15-06-26](https://img.wqkenqing.ren//2021-12-28-15-06-26.png)\n![2021-12-28-15-13-56](https://img.wqkenqing.ren//2021-12-28-15-13-56.png)\n\n![2021-12-28-15-14-50](https://img.wqkenqing.ren//2021-12-28-15-14-50.png)\n![2021-12-28-15-16-03](https://img.wqkenqing.ren//2021-12-28-15-16-03.png)\n![2021-12-28-15-17-09](https://img.wqkenqing.ren//2021-12-28-15-17-09.png)\n![2021-12-28-15-17-33](https://img.wqkenqing.ren//2021-12-28-15-17-33.png)\n![2021-12-28-15-19-06](https://img.wqkenqing.ren//2021-12-28-15-19-06.png)\n![2021-12-28-15-22-23](https://img.wqkenqing.ren//2021-12-28-15-22-23.png)\n![2021-12-28-15-24-49](https://img.wqkenqing.ren//2021-12-28-15-24-49.png)\n![2021-12-28-15-26-17](https://img.wqkenqing.ren//2021-12-28-15-26-17.png)\n![2021-12-28-15-27-40](https://img.wqkenqing.ren//2021-12-28-15-27-40.png)\n![2021-12-28-15-49-36](https://img.wqkenqing.ren//2021-12-28-15-49-36.png)\n\n![2021-12-28-15-51-23](https://img.wqkenqing.ren//2021-12-28-15-51-23.png)\n![2021-12-28-15-55-06](https://img.wqkenqing.ren//2021-12-28-15-55-06.png) \n\n![2021-12-28-15-56-51](https://img.wqkenqing.ren//2021-12-28-15-56-51.png)\n\n![2021-12-28-16-26-47](https://img.wqkenqing.ren//2021-12-28-16-26-47.png)\n![2021-12-28-16-27-18](https://img.wqkenqing.ren//2021-12-28-16-27-18.png)\n![2021-12-28-16-29-51](https://img.wqkenqing.ren//2021-12-28-16-29-51.png)\n![2021-12-28-16-34-18](https://img.wqkenqing.ren//2021-12-28-16-34-18.png)\n![2021-12-28-16-35-24](https://img.wqkenqing.ren//2021-12-28-16-35-24.png)\n\n![2021-12-28-16-38-14](https://img.wqkenqing.ren//2021-12-28-16-38-14.png)\n![2021-12-28-16-55-27](https://img.wqkenqing.ren//2021-12-28-16-55-27.png)","slug":"王阁/技术/课程记录/es专项/es记录","published":1,"updated":"2023-02-23T02:51:20.909Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqshg007tu6pw8mwy3a69","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"1a8b9b93d75ace17bf01b80e5ef983dfe4f5a2495a7beedba2809930b3716fad\">f29c680708acd02cbb1b6cceaba06192856b14702b0b81be7f4694106a64948a9a60b4ca27bc64b5e334ad30c7c27a689e77bbf157ac2aa1480e039a7fb82d12353d5fee449fd913825b6fc0d20808bdcb158243e534f810ba32fe14b2908513066ca17ad7b585ce6d95de71d1a67f4353b26d7a5892b850324d43b767a65a5306177150b9d8762ad43bb88195923b8b31132af745f38815343040d19b93b2f82263d0b3eebc6128cf59941e58dfa16cdafe392dd169820929cdcb38af6f70b3bc332b98a465f08cc1c3c8368364b68de5ab9f74de4e6ec08707625a7b97e875024aa32f21043c343c4026b393370c0ac1191d75cc26762efe23b9ec1a05ccb815958c6e93c74b248e6dcd92dcef5ca67a097be1c21e07a9683fe6cc99edbad7da2bdb8207f0e254c471066d793043398d0c1ab9561db2e145b3c07391a34f1df0976551ad1b69a0d05eafe75e213dedc786796e6aca5d44fe7d7d5c1cfcc676c0880c6f432043c9da1ee0d1de75bbc68ce8b4cd1dc9bded029e3a7724b993a95c2d08da2a9cdb7c7630cc9600009c57b8d4751f8aeefaca6522c75ab036e150d7f4af00342c37ff4dce335f68024e36b93c9c3aee193d7eeee20ad1a13832b18b8c51949697e228ee9989530e5193977ce57d708705b987df42e8270abcaf31a59755b9373d6c4753a481bd7a10f450dec62f50d322f6ebf9fa23c7e96a6ffcba94e1c2c691f0e87ac91ccd0952f621f66f0f38d28b83a34ed1900074ca929da3e4d6d2729af02f29c6c78eb843619d163433b9e4166e7d03fe411323c6743b5bd5099031235574f9256017ba4e6333a7c5151aa00c61f480e4f6ccebf6e760878c425255692cdbc4bf7e99cebb25ba2f074fa1bb35f751668e9d1af630685b1648a60034c0659ff2d557dcb1e6902193e1d9b2e4dfdc4b7a8b47a6ecdc4239a95d2fd5e5fc1731496b1c119c7d495fad04bf30c54f9e07e8765ea43955a76fe31abf1bec726737bfbcda43b909467c4e2fe6118cdfbc18a1a033ec80eb25be095812c082b21218f4386e82d4eecc99544e1421f937c3984fb35bdb8197154c3eb29091d09dbb0ebe50eb44a7c0d13ef24e5a1a191a407621ccfb0ce6d5fdffd46a9a58cfca5656601a88e9703109cd0187d5e0410c1a44a086523d81f26d3bc1d40ba01aae76eb1b126911b5d116cc04384781390e0681ffa8bbc286e63d7ffce48ccb85c2fbb35bf35fdb4123ba619bf83106c27e588ad86822b12f62106fb43a41a86deddbcf05c7bcf7462c9bddbcc68fc8602b50f545f7854289ba70f5acabd03784f1205594e31873a9a109559ca2189365286cf48d378c4dcdedd926ab528ccf603bade2110d635b9d748852f67625333fae08db44dd406963fe05870c9c8a90f6b64342cb0e0c20b24c8d894e9712f91ba48e19c82068987328eda28881d79225fc45b335f3f6c772e227ffe939a3631bfe0d18624271e007b6b67ad3a07a747620e81125e5af75a1484d71c8a25f0ba9fbc5285251644741bab1cbdd82e2fcaca30498ee9de0d4bd8033222486d2e8c1721dc0b4490cf943bb34a3e5a789be9c715443bd15f29086480ddf40aa660cb19b82ee9f59524211ecb5f4cada5de8397265bec3265cad59a13b9810b7fc2f4cde74547e555e79d8e16e16e8c31d1aa3df7978e739a48af491ce1f5e7be9ad0b15fc228a1e8c513ea873c871acb30bec5494832824cf29b66536f6a6bde5d719bd7c40e6f484c2e056571f159c8d6ff57b225aad9057c83fdd58672530c1cc9cf077d16afca1bb2533b5cbfcfe4e9d392b57398c5916d85487175f41fb3769bf1e9212121c54c5fa26434f6596317a440a9629db7e6f5e9ff82507cf5543e5e03f9edef396ce8083de282b8bc5b7ff3e4755e437ad0653b430538f3da93971ac725ad2e3d86a1afdba3f6a533798768dfacae6161b086dc4a0ce5de74ea258130b76b203f532416ca69b56b6c38d87b29895808c3ca66dc757603cdc19869e5f08339ca61bb1668081a5a6ef274c666046f8c5a94f7759f965d06abec492ffff0b09e1c640f71706817f43b0f43458e65d5d10c9dca6a0a566ace96ad5b3b40a58ab1bb20b6b5a48bde0af75567f723098d0b1fd77296b6106bfc45024671a9d77b16597130b22fed74d75aeb04c6551a8b0a0d4cbc71c3db05ed7cf6d82ecfb4d2f0dbb77e0217bde9382deec7e7d424f843a8d56d5bf30e493cf02f0378e2c45f2437be672cbe01d7a501970f0e30a8bc44bd2aff858b18b0da8bbc7b9870239c5c71e77c71cae860f3fad6458b57beb3ebf4c09fe6e265804b067629286fba106fd0b02e2a79a76d2b5b2414bbfaf3250fef6de5b7bd04145e686eb2b2ffb47ace9dd65625d753608440c792cf89a3cb0bd890147cd47e72180eef19513aae92ce4670c6d1af0d72c6c89433a6a56f01c680f8986f75034b69b617664428bd7a9bbdebfc0fbe7721dc0cacf9bbdd2beefba9ce564a146afb340ca170580326e6be55d77f18592ddfefb9276609f19c796c0e72accdb2e85d86f2246409a1c009f6d014bdbdb090b5946a25b814e40bc307a7e1ec61f93b614444623a07e8d7f6b541d558263ef74ca3d8b372234bb166e6a795ecf680b54046f5343c209029e4cde549165a31f7dc0f2d5720a29d9f40f868d9704c75969c076062e99d7281d741e2eb19da4b4e0b2605d69c1b9e91c5f37a46d9749bf6e7901784a0d855bc611102f933c9c8a45a683337fb62c5616bd8b9519d99a2addd5d9b56a9c0384e0cbcda7cd2876d1adedb33c357f442382bcb8514a675d15621da7abe66bf64a865ca9c7723d44626808a101f99d28cb982b31216d24b10ab749b2d1e7e2472afe9ada4bb5761441a73cab1e5f3c75f273bdc37113ce35d7ccba91c2832f5ededaccb020a26ead4306fccc74c9d919283dbdc880a2bd7c09b19a03ddb6710ed142e5f03c1e3304371e90c4dfc48ddb3a8e88cc71ddf5db17e03b283059cb0c3bb8a1fc4b869ee32ee546bd032a0bb935415c45f9d7e90213480b425b7f83a6f375beef218e94f0c8b8f015532ce7c3d674ad25acbd61b2fccfca5dd73e528d12a7369b7c324652f93274d3585eecd0983299534e4da5ad9ec9056bf6c30a55103c32ee84bd69d3fee9840d40da293af1c4ddc769c3ef04276536f3bcb4e6d79ec06b2f2c3f2862e495663295b3cea188c013cef006e5c1bf931eb27f02ba8f2b6dd9353a5c210f90c9a7b059c557dc8d1c91856b9a1f1975b016d5bca1cd3828928c3d198c41e99a6657744a9d100f7416d0a11eec402108c9fc9e8018998bb99ce07eb54c8ec3d0cbaa0c6594ab30f73cc3a517ffc7bd26d7c2a2fd19eb3f70ac1970e1ee4407de0b9d70fefda5df73bab40c21c98bd5b84dcd217a696f323ba4fc8bfa46674d54ac17c074295677afd86259704f428a0841db809f688c0901fcf6d8a3113fe00d67318d2643e20b9432b36f605ecb2779b8656182fe0a9d276b4581a42584d056c24d62c926671221ad4e12d4682464e9564e482cd4711897db689f403c641f947bf7dd46b7bff20c8a449457f2af76513653b7163bfc66353e3a9b5f0b19684e4eef99eca5894af68b58060b58cf38f71a561a378494997385cea53c874aab5257061222fde1c2cc650afc70cd08ec43d0ca698e6584f9d8b2607fe23753833f948c59a2ecab752c74f9c5a9fe7757a2a5806ea46b1993a00c71cfdd8ea3b36ab21f28fabe1c2f2b7b3c55d6c38f84fa04c9e05a691207f6c4c9a04bca20e528939f1cb638fdfcf5d163e9ea12e5fb7cd86e6c43b2c8bba74d73e3d1ca5ab3de6e54b2cf2cc9d9387ce5e1b4312931fbf8df16950bf977ad57837a7f6758dbdd6b01bac542a503f6e1095788bb81b6d8c212a81c20e36c320e43037293d6b1e0033a437f366f6df985c30247ac41131bc6927c73c41009e196ed0ac56728704ec9760d89e8dce95ee67fccababd5a5d1db1905bae4e0671d569701b35e51f50c427719b8fac6e2308c93bf00554e86c5595cc3ce5d473f162b5cceeb33124cb3a118b3c2f6c94b7c4bb65724e77efcb47d7e262683829c16d98bb6772680fec439e71c0917b32ea6768edc130a2c43e97382b17e111057d1917913126714a1b948eca10ca5fbc5c34d75bc0dc5c3ca88487df7b6814c2fdfbc77265dd5fdb7eca9135ea279afd68032ff1ecfb1da7568ad5c52b61fb730f921d018f97dbdc7f2bf901624960a0210ac9ba994d547c8d26b31a7bff211a86bfbecb790d407ef27341065d5bba5fe10aae99cd55aa5fb68dc2bf18e3dc0f7f9d1f40bc8debd1e7cee7726917ac05e5b318372199f19ae29196e70e74daa7643080c54ee8ca949eb291bec78a42c7586265c5f108b20a21df6c34c5c9912c8ffe59d42b2dbaf204bafefb27628f0553bcad44f9fa30cff92f8edb8639007210421b6226ff7a9b3d0ce65470848afeb3b4f4aaf8230a3c2f72f53fbf13652537b27e41130e96dc4557695b83701c366485337d8ea592479376c44b512297582175f1517ff911054dc21b272f17aa68b3cf67c34932b420ee8a8b8b19c777aa230ecfb44b1907a1d43cb6362054806606f42d8e6bde1146e2d24f0338ecab934cfde2446f08a13b06d271713d2ade100f89b435e167a250e9799c2a4678fbfbc4fd8eb2dfa9bd0c520a31123edfc183719122c61009edefe1ba8be524eb87f59e3013dd60db8ae210e95da53ee1de2dfc7dced54e720e51c3cc73bf69449eed52f57e8698023c18040c95dcb63a30f7231e3163194ee0c8f30f7e35650bf73b5796b4f8acee4f6b8f4c315563879ce834ff20a76c3cbfe9acec9f804bb64704dac5a6d6c97895acf40f74b6955082dd12aadab8824237d9243054281505e6be9d349738ccbaad9b8bf2d910e7b789f453ef6714097bc356e2d542f1aa5116ae396c2a0594a8febf3fd65c747ca09b1cf97e3163683c62719289e08dc41718c897ce3ebe274837c16afdef460b5594fc5dcd6ecc79172e5873f7272dac5830a4d330511124afc85c65158c4a3f190a7e86eca01b59b340ad46c4e66fdefe6808e448a679fecac20cb626441194cebe4e1c80c59453d9bf69e50a5c04fe06082cde7b0061f44f797b7c32eacd77fb56841f765c656634972854e95d205784a0793f04b9b82c55a620899689787cd8894ea12c34f2a9465ebe73cf59c5f1fc43f80a9033d624444d0f298c9492cb32319fbd6e2fac0d03de878bb2309a17768055d405cb05f10c319ba3e47db4ab995fe3e9839dcc777cfddf76dde297f78a9a38466a67b1049770fcb9a7b567b2ba710454a339e62858b551dc0f7d58b731169c7d8296eab12865213ddeaded20743d3d95cc3424b8937c85ad214ddde0a067fccbf434dbadf8fa08d7076dcc501b77f87ae3bc7809ea9f804593ca2cfb7f17e3c69ca95a8ce4c61ffbc00799ba521edeee9ee80cc1be3f5d48af038c8b1094df9e9eee42aaf4d37461bfd10d21f3d2594da9b5dd9c6b060852456415835739a8a70ee832ff42aadde70ebc5ea8ec29a5bcc3153daafe444ae908d4376f5a76837340e2bafcaead46d48e2344c3b54ebdd5c945c7a1ae4713db32a0a8c6b9838f532398476f0ab45fb748b1e3e0970004e0899494272ae7869a8eda203dc3ec325529f0ff8e16e2aac1a2c6d5b6db9bcf2274735f327c30c4f556111440ca7c6a9fa39f51a8e7a3305b2654dbc1f1fab571580852a815bd562034f55ae55a44e5e37d3bab374e1adc24e342c907e5e7cc49ec593c8bc70f66244893870e67f6361690687a0ff4d983364fd94c113b39c1baf9266a81b143203f8de584b4e0a3ce2770c1a7a7e7aef6f3ab29008c511deb17659812421056f88c5b2af4f77f5879d2903486cbd2111a4175156a0a9012799d848c08567263bd578577c803e0c499d1ef0dfcdb957807a58690a5f8c645dc78a69af23d6d9a859795ecee97516bd30321fd691c651e43448b788d7fd9ae695d468cda1da3929ee86c7c244d6eba4e93a5d4dd2a500212dd9f9b36edee8d20f62585c17cc88ef2e2d6f417430ed89f095b1bba88f6647581207c8c4c1bb200ad6833f2dee5789ceda62c6e5868a5df42045067fdf33d546e3c139843839e002cedbd47da525ba9e510a4e21446255c4bccac92549f9e63a54c1309ed5dcfc7985fabd53acb8a6c60b06a5b2784576d6bb4b7e18d7dee07f4d7fcee481dc989328f9b5802030af219831312bacd702d4fe750faff510284b772c273211ade0c19ce34f06bef8695b4fcc4c644ea5ef2c0b34b02237b37dc3ac1b4bc23f4f9f5ea42160d2bf2665536b0704ac1636088c6ac4d79e4d7d2af9d34e15087ade39b78f57920055f74782a9213ec804fe79d71e50577bd2001f91850a3624470ac1c8c0e7f1f6caa0bc51efb724ba7ceb592a19fd263816479d224eadfc1f027f993bb6ffbcff194bf7d5d64a474ded6d973f63852f36c025d6fe2456d63ae7d6328955eb0744709887a69f07a8666d85109534da6e1814c730b3c835d9379096e87a802865f5bfec645f27467b9c6be76c72e77950edb6b48a0449d6a37f31cb2387f5926d6fe05932cf611f91030d477352eff7574a1a736aae98afe0c92f53d7fa7833d8d5623df88f913b52f8ddae4a0f29b5ab587c4d1f3125e4aec92cb3a805e1197dceb2d192eca34c444c293dd1b3d2344dd51230abfc368659f5b50c6c9b4aa9311f89b1f574e031b1f01dc0daa64610c9a8bc3b67aa15ded02699552d00dff9195d459825a698550e393f6d38fa71b341c105d4b73e8ac03088046209ffcc5941e6b45b0c29fefaf445fcf7ee0bd8b21e218e13c693f9b57c829e5f0b342f1de40c30d76cb8e5d23ff85940aff3342ecb4c6558ec37aaf67d0f1c5052a590ee24cc56234713da495c758d1ed0880da247e2732694a7565328239055709943212973debb945e23725591a36c823c575fcd14dfcdf9328d07b87cc27faf485c3dae2be930e1f09b6b939661714cb4f53c153e2163385ab90558fcef41baff3948bca3b6d463a6f93f66b44d3e67cfcb6c6dd8174db9490f0bab4bf9fe7bd63b86cdd9cbcfd90290d713885f44b8edfc51489a982657ff0052f2c90c6ced6783ee77b082eeee296f8b7cbf453ba8bea97ac0a89d4a26fb700f46127423973a4d43da4cb18943493d8c5e1ff4c28b72d1407c55b745e3833d25cef913a1ad8f11133d20ad20a2da279177df7414481787ab058fa5bde63f73cec6b574e0a00833c18a427b86d3cbd709c4757fccdd1f811f88cdb3653203e7faa275979de79ada0e08dd946c8952041ea8b57b485cbbb4954d905c374f5cad06ba6129a9fd02d18099b6555fd5761ad3e8f5517a821d9a4173ad6426563545f1f7075565765f7efe640cb2b9a7d78778e7a60ed7a51ffcddeffca2431a8d247755ec598d3715145ab13b1ed5da9ca28736ba39c6223bf7fac132158377f27f30bf133485700748065ca3e89bc8e8ffa8ffedb40ca79e03b7e460e69e238c499fd40800abc369ff1701abd19389fba8116df82ac9222cd89e2712157e73030aa37015be7c0a35a5516e967f2c3c8ef8163828efbd4e5563c0a415fafe4fe73290a77140b2c69aacee542e1fb3b21b5d84635c908fb59526c83c814895d6679402ff60b74b5eacae57ae0672b6d52185c2e8364500059d5f558bcccb8cffacfc8fd6d323751797e671185dd79fefeb950198a9a0f54a128be62bab1466944ce3f218f1cf8bcf3dd0858dde271fadaef2e5bd13d4d5c404c1ed59e6e43b14e964c264ed8ac0ad2910b74d3c05d0b2ff5bd2aab82d27d8d4d40d248461f57227941c7abb11fd76bbdeb536b403447da4b8f09a4ea978b2fb8d6501c39ccd3ab18e647090826ff8b2a49c30c3c16edd5af398efa285ddc86158f8a7342feedce4d9ca70dfb44d601d781bf8399dc802bd1356e4baa5dddc4e9ee981603b8f3a85440ed8ea2c652602060f0f06e3b401785228adc961bc845b5da1fe77d4640f69f4cb01a475a9fcff602425b2cb6aaa7698c73e8c664899769252c4c1805f0b16e32a292991af3781511a330785623766af3518fbaad29dcbe6c36e65dd93ea333bdc10f0d0f659b1c4e46a93ddc3db3a61e8403afc6a2b9d160b99d7179a9f19cd400e6ef9fe20996d90a81fc409678b8ed88a5f91d85512c4055b3403134fbc698ffac30bf693fb9b285a3e7c5fb66ce1c78a30fdcdf725493d3130e8dc5025a4a773ea2ece15aeafe8a2b54f767d9b20c259eac8097243a0288e15cb174c47b7194397b51800f3ffecddf7f179ea8fd25274cd0bdfae8749d15117b206388f04231be0645a6060d9065f2630bfef0129c33925754ea3d32ff20508fb0c8d3a5e66d7504c043ca874ae710f2a7b65e3e19c2d2819465e3129912b0f646c02147fed5aebdffef42dabf3977eff8645292827f938236628f35174df8e1e6dcbe3809ce44d3972a7584fc803aa14e60aa25c4a5141738cf3355b5d0b2fdbe5f7a4cfdbd370ab3571bef8c7828de690284587f2be8a743066bf03b13f697aa630f93f589d58a69df8b70b2ee4c147db0fd6f7bcf7fbc55b6dfd166f8e40e6c7fcf83dd4c57e1c49e866ffbff90d7a46fa17edbba41516101a10b5872c9abb3e73326d3d53eff3a4b364539c8ea414a9233eb54f434edb4e3a95cea659a5ac9ceb3b5555badc1c1137966c9558ed4ce3915545690481be6989ff6ac035a80a9ec49728d03659da4f6b84219c173460ce69350c92dac34188c65726fa8f22329c8034f0b2eba61cbd8164b6f46208ccb837bc71b69dafb5065bf7d97c75a5f0aca85bf1b0989a8088466e2ca0c4a38eb4558871e584fa324b364e613ba94fdfd0f6b4649122b4203885d200b7980fe87420bc097d45e87a9b360acc55674819acc01f720c49b6451b833a01574b3d116bc20e4fc47cb515eabc3143f8def66e3e29d163eb0e87d8ecd3081908a5463da711c8d524d21cd0d8c137165c49f2540c55ef3b9b577e4fa5237aebecee51a941e6c076d8393798225ad0f9405aa8eb5725059552a4436cf0878aef953307066b6f83459e35e9b7da6bbb53f7e71292914d75681dfcc18560d9ed9e0ba6d510090b4d545ae8f853507d47361b4cef7f7f4e5c8bfcf05fe7318bc7ae20e80099f078773b303d807a6c4891a32d2b656e58f6923b7ca15820b828867e654b6de6cfa786151945b37171f0bd30178d444a0f94b9b0a11b57fa7b845add85146455d1892e7c34478d054b04d34168e48945a2b290fc6d3c22a09f991579ef1befe857fdc4978412757e08d98318997faf2da31034c63f157f7356562bf5b0c1661bbfe860b5f080ca72c97544cb85ecc773b83930db3e72094144bdb62a69e11e08d3966153542392fab62e35d51b01d204bcbb2f76d828e47bc499f45e58ba368563a08468f4027030fd009d240d19a10552de48d32ebb8b71502a540f4b73b7a8e56feb7a9f27af5304602e5dc30bddadf53742f8adcb537a232f086242bf85b3ae30c5187992225566d02be5bea46d4a8b0115a4a86b0b3799b805373dad66272d509ab3517dc83c9f40ecf15125afdf6c8f2a4d3b061c337fe245befa85f2e6d7536d2509f67d15d3e241268c833b0cccd2fc9fb6212db0e4d69881b4575a7b118de0b9c82ff3418aa472358562b87d3ec68f59e056d98c4a9930ec7a8fa0bbb24a074c2f9a299d6f5452c91895d3b9c6d9646c460d74bc6760bc23ffaf386092f72fd8c2e33dca234e4466246eddf020a5414c3ed17a0c27624f10023394f7710229d0e3ea97bb3dc45d525df9eb41c8c3f448764d9e2c4573b8f493eda0ead75b2704a0dbf18eab3f6ab4fa8a58369ff010f7fdf17892539bfa169a9d32180a383dad768f8934a33b6be7ccbf689477d24c6a11856a76a3cf07e8acf36fcb53ad2ed1ab4e5eae53c0929b35f8ec3474780c9afd7fea9ef409e38a867e35e5bbb41b53152b1c00665bfa952b68d9f27e6d828683372466055fd58602e852e98f935b3552f8d58cada780f6dfa6052adcc04d5bfbcf56889e9cdbced10c0c1d82d0a6cda0d87478c40fbe3985e46ca9fc50921048631a734f73b2177635c787df12efdbc01f6c75480939b6e27bbd6ffdd43843bce63ab9792106891e1d38cbe54f80f880707ff3968be9533e9a4df8de9212ff38fee338603c4533d284b324aece08e42cd1199f0ac10333c8a035c9cfbe6a5f9522a6d80a54e3aff5b8259985914bde83ba7807c2a89b222f1f49a727aac60782de16f884e24af12b8c95c6418bcfc969b6ef3b5fd18f2dce34d98e4a4f9f667eeb8e68d815f4e928073071e07f73497f81f4a42a2a4551e455eaf598c910a34502e4683235a380e0c29dc7c9dc0c021921ab28bfd651159aae280662ba1ff6dd2ec055422e07a0567df0c33cb671ac26d81eecb0b3812a47e527769d2ccb355b060ffce4959c7067e117af892eb7495009447a08c5568130ccdee22dc6e8b647c54be92ea780ea039691bba44a9db5d91dba65f5a14c3c80d1e67644ca24280952738a7d80b9a7e41388793b4c799a88108e01b52a552c37864e2e3a85b62867745cd4121fa3513232c2b83efc0d6d566817aa657c9773d0f80414f227ab9b40018e6a1823c2bea458b2e8205a96a55ea79b23932da673863d771f522c87e989945b0838c4b3d49c506f70da37b9e051cf245581f40f9acda40055b5705abfceb9fa673a2d5deb4ff06785e9102040cde28dba83df71f77e5c763f19b554a764f241f95334873fc884577625b3fa1700bf32983d54a5be81b1bfff6f4046b6792fe3fc5d68eb5d22b7756f6d12f08bd57234496d83ac6c0e1043b801edaf31ea00e7cb40cd4f4675993bab9f70d23a22e89b1bdeb017be78a445f197816fa4c03a70bfd6258fcf4cd4b8a2a9ae07e208cb58725e257a7ae73085542b57e892cafda25c2edb92e20c7a9d6e063b4fcebd94f270905a98a554a2f7ff03cd8e9f17269b35ac36710caa328028b555325cd3b51529efb4c1b9d48f37c244a0fa9ff803323c5fe5b9fc6fbf7e0a396fc3feb51a227d0d85c42e1fcdefa2b489d923d866d8196283cf992d26c7c3aeec3448ab41d24dd83d58dfe514dc0105dfdc94dd13267a110300473ba6d83d60bd7069fc728b00523664bcbccda04b6b6a79570e7d61f9d09730730bcdf119a18fec56bdf15b4ae3866f302823bcaa0b74c48a3f5666dc1d99a2ccdf3ff207044f46c1b82ebe1fc039a880dd358a01d2ee58c45cc5917ee6eaf74be6c7194716500ef55854b2a0b2651b8aad4d16e40f0858db9f94696a01f00ffcc019505411232f12e1dc25c501b974ca079fd121d9b0c3c7bee886e0b47291c89ff237a4359e0d25ce85e4fac0d449900d1b1cd985fa16d51a2c4231b7b8fbb1d8d86c95a39ebcb1b597885aa6543d46add1a0cf53235ca428bbb0b8440700a038ced456c64e6f540a0eab12446151836d63ef7fdc75ad1d24e16a710ef792b4638b05194df736d1e43c8354c9590e6b8f11b8673df041b678d073604d0c3890825161ffbf463baa0377f509fba6be0dfdffab05e623f288979b7b3d2347abdb61ec190551be54ead39c5264fdd4699347e5355f668a7e4d556823c59127d9bc29e6716846273016deec22e38d4b00f7429e26855d29c6c87241342fdbfc49a9063cc840fca6b0eabd805318c519b8b5a02cd20e688781dac2c4b8c62edd78a17f4ab814b86434facd14b32619a7c9c84c429e16b55754ed6db5e3af61b45875388e072646c03ee5ceb497afb02ef348c8ee82ab364b15abbd5c99290d6df53570c23c08a6da8329d3fe468ebd96944bea6cead723f52fde4e5cecf3182027126486bdef93ed58482862e36e0ad8f4f8fc27807c7761fc8415bb10603fe0748d6c57f2262a5c0d68a041ddd4f7d538edbb241bdc1ba5f7bbd36227b42bcc915644b13af640503554452379759bd278a4b981c30507b0fb2d416eafb15b941e45ef45d2269d4d95db95dc141a496496a44b033f755b6c8e67a8422056d01c3f774acbf8f82c53c5494e83d62f084a358807f40a7580111207947e6118a9381b77347eb2fd47ea191fe7942253e8a44ca204756771f9436f665e61d281053b955de507770abedfe595fc99d02437b1477d7a2bd7de73cb2a4b915dd4fdb4254d899f71099e772cc1282b50706e955696d36b1a02356aab5b834b704acb33557ee9ce9b7ac95efb1b86e78d9be952779af3763544d14262aa3469fcc56da9a883384b2f6b13c6eb6cdcbd82c145e57d15503ebf6ef5b92a1234c4c78d9c688b26e39d9b9fdefe12718bf788d80319761c4f9bf7534823b917d1b5973fe2d6c9b8d37c93b86135b582ea5ea1a32a34d96dd67ce7e4a3fa04dfd8336740de69e2a03873782325e64a45728697ab5ab38f673c493a778207fcb1767588f933823b2dec1a1decbe360d5cb5abb70084c6ece9ad964c456d719cb8344dc73f59ca3cb9e3f50f8f3d249a218e541cd0a9614c351f428d70ce3bbb07ef0822508fa520a8f045662e043bb1baa9ee5d5ee893b900dcc3ddf51ce755f9efb3c2da3f8879e8321171f79848992b4802569c554ce95d57177fffe1610a37cb84f6cb6d23a403d51c914c166b1732a2e1da324415e32e65c5f918644d1fd69bda73302e9543a9532580cac37eb1bb03d36aac3749c3ecfdd17da527d90bc34ce7ab4c3a862931da5117301dfd8742937be0a4f8af76a70c7688a8ee93c230933c1467b219e467774f274a0e92e50a83308bf4ae8b6205c7b5a523373706d1d107263587888c212d99cf3f42a1540cfbb0046a329ac38f82784c889c33b11eab987660a69d1475d000ceecbff007b131302c90f31ef822065c482ec0c4a67b1f3977cca21147d0839aa6cee212442358674db08dcadc3e99680aff631d55c874dc5c12d6f51e6e169aa73a0a69a1a50b22d1067e6a78c467987124648eb1deeed428f1d1383b891dbc09777e322d8cfd728e6837a2f3077b40e60f99a39f9075f12123fb7317d4c68277a077ad6800b358410cbaa1fe6cb977a9f8c478733b368fc630f84b2c755ba2c883fe312c35cb69b4d20f9eab22f05b6c88caca28475163fd8864106a07e9f8916d4c089832bdf6fbdf9b8a017f0cf26080d26fb8492c02ef02f4fc0198630dad63b02190b14baad29a5d31207e987add18134db13ad17f1cf0e59f2418a97aa3796f2c230716da2baffef997932e3f8ad8493062e5515a095ff49b94c7a97c52552aa526fc3aa32c944358a97846d36a7eb96b5773624501801aa3f3ad5fb961f912cb11bbeee92bb3c998854189c747bd25a9aea6e7cf7cf4d690f532c43923df3f9f0557c0bfd52d275bf8eeece5c8cefe84fe2afc90e1bd92fcf8cf63dea8a42953389f10148dd60a9fa90cdbed03a2c5b83862585cd848ffc169bfeb0648354b63b4f3499da5e3cee6f66156dbaaab0ee2eb1a2151db8ca4b77adbcb4de4ed1d0b45f7761e5eff8529d8e63982d0c6684d11734106a3dd149988341c8e6a49d699fce440986c6ad106b2f81437219f97c5f34f200e4380ca5408f009f74643200021606868f7bfb9580164fb8769c9bba296b6fccd20e5544f3befc547f42b356e6f25cc4f5976e92e68563e6acf6b98b806d475df65a3e532ad13e92a8fd918955450c1a29a497fbef04ead2a718b2eb53fd94482cc58d06ea33a218188e2de21793c867b8153861d7e378c66bf83689442dab03340a704f5908e405e7d6fa632723d5ef71b9851f69c0990a415a9c4055003fab6e17b3eb083e34c97a2e38952ed6c9b241aac1696eeb8b56040f750f81637202f7eb806f088133c8e6aa22e0a2ad7fa07e868861fec9707b940198072db18c5178c3ac258024a3b126112cfc6d86e7332751d378a0724d0919c571960a424bd45a29c1b0c166f3867f91b37ed3f28766230686759d535ce1e25f5a8aac6b4d0ed4242f8475428c4e908278049deba7f88e527163471fdababa5ee58f2c643b9b32644cf3dee17c75f1d523610f9f641fdcdb1dcef4124755c5b68e9384f96167c9db67f5b0166026bcbb6667c0456b6eeef6109619553cf3376e1c181b5e841ba4877ed0ea744701935cbccc48a8713f40e562fea1fb3a10fe856d527394031d34d2513a436e06180f8119e820ab6dbb82e88b5d95e28017e988e8df282813f7837ac423404bebc429b77683cb06dd10f4788d129b0e4baf3f8bb7223fbbfd4b80f1664c4e4f8344f51b71393f6e4c4a20c02eeb098b244c1fd2a394375957e9e6f3ad3cbbd02f83328fd45a7e63d2c4a71748c2218233b61b7f22434de9de148fea9ec31d9bfb7ae33660afdcec34b51e343ce089dac4ae79408e3ebc2f20d21f50333c1ede1fd5d2c3f7789f15478f5f32004ee6c699daa0c60161a2dd61ab9186f0e935d6aa24ba37b7e14493c0bfa389515d959251ce522d8f53becb5416572b57c035fbcb7ae2653d3c1188200f9227b6ce08958bb6d1deab1d4f2b5008916984c2c109394973a50f45a372eb9ca7aae0ad0d7241799d4c043dbabc4a59b0d49eb320745d1f569cfeedb3946fb544bed3f84c9991990a0e8dbd2171b4de96c86fa78ad7952a1de6c9003d816aa0214a8d808f8f248a481101804f3b60ceb8068fbfecbb3b75e6971f1d13eabdbd7175951d708c277cc08e1bc3f4d3b5ab85540e8d8dd4c20c2f7ef5ff4122c6e52657799c755f85618b82778c8511fe9794ce9ea05be11ff9f16c1c1f6d443660c5629e56e3b73e7146ab3d49629eac5280a3fe7e0a4ab54d1ff70dc690d3e3c3e7a38403db7faeb3f1709d6abac19543ea09507e986e27da34da1dfdfad19c975243379a4fc7fc37db947eb766a2899a5b4a4fea2f569616bcab8c558d9927ead9d0cd786878dc1caa066785e71e239dc83dab7595bd68ff5969f9f6e7e15df629a740e6f2d71e2af4721897e8a14ad068cf71ae5c2cfa6a078caef794b9a785dc691387a0d90d92763ed6ce4aabd496373f8c1d581b54f1688f3436d91824219a3f0dddcb2609f686cf2ead3ad213b8a2a9c97ba19f939e8723978f121fa6dd8e9d0a29c76d6ad6c529a24b8a81471540418674730d0368545ae34e57a5c4cd2f0544fb00525aada8a5f44ceec7e5250ff228ab866548a99198c7e0278a708add4dc467fb4ec0df77be9a89ee76682f57192c26d3f4005958a17bd934c55bf033903bd315e751cdda1949605232b54f6ca4148bb6aa86acd6546f6401c67fddda3df54e6c78c63a271f1ecc3310adaf0995f5323bfdfae4eda3324edc659f3b859569f5532712f91fbedf5d0157349ee44d3094501170abf0839cd9d49cdd1c111fd7f688ceb0f5f16152c1b73548b9ea5e6ee3659b47e443351c660d82271229981e8709d4d006428da86ed3948e0f7619b9b696a5073f51b227448f0d7f5f7f84edf1ae3f97e5e9aa9083afd6e3add885d044138355ec2dfedb6bd05cb6b4e43e1284493e4c26ecd1da670d724df182ffa4b2ba0e5e9277e00d4b2d583dda1e7b15804062627adff5471cbce28cb008cbdffd9bc1f1c50805687093455b42ef9809dc5eca6232369a34562dc74556b4d207583aed88fbbf57b387d33738705f562a5cbc0eda1454cccf3a85d7224399616db8a90f6005fe2758198566858fd8a81d22e0345ae1f90512b7e53db53b41d6aa5d1820ebbd2c49a39366f417b39cfcecaca294bd4c8ef91e70f4492c21502b4ef53d702b68dd23a4ccf14c4c486e74a83e0fbe0248705fff6b519689b3a351809d2651e2ef0cefef30d20ae7f6e9450b6da4ec7d641cdcecc14613a5ab26ec7</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h2 id=\"版本与升级记录\"><a href=\"#版本与升级记录\" class=\"headerlink\" title=\"版本与升级记录\"></a>版本与升级记录</h2><p> <img src=\"https://img.wqkenqing.ren//2021-12-20-15-53-25.png\" alt=\"2021-12-20-15-53-25\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-15-54-03.png\" alt=\"2021-12-20-15-54-03\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-15-54-27.png\" alt=\"2021-12-20-15-54-27\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-15-55-43.png\" alt=\"2021-12-20-15-55-43\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-15-56-45.png\" alt=\"2021-12-20-15-56-45\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-16-09-23.png\" alt=\"2021-12-20-16-09-23\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-16-10-15.png\" alt=\"2021-12-20-16-10-15\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-16-10-58.png\" alt=\"2021-12-20-16-10-58\"> </p>\n<h2 id=\"内容记录\"><a href=\"#内容记录\" class=\"headerlink\" title=\"内容记录\"></a>内容记录</h2><p> ** 监控工具 ** </p>\n<p> cerebro</p>\n<p> <img src=\"https://img.wqkenqing.ren//2021-12-20-16-37-22.png\" alt=\"2021-12-20-16-37-22\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-16-38-40.png\" alt=\"2021-12-20-16-38-40\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-16-39-57.png\" alt=\"2021-12-20-16-39-57\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-07-58.png\" alt=\"2021-12-20-17-07-58\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-13-34.png\" alt=\"2021-12-20-17-13-34\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-14-59.png\" alt=\"2021-12-20-17-14-59\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-15-44.png\" alt=\"2021-12-20-17-15-44\"></p>\n<p> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-17-47.png\" alt=\"2021-12-20-17-17-47\"></p>\n<p> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-18-19.png\" alt=\"2021-12-20-17-18-19\"></p>\n<p> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-21-13.png\" alt=\"2021-12-20-17-21-13\"> </p>\n<p> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-28-35.png\" alt=\"2021-12-20-17-28-35\"></p>\n<p> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-29-31.png\" alt=\"2021-12-20-17-29-31\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-30-24.png\" alt=\"2021-12-20-17-30-24\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-35-40.png\" alt=\"2021-12-20-17-35-40\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-20-17-55-50.png\" alt=\"2021-12-20-17-55-50\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-11-07-56.png\" alt=\"2021-12-21-11-07-56\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-11-08-26.png\" alt=\"2021-12-21-11-08-26\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-11-11-23.png\" alt=\"2021-12-21-11-11-23\"></p>\n<p> <img src=\"https://img.wqkenqing.ren//2021-12-21-11-41-54.png\" alt=\"2021-12-21-11-41-54\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-11-42-11.png\" alt=\"2021-12-21-11-42-11\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-13-55-09.png\" alt=\"2021-12-21-13-55-09\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-13-57-42.png\" alt=\"2021-12-21-13-57-42\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-14-00-23.png\" alt=\"2021-12-21-14-00-23\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-14-06-39.png\" alt=\"2021-12-21-14-06-39\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-14-17-40.png\" alt=\"2021-12-21-14-17-40\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-14-22-26.png\" alt=\"2021-12-21-14-22-26\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-14-23-52.png\" alt=\"2021-12-21-14-23-52\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-14-24-04.png\" alt=\"2021-12-21-14-24-04\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-14-28-21.png\" alt=\"2021-12-21-14-28-21\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-14-31-10.png\" alt=\"2021-12-21-14-31-10\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-14-35-49.png\" alt=\"2021-12-21-14-35-49\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-14-36-30.png\" alt=\"2021-12-21-14-36-30\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-14-37-05.png\" alt=\"2021-12-21-14-37-05\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-14-37-18.png\" alt=\"2021-12-21-14-37-18\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-20-20.png\" alt=\"2021-12-21-15-20-20\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-21-03.png\" alt=\"2021-12-21-15-21-03\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-22-14.png\" alt=\"2021-12-21-15-22-14\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-22-46.png\" alt=\"2021-12-21-15-22-46\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-23-12.png\" alt=\"2021-12-21-15-23-12\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-24-11.png\" alt=\"2021-12-21-15-24-11\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-24-52.png\" alt=\"2021-12-21-15-24-52\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-41-49.png\" alt=\"2021-12-21-15-41-49\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-44-07.png\" alt=\"2021-12-21-15-44-07\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-47-48.png\" alt=\"2021-12-21-15-47-48\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-49-16.png\" alt=\"2021-12-21-15-49-16\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-21-15-53-01.png\" alt=\"2021-12-21-15-53-01\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-53-12.png\" alt=\"2021-12-21-15-53-12\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-53-47.png\" alt=\"2021-12-21-15-53-47\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-15-58-03.png\" alt=\"2021-12-21-15-58-03\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-16-32-42.png\" alt=\"2021-12-21-16-32-42\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-16-36-29.png\" alt=\"2021-12-21-16-36-29\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-16-39-24.png\" alt=\"2021-12-21-16-39-24\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-16-41-30.png\" alt=\"2021-12-21-16-41-30\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-16-41-50.png\" alt=\"2021-12-21-16-41-50\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-16-42-00.png\" alt=\"2021-12-21-16-42-00\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-16-53-27.png\" alt=\"2021-12-21-16-53-27\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-16-58-11.png\" alt=\"2021-12-21-16-58-11\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-16-58-58.png\" alt=\"2021-12-21-16-58-58\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-16-59-49.png\" alt=\"2021-12-21-16-59-49\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-17-00-54.png\" alt=\"2021-12-21-17-00-54\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-17-02-18.png\" alt=\"2021-12-21-17-02-18\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-17-03-04.png\" alt=\"2021-12-21-17-03-04\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-17-28-38.png\" alt=\"2021-12-21-17-28-38\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-17-29-20.png\" alt=\"2021-12-21-17-29-20\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-17-30-20.png\" alt=\"2021-12-21-17-30-20\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-17-30-41.png\" alt=\"2021-12-21-17-30-41\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-17-30-49.png\" alt=\"2021-12-21-17-30-49\">))</p>\n<p> <img src=\"https://img.wqkenqing.ren//2021-12-21-17-31-43.png\" alt=\"2021-12-21-17-31-43\"></p>\n<p> <img src=\"https://img.wqkenqing.ren//2021-12-21-17-34-46.png\" alt=\"2021-12-21-17-34-46\"><br> <img src=\"https://img.wqkenqing.ren//2021-12-21-17-34-39.png\" alt=\"2021-12-21-17-34-39\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-17-36-53.png\" alt=\"2021-12-21-17-36-53\"><br><img src=\"https://img.wqkenqing.ren//2021-12-21-17-40-53.png\" alt=\"2021-12-21-17-40-53\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-21-17-43-09.png\" alt=\"2021-12-21-17-43-09\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-21-17-44-04.png\" alt=\"2021-12-21-17-44-04\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-21-17-53-08.png\" alt=\"2021-12-21-17-53-08\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-21-17-58-39.png\" alt=\"2021-12-21-17-58-39\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-22-13-52-56.png\" alt=\"2021-12-22-13-52-56\"><br><img src=\"https://img.wqkenqing.ren//2021-12-27-17-06-11.png\" alt=\"2021-12-27-17-06-11\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-27-17-28-06.png\" alt=\"2021-12-27-17-28-06\"><br><img src=\"https://img.wqkenqing.ren//2021-12-27-17-28-40.png\" alt=\"2021-12-27-17-28-40\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-28-14-34-13.png\" alt=\"2021-12-28-14-34-13\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-14-35-11.png\" alt=\"2021-12-28-14-35-11\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-14-35-58.png\" alt=\"2021-12-28-14-35-58\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-02-36.png\" alt=\"2021-12-28-15-02-36\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-04-42.png\" alt=\"2021-12-28-15-04-42\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-05-21.png\" alt=\"2021-12-28-15-05-21\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-06-08.png\" alt=\"2021-12-28-15-06-08\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-06-26.png\" alt=\"2021-12-28-15-06-26\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-13-56.png\" alt=\"2021-12-28-15-13-56\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-28-15-14-50.png\" alt=\"2021-12-28-15-14-50\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-16-03.png\" alt=\"2021-12-28-15-16-03\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-17-09.png\" alt=\"2021-12-28-15-17-09\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-17-33.png\" alt=\"2021-12-28-15-17-33\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-19-06.png\" alt=\"2021-12-28-15-19-06\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-22-23.png\" alt=\"2021-12-28-15-22-23\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-24-49.png\" alt=\"2021-12-28-15-24-49\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-26-17.png\" alt=\"2021-12-28-15-26-17\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-27-40.png\" alt=\"2021-12-28-15-27-40\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-49-36.png\" alt=\"2021-12-28-15-49-36\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-28-15-51-23.png\" alt=\"2021-12-28-15-51-23\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-15-55-06.png\" alt=\"2021-12-28-15-55-06\"> </p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-28-15-56-51.png\" alt=\"2021-12-28-15-56-51\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-28-16-26-47.png\" alt=\"2021-12-28-16-26-47\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-16-27-18.png\" alt=\"2021-12-28-16-27-18\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-16-29-51.png\" alt=\"2021-12-28-16-29-51\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-16-34-18.png\" alt=\"2021-12-28-16-34-18\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-16-35-24.png\" alt=\"2021-12-28-16-35-24\"></p>\n<p><img src=\"https://img.wqkenqing.ren//2021-12-28-16-38-14.png\" alt=\"2021-12-28-16-38-14\"><br><img src=\"https://img.wqkenqing.ren//2021-12-28-16-55-27.png\" alt=\"2021-12-28-16-55-27\"></p>\n","encrypt":true},{"_content":"# docker 镜像\n\nhttp://hub-mirror.c.163.com\n\nhttps://reg-mirror.qiniu.com\n\nhttps://dockerhub.azk8s.cn\n\n\n## my mirror on aliyun\nregistry.cn-chengdu.aliyuncs.com/kuiq_wang/daily\n\n## company\n\nregistry.lisong.pub:5000\nregistry.lisong.pub:28500\n\n\n{\n  \"registry-mirrors\": [\"http://hub-mirror.c.163.com\"]\n}\n","source":"_posts/王阁/技术/运维/docker/docker镜像.md","raw":"# docker 镜像\n\nhttp://hub-mirror.c.163.com\n\nhttps://reg-mirror.qiniu.com\n\nhttps://dockerhub.azk8s.cn\n\n\n## my mirror on aliyun\nregistry.cn-chengdu.aliyuncs.com/kuiq_wang/daily\n\n## company\n\nregistry.lisong.pub:5000\nregistry.lisong.pub:28500\n\n\n{\n  \"registry-mirrors\": [\"http://hub-mirror.c.163.com\"]\n}\n","slug":"王阁/技术/运维/docker/docker镜像","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/docker/docker镜像","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqshh007vu6pwg2y1gn64","content":"<h1 id=\"docker-镜像\"><a href=\"#docker-镜像\" class=\"headerlink\" title=\"docker 镜像\"></a>docker 镜像</h1><p><a href=\"http://hub-mirror.c.163.com\" target=\"_blank\" rel=\"noopener\">http://hub-mirror.c.163.com</a></p>\n<p><a href=\"https://reg-mirror.qiniu.com\" target=\"_blank\" rel=\"noopener\">https://reg-mirror.qiniu.com</a></p>\n<p><a href=\"https://dockerhub.azk8s.cn\" target=\"_blank\" rel=\"noopener\">https://dockerhub.azk8s.cn</a></p>\n<h2 id=\"my-mirror-on-aliyun\"><a href=\"#my-mirror-on-aliyun\" class=\"headerlink\" title=\"my mirror on aliyun\"></a>my mirror on aliyun</h2><p>registry.cn-chengdu.aliyuncs.com/kuiq_wang/daily</p>\n<h2 id=\"company\"><a href=\"#company\" class=\"headerlink\" title=\"company\"></a>company</h2><p>registry.lisong.pub:5000<br>registry.lisong.pub:28500</p>\n<p>{<br>  “registry-mirrors”: [“<a href=\"http://hub-mirror.c.163.com&quot;]\">http://hub-mirror.c.163.com&quot;]</a><br>}</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"docker-镜像\"><a href=\"#docker-镜像\" class=\"headerlink\" title=\"docker 镜像\"></a>docker 镜像</h1><p><a href=\"http://hub-mirror.c.163.com\" target=\"_blank\" rel=\"noopener\">http://hub-mirror.c.163.com</a></p>\n<p><a href=\"https://reg-mirror.qiniu.com\" target=\"_blank\" rel=\"noopener\">https://reg-mirror.qiniu.com</a></p>\n<p><a href=\"https://dockerhub.azk8s.cn\" target=\"_blank\" rel=\"noopener\">https://dockerhub.azk8s.cn</a></p>\n<h2 id=\"my-mirror-on-aliyun\"><a href=\"#my-mirror-on-aliyun\" class=\"headerlink\" title=\"my mirror on aliyun\"></a>my mirror on aliyun</h2><p>registry.cn-chengdu.aliyuncs.com/kuiq_wang/daily</p>\n<h2 id=\"company\"><a href=\"#company\" class=\"headerlink\" title=\"company\"></a>company</h2><p>registry.lisong.pub:5000<br>registry.lisong.pub:28500</p>\n<p>{<br>  “registry-mirrors”: [“<a href=\"http://hub-mirror.c.163.com&quot;]\">http://hub-mirror.c.163.com&quot;]</a><br>}</p>\n"},{"_content":"{\n\t\"job\": {\n\t    \"setting\": {\n\t\t\"speed\": {\n\t\t     \"channel\": 3\n\t\t},\n\t\t\"errorLimit\": {\n\t\t    \"record\": 0,\n\t\t    \"percentage\": 0.02\n\t\t}\n\t    },\n\t    \"content\": [\n\t\t{\n\t\t    \"reader\": {\n\t\t\t\"name\": \"mysqlreader\",\n\t\t\t\"parameter\": {\n\t\t\t    \"writeMode\": \"insert\",\n\t\t\t    \"username\": \"root\",\n\t\t\t    \"password\": \"********\",\n\t\t\t    \"column\": [\n\t\t\t\t\"id\",\n\t\t\t\t\"name\"\n\t\t\t    ],\n\t\t\t    \"splitPk\": \"id\",\n\t\t\t    \"connection\": [\n\t\t\t\t{\n\t\t\t\t    \"table\": [\n\t\t\t\t\t\"mysql_datax\"\n\t\t\t\t    ],\n\t\t\t\t    \"jdbcUrl\": [\n\t \"jdbc:mysql://10.254.116.249:3306/mysql_datax\"\n\t\t\t\t    ]\n\t\t\t\t}\n\t\t\t    ]\n\t\t\t}\n\t\t    },\n\t\t   \"writer\": {\n\t\t\t\"name\": \"hdfswriter\",\n\t\t\t\"parameter\": {\n\t\t\t    \"defaultFS\": \"hdfs://10.254.237.61:9000\",\n\t\t\t    \"fileType\": \"text\",\n\t\t\t    \"path\": \"/user/hive/warehouse/hive_datax.db/hive_datax/\",\n\t\t\t    \"fileName\": \"test\",\n\t\t\t    \"column\": [\n\t\t\t\t{\n\t\t\t\t    \"name\": \"id\",\n\t\t\t\t    \"type\": \"int\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t    \"name\": \"name\",\n\t\t\t\t    \"type\": \"string\"\n\t\t\t\t}\n\t\t\t    ],\n\t\t\t    \"writeMode\": \"append\",\n\t\t\t    \"fieldDelimiter\": \"\\u0001\",\n\t\t\t    \"compress\":\"gzip\"\n\t\t\t}\n\t\t    }\n\t\t}\n\t    ]\n\t}\n    }\n     ","source":"_posts/王阁/工作/旸谷数据中心/config/datax/hive2myql.json","raw":"{\n\t\"job\": {\n\t    \"setting\": {\n\t\t\"speed\": {\n\t\t     \"channel\": 3\n\t\t},\n\t\t\"errorLimit\": {\n\t\t    \"record\": 0,\n\t\t    \"percentage\": 0.02\n\t\t}\n\t    },\n\t    \"content\": [\n\t\t{\n\t\t    \"reader\": {\n\t\t\t\"name\": \"mysqlreader\",\n\t\t\t\"parameter\": {\n\t\t\t    \"writeMode\": \"insert\",\n\t\t\t    \"username\": \"root\",\n\t\t\t    \"password\": \"********\",\n\t\t\t    \"column\": [\n\t\t\t\t\"id\",\n\t\t\t\t\"name\"\n\t\t\t    ],\n\t\t\t    \"splitPk\": \"id\",\n\t\t\t    \"connection\": [\n\t\t\t\t{\n\t\t\t\t    \"table\": [\n\t\t\t\t\t\"mysql_datax\"\n\t\t\t\t    ],\n\t\t\t\t    \"jdbcUrl\": [\n\t \"jdbc:mysql://10.254.116.249:3306/mysql_datax\"\n\t\t\t\t    ]\n\t\t\t\t}\n\t\t\t    ]\n\t\t\t}\n\t\t    },\n\t\t   \"writer\": {\n\t\t\t\"name\": \"hdfswriter\",\n\t\t\t\"parameter\": {\n\t\t\t    \"defaultFS\": \"hdfs://10.254.237.61:9000\",\n\t\t\t    \"fileType\": \"text\",\n\t\t\t    \"path\": \"/user/hive/warehouse/hive_datax.db/hive_datax/\",\n\t\t\t    \"fileName\": \"test\",\n\t\t\t    \"column\": [\n\t\t\t\t{\n\t\t\t\t    \"name\": \"id\",\n\t\t\t\t    \"type\": \"int\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t    \"name\": \"name\",\n\t\t\t\t    \"type\": \"string\"\n\t\t\t\t}\n\t\t\t    ],\n\t\t\t    \"writeMode\": \"append\",\n\t\t\t    \"fieldDelimiter\": \"\\u0001\",\n\t\t\t    \"compress\":\"gzip\"\n\t\t\t}\n\t\t    }\n\t\t}\n\t    ]\n\t}\n    }\n     ","slug":"王阁/工作/旸谷数据中心/config/datax/hive2myql","published":1,"date":"2021-07-05T09:33:55.138Z","updated":"2021-07-05T09:34:17.965Z","title":"王阁/工作/旸谷数据中心/config/datax/hive2myql","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqshy0087u6pw9m0te17q","content":"{\"job\":{\"setting\":{\"speed\":{\"channel\":3},\"errorLimit\":{\"record\":0,\"percentage\":0.02}},\"content\":[{\"reader\":{\"name\":\"mysqlreader\",\"parameter\":{\"writeMode\":\"insert\",\"username\":\"root\",\"password\":\"********\",\"column\":[\"id\",\"name\"],\"splitPk\":\"id\",\"connection\":[{\"table\":[\"mysql_datax\"],\"jdbcUrl\":[\"jdbc:mysql://10.254.116.249:3306/mysql_datax\"]}]}},\"writer\":{\"name\":\"hdfswriter\",\"parameter\":{\"defaultFS\":\"hdfs://10.254.237.61:9000\",\"fileType\":\"text\",\"path\":\"/user/hive/warehouse/hive_datax.db/hive_datax/\",\"fileName\":\"test\",\"column\":[{\"name\":\"id\",\"type\":\"int\"},{\"name\":\"name\",\"type\":\"string\"}],\"writeMode\":\"append\",\"fieldDelimiter\":\"\\u0001\",\"compress\":\"gzip\"}}}]}}","site":{"data":{}},"excerpt":"","more":"{\"job\":{\"setting\":{\"speed\":{\"channel\":3},\"errorLimit\":{\"record\":0,\"percentage\":0.02}},\"content\":[{\"reader\":{\"name\":\"mysqlreader\",\"parameter\":{\"writeMode\":\"insert\",\"username\":\"root\",\"password\":\"********\",\"column\":[\"id\",\"name\"],\"splitPk\":\"id\",\"connection\":[{\"table\":[\"mysql_datax\"],\"jdbcUrl\":[\"jdbc:mysql://10.254.116.249:3306/mysql_datax\"]}]}},\"writer\":{\"name\":\"hdfswriter\",\"parameter\":{\"defaultFS\":\"hdfs://10.254.237.61:9000\",\"fileType\":\"text\",\"path\":\"/user/hive/warehouse/hive_datax.db/hive_datax/\",\"fileName\":\"test\",\"column\":[{\"name\":\"id\",\"type\":\"int\"},{\"name\":\"name\",\"type\":\"string\"}],\"writeMode\":\"append\",\"fieldDelimiter\":\"\\u0001\",\"compress\":\"gzip\"}}}]}}"},{"title":"数据血缘组件","date":"2021-06-24T07:23:18.748Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n\n # 数据血缘管理&atlas安装与使用\n\n下载atlas源码包并进行打包\n\n```\nwget http://archive.apache.org/dist/atlas/2.1.0/apache-atlas-2.1.0-sources.tar.gz\n\n```\n## 环境准备与配置修改\n\n### maven 安装\n\n```\nyum install -y maven \n```\n\n### git 安装\n```\nyum install -y git \n```\n### 修改maven 配置\n修改maven仓库地址\n\n```\n\n\n```\n\n### 修改atlas参数配置\n\nzookeeper：3.4.5\nhbase：2.1.0\nsolr: 7.4.0\n\n### docker 方式部署\n```\ndocker run -d --name atlas200 -p 21000:21000 altas_test:v1 \n\n```\n\n### 操作记录\n\n出现过maven打包报错，这里要把-Drat.skip=true参数加上\n\n```\nmvn clean install -DskipTests -Drat.skip=true\n\n```\n\n```\n/opt/cloudera/parcels/CDH-6.3.1-1.cdh6.3.1.p0.1470567/lib/solr/bin/solr create -c  vertex_index -d /opt/cloudera/parcels/CDH-6.3.1-1.cdh6.3.1.p0.1470567/lib/solr/atlas-solr -shards 3 -replicationFactor 2\n\n```\n### 修改kafka配置\n注释了下述参数，服务成功启动\n\n```\n#atlas.notification.embedded=true\n```\n\n配置文件在./config/atlas/atlas-application.properties\n\n### 集成hive\n\n","source":"_posts/王阁/工作/旸谷数据中心/基础/元数据/数据血缘组件.md","raw":"title:  数据血缘组件\ndate:  2021年 6月24日\ntags: [数据血缘管理,altas]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n\n # 数据血缘管理&atlas安装与使用\n\n下载atlas源码包并进行打包\n\n```\nwget http://archive.apache.org/dist/atlas/2.1.0/apache-atlas-2.1.0-sources.tar.gz\n\n```\n## 环境准备与配置修改\n\n### maven 安装\n\n```\nyum install -y maven \n```\n\n### git 安装\n```\nyum install -y git \n```\n### 修改maven 配置\n修改maven仓库地址\n\n```\n\n\n```\n\n### 修改atlas参数配置\n\nzookeeper：3.4.5\nhbase：2.1.0\nsolr: 7.4.0\n\n### docker 方式部署\n```\ndocker run -d --name atlas200 -p 21000:21000 altas_test:v1 \n\n```\n\n### 操作记录\n\n出现过maven打包报错，这里要把-Drat.skip=true参数加上\n\n```\nmvn clean install -DskipTests -Drat.skip=true\n\n```\n\n```\n/opt/cloudera/parcels/CDH-6.3.1-1.cdh6.3.1.p0.1470567/lib/solr/bin/solr create -c  vertex_index -d /opt/cloudera/parcels/CDH-6.3.1-1.cdh6.3.1.p0.1470567/lib/solr/atlas-solr -shards 3 -replicationFactor 2\n\n```\n### 修改kafka配置\n注释了下述参数，服务成功启动\n\n```\n#atlas.notification.embedded=true\n```\n\n配置文件在./config/atlas/atlas-application.properties\n\n### 集成hive\n\n","slug":"王阁/工作/旸谷数据中心/基础/元数据/数据血缘组件","published":1,"updated":"2022-03-28T02:57:12.403Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsi10088u6pw6c1pfzrs","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"b73f49be09db68ecb6357f87419004d45ce25e02d9212ceac982baa5f9018c78\">f29c680708acd02cbb1b6cceaba061921c50cd678844d380083157fca95bec923c373cd6681254c00b8bbdf4a9e795a721492f580000e7edc446544099ea6d9dc882065c8cec05e8b3b9379d290f6b51fbea8f088b309e5e8bb67dd80fe0daca294519516d49be85177f57616031cf0e969358a4793cfe2fa16d96b88b1696185c6af13614a25ddb8407a7ef3b2ae3b9f6af2ac72afcf8f64325a0a55d5e13f7610b001c575a748f2bb5dc561aca9e0880b8abfcf024d53620d50ecd3096a6656d483a5d54e26784f8216a04fab9fa8f4fdc6d9a4f1fbfb3cef276d3b8064cf22d07733be2c0a9ca59c5cdc43b740b9dde54ea8049e66af1007122be5b6e9270f97d99f8a7b5ca6bd0680faf7f0a3b628d0327727480d106eb037afd75f6eca269ef9cc372268d894bb4af7b173b0267e9a99ca0d2a84a0c17497de4794b21f2dfe30829d7bd585e089cfe8d64711364a8787fa0b689845c631b53c7ac69e4c388536cc782ad73ad94b0e4e4a0792520b361b1c814391b43cf1433f3a38d9a6b28c21862c1ff9b756d6f99f5d7c8a8b5a0311c1d63f4e6bdbb8d881d0e59127cd9b9c58b28cb2147b93cb7606c9043cb57af61a5b25cbe1e04f2aff2a89449a8822e5ed45c2dfc317eb906d1d3f6e02c1855f5c6adf31f84d75effd44fdca5de9bc5b5b8594eee400c9411d7aca60ee32c70e4b9669b00f05323dc17b7adad564b13486d5bbd4052b76f2afe61051516bd143b50d0f7aaf40fc4f6cb5d1c91b4718f5f73cf9974347b57aa019b3837216a2661ee24bc1203c24334cdc5655360e5ef910756fc0694992a72a0e3de96bf77bae7ed73c5b604a0f162f2002276829d84c6749f060defb5ca27116fcd831491e74d2a3adfba262d4f9f543043825dfb9366ce7d8edf118aa11f7d97bc2e31ebd93e5a3983422e2ec02fee2245ed02b696cf598d8d18530ac9ade469e4802d9fae8b758bdbe84073fb7dfaa92770fdd64e3ddfc79601bbe65deb8f09933ba3e1c99a7cd5da24848fef353341b57b0b3e6c5b7c3f96a211470c8e5be473d56935e6feaf4cd0c53d5e5ff659f12fbb7ea9a3c8e0991425a02e634c2b718dab8869d2a9d4dfa4df4ec2369ff00198053383574ffcd29bc14c85132bab6303c504ab6f930952aa94be77752182f93d04c5f5c535c19a2dad6d8da806d44747e78ad2c80c549fc7ca124dc4ad42a92c72194a773e8e896e4e0261a3483594ee7ca200f0dd07f87b5aaa281bb0c29b9420614d52de9c63df08a81e356533560b4d73bbd0f0a797a84ef9bcc27557a62311f56ca449233d6b1d202ea92b2b6f712d44bc26085aa83ef4f4bf799d6db161c68ebd1685cb0417c8eb07273a2139a89cb1a56789878e7702007388ab17ec007c1e46199b0ad8798ce55bcc0d91c76e5da8ce92682de32825e5f0faede525db79437360edfa3b9ac4ab76c77e43630789f54e5cbfb5b8f961b91fc27f3cde67ed7142d94fae75b9ab025bbe6b0f6b9a6b744e91bbe801e02f42ef871e76b631d78929b08c9a95ecd6273060f823db0cff1e8f7f38bc0211689aa1f4fbf04f0c2aca303d1328d6e3983404e231f380e83fbef1a6c320aa7efe9cf74c42e26060bae521986df6b7e43ce02e7d3c87372c900441adf71646e8027cb66abb5bbd0f940f36c93f35908542ddb73cc1ec68bb96462b361a5fcf400fcb8ba9c6be99e60fdc713463a55f1a71a5e9d2f6a88ba291e4db2d28c57b951540a8b9cf3505cf08c2229ab58776b0aa23fe40c6b4b4c74d547eb0edc1d6c41532ba18974fb187957757d3552bd0aee1498ad25b2ebe7aedd6147bdedc113ec9bcef9a594ec95c0b4d27602cf1dec8aad450762d20da068dc6dff3d601b2272752cc84d861da4ea45d4cf4c33456dec49ad8ed4182c799324010b9a6fb2e6c21dad589427a2cdfd65ff718560c50e0201501c3400d61cc394849fd3adc396ef436c2a15651aed9091c3d9179f7e24c21762a8510ec7a31be495da98c4749655a4bd452fd67bc97472d00a7cbb475cbbb06225f3b900bc1fec30423ed2a9b01fd3f00ef68c499c9a35207363dcd682bcd0f5371672177ae80e1acf96c635c6892c37f24849156e53b529f7b27ec081c671e5058baa7980b871ab11acce2020b9096ac4d2bf275365dec312e6a5dddb0cad295593962c94de0b6506a66f9d071783a4f4f9e56f37d8825ae87ceaddc00fd99d7847db6630c4321c909758259e0242848dcf7e8fec195abdf5573d585b52866456f49f3392df292332ea9b9c3ac4df8f00565017402a16818e4769abb18b0a3f22c879e2d83df0258eacba7ec5525c1c31fe403ad65c6ecf102139d15763e6ed9d396f51101c8a94c73ff9ecc5d1500d7d59e41a0b8e50b2d457596414c05a3921427a67ddc82a9393cb98ad147a8a4dcee0c58498aabfec81d110fe548445579e1426dff30985f979c656fb7107b74170816ec0789c32a4962548f6be33426279917ea28247ffa2f649b690ff432584300788b445e9e248ef66c7e86803f312a1db1a41e6dbfdd47d7e6c792c309008e2d36582b80f3f8b0272d546553f01f12992e053252ebb6350bc14c235817bbcc45cdd11e19176b7823ab07128db267ff3659e3303a146e509678f0a2a9300e805042d7877509489f0b36d15fe78fdba4351d957b7e7230f2fbb5be89a089cf7b160e012cfd475bcda72023080efcc2afe6ff4b21bb91ef19bd881cec2cceb7d3dd31895a3653a9e4fa4c9ae09a98b12906f465293b5856b1cc9af5b7aadd015106c5d6eb22f9ab15779a940ecf90e429ea5802192b67a3fb9c89cef193bfc556dbb0ca9b7d60f7272539a314e576b31f2e07b15aef1ce57fc6e06ebe53e37620b25a3c15ab2cc48fbdca2844d41ca51ccc95bd7b0d9704e5eb11e79e4d072fc60ed6c60808d11fa58063d2f16a37e3873ad346665b1f1eb1334bb94e30ceb0dcbda8b04f16d3c6d42e7912993e28c14d463e5c1f91f6e44115fb3349531184808d5a01378b8cacc84781a6e6785eef50af14d75df981e466e8084277649ef9a245053f90cd14f8576434e6f69e95491197c847e5377cd080cdf5e274f1cf88f5f0eb06e1e67cd37a1645235b15cbbce45cc0bf4205d7ccd56863d2959068c1124f1f822265575df68df1e68d896d90d6fb1ef487722bfc5ebc33804dee7feb09f8afc20dddcc238ba1d9dad858c9e7cc3887ae262408fbb0a76fe005441ebbef33c7545673145bd1cf543e71d18c00e48120dd2f1d1683f36e2a9156c0aff733168285b4663930bf1cd2d5da41aa629953606d72c5f7a2521cc01267b1c12755609baf37e42bc2b5af2fcfe1c1412dbb1a4dad59d5df7c464b93dd5792c50b53d9175cbc52fa1a82d70190ab5b5f3b3a120b5d2b811ab1236fd2b3eee8e81a05bab866adb246f3874094fa7bcff4a80b64eb2d3f63e6083023f8a241700f6d34fcbd00e93511776bd17bfec4e37e59844827caad8275a5ec56800bbad7b0ac3f7e34114d3515ac533550503539c753aa896a5a320fc02199ff99cadd1d829d1ec6ac5b060d1b3c89076a18db38a825c783578af0a6258a4a5e9144a62114269b19c25c6144f5c4ca6c7953cf8bd9c1d2e1a12252dec5d651901822964ce0d31b43495c2a53738032ec66492d8adbc0ff6b6a9e572b1d8c12dcc488f5d447bc113a5fee0c51329afa9f3e900cc4b880ad18633cf5bc80f62f010e5bbdae86cae591ae092fa33d97449d69f51ec6786d0187a10c1dfaf631f2344cd5a09192ddd13bab8370aef92be77289b15c99055a7c6343f924d72d77e7cabebf29a0bb93306859a69b1fbd8f6d8227a53720d6b7e464cb4e2aa862abbd530c510e338f1b88dd4479998aa2f5309d4ae914ed1d81009d87810f3f97e99c615bb9532578d15490575a1871383350c7cccbf558f92ac6877667c6cb9a30c4ddf9e0e6792b7866a73135feecb97dca42243fe7347256d23299c1be2b57405f7b454c32c00c7b3721f6ea9bfae5c9eaa365961e4a82c70bd23e4c8c2da0515d51c7ca1c8bfb2132c7e215840227227327ba5e59f5c3ac083ca35f60d3756c98eb2601b090a482c90b63c392d1505aeb46455085aa68a337d6a6d47bb6ef5901c242b09589abd942a0de241ca797f4ef36853cabecb1a4be5839eda72f90f3b24cd818ad3f7c738345606d4ecd304e0bcd72e5eb9c76e0e1226f24b7b1e3118d26c890bea68eeba90644fad4d1cedd08e45f2d1b0c5059faf92bae2872e13d7c86e8a0808c5ec575aa257fae66dde972704425457b42991d9e2e7e8359b77bb39106994485bbf34b4b25cc1022cf4261a52d5fa5e0e3ab943b78b042da52b4926fac0ef71e072ed86576d79fa0f4bb8ba360e568e498795805089489dd80c53a0f4e6b928889f430f164c65f3adb38dc1f0caaba64108226a73aba41ef0e32f7778a652b26e69f77ee22a4f771f7995c4f3300bbeaac86e78cf3893bf3b6abdf14b821e269842eb9e8e6ff5047a58fdd7c4e7ef1bc39e191bacb33ffa245ec174fd836a459fbfe6551b72a9ac193101325e60a1458341208dbfd98a1d48ab883b39681e8a21adf97a3c67cc2795d1403b3ee206f8c64d2338f906da9bbcb74eb7e598b46d78fa4933968e3f70a4fc192686e64671097ae19959c09f3f7665034778166098057c3d99e6a5ee3b728415e0a86c31de9e4981326d8d12c8e389eea257877a9005aee7fe088d23190dfba864a9429cb877701fa4296ac6a36c6712ef6737435457b68f5b7aafb82109895becc786c77ca4956a721fb2b8be51fbd91c96c47bfd1cea485762ff0a323572d491fcdc0c68d9bc9de12854af0477ebf4a0419194ae747f52dba025284e0ea0d444c9d70966b77a9d053b624c4fe351f58520dfe5e28df74715b4f744f4fd88fc16449b4506177ca42a2db9480f1e6ac91fa0b22d9051c7ea4f2e29984044ad11d830259a4f7023300557d310e62532f1466a0090022bc4da2a2ebec53f66f52c44efa85f8411d8fd0d8b6504088795a24380e840e977fbda641abceb1441bd8b3baa31d04de5152489bb6f3e5c6096f534586db50299e5a73489e78e34619f28ffba30b81b6b694813574b74fec2153219c9a66891094e271bf411e4a904c14fd8c619809ad3f374f8040584a2b9bee0e41269e035eaa4547701763a0d7637bbc601725a0a6dec255723dc2bec73a683bf92a4b32a58e3e3962c35414ec879e6dc9eadd996db0e6ff25cc4a53c4957cafbe3c3d772a49922167c9e692ce849177201704ebdb65add4669fb7faa44ed9af9f780fd9db57dc86ccf0c63741d204e73b71efc5d3c07efbe049ac9dc9cec48e58297de03557d42c06371b95aa29090a653c443de3e0ee2b6377a6e3c0fea370139a51d786675abfa619881579fe74862f9c5bc04964a898e047132afe43a5f688d367a7abcd26ef7920c45713732ae8226757735defc4ac24deda9398178cfe5f725e81eca130716c97be952a99c1</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"数据血缘管理-amp-atlas安装与使用\"><a href=\"#数据血缘管理-amp-atlas安装与使用\" class=\"headerlink\" title=\"数据血缘管理&amp;atlas安装与使用\"></a>数据血缘管理&amp;atlas安装与使用</h1><p>下载atlas源码包并进行打包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http:&#x2F;&#x2F;archive.apache.org&#x2F;dist&#x2F;atlas&#x2F;2.1.0&#x2F;apache-atlas-2.1.0-sources.tar.gz</span><br></pre></td></tr></table></figure>\n<h2 id=\"环境准备与配置修改\"><a href=\"#环境准备与配置修改\" class=\"headerlink\" title=\"环境准备与配置修改\"></a>环境准备与配置修改</h2><h3 id=\"maven-安装\"><a href=\"#maven-安装\" class=\"headerlink\" title=\"maven 安装\"></a>maven 安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y maven</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"git-安装\"><a href=\"#git-安装\" class=\"headerlink\" title=\"git 安装\"></a>git 安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y git</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改maven-配置\"><a href=\"#修改maven-配置\" class=\"headerlink\" title=\"修改maven 配置\"></a>修改maven 配置</h3><p>修改maven仓库地址</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改atlas参数配置\"><a href=\"#修改atlas参数配置\" class=\"headerlink\" title=\"修改atlas参数配置\"></a>修改atlas参数配置</h3><p>zookeeper：3.4.5<br>hbase：2.1.0<br>solr: 7.4.0</p>\n<h3 id=\"docker-方式部署\"><a href=\"#docker-方式部署\" class=\"headerlink\" title=\"docker 方式部署\"></a>docker 方式部署</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d --name atlas200 -p 21000:21000 altas_test:v1</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"操作记录\"><a href=\"#操作记录\" class=\"headerlink\" title=\"操作记录\"></a>操作记录</h3><p>出现过maven打包报错，这里要把-Drat.skip=true参数加上</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn clean install -DskipTests -Drat.skip&#x3D;true</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;opt&#x2F;cloudera&#x2F;parcels&#x2F;CDH-6.3.1-1.cdh6.3.1.p0.1470567&#x2F;lib&#x2F;solr&#x2F;bin&#x2F;solr create -c  vertex_index -d &#x2F;opt&#x2F;cloudera&#x2F;parcels&#x2F;CDH-6.3.1-1.cdh6.3.1.p0.1470567&#x2F;lib&#x2F;solr&#x2F;atlas-solr -shards 3 -replicationFactor 2</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改kafka配置\"><a href=\"#修改kafka配置\" class=\"headerlink\" title=\"修改kafka配置\"></a>修改kafka配置</h3><p>注释了下述参数，服务成功启动</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#atlas.notification.embedded&#x3D;true</span><br></pre></td></tr></table></figure>\n\n<p>配置文件在./config/atlas/atlas-application.properties</p>\n<h3 id=\"集成hive\"><a href=\"#集成hive\" class=\"headerlink\" title=\"集成hive\"></a>集成hive</h3>","encrypt":true},{"title":"王阁/工作/项目/济泺路隧道/出差/flink运行参数","date":"2021-08-16T07:55:00.817Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n\n\n|  包名   | 参数  |作用|存放地址 |状态 |提交人 |\n|  ----  | ----  |----|----|----|  ----  |\n| jllsd-flink-tunnel-five-minute-camera-data-1.0.1.jar | bootstrap.servers=datanode1:9092,datanode2:9092,datanode3:9092 group.id=liuyin-flink-tunnel-05 |摄像头数据聚合成分钟数据|/Users/kuiqwang/ownCloud/项目/济泺路/服务/flink/jllsd-flink-tunnel-five-minute-camera-data-1.0.1.jar |启用 |刘银 |\n| jllsd-flink-tour-inspection-record-1.0-SNAPSHOT.jar | --bootstrap.servers=datanode1:9092,datanode2:9092,datanode3:9092 --hdfs.namenode=managenode:8020 || |启用 |李家 |\n| jllsd-flink-camera-one-minute-data-1.0_new.jar | --bootstrap.servers datanode1:9092,datanode2:9092,datanode3:9092  --hdfs.namenode managenode:8020 || | | |\n|  |  || | | |","source":"_posts/王阁/工作/项目/济泺路隧道/出差/flink运行参数.md","raw":"title:  \ndate:  \ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n\n\n|  包名   | 参数  |作用|存放地址 |状态 |提交人 |\n|  ----  | ----  |----|----|----|  ----  |\n| jllsd-flink-tunnel-five-minute-camera-data-1.0.1.jar | bootstrap.servers=datanode1:9092,datanode2:9092,datanode3:9092 group.id=liuyin-flink-tunnel-05 |摄像头数据聚合成分钟数据|/Users/kuiqwang/ownCloud/项目/济泺路/服务/flink/jllsd-flink-tunnel-five-minute-camera-data-1.0.1.jar |启用 |刘银 |\n| jllsd-flink-tour-inspection-record-1.0-SNAPSHOT.jar | --bootstrap.servers=datanode1:9092,datanode2:9092,datanode3:9092 --hdfs.namenode=managenode:8020 || |启用 |李家 |\n| jllsd-flink-camera-one-minute-data-1.0_new.jar | --bootstrap.servers datanode1:9092,datanode2:9092,datanode3:9092  --hdfs.namenode managenode:8020 || | | |\n|  |  || | | |","slug":"王阁/工作/项目/济泺路隧道/出差/flink运行参数","published":1,"updated":"2021-08-16T09:38:52.092Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsi10089u6pw3g219ber","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"7ebb4835b03886f8e5d97ad733d138fcbad4a0fae7c56e707823a38c50e38fc4\">f29c680708acd02cbb1b6cceaba06192531b0b51abce5d17859480656b5146a353f346f9960449c5486866cb13b2c2a2384713643126939c73b6bacb383ed7be956f24c4a8fbc43f4580e3d5d7b4e0d7ba3495835f91e247b947c6ac31ab000dc33b3347319782948a73e470571c4be9103c8ae56e9f55b89f3cc6fb02fb70310e13aa3687974a54170f9b663a720f0783acd1a000d9f2f6f42047d9d524a076fb921389f85a580a702fabd2d35647be755f10d62707cc30b838ad71e406b7ea87e2850baffe2e04a7c136a6c987ab97ddede9845a2e03e60392ef4fdf92c2bfe6b57d430393601da277da51b34dcd9e1f0fbc8dc1b8bf54ca0784440e07af917d50e027e3b61c3f4008282c6d9e6ad457bc73ffef62bf9fa59b8bc4a12a24ad6d4653c7158d7439f1b2c45b2709ac7841a78e297d151836137da2b27c3b56724d2b110f3fd9eaf095adaa67fa5ad5570bcf187b45f10fd34662e53271d81247644a1d8bc463a0dbafaa082629ae6f35d7ef147725ce8281692c6fa53ae05cceb1ff77dc3082b3df5e3b4ccdee06e318c6fd23a515c026c83a3aa19196a2af9eb28732685bb93e88618ca0661c9681c3dbd93ab7ac85b7d59b5ce519c0ede744650fabd052cf4b68531c831bd4ffb12ccade7ac5c91526427374b4cb929678206d2021af5d44400ac8d47aed00dcde37c33af7a3d02e7de4706863177643e70a6a120346028a1dd847a0798d4c462d3baa65d6c0848426c463b1b5ad79f8456b81e3f1283cd839519a05ddf3389d513c020bc9abb01394e642176759b03f382e390dc5f92a7658cdd9db65440fcb73b43e9c43c374ad5452837e19ab2a26937c07dc327cf11017129eb06904076253e66067dc30e1f6047e14752af144a29d03314d46482bd4a59406b69ce81ed8e28fa04367b60e9a1a1868b4162b0d55c21c984055d30f62bf4118ccf67a6f3bb12e03444cc7dcc668c4364052e01cbba3e7b3f33153835bcb20e9928b036d51cc3777938cc4a369faa62f593b8baebe9aecf16cd7aea62cf8f005b67fe6895c6da7befa6a2cd30237f9895daa422153e98a8dd6ccbfd042f96b7b4f6907428ded1ab40d50ab478497e5234cc2b8e571142ed4354751ed17efb2aa8215a5916d505f9591ccd6a562923a506da911aeccc3303fe84b2cf8e44d4265fbfbca4b8943d1d6c83eb25c22dffe040706f25da069d211d480da0dda5625f927eccb2bedc6c15c0054a8878a2d45ab8ac63ec2cde72d538a9dd106f07f9ee78a312299367f8eddfdff897f16942402b7101d7d4a1376fbd10a37aad82193123ac66d88d912e2a1737dde7483367fe4ce54db4bdae86acb5a3f81c99746d319124b5eea7d19fad72512812175252bae987371725884ef2ea8e0146f236f42e4a3dc68c56949feb4a2cb30c9e5acea5c53436b4f39872afa9eff967ac0e0b03b3372b0b31a23987978354832d3cab8c1f3a8c75e3db0a2f40ac84d95c2a9b2d54a5dc686f1aae00153a874dfb6fbcc67814984cb9012d9</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n\n\n<table>\n<thead>\n<tr>\n<th>包名</th>\n<th>参数</th>\n<th>作用</th>\n<th>存放地址</th>\n<th>状态</th>\n<th>提交人</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>jllsd-flink-tunnel-five-minute-camera-data-1.0.1.jar</td>\n<td>bootstrap.servers=datanode1:9092,datanode2:9092,datanode3:9092 group.id=liuyin-flink-tunnel-05</td>\n<td>摄像头数据聚合成分钟数据</td>\n<td>/Users/kuiqwang/ownCloud/项目/济泺路/服务/flink/jllsd-flink-tunnel-five-minute-camera-data-1.0.1.jar</td>\n<td>启用</td>\n<td>刘银</td>\n</tr>\n<tr>\n<td>jllsd-flink-tour-inspection-record-1.0-SNAPSHOT.jar</td>\n<td>–bootstrap.servers=datanode1:9092,datanode2:9092,datanode3:9092 –hdfs.namenode=managenode:8020</td>\n<td></td>\n<td></td>\n<td>启用</td>\n<td>李家</td>\n</tr>\n<tr>\n<td>jllsd-flink-camera-one-minute-data-1.0_new.jar</td>\n<td>–bootstrap.servers datanode1:9092,datanode2:9092,datanode3:9092  –hdfs.namenode managenode:8020</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n","encrypt":true},{"title":"flink公司环境部署记录","date":"2021-05-28T03:18:41.066Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n|  包名  | 参数 |作用|创建人|存放地址|日期|\n|  ----  | ----  |----|  ----  |  ----  |  ----  |\n| jllsd-flink-camera-five-minute-data-1.0.0.jar | bootstrap.servers=kafka01:9092,kafka02:9092,kafka03:9092 group.id=liuyin-flink-01 |把摄像头每分钟数据聚合成5分钟数据|刘银|/Users/kuiqwang/ownCloud/项目/济泺路/服务/flink/jllsd-flink-camera-five-minute-data-1.0.0.jar|2021年 5月28日|\n\n","source":"_posts/王阁/工作/项目/济泺路隧道/flink服务/flink公司环境部署记录.md","raw":"title:  flink公司环境部署记录\ndate:  2021年 5月28日\ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n|  包名  | 参数 |作用|创建人|存放地址|日期|\n|  ----  | ----  |----|  ----  |  ----  |  ----  |\n| jllsd-flink-camera-five-minute-data-1.0.0.jar | bootstrap.servers=kafka01:9092,kafka02:9092,kafka03:9092 group.id=liuyin-flink-01 |把摄像头每分钟数据聚合成5分钟数据|刘银|/Users/kuiqwang/ownCloud/项目/济泺路/服务/flink/jllsd-flink-camera-five-minute-data-1.0.0.jar|2021年 5月28日|\n\n","slug":"王阁/工作/项目/济泺路隧道/flink服务/flink公司环境部署记录","published":1,"updated":"2021-05-28T03:22:54.717Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsid008bu6pw0jlxawm5","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"862f9f55bb3f1de7a96d39efa6a3f3abc928de8314a3442646f0afe507b66e67\">f29c680708acd02cbb1b6cceaba06192aac0c8be8eba48a0d8d8942e63bd9b4f39178c070aed222126e547ef17918254f0b327adbf0334021ca7f11c1d82505039a674a08b34bfe062a71efa4e7b8dd5f8b3833b6704a9817a09238f0db82c00d538fe0a6e7be2935ebff1c3f27284fb46a842888543583a89e8e63414569fd62a87b1e66871e32c25f07407962064daa7fc6e8153fcc096d23ce719111ff0cdcc387a82d34303f2918a64f5206a0cde5e5ee85760124aad3b2e7e7a4607a49064b78af50a260c4c3450c011e4300125ef698729c78de10c6ce9275df11666cb5cd20b673c126890e10c4ac97a5d47b73251c6ad4d13e9f32004c3122503863d593dbd81eff42c289349f49110f16655e789f1af7200d9fe0bb40df57cddf780fe2039a4901d1711ac0caa96650dab6128f32e9d97498150cc3eb31d4f5dd1c65fac2c24ccebf9da5b643df627328c05727496cea0585af949c73228262374e0c6cc8a2218a0d2a2f5734f0d2c844821a4099d5358f9f684cdc88c7f52be2a2797acbeae0ab92108a8a7c10af033d252677603f549cf13ce90914ecb8c86718021251230fdfbba6dec6d0162a7eebbc239f8f935482fb2483dfa202e2e61b20e7db14a0c54fff4d8018c75e850b50ff76df55f0e76bcd935c6038c644bb2384d8e0ad5e07be0d66ff9315b6ee45bcb4959ec9110c9ffca922a7fb417f45bfb05d6d3535f46a5278728688da99d2d48bb246c298ab94260852c8d0f3c0173aa56e4e8ed487c12347daeb84719ee6a0d79</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<table>\n<thead>\n<tr>\n<th>包名</th>\n<th>参数</th>\n<th>作用</th>\n<th>创建人</th>\n<th>存放地址</th>\n<th>日期</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>jllsd-flink-camera-five-minute-data-1.0.0.jar</td>\n<td>bootstrap.servers=kafka01:9092,kafka02:9092,kafka03:9092 group.id=liuyin-flink-01</td>\n<td>把摄像头每分钟数据聚合成5分钟数据</td>\n<td>刘银</td>\n<td>/Users/kuiqwang/ownCloud/项目/济泺路/服务/flink/jllsd-flink-camera-five-minute-data-1.0.0.jar</td>\n<td>2021年 5月28日</td>\n</tr>\n</tbody></table>\n","encrypt":true},{"title":"this is a demo","date":"2022-01-25T05:35:51.921Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n\n","source":"_posts/王阁/工作/项目/济泺路隧道/出差/test.md","raw":"title:  this is a demo\ndate:  \ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n\n","slug":"王阁/工作/项目/济泺路隧道/出差/test","published":1,"updated":"2022-01-25T06:29:52.282Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsir008cu6pw83mofm8x","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"2b3577516f3e20553709db79f06399904180d573741a658aebcda1c1ddd05eee\">f29c680708acd02cbb1b6cceaba06192d34048633918d15832047c414baf92a4</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n","encrypt":true},{"title":"数仓架构设计图","date":"2023-02-23T02:51:20.904Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n ![2021-07-22-14-02-27](https://img.wqkenqing.ren//2021-07-22-14-02-27.png)","source":"_posts/王阁/工作/项目/铁四院数据平台/数仓/数仓架构设计图.md","raw":"title:  数仓架构设计图\ndate:  2021年 4月28日\ntags: [数据仓库、架构设计]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n ![2021-07-22-14-02-27](https://img.wqkenqing.ren//2021-07-22-14-02-27.png)","slug":"王阁/工作/项目/铁四院数据平台/数仓/数仓架构设计图","published":1,"updated":"2023-02-23T02:51:20.904Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiu008du6pw1onm94rr","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"818882ef846fe7376a22e55e90b92fe000b9acf7a94c011691128ae283a6e73a\">f29c680708acd02cbb1b6cceaba061928a1d1376ff6b668541f3e6802bbc156c4461fce1b965c510af4b1604511eb981cf4314464352e3073e5aa009b75c422863962fe95ac5f08c4288306627017cc685787a90726e756f47ccf20afa65846422c76838e66276f006391b69c02d012aaba4aa5e4c6ba3f6e5f48ed5f37f98e4</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<p> <img src=\"https://img.wqkenqing.ren//2021-07-22-14-02-27.png\" alt=\"2021-07-22-14-02-27\"></p>\n","encrypt":true},{"_content":"## 数据中心节点host\n\n```\n192.168.137.61 managenode\n192.168.137.62 datanode1\n192.168.137.63 comnode1\n192.168.137.64 datanode2\n192.168.137.65 datanode3\n192.168.137.66 datanode4\n192.168.137.53 comnode2\n```\n\n## kafka地址\n\n```\ndatanode1:9092\ndatanode2:9092\ndatanode3:9092\n\n```\n\nzookeeper 中kafka地址\n\n```\ndatanode1:2181/kafka\ndatanode2:2181/kafka\ndatanode3:2181/kafka\n\n```\n\n## elasticsearch地址\n\n```\n\ndatanode1:9200\ndatanode2:9200\ndatanode3:9200\ndatanode4:9200\n\n```\n\n## 采集地址\n\n```\ncomnode1 44445\n\ncomnode2 44445\n\n```\n\n## kibana 地址\n\n```\nmanagenode:5601\n\n```\n","source":"_posts/王阁/工作/项目/济泺路隧道/出差/相关配置地址.md","raw":"## 数据中心节点host\n\n```\n192.168.137.61 managenode\n192.168.137.62 datanode1\n192.168.137.63 comnode1\n192.168.137.64 datanode2\n192.168.137.65 datanode3\n192.168.137.66 datanode4\n192.168.137.53 comnode2\n```\n\n## kafka地址\n\n```\ndatanode1:9092\ndatanode2:9092\ndatanode3:9092\n\n```\n\nzookeeper 中kafka地址\n\n```\ndatanode1:2181/kafka\ndatanode2:2181/kafka\ndatanode3:2181/kafka\n\n```\n\n## elasticsearch地址\n\n```\n\ndatanode1:9200\ndatanode2:9200\ndatanode3:9200\ndatanode4:9200\n\n```\n\n## 采集地址\n\n```\ncomnode1 44445\n\ncomnode2 44445\n\n```\n\n## kibana 地址\n\n```\nmanagenode:5601\n\n```\n","slug":"王阁/工作/项目/济泺路隧道/出差/相关配置地址","published":1,"date":"2021-08-16T03:44:53.902Z","updated":"2021-08-16T07:25:17.771Z","title":"王阁/工作/项目/济泺路隧道/出差/相关配置地址","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiu008fu6pwgpjf06bq","content":"<h2 id=\"数据中心节点host\"><a href=\"#数据中心节点host\" class=\"headerlink\" title=\"数据中心节点host\"></a>数据中心节点host</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.137.61 managenode</span><br><span class=\"line\">192.168.137.62 datanode1</span><br><span class=\"line\">192.168.137.63 comnode1</span><br><span class=\"line\">192.168.137.64 datanode2</span><br><span class=\"line\">192.168.137.65 datanode3</span><br><span class=\"line\">192.168.137.66 datanode4</span><br><span class=\"line\">192.168.137.53 comnode2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"kafka地址\"><a href=\"#kafka地址\" class=\"headerlink\" title=\"kafka地址\"></a>kafka地址</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">datanode1:9092</span><br><span class=\"line\">datanode2:9092</span><br><span class=\"line\">datanode3:9092</span><br></pre></td></tr></table></figure>\n\n<p>zookeeper 中kafka地址</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">datanode1:2181&#x2F;kafka</span><br><span class=\"line\">datanode2:2181&#x2F;kafka</span><br><span class=\"line\">datanode3:2181&#x2F;kafka</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"elasticsearch地址\"><a href=\"#elasticsearch地址\" class=\"headerlink\" title=\"elasticsearch地址\"></a>elasticsearch地址</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">datanode1:9200</span><br><span class=\"line\">datanode2:9200</span><br><span class=\"line\">datanode3:9200</span><br><span class=\"line\">datanode4:9200</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"采集地址\"><a href=\"#采集地址\" class=\"headerlink\" title=\"采集地址\"></a>采集地址</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">comnode1 44445</span><br><span class=\"line\"></span><br><span class=\"line\">comnode2 44445</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"kibana-地址\"><a href=\"#kibana-地址\" class=\"headerlink\" title=\"kibana 地址\"></a>kibana 地址</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">managenode:5601</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"数据中心节点host\"><a href=\"#数据中心节点host\" class=\"headerlink\" title=\"数据中心节点host\"></a>数据中心节点host</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.137.61 managenode</span><br><span class=\"line\">192.168.137.62 datanode1</span><br><span class=\"line\">192.168.137.63 comnode1</span><br><span class=\"line\">192.168.137.64 datanode2</span><br><span class=\"line\">192.168.137.65 datanode3</span><br><span class=\"line\">192.168.137.66 datanode4</span><br><span class=\"line\">192.168.137.53 comnode2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"kafka地址\"><a href=\"#kafka地址\" class=\"headerlink\" title=\"kafka地址\"></a>kafka地址</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">datanode1:9092</span><br><span class=\"line\">datanode2:9092</span><br><span class=\"line\">datanode3:9092</span><br></pre></td></tr></table></figure>\n\n<p>zookeeper 中kafka地址</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">datanode1:2181&#x2F;kafka</span><br><span class=\"line\">datanode2:2181&#x2F;kafka</span><br><span class=\"line\">datanode3:2181&#x2F;kafka</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"elasticsearch地址\"><a href=\"#elasticsearch地址\" class=\"headerlink\" title=\"elasticsearch地址\"></a>elasticsearch地址</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">datanode1:9200</span><br><span class=\"line\">datanode2:9200</span><br><span class=\"line\">datanode3:9200</span><br><span class=\"line\">datanode4:9200</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"采集地址\"><a href=\"#采集地址\" class=\"headerlink\" title=\"采集地址\"></a>采集地址</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">comnode1 44445</span><br><span class=\"line\"></span><br><span class=\"line\">comnode2 44445</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"kibana-地址\"><a href=\"#kibana-地址\" class=\"headerlink\" title=\"kibana 地址\"></a>kibana 地址</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">managenode:5601</span><br></pre></td></tr></table></figure>\n"},{"title":"hdfs操作细节","date":"2019-05-15T16:00:00.000Z","_content":"\n针对hdfs一些较细节的api封装\n\n<!--more-->\n\n# hdfs操作\n\n## 常规操作\n1. 创建文件 \n2. 写数据 \n3. 删除文件 \n4. 上传文件 \n5. 下载文件 \n6. 断点续写\n\n``` error\n错误：\n\n    java.io.IOException: Failed to replace a bad datanode on the existing pipeline due to no more good datanodes being available to try\n```\n\n原因：\n    无法写入；我的环境中有3个datanode，备份数量设置的是3。在写操作时，它会在pipeline中写3个机器。默认replace-datanode-on-failure.policy是DEFAULT,如果系统中的datanode大于等于3，它会找另外一个datanode来拷贝。目前机器只有3台，因此只要一台datanode出问题，就一直无法写入成功。\n    \n```xml\n<property>\n\n        <name>dfs.client.block.write.replace-datanode-on-failure.enable</name>         <value>true</value>\n\n    </property>\n\n   \n\n    <property>\n    <name>dfs.client.block.write.replace-datanode-on-failure.policy</name>\n\n        <value>NEVER</value>\n\n    </property>\n```\n\n对于dfs.client.block.write.replace-datanode-on-failure.enable，客户端在写失败的时候，是否使用更换策略，默认是true没有问题\n对于，dfs.client.block.write.replace-datanode-on-failure.policy，default在3个或以上备份的时候，是会尝试更换结点尝试写入datanode。而在两个备份的时候，不更换datanode，直接开始写。对于3个datanode的集群，只要一个节点没响应写入就会出问题，所以可以关掉。","source":"_posts/王阁/技术/hexo/hadoop/hdfs/hdfs操作.md","raw":"---\n\ntitle: hdfs操作细节\ndate: 2019-05-16\ntags: \n\n---\n\n针对hdfs一些较细节的api封装\n\n<!--more-->\n\n# hdfs操作\n\n## 常规操作\n1. 创建文件 \n2. 写数据 \n3. 删除文件 \n4. 上传文件 \n5. 下载文件 \n6. 断点续写\n\n``` error\n错误：\n\n    java.io.IOException: Failed to replace a bad datanode on the existing pipeline due to no more good datanodes being available to try\n```\n\n原因：\n    无法写入；我的环境中有3个datanode，备份数量设置的是3。在写操作时，它会在pipeline中写3个机器。默认replace-datanode-on-failure.policy是DEFAULT,如果系统中的datanode大于等于3，它会找另外一个datanode来拷贝。目前机器只有3台，因此只要一台datanode出问题，就一直无法写入成功。\n    \n```xml\n<property>\n\n        <name>dfs.client.block.write.replace-datanode-on-failure.enable</name>         <value>true</value>\n\n    </property>\n\n   \n\n    <property>\n    <name>dfs.client.block.write.replace-datanode-on-failure.policy</name>\n\n        <value>NEVER</value>\n\n    </property>\n```\n\n对于dfs.client.block.write.replace-datanode-on-failure.enable，客户端在写失败的时候，是否使用更换策略，默认是true没有问题\n对于，dfs.client.block.write.replace-datanode-on-failure.policy，default在3个或以上备份的时候，是会尝试更换结点尝试写入datanode。而在两个备份的时候，不更换datanode，直接开始写。对于3个datanode的集群，只要一个节点没响应写入就会出问题，所以可以关掉。","slug":"王阁/技术/hexo/hadoop/hdfs/hdfs操作","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiv008gu6pwd1u1hg6r","content":"<p>针对hdfs一些较细节的api封装</p>\n<a id=\"more\"></a>\n\n<h1 id=\"hdfs操作\"><a href=\"#hdfs操作\" class=\"headerlink\" title=\"hdfs操作\"></a>hdfs操作</h1><h2 id=\"常规操作\"><a href=\"#常规操作\" class=\"headerlink\" title=\"常规操作\"></a>常规操作</h2><ol>\n<li>创建文件 </li>\n<li>写数据 </li>\n<li>删除文件 </li>\n<li>上传文件 </li>\n<li>下载文件 </li>\n<li>断点续写</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">错误：</span><br><span class=\"line\"></span><br><span class=\"line\">    java.io.IOException: Failed to replace a bad datanode on the existing pipeline due to no more good datanodes being available to try</span><br></pre></td></tr></table></figure>\n\n<p>原因：<br>    无法写入；我的环境中有3个datanode，备份数量设置的是3。在写操作时，它会在pipeline中写3个机器。默认replace-datanode-on-failure.policy是DEFAULT,如果系统中的datanode大于等于3，它会找另外一个datanode来拷贝。目前机器只有3台，因此只要一台datanode出问题，就一直无法写入成功。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.client.block.write.replace-datanode-on-failure.enable<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span>         <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.client.block.write.replace-datanode-on-failure.policy<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>NEVER<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>对于dfs.client.block.write.replace-datanode-on-failure.enable，客户端在写失败的时候，是否使用更换策略，默认是true没有问题<br>对于，dfs.client.block.write.replace-datanode-on-failure.policy，default在3个或以上备份的时候，是会尝试更换结点尝试写入datanode。而在两个备份的时候，不更换datanode，直接开始写。对于3个datanode的集群，只要一个节点没响应写入就会出问题，所以可以关掉。</p>\n","site":{"data":{}},"excerpt":"<p>针对hdfs一些较细节的api封装</p>","more":"<h1 id=\"hdfs操作\"><a href=\"#hdfs操作\" class=\"headerlink\" title=\"hdfs操作\"></a>hdfs操作</h1><h2 id=\"常规操作\"><a href=\"#常规操作\" class=\"headerlink\" title=\"常规操作\"></a>常规操作</h2><ol>\n<li>创建文件 </li>\n<li>写数据 </li>\n<li>删除文件 </li>\n<li>上传文件 </li>\n<li>下载文件 </li>\n<li>断点续写</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">错误：</span><br><span class=\"line\"></span><br><span class=\"line\">    java.io.IOException: Failed to replace a bad datanode on the existing pipeline due to no more good datanodes being available to try</span><br></pre></td></tr></table></figure>\n\n<p>原因：<br>    无法写入；我的环境中有3个datanode，备份数量设置的是3。在写操作时，它会在pipeline中写3个机器。默认replace-datanode-on-failure.policy是DEFAULT,如果系统中的datanode大于等于3，它会找另外一个datanode来拷贝。目前机器只有3台，因此只要一台datanode出问题，就一直无法写入成功。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.client.block.write.replace-datanode-on-failure.enable<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span>         <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.client.block.write.replace-datanode-on-failure.policy<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>NEVER<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>对于dfs.client.block.write.replace-datanode-on-failure.enable，客户端在写失败的时候，是否使用更换策略，默认是true没有问题<br>对于，dfs.client.block.write.replace-datanode-on-failure.policy，default在3个或以上备份的时候，是会尝试更换结点尝试写入datanode。而在两个备份的时候，不更换datanode，直接开始写。对于3个datanode的集群，只要一个节点没响应写入就会出问题，所以可以关掉。</p>"},{"title":"hdfs命令","date":"2019-07-16T16:00:00.000Z","_content":"\nhdfs常用命令\n\n<!--more-->\n\n\ncount\n\n\n```\n该命令选项显示指定路径下的文件夹数量、文件数量、文件总大小信息，如图4-6所示。\n```\n![](http://img.wqkenqing.ren/QFvpXA.png)\n\n\ndu\n\n```\n统计目录下各文件大小\n```\ntouchz\n```\n创建空白文件\n\n```\n\n-stat\n\n```\n“%b %n %o %r %Y”依次表示文件大小、文件名称、块大小、副本数、访问时间。\n\n```\n\n","source":"_posts/王阁/技术/hexo/hadoop/hdfs/hdfs命令.md","raw":"---\n\ntitle: hdfs命令\ndate: 2019-07-17\ntags:  hdfs\n\n---\n\nhdfs常用命令\n\n<!--more-->\n\n\ncount\n\n\n```\n该命令选项显示指定路径下的文件夹数量、文件数量、文件总大小信息，如图4-6所示。\n```\n![](http://img.wqkenqing.ren/QFvpXA.png)\n\n\ndu\n\n```\n统计目录下各文件大小\n```\ntouchz\n```\n创建空白文件\n\n```\n\n-stat\n\n```\n“%b %n %o %r %Y”依次表示文件大小、文件名称、块大小、副本数、访问时间。\n\n```\n\n","slug":"王阁/技术/hexo/hadoop/hdfs/hdfs命令","published":1,"updated":"2023-02-23T02:51:20.904Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiv008iu6pw8k3fheib","content":"<p>hdfs常用命令</p>\n<a id=\"more\"></a>\n\n\n<p>count</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">该命令选项显示指定路径下的文件夹数量、文件数量、文件总大小信息，如图4-6所示。</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://img.wqkenqing.ren/QFvpXA.png\" alt=\"\"></p>\n<p>du</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">统计目录下各文件大小</span><br></pre></td></tr></table></figure>\n<p>touchz</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">创建空白文件</span><br></pre></td></tr></table></figure>\n\n<p>-stat</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">“%b %n %o %r %Y”依次表示文件大小、文件名称、块大小、副本数、访问时间。</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"<p>hdfs常用命令</p>","more":"<p>count</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">该命令选项显示指定路径下的文件夹数量、文件数量、文件总大小信息，如图4-6所示。</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://img.wqkenqing.ren/QFvpXA.png\" alt=\"\"></p>\n<p>du</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">统计目录下各文件大小</span><br></pre></td></tr></table></figure>\n<p>touchz</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">创建空白文件</span><br></pre></td></tr></table></figure>\n\n<p>-stat</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">“%b %n %o %r %Y”依次表示文件大小、文件名称、块大小、副本数、访问时间。</span><br></pre></td></tr></table></figure>"},{"title":"SparkSql","date":"2019-06-12T16:00:00.000Z","_content":"\n```\nspark sql 相关内容\n```\n<!--more-->\n\n# sparksql\n","source":"_posts/王阁/技术/hexo/spark/sql/SparkSql.md","raw":"---\n\ntitle: SparkSql\ndate: 2019-06-13\ntags:\n\n---\n\n```\nspark sql 相关内容\n```\n<!--more-->\n\n# sparksql\n","slug":"王阁/技术/hexo/spark/sql/SparkSql","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiw008ku6pw1g3d925j","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spark sql 相关内容</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n\n<h1 id=\"sparksql\"><a href=\"#sparksql\" class=\"headerlink\" title=\"sparksql\"></a>sparksql</h1>","site":{"data":{}},"excerpt":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spark sql 相关内容</span><br></pre></td></tr></table></figure>","more":"<h1 id=\"sparksql\"><a href=\"#sparksql\" class=\"headerlink\" title=\"sparksql\"></a>sparksql</h1>"},{"title":"SparkRDD算子","date":"2020-07-15T16:00:00.000Z","_content":"\n\n <!--more-->\n\n RDD算子合集\n  transform\n\n    * map\n    * flatMap\n    * filter\n    * distinct\n    * union\n    * intersection\n    * substract\n    * cartesian\n    * maptoPair\n    * flatMapToPair\n    * combineByKey\n    * reduceByKey\n    * foldByKey\n    * sortByKey\n    * groupByKey\n    * cogroup\n    * substractByKey\n    * join\n    * fullOuterJoin\n    * leftOuterJoin\n    * rightOuterJoin\n\nAction\n    * first\n    * take\n","source":"_posts/王阁/技术/hexo/spark/算子/RDD算子.md","raw":"---\ntitle:  SparkRDD算子\ndate:  2020.7.16\ntags: [spark,rdd,算子]\n---\n\n\n <!--more-->\n\n RDD算子合集\n  transform\n\n    * map\n    * flatMap\n    * filter\n    * distinct\n    * union\n    * intersection\n    * substract\n    * cartesian\n    * maptoPair\n    * flatMapToPair\n    * combineByKey\n    * reduceByKey\n    * foldByKey\n    * sortByKey\n    * groupByKey\n    * cogroup\n    * substractByKey\n    * join\n    * fullOuterJoin\n    * leftOuterJoin\n    * rightOuterJoin\n\nAction\n    * first\n    * take\n","slug":"王阁/技术/hexo/spark/算子/RDD算子","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiw008nu6pw9a44b2ie","content":" <a id=\"more\"></a>\n\n<p> RDD算子合集<br>  transform</p>\n<pre><code>* map\n* flatMap\n* filter\n* distinct\n* union\n* intersection\n* substract\n* cartesian\n* maptoPair\n* flatMapToPair\n* combineByKey\n* reduceByKey\n* foldByKey\n* sortByKey\n* groupByKey\n* cogroup\n* substractByKey\n* join\n* fullOuterJoin\n* leftOuterJoin\n* rightOuterJoin</code></pre><p>Action<br>    * first<br>    * take</p>\n","site":{"data":{}},"excerpt":"","more":"<p> RDD算子合集<br>  transform</p>\n<pre><code>* map\n* flatMap\n* filter\n* distinct\n* union\n* intersection\n* substract\n* cartesian\n* maptoPair\n* flatMapToPair\n* combineByKey\n* reduceByKey\n* foldByKey\n* sortByKey\n* groupByKey\n* cogroup\n* substractByKey\n* join\n* fullOuterJoin\n* leftOuterJoin\n* rightOuterJoin</code></pre><p>Action<br>    * first<br>    * take</p>"},{"_content":" ---\n title:  spark-windows函数\n date: 2020-7-20\n tags: [spark,window]\n ---\n spark windows函数\n\n <!--more-->\n\n# spark-windows函数\n","source":"_posts/王阁/技术/hexo/spark/算子/Spark-Windos函数.md","raw":" ---\n title:  spark-windows函数\n date: 2020-7-20\n tags: [spark,window]\n ---\n spark windows函数\n\n <!--more-->\n\n# spark-windows函数\n","slug":"王阁/技术/hexo/spark/算子/Spark-Windos函数","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/hexo/spark/算子/Spark-Windos函数","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiw008pu6pwbb4i4o6g","content":"<hr>\n<p> title:  spark-windows函数<br> date: 2020-7-20<br> tags: [spark,window]</p>\n<hr>\n<p> spark windows函数</p>\n <a id=\"more\"></a>\n\n<h1 id=\"spark-windows函数\"><a href=\"#spark-windows函数\" class=\"headerlink\" title=\"spark-windows函数\"></a>spark-windows函数</h1>","site":{"data":{}},"excerpt":"<hr>\n<p> title:  spark-windows函数<br> date: 2020-7-20<br> tags: [spark,window]</p>\n<hr>\n<p> spark windows函数</p>","more":"<h1 id=\"spark-windows函数\"><a href=\"#spark-windows函数\" class=\"headerlink\" title=\"spark-windows函数\"></a>spark-windows函数</h1>"},{"_content":"# Atlas切换搜索组件\n\n```\natlas更换搜索引擎，方便了解基结构\n```\n\n","source":"_posts/王阁/工作/旸谷数据中心/基础/元数据/Atlas切换搜索组件.md","raw":"# Atlas切换搜索组件\n\n```\natlas更换搜索引擎，方便了解基结构\n```\n\n","slug":"王阁/工作/旸谷数据中心/基础/元数据/Atlas切换搜索组件","published":1,"date":"2022-03-28T02:57:34.678Z","updated":"2022-03-28T07:19:54.410Z","title":"王阁/工作/旸谷数据中心/基础/元数据/Atlas切换搜索组件","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsix008qu6pwhj2iclgj","content":"<h1 id=\"Atlas切换搜索组件\"><a href=\"#Atlas切换搜索组件\" class=\"headerlink\" title=\"Atlas切换搜索组件\"></a>Atlas切换搜索组件</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">atlas更换搜索引擎，方便了解基结构</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Atlas切换搜索组件\"><a href=\"#Atlas切换搜索组件\" class=\"headerlink\" title=\"Atlas切换搜索组件\"></a>Atlas切换搜索组件</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">atlas更换搜索引擎，方便了解基结构</span><br></pre></td></tr></table></figure>\n\n"},{"title":"flink学习历程","date":"2023-02-22T13:04:39.694Z","password":"7FKBKZrTTTPG2LnC","_content":"\n记录flink的学习历程，1、是加强记忆 2、是做为资料留存 3、 为其它初学者提供帮助\n\n <!--more-->\n\n# flink 学习历程\n\n## 1、背景\n\nflink 发展势头凶猛，应用场景广，之前学习过flink，但都浅尝则止，这次系统性学习一下flink，并应用。\n\n## 2、 学习路线\n\n回顾我的学习的心路历程，学习flink，我先是学习资料的收集，制定学习路线。从自身时间和效率上来考虑，我选择了看书+看源码+和示例demo的方式。\n\n学习资源我使用了\n\n1. flink实战派\n2. flink超神文档\n3. 剑指大数据-Flink学习精要(java版)\n\n源码这边储备了一些相关项目的源码，但总的来说效果不好，这里就不列出了。\n\n文中会在相应的模块中附一些我自己的源码，不足之处，大佬们指正。\n\n然后用到的一些工具和相关环境\n\n编程语言：\n\n1. java8\n2. python3\n\n用到的组件与版本\n\n1. flink1.12.4\n\n2. cdh6.3.2等相关组件\n\n3. ... \n\n   其它工具\n\n   1. iterm\n   2. chatgpt（用来直接一对一搜索demo和一些问题解决，比较高效，但使用中也出现了一些问题，后可以附一篇chatgpt的使用心得）\n\n   ---\n\n   ### 内容大框\n\n   1. flink 执行环境\n   2. flink 运行模式\n   3. flink source \n   4. flink transformation (basic api )\n   5. flink time and window\n   6. flink process function\n   7. flink 多流转换\n   8. flink 状态编程\n   9. flink 容错机制\n\n   \n\n   ---\n\n   后续待学习的还有\n\n   1. flink table and sql\n   2. flink 运维\n   3. flink cep\n   4. flink cdc\n\n   等\n\n   ---\n\n   ### 2.2 flink程序的基础结构\n\n   一个普通的flink程序基本上会由\n\n   1. 获取执行环境 (execution environment)\n   2. 读取数据源 (source)\n   3. 定义基于数据的转换操作 (transformation)\n   4. 定义计算结果的输出位置 (sink)\n   5. 触发程序执行 (execute)\n\n   等结构组成\n\n   本文也会先以这些为主体脉络来行文\n\n   \n\n   \n\n   ##  3、 flink 执行环境\n\n   ### 3.1 获取环境\n\n   flink运行环境主要有三种,创建运行环境的方法主要有三种静态方法，代表不同的含义\n\n   1. **getExecutionEnvironment**\n\n      1. 这种方式好处就是它是“智能”的检测现在的运行模式，自动按相应模式来执行程序\n\n      ```java\n      StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n      ```\n\n      \n\n   2. **createLocalEnvironment**\n\n      1. 返回一个本地环境，可以在调用时传入一个参数，指定默认的并行度；如果不传入，则默认的并行度就是本地的cpu核心数。\n\n         ```\n         StreamExecutionEnvironment localEnv = StreamExecutionEnvironment.createLocalEnvironment();\n         ```\n\n         \n\n   3. **createRemoteEnvironment**\n\n      1. 这个方法返回集群执行环境。需要在调用时指定 JobManager 的主机名和端口号，并指定 要在集群中运行的 Jar 包。\n\n         ```\n         StreamExecutionEnvironment remoteEnv = StreamExecutionEnvironment\n                .createRemoteEnvironment(\n         \"jm-host\", // JobManager 主机名\n         port, // JobManager 进程端口号 \"path/jarFile.jar\" // 提交给 JobManager 的 JAR 包\n         );\n         ```\n\n         ### 3.2 执行模式\n\n         分为批处理和流处理环境\n\n         ```\n         // 批处理环境\n         ExecutionEnvironment batchEnv = ExecutionEnvironment.getExecutionEnvironment(); // 流处理环境\n         StreamExecutionEnvironment                        env                        =\n         StreamExecutionEnvironment.getExecutionEnvironment();\n         ```\n\n         批处理场景现在很少。另外从flink1.12开始，不用在代码中特别指出执行模式。\n\n         可以在运行时，通过参数控制。 可以支持不同的“执行模式”(execution mode)，通过这一设置从而就可以让一段Flink在流处理和批处理之间切换。\n\n         1. console command\n\n         ```\n         bin/flink run -Dexecution.runtime-mode=BATCH ...\n         ```\n\n         2. code config\n\n         ```\n         StreamExecutionEnvironment                        env                        =\n         StreamExecutionEnvironment.getExecutionEnvironment();\n         env.setRuntimeMode(RuntimeExecutionMode.BATCH);\n         ```\n\n         ### 3.3 触发程序执行\n\n         之前学习spark时一样，即程序提交后，内部相关程序会进行解析，执行，形成相应的任务执行链\n\n         但相关函数与算子并未执行，只有数据进入后，事件趋动执行，但程序要先执行起来。\n\n         ```\n         env.execute();\n         ```\n\n         \n\n         \n\n         \n\n         \n\n         ## 4、Flink Source算子\n\n         [Flink source ](./FlinkSource.md)\n         \n         \n         \n         ## 5、Flink Basic API\n         \n         1. [flink trasnsform](./flink_transform.md)\n         2. [flink_time_window](./Flink_Time_Window.md)\n         \n         2. [flink process function](./Flink_Process_Function.md)\n         \n         \n         \n         ## 6、Flink多流转换\n         \n         \n         \n         \n         \n         \n         \n         \n         \n         \n         \n         \n   \n   \n   \n   \n   \n   \n","source":"_posts/王阁/技术/大数据/flink/2023/Flink学习历程.md","raw":"title:  flink学习历程\ndate:  2023年 2月22日\ntags: []\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n记录flink的学习历程，1、是加强记忆 2、是做为资料留存 3、 为其它初学者提供帮助\n\n <!--more-->\n\n# flink 学习历程\n\n## 1、背景\n\nflink 发展势头凶猛，应用场景广，之前学习过flink，但都浅尝则止，这次系统性学习一下flink，并应用。\n\n## 2、 学习路线\n\n回顾我的学习的心路历程，学习flink，我先是学习资料的收集，制定学习路线。从自身时间和效率上来考虑，我选择了看书+看源码+和示例demo的方式。\n\n学习资源我使用了\n\n1. flink实战派\n2. flink超神文档\n3. 剑指大数据-Flink学习精要(java版)\n\n源码这边储备了一些相关项目的源码，但总的来说效果不好，这里就不列出了。\n\n文中会在相应的模块中附一些我自己的源码，不足之处，大佬们指正。\n\n然后用到的一些工具和相关环境\n\n编程语言：\n\n1. java8\n2. python3\n\n用到的组件与版本\n\n1. flink1.12.4\n\n2. cdh6.3.2等相关组件\n\n3. ... \n\n   其它工具\n\n   1. iterm\n   2. chatgpt（用来直接一对一搜索demo和一些问题解决，比较高效，但使用中也出现了一些问题，后可以附一篇chatgpt的使用心得）\n\n   ---\n\n   ### 内容大框\n\n   1. flink 执行环境\n   2. flink 运行模式\n   3. flink source \n   4. flink transformation (basic api )\n   5. flink time and window\n   6. flink process function\n   7. flink 多流转换\n   8. flink 状态编程\n   9. flink 容错机制\n\n   \n\n   ---\n\n   后续待学习的还有\n\n   1. flink table and sql\n   2. flink 运维\n   3. flink cep\n   4. flink cdc\n\n   等\n\n   ---\n\n   ### 2.2 flink程序的基础结构\n\n   一个普通的flink程序基本上会由\n\n   1. 获取执行环境 (execution environment)\n   2. 读取数据源 (source)\n   3. 定义基于数据的转换操作 (transformation)\n   4. 定义计算结果的输出位置 (sink)\n   5. 触发程序执行 (execute)\n\n   等结构组成\n\n   本文也会先以这些为主体脉络来行文\n\n   \n\n   \n\n   ##  3、 flink 执行环境\n\n   ### 3.1 获取环境\n\n   flink运行环境主要有三种,创建运行环境的方法主要有三种静态方法，代表不同的含义\n\n   1. **getExecutionEnvironment**\n\n      1. 这种方式好处就是它是“智能”的检测现在的运行模式，自动按相应模式来执行程序\n\n      ```java\n      StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n      ```\n\n      \n\n   2. **createLocalEnvironment**\n\n      1. 返回一个本地环境，可以在调用时传入一个参数，指定默认的并行度；如果不传入，则默认的并行度就是本地的cpu核心数。\n\n         ```\n         StreamExecutionEnvironment localEnv = StreamExecutionEnvironment.createLocalEnvironment();\n         ```\n\n         \n\n   3. **createRemoteEnvironment**\n\n      1. 这个方法返回集群执行环境。需要在调用时指定 JobManager 的主机名和端口号，并指定 要在集群中运行的 Jar 包。\n\n         ```\n         StreamExecutionEnvironment remoteEnv = StreamExecutionEnvironment\n                .createRemoteEnvironment(\n         \"jm-host\", // JobManager 主机名\n         port, // JobManager 进程端口号 \"path/jarFile.jar\" // 提交给 JobManager 的 JAR 包\n         );\n         ```\n\n         ### 3.2 执行模式\n\n         分为批处理和流处理环境\n\n         ```\n         // 批处理环境\n         ExecutionEnvironment batchEnv = ExecutionEnvironment.getExecutionEnvironment(); // 流处理环境\n         StreamExecutionEnvironment                        env                        =\n         StreamExecutionEnvironment.getExecutionEnvironment();\n         ```\n\n         批处理场景现在很少。另外从flink1.12开始，不用在代码中特别指出执行模式。\n\n         可以在运行时，通过参数控制。 可以支持不同的“执行模式”(execution mode)，通过这一设置从而就可以让一段Flink在流处理和批处理之间切换。\n\n         1. console command\n\n         ```\n         bin/flink run -Dexecution.runtime-mode=BATCH ...\n         ```\n\n         2. code config\n\n         ```\n         StreamExecutionEnvironment                        env                        =\n         StreamExecutionEnvironment.getExecutionEnvironment();\n         env.setRuntimeMode(RuntimeExecutionMode.BATCH);\n         ```\n\n         ### 3.3 触发程序执行\n\n         之前学习spark时一样，即程序提交后，内部相关程序会进行解析，执行，形成相应的任务执行链\n\n         但相关函数与算子并未执行，只有数据进入后，事件趋动执行，但程序要先执行起来。\n\n         ```\n         env.execute();\n         ```\n\n         \n\n         \n\n         \n\n         \n\n         ## 4、Flink Source算子\n\n         [Flink source ](./FlinkSource.md)\n         \n         \n         \n         ## 5、Flink Basic API\n         \n         1. [flink trasnsform](./flink_transform.md)\n         2. [flink_time_window](./Flink_Time_Window.md)\n         \n         2. [flink process function](./Flink_Process_Function.md)\n         \n         \n         \n         ## 6、Flink多流转换\n         \n         \n         \n         \n         \n         \n         \n         \n         \n         \n         \n         \n   \n   \n   \n   \n   \n   \n","slug":"王阁/技术/大数据/flink/2023/Flink学习历程","published":1,"updated":"2023-03-01T01:30:18.910Z","_id":"clegiqsix008tu6pwgazcgdxi","comments":1,"layout":"post","photos":[],"link":"","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"010a6371083240e7a07810f81f3851fea3cd5e08731f32089c256d88a00b7b95\">07015f94eda6b12e378777ece47194641000cb8eb13c136e89c322416f5844ebd5f45225ce8d36ac84975e3a76a6db939a2f35d61937e8c13565bedd273b58fc8d1fc474b646c70f8ac988c1c18b11923406666cd890b48cbe699b2d0573283b37a123a68e88e8e39ddc919e0975107afa847cac4c3e639e1343563c9438a49dd8c74499e51599178c31a9be1836d98c76af7c5a4a80eec33f62c98a6b5e234538e4e40d4223e654f3a11479887a3fd90d701a6bd1c228d1d0302a7854a78a4dd01c1e791cabe253c1e03c0b92c052df7b159eec1ef30af34ae67e69d143edd556ba90f3a660a1537ff4f4ec6a15e8a15d92baa6c54171fd5ea7f8e122f78bb51cb3411b3eb47df4342a35d27ac4e4c480baae600e778b87c76d6811dfa246a5f32d5cd557ee228b427780bf30bd4c6003f2e7a2b50e37c31dc0d789fa92de1609595a1a92c6b7ad167932307b5551d4fdc8d413cf5ce306a9557d58f7ae6ad5d95e51494e307e849d703deb4c90d2b1c581db9259921970052c6c2b75c058275dd258a1623b06038219a8c6e222550a8bc2f4ecf3b430297e7fb9ef483edfba416477162087700e634ff9d71df5afb5f0c9e849aefbd285049973496e391e8cfdb03c8e4efdfad7601aa42cd95e5cb372ffdad3db5bf253b48297035848c682d887900441b5eb42b0573776da69a0b4225306ce0a25b1d73ebfb7e7025a878111869d88b3ada320a2eb6e98a713635ddc9faf8d254c8da93ea459c69bc27e61ab430bd5c57b446ce50f4195dcd4d504695e7f406d86238cb2ac3d07e7e6dd809dc410271d3cf1fb03817d604b2f375d17414b1742d32d849071fc3ee3bbd61462ef5ff29784d90ad5d05c859de66acff8375ce36b26c1533c7c33499bfee283934ff80ccaeac8d3c95929cdc8ff56b7347c1ac28ff2498ffb1f9bdd75c4910bec00669fa5967eb09164a997ededff4941037d3d4a0ed0d1b5a770b5a1b5f5620a7d6c1a1e5fc5fd3719f08ea49609f0366630b1234921c00516883a3030954deb9118ea152d03a844ee41b2eb2eb493ae9810b78c6bbc192c73e0d74354ce66643e3c24594460ac13e095775edd7f4c66aed8cc3b0479fb900bd5048e16f5d850e285e94399ea54eea67130d81466d626c534c3def6b6ad841e5f9268f337a9a091a072bb2c67a49f7d5f4f3658b95b8d2012f4661847c5ee15f8b686d77ce6f434bd8f5a5932c6276ca8edd71ab81bca59a36ec3197ba7244d50e8e1e87fcfa03cc296554dffe7b97d3848299772e86c8a46663143f0734d1fa74bdadb13d7fa1586b78a048b8a57691d0381f057fcfba715614c8d9daea796be00386f631b2ed371d42365cfeb4b8995ff60b0e6e71b9fbb397a71a9e656239b3ade256fd04f069a8c1549bb7f9724245fc0c41682fbf8f2ea9e4e340c0f6e5a19e9c6ee74a6b5a4d0b58e0a057a387c22b820d60453454ca083e346d1e40e6728b36d8bc3b8dac41a571680e54cd3b68eeba2be8a56ba3cf9275b745a707e1a2840d6ddf26e893fcef1f8e660ef407d3afcba9f18eaa7f6918d23828a329612eba547b93bd9cae8229dcae52511bb61d5e09802c32dfc6f6cb33e9d3c9281ac4604f5611cdc2115454d01fffd9bd61e0a45f87d0333a6c3c189b40d79153a2abc436764b5d4f2dae26e22de5aa8403061bd75e2657fb5085cb9ae17ecb504e6927a399cfefb7cdf502dfaa0fe0e189f29932b61c0f181d5aafb91c336fafd8d2b2aee136402d6cfc8a9f667cd50398a06b25ed8bcae995c0dcee23cc0fe8dd267ce539a401c30dfe45eb5f27a8f96a0bcaca7c801f519953143ace4a4ed388292e6e0ec65f8da111d8b53b9b6fb27547117eedfab2c69e4482c53aa4f28e9843d132df3a24be783d2c89b5f98fe067485d1d0265bed22687efb581aefdec9ad1c8f7062711a309dd66325ebcb200b53b0fe8085c4426171c9b57f0cfab5592dbd153880976bd7ebc141430ee58a132f6ba9d0d1477bc497410110e0b4919e31895b3a45a87dba3101baf76a80301d89358b9917e289b151149b5f1be65b58cdfefac3584b8064ce6a3b56453a3eee6c64ac1bcecffb56879b4c457db08f0d300c8e1507ded467099b37a31f4687919dbe0d1d667bace12d9a1619db45a055666529d8e240af7fc4a5063341cb75939014320e6f6398bc92879b12f692fd32276c147a6e89db508a9975a8b5a80093c35f150371ef6e48bdcbb51fcbca90d1ce880bbedda70389a78a61d3dbe6f7dbc8edcb5572d599ad5d20e02dcad6a358622e3582870b4fbe3942dfce75aa5fc981a9b9b5d341687c8d053f8656fb042b5a2cfa5c756dea2f68713e70cb4701af1e7766a62eaacd9a189deeb92582baf4557c0f8e3d14802284e9c2ebe1744c8b76eb39089ace6de476db80f86632b95999d430ced3923e1deb63abf48170436ae1da7e3c2d06bf1cc48a74d8d87d3f89ce5d3b9488b2cd08c18e3141e83c1297e6901b33789f11b9ff4aa4cef5b790428535e6173ea33bee3685725dd9a2618fcac8f9a16bd81bb56134f8c2ccb4efdc06b03435e7f7ad9ff619a11de699f7e7c28441577729cfa2dd9da0c2b69157828945b5f4f3e456389296ad8dfcda9dba48ef7e0c235e5a72ea830b9f163895fc03810736608dd900264408cf50971960a5785933c3d4b2aa1332eca2637ccaadbb23cae3dc581bceb65dbaa828345a0fc1e4903b29985f36c03d942866acb788102e3c8e7be983e99b5569eb0162d186d92672a3661fc4023c538b80add4ebda5b833906e643b5d8891ee0597cb0848be39344516137b47922a4c2073c09afc93588b30377862ab8a499c9fccc2e8ff4e8c5f40b06a9be630ab8a7b9cff73c7c304fc8c8360f6d857ba4e672c2682cdbd26164cacf46cd83e2c3a3ccd781b7b56521d2d142a08e158192d0665676e0d0ddf619b943b6e50464fdee1319d49a95d71942a51401de39f7831308427d0caee9341e8d96f2f13fcb919261747d0efaa5a2583397e6378859af5f19932b4e830081ed512b5d58d7f4e162ad79fe32f9a0223fe3bc0d51e5ac067f10c2a6f68d3add40a234f4e06a84baf9228fbb58caafca1cfc9b7dd02a267c5d8e75f4a62e0eba7f4a82e432669721efaa895025914e3c78e47e75477f7801a8648f2e09f18974cb1cec87d60d0e3e4d1d9f22f7d9fac7aab74baf6efc71044699fa7cd3dec1c5776c50f32bdb9dc6f63062e7a65fa5e2003a746e51bc1ce539d980fb9d10f1f5bde6fd7df68ff78087c844735f671bc0fcdbc0318bd0177b575f8fd7d8032361cf0387f22cb8fae1dcffc5f5e80cbf6c4a149cbdb58066a2167008e03a5f822c8a8b514a55202983d176a76522d17421b06d97817bf1df48d22df869a7fca3159b06f75ddb8bfed06d7f388b31d15672905a0209d4a0f711a4ca682a57ef317c60e03910c8df4debf117dda4327cee27cdf90b484b69daf57b926d37211a7d31c144ce7315e69acb4dc7aeb12c208cbb120ba3613eda0ee400ebad2ee128b79521d6713a743117f9f400899f5f6728b220efed9c6a7679c62c705dbb928e9226b8fd61c688382cb381a3c909606bb454b7d6861015235f219356ad681b29f696571b010e1519f1ec52244f9e7c6029205a09965e378413bd1d134c2b43607deb78d72a259a97e92e3c87ded038433733c2008378f9f64a18dd1068cda42450db7e8ed87f742c878b50540e120921718f4dfaa46a52fad12e041f36edeeacd0f275beddf99a35d3073a08f7bc4edb950a9e4e9227ac00d502d10433acc303dba2e80d365181268ee3c6fd577b4d5df531dda07a0fd4916d8290a34e5b0d89d1f2e787b5b8bbcbae3a6c8e06cb285259674379dc8d0a3c5cf6397df66f9461a5e7e593da3173edcf1b2cbe909aa01f3b167b4b4c2c89120d4aaf66be46f005cf7b2dc943f9b48a033b246e727d9bb812696ce7b868f8cc3eaf2e2ecb50dd8eb3ed538cbe8bfcc86e9b9e44caa5256f4bacc377ec9c003ec1598d65980520c453b9534531869ee91c46b2f1b13e1e96f26b4dabfc4a5820b68ef387215f3d210609225fbd7f1d61210cfa558c0e106f5dfe885e821557bcb1d91a276e359318a9e796ece81e4e360d9ff5d7bc5752e8dcfc82207bfc8eea81c6b95d6baf83b4824f588f3ed43a000fd928777eeb1802bf7c2b39289c585e7db4190efead6983943a545f6db3f87c3e7a4af8ec26eb4c812d216b80c570c4126d95dc06bee4fd810fd741d104f178453aaa076fd32092d95971573c6be575e2d81f8eb01b01632ec0463e25e7aaaaf86ad968c7177b8e9fb4224e25e84c3d476e52c318cf3e733f7c9e7b88a3ce066a60ca8832800c11ea9cd04c49d9ff2af65b5132a27590a47bd35b4846efe8d5376f953f646f37e0762b76bae72e39dfffc1b6e5fa18c125cd84de17a5efcea8e2738b847664916076a810db375d03c5b729e4337585ef6fdcd5e4af09c70bc34e8ffe3a80994a85d00fcb8ebf33552ad324261d7072520daf7865a9bedf2c4c02a32368ad7ca2053da51e914e3f9b5f5edf6fb85c97ecd2052c99cd81227784c49252b140e7759d1358fd51a5d30055e683017ba7347cc6c5914fbf9fb902db0f71cc9ec3c77db5b2921bbf43024a81c11a4a8bedde88866a1ef43fcb8d698d017687db7582fa0e8aed5ed01a07cf4bb684df504c867c8a6593ad1895d7c817c24ea068d5d51b38f5ac741839fea60438d0c7112ed3e5caf1e7ee352709a1149a990846d0d0bf798f780cff694ab4549a9e73b7175c4b03fb6e39e3cdc7e9db73207dcdeae68af1e64b70363d68382d2c57c4d81bb9c279f3e5c221d37dc6d8512d2c86364d96786bf7662fad0b66e38d31a2d0af96657fca79c9030004910419be2a368b968d91ab79dbe8b462b9c70519728d3e7d892e90ce3a70575f3a8b2668005c470c8792a913ce474c46d2056553dacf7efda17baf0b727ae1d02f65e44c2b135a3ed56e18863998611c247f1b8c3e6e84aa422d786600fd4ad1878e0a294671b33000189e6cb628424070c45a993b8941de495e2032d890f8a77676f16e0b8a9c59d42fcb0fae4a4081bd284907d10dd0d7315c44ed11712e4df83a12edc19c8d1785cb11f6cd8988e9ebd0dec0bd2c73d65d40c4af4c167e7aa4b759042f393cb799853b82f99ac0caae5bc6dae6777c165a8e7f26e1b3ebcafb801832a9da731f0b9d55e55a81ccda3197e885d6ad1b3a1e2de1ea0ad54eee51632fedb951f4e82ed3ae456818131b7ba3d90c1138e6081e4838849acfcf87e227249ecf4ca2357808897f021f8b73d0ccb259d812e74800fc3597a900fae32ad82840c99b55be37333ed6b7ff1d0fbd76205e0aa1207ce74898837d0ea2b6503a2d6545b0e429de97484fddf3afdaff128294500a526fab7efb4e39a27b71f99deaafbece33379716d1c44ced6cf43177ee644c7a7eba9c306cb31bcb818c254b5ea9d3de1694d47f17166ae7b0f92d1e796b8cd7a2325abe02c2392dd034b24c8d182a1be17afa81374a26fae7165d37af6d525e41ab24fefe2f31d7f2bd300e464a557845662a26480fb2565ac15aa45cecb6d8e9c045af771d8f1b047a5a8cb92b9500b7d08e044f1f38dacf973e69103066fcd1371e9fab6dd028afd214125877b88b8af2c2a978268b721c34eeb39efe99aab19f6416eed15f58ea74b0849919f880200399c02cddcdc65e88787f846f6de0ac6b37b346f1c4522074a5cdacacdf427295997c3a840328c5360aec05931cc85ffedc58988bc9fbbc81f4eb8173a2499a77a01b4b099a0d652769a9963b1ed660b73f40e9d1a28bda64204e03039271795b44b72797af7f17e3a6a80a90246ed68e1a916e3806711c1a87948497d552a2a410cde8257e89867f3ce6f8eeb2af2e2bb6a3596a003cde50eb7d0e3ab737dc7c4ffdf44aa588a45f1aae58cb4e0bdc5d96afa1d3c23a93cde8525c3680d8bcf09519c972f3508ef291e98d87a9de5b70aebe91153edaaaa44901b3e36543bd21a00e68239c8bcd10e859852b0697db20c7776a7954900bd3beaa56e8ca6597469f6306e2e0473f19a5f5843131ed15d598a9ffd6d598aaef6e7a0d4775e4dacaac498abfba50ba85c5c297b3d60fbfeefd06e45529e7630a1ae75c372190b0717d7ac1fe726d30d9d807ce7af9e27670b55b5490a0407c4da0a07cca0bd02568968958dbb3c369a1a3be94bc3bdc96a0100e13d4c4fb0b322851f06c577ca563330c0064ff9560a253031a9893b502ddb4554219268b899d77fb992c92f0719d4e22ad0478cb13e8a40aa9d0043ad79d430a7784578a03b56be07a16f5fc0385e5803b41179e76ade33c22f063e2b68c0c0c4c74b87b8f7ecf6175e884f7ecfd88bc815513967110c2176de7ea86ea375bdf5eb1a1cf008abbe63c30d22f2721109c86fbcbf2eb5fa49ef04093c569bb0df587ae216e2f04c5ec17b7575de4538393f5d9cb676200230c8c6cfe428c00b06dc2f2d468973e14406a408948c8c573c18231b6608050ce478afabf1383343c076d718bcbbd99122755957c150b6c1f19de5f042d10db87611ee0f5207b7a4cbd7c46fb13ab3eee7962e493b318c66d1f9f5e28646f223e743301379e22db3c75d5ad935cf749ef30117204b74d1ce885d12e28422da594cc32f351de79a620335394052e8881883e7a4efa2ecbacdd60307fb8778644d04c55c4b6de0deecaff01acdcf1684f28296c05a7a4d6455295d42875c3e1718ad1d104b5ded394c59e2d61178502be443e9aa7a83b3885562cd604b1914821c2a847a4c5f1909178defba0a29a61a588f14c011ab91c687802dff25515e3271dec7586701e6d0e69e52aa7e39d1651bc1af50e51232eff19f28571e78c4180a7874079a341e22bd6000618a70f197617184455a1fd795d9296692096f5df521ea1a5b9b24ddcfc8943c8bb0bc3e4ef660a2d605a2170b8ff3d17bb622352ef067b0e9e6f2af2ee1afb98077b18b5aa08c346cc356e324dba24ae61c4b22dc0a7c108d87be8d72bf3b8585b08997568c255af0941b435e551e5e345593e02a160cf92e3b65c8d52462507f83139bed21c064777bf021dbfe6fbbac9abad7011a81e5db9aeee24baceeb58fe433151e459fc9a14c3177d366e1d39d69a6b077c4ec902a1ead38d2e18aaaf35a7392e93f05cdbe5e07d2a3520b36572bf95498b86c577812f445ff1c38ef01fd705c696000231245a9792c2c1edc7fbc8e98c8754e6da427f0572038193bfc4b4f57121e0babfd5bc0fd7f58c5d80f77ca6ffdf709b71723ca55fcdab9b32b24584f7ab471de17a525d0bacfa506782b1663f45cd865a9eef87141ec9f084c6e96a2332f1e3a55a9b7b10b6fd47113df27eef44576d28e9774402da392ac7a7c2227e62e4b4d2447382d10edfa8f0095092a4c30b7df0c8d216eecc0d8cf80f7bc5bbeafddffd85cab6d5a91e59c700c5d453e2b433544ebe12bed54b152bc6e28278871140ec1464e6411c31a50dc8be8c8e0e01c3116d97a527ff0673265ffa99c7b5b582a682fd04b69ef9abb40540c4582ccf5b2402b968224811002b6bd6f6ec51e0fe10d4bca8c78018368e01052425890e9c652e4d26c052becd36598ff5f725d534aae93f2e1673650ce6e1174c6fc391a5359170ac97c516eacdd2695f1c3c103fa02987bc63165900a9cdba4da255feb4f9360d1a806855d60df2da3045f6012127f40b7f106a5a6af8c747b8038e8cf046e7abff92049fdb4fd30a860f50bec03f4814a3c7b9e6bffe3f6917c35dfcb83a3adea14e0ac05dbf1ce7a76222d80b23a18b53573a2f51c2a79e0a8de5d28f685b7ad64f497770ba809df4e59de1302d2f54905f7e0adc6ececad16f07e5371a37684187d5e466d23dcaa1e4d3d7747eb7b642228b49ce07fadb4a5d9019e0e4ed183f5fed19005a75a059c55547b8ce7b6def55272e0504176337f6781ba25a4e3c3d219b17179636777d19221ccfe0fbb6365931580ff19ea2702d2b293cfd1d6f03830511be979e442c0ea88cf70a651927951563a1102dcdf2ad938f2a9338d0f194d678aec483077dd2e1af463a08361b5df04758744499b5118e435c01776bdf453afa47d50c94598dd3fdf42b4de6259548c5e57f90dca69eecd430809a9f1c471a6c67113dfa7ff44ea88cb12a340cb72fce418610ecd0ba1321d1befaf7f5fade3e5105de604147fd5e1d0569b6204fd9bab2d5e90c378081b4fb128def013a2afe66c7ef60f94431c9df1ab1921f0876625e2535217110d016a8916631e96d40c0fcc6d9f9b81619e3bd0f6b6bc6422a9bdff393a4cb19ec8701f4259f236ba32cc2eac352fdc0f5531eaef5ff3dfbe4061e358a4e1f4d61c66a7ed60344d8a84b879a60477c595df9d039d9fa2a16522c0ca4d39bb4e6b0f3dfac7a154936804d7e7c84685669b599abb64f1eeb10d937e63a117a2d62c67d4156e1088791879a78a501be423a3b0cec831084c43b4d5231fa429793ab486e7a9e580732e50fb4b872eaef6ad4fb2046ea3b72d0cb409336d23532e1517b807c9ae418e898d02c93a0c2089cce9d8212749bab73c08c983325afe61e9730de8d5c4a13b0479204780146269640e1bc8357f0a01fbb8d42ff5c5cb11937836004138e186181c0708767b3b466a80ed047afe2ed4a6b67c1cb455274642fdcc9e453a5224c8aa392d3465195b5f488d36b49b2ccdb8ff3409851539375e814790ea7ab31054669d39e28b900b64bca81a489aa88834e91bfa811fa815cae6d91c5165f3f537506d1e0d81f48a56fa2f945f6e540e5ea7d28cb0ff3c49bd87b727add864fc955c2653051d699e0347153a6ab400ade7c8fb8017b4015a0765662607f1894ec30a44c803879defc000f7955c53d8b8a8018fbe23e72b2256e6922f91dbf376874f27307958c70f896bb8e2e6c4f38dac9b643f4446200f3c16759ceaca135ff335f0c028b4e2ad40c9cf8aa2cc7a444fe1298c78cb15ccbde35aa7190c9979526cd12b58c27ec51f18fd828bbbde410adcfe55225850f320bd8619712f8a32e355dbcd5f195e994305ad6064dc7725080d61498efd04c95f59e72c070845717883dcedf200220f29dc8824e9f7f6faf879fe52950b4b33eaadb5dda5049f383834ad10e9b06ab07a3c21d4b909c5176ae4b4fa1b6fa827723b336db02d7c591eb4ff1087c58fd10a69c6210d7564cbdd384bab9e0604638a907c56473a0b67f0a817c474992c96c5ba64e5e536716d2dc80f8b08fa4765a498bdb037d21ba8d1260998f3135b0d43828f9c2a0ed30375314f069b720bf143b7a48a691c69b93eba7199ea0afcd68f81ea609ffe5d9ac0469b05533c91dda66a012e869abbd33cd7cd3180462eeba276e18febee45a682344d4d754ffefb3ba25f35a67c73b87bd3ce60b663b5b733cff51b81caefcd78700b3e2805331e15728efacfa87aa76fa8fe0974b0825fe48e1d83e9692e62ff0d54921b677ad7b4d44f5269a7218ece7201114f90817ff98a792642c48357dc65b361533255059e5330b08aa64e46153c32c40fedc33f14b733fdcbd4423fa2d6595c5923fd335b301ccd891315e8b39c71d8f4fef937c9da2f97b93c8fc7f8c65804d03f69ce78d7d6aa20bd7fcefa4c7dc4cf3f2b119eeab36d8920219ca1b275c6ba9413b76d866acca77d9d1a5ba88c948930a356c224f53cd52a268894df12b3fca90aa9729c2ff4a15ce798b8896e4dab48d07e238f73653cd926c02286ad0413d6dea2066300b322a559ecb9736500e57a34391417fd6158157d4415f754072459697f69068e62e2df18a206539e82cc49cda9b9ad24cf8bc0e87e0efee49ff4397a2635ced4451e7662b8941a21570a62220201219ce9fed444e8123a807d1dad2368adeebce0cb249932dc826b4c2be58a1d8daa295e18bf787e3f131f426f8956e59d8c5c6629cf6f6ae8f8d16d26470e21a603de4d1c04cb4f0feb76c7ca550f47cccbb9c10e090631e7e0808451ce1066c07db6de0624ffafa06cfd1a8f1c0e5ec1c34e5e1f8bc660ae9444c8676af778e9c0e3ce07a2b6838ab7ebc8056f4305b50b88520c2bfd4ab7a54e1cd4e0bd161c8c491994d1125cf2cdef1f5a881c03647b97e96e48f19f2b5fc541bf978c7beec0a0b0be520cead9211a506d99c8b93d27ad9f03cc63d1a0ce3261afeb19274b3c13969e51a262a3dc367e803cc3e9b324dcfdae971f4ec534452f15c1c66b916504b8a4e17eb1b88470cefc2c5b3530bbef178d6a906d45f1955279c356a623efbd26574b5010837cd25f97c5ecfd9a39eb9061bd0e6fd40a37ec212f661ca3bd6c087e7a1a3a46e185ca7b06417f9ea0d0257a4e22a808ffae654bb01350493af3a67860f1a90f3ca48c3ff76f0d23a34e1f34c78d762836bad4151a1b7b63ce07e0495ad778c87311bd5cba1eca840de7a5851a2d909c898e6c3a5b5d14fc101f514e182a2f76b917fe26329dc7d388f71ec188b480de714c3f560c7fb34bc3ce6b4a4b8a534df603aee12b99f9817f36646ff3bf67ecceb82966428b698e9aa18de84f591b9483e6baaa0c4c27cbd714a9f4ddd02b4f6cd7c39e3304abb0015daa0bd9f5941b9d63271ad8def5ec81e2f3b02f71b016183d7d23b494ff48d546e06d3ebe1d1c6134ca256ff387a4eebba947dab071c2966d434d4d26ff81577e50e4fcc0c479a4602e7a15a6eef8a1c84eca00d88209ec161c178f4db4a2b8e37f4d738563cb24faf379b08865dc4c125cba641f1bc879d384c3827fc21aacca0ce589fb327e6753863297e4f0dc0a4878b0ed52a8829fe2cd78d234fa8ff8f4e36534ea053a0e3a35dcd68ea514fcf921495c8ed1f7108b5fe235f5427d4ddf6ab74a2f304304e44c643f7db6a70b275da0c9c7dbd6b81902e8a6c143dd83c6b7fcb8d246466e6b82fadae5ba0657b7272c75ace8ee45a90d73ef31c4847379c476fa050806d8f43a4a4f383773ce245d772f425e4431c73b9f1dd4cc5527df989fba5ba3dc32da41e4d7999c4c97b7acc5ab90bfb88f61e60512a6c9aabbd06fcd0d2b2eeadd26d715a82a3873d85c2033b698956da025a4d180a5c1cf54806bede7a8efa5e8049c74b1937bb97f4b8181ccdc2fb0b98eae7e851c6c64b7179af23be62a127b1495fde6fe484ddf6118eabf5be47d7dfee37d2910618f0ff8b4a0310c76e983017e2e408a84cbc579dcf59262c64477cea890959e0558cf73474fe38d1c8b88058f0ba1b4062808b337d80d04d0bd121dba7713c5d8a1cbe44d7fd4fb938102b7ae274ae9c1997716af9a8797c140d27a994026636be54fdd9fafc6214f2f663bb79afa3652a39d8fab1c84eda021a34e80558651698881401df90f363f15ee9bc1dce22168c846de1a06a71c08de80f7ac0a458d5c4f459e4704360cba79b0f48015fd55cd7c5e6fd9747ea37c04fe82dc8fc5d709697e6</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":"<p>记录flink的学习历程，1、是加强记忆 2、是做为资料留存 3、 为其它初学者提供帮助</p>\n <a id=\"more\"></a>\n\n<h1 id=\"flink-学习历程\"><a href=\"#flink-学习历程\" class=\"headerlink\" title=\"flink 学习历程\"></a>flink 学习历程</h1><h2 id=\"1、背景\"><a href=\"#1、背景\" class=\"headerlink\" title=\"1、背景\"></a>1、背景</h2><p>flink 发展势头凶猛，应用场景广，之前学习过flink，但都浅尝则止，这次系统性学习一下flink，并应用。</p>\n<h2 id=\"2、-学习路线\"><a href=\"#2、-学习路线\" class=\"headerlink\" title=\"2、 学习路线\"></a>2、 学习路线</h2><p>回顾我的学习的心路历程，学习flink，我先是学习资料的收集，制定学习路线。从自身时间和效率上来考虑，我选择了看书+看源码+和示例demo的方式。</p>\n<p>学习资源我使用了</p>\n<ol>\n<li>flink实战派</li>\n<li>flink超神文档</li>\n<li>剑指大数据-Flink学习精要(java版)</li>\n</ol>\n<p>源码这边储备了一些相关项目的源码，但总的来说效果不好，这里就不列出了。</p>\n<p>文中会在相应的模块中附一些我自己的源码，不足之处，大佬们指正。</p>\n<p>然后用到的一些工具和相关环境</p>\n<p>编程语言：</p>\n<ol>\n<li>java8</li>\n<li>python3</li>\n</ol>\n<p>用到的组件与版本</p>\n<ol>\n<li><p>flink1.12.4</p>\n</li>\n<li><p>cdh6.3.2等相关组件</p>\n</li>\n<li><p>… </p>\n<p>其它工具</p>\n<ol>\n<li>iterm</li>\n<li>chatgpt（用来直接一对一搜索demo和一些问题解决，比较高效，但使用中也出现了一些问题，后可以附一篇chatgpt的使用心得）</li>\n</ol>\n<hr>\n<h3 id=\"内容大框\"><a href=\"#内容大框\" class=\"headerlink\" title=\"内容大框\"></a>内容大框</h3><ol>\n<li>flink 执行环境</li>\n<li>flink 运行模式</li>\n<li>flink source </li>\n<li>flink transformation (basic api )</li>\n<li>flink time and window</li>\n<li>flink process function</li>\n<li>flink 多流转换</li>\n<li>flink 状态编程</li>\n<li>flink 容错机制</li>\n</ol>\n</li>\n</ol>\n<hr>\n<p>   后续待学习的还有</p>\n<ol>\n<li><p>flink table and sql</p>\n</li>\n<li><p>flink 运维</p>\n</li>\n<li><p>flink cep</p>\n</li>\n<li><p>flink cdc</p>\n<p>等</p>\n</li>\n</ol>\n<hr>\n<h3 id=\"2-2-flink程序的基础结构\"><a href=\"#2-2-flink程序的基础结构\" class=\"headerlink\" title=\"2.2 flink程序的基础结构\"></a>2.2 flink程序的基础结构</h3><p>   一个普通的flink程序基本上会由</p>\n<ol>\n<li><p>获取执行环境 (execution environment)</p>\n</li>\n<li><p>读取数据源 (source)</p>\n</li>\n<li><p>定义基于数据的转换操作 (transformation)</p>\n</li>\n<li><p>定义计算结果的输出位置 (sink)</p>\n</li>\n<li><p>触发程序执行 (execute)</p>\n<p>等结构组成</p>\n<p>本文也会先以这些为主体脉络来行文</p>\n</li>\n</ol>\n<h2 id=\"3、-flink-执行环境\"><a href=\"#3、-flink-执行环境\" class=\"headerlink\" title=\"3、 flink 执行环境\"></a>3、 flink 执行环境</h2><h3 id=\"3-1-获取环境\"><a href=\"#3-1-获取环境\" class=\"headerlink\" title=\"3.1 获取环境\"></a>3.1 获取环境</h3><p>   flink运行环境主要有三种,创建运行环境的方法主要有三种静态方法，代表不同的含义</p>\n<ol>\n<li><p><strong>getExecutionEnvironment</strong></p>\n<ol>\n<li>这种方式好处就是它是“智能”的检测现在的运行模式，自动按相应模式来执行程序</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ol>\n<ol start=\"2\">\n<li><p><strong>createLocalEnvironment</strong></p>\n<ol>\n<li><p>返回一个本地环境，可以在调用时传入一个参数，指定默认的并行度；如果不传入，则默认的并行度就是本地的cpu核心数。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">StreamExecutionEnvironment localEnv &#x3D; StreamExecutionEnvironment.createLocalEnvironment();</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ol>\n</li>\n</ol>\n<ol start=\"3\">\n<li><p><strong>createRemoteEnvironment</strong></p>\n<ol>\n<li><p>这个方法返回集群执行环境。需要在调用时指定 JobManager 的主机名和端口号，并指定 要在集群中运行的 Jar 包。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">StreamExecutionEnvironment remoteEnv &#x3D; StreamExecutionEnvironment</span><br><span class=\"line\">       .createRemoteEnvironment(</span><br><span class=\"line\">&quot;jm-host&quot;, &#x2F;&#x2F; JobManager 主机名</span><br><span class=\"line\">port, &#x2F;&#x2F; JobManager 进程端口号 &quot;path&#x2F;jarFile.jar&quot; &#x2F;&#x2F; 提交给 JobManager 的 JAR 包</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2-执行模式\"><a href=\"#3-2-执行模式\" class=\"headerlink\" title=\"3.2 执行模式\"></a>3.2 执行模式</h3><p>分为批处理和流处理环境</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; 批处理环境</span><br><span class=\"line\">ExecutionEnvironment batchEnv &#x3D; ExecutionEnvironment.getExecutionEnvironment(); &#x2F;&#x2F; 流处理环境</span><br><span class=\"line\">StreamExecutionEnvironment                        env                        &#x3D;</span><br><span class=\"line\">StreamExecutionEnvironment.getExecutionEnvironment();</span><br></pre></td></tr></table></figure>\n\n<p>批处理场景现在很少。另外从flink1.12开始，不用在代码中特别指出执行模式。</p>\n<p>可以在运行时，通过参数控制。 可以支持不同的“执行模式”(execution mode)，通过这一设置从而就可以让一段Flink在流处理和批处理之间切换。</p>\n<ol>\n<li>console command</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin&#x2F;flink run -Dexecution.runtime-mode&#x3D;BATCH ...</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>code config</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">StreamExecutionEnvironment                        env                        &#x3D;</span><br><span class=\"line\">StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\">env.setRuntimeMode(RuntimeExecutionMode.BATCH);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-触发程序执行\"><a href=\"#3-3-触发程序执行\" class=\"headerlink\" title=\"3.3 触发程序执行\"></a>3.3 触发程序执行</h3><p>之前学习spark时一样，即程序提交后，内部相关程序会进行解析，执行，形成相应的任务执行链</p>\n<p>但相关函数与算子并未执行，只有数据进入后，事件趋动执行，但程序要先执行起来。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">env.execute();</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n</li>\n</ol>\n</li>\n</ol>\n<pre><code>## 4、Flink Source算子\n\n[Flink source ](./FlinkSource.md)\n\n\n\n## 5、Flink Basic API\n\n1. [flink trasnsform](./flink_transform.md)\n2. [flink_time_window](./Flink_Time_Window.md)\n\n2. [flink process function](./Flink_Process_Function.md)\n\n\n\n## 6、Flink多流转换</code></pre>","encrypt":true},{"_content":"```\n适合针对格式化文本操作\n\n```\n\n## 内置变量\n\n* FS(Field Separator)：输入字段分隔符， 默认为空白字符\n* OFS(Out of Field Separator)：输出字段分隔符， 默认为空白字符\n* RS(Record Separator)：输入记录分隔符(输入换行符)， 指定输入时的换行符\n* ORS(Output Record Separate)：输出记录分隔符（输出换行符），输出时用指定符号代替换行符\n* NF(Number for Field)：当前行的字段的个数(即当前行被分割成了几列)\n* NR(Number of Record)：行号，当前处理的文本行的行号。\n* FNR：各文件分别计数的行号\n* ARGC：命令行参数的个数\n* ARGV：数组，保存的是命令行所给定的各参数\n\nawk 其实相当是一门脚本语言,所以用法比较丰富.但一般来讲,一定程度的掌握就已经能满足我们日常使用了.至于是否需要更深入,则根据实际情况.\n\n\n\n常规:\n\nawk '{print $1 , $2}' file.txt\n输出file的1,2列\n\n`说明: awk 命令内容'' `\n\n## 过滤记录\n\nawk '$1>2 'file.txt\n\n\n$0\t 当前记录（这个变量中存放着整个行的内容）\n$1~$n\t 当前记录的第n个字段，字段间由FS分隔\nFS\t输入字段分隔符 默认是空格或Tab\nNF\t当前记录中的字段个数，就是有多少列\nNR\t已经读出的记录数，就是行号，从1开始，如果有多个文件话，这个值也是不断累加中。\nFNR\t当前记录数，与NR不同的是，这个值会是各个文件自己的行号\nRS\t输入的记录分隔符， 默认为换行符\nOFS\t输出字段分隔符， 默认也是空格\nORS\t输出的记录分隔符，默认为换行符\nFILENAME\t当前输入文件的名字\n\n\n### 指定分隔符\n awk  'BEGIN{FS=\":\"} {print $1,$3,$6}' /etc/passwd\n \n亦可用 awk -F \n指定多个分隔符\n\nawk -F '[;:]'\n\n### 字符串匹配\n\nawk '$6 ~ /FIN/ || NR==1 {print NR,$4,$5,$6}' OFS=\"\\t\" netstat.txt\n\nawk '$6 ~ /WAIT/ || NR==1 {print NR,$4,$5,$6}' OFS=\"\\t\" netstat.txt\n\n\nawk '/LISTEN/' netstat.txt\nawk '$6 ~ /FIN|TIME/ || NR==1 {print NR,$4,$5,$6}' OFS=\"\\t\" netstat.txt\n\nawk '$6 !~ /WAIT/ || NR==1 {print NR,$4,$5,$6}' OFS=\"\\t\" netstat.txt\n\n#### if else \n\nawk 'NR!=1{if($6 ~ /TIME|ESTABLISHED/) print > \"1.txt\";\nelse if($6 ~ /LISTEN/) print > \"2.txt\";\nelse print > \"3.txt\" }' netstat.txt\n \n\n\n### 脚本\n\n","source":"_posts/王阁/技术/编程/bash/awk/awk.md","raw":"```\n适合针对格式化文本操作\n\n```\n\n## 内置变量\n\n* FS(Field Separator)：输入字段分隔符， 默认为空白字符\n* OFS(Out of Field Separator)：输出字段分隔符， 默认为空白字符\n* RS(Record Separator)：输入记录分隔符(输入换行符)， 指定输入时的换行符\n* ORS(Output Record Separate)：输出记录分隔符（输出换行符），输出时用指定符号代替换行符\n* NF(Number for Field)：当前行的字段的个数(即当前行被分割成了几列)\n* NR(Number of Record)：行号，当前处理的文本行的行号。\n* FNR：各文件分别计数的行号\n* ARGC：命令行参数的个数\n* ARGV：数组，保存的是命令行所给定的各参数\n\nawk 其实相当是一门脚本语言,所以用法比较丰富.但一般来讲,一定程度的掌握就已经能满足我们日常使用了.至于是否需要更深入,则根据实际情况.\n\n\n\n常规:\n\nawk '{print $1 , $2}' file.txt\n输出file的1,2列\n\n`说明: awk 命令内容'' `\n\n## 过滤记录\n\nawk '$1>2 'file.txt\n\n\n$0\t 当前记录（这个变量中存放着整个行的内容）\n$1~$n\t 当前记录的第n个字段，字段间由FS分隔\nFS\t输入字段分隔符 默认是空格或Tab\nNF\t当前记录中的字段个数，就是有多少列\nNR\t已经读出的记录数，就是行号，从1开始，如果有多个文件话，这个值也是不断累加中。\nFNR\t当前记录数，与NR不同的是，这个值会是各个文件自己的行号\nRS\t输入的记录分隔符， 默认为换行符\nOFS\t输出字段分隔符， 默认也是空格\nORS\t输出的记录分隔符，默认为换行符\nFILENAME\t当前输入文件的名字\n\n\n### 指定分隔符\n awk  'BEGIN{FS=\":\"} {print $1,$3,$6}' /etc/passwd\n \n亦可用 awk -F \n指定多个分隔符\n\nawk -F '[;:]'\n\n### 字符串匹配\n\nawk '$6 ~ /FIN/ || NR==1 {print NR,$4,$5,$6}' OFS=\"\\t\" netstat.txt\n\nawk '$6 ~ /WAIT/ || NR==1 {print NR,$4,$5,$6}' OFS=\"\\t\" netstat.txt\n\n\nawk '/LISTEN/' netstat.txt\nawk '$6 ~ /FIN|TIME/ || NR==1 {print NR,$4,$5,$6}' OFS=\"\\t\" netstat.txt\n\nawk '$6 !~ /WAIT/ || NR==1 {print NR,$4,$5,$6}' OFS=\"\\t\" netstat.txt\n\n#### if else \n\nawk 'NR!=1{if($6 ~ /TIME|ESTABLISHED/) print > \"1.txt\";\nelse if($6 ~ /LISTEN/) print > \"2.txt\";\nelse print > \"3.txt\" }' netstat.txt\n \n\n\n### 脚本\n\n","slug":"王阁/技术/编程/bash/awk/awk","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/编程/bash/awk/awk","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsix008uu6pw06uqca8h","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">适合针对格式化文本操作</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"内置变量\"><a href=\"#内置变量\" class=\"headerlink\" title=\"内置变量\"></a>内置变量</h2><ul>\n<li>FS(Field Separator)：输入字段分隔符， 默认为空白字符</li>\n<li>OFS(Out of Field Separator)：输出字段分隔符， 默认为空白字符</li>\n<li>RS(Record Separator)：输入记录分隔符(输入换行符)， 指定输入时的换行符</li>\n<li>ORS(Output Record Separate)：输出记录分隔符（输出换行符），输出时用指定符号代替换行符</li>\n<li>NF(Number for Field)：当前行的字段的个数(即当前行被分割成了几列)</li>\n<li>NR(Number of Record)：行号，当前处理的文本行的行号。</li>\n<li>FNR：各文件分别计数的行号</li>\n<li>ARGC：命令行参数的个数</li>\n<li>ARGV：数组，保存的是命令行所给定的各参数</li>\n</ul>\n<p>awk 其实相当是一门脚本语言,所以用法比较丰富.但一般来讲,一定程度的掌握就已经能满足我们日常使用了.至于是否需要更深入,则根据实际情况.</p>\n<p>常规:</p>\n<p>awk ‘{print $1 , $2}’ file.txt<br>输出file的1,2列</p>\n<p><code>说明: awk 命令内容&#39;&#39;</code></p>\n<h2 id=\"过滤记录\"><a href=\"#过滤记录\" class=\"headerlink\" title=\"过滤记录\"></a>过滤记录</h2><p>awk ‘$1&gt;2 ‘file.txt</p>\n<p>$0     当前记录（这个变量中存放着整个行的内容）<br>$1~$n     当前记录的第n个字段，字段间由FS分隔<br>FS    输入字段分隔符 默认是空格或Tab<br>NF    当前记录中的字段个数，就是有多少列<br>NR    已经读出的记录数，就是行号，从1开始，如果有多个文件话，这个值也是不断累加中。<br>FNR    当前记录数，与NR不同的是，这个值会是各个文件自己的行号<br>RS    输入的记录分隔符， 默认为换行符<br>OFS    输出字段分隔符， 默认也是空格<br>ORS    输出的记录分隔符，默认为换行符<br>FILENAME    当前输入文件的名字</p>\n<h3 id=\"指定分隔符\"><a href=\"#指定分隔符\" class=\"headerlink\" title=\"指定分隔符\"></a>指定分隔符</h3><p> awk  ‘BEGIN{FS=”:”} {print $1,$3,$6}’ /etc/passwd</p>\n<p>亦可用 awk -F<br>指定多个分隔符</p>\n<p>awk -F ‘[;:]’</p>\n<h3 id=\"字符串匹配\"><a href=\"#字符串匹配\" class=\"headerlink\" title=\"字符串匹配\"></a>字符串匹配</h3><p>awk ‘$6 ~ /FIN/ || NR==1 {print NR,$4,$5,$6}’ OFS=”\\t” netstat.txt</p>\n<p>awk ‘$6 ~ /WAIT/ || NR==1 {print NR,$4,$5,$6}’ OFS=”\\t” netstat.txt</p>\n<p>awk ‘/LISTEN/‘ netstat.txt<br>awk ‘$6 ~ /FIN|TIME/ || NR==1 {print NR,$4,$5,$6}’ OFS=”\\t” netstat.txt</p>\n<p>awk ‘$6 !~ /WAIT/ || NR==1 {print NR,$4,$5,$6}’ OFS=”\\t” netstat.txt</p>\n<h4 id=\"if-else\"><a href=\"#if-else\" class=\"headerlink\" title=\"if else\"></a>if else</h4><p>awk ‘NR!=1{if($6 ~ /TIME|ESTABLISHED/) print &gt; “1.txt”;<br>else if($6 ~ /LISTEN/) print &gt; “2.txt”;<br>else print &gt; “3.txt” }’ netstat.txt</p>\n<h3 id=\"脚本\"><a href=\"#脚本\" class=\"headerlink\" title=\"脚本\"></a>脚本</h3>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">适合针对格式化文本操作</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"内置变量\"><a href=\"#内置变量\" class=\"headerlink\" title=\"内置变量\"></a>内置变量</h2><ul>\n<li>FS(Field Separator)：输入字段分隔符， 默认为空白字符</li>\n<li>OFS(Out of Field Separator)：输出字段分隔符， 默认为空白字符</li>\n<li>RS(Record Separator)：输入记录分隔符(输入换行符)， 指定输入时的换行符</li>\n<li>ORS(Output Record Separate)：输出记录分隔符（输出换行符），输出时用指定符号代替换行符</li>\n<li>NF(Number for Field)：当前行的字段的个数(即当前行被分割成了几列)</li>\n<li>NR(Number of Record)：行号，当前处理的文本行的行号。</li>\n<li>FNR：各文件分别计数的行号</li>\n<li>ARGC：命令行参数的个数</li>\n<li>ARGV：数组，保存的是命令行所给定的各参数</li>\n</ul>\n<p>awk 其实相当是一门脚本语言,所以用法比较丰富.但一般来讲,一定程度的掌握就已经能满足我们日常使用了.至于是否需要更深入,则根据实际情况.</p>\n<p>常规:</p>\n<p>awk ‘{print $1 , $2}’ file.txt<br>输出file的1,2列</p>\n<p><code>说明: awk 命令内容&#39;&#39;</code></p>\n<h2 id=\"过滤记录\"><a href=\"#过滤记录\" class=\"headerlink\" title=\"过滤记录\"></a>过滤记录</h2><p>awk ‘$1&gt;2 ‘file.txt</p>\n<p>$0     当前记录（这个变量中存放着整个行的内容）<br>$1~$n     当前记录的第n个字段，字段间由FS分隔<br>FS    输入字段分隔符 默认是空格或Tab<br>NF    当前记录中的字段个数，就是有多少列<br>NR    已经读出的记录数，就是行号，从1开始，如果有多个文件话，这个值也是不断累加中。<br>FNR    当前记录数，与NR不同的是，这个值会是各个文件自己的行号<br>RS    输入的记录分隔符， 默认为换行符<br>OFS    输出字段分隔符， 默认也是空格<br>ORS    输出的记录分隔符，默认为换行符<br>FILENAME    当前输入文件的名字</p>\n<h3 id=\"指定分隔符\"><a href=\"#指定分隔符\" class=\"headerlink\" title=\"指定分隔符\"></a>指定分隔符</h3><p> awk  ‘BEGIN{FS=”:”} {print $1,$3,$6}’ /etc/passwd</p>\n<p>亦可用 awk -F<br>指定多个分隔符</p>\n<p>awk -F ‘[;:]’</p>\n<h3 id=\"字符串匹配\"><a href=\"#字符串匹配\" class=\"headerlink\" title=\"字符串匹配\"></a>字符串匹配</h3><p>awk ‘$6 ~ /FIN/ || NR==1 {print NR,$4,$5,$6}’ OFS=”\\t” netstat.txt</p>\n<p>awk ‘$6 ~ /WAIT/ || NR==1 {print NR,$4,$5,$6}’ OFS=”\\t” netstat.txt</p>\n<p>awk ‘/LISTEN/‘ netstat.txt<br>awk ‘$6 ~ /FIN|TIME/ || NR==1 {print NR,$4,$5,$6}’ OFS=”\\t” netstat.txt</p>\n<p>awk ‘$6 !~ /WAIT/ || NR==1 {print NR,$4,$5,$6}’ OFS=”\\t” netstat.txt</p>\n<h4 id=\"if-else\"><a href=\"#if-else\" class=\"headerlink\" title=\"if else\"></a>if else</h4><p>awk ‘NR!=1{if($6 ~ /TIME|ESTABLISHED/) print &gt; “1.txt”;<br>else if($6 ~ /LISTEN/) print &gt; “2.txt”;<br>else print &gt; “3.txt” }’ netstat.txt</p>\n<h3 id=\"脚本\"><a href=\"#脚本\" class=\"headerlink\" title=\"脚本\"></a>脚本</h3>"},{"title":"hbaes操作","date":"2019-05-16T16:00:00.000Z","_content":"\n对hbase常规api进行封装\n\n<!--more-->\n\n# hbase日常api类封装\n\n","source":"_posts/王阁/技术/hexo/hadoop/hbase/hbase操作.md","raw":"---\n\ntitle: hbaes操作\ndate: 2019-05-17\ntags: 常规api封装\n\n---\n\n对hbase常规api进行封装\n\n<!--more-->\n\n# hbase日常api类封装\n\n","slug":"王阁/技术/hexo/hadoop/hbase/hbase操作","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiy008wu6pwerft5w23","content":"<p>对hbase常规api进行封装</p>\n<a id=\"more\"></a>\n\n<h1 id=\"hbase日常api类封装\"><a href=\"#hbase日常api类封装\" class=\"headerlink\" title=\"hbase日常api类封装\"></a>hbase日常api类封装</h1>","site":{"data":{}},"excerpt":"<p>对hbase常规api进行封装</p>","more":"<h1 id=\"hbase日常api类封装\"><a href=\"#hbase日常api类封装\" class=\"headerlink\" title=\"hbase日常api类封装\"></a>hbase日常api类封装</h1>"},{"title":"python爬虫篇","date":"2020-06-09T16:00:00.000Z","_content":" <!--more-->\n\n `uses packages `\n\n 1. requests\n 2. ","source":"_posts/王阁/技术/编程/python/reptile/python爬虫篇.md","raw":"title:  python爬虫篇\ndate:  2020-06-10\ntags: [python,爬虫]\n---\n <!--more-->\n\n `uses packages `\n\n 1. requests\n 2. ","slug":"王阁/技术/编程/python/reptile/python爬虫篇","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiy008xu6pwh7u8hzan","content":" <a id=\"more\"></a>\n\n<p> <code>uses packages</code></p>\n<ol>\n<li>requests</li>\n<li></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p> <code>uses packages</code></p>\n<ol>\n<li>requests</li>\n<li></li>\n</ol>"},{"_content":"# python summary \n\n```\nthe summary of recently knowledge which was about python !\n```\n\n​\t\n\n## class and method\n\n\n\n\n\n\n\n\n\n","source":"_posts/王阁/技术/编程/python/summary/2020.3.17.md","raw":"# python summary \n\n```\nthe summary of recently knowledge which was about python !\n```\n\n​\t\n\n## class and method\n\n\n\n\n\n\n\n\n\n","slug":"王阁/技术/编程/python/summary/2020.3.17","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/编程/python/summary/2020.3.17","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiy008zu6pwdje3hqun","content":"<h1 id=\"python-summary\"><a href=\"#python-summary\" class=\"headerlink\" title=\"python summary\"></a>python summary</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">the summary of recently knowledge which was about python !</span><br></pre></td></tr></table></figure>\n\n<p>​    </p>\n<h2 id=\"class-and-method\"><a href=\"#class-and-method\" class=\"headerlink\" title=\"class and method\"></a>class and method</h2>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"python-summary\"><a href=\"#python-summary\" class=\"headerlink\" title=\"python summary\"></a>python summary</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">the summary of recently knowledge which was about python !</span><br></pre></td></tr></table></figure>\n\n<p>​    </p>\n<h2 id=\"class-and-method\"><a href=\"#class-and-method\" class=\"headerlink\" title=\"class and method\"></a>class and method</h2>"},{"title":"python小结4","date":"2020-06-01T16:00:00.000Z","_content":"python 常见的connect and operate \n\n <!--more-->\n\n # python 小结4\n\n ## python connect redis\n\n通过pip install redis 在python3中安装redis的包\n\n```python\n\npool =redis.ConnectionPool(host='jd_cloud', port=6380, db=0, password='test123')\nr = redis.Redis(connection_pool=pool)\n\n```\n\n\n## python connect kafka\n\n### kafka producer\n\n### kafka consumer \n\n#### 多种consumer\n\n## python 文本处理\n\n\n","source":"_posts/王阁/技术/编程/python/summary/python小结4.md","raw":"title:  python小结4\ndate:  2020-06-02\ntags: [python,connect]\n---\npython 常见的connect and operate \n\n <!--more-->\n\n # python 小结4\n\n ## python connect redis\n\n通过pip install redis 在python3中安装redis的包\n\n```python\n\npool =redis.ConnectionPool(host='jd_cloud', port=6380, db=0, password='test123')\nr = redis.Redis(connection_pool=pool)\n\n```\n\n\n## python connect kafka\n\n### kafka producer\n\n### kafka consumer \n\n#### 多种consumer\n\n## python 文本处理\n\n\n","slug":"王阁/技术/编程/python/summary/python小结4","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiz0090u6pwe4b95orh","content":"<p>python 常见的connect and operate </p>\n <a id=\"more\"></a>\n\n<h1 id=\"python-小结4\"><a href=\"#python-小结4\" class=\"headerlink\" title=\"python 小结4\"></a>python 小结4</h1><h2 id=\"python-connect-redis\"><a href=\"#python-connect-redis\" class=\"headerlink\" title=\"python connect redis\"></a>python connect redis</h2><p>通过pip install redis 在python3中安装redis的包</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">pool =redis.ConnectionPool(host=<span class=\"string\">'jd_cloud'</span>, port=<span class=\"number\">6380</span>, db=<span class=\"number\">0</span>, password=<span class=\"string\">'test123'</span>)</span><br><span class=\"line\">r = redis.Redis(connection_pool=pool)</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"python-connect-kafka\"><a href=\"#python-connect-kafka\" class=\"headerlink\" title=\"python connect kafka\"></a>python connect kafka</h2><h3 id=\"kafka-producer\"><a href=\"#kafka-producer\" class=\"headerlink\" title=\"kafka producer\"></a>kafka producer</h3><h3 id=\"kafka-consumer\"><a href=\"#kafka-consumer\" class=\"headerlink\" title=\"kafka consumer\"></a>kafka consumer</h3><h4 id=\"多种consumer\"><a href=\"#多种consumer\" class=\"headerlink\" title=\"多种consumer\"></a>多种consumer</h4><h2 id=\"python-文本处理\"><a href=\"#python-文本处理\" class=\"headerlink\" title=\"python 文本处理\"></a>python 文本处理</h2>","site":{"data":{}},"excerpt":"<p>python 常见的connect and operate </p>","more":"<h1 id=\"python-小结4\"><a href=\"#python-小结4\" class=\"headerlink\" title=\"python 小结4\"></a>python 小结4</h1><h2 id=\"python-connect-redis\"><a href=\"#python-connect-redis\" class=\"headerlink\" title=\"python connect redis\"></a>python connect redis</h2><p>通过pip install redis 在python3中安装redis的包</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">pool =redis.ConnectionPool(host=<span class=\"string\">'jd_cloud'</span>, port=<span class=\"number\">6380</span>, db=<span class=\"number\">0</span>, password=<span class=\"string\">'test123'</span>)</span><br><span class=\"line\">r = redis.Redis(connection_pool=pool)</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"python-connect-kafka\"><a href=\"#python-connect-kafka\" class=\"headerlink\" title=\"python connect kafka\"></a>python connect kafka</h2><h3 id=\"kafka-producer\"><a href=\"#kafka-producer\" class=\"headerlink\" title=\"kafka producer\"></a>kafka producer</h3><h3 id=\"kafka-consumer\"><a href=\"#kafka-consumer\" class=\"headerlink\" title=\"kafka consumer\"></a>kafka consumer</h3><h4 id=\"多种consumer\"><a href=\"#多种consumer\" class=\"headerlink\" title=\"多种consumer\"></a>多种consumer</h4><h2 id=\"python-文本处理\"><a href=\"#python-文本处理\" class=\"headerlink\" title=\"python 文本处理\"></a>python 文本处理</h2>"},{"_content":"## Flink learn \n\n## window\n\n#### 窗口分类：\n\n1. 滚动窗口\n2. 滑动窗口\n3. 会话窗口\n\n---\n\n#### 窗口分配器\n\n先区分是否为键控流\n\n1. 键控流用window(WindowAssigner)\n2. 非键控流用windowAll(WindowAssigner)\n\n\n#### 窗口分配器：\n\n1. 滚动窗口\n2. 滑动窗口\n3. 会话窗口\n4. 全局窗口\n5. 自定义窗口\n\n#### 内置窗口均基于时间\n\n1. 开始时间戳\n2. 结束时间戳\n\n---\n\n#### 时间语义与水位线\n","source":"_posts/王阁/技术/大数据/flink/2023/flink_study.md","raw":"## Flink learn \n\n## window\n\n#### 窗口分类：\n\n1. 滚动窗口\n2. 滑动窗口\n3. 会话窗口\n\n---\n\n#### 窗口分配器\n\n先区分是否为键控流\n\n1. 键控流用window(WindowAssigner)\n2. 非键控流用windowAll(WindowAssigner)\n\n\n#### 窗口分配器：\n\n1. 滚动窗口\n2. 滑动窗口\n3. 会话窗口\n4. 全局窗口\n5. 自定义窗口\n\n#### 内置窗口均基于时间\n\n1. 开始时间戳\n2. 结束时间戳\n\n---\n\n#### 时间语义与水位线\n","slug":"王阁/技术/大数据/flink/2023/flink_study","published":1,"date":"2023-02-06T07:26:56.897Z","updated":"2023-02-23T03:09:27.716Z","title":"王阁/技术/大数据/flink/2023/flink_study","_id":"clegiqsiz0092u6pwg58n9o8v","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Flink-learn\"><a href=\"#Flink-learn\" class=\"headerlink\" title=\"Flink learn\"></a>Flink learn</h2><h2 id=\"window\"><a href=\"#window\" class=\"headerlink\" title=\"window\"></a>window</h2><h4 id=\"窗口分类：\"><a href=\"#窗口分类：\" class=\"headerlink\" title=\"窗口分类：\"></a>窗口分类：</h4><ol>\n<li>滚动窗口</li>\n<li>滑动窗口</li>\n<li>会话窗口</li>\n</ol>\n<hr>\n<h4 id=\"窗口分配器\"><a href=\"#窗口分配器\" class=\"headerlink\" title=\"窗口分配器\"></a>窗口分配器</h4><p>先区分是否为键控流</p>\n<ol>\n<li>键控流用window(WindowAssigner)</li>\n<li>非键控流用windowAll(WindowAssigner)</li>\n</ol>\n<h4 id=\"窗口分配器：\"><a href=\"#窗口分配器：\" class=\"headerlink\" title=\"窗口分配器：\"></a>窗口分配器：</h4><ol>\n<li>滚动窗口</li>\n<li>滑动窗口</li>\n<li>会话窗口</li>\n<li>全局窗口</li>\n<li>自定义窗口</li>\n</ol>\n<h4 id=\"内置窗口均基于时间\"><a href=\"#内置窗口均基于时间\" class=\"headerlink\" title=\"内置窗口均基于时间\"></a>内置窗口均基于时间</h4><ol>\n<li>开始时间戳</li>\n<li>结束时间戳</li>\n</ol>\n<hr>\n<h4 id=\"时间语义与水位线\"><a href=\"#时间语义与水位线\" class=\"headerlink\" title=\"时间语义与水位线\"></a>时间语义与水位线</h4>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Flink-learn\"><a href=\"#Flink-learn\" class=\"headerlink\" title=\"Flink learn\"></a>Flink learn</h2><h2 id=\"window\"><a href=\"#window\" class=\"headerlink\" title=\"window\"></a>window</h2><h4 id=\"窗口分类：\"><a href=\"#窗口分类：\" class=\"headerlink\" title=\"窗口分类：\"></a>窗口分类：</h4><ol>\n<li>滚动窗口</li>\n<li>滑动窗口</li>\n<li>会话窗口</li>\n</ol>\n<hr>\n<h4 id=\"窗口分配器\"><a href=\"#窗口分配器\" class=\"headerlink\" title=\"窗口分配器\"></a>窗口分配器</h4><p>先区分是否为键控流</p>\n<ol>\n<li>键控流用window(WindowAssigner)</li>\n<li>非键控流用windowAll(WindowAssigner)</li>\n</ol>\n<h4 id=\"窗口分配器：\"><a href=\"#窗口分配器：\" class=\"headerlink\" title=\"窗口分配器：\"></a>窗口分配器：</h4><ol>\n<li>滚动窗口</li>\n<li>滑动窗口</li>\n<li>会话窗口</li>\n<li>全局窗口</li>\n<li>自定义窗口</li>\n</ol>\n<h4 id=\"内置窗口均基于时间\"><a href=\"#内置窗口均基于时间\" class=\"headerlink\" title=\"内置窗口均基于时间\"></a>内置窗口均基于时间</h4><ol>\n<li>开始时间戳</li>\n<li>结束时间戳</li>\n</ol>\n<hr>\n<h4 id=\"时间语义与水位线\"><a href=\"#时间语义与水位线\" class=\"headerlink\" title=\"时间语义与水位线\"></a>时间语义与水位线</h4>"},{"title":"python小结5","date":"2020-06-03T16:00:00.000Z","_content":"csv, json ,poi处理\n <!--more-->\n\n ## csv\n ```python\n import csv\n\n ```\n 主要用到的方式\n\n * csv.reader()\n * csv.writer()\n\n读csv和写csv\n\n## json\n\n```python\nimport json\n\n\n##针对对象\n## 将python对象编码成json字符串, 返回json串\njson.dumps()\n## 将已编码的json串解码为python对象，返回python对应的数据类型\njson.loads()\n\n##针对文件的操作\njson.dump()\njson.load()\n\n\n# 写入 JSON 数据\nwith open('data.json', 'w') as f:\n    json.dump(data, f)\n \n# 读取数据\nwith open('data.json', 'r') as f:\n    data = json.load(f)\n    \n```\n\n## elasticsearch\n\n```python \nimport \n\n```\n\n\n\n\n\n\n","source":"_posts/王阁/技术/编程/python/summary/python5小结.md","raw":"title:  python小结5\ndate:  2020-06-04\ntags: [python,json,xml,poi]\n\n\n---\ncsv, json ,poi处理\n <!--more-->\n\n ## csv\n ```python\n import csv\n\n ```\n 主要用到的方式\n\n * csv.reader()\n * csv.writer()\n\n读csv和写csv\n\n## json\n\n```python\nimport json\n\n\n##针对对象\n## 将python对象编码成json字符串, 返回json串\njson.dumps()\n## 将已编码的json串解码为python对象，返回python对应的数据类型\njson.loads()\n\n##针对文件的操作\njson.dump()\njson.load()\n\n\n# 写入 JSON 数据\nwith open('data.json', 'w') as f:\n    json.dump(data, f)\n \n# 读取数据\nwith open('data.json', 'r') as f:\n    data = json.load(f)\n    \n```\n\n## elasticsearch\n\n```python \nimport \n\n```\n\n\n\n\n\n\n","slug":"王阁/技术/编程/python/summary/python5小结","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsiz0094u6pw9f9dd413","content":"<p>csv, json ,poi处理<br> <a id=\"more\"></a></p>\n<h2 id=\"csv\"><a href=\"#csv\" class=\"headerlink\" title=\"csv\"></a>csv</h2> <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> csv</span><br></pre></td></tr></table></figure>\n<p> 主要用到的方式</p>\n<ul>\n<li>csv.reader()</li>\n<li>csv.writer()</li>\n</ul>\n<p>读csv和写csv</p>\n<h2 id=\"json\"><a href=\"#json\" class=\"headerlink\" title=\"json\"></a>json</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##针对对象</span></span><br><span class=\"line\"><span class=\"comment\">## 将python对象编码成json字符串, 返回json串</span></span><br><span class=\"line\">json.dumps()</span><br><span class=\"line\"><span class=\"comment\">## 将已编码的json串解码为python对象，返回python对应的数据类型</span></span><br><span class=\"line\">json.loads()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##针对文件的操作</span></span><br><span class=\"line\">json.dump()</span><br><span class=\"line\">json.load()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 写入 JSON 数据</span></span><br><span class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">'data.json'</span>, <span class=\"string\">'w'</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">    json.dump(data, f)</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 读取数据</span></span><br><span class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">'data.json'</span>, <span class=\"string\">'r'</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">    data = json.load(f)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"elasticsearch\"><a href=\"#elasticsearch\" class=\"headerlink\" title=\"elasticsearch\"></a>elasticsearch</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n","site":{"data":{}},"excerpt":"<p>csv, json ,poi处理<br>","more":"</p>\n<h2 id=\"csv\"><a href=\"#csv\" class=\"headerlink\" title=\"csv\"></a>csv</h2> <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> csv</span><br></pre></td></tr></table></figure>\n<p> 主要用到的方式</p>\n<ul>\n<li>csv.reader()</li>\n<li>csv.writer()</li>\n</ul>\n<p>读csv和写csv</p>\n<h2 id=\"json\"><a href=\"#json\" class=\"headerlink\" title=\"json\"></a>json</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##针对对象</span></span><br><span class=\"line\"><span class=\"comment\">## 将python对象编码成json字符串, 返回json串</span></span><br><span class=\"line\">json.dumps()</span><br><span class=\"line\"><span class=\"comment\">## 将已编码的json串解码为python对象，返回python对应的数据类型</span></span><br><span class=\"line\">json.loads()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##针对文件的操作</span></span><br><span class=\"line\">json.dump()</span><br><span class=\"line\">json.load()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 写入 JSON 数据</span></span><br><span class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">'data.json'</span>, <span class=\"string\">'w'</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">    json.dump(data, f)</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 读取数据</span></span><br><span class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">'data.json'</span>, <span class=\"string\">'r'</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">    data = json.load(f)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"elasticsearch\"><a href=\"#elasticsearch\" class=\"headerlink\" title=\"elasticsearch\"></a>elasticsearch</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span></span><br></pre></td></tr></table></figure>"},{"title":"ELK-beats","date":"2020-07-09T16:00:00.000Z","_content":"\n本文主要分为两大块,一是官网beat的介绍,与相应配置的说明.二是被官方收录的beat\n\n <!--more-->\n\n # beats\n\nelastic官网常规的beats主要有五种\n\n1. Filebeat 日志文件\n2. Metricbeat 指标\n3. Packetbeat 网络数据\n4. Winlogbeat   windows事件日志\n5. AuditBeat    审计数据\n6. HeartBeat    运行时间监控\n7. Functionbeat 无需要服务器的采集器\n\n\n## Filebeat\n    ","source":"_posts/王阁/技术/运维/ELK/logstash/beats.md","raw":"title: ELK-beats\ndate: 2020-07-10\ntags: [beats]\n---\n\n本文主要分为两大块,一是官网beat的介绍,与相应配置的说明.二是被官方收录的beat\n\n <!--more-->\n\n # beats\n\nelastic官网常规的beats主要有五种\n\n1. Filebeat 日志文件\n2. Metricbeat 指标\n3. Packetbeat 网络数据\n4. Winlogbeat   windows事件日志\n5. AuditBeat    审计数据\n6. HeartBeat    运行时间监控\n7. Functionbeat 无需要服务器的采集器\n\n\n## Filebeat\n    ","slug":"王阁/技术/运维/ELK/logstash/beats","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsj00096u6pwddzmdhsp","content":"<p>本文主要分为两大块,一是官网beat的介绍,与相应配置的说明.二是被官方收录的beat</p>\n <a id=\"more\"></a>\n\n<h1 id=\"beats\"><a href=\"#beats\" class=\"headerlink\" title=\"beats\"></a>beats</h1><p>elastic官网常规的beats主要有五种</p>\n<ol>\n<li>Filebeat 日志文件</li>\n<li>Metricbeat 指标</li>\n<li>Packetbeat 网络数据</li>\n<li>Winlogbeat   windows事件日志</li>\n<li>AuditBeat    审计数据</li>\n<li>HeartBeat    运行时间监控</li>\n<li>Functionbeat 无需要服务器的采集器</li>\n</ol>\n<h2 id=\"Filebeat\"><a href=\"#Filebeat\" class=\"headerlink\" title=\"Filebeat\"></a>Filebeat</h2>","site":{"data":{}},"excerpt":"<p>本文主要分为两大块,一是官网beat的介绍,与相应配置的说明.二是被官方收录的beat</p>","more":"<h1 id=\"beats\"><a href=\"#beats\" class=\"headerlink\" title=\"beats\"></a>beats</h1><p>elastic官网常规的beats主要有五种</p>\n<ol>\n<li>Filebeat 日志文件</li>\n<li>Metricbeat 指标</li>\n<li>Packetbeat 网络数据</li>\n<li>Winlogbeat   windows事件日志</li>\n<li>AuditBeat    审计数据</li>\n<li>HeartBeat    运行时间监控</li>\n<li>Functionbeat 无需要服务器的采集器</li>\n</ol>\n<h2 id=\"Filebeat\"><a href=\"#Filebeat\" class=\"headerlink\" title=\"Filebeat\"></a>Filebeat</h2>"},{"title":"logstash使用","date":"2020-07-08T16:00:00.000Z","_content":" <!--more-->\n\n # logstash使用\nlogstash使用管道方式进行日志的收集处理与输出\n\n一般包括三个阶段\n\n输入input->处理filter->输出output\n\n---\n\n横线之上的内容是在logstash引入codec概念之前的主要流程,但引入codec之后则有所不同.\n\n这里需要纠正之前的一个概念。Logstash 不只是一个input | filter | output 的数据流，\n而是一个input | decode | filter | encode | output 的数据流！codec 就是用来 decode、encode 事件的。\n\n`即在接收到数据后,可以对数据进行再编码和解码后输出`\n\n即配置文件组成部份一般如下:\n\n```\ninput {\n   \n}\nfilter {\n    \n}\noutput {\n    \n}\n\n```\n\n执行指令\n```\nlogstash -f demo.conf\n```\n\n`所以这里针对logstash主要的内容还是针对不同组件模块进行配置`\n\n## elasticsearch\n\n```\noutput {\n#stdout {  codec => rubydebug }\nelasticsearch {\nhosts => [\"127.0.0.1:9200\"]\ntemplate_overwrite => true\nindex => \"rediscluster-%{+YYYY.MM.dd}\"\nworkers => 5\n}\n}\n\n```\n## syslog\n\nsyslog.conf,rsyslog.conf\n\n\n","source":"_posts/王阁/技术/运维/ELK/logstash/logstash.md","raw":"title:  logstash使用\ndate: 2020-7-9\ntags: [logstash,log]\n---\n <!--more-->\n\n # logstash使用\nlogstash使用管道方式进行日志的收集处理与输出\n\n一般包括三个阶段\n\n输入input->处理filter->输出output\n\n---\n\n横线之上的内容是在logstash引入codec概念之前的主要流程,但引入codec之后则有所不同.\n\n这里需要纠正之前的一个概念。Logstash 不只是一个input | filter | output 的数据流，\n而是一个input | decode | filter | encode | output 的数据流！codec 就是用来 decode、encode 事件的。\n\n`即在接收到数据后,可以对数据进行再编码和解码后输出`\n\n即配置文件组成部份一般如下:\n\n```\ninput {\n   \n}\nfilter {\n    \n}\noutput {\n    \n}\n\n```\n\n执行指令\n```\nlogstash -f demo.conf\n```\n\n`所以这里针对logstash主要的内容还是针对不同组件模块进行配置`\n\n## elasticsearch\n\n```\noutput {\n#stdout {  codec => rubydebug }\nelasticsearch {\nhosts => [\"127.0.0.1:9200\"]\ntemplate_overwrite => true\nindex => \"rediscluster-%{+YYYY.MM.dd}\"\nworkers => 5\n}\n}\n\n```\n## syslog\n\nsyslog.conf,rsyslog.conf\n\n\n","slug":"王阁/技术/运维/ELK/logstash/logstash","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsj00099u6pwe70w47nu","content":" <a id=\"more\"></a>\n\n<h1 id=\"logstash使用\"><a href=\"#logstash使用\" class=\"headerlink\" title=\"logstash使用\"></a>logstash使用</h1><p>logstash使用管道方式进行日志的收集处理与输出</p>\n<p>一般包括三个阶段</p>\n<p>输入input-&gt;处理filter-&gt;输出output</p>\n<hr>\n<p>横线之上的内容是在logstash引入codec概念之前的主要流程,但引入codec之后则有所不同.</p>\n<p>这里需要纠正之前的一个概念。Logstash 不只是一个input | filter | output 的数据流，<br>而是一个input | decode | filter | encode | output 的数据流！codec 就是用来 decode、encode 事件的。</p>\n<p><code>即在接收到数据后,可以对数据进行再编码和解码后输出</code></p>\n<p>即配置文件组成部份一般如下:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">input &#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">filter &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">output &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>执行指令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">logstash -f demo.conf</span><br></pre></td></tr></table></figure>\n\n<p><code>所以这里针对logstash主要的内容还是针对不同组件模块进行配置</code></p>\n<h2 id=\"elasticsearch\"><a href=\"#elasticsearch\" class=\"headerlink\" title=\"elasticsearch\"></a>elasticsearch</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">output &#123;</span><br><span class=\"line\">#stdout &#123;  codec &#x3D;&gt; rubydebug &#125;</span><br><span class=\"line\">elasticsearch &#123;</span><br><span class=\"line\">hosts &#x3D;&gt; [&quot;127.0.0.1:9200&quot;]</span><br><span class=\"line\">template_overwrite &#x3D;&gt; true</span><br><span class=\"line\">index &#x3D;&gt; &quot;rediscluster-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class=\"line\">workers &#x3D;&gt; 5</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"syslog\"><a href=\"#syslog\" class=\"headerlink\" title=\"syslog\"></a>syslog</h2><p>syslog.conf,rsyslog.conf</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"logstash使用\"><a href=\"#logstash使用\" class=\"headerlink\" title=\"logstash使用\"></a>logstash使用</h1><p>logstash使用管道方式进行日志的收集处理与输出</p>\n<p>一般包括三个阶段</p>\n<p>输入input-&gt;处理filter-&gt;输出output</p>\n<hr>\n<p>横线之上的内容是在logstash引入codec概念之前的主要流程,但引入codec之后则有所不同.</p>\n<p>这里需要纠正之前的一个概念。Logstash 不只是一个input | filter | output 的数据流，<br>而是一个input | decode | filter | encode | output 的数据流！codec 就是用来 decode、encode 事件的。</p>\n<p><code>即在接收到数据后,可以对数据进行再编码和解码后输出</code></p>\n<p>即配置文件组成部份一般如下:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">input &#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">filter &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">output &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>执行指令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">logstash -f demo.conf</span><br></pre></td></tr></table></figure>\n\n<p><code>所以这里针对logstash主要的内容还是针对不同组件模块进行配置</code></p>\n<h2 id=\"elasticsearch\"><a href=\"#elasticsearch\" class=\"headerlink\" title=\"elasticsearch\"></a>elasticsearch</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">output &#123;</span><br><span class=\"line\">#stdout &#123;  codec &#x3D;&gt; rubydebug &#125;</span><br><span class=\"line\">elasticsearch &#123;</span><br><span class=\"line\">hosts &#x3D;&gt; [&quot;127.0.0.1:9200&quot;]</span><br><span class=\"line\">template_overwrite &#x3D;&gt; true</span><br><span class=\"line\">index &#x3D;&gt; &quot;rediscluster-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class=\"line\">workers &#x3D;&gt; 5</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"syslog\"><a href=\"#syslog\" class=\"headerlink\" title=\"syslog\"></a>syslog</h2><p>syslog.conf,rsyslog.conf</p>"},{"_content":"\n##  kafka\n\n添加topic\n/data/kafka/add_topic\n\n\n查询toipic\n\n/data/kafka/select_topic\n\n删除topic(待定)\n\n/data/kafka/delete_topic\n\n工具类\n\n删除 topic List;\n\n\n## redis","source":"_posts/王阁/技术/运维/front_end/接口规划/data-manager.md","raw":"\n##  kafka\n\n添加topic\n/data/kafka/add_topic\n\n\n查询toipic\n\n/data/kafka/select_topic\n\n删除topic(待定)\n\n/data/kafka/delete_topic\n\n工具类\n\n删除 topic List;\n\n\n## redis","slug":"王阁/技术/运维/front_end/接口规划/data-manager","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2022-05-06T09:44:32.126Z","title":"王阁/技术/运维/front_end/接口规划/data-manager","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsj1009bu6pwe95i3nc2","content":"<h2 id=\"kafka\"><a href=\"#kafka\" class=\"headerlink\" title=\"kafka\"></a>kafka</h2><p>添加topic<br>/data/kafka/add_topic</p>\n<p>查询toipic</p>\n<p>/data/kafka/select_topic</p>\n<p>删除topic(待定)</p>\n<p>/data/kafka/delete_topic</p>\n<p>工具类</p>\n<p>删除 topic List;</p>\n<h2 id=\"redis\"><a href=\"#redis\" class=\"headerlink\" title=\"redis\"></a>redis</h2>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"kafka\"><a href=\"#kafka\" class=\"headerlink\" title=\"kafka\"></a>kafka</h2><p>添加topic<br>/data/kafka/add_topic</p>\n<p>查询toipic</p>\n<p>/data/kafka/select_topic</p>\n<p>删除topic(待定)</p>\n<p>/data/kafka/delete_topic</p>\n<p>工具类</p>\n<p>删除 topic List;</p>\n<h2 id=\"redis\"><a href=\"#redis\" class=\"headerlink\" title=\"redis\"></a>redis</h2>"},{"title":"python小结3","date":"2020-05-28T16:00:00.000Z","_content":"\n <!--more-->\n\n # python小结3\n\n## 模块\n\n\n\n\n\n## 面向对象\n### 类与实例\n\npython类的声()明会在类名上加\nos.rmdir()\n\neg\n\n```python\n\nclass Student(object):\n    pass\n```\n\n构造函数\n```python\ndef __init__(self,field1,field2):\n    pass\n```\n\n### 访问控制\n\npython中 私有属性是通过 __来标识,用__标识后则表示该属性是这个类的私有属性,则意味着直接通过一般的*.__是难以访问到的.\n\n如果是_的形式,则也是声明将这个认作是私有变量的属性,但却是可以直接通过*._*的形式进行访问的.\n\n\n`\n注意:__的属性并不是完全不能用实例直接访问,如Student类为例通过student._Stuent__name的形式也能直接访问\n\n从这里来看,这一点是不太符合面向对象编程的精神的,也就是说python解释器不会从根本上防止你乱搞,取用哪种编程规范主要还是要靠自觉\n\n`\n\n### 继承与多态\n\n总得来讲与java类似.但因为python是动态语言,所以它符合\"鸭子类型\"的特点,即在多态使用时,只要具有同样的方法,即可接收调用.\n\n### 获取对象信息\n\n通过types模块下的type()方法来获取对象类型\n\n通过isinstance()来判断是否是这个类,可用于测试继承,也可通过逗号分隔,测试是不是这些类其中之一\n通过dir()获取一个对象的所有属性和方法\n\n### 实例属性与类属性\n\npython 是动态语言,所以可以在创建实例后再赋值\n\neg:\n```python\n\nstudent=Stuent()\nstudent.score=90\n\n```\n即这score是后续才赋值上去的.\n\n这就是实例属性\n\n而本身类需要绑定一些属性呢,这就可以直接定义在class中,即类属性.\n\n```python\nclass Student(object):\n    name='ken'\n    age=18\n\n```\n## 面向对象进阶\n\n### 使用__slots__\n\n因为动态语言的特性,python实例在创建后还能再绑定方法与属性. 这里如果我们想要约束只绑定某些属性时可以通过\n\n__slots__(a,b)的形式来操作.\n\n\n#\n\n\n注意:该类若被子类继承,在子类未定义__slots__时,子类实例是不会生效的.\n\n\n### @property\n\n类似java getter\n\n@feild.setter\n\n### 多重继承\n因为python是动态语言,所以能够继承多个类,但需要考虑下设计理念,即扩展继承时,扩展继承的类可以命名为**Runnable,与 XXMixIn\n\n### 定制类的方法\n__init__\n__iter__\n__str__\n\n等方法,这些方法统一后面来整理\n\n### 枚举类\n\n### 元类有些类似反射\n\n后面再定向研究\n\n\n## 错误与调试\n\ntry...except...finally..\n\n## 文件读写\n\n### 读文件\n要以读文件的模式打开一个文件对象，使用Python内置的open()函数，传入文件名和标示符：\n\nfile open 最后需要file.close \n\n可以通过with open(\"path\",'') as f : 的写法来简写,这样写不用写f.close()\n\nopen('path','rb') //这样写才是读文件\n\n读时,f.read()会将文件全量写到内存里去,所以小文件这么简写还能接受,但若文件较大,内存会有较大压力.\n\nf.read(size),则是一次读取内容的大小.\n\nf.readlines()则是读成list的形式.\n\nopen('path','wb')//这样获取的文件操作实例是写对象\n\nf.write(\"content\")\n\n同样也可以用with的写法来获取对象\n\n`前者写对象的获取的实例,若文件存在,则会覆盖该文件`\n\nopen('path','wba')这样的写法是续写文件\n\n\n### 内存数据操作(StringIO ByteIO)\n\n\n### 操作文件和目录\nos.path.join\nos.path\nos.path.exists()\n\nos.mkdir()\nos.rmdir()\n\nos.path.abspath()\n## 常用包\n\ndatetime.datetime\n\n即datetime包下的datetime类\n\n``` python\nimport datetime.datetime\nor \nfrom datetime import datetime\n```\n\n### 获取当前时间\n\ndatetime.now()\n\n### 获取指定的时间\n\ndt=datetime(2020,05,23,12,32)\n\n`转成timestamp`\ndt.timestamp()\n\n`timestamp to datetime`\n\ndatetime.fromtimestamp(t)\n\n`转成格林制式时间`\ndatetime.utcfromtimestamp(t)\n\n`str转成datetime`\n\n\n\n## collections\n### namedtuple\n\n### deque (\"双向列表\")\n\n### defaultdict\n\n使用dict时，如果引用的Key不存在，就会抛出KeyError。如果希望key不存在时，返回一个默认值，就可以用defaultdict：\n\n\n### OrderedDict\n\n注意，OrderedDict的Key会按照插入的顺序排列，不是Key本身排序：\n\n\n### ChainMap(再研究)\n\n### Counter\n\nCounter实际上也是dict的一个子类，上面的结果可以看出每个字符出现的次数。\n\n","source":"_posts/王阁/技术/编程/python/summary/python小结3.md","raw":"title:  python小结3\ndate: 2020-05-29\ntags: [python]\n\n---\n\n <!--more-->\n\n # python小结3\n\n## 模块\n\n\n\n\n\n## 面向对象\n### 类与实例\n\npython类的声()明会在类名上加\nos.rmdir()\n\neg\n\n```python\n\nclass Student(object):\n    pass\n```\n\n构造函数\n```python\ndef __init__(self,field1,field2):\n    pass\n```\n\n### 访问控制\n\npython中 私有属性是通过 __来标识,用__标识后则表示该属性是这个类的私有属性,则意味着直接通过一般的*.__是难以访问到的.\n\n如果是_的形式,则也是声明将这个认作是私有变量的属性,但却是可以直接通过*._*的形式进行访问的.\n\n\n`\n注意:__的属性并不是完全不能用实例直接访问,如Student类为例通过student._Stuent__name的形式也能直接访问\n\n从这里来看,这一点是不太符合面向对象编程的精神的,也就是说python解释器不会从根本上防止你乱搞,取用哪种编程规范主要还是要靠自觉\n\n`\n\n### 继承与多态\n\n总得来讲与java类似.但因为python是动态语言,所以它符合\"鸭子类型\"的特点,即在多态使用时,只要具有同样的方法,即可接收调用.\n\n### 获取对象信息\n\n通过types模块下的type()方法来获取对象类型\n\n通过isinstance()来判断是否是这个类,可用于测试继承,也可通过逗号分隔,测试是不是这些类其中之一\n通过dir()获取一个对象的所有属性和方法\n\n### 实例属性与类属性\n\npython 是动态语言,所以可以在创建实例后再赋值\n\neg:\n```python\n\nstudent=Stuent()\nstudent.score=90\n\n```\n即这score是后续才赋值上去的.\n\n这就是实例属性\n\n而本身类需要绑定一些属性呢,这就可以直接定义在class中,即类属性.\n\n```python\nclass Student(object):\n    name='ken'\n    age=18\n\n```\n## 面向对象进阶\n\n### 使用__slots__\n\n因为动态语言的特性,python实例在创建后还能再绑定方法与属性. 这里如果我们想要约束只绑定某些属性时可以通过\n\n__slots__(a,b)的形式来操作.\n\n\n#\n\n\n注意:该类若被子类继承,在子类未定义__slots__时,子类实例是不会生效的.\n\n\n### @property\n\n类似java getter\n\n@feild.setter\n\n### 多重继承\n因为python是动态语言,所以能够继承多个类,但需要考虑下设计理念,即扩展继承时,扩展继承的类可以命名为**Runnable,与 XXMixIn\n\n### 定制类的方法\n__init__\n__iter__\n__str__\n\n等方法,这些方法统一后面来整理\n\n### 枚举类\n\n### 元类有些类似反射\n\n后面再定向研究\n\n\n## 错误与调试\n\ntry...except...finally..\n\n## 文件读写\n\n### 读文件\n要以读文件的模式打开一个文件对象，使用Python内置的open()函数，传入文件名和标示符：\n\nfile open 最后需要file.close \n\n可以通过with open(\"path\",'') as f : 的写法来简写,这样写不用写f.close()\n\nopen('path','rb') //这样写才是读文件\n\n读时,f.read()会将文件全量写到内存里去,所以小文件这么简写还能接受,但若文件较大,内存会有较大压力.\n\nf.read(size),则是一次读取内容的大小.\n\nf.readlines()则是读成list的形式.\n\nopen('path','wb')//这样获取的文件操作实例是写对象\n\nf.write(\"content\")\n\n同样也可以用with的写法来获取对象\n\n`前者写对象的获取的实例,若文件存在,则会覆盖该文件`\n\nopen('path','wba')这样的写法是续写文件\n\n\n### 内存数据操作(StringIO ByteIO)\n\n\n### 操作文件和目录\nos.path.join\nos.path\nos.path.exists()\n\nos.mkdir()\nos.rmdir()\n\nos.path.abspath()\n## 常用包\n\ndatetime.datetime\n\n即datetime包下的datetime类\n\n``` python\nimport datetime.datetime\nor \nfrom datetime import datetime\n```\n\n### 获取当前时间\n\ndatetime.now()\n\n### 获取指定的时间\n\ndt=datetime(2020,05,23,12,32)\n\n`转成timestamp`\ndt.timestamp()\n\n`timestamp to datetime`\n\ndatetime.fromtimestamp(t)\n\n`转成格林制式时间`\ndatetime.utcfromtimestamp(t)\n\n`str转成datetime`\n\n\n\n## collections\n### namedtuple\n\n### deque (\"双向列表\")\n\n### defaultdict\n\n使用dict时，如果引用的Key不存在，就会抛出KeyError。如果希望key不存在时，返回一个默认值，就可以用defaultdict：\n\n\n### OrderedDict\n\n注意，OrderedDict的Key会按照插入的顺序排列，不是Key本身排序：\n\n\n### ChainMap(再研究)\n\n### Counter\n\nCounter实际上也是dict的一个子类，上面的结果可以看出每个字符出现的次数。\n\n","slug":"王阁/技术/编程/python/summary/python小结3","published":1,"updated":"2021-04-26T13:52:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsj1009eu6pwbimf5zlp","content":" <a id=\"more\"></a>\n\n<h1 id=\"python小结3\"><a href=\"#python小结3\" class=\"headerlink\" title=\"python小结3\"></a>python小结3</h1><h2 id=\"模块\"><a href=\"#模块\" class=\"headerlink\" title=\"模块\"></a>模块</h2><h2 id=\"面向对象\"><a href=\"#面向对象\" class=\"headerlink\" title=\"面向对象\"></a>面向对象</h2><h3 id=\"类与实例\"><a href=\"#类与实例\" class=\"headerlink\" title=\"类与实例\"></a>类与实例</h3><p>python类的声()明会在类名上加<br>os.rmdir()</p>\n<p>eg</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n\n<p>构造函数</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self,field1,field2)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"访问控制\"><a href=\"#访问控制\" class=\"headerlink\" title=\"访问控制\"></a>访问控制</h3><p>python中 私有属性是通过 <strong>来标识,用</strong>标识后则表示该属性是这个类的私有属性,则意味着直接通过一般的*.__是难以访问到的.</p>\n<p>如果是<em>的形式,则也是声明将这个认作是私有变量的属性,但却是可以直接通过*.</em>*的形式进行访问的.</p>\n<p>`<br>注意:<strong>的属性并不是完全不能用实例直接访问,如Student类为例通过student._Stuent</strong>name的形式也能直接访问</p>\n<p>从这里来看,这一点是不太符合面向对象编程的精神的,也就是说python解释器不会从根本上防止你乱搞,取用哪种编程规范主要还是要靠自觉</p>\n<p>`</p>\n<h3 id=\"继承与多态\"><a href=\"#继承与多态\" class=\"headerlink\" title=\"继承与多态\"></a>继承与多态</h3><p>总得来讲与java类似.但因为python是动态语言,所以它符合”鸭子类型”的特点,即在多态使用时,只要具有同样的方法,即可接收调用.</p>\n<h3 id=\"获取对象信息\"><a href=\"#获取对象信息\" class=\"headerlink\" title=\"获取对象信息\"></a>获取对象信息</h3><p>通过types模块下的type()方法来获取对象类型</p>\n<p>通过isinstance()来判断是否是这个类,可用于测试继承,也可通过逗号分隔,测试是不是这些类其中之一<br>通过dir()获取一个对象的所有属性和方法</p>\n<h3 id=\"实例属性与类属性\"><a href=\"#实例属性与类属性\" class=\"headerlink\" title=\"实例属性与类属性\"></a>实例属性与类属性</h3><p>python 是动态语言,所以可以在创建实例后再赋值</p>\n<p>eg:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">student=Stuent()</span><br><span class=\"line\">student.score=<span class=\"number\">90</span></span><br></pre></td></tr></table></figure>\n<p>即这score是后续才赋值上去的.</p>\n<p>这就是实例属性</p>\n<p>而本身类需要绑定一些属性呢,这就可以直接定义在class中,即类属性.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    name=<span class=\"string\">'ken'</span></span><br><span class=\"line\">    age=<span class=\"number\">18</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"面向对象进阶\"><a href=\"#面向对象进阶\" class=\"headerlink\" title=\"面向对象进阶\"></a>面向对象进阶</h2><h3 id=\"使用slots\"><a href=\"#使用slots\" class=\"headerlink\" title=\"使用slots\"></a>使用<strong>slots</strong></h3><p>因为动态语言的特性,python实例在创建后还能再绑定方法与属性. 这里如果我们想要约束只绑定某些属性时可以通过</p>\n<p><strong>slots</strong>(a,b)的形式来操作.</p>\n<p>#</p>\n<p>注意:该类若被子类继承,在子类未定义<strong>slots</strong>时,子类实例是不会生效的.</p>\n<h3 id=\"property\"><a href=\"#property\" class=\"headerlink\" title=\"@property\"></a>@property</h3><p>类似java getter</p>\n<p>@feild.setter</p>\n<h3 id=\"多重继承\"><a href=\"#多重继承\" class=\"headerlink\" title=\"多重继承\"></a>多重继承</h3><p>因为python是动态语言,所以能够继承多个类,但需要考虑下设计理念,即扩展继承时,扩展继承的类可以命名为**Runnable,与 XXMixIn</p>\n<h3 id=\"定制类的方法\"><a href=\"#定制类的方法\" class=\"headerlink\" title=\"定制类的方法\"></a>定制类的方法</h3><p><strong>init</strong><br><strong>iter</strong><br><strong>str</strong></p>\n<p>等方法,这些方法统一后面来整理</p>\n<h3 id=\"枚举类\"><a href=\"#枚举类\" class=\"headerlink\" title=\"枚举类\"></a>枚举类</h3><h3 id=\"元类有些类似反射\"><a href=\"#元类有些类似反射\" class=\"headerlink\" title=\"元类有些类似反射\"></a>元类有些类似反射</h3><p>后面再定向研究</p>\n<h2 id=\"错误与调试\"><a href=\"#错误与调试\" class=\"headerlink\" title=\"错误与调试\"></a>错误与调试</h2><p>try…except…finally..</p>\n<h2 id=\"文件读写\"><a href=\"#文件读写\" class=\"headerlink\" title=\"文件读写\"></a>文件读写</h2><h3 id=\"读文件\"><a href=\"#读文件\" class=\"headerlink\" title=\"读文件\"></a>读文件</h3><p>要以读文件的模式打开一个文件对象，使用Python内置的open()函数，传入文件名和标示符：</p>\n<p>file open 最后需要file.close </p>\n<p>可以通过with open(“path”,’’) as f : 的写法来简写,这样写不用写f.close()</p>\n<p>open(‘path’,’rb’) //这样写才是读文件</p>\n<p>读时,f.read()会将文件全量写到内存里去,所以小文件这么简写还能接受,但若文件较大,内存会有较大压力.</p>\n<p>f.read(size),则是一次读取内容的大小.</p>\n<p>f.readlines()则是读成list的形式.</p>\n<p>open(‘path’,’wb’)//这样获取的文件操作实例是写对象</p>\n<p>f.write(“content”)</p>\n<p>同样也可以用with的写法来获取对象</p>\n<p><code>前者写对象的获取的实例,若文件存在,则会覆盖该文件</code></p>\n<p>open(‘path’,’wba’)这样的写法是续写文件</p>\n<h3 id=\"内存数据操作-StringIO-ByteIO\"><a href=\"#内存数据操作-StringIO-ByteIO\" class=\"headerlink\" title=\"内存数据操作(StringIO ByteIO)\"></a>内存数据操作(StringIO ByteIO)</h3><h3 id=\"操作文件和目录\"><a href=\"#操作文件和目录\" class=\"headerlink\" title=\"操作文件和目录\"></a>操作文件和目录</h3><p>os.path.join<br>os.path<br>os.path.exists()</p>\n<p>os.mkdir()<br>os.rmdir()</p>\n<p>os.path.abspath()</p>\n<h2 id=\"常用包\"><a href=\"#常用包\" class=\"headerlink\" title=\"常用包\"></a>常用包</h2><p>datetime.datetime</p>\n<p>即datetime包下的datetime类</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> datetime.datetime</span><br><span class=\"line\"><span class=\"keyword\">or</span> </span><br><span class=\"line\"><span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> datetime</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"获取当前时间\"><a href=\"#获取当前时间\" class=\"headerlink\" title=\"获取当前时间\"></a>获取当前时间</h3><p>datetime.now()</p>\n<h3 id=\"获取指定的时间\"><a href=\"#获取指定的时间\" class=\"headerlink\" title=\"获取指定的时间\"></a>获取指定的时间</h3><p>dt=datetime(2020,05,23,12,32)</p>\n<p><code>转成timestamp</code><br>dt.timestamp()</p>\n<p><code>timestamp to datetime</code></p>\n<p>datetime.fromtimestamp(t)</p>\n<p><code>转成格林制式时间</code><br>datetime.utcfromtimestamp(t)</p>\n<p><code>str转成datetime</code></p>\n<h2 id=\"collections\"><a href=\"#collections\" class=\"headerlink\" title=\"collections\"></a>collections</h2><h3 id=\"namedtuple\"><a href=\"#namedtuple\" class=\"headerlink\" title=\"namedtuple\"></a>namedtuple</h3><h3 id=\"deque-“双向列表”\"><a href=\"#deque-“双向列表”\" class=\"headerlink\" title=\"deque (“双向列表”)\"></a>deque (“双向列表”)</h3><h3 id=\"defaultdict\"><a href=\"#defaultdict\" class=\"headerlink\" title=\"defaultdict\"></a>defaultdict</h3><p>使用dict时，如果引用的Key不存在，就会抛出KeyError。如果希望key不存在时，返回一个默认值，就可以用defaultdict：</p>\n<h3 id=\"OrderedDict\"><a href=\"#OrderedDict\" class=\"headerlink\" title=\"OrderedDict\"></a>OrderedDict</h3><p>注意，OrderedDict的Key会按照插入的顺序排列，不是Key本身排序：</p>\n<h3 id=\"ChainMap-再研究\"><a href=\"#ChainMap-再研究\" class=\"headerlink\" title=\"ChainMap(再研究)\"></a>ChainMap(再研究)</h3><h3 id=\"Counter\"><a href=\"#Counter\" class=\"headerlink\" title=\"Counter\"></a>Counter</h3><p>Counter实际上也是dict的一个子类，上面的结果可以看出每个字符出现的次数。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"python小结3\"><a href=\"#python小结3\" class=\"headerlink\" title=\"python小结3\"></a>python小结3</h1><h2 id=\"模块\"><a href=\"#模块\" class=\"headerlink\" title=\"模块\"></a>模块</h2><h2 id=\"面向对象\"><a href=\"#面向对象\" class=\"headerlink\" title=\"面向对象\"></a>面向对象</h2><h3 id=\"类与实例\"><a href=\"#类与实例\" class=\"headerlink\" title=\"类与实例\"></a>类与实例</h3><p>python类的声()明会在类名上加<br>os.rmdir()</p>\n<p>eg</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n\n<p>构造函数</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self,field1,field2)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"访问控制\"><a href=\"#访问控制\" class=\"headerlink\" title=\"访问控制\"></a>访问控制</h3><p>python中 私有属性是通过 <strong>来标识,用</strong>标识后则表示该属性是这个类的私有属性,则意味着直接通过一般的*.__是难以访问到的.</p>\n<p>如果是<em>的形式,则也是声明将这个认作是私有变量的属性,但却是可以直接通过*.</em>*的形式进行访问的.</p>\n<p>`<br>注意:<strong>的属性并不是完全不能用实例直接访问,如Student类为例通过student._Stuent</strong>name的形式也能直接访问</p>\n<p>从这里来看,这一点是不太符合面向对象编程的精神的,也就是说python解释器不会从根本上防止你乱搞,取用哪种编程规范主要还是要靠自觉</p>\n<p>`</p>\n<h3 id=\"继承与多态\"><a href=\"#继承与多态\" class=\"headerlink\" title=\"继承与多态\"></a>继承与多态</h3><p>总得来讲与java类似.但因为python是动态语言,所以它符合”鸭子类型”的特点,即在多态使用时,只要具有同样的方法,即可接收调用.</p>\n<h3 id=\"获取对象信息\"><a href=\"#获取对象信息\" class=\"headerlink\" title=\"获取对象信息\"></a>获取对象信息</h3><p>通过types模块下的type()方法来获取对象类型</p>\n<p>通过isinstance()来判断是否是这个类,可用于测试继承,也可通过逗号分隔,测试是不是这些类其中之一<br>通过dir()获取一个对象的所有属性和方法</p>\n<h3 id=\"实例属性与类属性\"><a href=\"#实例属性与类属性\" class=\"headerlink\" title=\"实例属性与类属性\"></a>实例属性与类属性</h3><p>python 是动态语言,所以可以在创建实例后再赋值</p>\n<p>eg:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">student=Stuent()</span><br><span class=\"line\">student.score=<span class=\"number\">90</span></span><br></pre></td></tr></table></figure>\n<p>即这score是后续才赋值上去的.</p>\n<p>这就是实例属性</p>\n<p>而本身类需要绑定一些属性呢,这就可以直接定义在class中,即类属性.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\">    name=<span class=\"string\">'ken'</span></span><br><span class=\"line\">    age=<span class=\"number\">18</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"面向对象进阶\"><a href=\"#面向对象进阶\" class=\"headerlink\" title=\"面向对象进阶\"></a>面向对象进阶</h2><h3 id=\"使用slots\"><a href=\"#使用slots\" class=\"headerlink\" title=\"使用slots\"></a>使用<strong>slots</strong></h3><p>因为动态语言的特性,python实例在创建后还能再绑定方法与属性. 这里如果我们想要约束只绑定某些属性时可以通过</p>\n<p><strong>slots</strong>(a,b)的形式来操作.</p>\n<p>#</p>\n<p>注意:该类若被子类继承,在子类未定义<strong>slots</strong>时,子类实例是不会生效的.</p>\n<h3 id=\"property\"><a href=\"#property\" class=\"headerlink\" title=\"@property\"></a>@property</h3><p>类似java getter</p>\n<p>@feild.setter</p>\n<h3 id=\"多重继承\"><a href=\"#多重继承\" class=\"headerlink\" title=\"多重继承\"></a>多重继承</h3><p>因为python是动态语言,所以能够继承多个类,但需要考虑下设计理念,即扩展继承时,扩展继承的类可以命名为**Runnable,与 XXMixIn</p>\n<h3 id=\"定制类的方法\"><a href=\"#定制类的方法\" class=\"headerlink\" title=\"定制类的方法\"></a>定制类的方法</h3><p><strong>init</strong><br><strong>iter</strong><br><strong>str</strong></p>\n<p>等方法,这些方法统一后面来整理</p>\n<h3 id=\"枚举类\"><a href=\"#枚举类\" class=\"headerlink\" title=\"枚举类\"></a>枚举类</h3><h3 id=\"元类有些类似反射\"><a href=\"#元类有些类似反射\" class=\"headerlink\" title=\"元类有些类似反射\"></a>元类有些类似反射</h3><p>后面再定向研究</p>\n<h2 id=\"错误与调试\"><a href=\"#错误与调试\" class=\"headerlink\" title=\"错误与调试\"></a>错误与调试</h2><p>try…except…finally..</p>\n<h2 id=\"文件读写\"><a href=\"#文件读写\" class=\"headerlink\" title=\"文件读写\"></a>文件读写</h2><h3 id=\"读文件\"><a href=\"#读文件\" class=\"headerlink\" title=\"读文件\"></a>读文件</h3><p>要以读文件的模式打开一个文件对象，使用Python内置的open()函数，传入文件名和标示符：</p>\n<p>file open 最后需要file.close </p>\n<p>可以通过with open(“path”,’’) as f : 的写法来简写,这样写不用写f.close()</p>\n<p>open(‘path’,’rb’) //这样写才是读文件</p>\n<p>读时,f.read()会将文件全量写到内存里去,所以小文件这么简写还能接受,但若文件较大,内存会有较大压力.</p>\n<p>f.read(size),则是一次读取内容的大小.</p>\n<p>f.readlines()则是读成list的形式.</p>\n<p>open(‘path’,’wb’)//这样获取的文件操作实例是写对象</p>\n<p>f.write(“content”)</p>\n<p>同样也可以用with的写法来获取对象</p>\n<p><code>前者写对象的获取的实例,若文件存在,则会覆盖该文件</code></p>\n<p>open(‘path’,’wba’)这样的写法是续写文件</p>\n<h3 id=\"内存数据操作-StringIO-ByteIO\"><a href=\"#内存数据操作-StringIO-ByteIO\" class=\"headerlink\" title=\"内存数据操作(StringIO ByteIO)\"></a>内存数据操作(StringIO ByteIO)</h3><h3 id=\"操作文件和目录\"><a href=\"#操作文件和目录\" class=\"headerlink\" title=\"操作文件和目录\"></a>操作文件和目录</h3><p>os.path.join<br>os.path<br>os.path.exists()</p>\n<p>os.mkdir()<br>os.rmdir()</p>\n<p>os.path.abspath()</p>\n<h2 id=\"常用包\"><a href=\"#常用包\" class=\"headerlink\" title=\"常用包\"></a>常用包</h2><p>datetime.datetime</p>\n<p>即datetime包下的datetime类</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> datetime.datetime</span><br><span class=\"line\"><span class=\"keyword\">or</span> </span><br><span class=\"line\"><span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> datetime</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"获取当前时间\"><a href=\"#获取当前时间\" class=\"headerlink\" title=\"获取当前时间\"></a>获取当前时间</h3><p>datetime.now()</p>\n<h3 id=\"获取指定的时间\"><a href=\"#获取指定的时间\" class=\"headerlink\" title=\"获取指定的时间\"></a>获取指定的时间</h3><p>dt=datetime(2020,05,23,12,32)</p>\n<p><code>转成timestamp</code><br>dt.timestamp()</p>\n<p><code>timestamp to datetime</code></p>\n<p>datetime.fromtimestamp(t)</p>\n<p><code>转成格林制式时间</code><br>datetime.utcfromtimestamp(t)</p>\n<p><code>str转成datetime</code></p>\n<h2 id=\"collections\"><a href=\"#collections\" class=\"headerlink\" title=\"collections\"></a>collections</h2><h3 id=\"namedtuple\"><a href=\"#namedtuple\" class=\"headerlink\" title=\"namedtuple\"></a>namedtuple</h3><h3 id=\"deque-“双向列表”\"><a href=\"#deque-“双向列表”\" class=\"headerlink\" title=\"deque (“双向列表”)\"></a>deque (“双向列表”)</h3><h3 id=\"defaultdict\"><a href=\"#defaultdict\" class=\"headerlink\" title=\"defaultdict\"></a>defaultdict</h3><p>使用dict时，如果引用的Key不存在，就会抛出KeyError。如果希望key不存在时，返回一个默认值，就可以用defaultdict：</p>\n<h3 id=\"OrderedDict\"><a href=\"#OrderedDict\" class=\"headerlink\" title=\"OrderedDict\"></a>OrderedDict</h3><p>注意，OrderedDict的Key会按照插入的顺序排列，不是Key本身排序：</p>\n<h3 id=\"ChainMap-再研究\"><a href=\"#ChainMap-再研究\" class=\"headerlink\" title=\"ChainMap(再研究)\"></a>ChainMap(再研究)</h3><h3 id=\"Counter\"><a href=\"#Counter\" class=\"headerlink\" title=\"Counter\"></a>Counter</h3><p>Counter实际上也是dict的一个子类，上面的结果可以看出每个字符出现的次数。</p>"},{"_content":"version: '2.4'\nservices:\n  sjksh-store-info:\n    image: registry.lisong.pub:28500/hy/hy-sjksh-info-v1.5\n    container_name: hy-sjksh-info\n    cpus: 4\n    mem_limit: 2g\n    restart: unless-stopped\n    extra_hosts:\n      - \"data1:10.103.22.40\"\n      - \"data2:10.103.22.64\"\n      - \"data3:10.103.22.65\"\n      - \"app1:10.103.22.66\"\n      - \"app2:10.103.22.67\"\n      - \"app3:10.103.22.68\"\n    env_file:\n      - common.env\n    environment:\n      - JAVA_OPTIONS=-XX:CompressedClassSpaceSize=32m\n","source":"_posts/王阁/技术/运维/yd_server_config/sjksh_store_info/docker-compose.yaml","raw":"version: '2.4'\nservices:\n  sjksh-store-info:\n    image: registry.lisong.pub:28500/hy/hy-sjksh-info-v1.5\n    container_name: hy-sjksh-info\n    cpus: 4\n    mem_limit: 2g\n    restart: unless-stopped\n    extra_hosts:\n      - \"data1:10.103.22.40\"\n      - \"data2:10.103.22.64\"\n      - \"data3:10.103.22.65\"\n      - \"app1:10.103.22.66\"\n      - \"app2:10.103.22.67\"\n      - \"app3:10.103.22.68\"\n    env_file:\n      - common.env\n    environment:\n      - JAVA_OPTIONS=-XX:CompressedClassSpaceSize=32m\n","slug":"王阁/技术/运维/yd_server_config/sjksh_store_info/docker-compose","published":1,"date":"2021-04-26T13:52:35.000Z","updated":"2021-04-26T13:52:35.000Z","title":"王阁/技术/运维/yd_server_config/sjksh_store_info/docker-compose","comments":1,"layout":"post","photos":[],"link":"","_id":"clegiqsj1009fu6pw9pejef8q","content":"{\"version\":\"2.4\",\"services\":{\"sjksh-store-info\":{\"image\":\"registry.lisong.pub:28500/hy/hy-sjksh-info-v1.5\",\"container_name\":\"hy-sjksh-info\",\"cpus\":4,\"mem_limit\":\"2g\",\"restart\":\"unless-stopped\",\"extra_hosts\":[\"data1:10.103.22.40\",\"data2:10.103.22.64\",\"data3:10.103.22.65\",\"app1:10.103.22.66\",\"app2:10.103.22.67\",\"app3:10.103.22.68\"],\"env_file\":[\"common.env\"],\"environment\":[\"JAVA_OPTIONS=-XX:CompressedClassSpaceSize=32m\"]}}}","site":{"data":{}},"excerpt":"","more":"{\"version\":\"2.4\",\"services\":{\"sjksh-store-info\":{\"image\":\"registry.lisong.pub:28500/hy/hy-sjksh-info-v1.5\",\"container_name\":\"hy-sjksh-info\",\"cpus\":4,\"mem_limit\":\"2g\",\"restart\":\"unless-stopped\",\"extra_hosts\":[\"data1:10.103.22.40\",\"data2:10.103.22.64\",\"data3:10.103.22.65\",\"app1:10.103.22.66\",\"app2:10.103.22.67\",\"app3:10.103.22.68\"],\"env_file\":[\"common.env\"],\"environment\":[\"JAVA_OPTIONS=-XX:CompressedClassSpaceSize=32m\"]}}}"},{"title":"flink_transform","date":"2023-02-28T06:56:27.942Z","password":"7FKBKZrTTTPG2LnC","_content":"\n本文主要针对常用的算子，以记录，展示为主，Time & Window或有涉及，但或弱化，另会有专门的文章进行相关说明\n\n <!--more-->\n\n# Flink Transform\n\n\n\n## 1、基本转换算子\n\n1. map\n\n2. flatmap\n\n3. filter\n\n4. reduce\n\n5. aggregation\n\n   1. keyBy\n   2. sun()\n   3. max()\n   4. minBy()\n\n6. UDF\n\n   1. 特点是相应的算子+Function名称组成基本函数\n\n   2. 特点是相应的Rich+算子+Function组成富函数（较前者有更多的状态与属性）\n\n      1. Rich Function 有生命周期的概念。典型的生命周期方法有\n\n         1. open()方法，是RichFunction的初始化方法，也就是会开启一个算子的生命周期。当\n\n            一个算子的实际工作方法例如 map()或者 filter()方法被调用之前，open()会首先被调 用。所以像文件 IO 的创建，数据库连接的创建，配置文件的读取等等这样一次性的 工作，都适合在 open()方法中完成。\n\n         2. close()方法，是生命周期中的最后一个调用的方法，类似于解构方法。一般用来做一 些清理工作。\n\n         3. 实例参考 [FlinkSource](./FlinkSource.md) 中的MysqlReader的实例\n\n7. 分区算子\n\n   1. 逻辑分区\n\n      1. keyBy\n\n   2. 物理分区\n\n      1. 物理分区与 keyBy 另一大区别在于，keyBy 之后得到的是一个 KeyedStream，而物理分 区之后结果仍是 DataStream，且流中元素数据类型保持不变。从这一点也可以看出，分区算子 并不对数据进行转换处理，只是定义了数据的传输方式。\n\n      2. 分区策略\n\n         1. 随机分配(Random)\n         2. 轮询分配(Round-Robin)\n         3. 重缩放(Rescale)\n         4. 广播(Broadcast)\n\n      3. 算子\n\n         1.  随机分区(**shuffle**)\n\n            1. 将数据随 机地分配到下游算子的并行任务中去。所以可以把流中的数据随机打乱，均匀地 传递到下游任务分区因为是完全随机的，所以对于同样的输入数据, 每次执 行得到的结果也不会相同。\n\n         2. 轮询分区(**Round-Robin**)\n\n            1. 调用 DataStream 的.rebalance()方法\n               1. rebalance 使用的是 Round-Robin 负载均衡算法，可以将输入流数据平均分配到下游的并行任务中去。\n\n         3. 重缩放分区(**rescale**)\n\n            1. 当调用 rescale()方法时实底层也是使用 Round-Robin 算法进行轮询，但是只会将数据轮询发送到下游并行任务的一部分中\n            2. 当下游任务(数据接收方)的数量是上游任务(数据发送方)数量的整数倍时，rescale 的效率明显会更高。比如当上游任务数量是 2，下游任务数量是 6 时，上游任务其中一个分区 的数据就将会平均分配到下游任务的 3 个分区中。\n            3. 由于 rebalance 是所有分区数据的“重新平衡”，当 TaskManager 数据量较多时，这种跨节 点的网络传输必然影响效率;而如果我们配置的 task slot 数量合适，用 rescale 的方式进行“局 部重缩放”，就可以让数据只在当前 TaskManager 的多个 slot 之间重新分配，从而避免了网络 传输带来的损耗。\n            4. 从底层实现上看，rebalance 和 rescale 的根本区别在于任务之间的连接机制不同。rebalance 将会针对所有上游任务(发送数据方)和所有下游任务(接收数据方)之间建立通信通道，这 是一个笛卡尔积的关系;而 rescale 仅仅针对每一个任务和下游对应的部分任务之间建立通信 通道，节省了很多资源\n\n         4. 广播(**broadcast**)\n\n            1. 这种方式其实不应该叫做“重分区”，因为经过广播之后，数据会在不同的分区都保留一 份，可能进行重复处理。可以通过调用 DataStream 的 broadcast()方法，将输入数据复制并发送 到下游算子的所有并行任务中去。\n\n         5. 全局分区(**global**)\n\n            1. 全局分区也是一种特殊的分区方式。这种做法非常极端，通过调用.global()方法，会将所\n            2. 有的输入流数据都发送到下游算子的第一个并行子任务中去。这就相当于强行让下游任务并行 度变成了 1，所以使用这个操作需要非常谨慎，可能对程序造成很大的压力。\n\n         6. 自定义分区(**Custom**)\n\n            1. 当 Flink 􏰀供的所有分区策略都不能满足用户的需求时，我们可以通过使用 partitionCustom()方法来自定义分区策略。\n\n               在调用时，方法需要传入两个参数，第一个是自定义分区器(Partitioner)对象，第二个 是应用分区器的字段，它的指定方式与 keyBy 指定 key 基本一样:可以通过字段名称指定， 也可以通过字段位置索引来指定，还可以实现一个 KeySelector。\n\n               \n\n## 2、 部份算子的示例\n\n### 2.1 UDF的算子示例\n\nUDF算子的实现一般有三种方式\n\n1. 支持lambda的方式\n\n   1. 这种方式存在泛型信息被擦除的情况， Flink无法自动推断输出的类型信息,所以要显式的指定类型信息，否则输出将被识为Object类型，这会导致低效的序列化。\n\n   2. .returns()\n\n   3. ```java\n          words.flatMap(wordFlatMap).print();\n              words.flatMap((String s, Collector<Tuple2<String, Integer>> collector) -> {\n                          for (String ss : s.split(\"\\\\s+\")) {\n                              collector.collect(Tuple2.of(ss, 1));\n                          }\n                      }).returns(Types.TUPLE(Types.STRING, Types.INT))\n                      .print();\n      ```\n\n   4. \n\n2. 匿名类\n\n   1. 下面这个示例不算匿名内部类，但有java基础的也能看得明白。\n\n   2. ```java\n       FlatMapFunction wordFlatMap = new FlatMapFunction<String, Tuple2<String, Integer>>() {\n                  @Override\n                  public void flatMap(String s, Collector<Tuple2<String, Integer>> collector) throws Exception {\n                      for (String ss : s.split(\"\\\\s+\")) {\n                          collector.collect(Tuple2.of(ss, 1));\n                      }\n                      ;\n                  }\n              };\n      ```\n\n3. 独立的实现类\n\n   ```java\n   package sunrise.demo.function.agg;\n   \n   import org.apache.flink.api.common.functions.RichMapFunction;\n   import org.apache.flink.api.common.state.MapState;\n   import org.apache.flink.api.common.state.MapStateDescriptor;\n   import org.apache.flink.api.java.tuple.Tuple2;\n   import org.apache.flink.configuration.Configuration;\n   import sunrise.demo.pojo.CarInfo;\n   \n   import java.util.Map;\n   \n   /**\n    * @author kuiqwang\n    * @emai wqkenqingto@163.com\n    * @time 2023/2/9\n    * @desc\n    */\n   \n   public class WordMapFunction extends RichMapFunction<Tuple2<String, Integer>, Tuple2<String, Integer>> {\n       MapState<String, Integer> mapState = null;\n   \n       //车辆最后的车速\n       @Override\n       public void open(Configuration parameters) throws Exception {\n           super.open(parameters);\n   \n           MapStateDescriptor<String, Integer> wordCountMap = new MapStateDescriptor<String, Integer>(\n                   \"word-count\",\n                   String.class, Integer.class);\n           mapState = getRuntimeContext().getMapState(wordCountMap);\n   \n       }\n   \n   \n       @Override\n       public Tuple2<String, Integer> map(Tuple2<String, Integer> s) throws Exception {\n           if (null == mapState.get(s.f0)) {\n               mapState.put(s.f0, 1);\n           } else {\n               mapState.put(s.f0, mapState.get(s.f0) + 1);\n           }\n           return Tuple2.of(s.f0, mapState.get(s.f0));\n       }\n   }\n   \n   ```\n\n---\n\n\n\n \n\n","source":"_posts/王阁/技术/大数据/flink/2023/flink_transform.md","raw":"title:  flink_transform\ndate:  2023年 2月22日\ntags: [flink、transform]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n本文主要针对常用的算子，以记录，展示为主，Time & Window或有涉及，但或弱化，另会有专门的文章进行相关说明\n\n <!--more-->\n\n# Flink Transform\n\n\n\n## 1、基本转换算子\n\n1. map\n\n2. flatmap\n\n3. filter\n\n4. reduce\n\n5. aggregation\n\n   1. keyBy\n   2. sun()\n   3. max()\n   4. minBy()\n\n6. UDF\n\n   1. 特点是相应的算子+Function名称组成基本函数\n\n   2. 特点是相应的Rich+算子+Function组成富函数（较前者有更多的状态与属性）\n\n      1. Rich Function 有生命周期的概念。典型的生命周期方法有\n\n         1. open()方法，是RichFunction的初始化方法，也就是会开启一个算子的生命周期。当\n\n            一个算子的实际工作方法例如 map()或者 filter()方法被调用之前，open()会首先被调 用。所以像文件 IO 的创建，数据库连接的创建，配置文件的读取等等这样一次性的 工作，都适合在 open()方法中完成。\n\n         2. close()方法，是生命周期中的最后一个调用的方法，类似于解构方法。一般用来做一 些清理工作。\n\n         3. 实例参考 [FlinkSource](./FlinkSource.md) 中的MysqlReader的实例\n\n7. 分区算子\n\n   1. 逻辑分区\n\n      1. keyBy\n\n   2. 物理分区\n\n      1. 物理分区与 keyBy 另一大区别在于，keyBy 之后得到的是一个 KeyedStream，而物理分 区之后结果仍是 DataStream，且流中元素数据类型保持不变。从这一点也可以看出，分区算子 并不对数据进行转换处理，只是定义了数据的传输方式。\n\n      2. 分区策略\n\n         1. 随机分配(Random)\n         2. 轮询分配(Round-Robin)\n         3. 重缩放(Rescale)\n         4. 广播(Broadcast)\n\n      3. 算子\n\n         1.  随机分区(**shuffle**)\n\n            1. 将数据随 机地分配到下游算子的并行任务中去。所以可以把流中的数据随机打乱，均匀地 传递到下游任务分区因为是完全随机的，所以对于同样的输入数据, 每次执 行得到的结果也不会相同。\n\n         2. 轮询分区(**Round-Robin**)\n\n            1. 调用 DataStream 的.rebalance()方法\n               1. rebalance 使用的是 Round-Robin 负载均衡算法，可以将输入流数据平均分配到下游的并行任务中去。\n\n         3. 重缩放分区(**rescale**)\n\n            1. 当调用 rescale()方法时实底层也是使用 Round-Robin 算法进行轮询，但是只会将数据轮询发送到下游并行任务的一部分中\n            2. 当下游任务(数据接收方)的数量是上游任务(数据发送方)数量的整数倍时，rescale 的效率明显会更高。比如当上游任务数量是 2，下游任务数量是 6 时，上游任务其中一个分区 的数据就将会平均分配到下游任务的 3 个分区中。\n            3. 由于 rebalance 是所有分区数据的“重新平衡”，当 TaskManager 数据量较多时，这种跨节 点的网络传输必然影响效率;而如果我们配置的 task slot 数量合适，用 rescale 的方式进行“局 部重缩放”，就可以让数据只在当前 TaskManager 的多个 slot 之间重新分配，从而避免了网络 传输带来的损耗。\n            4. 从底层实现上看，rebalance 和 rescale 的根本区别在于任务之间的连接机制不同。rebalance 将会针对所有上游任务(发送数据方)和所有下游任务(接收数据方)之间建立通信通道，这 是一个笛卡尔积的关系;而 rescale 仅仅针对每一个任务和下游对应的部分任务之间建立通信 通道，节省了很多资源\n\n         4. 广播(**broadcast**)\n\n            1. 这种方式其实不应该叫做“重分区”，因为经过广播之后，数据会在不同的分区都保留一 份，可能进行重复处理。可以通过调用 DataStream 的 broadcast()方法，将输入数据复制并发送 到下游算子的所有并行任务中去。\n\n         5. 全局分区(**global**)\n\n            1. 全局分区也是一种特殊的分区方式。这种做法非常极端，通过调用.global()方法，会将所\n            2. 有的输入流数据都发送到下游算子的第一个并行子任务中去。这就相当于强行让下游任务并行 度变成了 1，所以使用这个操作需要非常谨慎，可能对程序造成很大的压力。\n\n         6. 自定义分区(**Custom**)\n\n            1. 当 Flink 􏰀供的所有分区策略都不能满足用户的需求时，我们可以通过使用 partitionCustom()方法来自定义分区策略。\n\n               在调用时，方法需要传入两个参数，第一个是自定义分区器(Partitioner)对象，第二个 是应用分区器的字段，它的指定方式与 keyBy 指定 key 基本一样:可以通过字段名称指定， 也可以通过字段位置索引来指定，还可以实现一个 KeySelector。\n\n               \n\n## 2、 部份算子的示例\n\n### 2.1 UDF的算子示例\n\nUDF算子的实现一般有三种方式\n\n1. 支持lambda的方式\n\n   1. 这种方式存在泛型信息被擦除的情况， Flink无法自动推断输出的类型信息,所以要显式的指定类型信息，否则输出将被识为Object类型，这会导致低效的序列化。\n\n   2. .returns()\n\n   3. ```java\n          words.flatMap(wordFlatMap).print();\n              words.flatMap((String s, Collector<Tuple2<String, Integer>> collector) -> {\n                          for (String ss : s.split(\"\\\\s+\")) {\n                              collector.collect(Tuple2.of(ss, 1));\n                          }\n                      }).returns(Types.TUPLE(Types.STRING, Types.INT))\n                      .print();\n      ```\n\n   4. \n\n2. 匿名类\n\n   1. 下面这个示例不算匿名内部类，但有java基础的也能看得明白。\n\n   2. ```java\n       FlatMapFunction wordFlatMap = new FlatMapFunction<String, Tuple2<String, Integer>>() {\n                  @Override\n                  public void flatMap(String s, Collector<Tuple2<String, Integer>> collector) throws Exception {\n                      for (String ss : s.split(\"\\\\s+\")) {\n                          collector.collect(Tuple2.of(ss, 1));\n                      }\n                      ;\n                  }\n              };\n      ```\n\n3. 独立的实现类\n\n   ```java\n   package sunrise.demo.function.agg;\n   \n   import org.apache.flink.api.common.functions.RichMapFunction;\n   import org.apache.flink.api.common.state.MapState;\n   import org.apache.flink.api.common.state.MapStateDescriptor;\n   import org.apache.flink.api.java.tuple.Tuple2;\n   import org.apache.flink.configuration.Configuration;\n   import sunrise.demo.pojo.CarInfo;\n   \n   import java.util.Map;\n   \n   /**\n    * @author kuiqwang\n    * @emai wqkenqingto@163.com\n    * @time 2023/2/9\n    * @desc\n    */\n   \n   public class WordMapFunction extends RichMapFunction<Tuple2<String, Integer>, Tuple2<String, Integer>> {\n       MapState<String, Integer> mapState = null;\n   \n       //车辆最后的车速\n       @Override\n       public void open(Configuration parameters) throws Exception {\n           super.open(parameters);\n   \n           MapStateDescriptor<String, Integer> wordCountMap = new MapStateDescriptor<String, Integer>(\n                   \"word-count\",\n                   String.class, Integer.class);\n           mapState = getRuntimeContext().getMapState(wordCountMap);\n   \n       }\n   \n   \n       @Override\n       public Tuple2<String, Integer> map(Tuple2<String, Integer> s) throws Exception {\n           if (null == mapState.get(s.f0)) {\n               mapState.put(s.f0, 1);\n           } else {\n               mapState.put(s.f0, mapState.get(s.f0) + 1);\n           }\n           return Tuple2.of(s.f0, mapState.get(s.f0));\n       }\n   }\n   \n   ```\n\n---\n\n\n\n \n\n","slug":"王阁/技术/大数据/flink/2023/flink_transform","published":1,"updated":"2023-02-28T08:23:53.953Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cleozhbo40000vnpwgi7iay9o","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"d31b858d923ff104269f028855072839e32b55fc58ac90ca9e339a91c54652cd\">94c458ca03fb8f55ff41ae12673c8ebb87feefb1c3cd51eb2228df3694175c15034c6d667641e1d90e8f76ecde9f6c004b35885240133a86da7d7dd50c3460d004b58c76d1250888674c8f9b125d5aa8940cf8129de0ee89537442ed8d733c5e5de0b96487741bb7c3687d6674c69c2e99bf8e252987e367350355fb95f20df82ee4645b25f6e7d67fd93426ef585b07a9faaf02958ecb40920c67c0ae548b1ee3b593e7d4ef08ff8d49b311f0ad8c35995380502278e1693713b82faef864f6de34d055921684459ad6ceda725c47a77baf2cbb6e1b324afe30d469cad4e1cf370ffe4ca6ff77fd42e1850267811cfeb557254e68cb7c81cf93160d7a680a6494ed21669655960c4f77bb87c119d5cb550a6d9f176a3c57b6cfc155f67047b3c4d5319ec14209209cb88698c3272ca0dda803ba9df398cd1aeec22e14d79210ef9771aec357564b311921af76547fe3b4e0565ff29c1a9b02fd8719003d94e56dd081d30693662c791248247050b1be860a70f4c06926305d0f6a4ec883f548e4154f8b8494a1f5b59655515dbc28ddaafaa75eed9c360ed180ece6442ecac0b65481dd8e28528430bf2d27436e4e221de8f71f3dc6a1c2f97b733435321f74f9f284c8d8c50092c27a7583df867d8cf28929f31b5790f091182417504d5d5eff574df38c5f3adf3ab60e17f02d750b16bc36ea5dd8253abb630bc31b18943e9897b719df98e964b2d760ba9d945cc896a28b8b98bcb59dcaa7aa05345f897d254b4ef35a827361b9831e8d037c4a89e183b2614e9fdcc6b82e026cb3e67ebe383030574852861ce25c41775d3ca83bf7f583dfa953124b85e60e06c330012e44f063ad9b64c1000e619077e105a4a0ca414c2ecb518fe0b0077a62990d1167e9df14ab9cea1587206758b73fdb01bb47a41d478da6243ee9576514f114266cfd3e0cba678b1da29b6f62393a9c5160c215186f40b2211fcfe79db8258cdb6f5d9efca195ed1d1a6a62b9e5d2789e143d47b4f8137f97f19177d8cad16892ad95022140ef06e4ece151dd91bb17d6728bff813b9c11c796c768d4b000c2532adf99e858260e1038e0c7af3da84d2b5cf61c6feeefbf5889757a0dcce1c67bfdffed19c9efa651874a4bb4ba405bd5e7c110080908724df1834c03f38a28f322646c668645173584ec7538ba8c64023ed9d3d13f4172190d462bf80e7467a20085c4e7474df3bffb3fdbf6220a4d2e4e95694cd87f640a9a09f071574d274cf2cd8c58e9c06394c6f564146fb2e17c1c611dacf1172f7c403034951da9d60004f260d59f61db85ce1014f96d8ea59a053a06db1aa34d95d0491ca0b18a5ee2cbf32e7fc8676e6ec9dd4792e2647e2bcaa77057179181fe93ca54e21980d74e21f5c2c19a008ecb3f60fd512ed2e7c24ca052e3a2c6dcbefe3e26fa98eb012810b21a065b7cfc6c441adaf6d83ef1886297108a74827e6cb09fbbafd4421447e5fe8187816e1fd90724de98dd69c4cd00a6972898e0a0afcb3b0b83ef3ded1c06603736ab7f9a1e5fce90447689f93691cdd7ba21dab6dc4b50bbd7b9971b5cac5d44b767678ad3c7c0fd2aace87e63e553e8daf23b8c3aab806480de928e64327cb85dc54184dc24c1c8815d8228d293bb49657b4e11970fd2b15955263eaa3183340cc3cc635436d842b89985750b705c9265ecefd0bb00cf6d07c28f1ff73ecb0f70d4416cf091085ead8a18bfea98f46b7edd270742f2b0bf6f44f13838e1987f2db229849461a79b64cfbf514797e96ca58d29e28a33a3e01277c6f50426eeb1616b3dfad0b002f927ca2a1dba1ba07dded6f9e3d7326cb3c59e6a3c1fa8d071e324aae6cb56b80c29e2cc6322aa21680ca64a298a7e1626bcaf17a64ce08ddd1a70cde4d9f375f40cc62a39efe32126503dab61bb3c4e7dc28ea0163d0f6af3356ca59ebefe28d932f3a305533f640a4208061b5a1b58fac617c8f95b1d8f4ea3f35814e2a14e3f1bba7ac624c833a398ca9a0c3d38969d5d514a94431574fe920ee05c6a9a32a4fb374b8c6802f0076362f015520d083198df4a5af98c22a9154078b6ff0473cb90b3260ce06a5dd2a9b9776daf8a23eae0266f96093d900f974c70c223b9e165724057a7d16ca9fce98282bd2edecc5666f43ef4fa6c4d93842411bc49e157af7c9c6db8e00e2e8715303cd4aa81bdfa6dfd91c1f0f83266dbc8ec056a130d5e2af81c008ef2317de0aa0aa81d24c6d0f53cd5a3d7290530bf225f74b7f06e9e72538dabe4e840dd3463ad6d1e45bdb82a7bf844675d6b3d9607337538a5265ae0e12ab2fe3c9360df9881fb05943d7e3e00728612ea85f00db75a2572acdcd0ea28e1a62e40784753cf196d4d4a775c3d78b89810593b508e6b11df10725966e168d0ba8767c2dd5c20a1e43a4b709c2e444086b0b9147829c2fa3f816138b0fb2166d81e2565ee7c8572d36c56d0200bc9b76b3cdcd7696481e2e2f8a24b2e993672cf90724990ca860ff414f181ed492747cec448a711b5266159543184058a63f2cf581902544b9bf0092a59e4145832bec37cfcb3185c312f8e3d6110676f51521bec8fb7ae266819cf0ab5a4eaff3dd14a37801e61f4363ad97efce022758bc53e6153c1370024396bc5331cc82613d522a04ec0ff18be67ca956ecfdf3cf974d324f27887c317c7c02f64c871cb4b6f381e6c2c17ae49367c3433906617496f2684bb55a7d9cb9369f361de09cbe844ea2340e1fd51f790f3a2dc9e15cf77818e74015a3248397ef3bf2cb3f5b9346bd080e1c64cf22acd56f10c5a78d2db2f18a15fee363b9ba0010453b591dd66b09a15a4d0254db8c48a5e022dacad849b37588970d9e92232a24ef7f334fa5fad7c2a884a4f4bbd1587a39fcc8bb402e7b5a1daf07f2abb761aefd84dc76381a041dad1bb70f1cd8ac7c092034dd43d7a6498f7e8195d46dddbc947e7d65c1a21f8b948ddc30ffd4f589c2c74fe92b7e3d2d6a392ee43ad5479e74a0f029923cab25c5ea2bdad7c89b3801111e1cb816de4c5d1bcc6642eea3c06ea04d437aa909f98bfb15df974f746be1be17c0283538de02b038e6570f3d57274eb31250e88772c4d7191628ade721fc49ffa892266256d25b90b46b53a253464902fee47acdc4ea0113281596d5234630fada5bb730fb1e0765835059b485b57e37afe66282b86a4db49f7e64c2c8ae1b5df6cc60df121e4d3f5cc67c513924cb86d9d6959fe1b0d2951e6049428418c46b58f452d821331cbb7fc6fc69d523b3d1a2680dae09c7d444515a81393e238cb0b2fd851bd48d29753c50ee5b962758240f99e8a1f3b9666ba799600035d195556edd71aee868bf8f5eade452b475dba0cc85f5bc8d2428e44a8e665000b3c1d0a7596c545a8999de1a49b0464437d0df1b5bbde5a7f218f66aae6b8058c6823306fd9f5489df053346d740acbfb67002c671263c5b4d28b03a1cd4001f45f0b3ae58c7150f02654c7d4ec149a5ccc5f4b01a6ded74fd120aaf8218a1c37bb6e3fb81dbfe1f3072440ef8193ca832fad78350c90df83b1b3d30e1e8ea0477f60f333d68706825fc6f2791060b30c5da0f48669f7b257f281489e304b7d4cac67f39567bda74c8c6d847f790931e02d1b61c608f5ba964f5d26ab6e6d3e39c859055e6294f9e89c91e15ef83624f786f9ea7a4af9f7d58ed27fd8f6eef4659b39e0efd55b6685ce11efb98286f9d0e5b6233aa5e2002bfad228d7b5cf1b17848f76abbf38f2c4a3b5c7cfebc46e662379a785a5ebb61a37c99c0b969fbd17c20bf59417afa5bdd2ef6873a56d658614f55085178878cdceb3ec08616e8d4df9e6f3cfc5e0a08ae1ac6c066d3a32725368a14537b07d438dab7aeb9a5d0e86e174455737dd834cd01c116227a4cd4d6ea076c4030190efa6b73f1276da344d2515a177e5050cbd5af3df20a61eba5bd7c2cfcdc7acf7127db42e31dceef26d68853544afb2a1062ec8d0ab9358ae47db08f5729260b7ab500993c936136353c379047ba924142e59444b637421643289be4c2172e6da119c488842c30a7c5949aa4a7210a17fb169b1c717cff1b32ce08d9503fcb04e37730c699f5a4a2c6638ff19e7a86c71707bd6ce524c7500d963fe16d72367bacc952df91ca197a167561cf89ef9671ca36eef9c38cff11e034ca2de22b0b6450a16681e1f63505e0f1230042216d6c9667cd84b0252d1ae93b9381e304e8370892d0789df2ce0984c68743eb09329416d12e866a3c60bf73fa1a3d8075f9f3f8bfb6828833cde28f04489c2288c9a82f260f2483da2a4aa9df0162c4ef55baa6bb4d26175810915868f72a6617a2bccd88bba74fdfb22f71ebda7370654d83727c465f4e95ec2089eecfb1cce4f145f5d3e72f1eb808a8af9fafd7fd2e3c6384c558824e0518ab0b7a8ba8f996461f6bfe33b4e7acabab6e43bde094d804ee9fd335e028f5c5c6deac5892b05c6124d6fb2f1634e33d23a20bab3660e9003943a8df4ba81afd0a3533c93c4f1885db639c8961fb05e8b7bd2aed50fd38f688f7a32be1bdd3f3e20ad98b0a535171869926bfca87be60c00a3b16ea0ab287c8d5797e73ac5b27adc3653305509dba24ffcbc73efa3aed3ba15e8e97cff2dcc50f272565fa3610f7517789418a42f4e9d9807b052ec18974fb821e5a978142b1f185af3d658a03a2b8ab061ef7159a19b9e4cb0601606b72eaca03288ad856d6536c4b77a0e97ff421eeada5bf4c750695cf87aed854d1b0f2cf5ad6d45b8280dcbf0330e415666ab2169f74dc3c524138eae03c60b83d37922ef519faeddb32829f12a5ae9e176d93c9ca759c65b963493009400ee0e417a3ab61aa4372a191549f67f7601d7a2d0baa39b9a5eeb1e8f7e9393d29d0c0b5d3f371cefccf99ce543096d444591b83d60a14698a5b82f7a8ac8c19b77be7cd652618f0bc1f5f160408c07f9f268d35cac2cbe3d2d90370265306ddb7adbc3dcf20a8893aac6fc7ccd7045e9ea02046ae5c9b4beb28f88065843f0c1013ac8dddec4c9d1b07fedc6b88de950a39f47028f901adfd429da37e68bb088997c6636b99c8a0831b332706e7ae2d58e075dfd3402192b0795e3d8f9bade321a7eae01c9106f3fd6fdc1f6a282f3319d6e43884d6490aeed2147bb7b5418e593eb5197ea080382d16347743c1abc12e86f5e09f41b1c1a8b1c543b1bf13ebb611fa8347f7d206920fc2ac62c5aa8c575ca531e9b53e5732b89a7bf17eb967c6b52f596c945c700ca8fd764db42b9db9597f696822e837f5ab896f2a87c3e574b8156e728ea1ba9fcd2cda0888121f9d527d8c64914fb1511cdd752490cafb521f4f80396c315d6dd0af4a40515e29ce8dd13c9f65da5cd95af0489aa87ff9c53ccb3f5b3d39bd6a7b9d3453489b07012d8a08bdf0afd1408a2986c31bfdcbb676c2d98466a6e273628be5df3f53b7aedd4fbf59def6b4d09fe7dd339e1764a4d73376eeadd869d7ae1a4e7b41e3fa3ac566267114daf9c538d3debf72bc36431a2122b14dd5c9132f5135ae5cd32d7a3779e81ae4084a0d2bab258d9600c8060e3466f3c71218225a2a045e038c6f55f6f797a3e89c4e3021a955fffe9bf51dfbc25d163dd09515d2defff8592a4a793ad51946fbbded43c40357340b6894c0a51cd6aa4fa37fb72c45e2ee1e525184aef46775706909f58a7ce773ecdeb1543aaae5de695fed4c851486b9eea8ee15ad151b786fc95a5ab2a46fc7b876fc034d071e60b0aabca2361dd4ddfbfccb35db6d2a3d7dc1cfb7da8327165efe16405e8444e1a9d145f3aac51b088a27668c7cc3bbc343c6feb3c29ede12eea8b17bef092b579a178600c7045dc3c25cb270f7f7e634f36cc85eb64980610640776e26f911ef6cce43d90824ddc37e612a04eeb18fd82ee9497d9c8ae24ca8fa4aec1047152ad24995324a56b64916cfa175cbb80454024af09f92d2a7763b7c8906ad8cd6e2fb2108b31e8e3f90c8fbb448da15d47f28065825dcaaf6c12b2a942b580a6931146078eef962c30354f4cc7053de7d21d3ae55bd359ecfd92677fd369213b4d4c441d0698ff48477628f9604be832b468bf9416ad07b2339512495f97b62c2dcda6acf448716fb4999e4152e1e367bb800436bd7cda510693a66f6a74ad857498c22d935df522d967f2f82c63abf28e6fe5d2740ef74bebb5f11d53b92e3ebd55d311d8e48a2f792988e9e8ff48ef0b0309b3cd761243d730a66c828e980d22171a208dfbc087c77cde3e4f45fb9efc250157154e885823d5dbe82135be983aab3a6451ad7bf0735b416d59478f6c0eb61bc4437feca1de9d4111b29e8887f2973ebf86b1bea802bc7dd1709ebf7f736383a901d5b5358eacea9f0532caad7944b050ad49e5e68c85c0d13ec1cf5e7c48a70c4eaf1012c01f5b7c708f163c0c7d4e2f6bf85ff634895a527593d48b82b64901901f98846a730983b6bfbda4683075e82483e8f69900c74a91e6e1f4d70ae13cfc3bde42c26eaee34f522790432dc685b50765b4e6f6fe1d7c37f7c118732d8b86f9743e08e898924a3fa0a59550cb623aab6600a7a0f62a0814a080505c8cacc3c825c700aaaef7a26719f7edac41af98ef9c5fa78191ea192a4d00888ba49e5bd111ea83450d4d2aa9f3d6215b19e174538d9420f31246d113307434a2b7d8e547ec1f8e8ed64d32f24c3d02d72c821521dcab4482be5d5e48c1e14be7c955dc54cfe39973c4d4d3bb31349f0a0866ecaab92c1fe590ac15e4378d7785eb0284847d64b226bb6db9414c730e1f443a7f405b547a33da61a42b043ce6088a19a589fd264a57c36211d46f221a7806d3266e03e33aeea2af2b4b103dde6f21a3332f0e30682a6f7e9bbeb11a3041f38c26520e85611fed26e57a34d4182ba529ee9f09e7ae334a65de29ff002e909da4615d724bf77b5ef536803ea06156acbcd56abd6ed83e5733d69139c7c09cb48633611b13239aaa15ff6ff11ca8e151927cde4038b32040bb106e71d4fcad69aeecb0d512690c5e2f2ecbd9d73668a036bafbfad5e934c128885a79461e8c6e65f983f5f04652eda53561aecab509999fd6579ead6661d0bc01e9438b5df26f46dc1ea15bcb653c6e7d868b5256598ec653cf3d0c6780e5b3b517ec180b0ad784fc14a0fee9429a8d8c97960b815aa5d85f117d24bcc983821e5cb17f18e97784d7576f029484ee42aed51cf0416a7d6118c9e9114ea72ea2682fe89b88dce4229647bda553328eda03d439f8cfc739de752ed01527c8abaf8dd434fa15dd2ab9940233ef33c1b4687a02313380d31674194ded353de1bceb336e310e1166604c8e8eef25e1adf6596415fc187b898ca395763a0f827e04df63591d60c543269aad57ef2c0190e9585e0e22b89e75a48b2ee9a82b7a10229f4f5bf55beec49a3a11fd718e660a344f798f292d44d32cb2ced27fbf54179f5271d3cd3e2b2baf5943464cc853a890a7fa6a69af8b33451b26181c8bb0075492d0d359cbfdc2b5db839ebe7bef9e4ec5a28685043c7ea6a0db65639bd5c88c3ed5baf73c4a3f83be767dd4d67e234e1a65ac57abda57be2683a68dddf1489989400066a1e8bdc20d379e2f02b6cefe15d984e7da67bd4517d24accf8b1055bb743678a9df1e5541102e1cf01ee04760eab0ada88e6dc84066248083fe834fe2a074657f22dfe6365f3688bd5f0ac418bdbabfefec34b1d8a4e72ac3a760b5b1d37b10905222847677dcb3ab933c4182a31cbab5cc16b9ccd69e0793f472ea5a4e5bc51980b4b5b34d8d9a6b8253f4db16ba25699ed35bfe4905264060620a568000b2728691f0d34b0c765131e39ebe0a3dd0c060a63552055b5fd09eafee669f57c22a1ecdbc824ec0c3da2befdbd5ab911686b441c32d3b97a4ff631cda3d5e83754f549456d99cae5ee00fe258befd220aab7b4cbe063dbf9c3f1a57244b79e49bd3bb51292c52c76e028c40c85eabf5de898ee3f78a79c33b7ce2c1518559e0ac4ef8c17d7976fa4e796e5dcfd8eb49854e3c2106ae1915d50fd1beec6893a0383047113eb0c5e540f62d7990e4ba77018367198be94e1f2310cbdef7eb0d8f365cf97ee24824a48626c0a28b95b5b5dd46ce04fe269d891ff91778738ce540c66261f6f20522bf68a0a336a90e7f114cef46bdc3a541017c0652c6e58a4c23315020e9dfd5e2397135e692a7c0ad7651060d083e84a25e95dd5f37c420b67e1e706950fa6fb6204f26266f97bf010ec0671aa987b27834f20a40805285a6b4ce8a396f21f034a1b4031920bfbec8d693d0e3a80f6a36997d0d51f2732f1beadb432caee51ce16b2575a037812d1e7695b30a1227ab73305eea5e844a8a5f035c73dd986201fe0798745f32cc290d7ef70b5e5469cb96a9f3834a06fb93c8da744f4b0eda4e38beae05ef4e485bc2f23df798c75866f05ba0deef6b92574b0a5e0f5758399869ddac32b413001939aa1a281c30a317cf76992f59ba336339f632bd92457f8b5cfdbcc3c85bf641b944d5664df7a48a8eb4158c35dfb64a0240f868cfc5783d1ab9aaeb2c780f036adb3faf9b67b3b8d3ea8e2b16e9879c31cf33b9b065783269a5803e5ffa6c33bb7743654ab8d2cac9db165cab029b9471a4fa3120c7969e90a7228e150d64f01f9c0e2a47fa2ea1daf3b5ef121da636fe4f018af076be34528f673113cb94bcb0b7fee9639ef18bef02774e7521a771b78a292f7632acbd5838d64289d57949d432cc893e1ac882e414d6c39895e3010fabf167e19f4e75127aecd4a1837c6e30535c7c67bbf275ba29c4171ae7c9662a9ec87f3a2930c150a5684a964125c165e822d071d9525b344f8aa52f685b8beec482120fc10a3119d20da5e22805cf514a6ae28722e742139813bfe03c2b510652ace697d34fd4091ccabafae35d8097e36e97894e7eaf179a0b42b0337178ca29cd03de950104965f3b0b6d3fa9664db0f104e750421800df36507167ec38870289a365ca3b6dd4abdd79a74a7f6710daf186f6848ca6108848bd15e85c8efbcdfac58ee0b1c66453baa1db4002664344911f359b1926b92b84909bf582fbdeee6868536cdf1e91382a68afe208a5baf0fb9de6e9464fec6e64697baa83335493e62e29b806e17136cb42a79f2bf47dfc01a7f9b45156950b8d8c28c9b237aa1535eb0804eaea1273a4d624d8828a8582d7e9d43197fe24d05011f02d6cdb3cd8d400318e5395a52f514b96af03ee468236ea51c49faccedb1b3beb99d80a722f560a5dbbe448f30e401924730cf64b5f09de4e276e9b3486dae891cd97ba725ee274224bab11097f97b1cda377b2f3c285d8a7c05cab14079e9786fe82a05332c640c2e7e0fd826ff59ebd08d238f6566986256931d359263b299bfdee38c7e0b01ff22e33ed8a11c2aade5d04513b99e1086988b4db0797e43dfa101305653103344935091045bfb49158eb88f38fe06aac8097f0536f947c979da9195a93d4bad45b35d792c4503fefc613e4ab49b5a83cdd0884f5eff554c8555082acaebbf18f4ba08918dd4174b05da952df8eec69d9358f67ad743b24f5444c1c67a66ffba4c60134ee524203828f3b47baa7fe25f3ed72a93dbb227895d158f44df81a8bea333630e4086f75726fd6d8939fc75ea31014abd6d8973f439985212976ac41edea9e98a702c02683580476304c67e46ff906acfbdf2dd57817556cfa6f578f4aee809e6563d54f455e84febcbe1539e283d1f94e227c3bb32a5c3e5835d4b0eedb163aa26b64ed386f76adc6a24404a56d9d1b3fe4a348254ba75d5f117d7912aa0e28ed56e6719fa19e1a7168e5a69cb13defa331b00794406347eeca4e20f83cbea18b616b99aa0c0e93be02b8e5e97c66924f3500bee95e941b4ce273b9ebf2b7135f76accd2574d83af8d5ebaa8ee40ff9fafaea71419fde34af1334589dc2fdf22e1e70f0f8d4bfcf8419582f2d7329f36cdb5a7bf8b13468076cc5797c546104cdc72c82f4309aa390c3a38d2cd6e149fb6bf1e7545e1a9ff77eeb6d86324be5c4fc2091a58b489cc37347a9241c78ce0549862088c344447a48f0b147b88eadf9b455b2c99863ce740ce96f327fdfb7115b46bd9c4638d26b075027725c3f04f7947fe2a40ada0a71e63b8a91449d6cb49d9aa3dc15c77981cbf06b0f164179f406da556c75d26792282fe748cc0519c239fc494b4cfee2cd0c5284f76d389cdd7ec6e40caf92c40960d76ebc9709c161514a56788f2d6c96d802fde06a04271213896548d9fe4bbb9d0702682b52487495c57c9c773d9fc9cb5c8bb4be330ac0b8bcd69895daee886bb0d010260ddc59514ed325c3c3eeb0caa8646f42d13927cc28eb593cedf8524fbcabbb7fa31862ab00882d89a08adbc3beb298b5c9d6d154b85d7e5daa1f40d12853f210e426c4b09a25164f2538108bd05e720a52040755d8542f62aee72de1dd48f3dc0bbe2cd5a211b93c80bed6926b77ae55d9f11d0295ad31a75c971bf5a93510f11d60ef47c203c9c2e923868ce2f1e10af7f04b93dea950b54ed5f379b9eef503706f0917b8c3c91faaa11d9786fc5a8e5ff784128e9d4d66bf737b36a91243caeded92bfdb08bec5b56e51609ee3e724ca113095f08ca59b744178ac152aa94535cee31e95e5dc871dee3128565383662ef898dfb830677c601f614a7b86d6d8267a2c536afd1af36c54da8696e13507b99358b5cf1ca967f06540859bc0858f608e003f797eb7fc794401e015721c684e14677c162e02d5b42214669e3a0f4f28cf3c922dc45afb3aa181dceee3caa82ea9f749dd3ab26acfa0b553f03003de82165801cc6fa8d3d45c2fdc8de23034eb229445bd245140a14d2367963e8ea3c777eff20408cafbf288576d19b55a27ecbaaa3638412c92a53b2ccb6383de8052c8049ed1d425d4bfe2072a32746ba0c8e4e2fc969a7849cbfe795db630784f94517557999ec986087f0fc27d5c1a8be28a77decc081a21a45624d02e61f5a583167572fcbe5943ce8665a7a5e204e4c23a1f63175d6ab829d04bdb1646570aed6a127775814a7b2217a7fef5c3fe531ab9e85c1dedfe371e75062b53e242df44ab51af187c44a71aa623ed2b90b31b9f4884e42760bf5a9111fae40991b52d64084d940b2aa3dbaf58ca66a2b15bf43efea19f323b055efa36891888cb720dc5a69924abecd5590009d7b91f6fb143628bff810b6c55bf7a7f67e0a35d397b5a1b195bad7ea11e2721cb39c06ade6e4b7627bcbef96335eaed13187d2cf40470a5be6edda78b2bc13b684e39f6a87d7831d1a8a575295cf843d0778b23a3a4ebb926e948d950fa4f848d19a983d74e093d130d389a5dcd3497534c442cb792dbef48f9a71aa6f153fd8e9717077e89115bfcf3a34466efa0bb7ebd4c7438bac54bf4d1aa2fde09c16f1b4c39edc918b1cadfa0972f1eb891378ace8b4d3876e749072288b85a8b743157ebf462fe6d6a672b1d0bf06ee04671b232bf0bc7b83b089703d1cd73fc46d55f1062cef0086551f87665de95612e0822ed2815e171032077b253469346d1e40870c59cad81ccd11b6d01d3a9e1bc863b2699e087042fbbee509d5e566b97c72bb87e356428c76d922dd217d220a49e5918ef19b7a74bdba620af2858cfa8b3858e8cb1a1fb3ecb3a87cb0053bf1d88c91a3b7a25fea0c590a0e9917e8c49dcf6f930a9d3196efea8677541ba106f80e1b512e272eeec333adb30026714ede1ca340ea25ecb9197d9a2b60d9ee98ed19c8d8d14deee8ac60a76f46a81d676a91a38a944a9e75fd180699d752366ebfb6cda686100ede2f8e1d3dc11a6900ec2c22424b638501604f2863a53fd9716cfe433c3d8996df9dec40c0466cd84800db3c6ad8c7486ea4b8c129b33f8a0ac0e367da972692bbebfe78be04eeefb10211c7dca4d3aca315901697c74cd2b948cd65d5ee90fd9321c2d96c065cd2613e5a240e5b29579eb9bb68615cbf8c8f076f40efa61ccec5590635107abafd98c28864bf5d843e6dc029b39827cb1962bc70f62398a289b251bf3c630a25a62e7b736353028de1d0aa8a9a3ae708858ceb08ee9e0a7be5ce277ebdfb26998f30f3cd39dde91f25c6cbf7bd7b18027899351440853bdd7080d5dda021e30b66cf627045b54740e5f1496bd1a7bd44140dea509cb5c5a41271ee8adaebe6a2764543aad966dd53fda55c9e212e8effa6387a6216d0f33eb6d7270a228f164697f7b88fd81846554891012bb934fcb7ea1d121038e18aaf530c32ef538068a6ed7da7794317b42639ea99175d2d6b06e21ce70b511461eebcfa60a7e2ac414000973136f246edb2aeb5aef1f00a32002f8464de68d991f0cdb272b4286ee479351f508fd6a02cef30b2d330b945ee0ca1a86b4271782d67c49d787adb0e89bd53623611b754b8f5d2e1bf7cfbbbbbc169f4b818daaee2d9d157058e952ba1aebbe54db6c19a8f61808b5415bdcb0ae746499c8f8c7d7c501f42743d2513e9696652b4b22a978360622af3de3c16e7a6733e4eecfbbabec3715f6f1c4434653df716113ddb542184263ffa9183d40e177e83670fda30a0c1608a55176ae310cf9819ce5b0a0628c4d4033363183dd5281ddf46de476aa3aa18e707e96057f69108a5e39b6a70a095f6279d1570ae38dbda4f234413c509673bd70cf8d5684b5cd3926ed97add403fecbeef721d7f5edd9b40cf9fc209151a7766eae7ae0cb207b7cd3813c51f50f237536f922caee40b4c2ac86e3dc55c3a62646f36db93b5287b0b1c8b458880bb28a01dbfda98f6ba470bd4acc94454053d9de302f6a654ea29587ca913f6ce5ffe3db837a5f0edc298dd57bb436291458500570db70ef7ae26b9157c5918355d23d54071feccd60ae42eb343c4e88575f0ec179cdb4e34ac7fffef8c5b2f9387f0f76ecfb372ef038cdfa8ebe52482d0e7af5879dbc3ff40d89ffade0c729ba8e64a0a5d8f9677e22be972b01ffdb7934d59b4cc15d7eb6bf878b2e793cb791619fe14089f4ca378e3a67be33d70bfa207c2ad89717310a8e41051285e2e9e834335e73f95df3bfdd4c9534a528e790194f6282a55677afe54156982e3ecca400379cf3e22dfdbe472926bfba87dbbc99064a1abadd8b78ead9299acc32b3aa67cbc29578590cf0a02ffc03ec9da0acad4eeeeecbc15d86463b77c81235628e3129f01abcce8b365168e896fe47f2f5dd5ef6544341627acd471738c8f883bbd5e538848966bfc1d0232b5cffc98cb668e94bc94d53cd4453b270e2164f071ff57ff30edd90f11034a268db3df6c831068edc4d1ca9422bcbd3b2a3b7bbb0503bbbf79e11c3fc4b1b1184e597a5d0501d90cc6a0a60e0ff6f05514f4d2e5447bb5883a5ded7d47f2118893e10b3ed776aba562c98913f24b09d964f7224b2588cbe3ceddf8b821cb9246b201dc8f05e7d18a64614dc0cee69c714b9ff53e7bfbab17cc3576f19d11ece2a85e17aaad65efda2586c3e0c98ce52d2a01170d99e38e41e6ffde26a17a45582d171efb75b9f141e0868ee2e7419f868522eb9828d837b0e21dee2cb4e22e6117f97e28db03e39fcd2efec0731989d330cbda794c8ad4ac06181928a9ef378c56594cf8dbbd4925d9814c39459d5b49c318ef2155586dff813a19dd01f27d7ea3beb3c09d63631f1a0b317b962f05c0450e58f3c6eb992b122c6ad9b40684f4c9183e198eb2e4d4e8005529c485f5312f2d9246de6b99e342e11aa0e8af470c02f6109161021f53127197f63d514489c216fdb602abbcab9a610023cb5c000d34c7d0fae3edc0c73d325a2d46cbe17f1ffe75ce7be698658eafe657e816534c2adb17de78b61d34d3a6aa66bfb1134be9db116a375c0b48276e3367ec1a7db57dc705794b8e6d4904afc53b9a287e22a1971ff81b4e963fbb8ecfac2dec6b35e4734b129d7961d93afadcb841d3c7a83045cf345e08eda35588c909913d97f96c6d03b3d8dd736860ed133f870354a7a89909b7cc9a995fe47d81f3f3244a99d55c67822c0de61e2836976b098fa8ac70cfa9d87a13ca3a1e9f426615289dda55c5c5c9e9def429df586575082833533ea5c5e9284476283e1011854afc1e6df374d8e8d95039eb965ead7271c66bf3c35da0f0b16f0bb64b8073e39c02680535b4e9abc779737d0ec970fea279c24893f16817a351fab1cfc4fc4f0d741b74a1b0325719c1715b5189397fa7dea65b37c22541aaf955a1bfd74f1473187964e93ad12f27c3b4fb99eb8773fda555d55fc1ef6e1cd806f6ec435423db46d30acb5b96adcab0bf49fd4d30c2edb973385d89ae966a0cdc8294b94eba346e44e44132f9596cc783e1bd672932ce59e4b0f6d5b4c06c03b305654fd26773ef94a24b5fa31614fd2a98ebdb2ed77d826370db5d1079dbd5e516a311dab376e00395bc456932024aef6eca6e7b95695c8fb5249ce7e6257a2c594ec715130e34095b2a4cfa90310135a6b7cfb54408305304934c5676d7ecd57f01e32ef3a6b7516fffec4c043c9f1280eae2b91b053f5a4fd65d850b2f2ff4111855582574b9550187a08aba9c2cc1ca3a02b3b27f851debb3460dc09454a15039d37fe337d3fc7d23148304759080470e5d67517df35a460cff172ba0f9633ccdb32acca2289219038e58210182ba27f69fae809bfcab8259d706ed24f945af74940c9597f710d6429303e6e0594b9e963e0bba1d250cab627d151014e053b68b840de98830bc1619c00b5f7f0ab61151d28e6aeda0d1cc8176f250029a4785f7c7e420c271708f16a21563e5583d56c409a2355fed6dc144696fcfb189efce422772ad8a93ba1c595b6720770fbcc0bc5331ca58f2d1b85435724315ef41e3b17b29f884f9a01ad44daef9f9908bfc9e57dbeed7a9ff15c2d8fbbd3bbbec25fad5d04179fa58cf84d6d3889a2588458a43e398387ee39a46b2aa21fa9fa0bbdf4192d3100f053aa00ae8c28db275950e6947c82edb1401f65cb73df23471967c0983bbc1cde579f794c6bd7d7352c2c521597f209db7a2f0544268d0d6dbabfdb27a6e2c6b89475236076469468d3c32e03f0524e1a9ea64bf5dedba55eebdb5c75d1fe0aed114944984281a089e4b0fb525ed9eba13ea4265f0513d60f99b8299e26902636c64a610205bd3dc66f8b56aa93b7c10510eb8ecef0fa058043bbf691640de88640b25b52dd9850c71e9a3d8840086246ac3c03a75658ecf83520b3d00a2c329b22e76e1f5e5df047af1e70abefe2b5cdc72af7744871e49765707f1ffae183820f5d0873b07142e0b1c743818aab1cb05558eefeabcab16f961b251e8f6b285070724730910bdf6cee734d4374cad37aa4719ada864da8dac63001706447a935411800b07792af7d3257677c14bdcbe7ec735c8615a4e544deb59ceb98265308b1b66b00533042cd83183a06d728bec0834b6566bbd7e5b2bcf40d412afb20c0fac89ebae62a97d684c394a8ba14c774ac9c0e2b91ba1dc773fd584b5c191fd51dedf3884ea45c5e05f46301153d9161fae929d866509bb0c3b43ca64502110bcf4dfdcd197a6e50b5064b9ad070802769df4030dca95ad0734ab7936d97bcc8f6ed118519b4badcaada6767d7f663fdca0840900defd01798438446e4ca5719a902f092f8530fbcad8dc9a622c434724f8bd449e655fcbfcba5f700e694a9d1d45ca55af0a6dad90ac2be2e037e32127507686f64eed0f207ee074fd9039af22a9bf26dccfef937ed59169397f2eb4ccc8d78f6e0d2ba8751af8a16ba0c96ecf392b7ec534d5683bf6328e69d29dd43758df5614ffe43d724db6849f35197df25615ff59c68d6c078c1a8ae9da9ae70964b7223777f256d00b62e4f41efe450ca8e664a2b40ea17366555c9ef375068ec5acc86a339dfe4fd518fc8ca3701876415f1439d0a7752e5f7bfd0b6bab00d1cd1b708956df9ecf38655de10b1464ba2d09eca9b782ca3fe06970095c5c1c4a3bf9644f0a27f2aa7ea20aebc225f8e2ca5179dcba5e76e5d634a5f8b65fce4c74a2f4a30933e730d9c2ddb42f9a9396d1ed0511fe8258f3c97d4c1645cc3c46ddc3ed7ac1d45317372ea0bb8b74a0fd5f092867ae2db9b90cd9d66f4a7686d4b08348ccc82766a2d4b65c87700cb77f15d258f2fe84f80aab559d905a1b803dbbfc2bf7bc2f70cb92dead629e7b7dfe74d3220844f6129e9d9e28a59f0ed0c0a9eaf6d65f3fc3287bbf233796051cc32843c3d0c042033ec2f1172788447647b1e5bbfa4313ee28dbd62e678fef14e2415252781cfea4d474bc58e1753030c7cd5ed2c258253fb912ac64e11729f5f28eebddb570e8cd42e58ddd2ef5adb8842897c4ca40b45131c1bfd966a59f6b6e1f575b51b540f6dacb2b71c94bd5fb22fc582ed23191d0a1a9248eaa25a3503d3fc7bf7ce7fa904ac7fabd9535946c1834aa092db2fbc38fbcb59b29030da649899a6113eb8f066089c9fef98755fa2079876bcf67f03614e67974f3d14e0a16ac2acfc4dc23dbc117542bcbbc9e3ac47c5b11d445db91fc6944a4a57decd51b8e1a08e5762d86c66fa7f96bfcdddfda32eeed651b0c63f3e09c93c214ea25294dceeaf8bf44235cb03e7b860d281f53de37fb93121224f66e009433fd1bae4a32871dc21ee97d1678721d472c3d5540b3380dd6f581166415a71fda0572c0b0ba841f4eec67dddba9365b61a79de9974c35d17b14e9e6e81dffd477b6a2cb35f6a3bb80d8792fc4ebc492becee0250125b7332013fd64560284fbeb15e7f20fec76a03904f26226464d1495aff97d75e51ffde4485cff5e0a546c6a190d76f64f4b66a136611fa32ce38983eb03de8766d426b6f843816fc7b623bb88e10dbf2fba9f42cc12b55d8f0e7b357ebe7fb4dc9bde6f56599d1def2300ec4035cb7fd4ac7e269bceebbd45578fa2e2e908bbbef7377850ef6ea881fbbda5aca371141658bb214d5551ab7515ca7d404b8d9829c9212ee3c41508c66e30d3e0b37bf54ff9ad121ede78ba7be940ccbc3e10155d013e55f8490db5fea4d11ee0d73b6911de19f83cb68f914d50c3268232d1544403992a35244385d6fcba2de0c47eb32d1ce6cc15c491b58b906c038a4e7038b5800eb7a64309dcc08846d22af727b82c8a2755cf82d8e3c1be1bf74c3190838fd4d90b679e8ebf268e45e80e333cab631f5099316991fcc53d99bf63e1d7d29d0a147f992efdde081a0244e70f2de30ee79a7b2c12e6affbaf213e2204dcfb4bf0a6986cbb5b3607d6cd147c9ea76f336a643146ddab5b5461fe4961d14fbf58df4c1aaf663f5e1d961ca7943346f3684115a439e7c9c657163a9c45c4c327ce61da0e952042977997ccb3ecf196b2e2b8fc175ad976620e4fcfce577d31a3c5b360177c1486ec3b0f607300b32c9af8ec2440c39955f2578e0991791300f93c13f3371df3aa5e4b76fdfd2ab6163b76fc37f0cbec3a908657f6f1e5bd046fe84e1b68041724ec8b927fffed83af954ba81877f2a6f8a96f24ecb22c1348e900484d9777fca29e4b250ce70f11446417f4f3dd5d5bb3d70da3a46ba9614f93047ddcebe05075e580848e6cd6bb5794710b8cf1a15dd65f4a5c9d7f5f5a46e84bf657bc7f61147de586d9ecbc516281b5c5f4fd458025ba862b59ad4f61a12ca80a9b3306f7d6853f8def62d336d08664d098ebed22f2018277abfba80d0181ec869a6dd8b442c4535660bb87f2464819395a334b45493fc743bcc04f14c72e838d442f2f8f6e9c9974327eba5a679abb8c8173e6c9812b45ede50dd2b2cc52c57f390f1b4998b8fb58e892441129e8033f7d</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":"<p>本文主要针对常用的算子，以记录，展示为主，Time &amp; Window或有涉及，但或弱化，另会有专门的文章进行相关说明</p>\n <a id=\"more\"></a>\n\n<h1 id=\"Flink-Transform\"><a href=\"#Flink-Transform\" class=\"headerlink\" title=\"Flink Transform\"></a>Flink Transform</h1><h2 id=\"1、基本转换算子\"><a href=\"#1、基本转换算子\" class=\"headerlink\" title=\"1、基本转换算子\"></a>1、基本转换算子</h2><ol>\n<li><p>map</p>\n</li>\n<li><p>flatmap</p>\n</li>\n<li><p>filter</p>\n</li>\n<li><p>reduce</p>\n</li>\n<li><p>aggregation</p>\n<ol>\n<li>keyBy</li>\n<li>sun()</li>\n<li>max()</li>\n<li>minBy()</li>\n</ol>\n</li>\n<li><p>UDF</p>\n<ol>\n<li><p>特点是相应的算子+Function名称组成基本函数</p>\n</li>\n<li><p>特点是相应的Rich+算子+Function组成富函数（较前者有更多的状态与属性）</p>\n<ol>\n<li><p>Rich Function 有生命周期的概念。典型的生命周期方法有</p>\n<ol>\n<li><p>open()方法，是RichFunction的初始化方法，也就是会开启一个算子的生命周期。当</p>\n<p>一个算子的实际工作方法例如 map()或者 filter()方法被调用之前，open()会首先被调 用。所以像文件 IO 的创建，数据库连接的创建，配置文件的读取等等这样一次性的 工作，都适合在 open()方法中完成。</p>\n</li>\n<li><p>close()方法，是生命周期中的最后一个调用的方法，类似于解构方法。一般用来做一 些清理工作。</p>\n</li>\n<li><p>实例参考 <a href=\"./FlinkSource.md\">FlinkSource</a> 中的MysqlReader的实例</p>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>分区算子</p>\n<ol>\n<li><p>逻辑分区</p>\n<ol>\n<li>keyBy</li>\n</ol>\n</li>\n<li><p>物理分区</p>\n<ol>\n<li><p>物理分区与 keyBy 另一大区别在于，keyBy 之后得到的是一个 KeyedStream，而物理分 区之后结果仍是 DataStream，且流中元素数据类型保持不变。从这一点也可以看出，分区算子 并不对数据进行转换处理，只是定义了数据的传输方式。</p>\n</li>\n<li><p>分区策略</p>\n<ol>\n<li>随机分配(Random)</li>\n<li>轮询分配(Round-Robin)</li>\n<li>重缩放(Rescale)</li>\n<li>广播(Broadcast)</li>\n</ol>\n</li>\n<li><p>算子</p>\n<ol>\n<li><p>随机分区(<strong>shuffle</strong>)</p>\n<ol>\n<li>将数据随 机地分配到下游算子的并行任务中去。所以可以把流中的数据随机打乱，均匀地 传递到下游任务分区因为是完全随机的，所以对于同样的输入数据, 每次执 行得到的结果也不会相同。</li>\n</ol>\n</li>\n<li><p>轮询分区(<strong>Round-Robin</strong>)</p>\n<ol>\n<li>调用 DataStream 的.rebalance()方法<ol>\n<li>rebalance 使用的是 Round-Robin 负载均衡算法，可以将输入流数据平均分配到下游的并行任务中去。</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>重缩放分区(<strong>rescale</strong>)</p>\n<ol>\n<li>当调用 rescale()方法时实底层也是使用 Round-Robin 算法进行轮询，但是只会将数据轮询发送到下游并行任务的一部分中</li>\n<li>当下游任务(数据接收方)的数量是上游任务(数据发送方)数量的整数倍时，rescale 的效率明显会更高。比如当上游任务数量是 2，下游任务数量是 6 时，上游任务其中一个分区 的数据就将会平均分配到下游任务的 3 个分区中。</li>\n<li>由于 rebalance 是所有分区数据的“重新平衡”，当 TaskManager 数据量较多时，这种跨节 点的网络传输必然影响效率;而如果我们配置的 task slot 数量合适，用 rescale 的方式进行“局 部重缩放”，就可以让数据只在当前 TaskManager 的多个 slot 之间重新分配，从而避免了网络 传输带来的损耗。</li>\n<li>从底层实现上看，rebalance 和 rescale 的根本区别在于任务之间的连接机制不同。rebalance 将会针对所有上游任务(发送数据方)和所有下游任务(接收数据方)之间建立通信通道，这 是一个笛卡尔积的关系;而 rescale 仅仅针对每一个任务和下游对应的部分任务之间建立通信 通道，节省了很多资源</li>\n</ol>\n</li>\n<li><p>广播(<strong>broadcast</strong>)</p>\n<ol>\n<li>这种方式其实不应该叫做“重分区”，因为经过广播之后，数据会在不同的分区都保留一 份，可能进行重复处理。可以通过调用 DataStream 的 broadcast()方法，将输入数据复制并发送 到下游算子的所有并行任务中去。</li>\n</ol>\n</li>\n<li><p>全局分区(<strong>global</strong>)</p>\n<ol>\n<li>全局分区也是一种特殊的分区方式。这种做法非常极端，通过调用.global()方法，会将所</li>\n<li>有的输入流数据都发送到下游算子的第一个并行子任务中去。这就相当于强行让下游任务并行 度变成了 1，所以使用这个操作需要非常谨慎，可能对程序造成很大的压力。</li>\n</ol>\n</li>\n<li><p>自定义分区(<strong>Custom</strong>)</p>\n<ol>\n<li><p>当 Flink 􏰀供的所有分区策略都不能满足用户的需求时，我们可以通过使用 partitionCustom()方法来自定义分区策略。</p>\n<p>在调用时，方法需要传入两个参数，第一个是自定义分区器(Partitioner)对象，第二个 是应用分区器的字段，它的指定方式与 keyBy 指定 key 基本一样:可以通过字段名称指定， 也可以通过字段位置索引来指定，还可以实现一个 KeySelector。</p>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"2、-部份算子的示例\"><a href=\"#2、-部份算子的示例\" class=\"headerlink\" title=\"2、 部份算子的示例\"></a>2、 部份算子的示例</h2><h3 id=\"2-1-UDF的算子示例\"><a href=\"#2-1-UDF的算子示例\" class=\"headerlink\" title=\"2.1 UDF的算子示例\"></a>2.1 UDF的算子示例</h3><p>UDF算子的实现一般有三种方式</p>\n<ol>\n<li><p>支持lambda的方式</p>\n<ol>\n<li><p>这种方式存在泛型信息被擦除的情况， Flink无法自动推断输出的类型信息,所以要显式的指定类型信息，否则输出将被识为Object类型，这会导致低效的序列化。</p>\n</li>\n<li><p>.returns()</p>\n</li>\n<li><pre><code class=\"java\">    words.flatMap(wordFlatMap).print();\n        words.flatMap((String s, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector) -&gt; {\n                    <span class=\"keyword\">for</span> (String ss : s.split(<span class=\"string\">\"\\\\s+\"</span>)) {\n                        collector.collect(Tuple2.of(ss, <span class=\"number\">1</span>));\n                    }\n                }).returns(Types.TUPLE(Types.STRING, Types.INT))\n                .print();\n&lt;!--￼<span class=\"number\">0</span>--&gt;</code></pre>\n</li>\n</ol>\n</li>\n<li><p>独立的实现类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> sunrise.demo.function.agg;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.common.functions.RichMapFunction;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.common.state.MapState;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.common.state.MapStateDescriptor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.java.tuple.Tuple2;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.configuration.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> sunrise.demo.pojo.CarInfo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> kuiqwang</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@emai</span> wqkenqingto@163.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@time</span> 2023/2/9</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@desc</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WordMapFunction</span> <span class=\"keyword\">extends</span> <span class=\"title\">RichMapFunction</span>&lt;<span class=\"title\">Tuple2</span>&lt;<span class=\"title\">String</span>, <span class=\"title\">Integer</span>&gt;, <span class=\"title\">Tuple2</span>&lt;<span class=\"title\">String</span>, <span class=\"title\">Integer</span>&gt;&gt; </span>&#123;</span><br><span class=\"line\">    MapState&lt;String, Integer&gt; mapState = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//车辆最后的车速</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">open</span><span class=\"params\">(Configuration parameters)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.open(parameters);</span><br><span class=\"line\"></span><br><span class=\"line\">        MapStateDescriptor&lt;String, Integer&gt; wordCountMap = <span class=\"keyword\">new</span> MapStateDescriptor&lt;String, Integer&gt;(</span><br><span class=\"line\">                <span class=\"string\">\"word-count\"</span>,</span><br><span class=\"line\">                String<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">Integer</span>.<span class=\"title\">class</span>)</span>;</span><br><span class=\"line\">        mapState = getRuntimeContext().getMapState(wordCountMap);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Tuple2&lt;String, Integer&gt; <span class=\"title\">map</span><span class=\"params\">(Tuple2&lt;String, Integer&gt; s)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == mapState.get(s.f0)) &#123;</span><br><span class=\"line\">            mapState.put(s.f0, <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            mapState.put(s.f0, mapState.get(s.f0) + <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Tuple2.of(s.f0, mapState.get(s.f0));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<hr>\n","encrypt":true},{"title":"Flink Source","date":"2023-02-28T02:39:28.841Z","password":"7FKBKZrTTTPG2LnC","_content":" <!--more-->\n\n# Flink Source\n\n> flink source 梳理\n\n## 1、Source 组成与原理篇\n\n暂略\n\n## 2、常用Source \n\n因为flink 流批一体，这里source作为数据流的入口，常见的类型也可以分为\n\n1. 有界(Bounded)\n2. 无界(Unbounded)\n\n### 2.1 Bounded Source \n\n#### 2.1.1 集合\n\n1. 直接从集合元素中获取\n\n```\nenv.fromCollection(collection)\n```\n\n2. 从元素获取\n\n   ```\n   env.fromElements(\n       new User(\"Mary\", \"./home\", 1000L),\n       new User(\"Bob\", \"./cart\", 2000L)\n   );\n   ```\n\n   \n\n   #### 2.1.2 文件\n\n   主要的方法有\n\n   1. readTextFile\n   2. readFile\n\n   ```\n   env.readTextFile(\"user.csv\");\n   ```\n\n   ### 2.2 无界\n\n   #### 2.2.1 Socket\n\n   ```\n   DataStream<String> stream = env.socketTextStream(\"localhost\", 7777);\n   ```\n\n   #### 2.2.2 kafka\n\n   ```java\n   env.setParallelism(1);\n           Properties properties = new Properties();\n           properties.setProperty(\"bootstrap.servers\", \"kafka01:9092,kafka02:9092,kafka03:9092\");\n           properties.setProperty(\"group.id\", \"consumer-group\");\n           properties.setProperty(\"key.deserializer\",\n                   \"org.apache.kafka.common.serialization.StringDeserializer\");\n           properties.setProperty(\"value.deserializer\",\n                   \"org.apache.kafka.common.serialization.StringDeserializer\");\n           properties.setProperty(\"auto.offset.reset\", \"earliest\");\n           DataStreamSource<String> kafkaStream = env.addSource(new FlinkKafkaConsumer<String>(\"jllsd-flume-collect-from-yaobo-1\", new SimpleStringSchema(), properties));\n           kafkaStream.print(\"jll\");\n   ```\n\n   \n\n   ### 2.3 自定义\n\n   自定义Source也是非常常用和重要的一个Source\n\n1. SourceFunction\n   1. 并行度为1\n   2. 自定义的方法有\n      1. run()\n      2. cancel()\n2. RichSourceFunction\n   1. 在实现SourceFunction基础上，又继承了AbstractRichFunction\n   2. 重要的方法有\n      1. open()\n      2. run()\n      3. cancel()\n   3. 相比之下\n3. ParallelSourceFunction\n   1. 可以设置并行度\n   2. 重要的方法\n      1. run()\n      2. cancel\n4. RichParallelSourceFunction\n   1. 可以设置并行度，并获取更丰富的内容\n   2. 重要的方法\n      1. run()\n      2. cancel()\n\n#### 2.3.1 MysqlSource( RichSourceFunction)\n\n```java\npackage sunrise.demo.source;/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2022/11/15\n * @desc\n */\n\nimport org.apache.flink.configuration.Configuration;\nimport org.apache.flink.streaming.api.functions.source.RichSourceFunction;\nimport sunrise.demo.pojo.GoodsRecord;\nimport sunrise.demo.util.ORMUtil;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\n\npublic class MysqlReader extends RichSourceFunction<GoodsRecord> {\n\n\n    String con;\n    String user;\n    String pass;\n    String sql;\n    private Connection connection = null;\n    private PreparedStatement ps = null;\n\n    public MysqlReader(String con, String user, String pass, String sql) {\n        this.user = user;\n        this.pass = pass;\n        this.con = con;\n        this.sql = sql;\n    }\n\n    //该方法主要用于打开数据库连接，下面的ConfigKeys类是获取配置的类\n    @Override\n    public void open(Configuration parameters) throws Exception {\n        super.open(parameters);\n        Class.forName(\"com.mysql.cj.jdbc.Driver\");//加载数据库驱动\n        connection = DriverManager.getConnection(con, user, pass);//获取连接\n        ps = connection.prepareStatement(sql);\n    }\n\n\n    @Override\n    public void run(SourceContext<GoodsRecord> sourceContext) throws Exception {\n        ResultSet resultSet = ps.executeQuery();\n        while (resultSet.next()) {\n            sourceContext.collect((GoodsRecord) ORMUtil.autoPackage(ORMUtil.getAnnotationVal(GoodsRecord.class), resultSet, GoodsRecord.class));\n        }\n    }\n\n    @Override\n    public void cancel() {\n        try {\n            super.close();\n            if (connection != null) {\n                connection.close();\n            }\n            if (ps != null) {\n                ps.close();\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n```\n\n2. 后续补充其它demo\n\n","source":"_posts/王阁/技术/大数据/flink/2023/FlinkSource.md","raw":"title:  Flink Source\ndate:  2023年 2月28日\ntags: [Flink、source]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n <!--more-->\n\n# Flink Source\n\n> flink source 梳理\n\n## 1、Source 组成与原理篇\n\n暂略\n\n## 2、常用Source \n\n因为flink 流批一体，这里source作为数据流的入口，常见的类型也可以分为\n\n1. 有界(Bounded)\n2. 无界(Unbounded)\n\n### 2.1 Bounded Source \n\n#### 2.1.1 集合\n\n1. 直接从集合元素中获取\n\n```\nenv.fromCollection(collection)\n```\n\n2. 从元素获取\n\n   ```\n   env.fromElements(\n       new User(\"Mary\", \"./home\", 1000L),\n       new User(\"Bob\", \"./cart\", 2000L)\n   );\n   ```\n\n   \n\n   #### 2.1.2 文件\n\n   主要的方法有\n\n   1. readTextFile\n   2. readFile\n\n   ```\n   env.readTextFile(\"user.csv\");\n   ```\n\n   ### 2.2 无界\n\n   #### 2.2.1 Socket\n\n   ```\n   DataStream<String> stream = env.socketTextStream(\"localhost\", 7777);\n   ```\n\n   #### 2.2.2 kafka\n\n   ```java\n   env.setParallelism(1);\n           Properties properties = new Properties();\n           properties.setProperty(\"bootstrap.servers\", \"kafka01:9092,kafka02:9092,kafka03:9092\");\n           properties.setProperty(\"group.id\", \"consumer-group\");\n           properties.setProperty(\"key.deserializer\",\n                   \"org.apache.kafka.common.serialization.StringDeserializer\");\n           properties.setProperty(\"value.deserializer\",\n                   \"org.apache.kafka.common.serialization.StringDeserializer\");\n           properties.setProperty(\"auto.offset.reset\", \"earliest\");\n           DataStreamSource<String> kafkaStream = env.addSource(new FlinkKafkaConsumer<String>(\"jllsd-flume-collect-from-yaobo-1\", new SimpleStringSchema(), properties));\n           kafkaStream.print(\"jll\");\n   ```\n\n   \n\n   ### 2.3 自定义\n\n   自定义Source也是非常常用和重要的一个Source\n\n1. SourceFunction\n   1. 并行度为1\n   2. 自定义的方法有\n      1. run()\n      2. cancel()\n2. RichSourceFunction\n   1. 在实现SourceFunction基础上，又继承了AbstractRichFunction\n   2. 重要的方法有\n      1. open()\n      2. run()\n      3. cancel()\n   3. 相比之下\n3. ParallelSourceFunction\n   1. 可以设置并行度\n   2. 重要的方法\n      1. run()\n      2. cancel\n4. RichParallelSourceFunction\n   1. 可以设置并行度，并获取更丰富的内容\n   2. 重要的方法\n      1. run()\n      2. cancel()\n\n#### 2.3.1 MysqlSource( RichSourceFunction)\n\n```java\npackage sunrise.demo.source;/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2022/11/15\n * @desc\n */\n\nimport org.apache.flink.configuration.Configuration;\nimport org.apache.flink.streaming.api.functions.source.RichSourceFunction;\nimport sunrise.demo.pojo.GoodsRecord;\nimport sunrise.demo.util.ORMUtil;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\n\npublic class MysqlReader extends RichSourceFunction<GoodsRecord> {\n\n\n    String con;\n    String user;\n    String pass;\n    String sql;\n    private Connection connection = null;\n    private PreparedStatement ps = null;\n\n    public MysqlReader(String con, String user, String pass, String sql) {\n        this.user = user;\n        this.pass = pass;\n        this.con = con;\n        this.sql = sql;\n    }\n\n    //该方法主要用于打开数据库连接，下面的ConfigKeys类是获取配置的类\n    @Override\n    public void open(Configuration parameters) throws Exception {\n        super.open(parameters);\n        Class.forName(\"com.mysql.cj.jdbc.Driver\");//加载数据库驱动\n        connection = DriverManager.getConnection(con, user, pass);//获取连接\n        ps = connection.prepareStatement(sql);\n    }\n\n\n    @Override\n    public void run(SourceContext<GoodsRecord> sourceContext) throws Exception {\n        ResultSet resultSet = ps.executeQuery();\n        while (resultSet.next()) {\n            sourceContext.collect((GoodsRecord) ORMUtil.autoPackage(ORMUtil.getAnnotationVal(GoodsRecord.class), resultSet, GoodsRecord.class));\n        }\n    }\n\n    @Override\n    public void cancel() {\n        try {\n            super.close();\n            if (connection != null) {\n                connection.close();\n            }\n            if (ps != null) {\n                ps.close();\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n```\n\n2. 后续补充其它demo\n\n","slug":"王阁/技术/大数据/flink/2023/FlinkSource","published":1,"updated":"2023-02-28T06:54:42.780Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cleozhboh0001vnpw6t0u442r","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"a2ff9dceac5fef4e1b731962d48467cc6b224f1747d58d5fe4d0a0b331d8f6d5\">f29c680708acd02cbb1b6cceaba061921913efe00eba694dbaf0b6e791f138457f301b75cb901f81599250b866bfb27c04c61ee321a07145f4d69768629b6142fbe36cab73b7fd81c8e9a02463f224c44a66f2b63cbb7e8738ee881e84d558a47d32b176fd940aad8851f283fe7c4d28be874ff8e34201a49c1f0a02fea65d1f75595e519eb85259a064dc77d4b83ac1b11e36962d05ac9b6206f337fa305d3d9d38f276f59315628873587f3329a0c360a00b1517378bd9628d95e274432fe712c491bcfc6698ae10c8b41bc30b69e3d83fb1af50078f1501100a44781dcc2d68f6b53962a41a111f6dc08071466cb6b287406b70d3f314755e398fb5c55e96ce3a3cc55625e88bd81967e5f3057590920af18c8fe52d71c690a63181038c331c5f403cfcc71600c28da0d27e219a8e63456fa4628f1de0b9d3af4daa2f1716021bb3d7776401992a67a2296b0f7f11a37276ddeb2e2ba6964473e1faba295741e5ab29d139f834c439d6f31cba1f816b07d5ecf337b567680eb7a499163b5cc60f6df988b3f6b17a4b3fb5aaf2159809007470ffc97df39e98380122afafb00c00461cc59e1f8ce74a722237bb767c15d2a9aeb223857da04baf83b9ca554166f97c88b73278ee735907ab303dcd88784fdaf94748c653f33e8c7ac991b90bd3e3b264993d496d08c6c861b28288cf21067dd249153519ee239b102795da7b675e2e0a097c609b5081ab018cdc61178e160c682459c60aa6851d68fa81ac2559d07bfbb5e0d2adbb0124f90043abd945fe8c38e95e252c8b2afa141f243fc9ff8c005bacca844c7390e806fbe4520e19036735ddf66ad57866249134be103d46c212ffb2f92f8c1afbd4d8c502bae9cc65957943e8a5ad7b13a7e504416fb55d15f8c0788ff68cbb396dbe8b968e85897f56a74fe39bf68e46da461c2688569ae69f9053d1b2ac297d1ce640a016c3e6ade457fc4bf098bc01db3d792a9187086d5ef4baaae8036f90767b4a0ef06924b4a992739d4757fa2033159a508eca8cca03147b110f228d87736225d75bbe09a06c12e59d28419b32fae08b6415c6ef47948bfcec93ca141d759dc016dfb7a48175b1b8e1e3d4fb192251338560419823a3cbe475fb16ec38e7dedbe7da8d8f4370d237be84f79d33a0be723626d6bde97c5a29266c1408de3ee071d940f5ab966c7d059a53a56c37af6e17c9fd65e7136bf30ee99f6077209eabd41a7e35d2a2b480e03990eb85283d2cf8ddf7f3fd967d76cdc83e97a0b93ecccf17db32bc80aeed53da81de0dbf1b9b8ea2fee9213317360652a0c5c9e6d96146574710cd069b6c90e7aee9ca08e06d1c7133426f66db98a8e9eedd88a55993fa380b539c5187181fa80f5964b84f4e84442f5e098509b18f7368620396ad0df311dc879d9b00ef6589bdf4013402b717f736e5fdb967007085cf96e832d618075b47977e83fa4e7bdf79d6b418b54cbc6e26ca8d6cfa674c925b4263e10f84ef93d57db026d7453a17fc31cf2776fb359aa4b7d9e52d3a63aa4478a026c7c9135531039f5dc51b8a34dbb20533f972c61fd0aae72ce01d395c510fcf937e354e4ba8fe4aa0fcd1791e0dd3c1e9fb41f5502579141eb066e4828c4487676e150345f2470e3e6f76f1af588c047928c75bb10dd9fc8d6981cd1dedfa21b79ba309f38751221b88b62780fc8b3d51eb0cfeda97d2032baf78f377598f59ef11779116a8b1a530c8bee6a03497032380113788825edea5bbfc31d35e2b5d6219051040128915e4593ffdaa567134a2b0f34f69b85d0919bc9f90da43356509ef9db85425a198a51e93a1fceefd4c172254823b80e55086ca12f9c946b1590346ee1149c3766dbdf8c87552021bc07c83770c79871af710080c6526d2bbaaf0569dba26a49b08426e9d1f8253f4b06b7d9c332eff079a44874fee4e39c4af4673ddb911ff5cb2808344f9456533774cb77a4bbddae3d4d12262119f77a3774a6f57dd086d46cfa47ba89527cea6e17d1e4f5b515015b7673ff472462feac05479169ad73a4c9d9ed98350974dec8a4dbefd1669e1c2a63b0a28265205b20957e7246d360a8d696d96352a93d45282b28343ba98791e9793b86f90707bdd47b43d8402e92ba0b04e2be17f95d9b2ce9647fbaf6e4ab75f18a7351f91afa3dd535d66a94d8a5ce57861c50c88664d2d30ce49361c4767bfbdb3bc2a121a51304aacb46f0df0f31fd78e6088d39498e714e8193c7755714a5241e84000ab5a60e34f0eb41083ffe4daa67f903eb84b8cb3a722704793f2ca64b4f0f1ba6e69449697e5041f2964ff1a9752d7c014c3e4ff0b84d5b05d34b34a2d82d8bec7b0a40fc448fd8c081cd12f1e0d2d9b4c269c08ca38daeff89444b6ba69474275db5dd4897c7c46aeb8587985b3fbcdc21814015f1f7a81d42669c7b104b84a83c62718fecc52171558c6cdd8f7a14400c86b7f15b9ac4b17a9c58c2ef044ec2db5d8ce66e53df36bb0155e7d87bdc5698b83dc28fd6edb8858118b0bc4e58681b950312f309726d14aac430aba7c0b0b261f5762f143d946302d3bdd835b995d7a4af1a575ca27d4d6f61d3e4f577932aa5e8f07c00d7779169d59783cec9952fc952df1b6371e0ae8d43f687b37828454de9dfd4daafaa57c7869def9fa8bc1f7a3b9714a5d55b7d7024532d51855ce200a9d473edc8c1a1e18100ba9e8c09e593764a784eb95f4c3debdbcdd91ac1d9f4e6f54527c0f537b6087f99b566d73a6a528a99385f24c8bd25e6c7182dce166b8075ce1c3bff3551a0f625b4da5cb139abd4a65e8f73902c2369631ed4ed7d962cc35eac35946891efe4ad7848f06de1617f40275f5d2cdc611856137b9d3a6b58023f9ab7b860370618831f030c192bbafa2b19a143c4e6d315e0cdce28652f305e2bb011281877cd95941d33fe79248f334b35dd54d3ccaabd97d4ce8beb37f6ce716ed6d50f66b68d2e42efc778ca4dc2b7a1c053a786fb0600b58862df1bff175bde358d05d19cc41871caeec8e89e0bda7a4d4ba89b474172e1ec795e517e4df01d9e5aa993cde1a44ed4c701bd1ac286339a83025676a5841064beb3bc04ff3916f542ead729f1402c6c89d47b23b3e3ea566214bb84c03c9353041ed4b20c8c12c035e1f0c8d4c3119930295ce879a347742cfbab2f00af4a9340dc7672dd49eae9700a663ec5095c4e67422cfda646dd0abe622c46fb43085308e673f16298589157becc93f7a7fb106d88a65485b390c616ea96dd12f8bf6d5c7be983dcb9e85d895aa5eae8ff5f20964213de47a669167280492d2ddb1277466aa0ffceee47e5de20219c7c051ee56743aad12b73e20b4a724e2356617351346c01f3192d13e505bb91f4ad8aef97869e523bd4a7167185f188aaffb9b3f700fe39b95e25633f4e4e30363d76abd3ebdadd9858f319ebde020ca3f58c797c8e147ceb2e1af0907592b8ee12d504578eb4835b8d64054869764a235e89725ba33364c9dc15c7f4315c2b11a5eb5d3a08038bd5c0540469df8eb8edd92a0046c6c183362a161ec0573d32593ef8cd142537320787e9060d482bd917c792d9a0e34fb99e1025af4780bf946eff648309e5ea146beec5c6e36c1e6ae98e5000083963489b3a3d9f3c9762f28a9d83206980944cfca17f14c8a29b7d791c362c67055da0464da67a3f88500e3345eb7ca2d7be9010ca9c594f47a33515023e132788046502f7ef162c9a94f83deff394ac152678354e36651fea53da510af2a3fbd08678cd2aafd7ef7a2ad9576f663764471e32f8abeae33770584f08a62a5f131d0e2333d6db72373d4fa89d5098c0e3dc12ec6b7cc276a1c177d82dcb24a617ab6d0c1e9bc518e6386c2b851c8d13b37da0f016411b5fb2cd2699dbed299f1b42c68d317226d299cfb6dbf2d1d971d286bd5dcda98f03c982840fa58f1d1a592bc4821510e4f614aac84e7d299aca49bf8debc2e2465ee8b90a862dffd68a9d17c3df1b10530940e752006ca881ff0cf288cd912c693343aaf5908ba6bfca39d8bed4b0c12b5a3b09d1bcaf8512600c3ec91cfb8a9a12236ff4e6d3b314dbfc0eff934d75c50d129f0b40715add2f9e0941b34af43d84d4541839135b5de0eca3bab5efc10e502dc602e5751dc1f9cf306f77bc84c3aec888cae82549e75fce7088583c0ad10baaf35c5c5bf69f0fba1cb722d639b06b202b131a4bf85b8492278e0ec10b11423bdac1b07e999fb0b7b87da2f63a722b982319d4077ea35b61470a91fbf9ac04533bfe7dabbab788603387233855c4bc28734663712485dba912a13dc72d1872aecef3174243deaa7144445849ae96f9461419c9f6c381d4b7d83db9d7a4aae9ca7b708c4a9d15fc0edafe2f172a27829509e1794ca5d02c81fbabdb9c4b27c7b3d43c8017c30683f2c6104788c9239d75542247bd1680fe00423cb09fb07a8285ba3054aff983b7fdcdee1b089fb29c4f3644877555b003ec385e4c06b9506dcfd57d673660f671b99c4580a61b6ff6cd0ebca7fb2fa31305a2bf1d5ade022ccb1be2f42b49d880c82acc25e8cd21147cf34ec4d264f54986c1a968f5599983579244f829aab8ca0085ce09602fcb6af88debf373fc1e711f21e20a0be7a8c47da99cc21823693809efa62b33e602f398f55346fc73a0ca4cc47a221967f7e4ea1f5e2f6b5cc1810a28eb876122ec0fe193a012ee217b9b720a00a714e20c747f5e5337bfe221281c9b781725ec821c796a21d056e8f1c2633a4ce59639e6cd5e345eceddad20ff137a9e15b7066fc84a5a6d47f0923e491f449bafdc3dda39b217348e650cd758f5f1cafbf2b5e9803544b9dc83a8dfc6fed59a25a82b67734a484a276c0c1c72bed0296b70f7c7db52a8c11d75a8a91336ef8fe3dce307c24fbf63ddbe77672ff03653e49bdaa97ebac5a892d6c34eecabf7adb49bf03274a29ed61eb2df300727efaf4b55d660183b3d6098069371c8029fc759934c38e4e662ccecd3ce6e1269ddb7f7513153da39fa32ecb2e2366050cccf8467db31051c7ceada02f6edbfe5a374836b82416bbe9e5f7e5431b0e5d3e665e10a326a583133770c2e58ac57eacd2274c9148113008419976f84bf8152026694319b8af6bbfb189011f73fa2d47586620ef3df589883992a46cd90142fe724d7ff0bb40a13e7f27359b898a8143b5185b3a7e6866a1cf6716b6c8c11ccd0878a03644dec46e657c50545dbb59a2a5b41b6111a8e59e7363635335d8fefd0580f27dd2f73e0d91f9da70e7c7d362e0fc63a886feccd8927b8fa5333e5f79dcee38cd2ed84a74e56f34e9e0ecf065ea6022ec73c1fa22a177e9b9b484d99641f347721f35a22c9bd3fd5dc17cec0246d4772a6b0886effcddf166744aab9fd2eec05cf3f754f3bf14bfac17eda1ec777658ececb4301faa2bf5919d193f98db651064781ebc369a90f8b6f771e87628b829f5af588e9635ea7dc8cbf393033fa1e94bdcfa6c3ee8fb25230877a45fee659bd7a98ec93baeaca784523e112ab15eb12b1bb86eba501170286666d38a47044877164c04b9fae6443bb0dab023048afd279c34cfdbadbcd807594fdec042d2c20c2d2a2f2fbbb761695f3a0a2c9d17b792676e6ed5719325ba41a981354755947a5f7b0d39f075ca5f592c9da188d85bb8a22d6f0606b94719050f58e432c6945a1bbf2ff2ce8570b9babf55d96f95888e196277b93d60f15febee264098b9ba3b24e95b6b37c9fd8abdb33c12e6b3728d81554341c433797970927322598918539962442e87ceee6e91ec1db551633636f906d7ae9a2fb65efe366e3610b572d558d713de15ec33131ce3143b615a702576c31e688d93ea3342bbe1fc16b317bc8dffbf91eeacb47c7d22662fd942d6270a12b20c4a83516a6d1957033fb2dabe4243fac9e1be65d044c4d4c6d36b9f6204c2be5b3f74abb26ee36e9ecb966b8cb7b78c10dcbbedce6d03ed8d3528bd070a9a9a692da0d12f7b7896fbc8c2516d7c61cc76be1ca73ba5b1769da8272c2a4f36ed1eda8df53fbfe7b86ad9d6d4cb71db0e46cdc58fe772761577f87037b563609489d211db913b76f40d7c10d01c423afbf671d2e35436af344cf01d6cd90af9b39ad75b2b4d0cde381858993ee2973ec4f0433e4a9e2d8c2efd98c55cd1e7f692ca4fa495bddf7a39b66632955bf79322b73770787be91bd07f670503ebe807c0675ce64967bfe7f2ab36fed5fd0e42b3e0fda2b18111af213e8814bd2e27114def12d7aa090c3bcdb4c64c0d4ca4a4c2ef7e773308df39882644ddee508fa4da83cb30c468015b1ea77269ea9f61e6fab5421612ae4761e265c5d19337305fe17b899a02bad83219af9eeca0b479ee509f446efd12d72965ba6440e1949969e934c8018c24b98eada61cb5d99d50a138026fce71937e0508b30cb2af4a01e17884faab52bf3362870008b4dc3ed877d4a31daa030a6092e13ee19d4543ffa2b851e4f0503abee931b3200905f0c78ff8f1638878b83a6a2037ddd8c90e82ef9d79c95d930ffa1f4deda729eb27ed213db166de1c2f58b02bf0293ae65486b1d35c0505f973660e0d291371d351266359fd8c1be62339f5b5cb7fd133d655269b47e14ddd1833a2edf6ffcbc3c15a179a3d9da623c5f2a573052148071091e19796464ce99509153a54aea2efc5371d0939bdab09a69bc66bea0831569afaaebc2c4cef50cef1ee72d61d3567b7d518faac45f0b7645c7131c7c8ab461fe3ed38240cd3674e4d4fe12d5d869c7d560010c9704a793ce3fbc1d47db3acb91422a495bb045e4540cb3cc8187ea00083ee69d9951bc50de0eb8b5971aa365e4aba851a34656a15b8afec818d2569c288a3d626c44f353bd2176feaba05554d7b52eb722ac335b26aedf2f2d206136ca627593b36c9d0d464e0b17c97842b21d339064d5554e60a4e50fd264bdb645e707028aaa6a2e0923f0c1250291fba438af86ebb58c330ab475742001fb4826eebe8a4b114d3f534b40fdde5d800e1265069885635148775240e6e1b2fefa8a477d86bacc83a5ba8a440a1e99e7d366e223eb6951782789e424b57ac709611a88607912c9855e4adccf4c100236cabd92012d304d4e3e0659bf6799075db1c7f17d0d15cb205a9fc1fd1d87362da5105a06aeee2bb37f5a4373fab07446c34ab78298b7a1e010fe6cc9b84fa383493cd533aa2e2ccdd9a5575620099da0642022e37aa710c4144e62ad60909f30800a11c29d6905ed073443b181a5ad2eb6862a68c46aa1d0a78002134fa7cd03d01319799ceb6dd01a7fce9e4ee2b4d136c9b272023c00a831d354533da02b50e2dde7c475a8bdae743d4dc355712f6b3b88108434beaed683fb279fb32136d80d727ee3fbbed3e0e515f0043e5df3cfea86d5ce52e893bb1bc5aec1975308a1ec45d7ee87f481c606037d72e57574ed04bed0adb32ec41265790d3684c025305a73e78f5549cc01bb7d080dd59d8593c773a13f6d5698cfe52cf1d0de04d14f0ae498714ac1ce0220b2c7e4e3940470d86d7b82fcfa6c036cbd24008d19cd5831edbb702f0cdd84d32bd3c6d9937377a19f858e76fd06a5dc5f7dbf12e6371fe1edf32013dfb6a9e4ca69ba8f639806d50b38fdb4acacbba618bd407250aca5471fc0965a35fbfdcd2caf28020336324e5ef5e3e7411851044556d31ec7661eaabcd42e09bf106d0b019cdedda6e0897ffd32ac6a0d2a05d72b7fd27c209df3398ee91f96f75a224d81a1899642d67ca23d4259f25ea20bbd30f38282f9e4638327fac59d683380db4bf43b07166c7ad06f401a580326717639d31554983a5a5af9d2bd19b8be46811ee5e9d20185d23bf9894720769d0bae65da53fd661dc24ea4658087a640078cfc2e27d9cff65612656a9950eb8944668bb0e35de50730da79b1b5848ad3abf5962a6b0e11845c33dad4448795ddc9e3a9bddef5e0b6952c1688d865ec3b1a55b2fd42a4bd973e23f2b8777712cd31898c45a23f7511492878195b704774e19055f09de3a5fb3ab82a565e75ff5bd86bb0c2f217ca092636679729899ce305879a7e30a6d204b30d07c116f683b40000e31292904e0db932777875bb675ba754fc32c9f3cbaf95ccb82483c01f40fdeb1c57a391d2a00975f300df8f5ee52e49efb1af7f2d349914f150f42daed5bf3f7fffc711740de4676ed1f590abf03baa2cff8d87dc4712693efe667a50921db184defedbbe7ffed59a604ec357dbe782eefea6cbeab23cc40ad41891822d2d1e92e8cfe2fc8b902dc3d30e3466ccde3736c70fa239876f37217f1932a9558847a016f1e8cea8fe6fa1e08e80a655de4874e970cda06e2bd8d7815d817c87bdfee79e2512ae65b575c878c2986749fb8e3134b3ade10fb81eb866d25ea4c155c43565481c9ac14a5896080f12bd28d23efd032478167649eb1d606beb8559149f5b1a2901cad04a7eb4bfbe9121f5e83542c44e6dc80ae370993ceaf2b11d099070e4603809fc05a16fc27ca9178f97f0257e2153f97e09fb5fff979b93583b6cb55cec5675f6eab71dfab6f3ea02d5092688fd4d6b7c31519b68be3be3daa04d049bdf251b78bf9085a7b7cfa1109f959c044842245d0b3ffc41b42c3d41de8e530f03468c35a259350e304ae164982814389985e1ebc07d712a8450cf3f127610e47fe5c1baca1f7c65f3f32712c4b3d8465126dee31ec3bef8400be59035db824f820c53bd04c20ad99414aaff1f81aa4c60d4ea34a213562e70a5d48295c988948694cc2c4b0cde7657ee6b97a5c9d80c596d719f25aa02592f834d494721db81c111ea299ddcd45f1bc69e7972a3665082be9b236adf409f72a17f7fd519be7866c91a4d4a5688098fe76216c2a65e7f1100add96d08e98024dae506b539c898bee1b13e28bdf347d60e0e83f1803c462c7989446bfec8ecd4b6511cdc3a52363f5f6e38634e1ef53bdc6fa3c346e9b17a7ac2d82febf0092495b2bc0295b2893d21bc8e1ec2a29c0e92de602b765f614189016a11b71ab861b45a0caf48fa637ddfc2f76ac250ae64cbf5a5f296be4836ce934deb4d687e22eb085a33a2fe1667c4dc6915773051dff064d5aae412b373c963d3c50acdd1c67e6268cc3bfe9426e49a07f26080e60568c5e324e51f49b7a37e14b3ec5d7c13303d6b12f422c259c377ce4e2445c4828a019093c6de535fa36c98a2226c4216ccdd87e21280d76a33644651692f0b7baf3e9c1967ae0bb8a48fe522379acc088da3a4c4630b799916436cfa3d4a7405b32a452a92a6b6a1011dd0304811eb092d321ba4bab7ed3c659ee726ac3444c41c265ff219c610fa6d685c9865725197ea6e8f3b561dbc8bed0701540c8f9c3923aad0b489462adf88d4fd5dd20d14bf11dc457e098d7031567095b8ade8921b6131d1df0f844531af37e30eddc5368e06c200243ecbebd11aa0ed65b536bd9134a6d4b3d8e7cf2985cd9c4b3dd04bf35c174a2ce01e39ab6aaa0afb14fbd283497900ce8cb5950a49acb7eb6f745443f458e2c50d82e0cc3ea3a2ca119ca891ff505cb26ba9c5c41c0c9b9f110018e4c2ff030db173e9d1ad9e91a6bafa585ba3a5a7e49aee3fad08e32a9c679395bae68b0c938c39e463990d46f533f3a2ea62534cced37f3bbde49c1136eab33e55df34191368a4ea47335d262a1c4d0f80ba5d62c8d7b8a36b4cf38fc6808749dc218e1e5048b4950f2927cb69048cd8ec98a2725dbd02373aa289794ec2244d9bac5ade5a18ec8c37b7a87154fc8cbc121b1321401318351a9f780b7f99b9f764b1dd9ba89eccd9265a24492c5207d36f23be3278ccd7bfeef506b9341d415d5b0cac9c3e1ae91045d42b6e99a5ea056826f99fdbdb24c37303f1fa41ea04a4bcbc20a766ec44435ebb2277797336448917c2b238d3552b39ce57d66067861cd0ab7c7fe519463a7203f53fc4699930fef3b9e0f228ae59b757c60315775ef423e2f97514b492c32f2ab0e19b324c0937a5f55ce701066ae79d828102532314122673e378af7d29ea3222925d375e422dfb7f27f5fc83f8126eea9f2aed8eeb3f01cccad3af66fce4a5ae5d49a11619e9061291c6e4781958270e70ca9b2df4dda314120b4218a4422ce2a3b038922722da6c29849787d81729bce949766c6e3badc6e51a60884dc9d378e9a008f7773ee71c80c12ab2ff11240b87aff11e7b383ea65f2c6eba5c78e404ec904fc68760894982777b2f84c54d633661b1b75a9b862aaba189deec62f148cbe50abd09aba5e9305f01db716b3a57575644bcc88e2a31b2205821b68340363cdb9f86220f8cf371cde0195b2e3282d9fa45442e17a816454124778235f1a64075a5c5d8e7e748b8bc97ac39f82141d0cbc7ef345c90be84e904b43b26e6505df53beb72dfe36bf21be90e573227bd3d636e8a09ff83b81245308a2fbce1fd6dc624b1674cc8f6e55407fa5d62cd6e66c897b9866b8ef9ca9232a5e4817eafcae27c3d595c0f711f71176df7dde9f460f0d73a4afa00a8559f987ad0af5f8d12b8cebda844acd77ed71150341c7c05896d89c682f90e7047626ce026c6ab6aea543911fd8cbe05ffcd38d2907d0b5c2c927e7eb12dda435470864332e828b69b3e5e680cae2a5dd72e09d055e4f85f68e2639e96467294ae18e036ca3a9324a0623f4aac5188c21c17eb11b5b132f6ddff9bc7ebaa65601db1c90c296d5af9eb7e6f109fad8ea5b38190d5ce7ffecfa2a98fc51ee215382c2bf90444c68c9ada5a57271e96c3a701a19586209174158b866985231416e655b837c2c57dfd8bb0fc5406fcfa85330ef347218bf51285b4fe3280e08d697223ce89a43dd0457f0a276b48601b3b69f864c6cea282260ac689b0555f0342c40524738a761626f0c1d1035d7387f64a4cc3a66696b1b9bfb211b32e74c6960cb4e95991e7a752191d8a4b87ea2839acaa1decad3da0e00994230f1f0145f13f9ae7653ef16d482b1f6ef12897339fa3d7e6a3a865e976345b0911a5ffed74aa385755461e1edce56666a0653467f6200d49ce9a417509526d1c1bcaf9f70fe640c89c09b07f190ed901d3d6b95d0422095875be53ff1b49c18130d9e02672f7d0ebf77990c062d03647cdbd6ecc6ada81f1bb0af405174a1772d8eda92ffb2a4c134519e68fb7029ac3bc1ba7425e8082c793add22231beca58c6b0c92da8b00b01021e97ac65561f1726ab1c0303ae9bd74be81f89acb5d84497fbe1a36ebc58d6bc3d1e0fbed93103db1d268c9949089dd480ee94296935e266176a4f5ee3a0f8eccc32ada91b222c142699c88e303c1b6c9b76a963f919b3301068f72b13e5d1fc6b8fd324f2627654d166b9cf45e9ced4483127606935dfe8c655cec322cffad5e4fbc5807b66ad4e18d6fbc75fa22272bb63bf4d3e7190be576a43fdb3194d9e99762cd6cd886ab9b449d1a39d3a3be95f4307e3c91606d540113bda5ebbe98fe0c12bcf36eecafcc132f985ea3fd833dd82134d61f7e810d83a75c8128e6bd8f0df44c43f8b140c4a15d8638e96562664c8e3276e27a6d8526e4043bf0189d1c6adfbd4bc0b513237b450534bcd17c0765165e1f5ac566e9ba3d9de687ff3340a08f5d9faaf816b6eeb841b14aec5a32ef63ed10596b1410cb19b46215b921c931f7ab73d40ad2cd047bc80ec29af26dcb14c69ccdc364e9314bd7b6cfe8a4c491d3a3993be138e2154f19d844ba9a9b148718d7c7d43207a5346dd720be6047451c65226fc410ecd63855382027eb49b8bf713c6b3dc9f92fffb9d5105b91382590a35277df0779f1f830f2d1eebe706fd8bd4a78a4f6baef92f06f2e0fff1cb359c1928772c6db35a13ac07bec249c5077b55a394e3aa4b0700f9283f184c065a44690f44cb8829d08e0f0341e2bd17ee31364bc58a9239c890291e743762eed7b575d55449089461fdb394a59dd68e3f4127aef8cd62dc9812ed16b4779338c8a1ff63f5ed666c2965d040ff00d416c3a1569acc80f89cd31675308215c8d8219c53d988a04567c79620bdf76ff44092acd3a5a157cd710819680d2927d81250d55e73f9301f76535ad21cdca42deb23e6cc292b4fde2d1decf6b3c286c0f1ee9d601bb8b1d35c66c2d7977c74c24da2892c674abacd4e2506a7c241ef6af3a35c7a68549c29d69fe7314e5052098ba1efd47069cfc282ffec65fe91acb706cd8bb8c801955ed41ba20bec505834118f63a3f28e57e02e982c7dcb02e2a2ca7068a0de8d5da7c0a9722bbc46d4c47e2b5592aacaed0cb811d82df92c49cbb7f3d8e44dd4c44fc8817885aedb58b60ef92444c2606c1bb7b607d18058d37e5d4a449bab05621802a81af98830d5295a5da68abbc93fa8239bfcc0d0f8ad696a3b3018b89addcb71bfb6c9361bec4b8c4127ab0a181ae9b85b11bf91c92387844caa8cefde03dab7e298f6c7101d92aa3100b88fbb2d6a37667e16e339d0d3440cd34cb02d0198247d623b4c01dd4220acba513fe5fbfbcb0cf996b5014e7928b4a1dd27b7f7fb9a586a00be57646aa12d07dbd2bcf70be32832c2826fc169e0399418445d66a779bf16cf7182eb79c4bfffd1db595efffc400db65913012ed3414e8023993968716b9741aafe4fca21dce82a569821dfca07f81838022a4fb6cdcc0f09add42135fb8c1d4aa7af4a2c4f29780f6012641ff11566a9f109fc0970f47d1f5a6f62b7a9839b82de729cbeac2fdf70e23803f0b469069d2ee0842f708a34bc8e14ee9c4e632a99b9aa5d6fe55b4fa9a51625b4ba02c63cc71d30d02eae5e9d2d529852652596cec030ed7ae4dcb25ffff2208ff185905a33ca95e826dd775b83fec4b0d560b49913b39ac544d1599ebaf021e756f8cd0ced25baf65a1d7d752ce18b2c1b2e7fbde4171f152e38881bcab4c8507a9b3b132059ddaebbf96abc274d7962094dca4ae1274fbe4fb83340a61f718152d78bfb86b4fcdf95d868672670b7074f9c71eb094bd1e689fbed9b0ba4fe5291bad62ace537b586cf4519dcae34ee3e453a1a9dbd64e6df8485fe115c55dff399ad216e23bfea189fee7854fa11667131bb95eba11c2e016bcf44278039f6bbe20aadff825395c786e22f3c6bc525ff87d3a0641476a9120bc18f686f97b335c8943af2562360d16cf5ab09eec0252ed40a56a583a4020b324be3bbeaf42071cc5cd4cf85bd1ec5c5420b9de629d04a55e6809e1e88b2760720594a04635b833da3528fca52f8b345b89fc9d6ede89c14dc146fa161aa5afcead713876fca552638a8e3395f71731fb37e075d93995b7e4c69ba7576d57360fe89fd8c0f5dbed2e58cc8a763f0564910f2de73472092748f2fff191f6452f05c474a188aa9a41def24bfca576e1656a73c073bbf23ab6356d00b7416bf11841cb18d6625f2cdbb3aa2ebed47b7e0f0b3483cb9ad3b6a008641e89a73de3783bb175a93ee5eef469ac45c27b6e9332f7287369ca3eb6cebf205c4662c0048eaa40646cd290b1b9d4d36cc94ca7c2c7f1c0032fa2f193f3fb2a5bdf3f0bfa587183d8356e7110d5b0ebb099b1ca67e7ca1b524bdb36fe2c35e4c7e44070d1d99ef8796e2047e4d895a7655087620111aa4083225388bbd38863c905305c1eb438c3830c207c749ba86d209c9367f87f89601a1cadb1171515a313b389c21cbb09987510b7f22582c18b60faabb1f1ae1d6e6e3ba5c090115a133f6ad84cd580f474df45212a2ec664a7dca920c35f485eb1d9d8af5f6817f1b87758b69a71bf5a4fa59bf6aad33d0e8d6e421f1274aee18e92b4f3782d8ccd5781a721705b30679ef72c48fffe8cf25520009207150fc13c73cdbf88d247e1d101668acdf44b54a2085daa180ea3975ca305259f42104b6a3d5e90185a0c68914d5c4936010b36a5e92c3a2ddee9710db17fa4edad6e86561812a71ef05ad56187cd1ac603765130188bab6f77d4913ceefc99c9378e4b755fa14a9a957ded01c2a0f0bbf270d99459e3c36bea05e223fb13f1a217897d9f210aa9a84a3184f07a5f815f9e56505bc0d8a3d63de7fe9f35b15ee97608c9438ee5daecc0b969033e2275ee4bba60a98a3b37d7734f3085c1dffb9df1a892700f9f9e2ca8eb1e1c440ea23faa193910b367db86dc7447df89ac2f28d7a563f1303bf33247c001e295ac978b62c72aceb3263695a4f62b9895b7a0dd9a9da7fd75ba1dacb7cf92911ea80fd46d407c18512c8c289f0ed55ddf700f8794ff6b8ee47d84fbf98d8524e66ae1c95a680209c2a6cb54048c608c89c500024c13d2755e3cbc1acef1bcb319cff6679f51fe402778331e8abdf13f28c297cc929b80ef1bede7edfef03a94ef4b01d632005414266cd047bc35461c20cc5070b8e9551f90ef01ab8f20c9b75028478f583c6ada96e305907f637088531a960b534d0fb224d940b53cc518a1f7b2b96fbfee7397d4471c4193da1d3ee097c57c9378b813c65ac94b0b7cb1aca338ada3f6c42807178025a45e322db3fb1478f7c27a807f64a52ed20d274dacd79c7f6f54f043243c4059b2ffcbf5fe0540f8bd0389a751a57a1580e59d6672345eb8c4c565c53c30e31bbe731c5f1e8ec95fd631121e00cf548a9e3c2855b1cc21b9c6120070b5910d82b12da798db524b3d6dba38f5dce70f87775d033676ddab85dbbd0919a42c17d779274dd305836b421ca70df0b856a0b7edfb5a55f53412fc662bc1504b88104302a0b01991e696d82a471a0a5e81c2654ced729a0fa285c05c6984d94c8fbc67d394062aa534644c0c11b658f5b1c7c1c30d8f72caa1d883a3a7ee75069d06472f44c95d8eba648cfc5ee5e8fbcadce8666ac5f0eeb7f6c13d90f324b54f318655e420e747b8015a89bd99c1a4bea0e7de6e56c3543a7ee3737040acb8c7d0843f425d1d9606b8220c4588f972b412fe5ef1894f775e4fcce199f3a13341cdce15a2ced0f9eb916a872db9df269b5e502cb201d8f6c984dbe533eea53fcc811282d3625bec3dfd3e8896df1492fa909ffd3841b0588d6996c12d49b602bfa96a2f1911561273c1eaa0852e97a142693482bd019a7fd674de0637fcc78096dbebd8b188cd2c6b1f006f12f1061137cdd0a149c16bcbca0a6e8d846a7e8d985dd2265911473c8cb25394d847ba2ce505acbd01585315ab7dd02e67567aa7db8e3262bbe180ede09dc9e5b22c053aecefa45aa5820c5feb805aa2d3da72d4ce9ee4cde604f38ecc9dee9683cd937c1a226c27122cb353ff2705adfa2b42dc4222070c478395e50cb866775d866b4e6a08c757f179b1790a9fac1ed05a4e87054f248664e714b931aec0865aa3a4b6e33e9f904e5010e409657980828d5a97bbd19a00ff25804c0b3acddf0d55a3f767174b743d5ba014dd151810d6aeaaeba802665e3274f7496c44e67012ed2eae92c62ba3989ea48c4be3270a0c8bb5102a1a9f82bfa2741b52b1e187fec56dfc9789995fa276c42db53c013cb097752294ca96927ef37d4cf20d8f36b641d8146988dc3e354225363eef74764a382bab1eeb14259d4f511b0c7d079ad639fe9a4c0392bad9bbb3b877269c3af24af6a57a8a4fcf3e1306ff01bacccf5f086541d39ab313b0c05a3ab7fe481a8473499c6a983d2c3b247ab4ac20e192e9e5433edc21f68bf59fdc420d501682e472113e738a7a43b1571360005abadac99db4e33d774a58f6398f8dfc48d919c96116dab7594d32f5e95f2f31896ac19247d10b39861e0ecf4b872c8694ab05de710ec5e096222d3cbdace80022953be4f7e967e2eafc396b513086c8c081be6d20275c9bef20e9c089e2313371960f03c608ce0707f4eabfd0989e57ee3bbff5c29bd1d38f0fbb5b5f16bf72d3e685c952c7cb7a56c7c14888b217ae01da04b6ec2335024ec0b70af86f6d8bb5194d75c24bf0b0f77f0c3f697ca62405916325576551cad52980625c18ad3d55f2140194619107caf6150b0010845b2d412cbd3c775bb6971707a1f4dbee060dd136b5010d4ce90694a4c844fbb61455f0fa8163f91290cf0a691c01649c01d12fd482efcc64c6b0a19d70df44295ef22545c38d494053923a201e3665c0cde9fac6c2c203c9227a7de495c91bfde2fdb0445ce85956e4b1a8dac3e1c45ab6f37c7078fe71c3e60efe263f2f6a396bfabbcb08a0547978be475890dbb280cfd527f523813250548d7aa67d6cf5c72ca0cdb2132b2b9a8db2ca07ac3919b6446efec8e1268b3eadecbe4b7d50dbf48f71d0e50bc53fcedaa731de2229b45c72204979871abbdd1347e84ffe42bfb2f0757c2f11c2cf4f243b628d6907fe57608fef5a1b4949cc52e0e8842f1bfb6732ebb07df8ee496cca168ab4b8e4b9559dd1af3148b7aebab38f6ccf780a481a56a6b1df6010853cf0608da30ec249310409e616e76e825cfba2ba47afff4e73bddd1306964080b4498a54234cce554b57fc0637db584b053adc397154cbf6ef251486d2e522b07db0909f903f93759925d94563b1d31683efe4e90e77e23a663d8bf5e0f177df5ac9242551b4cb8fa10bb422c32a1f0aa32394abba8d3d5fa1f74d85955c22c1fdc7ff8623c462da7bf897038fb66a17e8ff8740b6c4bc5be990e0085a62d1caac9af55ffa879fb601ebfae271511123ef652e496eccdcedebd29c3450cc3a5808673d6d296840749a0e559e53f356aa0b2ef05850ae91024b87fe92e393baf00278d1d4d0a96b140c3c6b0dc1e1ae2045f9e429b8e32c19e4f963478023bd13ddb8fe99b33627d0887768b407984d705b64f36b44561c5c2e2ac46cd1cdc44335bca96071fb1ae3ba48bc060c58a84f9b27f0f657a5d42c235c2e86ebeafafa6241e4fc4a1320435f9b1dff9df5eb1231c0538ff40750b14c486095acf0a8120345a551369e9362fc1af717c71df42cdc5df8bc6f55f96f0ed628db2ea6c20c9f59feadd8dc15199f8e87014049500c2aae13c0097b8e3f4a8e0cb6aa255f24f7c3e0d3046d45963eb7f18be8e603b17c14da3d86e7b2af7e7e16ab0f42ec638269f2731a139b1a3357d03a77f015fb58bfc05c1898e45efce7bc5566a7eecf7e5988acfec41e7b13486719efdbee4be4318aa95e29b365efe2c82c526598faa49809256252dff00e22000676a5b6c8fcb41633cf964ceb484d35c1fd8370d5eb8f35b15f2720bfd2b0fe3e54135a047c9e23dceb8c9c11fece79b7c26809c51c0c39aa4286218365cf9a99dbe68561ac9ffe75ee0c12ec870b5817bc47e9db514c28e249e678be3b831dc22df2e79c65c9557a134755eb27a39d9192b19b58976845b2f0a66df7a19cc07d2a47b45af611ee3823ee8d0c1c34b662bd52d390b53c10f8055dc00b32ef004dccbb7ac8d5fb2881d29c97a46d501459bdfa3bb21323b1ff4908bf3a3f7290e276c10ab7978966e0f76ec249b3af18cf91e56412344cb382cacdcee0eb6d20050a744a3c2ebf06bd1dcbec04fe897faa20fda6cc42a1ff255e6917740d504abcd97f293efa6edb01318a9e8bd56ce5d20d49246d38caee34b090fcaf1ef4dd86047aaa40087fb47f0a0894311a32e97d257ef775285650d0a02f4310b5638bb31451e582865787a25c3c137a83470362c203c047bb75c2150cd9f37c13ebc9ef925fedb3153686fb00f9f47a32bfb5e858ff256a496689c875dfe3a163561eb7e74254958f91eae8c443db403ceed20c32f7c6c1be2d67c034a57ee11a85776a099ea4c19b1a884fe66fef9cb341581520e658c47cf462a639cc3fcda742ea8a7d7f0c3dc567f7a809b568c155ca6cc493f034c2d18680911ae4a54ea9ab9bb66a57025712c79366e0a7ea77afca82418e07fa09a57e18cf72e8d87aa2649a14b2616382bc4c25b45d6fc89d3a7f1a2fd5c7ccc6927c27e429d38068d2d5ce2e3f8e65cb1e7a6ae7e323cf2d8475d0b04f8b11f8acc6fbdd06d5a2e15e81e75e86d2779d17f4ed8d4cbb35d5d3b8c5572aa12698b3a09d18d3a7da0dc744a3437daab3ff4fd433cf665ad432ed9e058a7ab763116796197a3b880907d9b5bd12ed08f36ef2de7a0308bd5d4e944f4703b17f66f08b09d7c334b9079dcfc584a8733328e92d036cf3b346677b3ccdf8df4eba2356d5ef394fbba80ae296471b4079d30940c9770705d0750e97bdc74cd4593fafe0c1960be13c2f188951718381ee8920dd4d2b59a38bb5d85833aae028dd4cb1857d5ba0d00fa55119d85632e488fd2b6082bb0f8c3f27c5a4334bcb7803f328eff3a6d74a9ef42aeff7f2947a31acd9bef6b645045e90d9292de7b692f1ba9061a5fa2e8c528ad728059c1cf08531a1604e761ac12546d61cf571ae26ae8e2e1dad72fbd7a7fc5faa023692f0ebe6b8e9293dacb8f898e15a3d4d126a5a818416f8596b66038a660401d8972d183eed5722d26b41615b8a46f6347d921105ba6e646975b85b5c6e6ee8975f082b7fd6b005fae76fe3809246675e127ffa7d93f274362e91ed502e1b60f6c31dc449b39188f0240cfdf26fb10a798a124c9e947f39f7dd64fa8761ad11d9eb137855880396f08f262ce29a78aabe322852649941583f64909d773dd7dc22a2246737ac8e2eed95d4b4a7075619ea3b6f96bc235e43f24bb542057bc13f2d4c8e7b9695e134d5c82868a609b1d3a9a9c63f9dbbe576c48ba67d3d23120b76ae377ad38a1201bea4d609fcd4c3291218462d1eed8c808e5358df181223bf197f25f180a19234e169dfae397dfae6149e0bb60bd539d945c0fceb0933b4e8278b29fb27ca0d09794f799fd9ef37955c6c1dbccaddd62314598efcbcf9f547e77143c07b24e3bcf70b4b8c571a912a2c4c78294a7d8491003294c1ef8c41d99de219b067230fdf0569c2db25a960fc6b9fbd1d7effc5d2edccc9e816d6bcc7926a9275030e23da89a394c184b7fd9c3487f478bdae3f1b123f34dcc8efaf2c5d70bbee0892c7e1216e502e7926f1d40df1312b88358d5798565f197a8273db1018295344ce80a26d086e3f80fbf38ecba8a038a240226849ff8444bc89560aa1f18c50a3d4f6a042b549b2acd64f2956d98e56e39f89359ccc9d1190a8414048f6941ebe9022dcbe563a3b8cb8aad3a454f201402e067411cd18eb59402616f35ae9f0caadfed60f1b1dbe1e7477d8da11c41aea96258ca1aa67d34be92ad16cf5035804f965729b39e1e301d210000f673b3f6560ec27b67b8edad92ff578ab9fcaddb71e14fd80114faa3692c817a588dead3929e7e5d9807e649f5c464533d2564b349fdee9fa215911a392c8a4b68c44ddb119fb8c6923f7e1d9f10f9969c32e5b4d5f30591dea6638cc340613d8ca2eacb4559ac481d390de6ff530fdf61da1b584a6346a6d3c7f9877634e7b16dddf6b5c591cd24afa08dc99a8d668feb26c6e34875c9246b94d66cc93591f0bc8e2d7388e4a18f7fb527c03f6513da739028bf82c845c4640e0d678b4d31f2b0e28aaf3d02a862352f4453f137f631e6e7c011907090cc5a8cc038afc0c540db9ab07c1a92665735f941ed10ecef01239135233bf5dc2ec81b639106970280cd312ec365792ca995e5cb162b4a041090ff447c5035bc943fbf47cebdddc962e9c1591f2854e4b8d523a9b5e72048e4bd30e3e12869deb9e2794ee13ee0881120884ea6957b48d2c49708c387094ade2ac4b1cc1269e82da30e2b14d51d7603568db720789c03309fa086e46afc0edeca1a11459e205eed97e45ee5da6d827f76fe14190091029c205ae3c1431966beefe1accca7e153fa23ba71f5e6b38c9756359be1350e9a7d11e59c8be563e223308228d99907302240b5ada5c690d29b0e42ebde2cbba6a32c613d8b7a04bb0fada8bf2b874153ba84b11ddf86ae75955011bad55a4426fb438fb9d3f768a599b760db1f8ded65791125ed3be0260f36ec4b46d21564271eb228865dac060cca57273149c81420a84a8913649e59b5f54cce994272205399b2cad3f61d124d2b283cfb56083a06fc1ffef38051ef029ada37493b6c4a25c374c0778f3bd5b2881976f7070b6b15fe593b01b0fd47a8e7c0a60ea1acb8789985fdd1f91b2d5406dfa0dedfc7541781d49f5def723967fbdc44da6d7f2d00f24e8230c293552dd7d2ba039c3f4b71e0c0c64b35d9bd2e26d4cb322953cbf3495cea3b732fd49c790e39423d7b379336b96e40bdbc040accd7a265d69b6a947ffb0f97c5e9184d7a5cc8f5a60da1502d98a3aa4ef4a8dd500f7ae1a023f02dc834477e07908452ca69122a</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"Flink-Source\"><a href=\"#Flink-Source\" class=\"headerlink\" title=\"Flink Source\"></a>Flink Source</h1><blockquote>\n<p>flink source 梳理</p>\n</blockquote>\n<h2 id=\"1、Source-组成与原理篇\"><a href=\"#1、Source-组成与原理篇\" class=\"headerlink\" title=\"1、Source 组成与原理篇\"></a>1、Source 组成与原理篇</h2><p>暂略</p>\n<h2 id=\"2、常用Source\"><a href=\"#2、常用Source\" class=\"headerlink\" title=\"2、常用Source\"></a>2、常用Source</h2><p>因为flink 流批一体，这里source作为数据流的入口，常见的类型也可以分为</p>\n<ol>\n<li>有界(Bounded)</li>\n<li>无界(Unbounded)</li>\n</ol>\n<h3 id=\"2-1-Bounded-Source\"><a href=\"#2-1-Bounded-Source\" class=\"headerlink\" title=\"2.1 Bounded Source\"></a>2.1 Bounded Source</h3><h4 id=\"2-1-1-集合\"><a href=\"#2-1-1-集合\" class=\"headerlink\" title=\"2.1.1 集合\"></a>2.1.1 集合</h4><ol>\n<li>直接从集合元素中获取</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">env.fromCollection(collection)</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><p>从元素获取</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">env.fromElements(</span><br><span class=\"line\">    new User(&quot;Mary&quot;, &quot;.&#x2F;home&quot;, 1000L),</span><br><span class=\"line\">    new User(&quot;Bob&quot;, &quot;.&#x2F;cart&quot;, 2000L)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ol>\n<h4 id=\"2-1-2-文件\"><a href=\"#2-1-2-文件\" class=\"headerlink\" title=\"2.1.2 文件\"></a>2.1.2 文件</h4><p>   主要的方法有</p>\n<ol>\n<li><p>readTextFile</p>\n</li>\n<li><p>readFile</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">env.readTextFile(&quot;user.csv&quot;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-无界\"><a href=\"#2-2-无界\" class=\"headerlink\" title=\"2.2 无界\"></a>2.2 无界</h3><h4 id=\"2-2-1-Socket\"><a href=\"#2-2-1-Socket\" class=\"headerlink\" title=\"2.2.1 Socket\"></a>2.2.1 Socket</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DataStream&lt;String&gt; stream &#x3D; env.socketTextStream(&quot;localhost&quot;, 7777);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-2-2-kafka\"><a href=\"#2-2-2-kafka\" class=\"headerlink\" title=\"2.2.2 kafka\"></a>2.2.2 kafka</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">env.setParallelism(<span class=\"number\">1</span>);</span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        properties.setProperty(<span class=\"string\">\"bootstrap.servers\"</span>, <span class=\"string\">\"kafka01:9092,kafka02:9092,kafka03:9092\"</span>);</span><br><span class=\"line\">        properties.setProperty(<span class=\"string\">\"group.id\"</span>, <span class=\"string\">\"consumer-group\"</span>);</span><br><span class=\"line\">        properties.setProperty(<span class=\"string\">\"key.deserializer\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"org.apache.kafka.common.serialization.StringDeserializer\"</span>);</span><br><span class=\"line\">        properties.setProperty(<span class=\"string\">\"value.deserializer\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\"org.apache.kafka.common.serialization.StringDeserializer\"</span>);</span><br><span class=\"line\">        properties.setProperty(<span class=\"string\">\"auto.offset.reset\"</span>, <span class=\"string\">\"earliest\"</span>);</span><br><span class=\"line\">        DataStreamSource&lt;String&gt; kafkaStream = env.addSource(<span class=\"keyword\">new</span> FlinkKafkaConsumer&lt;String&gt;(<span class=\"string\">\"jllsd-flume-collect-from-yaobo-1\"</span>, <span class=\"keyword\">new</span> SimpleStringSchema(), properties));</span><br><span class=\"line\">        kafkaStream.print(<span class=\"string\">\"jll\"</span>);</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ol>\n<h3 id=\"2-3-自定义\"><a href=\"#2-3-自定义\" class=\"headerlink\" title=\"2.3 自定义\"></a>2.3 自定义</h3><p>   自定义Source也是非常常用和重要的一个Source</p>\n<ol>\n<li>SourceFunction<ol>\n<li>并行度为1</li>\n<li>自定义的方法有<ol>\n<li>run()</li>\n<li>cancel()</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>RichSourceFunction<ol>\n<li>在实现SourceFunction基础上，又继承了AbstractRichFunction</li>\n<li>重要的方法有<ol>\n<li>open()</li>\n<li>run()</li>\n<li>cancel()</li>\n</ol>\n</li>\n<li>相比之下</li>\n</ol>\n</li>\n<li>ParallelSourceFunction<ol>\n<li>可以设置并行度</li>\n<li>重要的方法<ol>\n<li>run()</li>\n<li>cancel</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>RichParallelSourceFunction<ol>\n<li>可以设置并行度，并获取更丰富的内容</li>\n<li>重要的方法<ol>\n<li>run()</li>\n<li>cancel()</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"2-3-1-MysqlSource-RichSourceFunction\"><a href=\"#2-3-1-MysqlSource-RichSourceFunction\" class=\"headerlink\" title=\"2.3.1 MysqlSource( RichSourceFunction)\"></a>2.3.1 MysqlSource( RichSourceFunction)</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> sunrise.demo.source;<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> kuiqwang</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@emai</span> wqkenqingto@163.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@time</span> 2022/11/15</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@desc</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.configuration.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.functions.source.RichSourceFunction;</span><br><span class=\"line\"><span class=\"keyword\">import</span> sunrise.demo.pojo.GoodsRecord;</span><br><span class=\"line\"><span class=\"keyword\">import</span> sunrise.demo.util.ORMUtil;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.DriverManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.PreparedStatement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MysqlReader</span> <span class=\"keyword\">extends</span> <span class=\"title\">RichSourceFunction</span>&lt;<span class=\"title\">GoodsRecord</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    String con;</span><br><span class=\"line\">    String user;</span><br><span class=\"line\">    String pass;</span><br><span class=\"line\">    String sql;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Connection connection = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> PreparedStatement ps = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MysqlReader</span><span class=\"params\">(String con, String user, String pass, String sql)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.user = user;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pass = pass;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.con = con;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sql = sql;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//该方法主要用于打开数据库连接，下面的ConfigKeys类是获取配置的类</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">open</span><span class=\"params\">(Configuration parameters)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.open(parameters);</span><br><span class=\"line\">        Class.forName(<span class=\"string\">\"com.mysql.cj.jdbc.Driver\"</span>);<span class=\"comment\">//加载数据库驱动</span></span><br><span class=\"line\">        connection = DriverManager.getConnection(con, user, pass);<span class=\"comment\">//获取连接</span></span><br><span class=\"line\">        ps = connection.prepareStatement(sql);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">(SourceContext&lt;GoodsRecord&gt; sourceContext)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        ResultSet resultSet = ps.executeQuery();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (resultSet.next()) &#123;</span><br><span class=\"line\">            sourceContext.collect((GoodsRecord) ORMUtil.autoPackage(ORMUtil.getAnnotationVal(GoodsRecord<span class=\"class\">.<span class=\"keyword\">class</span>), <span class=\"title\">resultSet</span>, <span class=\"title\">GoodsRecord</span>.<span class=\"title\">class</span>))</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">cancel</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>.close();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (connection != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                connection.close();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (ps != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                ps.close();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>后续补充其它demo</li>\n</ol>\n","encrypt":true},{"title":"Flink_Time_Window","date":"2023-02-28T08:27:38.121Z","password":"7FKBKZrTTTPG2LnC","_content":"\nFlink 中 Time 和window\n\n <!--more-->\n\n# Flink Time&Window\n\n> Flink擅长的是有状态的无界流的计算，无界流的计算与有界数据的计算的区别就在于，无界流因为没有终止点，所以它的运算也没有终止点，而有界流因为有终止边界，所以运算会有终止点。但无界流可以通过时间等参数进行窗口划分进行计算。所以这里就有了Flink两个重要的概念Time 与Window\n\n## 1、Time\n\n### 1.1 Flink中时间语义与水位线\n\n1. 处理时间(Processing Time)\n   1. 窗口任务处理这条数据时，当前的系统时间\n2. 事件时间(Event Time)\n   1. 事件时间，是指每个事件在对应的设备上发生的时间，也就是数据生成的时间。\n3. 水位线(Watermarks)\n   1. 由于分布式系统中网络传输延迟的不确定性，实际应用中我们要面对的 数据流往往是乱序的。在这种情况下，就不能简单地把数据自带的时间戳当作时钟了，而需要 用另外的标志来表示事件时间进展，在 Flink 中把它叫作事件时间的“水位线”(Watermarks)。\n   2. **一般会采用事件时间语义。而水位线，就是基于事件时间􏰀出的概念.**\n   3. 用来衡量事 件时间(Event Time)进展的标记，就被称作“水位线”(Watermark)。\n   4. 具体实现上，水位线可以看作一条特殊的数据记录，它是插入到数据流中的一个标记点， 主要内容就是一个时间戳，用来指示当前的事件时间。而它插入流中的位置，就应该是在􏰁个 数据到来之后;这样就可以从这个数据中􏰀取时间戳，作为当前水位线的时间戳了。\n   5. 这里的思路其实跟TCP实现中的水位线原理相似，会专门对此进行一个对比。\n4. 摄入时间(Ingestion Time)\n   1. 它是指数据进入 Flink 数据流的时间，也就是 Source 算子读入数据的时间。摄入时间相当于是 事件时间和处理时间的一个中和，它是把 Source 任务的处理时间，当作了数据的产生时间添 加到数据里。\n   2. 这样一来，水位线(watermark)也就基于这个时间直接生成，不需要单独指定 了。这种时间语义可以保证比较好的正确性，同时又不会引入太大的延迟。它的具体行为跟事 件时间非常像，可以当作特殊的事件时间来处理。\n\n### 1.2 水位线\n\n1. **有序流中的水位线**\n\n   1. 在理想状态下，数据应该按照它们生成的先后顺序、排好队进入流中;也就是说，它们处 理的过程会保持原先的顺序不变，遵守先来后到的原则。这样的话我们从每个数据中提取时间戳，就可以保证总是从小到大增长的，从而插入的水位线也会不断增长、事件时钟不断向前推 进。\n\n2. **乱序流中的水位线**\n\n3. **水位线的特性**\n\n   1. 水位线是插入到数据流中的一个标记，可以认为是一个特殊的数据\n   2. 水位线主要的内容是一个时间戳，用来表示当前事件时间的进展\n   3. 水位线是基于数据的时间戳生成的\n   4. 水位线的时间戳必须单调递增，以确保任务的事件时间时钟一直向前推进\n   5. 水位线可以通过设置延迟，来保证正确处理乱序数据\n   6. 一个水位线 Watermark(t)，表示在当前流中事件时间已经达到了时间戳 t, 这代表 t 之 前的所有数据都到齐了，之后流中不会出现时间戳 t’ ≤ t 的数据\n\n4. **如何生成水位线**\n\n   1. 生成水位线的总体原则\n\n   2. 水位线生成策略(Watermark Strategies)\n\n      1. .assignTimestampsAndWatermarks()\n\n         1. ```java\n            public SingleOutputStreamOperator<T> assignTimestampsAndWatermarks(\n                   WatermarkStrategy<T> watermarkStrategy)\n            ```\n\n         2. ```java\n            DataStream<Event> stream = env.addSource(new ClickSource());\n            DataStream<Event> withTimestampsAndWatermarks =\n            stream.assignTimestampsAndWatermarks(<watermark strategy>);\n            ```\n\n         3. .assignTimestampsAndWatermarks()方法需要传入一个 WatermarkStrategy 作为参数,这就是所谓的“水位线生成策略”。WatermarkStrategy 中包含了一个“时间戳分配 器”TimestampAssigner 和一个“水位线生成器”WatermarkGenerator。\n\n            1. ```java\n               public interface WatermarkStrategy<T>\n                  extends TimestampAssignerSupplier<T>,\n                         WatermarkGeneratorSupplier<T>{\n               @Override\n                  TimestampAssigner<T>\n               createTimestampAssigner(TimestampAssignerSupplier.Context context);\n               @Override\n               WatermarkGenerator<T>\n               createWatermarkGenerator(WatermarkGeneratorSupplier.Context context);\n               }\n               ```\n\n            2. TimestampAssigner:主要负责从流中数据元素的􏰂个字段中􏰀取时间戳，并分配给 元素。时间戳的分配是生成水位线的基础。\n\n            3. WatermarkGenerator:主要负责按照既定的方式，基于时间戳生成水位线。在 WatermarkGenerator 接口中，主要又有两个方法:onEvent()和 onPeriodicEmit()。\n\n            4. onEvent:每个事件(数据)到来都会调用的方法，它的参数有当前事件、时间戳， 以及允许发出水位线的一个 WatermarkOutput，可以基于事件做各种操作\n\n            5. onPeriodicEmit:周期性调用的方法，可以由WatermarkOutput发出水位线。周期时间\n\n               为处理时间，可以调用环境配置的.setAutoWatermarkInterval()方法来设置，默认为\n\n               200ms。\n\n            6. env.getConfig().setAutoWatermarkInterval(60 * 1000L);//自动生成水位线时间间隔\n\n         4. **Flink 内置水位线生成器**\n\n            1. 有序流\n\n               1. 对于有序流，主要特点就是时间戳单调增长(Monotonously Increasing Timestamps)，所以\n\n                  永远不会出现迟到数据的问题。这是周期性生成水位线的最简单的场景，直接调用\n\n                  WatermarkStrategy.forMonotonousTimestamps()方法就可以实现。简单来说，就是直接拿当前最\n\n                  大的时间戳作为水位线就可以了。\n\n               2. ```java\n                  stream.assignTimestampsAndWatermarks(\n                         WatermarkStrategy.<Event>forMonotonousTimestamps()\n                  { {\n                  );\n                  .withTimestampAssigner(new SerializableTimestampAssigner<Event>()\n                  @Override\n                  public long extractTimestamp(Event element, long recordTimestamp)\n                         return element.timestamp;\n                     }\n                  })\n                  ```\n\n               3. 这里需要注意的是，时间戳和水位线的单位，必须都是毫秒。\n\n            2. 乱序流\n\n               1. 由于乱序流中需要等待迟到数据到齐，所以必须设置一个固定量的延迟时间(Fixed Amount of Lateness)。这时生成水位线的时间戳，就是当前数据流中最大的时间戳减去延迟的 结果，相当于把表调慢，当前时钟会滞后于数据的最大时间戳。调用 WatermarkStrategy. forBoundedOutOfOrderness()方法就可以实现。这个方法需要传入一个 maxOutOfOrderness 参 数，表示“最大乱序程度”，它表示数据流中乱序数据时间戳的最大差值;如果我们能确定乱序 程度，那么设置对应时间长度的延迟，就可以等到所有的乱序数据了\n\n               2. ```java\n                  public class WatermarkTest {\n                     public static void main(String[] args) throws Exception {\n                  StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n                         env.setParallelism(1);\n                         env\n                  .addSource(new ClickSource()) // 插入水位线的逻辑 .assignTimestampsAndWatermarks(\n                  // 针对乱序流插入水位线，延迟时间设置为 5s\n                  WatermarkStrategy.<Event>forBoundedOutOfOrderness(Duration.ofSeconds(5))\n                                             .withTimestampAssigner(new\n                  SerializableTimestampAssigner<Event>() {\n                  // 抽取时间戳的逻辑\n                  recordTimestamp) {\n                  }) .print();\n                         env.execute();\n                     }\n                  }\n                  @Override\n                  public long extractTimestamp(Event element, long\n                     return element.timestamp;\n                  }\n                  ```\n\n               3. 事实上，有序流的水位线生成器本质上和乱序流是一样的，相当于延迟设为 0 的乱序流水 位线生成器，两者完全等同:\n\n               4. ```java\n                  WatermarkStrategy.forMonotonousTimestamps()\n                  WatermarkStrategy.forBoundedOutOfOrderness(Duration.ofSeconds(0))\n                  ```\n\n            3. **自定义水位线策略**\n\n               1. Flink 有两种不同的生成水位线的方式\n\n                  1. 一种是周期性的(Periodic)\n                  2. 另一种是断点式的(Punctuated)\n                  3. 前者是在每个事件到来时调用，而后者由框架周期性调用。周期性调用的方法中发出水位线，自 然就是周期性生成水位线;而在事件触发的方法中发出水位线，自然就是断点式生成了\n\n               2. 周期性水位线生成器(Periodic Generator)\n\n                  1. ```java\n                     public static WatermarkStrategy<Event> {\n                     @Override\n                     class\n                     CustomWatermarkStrategy\n                     implements\n                     .assignTimestampsAndWatermarks(new CustomWatermarkStrategy())\n                     .print();\n                            public\n                     createTimestampAssigner(TimestampAssignerSupplier.Context context) {\n                               return new SerializableTimestampAssigner<Event>() {\n                                  @Override\n                     TimestampAssigner<Event>\n                     135{\n                     public long extractTimestamp(Event element, long recordTimestamp)\n                     return element.timestamp; // 告诉程序数据源里的时间戳是哪一个字段 }\n                     }; }\n                     @Override\n                            public\n                     createWatermarkGenerator(WatermarkGeneratorSupplier.Context context) {\n                               return new CustomPeriodicGenerator();\n                     WatermarkGenerator<Event>\n                     } }\n                     public static class CustomPeriodicGenerator implements WatermarkGenerator<Event> {\n                     private Long delayTime = 5000L; // 延迟时间\n                     private Long maxTs = Long.MIN_VALUE + delayTime + 1L; // 观察到的最大时间戳\n                     @Override\n                     public void onEvent(Event event, long eventTimestamp, WatermarkOutput output) {\n                     // 每来一条数据就调用一次\n                     maxTs = Math.max(event.timestamp, maxTs); // 更新最大时间戳 }\n                            @Override\n                            public void onPeriodicEmit(WatermarkOutput output) {\n                     // 发射水位线，默认 200ms 调用一次\n                               output.emitWatermark(new Watermark(maxTs - delayTime - 1L));\n                            }\n                     } }\n                     ```\n\n                  2. 断点式水位线生成器(Punctuated Generator)\n\n                     1. 断点式生成器会不停地检测 onEvent()中的事件，当发现带有水位线信息的特殊事件时，\n\n                        就立即发出水位线。一般来说，断点式生成器不会通过 onPeriodicEmit()发出水位线。\n\n                     2. ```\n                        public class CustomPunctuatedGenerator implements WatermarkGenerator<Event> {\n                        136@Override\n                        public void onEvent(Event r, long eventTimestamp, WatermarkOutput output) {\n                        // 只有在遇到特定的 itemId 时，才发出水位线 if (r.user.equals(\"Mary\")) {\n                               output.emitWatermark(new Watermark(r.timestamp - 1));\n                           }\n                        }\n                        @Override\n                        public void onPeriodicEmit(WatermarkOutput output) {\n                        // 不需要做任何事情，因为我们在 onEvent 方法中发射了水位线\n                        } }\n                        ```\n\n            \t\t\t\t\t\t\t\t  4. **在自定义数据源中发送水位线**\n\n                         \t\t\t\t\t\t\t\t  1. 我们也可以在自定义的数据源中抽取事件时间，然后发送水位线。这里要注意的是，在自 定义数据源中发送了水位线以后，就不能再在程序中使用 assignTimestampsAndWatermarks 方 法来生成水位线了。在自定义数据源中生成水位线和在程序中使用 assignTimestampsAndWatermarks 方法生成水位线二者只能取其一。\n\n                         \t\t\t\t\t\t\t\t  2. ```java\n                                      public class EmitWatermarkInSourceFunction {\n                                         public static void main(String[] args) throws Exception {\n                                      StreamExecutionEnvironment env =\n                                      StreamExecutionEnvironment.getExecutionEnvironment();\n                                             env.setParallelism(1);\n                                             env.addSource(new ClickSourceWithWatermark()).print();\n                                             env.execute();\n                                         }\n                                      // 泛型是数据源中的类型\n                                      public static class ClickSourceWithWatermark implements SourceFunction<Event> {\n                                             private boolean running = true;\n                                             @Override\n                                      137间戳\n                                      public void run(SourceContext<Event> sourceContext) throws Exception { Random random = new Random();\n                                      String[] userArr = {\"Mary\", \"Bob\", \"Alice\"};\n                                      String[] urlArr = {\"./home\", \"./cart\", \"./prod?id=1\"};\n                                      while (running) {\n                                      long currTs = Calendar.getInstance().getTimeInMillis(); // 毫秒时\n                                      String username = userArr[random.nextInt(userArr.length)]; String url = urlArr[random.nextInt(urlArr.length)];\n                                      Event event = new Event(username, url, currTs);\n                                      // 使用 collectWithTimestamp 方法将数据发送出去，并指明数据中的时间戳的字段\n                                      sourceContext.collectWithTimestamp(event, event.timestamp);\n                                      // 发送水位线\n                                      sourceContext.emitWatermark(new Watermark(event.timestamp - 1L)); Thread.sleep(1000L);\n                                      } }\n                                             @Override\n                                             public void cancel() {\n                                                running = false;\n                                             }\n                                      } }\n                                      \n                                      ```\n\n            \t\t\t\t\t\t\t\t  5. **水位线的传递**\n\n                         \t\t\t\t\t\t\t\t  1. 简而言之，向左取最小\n\n            \t\t\t\t\t\t\t\t  6. **水位线的总结**\n\n#### 1.3 窗口\n\n 1. **窗口分类**\n\n    1. **按照驱动类型分类**\n\n       1. 时间窗口(**Time Window**)\n\n          1. 时间窗口以时间点来定义窗口的开始(start)和结束(end)，所以截取出的就是􏰂一时间\n\n             段的数据。到达结束时间时，窗口不再收集数据，触发计算输出结果，并将窗口关闭销毁。所 以可以说基本思路就是“定点发车”。\n\n          2. Flink 中有一个专门的类来表示时间窗口，名称就叫作 TimeWindow。这个类只有两个私 有属性:start 和 end，表示窗口的开始和结束的时间戳，单位为毫秒。\n\n          3. ```\n             public long maxTimestamp() {\n               return end - 1;\n             }\n             ```\n\n          4. 如上有一个问题，为什么要 减1 ，后面专项分析解答。\n\n       2. 计数窗口(**Count Window**)\n\n          1. 计数窗口基于元素的个数来截取数据，到达固定的个数时就触发计算并关闭窗口。这相当\n\n             于座位有限、“人满就发车”，是否发车与时间无关。每个窗口截取数据的个数，就是窗口的大 小。\n\n2. **按照窗口分配数据的规则分类**\n\n   1. 滚动窗口(Tumbling Window)\n   2. 滑动窗口(Sliding Window)\n   3. 会话窗口(Session Window)\n   4. 全局窗口(Global Window)\n\n3. window 使用API\n\n   1. 按键分区(Keyed)和非按键分区(Non-Keyed)\n\n      1. 在调用窗口算子之前， 是否有 keyBy 操作.\n\n         1. 按键分区窗口(Keyed Windows)\n\n         2. 经过按键分区 keyBy 操作后，数据流会按照 key 被分为多条逻辑流(logical streams)，这就是 KeyedStream。基于 KeyedStream 进行窗口操作时, 窗口计算会在多个并行子任务上同时 执行。相同 key 的数据会被发送到同一个并行子任务，而窗口操作会基于每个 key 进行单独的 处理。所以可以认为，每个 key 上都定义了一组窗口，各自独立地进行统计计算。\n\n         3. ```java\n            stream.keyBy(...)\n                  .window(...)\n            ```\n\n      2. 非按键分区(Non-Keyed Windows)\n\n         1. 如果没有进行 keyBy，那么原始的 DataStream 就不会分成多条逻辑流。这时窗口逻辑只\n\n            能在一个任务(task)上执行，就相当于并行度变成了 1。所以在实际应用中一般不推荐使用 这种方式。\n\n         2. ```java\n            stream.windowAll(...)\n            ```\n\n      2. 窗口API的使用\n\n         1. 窗口分配器(Window Assigners)\n\n            1.  时间窗口\n\n               \t\t\t\t1. 滚动处理时间窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                             .window(TumblingProcessingTimeWindows.of(Time.seconds(5)))\n                             .aggregate(...)\n                             ```\n\n                      \t\t\t\t2. ```\n                             .window(TumblingProcessingTimeWindows.of(Time.days(1), Time.hours(-8)))\n                             ```\n\n               \t\t\t\t2. 滑动处理时间窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                             .window(SlidingProcessingTimeWindows.of(Time.seconds(10), Time.seconds(5)))\n                             .aggregate(...)\n                             ```\n\n               \t\t\t\t3. 处理时间会话窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                             .window(ProcessingTimeSessionWindows.withGap(Time.seconds(10)))\n                             .aggregate(...)\n                             ```\n\n                      \t\t\t\t2. ```java\n                             .window(ProcessingTimeSessionWindows.withDynamicGap(new\n                             SessionWindowTimeGapExtractor<Tuple2<String, Long>>() {\n                                @Override\n                                public long extract(Tuple2<String, Long> element) {\n                             // 提取 session gap 值返回, 单位毫秒 return element.f0.length() * 1000;\n                             } }))\n                             ```\n\n               \t\t\t\t4. 滚动事件时间窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                             .window(TumblingEventTimeWindows.of(Time.seconds(5)))\n                             .aggregate(...)\n                               \n                             ```\n\n               \t\t\t\t5. 滑动事件时间窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                               .window(SlidingEventTimeWindows.of(Time.seconds(10), Time.seconds(5)))\n                               .aggregate(...)\n                             ```\n\n               \t\t\t\t6. 事件时间会话窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                               .window(EventTimeSessionWindows.withGap(Time.seconds(10)))\n                               .aggregate(...)\n                             ```\n\n            2. **计数窗口**\n\n               \t\t\t\t1. 滚动计数窗口\n\n                      1. ```java\n                         stream.keyBy(...)\n                              .countWindow(10)\n                         ```\n\n               \t\t\t\t2. 滑动计数窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...) .countWindow(10，3)\n                             ```\n\n               \t\t\t\t3. 全局窗口\n\n                      \t\t\t\t1. ```\n                             stream.keyBy(...)\n                                  .window(GlobalWindows.create());\n                             ```\n\n                      \t\t\t\t2. 需要注意使用全局窗口，必须自行定义触发器才能实现窗口计算，否则起不到任何作用。\n\n            3. \n\n         2. 窗口函数(Window Functions)。\n\n         ```java\n         stream.keyBy(<key selector>) .window(<window assigner>) .aggregate(<window function>)\n         ```\n\n#### 窗口函数\t\t\t\t\t\n\n1. 归约函数(**ReduceFunction**)\n\n   1. 窗口的归约聚合也非常类似，就是将窗口中收集到的数据两两进行归约。当我们进行流处 理时，就是要保存一个状态;每来一个新的数据，就和之前的聚合状态做归约，这样就实现了 增量式的聚合。\n\n   2. 窗口函数中也􏰀供了 ReduceFunction:只要基于 WindowedStream 调用.reduce()方法，然 后传入 ReduceFunction 作为参数，就可以指定以归约两个元素的方式去对窗口中数据进行聚 合了。这里的 ReduceFunction 其实与简单聚合时用到的 ReduceFunction 是同一个函数类接口， 所以使用方式也是完全一样的。\n\n   3. ```java\n      public class WindowReduceExample {\n         public static void main(String[] args) throws Exception {\n      StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n             env.setParallelism(1);\n      // 从自定义数据源读取数据，并提取时间戳、生成水位线 SingleOutputStreamOperator<Event> stream = env.addSource(new\n      ClickSource())\n                     .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forBoun\n      dedOutOfOrderness(Duration.ZERO)\n      {\n      {\n      Long>>() {\n      .withTimestampAssigner(new SerializableTimestampAssigner<Event>()\n      @Override\n      public long extractTimestamp(Event element, long recordTimestamp)\n             return element.timestamp;\n         }\n      })); stream.map(new MapFunction<Event, Tuple2<String,\n      @Override\n      public Tuple2<String, Long> map(Event value) throws Exception {\n      // 将数据转换成二元组，方便计算\n             return Tuple2.of(value.user, 1L);\n         }\n      })\n                   .keyBy(r -> r.f0)\n      // 设置滚动事件时间窗口 .window(TumblingEventTimeWindows.of(Time.seconds(5))) .reduce(new ReduceFunction<Tuple2<String, Long>>() {\n      @Override\n      public Tuple2<String, Long> reduce(Tuple2<String, Long> value1, Tuple2<String, Long> value2) throws Exception {\n      // 定义累加规则，窗口闭合时，向下游发送累加结果\n                          return Tuple2.of(value1.f0, value1.f1 + value2.f1);\n                       }\n      })\n      154.print();\n             env.execute();\n         }\n      }\n      ```\n\n2. 聚合函数(**AggregateFunction**)\n\n   1. Flink的Window API中的aggregate就􏰀供了这样的操作。直接基于WindowedStream调\n\n      用.aggregate()方法，就可以定义更加灵活的窗口聚合操作。这个方法需要传入一个 AggregateFunction 的实现类作为参数\n\n   2. ```java\n      public interface AggregateFunction<IN, ACC, OUT> extends Function, Serializable {\n         ACC createAccumulator();\n         ACC add(IN value, ACC accumulator);\n         OUT getResult(ACC accumulator);\n         ACC merge(ACC a, ACC b);\n      }\n      ```\n\n   3. AggregateFunction 可以看作是 ReduceFunction 的通用版本，这里有三种类型:输入类型 (IN)、累加器类型(ACC)和输出类型(OUT)。输入类型 IN 就是输入流中元素的数据类型;累加器类型 ACC 则是我们进行聚合的中间状态类型;而输出类型当然就是最终计算结果的类 型了。\n\n   4. 接口中有四个方法:\n\n      1. createAccumulator():创建一个累加器，这就是为聚合创建了一个初始状态，每个聚 合任务只会调用一次。\n      2. add():将输入的元素添加到累加器中。这就是基于聚合状态，对新来的数据进行进 一步聚合的过程。方法传入两个参数:当前新到的数据 value，和当前的累加器 accumulator;返回一个新的累加器值，也就是对聚合状态进行更新。每条数据到来之 后都会调用这个方法。\n      3. add():将输入的元素添加到累加器中。这就是基于聚合状态，对新来的数据进行进 一步聚合的过程。方法传入两个参数:当前新到的数据 value，和当前的累加器 accumulator;返回一个新的累加器值，也就是对聚合状态进行更新。每条数据到来之 后都会调用这个方法。\n      4. merge():合并两个累加器，并将合并后的状态作为一个累加器返回。这个方法只在 需要合并窗口的场景下才会被调用;最常见的合并窗口(Merging Window)的场景 就是会话窗口(Session Windows)。\n\n   5. AggregateFunction 的工作原理是:首先调用 createAccumulator()为任务初 始化一个状态(累加器);而后每来一个数据就调用一次 add()方法，对数据进行聚合，得到的 结果保存在状态中;等到了窗口需要输出时，再调用 getResult()方法得到计算结果。很明显， 与 ReduceFunction 相同，AggregateFunction 也是增量式的聚合;而由于输入、中间状态、输 出的类型可以不同，使得应用更加灵活方便\n\n      1. ```java\n         public class WindowAggregateFunctionExample {\n            public static void main(String[] args) throws Exception {\n         StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n                env.setParallelism(1);\n         SingleOutputStreamOperator<Event> stream = env.addSource(new ClickSource())\n                        .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forMono\n         tonousTimestamps()\n         {\n         {\n         .withTimestampAssigner(new SerializableTimestampAssigner<Event>()\n         @Override\n         public long extractTimestamp(Event element, long recordTimestamp)\n                      return element.timestamp;\n                   }\n         }));\n         // 所有数据设置相同的 key，发送到同一个分区统计 PV 和 UV，再相除 stream.keyBy(data -> true)\n                .window(SlidingEventTimeWindows.of(Time.seconds(10),\n         Time.seconds(2)))\n                      .aggregate(new AvgPv())\n         .print();\n                env.execute();\n            }\n         public static class AvgPv implements AggregateFunction<Event, Tuple2<HashSet<String>, Long>, Double> {\n                @Override\n                public Tuple2<HashSet<String>, Long> createAccumulator() {\n         157// 创建累加器\n                   return Tuple2.of(new HashSet<String>(), 0L);\n                }\n         @Override\n         public Tuple2<HashSet<String>, Long> add(Event value, Tuple2<HashSet<String>, Long> accumulator) {\n         // 属于本窗口的数据来一条累加一次，并返回累加器 accumulator.f0.add(value.user);\n         return Tuple2.of(accumulator.f0, accumulator.f1 + 1L);\n         }\n                @Override\n                public Double getResult(Tuple2<HashSet<String>, Long> accumulator) {\n         // 窗口闭合时，增量聚合结束，将计算结果发送到下游\n                   return (double) accumulator.f1 / accumulator.f0.size();\n                }\n         @Override\n         public Tuple2<HashSet<String>, Long> merge(Tuple2<HashSet<String>, Long> a, Tuple2<HashSet<String>, Long> b) {\n                   return null;\n                }\n         } }\n         ```\n\n   6. 全窗口函数(full window functions)\n\n      1. 窗口操作中的另一大类就是全窗口函数。与增量聚合函数不同，全窗口函数需要先收集窗 口中的数据，并在内部缓存起来，等到窗口要输出结果的时候再取出数据进行计算。\n      2. 这就是典型的批处理思路了——先攒数据，等一批都到齐了再正式启动处理流程。 这样做毫无疑问是低效的:因为窗口全部的计算任务都积压在了要输出结果的那一瞬间，而在 之前收集数据的漫长过程中却无所事事。这就好比平时不用功，到考试之前通宵抱佛脚，肯定 不如把工夫花在日常积累上。\n      3. 那为什么还需要有全窗口函数呢?这是因为有些场景下，我们要做的计算必须基于全部的 数据才有效，这时做增量聚合就没什么意义了;另外，输出的结果有可能要包含上下文中的一 些信息(比如窗口的起始时间)，这是增量聚合函数做不到的。所以，我们还需要有更丰富的 窗口计算方式，这就可以用全窗口函数来实现。\n\n   7. 全窗口函数也有两种:WindowFunction 和 ProcessWindowFunction。\n\n      1. 窗口函数(**WindowFunction**)\n\n         1. WindowFunction 字面上就是“窗口函数”，它其实是老版本的通用窗口函数接口。我们可 以基于 WindowedStream 调用.apply()方法，传入一个 WindowFunction 的实现类。\n\n         2. ```java\n            stream\n               .keyBy(<key selector>)\n               .window(<window assigner>)\n               .apply(new MyWindowFunction());\n            ```\n\n         3. 这个类中可以获取到包含窗口所有数据的可迭代集合(Iterable)，还可以拿到窗口 (Window)本身的信息。WindowFunction 接口在源码中实现如下:\n\n         4. ```java\n            public interface WindowFunction<IN, OUT, KEY, W extends Window> extends Function, Serializable {\n            void apply(KEY key, W window, Iterable<IN> input, Collector<OUT> out) throws Exception;\n            }\n            ```\n\n            1. 当窗口到达结束时间需要触发计算时，就会调用这里的 apply 方法。我们可以从 input 集 合中取出窗口收集的数据，结合 key 和 window 信息，通过收集器(Collector)输出结果。这 里 Collector 的用法，与 FlatMapFunction 中相同。不过我们也看到了，WindowFunction 能提供的上下文信息较少，也没有更高级的功能。 事实上，它的作用可以被 ProcessWindowFunction 全覆盖，所以之后可能会逐渐弃用。一般在 实际应用，直接使用 ProcessWindowFunction 就可以了。\t\n\n      2. 处理窗口函数(**ProcessWindowFunction**)\n\n         1. ProcessWindowFunction 是 Window API 中最底层的通用窗口函数接口。之所以说它“最底层”，是因为除了可以拿到窗口中的所有数据之外，ProcessWindowFunction 还可以获取到一个“上下文对象”(Context)。这个上下文对象非常强大，不仅能够获取窗口信息，还可以访问当 前的时间和状态信息。这里的时间就包括了处理时间(processing time)和事件时间水位线(event time watermark)。这就使得 ProcessWindowFunction 更加灵活、功能更加丰富。\n\n         2. 作为一个全窗口函数， ProcessWindowFunction 同样需要将所有数据缓存下来、等到窗口触发计算时才使用。它其实 就是一个增强版的 WindowFunction。\n\n         3. 具体使用跟 WindowFunction 非常类似，我们可以基于 WindowedStream 调用.process()方 法，传入一个 ProcessWindowFunction 的实现类。\n\n         4. ```java\n            public class UvCountByWindowExample {\n               public static void main(String[] args) throws Exception {\n            StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n                   env.setParallelism(1);\n            SingleOutputStreamOperator<Event> stream = env.addSource(new ClickSource())\n                         .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forBound\n            edOutOfOrderness(Duration.ZERO)\n                                .withTimestampAssigner(new\n            SerializableTimestampAssigner<Event>() {\n            @Override\n            public long extractTimestamp(Event element, long\n               return element.timestamp;\n            }\n            }));\n            // 将数据全部发往同一分区，按窗口统计 UV\n                    stream.keyBy(data -> true)\n                         .window(TumblingEventTimeWindows.of(Time.seconds(10)))\n                         .process(new UvCountByWindow())\n                         .print();\n                   env.execute();\n               }\n            // 自定义窗口处理函数\n            public static class UvCountByWindow extends ProcessWindowFunction<Event,\n            String, Boolean, TimeWindow>{\n                      @Override\n            public void process(Boolean aBoolean, Context context, Iterable<Event> elements, Collector<String> out) throws Exception {\n            HashSet<String> userSet = new HashSet<>(); // 遍历所有数据，放到 Set 里去重\n            for (Event event: elements){\n                              userSet.add(event.user);\n                         }\n            // 结合窗口信息，包装输出内容\n                         Long start = context.window().getStart();\n                         Long end = context.window().getEnd();\n            out.collect(\" 窗 口 : \" + new Timestamp(start) + \" ~ \" + new Timestamp(end)\n            + \" 的独立访客数量是:\" + userSet.size());\n            }\n            161\n             } }\n            ```\n\n         5. 这里我们使用的是事件时间语义。定义 10 秒钟的滚动事件窗口后，直接使用 ProcessWindowFunction 来定义处理的逻辑。我们可以创建一个 HashSet，将窗口所有数据的 userId 写入实现去重，最终得到 HashSet 的元素个数就是 UV 值。\n\n            当然，这里我们并没有用到上下文中其他信息，所以其实没有必要使用 ProcessWindowFunction。全窗口函数因为运行效率较低，很少直接单独使用，往往会和增量 聚合函数结合在一起，共同实现窗口的处理计算。\n\n      3. **增量聚合和全窗口函数的结合使用**\n\n         1. 增量聚合函数处理计算会更高效。举一个最简单的例子，对一组数据求和。大量的数据连 续不断到来，全窗口函数只是把它们收集缓存起来，并没有处理;到了窗口要关闭、输出结果 的时候，再遍历所有数据依次叠加，得到最终结果。而如果我们采用增量聚合的方式，那么只 需要保存一个当前和的状态，每个数据到来时就会做一次加法，更新状态;到了要输出结果的 时候，只要将当前状态直接拿出来就可以了。增量聚合相当于把计算量“均摊”到了窗口收集 数据的过程中，自然就会比全窗口聚合更加高效、输出更加实时。\n\n         2. 而全窗口函数的优势在于􏰀供了更多的信息，可以认为是更加“通用”的窗口操作。它只 负责收集数据、提供上下文相关信息，把所有的原材料都准备好，至于拿来做什么我们完全可 以任意发挥。这就使得窗口计算更加灵活，功能更加强大。\n\n         3. 我们之前在调用 WindowedStream 的.reduce()和.aggregate()方法时，只是简单地直接传入 了一个 ReduceFunction 或 AggregateFunction 进行增量聚合。除此之外，其实还可以传入第二 个参数:一个全窗口函数，可以是 WindowFunction 或者 ProcessWindowFunction。\n\n         4. ```java\n            // ReduceFunction 与 WindowFunction 结合\n            public <R> SingleOutputStreamOperator<R> reduce(\n                   ReduceFunction<T> reduceFunction, WindowFunction<T, R, K, W> function)\n            // ReduceFunction 与 ProcessWindowFunction 结合\n            public <R> SingleOutputStreamOperator<R> reduce(\n            ReduceFunction<T> reduceFunction, ProcessWindowFunction<T, R, K, W>\n            function)\n            // AggregateFunction 与 WindowFunction 结合\n            public <ACC, V, R> SingleOutputStreamOperator<R> aggregate(\n            162AggregateFunction<T, ACC, V> aggFunction, WindowFunction<V, R, K, W> windowFunction)\n            // AggregateFunction 与 ProcessWindowFunction 结合\n            public <ACC, V, R> SingleOutputStreamOperator<R> aggregate(\n                   AggregateFunction<T, ACC, V> aggFunction,\n                   ProcessWindowFunction<V, R, K, W> windowFunction)\n            ```\n\n         5. ```java\n            public class UrlViewCountExample {\n               public static void main(String[] args) throws Exception {\n            StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n                   env.setParallelism(1);\n            SingleOutputStreamOperator<Event> stream = env.addSource(new ClickSource())\n                         .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forMonot\n            onousTimestamps()\n            163                     .withTimestampAssigner(new\n            SerializableTimestampAssigner<Event>() {\n            recordTimestamp) {\n            @Override\n            public long extractTimestamp(Event element, long\n                   return element.timestamp;\n               }\n            }));\n             // 需要按照 url 分组，开滑动窗口统计 stream.keyBy(data -> data.url)\n                         .window(SlidingEventTimeWindows.of(Time.seconds(10),\n            Time.seconds(5)))\n            // 同时传入增量聚合函数和全窗口函数\n            .aggregate(new UrlViewCountAgg(), new UrlViewCountResult()) .print();\n                   env.execute();\n               }\n            // 自定义增量聚合函数，来一条数据就加一\n            public static class UrlViewCountAgg implements AggregateFunction<Event, Long,\n            Long> {\n                   @Override\n                   public Long createAccumulator() {\n             return 0L; }\n            @Override\n            public Long add(Event value, Long accumulator) {\n               return accumulator + 1;\n            }\n            @Override\n            164\n            public Long getResult(Long accumulator) {\n               return accumulator;\n            }\n            @Override\n            public Long merge(Long a, Long b) {\n               return null;\n            }\n            }\n            // 自定义窗口处理函数，只需要包装窗口信息\n            public static class UrlViewCountResult extends ProcessWindowFunction<Long,\n            UrlViewCount, String, TimeWindow> {\n            @Override\n            public void process(String url, Context context, Iterable<Long> elements, Collector<UrlViewCount> out) throws Exception {\n            end)); }\n            }\n            // 结合窗口信息，包装输出内容\n            Long start = context.window().getStart();\n            Long end = context.window().getEnd();\n            // 迭代器中只有一个元素，就是增量聚合函数的计算结果\n            out.collect(new UrlViewCount(url, elements.iterator().next(), start,\n            }\n            ```\n\n### 其他API\n\n**1. 触发器(Trigger)**\n\n1. 触发器主要是用来控制窗口什么时候触发计算。所谓的“触发计算”，本质上就是执行窗 口函数，所以可以认为是计算得到结果并输出的过程\n\n2. 基于 WindowedStream 调用.trigger()方法，就可以传入一个自定义的窗口触发器(Trigger)。\n\n3. ```java\n   stream.keyBy(...)\n         .window(...)\n         .trigger(new MyTrigger())\n   ```\n\n4. Trigger 是窗口算子的内部属性，每个窗口分配器(WindowAssigner)都会对应一个默认 的触发器;对于 Flink 内置的窗口类型，它们的触发器都已经做了实现。例如，所有事件时间 窗口，默认的触发器都是 EventTimeTrigger;类似还有 ProcessingTimeTrigger 和 CountTrigger。 所以一般情况下是不需要自定义触发器的，不过我们依然有必要了解它的原理。\n\n5. Trigger 是一个抽象类，自定义时必须实现下面四个抽象方法:\n\n   1. onElement():窗口中每到来一个元素，都会调用这个方法。\n   2. onEventTime():当注册的事件时间定时器触发时，将调用这个方法。\n   3. onProcessingTime ():当注册的处理时间定时器触发时，将调用这个方法。\n   4. clear():当窗口关闭销毁时，调用这个方法。一般用来清除自定义的状态。\n\n6. 可以看到，除了 clear()比较像生命周期方法，其他三个方法其实都是对􏰂种事件的响应。 onElement()是对流中数据元素到来的响应;而另两个则是对时间的响应。这几个方法的参数中 都有一个“触发器上下文”(TriggerContext)对象，可以用来注册定时器回调(callback)。这 里用到的“定时器”(Timer)，其实就是我们设定的一个“闹钟”，代表未来某个时间点会执行 的事件;当时间进展到设定的值时，就会执行定义好的操作。很明显，对于时间窗口(TimeWindow)而言，就应该是在窗口的结束时间设定了一个定时器，这样到时间就可以触发 窗口的计算输出了。关于定时器的内容，我们在后面讲解处理函数(process function)时还会提到。\n\n   1. 这三个方法返回类型都是 TriggerResult，这是一个枚举类型(enum)， 其中定义了对窗口进行操作的四种类型。\n\n      1. CONTINUE(继续):什么都不做\n      2. FIRE(触发):触发计算，输出结果\n      3. PURGE(清除):清空窗口中的所有数据，销毁窗口\n      4. FIRE_AND_PURGE(触发并清除):触发计算输出结果，并清除窗口\n\n   2. ```java\n      public class TriggerExample {\n         public static void main(String[] args) throws Exception {\n      StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n             env.setParallelism(1);\n             env\n      .addSource(new ClickSource())\n                   .assignTimestampsAndWatermarks(\n                          WatermarkStrategy.<Event>forMonotonousTimestamps()\n                          .withTimestampAssigner(new\n      SerializableTimestampAssigner<Event>() {\n      }) )\n      @Override\n      public long extractTimestamp(Event event, long l) {\n         return event.timestamp;\n      }\n                   .keyBy(r -> r.url)\n                   .window(TumblingEventTimeWindows.of(Time.seconds(10)))\n                   .trigger(new MyTrigger())\n                   .process(new WindowResult())\n                   .print();\n             env.execute();\n         }\n      public static class WindowResult extends ProcessWindowFunction<Event, UrlViewCount, String, TimeWindow> {\n      @Override\n      public void process(String s, Context context, Iterable<Event> iterable, Collector<UrlViewCount> collector) throws Exception {\n                collector.collect(\n                       new UrlViewCount(\n      ) );\n      } }\n      s,\n      // 获取迭代器中的元素个数 iterable.spliterator().getExactSizeIfKnown(), context.window().getStart(), context.window().getEnd()\n      171public static class MyTrigger extends Trigger<Event, TimeWindow> {\n             @Override\n      public TriggerResult onElement(Event event, long l, TimeWindow timeWindow, TriggerContext triggerContext) throws Exception {\n                ValueState<Boolean>                  isFirstEvent                  =\n      triggerContext.getPartitionedState(\n      Types.BOOLEAN)\n                );\n      new ValueStateDescriptor<Boolean>(\"first-event\", if (isFirstEvent.value() == null) {\n      i + 1000L) {\n      for (long i = timeWindow.getStart(); i < timeWindow.getEnd(); i =\n         triggerContext.registerEventTimeTimer(i);\n      }\n                   isFirstEvent.update(true);\n                }\n                return TriggerResult.CONTINUE;\n             }\n      @Override\n      public TriggerResult onEventTime(long l, TimeWindow timeWindow, TriggerContext triggerContext) throws Exception {\n                return TriggerResult.FIRE;\n             }\n      @Override\n      public TriggerResult onProcessingTime(long l, TimeWindow timeWindow, TriggerContext triggerContext) throws Exception {\n                return TriggerResult.CONTINUE;\n             }\n      @Override\n      public void clear(TimeWindow timeWindow, TriggerContext triggerContext)\n      throws Exception {\n                ValueState<Boolean>                  isFirstEvent                  =\n      triggerContext.getPartitionedState(\n      new ValueStateDescriptor<Boolean>(\"first-event\",\n      Types.BOOLEAN)\n                );\n                isFirstEvent.clear();\n             }\n      } }\n      ```\n\n2. **移除器(Evictor)**\n\n   1. 移除器主要用来定义移除􏰂些数据的逻辑。基于 WindowedStream 调用.evictor()方法，就 可以传入一个自定义的移除器(Evictor)。Evictor 是一个接口，不同的窗口类型都有各自预实 现的移除器。\n\n   2. ```java\n      stream.keyBy(...)\n            .window(...)\n            .evictor(new MyEvictor())\n      ```\n\n   3. Evictor 接口定义了两个方法:\n\n      1. evictBefore():定义执行窗口函数之前的移除数据操作\n      2. evictAfter():定义执行窗口函数之后的以处数据操作\n\n      默认情况下，预实现的移除器都是在执行窗口函数(window fucntions)之前移除数据的。\n\n3. **允许延迟(Allowed Lateness)**\n\n   1. 基于 WindowedStream 调用.allowedLateness()方法，传入一个 Time 类型的延迟时间，就可\n\n       以表示允许这段时间内的延迟数据。\n\n      1. ```\n         stream.keyBy(...)\n               .window(TumblingEventTimeWindows.of(Time.hours(1)))\n               .allowedLateness(Time.minutes(1))\n         ```\n\n      \t\t\t\t2.  从这里我们就可以看到，窗口的触发计算(Fire)和清除(Purge)操作确实可以分开。不过在默认情况下，允许的延迟是 0，这样一旦水位线到达了窗口结束时间就会触发计算并清除 窗口，两个操作看起来就是同时发生了。当窗口被清除(关闭)之后，再来的数据就会被丢弃。\n\n4. **将迟到的数据放入侧输出流**\n\n   1. 基于 WindowedStream 调用.sideOutputLateData() 方法，就可以实现这个功能。方法需要 传入一个“输出标签”(OutputTag)，用来标记分支的迟到数据流。因为保存的就是流中的原 始数据，所以 OutputTag 的类型与流中数据类型相同。\n\n      1. ```java\n         DataStream<Event> stream = env.addSource(...);\n         OutputTag<Event> outputTag = new OutputTag<Event>(\"late\") {};\n         stream.keyBy(...)\n               .window(TumblingEventTimeWindows.of(Time.hours(1)))\n              .sideOutputLateData(outputTag)\n         ```\n\n### 窗口的生命周期\n\n1. 窗口的创建\n\n   1. 窗口的类型和基本信息由窗口分配器(window assigners)指定，但窗口不会预先创建好，\n\n      而是由数据驱动创建。当第一个应该属于这个窗口的数据元素到达时，就会创建对应的窗口。\n\n2. 窗口计算的触发\n\n3. 窗口的销毁\n\n","source":"_posts/王阁/技术/大数据/flink/2023/Flink_Time_Window.md","raw":"title:  Flink_Time_Window\ndate:  2023年 2月22日\ntags: [flink、time、window]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\nFlink 中 Time 和window\n\n <!--more-->\n\n# Flink Time&Window\n\n> Flink擅长的是有状态的无界流的计算，无界流的计算与有界数据的计算的区别就在于，无界流因为没有终止点，所以它的运算也没有终止点，而有界流因为有终止边界，所以运算会有终止点。但无界流可以通过时间等参数进行窗口划分进行计算。所以这里就有了Flink两个重要的概念Time 与Window\n\n## 1、Time\n\n### 1.1 Flink中时间语义与水位线\n\n1. 处理时间(Processing Time)\n   1. 窗口任务处理这条数据时，当前的系统时间\n2. 事件时间(Event Time)\n   1. 事件时间，是指每个事件在对应的设备上发生的时间，也就是数据生成的时间。\n3. 水位线(Watermarks)\n   1. 由于分布式系统中网络传输延迟的不确定性，实际应用中我们要面对的 数据流往往是乱序的。在这种情况下，就不能简单地把数据自带的时间戳当作时钟了，而需要 用另外的标志来表示事件时间进展，在 Flink 中把它叫作事件时间的“水位线”(Watermarks)。\n   2. **一般会采用事件时间语义。而水位线，就是基于事件时间􏰀出的概念.**\n   3. 用来衡量事 件时间(Event Time)进展的标记，就被称作“水位线”(Watermark)。\n   4. 具体实现上，水位线可以看作一条特殊的数据记录，它是插入到数据流中的一个标记点， 主要内容就是一个时间戳，用来指示当前的事件时间。而它插入流中的位置，就应该是在􏰁个 数据到来之后;这样就可以从这个数据中􏰀取时间戳，作为当前水位线的时间戳了。\n   5. 这里的思路其实跟TCP实现中的水位线原理相似，会专门对此进行一个对比。\n4. 摄入时间(Ingestion Time)\n   1. 它是指数据进入 Flink 数据流的时间，也就是 Source 算子读入数据的时间。摄入时间相当于是 事件时间和处理时间的一个中和，它是把 Source 任务的处理时间，当作了数据的产生时间添 加到数据里。\n   2. 这样一来，水位线(watermark)也就基于这个时间直接生成，不需要单独指定 了。这种时间语义可以保证比较好的正确性，同时又不会引入太大的延迟。它的具体行为跟事 件时间非常像，可以当作特殊的事件时间来处理。\n\n### 1.2 水位线\n\n1. **有序流中的水位线**\n\n   1. 在理想状态下，数据应该按照它们生成的先后顺序、排好队进入流中;也就是说，它们处 理的过程会保持原先的顺序不变，遵守先来后到的原则。这样的话我们从每个数据中提取时间戳，就可以保证总是从小到大增长的，从而插入的水位线也会不断增长、事件时钟不断向前推 进。\n\n2. **乱序流中的水位线**\n\n3. **水位线的特性**\n\n   1. 水位线是插入到数据流中的一个标记，可以认为是一个特殊的数据\n   2. 水位线主要的内容是一个时间戳，用来表示当前事件时间的进展\n   3. 水位线是基于数据的时间戳生成的\n   4. 水位线的时间戳必须单调递增，以确保任务的事件时间时钟一直向前推进\n   5. 水位线可以通过设置延迟，来保证正确处理乱序数据\n   6. 一个水位线 Watermark(t)，表示在当前流中事件时间已经达到了时间戳 t, 这代表 t 之 前的所有数据都到齐了，之后流中不会出现时间戳 t’ ≤ t 的数据\n\n4. **如何生成水位线**\n\n   1. 生成水位线的总体原则\n\n   2. 水位线生成策略(Watermark Strategies)\n\n      1. .assignTimestampsAndWatermarks()\n\n         1. ```java\n            public SingleOutputStreamOperator<T> assignTimestampsAndWatermarks(\n                   WatermarkStrategy<T> watermarkStrategy)\n            ```\n\n         2. ```java\n            DataStream<Event> stream = env.addSource(new ClickSource());\n            DataStream<Event> withTimestampsAndWatermarks =\n            stream.assignTimestampsAndWatermarks(<watermark strategy>);\n            ```\n\n         3. .assignTimestampsAndWatermarks()方法需要传入一个 WatermarkStrategy 作为参数,这就是所谓的“水位线生成策略”。WatermarkStrategy 中包含了一个“时间戳分配 器”TimestampAssigner 和一个“水位线生成器”WatermarkGenerator。\n\n            1. ```java\n               public interface WatermarkStrategy<T>\n                  extends TimestampAssignerSupplier<T>,\n                         WatermarkGeneratorSupplier<T>{\n               @Override\n                  TimestampAssigner<T>\n               createTimestampAssigner(TimestampAssignerSupplier.Context context);\n               @Override\n               WatermarkGenerator<T>\n               createWatermarkGenerator(WatermarkGeneratorSupplier.Context context);\n               }\n               ```\n\n            2. TimestampAssigner:主要负责从流中数据元素的􏰂个字段中􏰀取时间戳，并分配给 元素。时间戳的分配是生成水位线的基础。\n\n            3. WatermarkGenerator:主要负责按照既定的方式，基于时间戳生成水位线。在 WatermarkGenerator 接口中，主要又有两个方法:onEvent()和 onPeriodicEmit()。\n\n            4. onEvent:每个事件(数据)到来都会调用的方法，它的参数有当前事件、时间戳， 以及允许发出水位线的一个 WatermarkOutput，可以基于事件做各种操作\n\n            5. onPeriodicEmit:周期性调用的方法，可以由WatermarkOutput发出水位线。周期时间\n\n               为处理时间，可以调用环境配置的.setAutoWatermarkInterval()方法来设置，默认为\n\n               200ms。\n\n            6. env.getConfig().setAutoWatermarkInterval(60 * 1000L);//自动生成水位线时间间隔\n\n         4. **Flink 内置水位线生成器**\n\n            1. 有序流\n\n               1. 对于有序流，主要特点就是时间戳单调增长(Monotonously Increasing Timestamps)，所以\n\n                  永远不会出现迟到数据的问题。这是周期性生成水位线的最简单的场景，直接调用\n\n                  WatermarkStrategy.forMonotonousTimestamps()方法就可以实现。简单来说，就是直接拿当前最\n\n                  大的时间戳作为水位线就可以了。\n\n               2. ```java\n                  stream.assignTimestampsAndWatermarks(\n                         WatermarkStrategy.<Event>forMonotonousTimestamps()\n                  { {\n                  );\n                  .withTimestampAssigner(new SerializableTimestampAssigner<Event>()\n                  @Override\n                  public long extractTimestamp(Event element, long recordTimestamp)\n                         return element.timestamp;\n                     }\n                  })\n                  ```\n\n               3. 这里需要注意的是，时间戳和水位线的单位，必须都是毫秒。\n\n            2. 乱序流\n\n               1. 由于乱序流中需要等待迟到数据到齐，所以必须设置一个固定量的延迟时间(Fixed Amount of Lateness)。这时生成水位线的时间戳，就是当前数据流中最大的时间戳减去延迟的 结果，相当于把表调慢，当前时钟会滞后于数据的最大时间戳。调用 WatermarkStrategy. forBoundedOutOfOrderness()方法就可以实现。这个方法需要传入一个 maxOutOfOrderness 参 数，表示“最大乱序程度”，它表示数据流中乱序数据时间戳的最大差值;如果我们能确定乱序 程度，那么设置对应时间长度的延迟，就可以等到所有的乱序数据了\n\n               2. ```java\n                  public class WatermarkTest {\n                     public static void main(String[] args) throws Exception {\n                  StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n                         env.setParallelism(1);\n                         env\n                  .addSource(new ClickSource()) // 插入水位线的逻辑 .assignTimestampsAndWatermarks(\n                  // 针对乱序流插入水位线，延迟时间设置为 5s\n                  WatermarkStrategy.<Event>forBoundedOutOfOrderness(Duration.ofSeconds(5))\n                                             .withTimestampAssigner(new\n                  SerializableTimestampAssigner<Event>() {\n                  // 抽取时间戳的逻辑\n                  recordTimestamp) {\n                  }) .print();\n                         env.execute();\n                     }\n                  }\n                  @Override\n                  public long extractTimestamp(Event element, long\n                     return element.timestamp;\n                  }\n                  ```\n\n               3. 事实上，有序流的水位线生成器本质上和乱序流是一样的，相当于延迟设为 0 的乱序流水 位线生成器，两者完全等同:\n\n               4. ```java\n                  WatermarkStrategy.forMonotonousTimestamps()\n                  WatermarkStrategy.forBoundedOutOfOrderness(Duration.ofSeconds(0))\n                  ```\n\n            3. **自定义水位线策略**\n\n               1. Flink 有两种不同的生成水位线的方式\n\n                  1. 一种是周期性的(Periodic)\n                  2. 另一种是断点式的(Punctuated)\n                  3. 前者是在每个事件到来时调用，而后者由框架周期性调用。周期性调用的方法中发出水位线，自 然就是周期性生成水位线;而在事件触发的方法中发出水位线，自然就是断点式生成了\n\n               2. 周期性水位线生成器(Periodic Generator)\n\n                  1. ```java\n                     public static WatermarkStrategy<Event> {\n                     @Override\n                     class\n                     CustomWatermarkStrategy\n                     implements\n                     .assignTimestampsAndWatermarks(new CustomWatermarkStrategy())\n                     .print();\n                            public\n                     createTimestampAssigner(TimestampAssignerSupplier.Context context) {\n                               return new SerializableTimestampAssigner<Event>() {\n                                  @Override\n                     TimestampAssigner<Event>\n                     135{\n                     public long extractTimestamp(Event element, long recordTimestamp)\n                     return element.timestamp; // 告诉程序数据源里的时间戳是哪一个字段 }\n                     }; }\n                     @Override\n                            public\n                     createWatermarkGenerator(WatermarkGeneratorSupplier.Context context) {\n                               return new CustomPeriodicGenerator();\n                     WatermarkGenerator<Event>\n                     } }\n                     public static class CustomPeriodicGenerator implements WatermarkGenerator<Event> {\n                     private Long delayTime = 5000L; // 延迟时间\n                     private Long maxTs = Long.MIN_VALUE + delayTime + 1L; // 观察到的最大时间戳\n                     @Override\n                     public void onEvent(Event event, long eventTimestamp, WatermarkOutput output) {\n                     // 每来一条数据就调用一次\n                     maxTs = Math.max(event.timestamp, maxTs); // 更新最大时间戳 }\n                            @Override\n                            public void onPeriodicEmit(WatermarkOutput output) {\n                     // 发射水位线，默认 200ms 调用一次\n                               output.emitWatermark(new Watermark(maxTs - delayTime - 1L));\n                            }\n                     } }\n                     ```\n\n                  2. 断点式水位线生成器(Punctuated Generator)\n\n                     1. 断点式生成器会不停地检测 onEvent()中的事件，当发现带有水位线信息的特殊事件时，\n\n                        就立即发出水位线。一般来说，断点式生成器不会通过 onPeriodicEmit()发出水位线。\n\n                     2. ```\n                        public class CustomPunctuatedGenerator implements WatermarkGenerator<Event> {\n                        136@Override\n                        public void onEvent(Event r, long eventTimestamp, WatermarkOutput output) {\n                        // 只有在遇到特定的 itemId 时，才发出水位线 if (r.user.equals(\"Mary\")) {\n                               output.emitWatermark(new Watermark(r.timestamp - 1));\n                           }\n                        }\n                        @Override\n                        public void onPeriodicEmit(WatermarkOutput output) {\n                        // 不需要做任何事情，因为我们在 onEvent 方法中发射了水位线\n                        } }\n                        ```\n\n            \t\t\t\t\t\t\t\t  4. **在自定义数据源中发送水位线**\n\n                         \t\t\t\t\t\t\t\t  1. 我们也可以在自定义的数据源中抽取事件时间，然后发送水位线。这里要注意的是，在自 定义数据源中发送了水位线以后，就不能再在程序中使用 assignTimestampsAndWatermarks 方 法来生成水位线了。在自定义数据源中生成水位线和在程序中使用 assignTimestampsAndWatermarks 方法生成水位线二者只能取其一。\n\n                         \t\t\t\t\t\t\t\t  2. ```java\n                                      public class EmitWatermarkInSourceFunction {\n                                         public static void main(String[] args) throws Exception {\n                                      StreamExecutionEnvironment env =\n                                      StreamExecutionEnvironment.getExecutionEnvironment();\n                                             env.setParallelism(1);\n                                             env.addSource(new ClickSourceWithWatermark()).print();\n                                             env.execute();\n                                         }\n                                      // 泛型是数据源中的类型\n                                      public static class ClickSourceWithWatermark implements SourceFunction<Event> {\n                                             private boolean running = true;\n                                             @Override\n                                      137间戳\n                                      public void run(SourceContext<Event> sourceContext) throws Exception { Random random = new Random();\n                                      String[] userArr = {\"Mary\", \"Bob\", \"Alice\"};\n                                      String[] urlArr = {\"./home\", \"./cart\", \"./prod?id=1\"};\n                                      while (running) {\n                                      long currTs = Calendar.getInstance().getTimeInMillis(); // 毫秒时\n                                      String username = userArr[random.nextInt(userArr.length)]; String url = urlArr[random.nextInt(urlArr.length)];\n                                      Event event = new Event(username, url, currTs);\n                                      // 使用 collectWithTimestamp 方法将数据发送出去，并指明数据中的时间戳的字段\n                                      sourceContext.collectWithTimestamp(event, event.timestamp);\n                                      // 发送水位线\n                                      sourceContext.emitWatermark(new Watermark(event.timestamp - 1L)); Thread.sleep(1000L);\n                                      } }\n                                             @Override\n                                             public void cancel() {\n                                                running = false;\n                                             }\n                                      } }\n                                      \n                                      ```\n\n            \t\t\t\t\t\t\t\t  5. **水位线的传递**\n\n                         \t\t\t\t\t\t\t\t  1. 简而言之，向左取最小\n\n            \t\t\t\t\t\t\t\t  6. **水位线的总结**\n\n#### 1.3 窗口\n\n 1. **窗口分类**\n\n    1. **按照驱动类型分类**\n\n       1. 时间窗口(**Time Window**)\n\n          1. 时间窗口以时间点来定义窗口的开始(start)和结束(end)，所以截取出的就是􏰂一时间\n\n             段的数据。到达结束时间时，窗口不再收集数据，触发计算输出结果，并将窗口关闭销毁。所 以可以说基本思路就是“定点发车”。\n\n          2. Flink 中有一个专门的类来表示时间窗口，名称就叫作 TimeWindow。这个类只有两个私 有属性:start 和 end，表示窗口的开始和结束的时间戳，单位为毫秒。\n\n          3. ```\n             public long maxTimestamp() {\n               return end - 1;\n             }\n             ```\n\n          4. 如上有一个问题，为什么要 减1 ，后面专项分析解答。\n\n       2. 计数窗口(**Count Window**)\n\n          1. 计数窗口基于元素的个数来截取数据，到达固定的个数时就触发计算并关闭窗口。这相当\n\n             于座位有限、“人满就发车”，是否发车与时间无关。每个窗口截取数据的个数，就是窗口的大 小。\n\n2. **按照窗口分配数据的规则分类**\n\n   1. 滚动窗口(Tumbling Window)\n   2. 滑动窗口(Sliding Window)\n   3. 会话窗口(Session Window)\n   4. 全局窗口(Global Window)\n\n3. window 使用API\n\n   1. 按键分区(Keyed)和非按键分区(Non-Keyed)\n\n      1. 在调用窗口算子之前， 是否有 keyBy 操作.\n\n         1. 按键分区窗口(Keyed Windows)\n\n         2. 经过按键分区 keyBy 操作后，数据流会按照 key 被分为多条逻辑流(logical streams)，这就是 KeyedStream。基于 KeyedStream 进行窗口操作时, 窗口计算会在多个并行子任务上同时 执行。相同 key 的数据会被发送到同一个并行子任务，而窗口操作会基于每个 key 进行单独的 处理。所以可以认为，每个 key 上都定义了一组窗口，各自独立地进行统计计算。\n\n         3. ```java\n            stream.keyBy(...)\n                  .window(...)\n            ```\n\n      2. 非按键分区(Non-Keyed Windows)\n\n         1. 如果没有进行 keyBy，那么原始的 DataStream 就不会分成多条逻辑流。这时窗口逻辑只\n\n            能在一个任务(task)上执行，就相当于并行度变成了 1。所以在实际应用中一般不推荐使用 这种方式。\n\n         2. ```java\n            stream.windowAll(...)\n            ```\n\n      2. 窗口API的使用\n\n         1. 窗口分配器(Window Assigners)\n\n            1.  时间窗口\n\n               \t\t\t\t1. 滚动处理时间窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                             .window(TumblingProcessingTimeWindows.of(Time.seconds(5)))\n                             .aggregate(...)\n                             ```\n\n                      \t\t\t\t2. ```\n                             .window(TumblingProcessingTimeWindows.of(Time.days(1), Time.hours(-8)))\n                             ```\n\n               \t\t\t\t2. 滑动处理时间窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                             .window(SlidingProcessingTimeWindows.of(Time.seconds(10), Time.seconds(5)))\n                             .aggregate(...)\n                             ```\n\n               \t\t\t\t3. 处理时间会话窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                             .window(ProcessingTimeSessionWindows.withGap(Time.seconds(10)))\n                             .aggregate(...)\n                             ```\n\n                      \t\t\t\t2. ```java\n                             .window(ProcessingTimeSessionWindows.withDynamicGap(new\n                             SessionWindowTimeGapExtractor<Tuple2<String, Long>>() {\n                                @Override\n                                public long extract(Tuple2<String, Long> element) {\n                             // 提取 session gap 值返回, 单位毫秒 return element.f0.length() * 1000;\n                             } }))\n                             ```\n\n               \t\t\t\t4. 滚动事件时间窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                             .window(TumblingEventTimeWindows.of(Time.seconds(5)))\n                             .aggregate(...)\n                               \n                             ```\n\n               \t\t\t\t5. 滑动事件时间窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                               .window(SlidingEventTimeWindows.of(Time.seconds(10), Time.seconds(5)))\n                               .aggregate(...)\n                             ```\n\n               \t\t\t\t6. 事件时间会话窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...)\n                               .window(EventTimeSessionWindows.withGap(Time.seconds(10)))\n                               .aggregate(...)\n                             ```\n\n            2. **计数窗口**\n\n               \t\t\t\t1. 滚动计数窗口\n\n                      1. ```java\n                         stream.keyBy(...)\n                              .countWindow(10)\n                         ```\n\n               \t\t\t\t2. 滑动计数窗口\n\n                      \t\t\t\t1. ```java\n                             stream.keyBy(...) .countWindow(10，3)\n                             ```\n\n               \t\t\t\t3. 全局窗口\n\n                      \t\t\t\t1. ```\n                             stream.keyBy(...)\n                                  .window(GlobalWindows.create());\n                             ```\n\n                      \t\t\t\t2. 需要注意使用全局窗口，必须自行定义触发器才能实现窗口计算，否则起不到任何作用。\n\n            3. \n\n         2. 窗口函数(Window Functions)。\n\n         ```java\n         stream.keyBy(<key selector>) .window(<window assigner>) .aggregate(<window function>)\n         ```\n\n#### 窗口函数\t\t\t\t\t\n\n1. 归约函数(**ReduceFunction**)\n\n   1. 窗口的归约聚合也非常类似，就是将窗口中收集到的数据两两进行归约。当我们进行流处 理时，就是要保存一个状态;每来一个新的数据，就和之前的聚合状态做归约，这样就实现了 增量式的聚合。\n\n   2. 窗口函数中也􏰀供了 ReduceFunction:只要基于 WindowedStream 调用.reduce()方法，然 后传入 ReduceFunction 作为参数，就可以指定以归约两个元素的方式去对窗口中数据进行聚 合了。这里的 ReduceFunction 其实与简单聚合时用到的 ReduceFunction 是同一个函数类接口， 所以使用方式也是完全一样的。\n\n   3. ```java\n      public class WindowReduceExample {\n         public static void main(String[] args) throws Exception {\n      StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n             env.setParallelism(1);\n      // 从自定义数据源读取数据，并提取时间戳、生成水位线 SingleOutputStreamOperator<Event> stream = env.addSource(new\n      ClickSource())\n                     .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forBoun\n      dedOutOfOrderness(Duration.ZERO)\n      {\n      {\n      Long>>() {\n      .withTimestampAssigner(new SerializableTimestampAssigner<Event>()\n      @Override\n      public long extractTimestamp(Event element, long recordTimestamp)\n             return element.timestamp;\n         }\n      })); stream.map(new MapFunction<Event, Tuple2<String,\n      @Override\n      public Tuple2<String, Long> map(Event value) throws Exception {\n      // 将数据转换成二元组，方便计算\n             return Tuple2.of(value.user, 1L);\n         }\n      })\n                   .keyBy(r -> r.f0)\n      // 设置滚动事件时间窗口 .window(TumblingEventTimeWindows.of(Time.seconds(5))) .reduce(new ReduceFunction<Tuple2<String, Long>>() {\n      @Override\n      public Tuple2<String, Long> reduce(Tuple2<String, Long> value1, Tuple2<String, Long> value2) throws Exception {\n      // 定义累加规则，窗口闭合时，向下游发送累加结果\n                          return Tuple2.of(value1.f0, value1.f1 + value2.f1);\n                       }\n      })\n      154.print();\n             env.execute();\n         }\n      }\n      ```\n\n2. 聚合函数(**AggregateFunction**)\n\n   1. Flink的Window API中的aggregate就􏰀供了这样的操作。直接基于WindowedStream调\n\n      用.aggregate()方法，就可以定义更加灵活的窗口聚合操作。这个方法需要传入一个 AggregateFunction 的实现类作为参数\n\n   2. ```java\n      public interface AggregateFunction<IN, ACC, OUT> extends Function, Serializable {\n         ACC createAccumulator();\n         ACC add(IN value, ACC accumulator);\n         OUT getResult(ACC accumulator);\n         ACC merge(ACC a, ACC b);\n      }\n      ```\n\n   3. AggregateFunction 可以看作是 ReduceFunction 的通用版本，这里有三种类型:输入类型 (IN)、累加器类型(ACC)和输出类型(OUT)。输入类型 IN 就是输入流中元素的数据类型;累加器类型 ACC 则是我们进行聚合的中间状态类型;而输出类型当然就是最终计算结果的类 型了。\n\n   4. 接口中有四个方法:\n\n      1. createAccumulator():创建一个累加器，这就是为聚合创建了一个初始状态，每个聚 合任务只会调用一次。\n      2. add():将输入的元素添加到累加器中。这就是基于聚合状态，对新来的数据进行进 一步聚合的过程。方法传入两个参数:当前新到的数据 value，和当前的累加器 accumulator;返回一个新的累加器值，也就是对聚合状态进行更新。每条数据到来之 后都会调用这个方法。\n      3. add():将输入的元素添加到累加器中。这就是基于聚合状态，对新来的数据进行进 一步聚合的过程。方法传入两个参数:当前新到的数据 value，和当前的累加器 accumulator;返回一个新的累加器值，也就是对聚合状态进行更新。每条数据到来之 后都会调用这个方法。\n      4. merge():合并两个累加器，并将合并后的状态作为一个累加器返回。这个方法只在 需要合并窗口的场景下才会被调用;最常见的合并窗口(Merging Window)的场景 就是会话窗口(Session Windows)。\n\n   5. AggregateFunction 的工作原理是:首先调用 createAccumulator()为任务初 始化一个状态(累加器);而后每来一个数据就调用一次 add()方法，对数据进行聚合，得到的 结果保存在状态中;等到了窗口需要输出时，再调用 getResult()方法得到计算结果。很明显， 与 ReduceFunction 相同，AggregateFunction 也是增量式的聚合;而由于输入、中间状态、输 出的类型可以不同，使得应用更加灵活方便\n\n      1. ```java\n         public class WindowAggregateFunctionExample {\n            public static void main(String[] args) throws Exception {\n         StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n                env.setParallelism(1);\n         SingleOutputStreamOperator<Event> stream = env.addSource(new ClickSource())\n                        .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forMono\n         tonousTimestamps()\n         {\n         {\n         .withTimestampAssigner(new SerializableTimestampAssigner<Event>()\n         @Override\n         public long extractTimestamp(Event element, long recordTimestamp)\n                      return element.timestamp;\n                   }\n         }));\n         // 所有数据设置相同的 key，发送到同一个分区统计 PV 和 UV，再相除 stream.keyBy(data -> true)\n                .window(SlidingEventTimeWindows.of(Time.seconds(10),\n         Time.seconds(2)))\n                      .aggregate(new AvgPv())\n         .print();\n                env.execute();\n            }\n         public static class AvgPv implements AggregateFunction<Event, Tuple2<HashSet<String>, Long>, Double> {\n                @Override\n                public Tuple2<HashSet<String>, Long> createAccumulator() {\n         157// 创建累加器\n                   return Tuple2.of(new HashSet<String>(), 0L);\n                }\n         @Override\n         public Tuple2<HashSet<String>, Long> add(Event value, Tuple2<HashSet<String>, Long> accumulator) {\n         // 属于本窗口的数据来一条累加一次，并返回累加器 accumulator.f0.add(value.user);\n         return Tuple2.of(accumulator.f0, accumulator.f1 + 1L);\n         }\n                @Override\n                public Double getResult(Tuple2<HashSet<String>, Long> accumulator) {\n         // 窗口闭合时，增量聚合结束，将计算结果发送到下游\n                   return (double) accumulator.f1 / accumulator.f0.size();\n                }\n         @Override\n         public Tuple2<HashSet<String>, Long> merge(Tuple2<HashSet<String>, Long> a, Tuple2<HashSet<String>, Long> b) {\n                   return null;\n                }\n         } }\n         ```\n\n   6. 全窗口函数(full window functions)\n\n      1. 窗口操作中的另一大类就是全窗口函数。与增量聚合函数不同，全窗口函数需要先收集窗 口中的数据，并在内部缓存起来，等到窗口要输出结果的时候再取出数据进行计算。\n      2. 这就是典型的批处理思路了——先攒数据，等一批都到齐了再正式启动处理流程。 这样做毫无疑问是低效的:因为窗口全部的计算任务都积压在了要输出结果的那一瞬间，而在 之前收集数据的漫长过程中却无所事事。这就好比平时不用功，到考试之前通宵抱佛脚，肯定 不如把工夫花在日常积累上。\n      3. 那为什么还需要有全窗口函数呢?这是因为有些场景下，我们要做的计算必须基于全部的 数据才有效，这时做增量聚合就没什么意义了;另外，输出的结果有可能要包含上下文中的一 些信息(比如窗口的起始时间)，这是增量聚合函数做不到的。所以，我们还需要有更丰富的 窗口计算方式，这就可以用全窗口函数来实现。\n\n   7. 全窗口函数也有两种:WindowFunction 和 ProcessWindowFunction。\n\n      1. 窗口函数(**WindowFunction**)\n\n         1. WindowFunction 字面上就是“窗口函数”，它其实是老版本的通用窗口函数接口。我们可 以基于 WindowedStream 调用.apply()方法，传入一个 WindowFunction 的实现类。\n\n         2. ```java\n            stream\n               .keyBy(<key selector>)\n               .window(<window assigner>)\n               .apply(new MyWindowFunction());\n            ```\n\n         3. 这个类中可以获取到包含窗口所有数据的可迭代集合(Iterable)，还可以拿到窗口 (Window)本身的信息。WindowFunction 接口在源码中实现如下:\n\n         4. ```java\n            public interface WindowFunction<IN, OUT, KEY, W extends Window> extends Function, Serializable {\n            void apply(KEY key, W window, Iterable<IN> input, Collector<OUT> out) throws Exception;\n            }\n            ```\n\n            1. 当窗口到达结束时间需要触发计算时，就会调用这里的 apply 方法。我们可以从 input 集 合中取出窗口收集的数据，结合 key 和 window 信息，通过收集器(Collector)输出结果。这 里 Collector 的用法，与 FlatMapFunction 中相同。不过我们也看到了，WindowFunction 能提供的上下文信息较少，也没有更高级的功能。 事实上，它的作用可以被 ProcessWindowFunction 全覆盖，所以之后可能会逐渐弃用。一般在 实际应用，直接使用 ProcessWindowFunction 就可以了。\t\n\n      2. 处理窗口函数(**ProcessWindowFunction**)\n\n         1. ProcessWindowFunction 是 Window API 中最底层的通用窗口函数接口。之所以说它“最底层”，是因为除了可以拿到窗口中的所有数据之外，ProcessWindowFunction 还可以获取到一个“上下文对象”(Context)。这个上下文对象非常强大，不仅能够获取窗口信息，还可以访问当 前的时间和状态信息。这里的时间就包括了处理时间(processing time)和事件时间水位线(event time watermark)。这就使得 ProcessWindowFunction 更加灵活、功能更加丰富。\n\n         2. 作为一个全窗口函数， ProcessWindowFunction 同样需要将所有数据缓存下来、等到窗口触发计算时才使用。它其实 就是一个增强版的 WindowFunction。\n\n         3. 具体使用跟 WindowFunction 非常类似，我们可以基于 WindowedStream 调用.process()方 法，传入一个 ProcessWindowFunction 的实现类。\n\n         4. ```java\n            public class UvCountByWindowExample {\n               public static void main(String[] args) throws Exception {\n            StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n                   env.setParallelism(1);\n            SingleOutputStreamOperator<Event> stream = env.addSource(new ClickSource())\n                         .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forBound\n            edOutOfOrderness(Duration.ZERO)\n                                .withTimestampAssigner(new\n            SerializableTimestampAssigner<Event>() {\n            @Override\n            public long extractTimestamp(Event element, long\n               return element.timestamp;\n            }\n            }));\n            // 将数据全部发往同一分区，按窗口统计 UV\n                    stream.keyBy(data -> true)\n                         .window(TumblingEventTimeWindows.of(Time.seconds(10)))\n                         .process(new UvCountByWindow())\n                         .print();\n                   env.execute();\n               }\n            // 自定义窗口处理函数\n            public static class UvCountByWindow extends ProcessWindowFunction<Event,\n            String, Boolean, TimeWindow>{\n                      @Override\n            public void process(Boolean aBoolean, Context context, Iterable<Event> elements, Collector<String> out) throws Exception {\n            HashSet<String> userSet = new HashSet<>(); // 遍历所有数据，放到 Set 里去重\n            for (Event event: elements){\n                              userSet.add(event.user);\n                         }\n            // 结合窗口信息，包装输出内容\n                         Long start = context.window().getStart();\n                         Long end = context.window().getEnd();\n            out.collect(\" 窗 口 : \" + new Timestamp(start) + \" ~ \" + new Timestamp(end)\n            + \" 的独立访客数量是:\" + userSet.size());\n            }\n            161\n             } }\n            ```\n\n         5. 这里我们使用的是事件时间语义。定义 10 秒钟的滚动事件窗口后，直接使用 ProcessWindowFunction 来定义处理的逻辑。我们可以创建一个 HashSet，将窗口所有数据的 userId 写入实现去重，最终得到 HashSet 的元素个数就是 UV 值。\n\n            当然，这里我们并没有用到上下文中其他信息，所以其实没有必要使用 ProcessWindowFunction。全窗口函数因为运行效率较低，很少直接单独使用，往往会和增量 聚合函数结合在一起，共同实现窗口的处理计算。\n\n      3. **增量聚合和全窗口函数的结合使用**\n\n         1. 增量聚合函数处理计算会更高效。举一个最简单的例子，对一组数据求和。大量的数据连 续不断到来，全窗口函数只是把它们收集缓存起来，并没有处理;到了窗口要关闭、输出结果 的时候，再遍历所有数据依次叠加，得到最终结果。而如果我们采用增量聚合的方式，那么只 需要保存一个当前和的状态，每个数据到来时就会做一次加法，更新状态;到了要输出结果的 时候，只要将当前状态直接拿出来就可以了。增量聚合相当于把计算量“均摊”到了窗口收集 数据的过程中，自然就会比全窗口聚合更加高效、输出更加实时。\n\n         2. 而全窗口函数的优势在于􏰀供了更多的信息，可以认为是更加“通用”的窗口操作。它只 负责收集数据、提供上下文相关信息，把所有的原材料都准备好，至于拿来做什么我们完全可 以任意发挥。这就使得窗口计算更加灵活，功能更加强大。\n\n         3. 我们之前在调用 WindowedStream 的.reduce()和.aggregate()方法时，只是简单地直接传入 了一个 ReduceFunction 或 AggregateFunction 进行增量聚合。除此之外，其实还可以传入第二 个参数:一个全窗口函数，可以是 WindowFunction 或者 ProcessWindowFunction。\n\n         4. ```java\n            // ReduceFunction 与 WindowFunction 结合\n            public <R> SingleOutputStreamOperator<R> reduce(\n                   ReduceFunction<T> reduceFunction, WindowFunction<T, R, K, W> function)\n            // ReduceFunction 与 ProcessWindowFunction 结合\n            public <R> SingleOutputStreamOperator<R> reduce(\n            ReduceFunction<T> reduceFunction, ProcessWindowFunction<T, R, K, W>\n            function)\n            // AggregateFunction 与 WindowFunction 结合\n            public <ACC, V, R> SingleOutputStreamOperator<R> aggregate(\n            162AggregateFunction<T, ACC, V> aggFunction, WindowFunction<V, R, K, W> windowFunction)\n            // AggregateFunction 与 ProcessWindowFunction 结合\n            public <ACC, V, R> SingleOutputStreamOperator<R> aggregate(\n                   AggregateFunction<T, ACC, V> aggFunction,\n                   ProcessWindowFunction<V, R, K, W> windowFunction)\n            ```\n\n         5. ```java\n            public class UrlViewCountExample {\n               public static void main(String[] args) throws Exception {\n            StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n                   env.setParallelism(1);\n            SingleOutputStreamOperator<Event> stream = env.addSource(new ClickSource())\n                         .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forMonot\n            onousTimestamps()\n            163                     .withTimestampAssigner(new\n            SerializableTimestampAssigner<Event>() {\n            recordTimestamp) {\n            @Override\n            public long extractTimestamp(Event element, long\n                   return element.timestamp;\n               }\n            }));\n             // 需要按照 url 分组，开滑动窗口统计 stream.keyBy(data -> data.url)\n                         .window(SlidingEventTimeWindows.of(Time.seconds(10),\n            Time.seconds(5)))\n            // 同时传入增量聚合函数和全窗口函数\n            .aggregate(new UrlViewCountAgg(), new UrlViewCountResult()) .print();\n                   env.execute();\n               }\n            // 自定义增量聚合函数，来一条数据就加一\n            public static class UrlViewCountAgg implements AggregateFunction<Event, Long,\n            Long> {\n                   @Override\n                   public Long createAccumulator() {\n             return 0L; }\n            @Override\n            public Long add(Event value, Long accumulator) {\n               return accumulator + 1;\n            }\n            @Override\n            164\n            public Long getResult(Long accumulator) {\n               return accumulator;\n            }\n            @Override\n            public Long merge(Long a, Long b) {\n               return null;\n            }\n            }\n            // 自定义窗口处理函数，只需要包装窗口信息\n            public static class UrlViewCountResult extends ProcessWindowFunction<Long,\n            UrlViewCount, String, TimeWindow> {\n            @Override\n            public void process(String url, Context context, Iterable<Long> elements, Collector<UrlViewCount> out) throws Exception {\n            end)); }\n            }\n            // 结合窗口信息，包装输出内容\n            Long start = context.window().getStart();\n            Long end = context.window().getEnd();\n            // 迭代器中只有一个元素，就是增量聚合函数的计算结果\n            out.collect(new UrlViewCount(url, elements.iterator().next(), start,\n            }\n            ```\n\n### 其他API\n\n**1. 触发器(Trigger)**\n\n1. 触发器主要是用来控制窗口什么时候触发计算。所谓的“触发计算”，本质上就是执行窗 口函数，所以可以认为是计算得到结果并输出的过程\n\n2. 基于 WindowedStream 调用.trigger()方法，就可以传入一个自定义的窗口触发器(Trigger)。\n\n3. ```java\n   stream.keyBy(...)\n         .window(...)\n         .trigger(new MyTrigger())\n   ```\n\n4. Trigger 是窗口算子的内部属性，每个窗口分配器(WindowAssigner)都会对应一个默认 的触发器;对于 Flink 内置的窗口类型，它们的触发器都已经做了实现。例如，所有事件时间 窗口，默认的触发器都是 EventTimeTrigger;类似还有 ProcessingTimeTrigger 和 CountTrigger。 所以一般情况下是不需要自定义触发器的，不过我们依然有必要了解它的原理。\n\n5. Trigger 是一个抽象类，自定义时必须实现下面四个抽象方法:\n\n   1. onElement():窗口中每到来一个元素，都会调用这个方法。\n   2. onEventTime():当注册的事件时间定时器触发时，将调用这个方法。\n   3. onProcessingTime ():当注册的处理时间定时器触发时，将调用这个方法。\n   4. clear():当窗口关闭销毁时，调用这个方法。一般用来清除自定义的状态。\n\n6. 可以看到，除了 clear()比较像生命周期方法，其他三个方法其实都是对􏰂种事件的响应。 onElement()是对流中数据元素到来的响应;而另两个则是对时间的响应。这几个方法的参数中 都有一个“触发器上下文”(TriggerContext)对象，可以用来注册定时器回调(callback)。这 里用到的“定时器”(Timer)，其实就是我们设定的一个“闹钟”，代表未来某个时间点会执行 的事件;当时间进展到设定的值时，就会执行定义好的操作。很明显，对于时间窗口(TimeWindow)而言，就应该是在窗口的结束时间设定了一个定时器，这样到时间就可以触发 窗口的计算输出了。关于定时器的内容，我们在后面讲解处理函数(process function)时还会提到。\n\n   1. 这三个方法返回类型都是 TriggerResult，这是一个枚举类型(enum)， 其中定义了对窗口进行操作的四种类型。\n\n      1. CONTINUE(继续):什么都不做\n      2. FIRE(触发):触发计算，输出结果\n      3. PURGE(清除):清空窗口中的所有数据，销毁窗口\n      4. FIRE_AND_PURGE(触发并清除):触发计算输出结果，并清除窗口\n\n   2. ```java\n      public class TriggerExample {\n         public static void main(String[] args) throws Exception {\n      StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n             env.setParallelism(1);\n             env\n      .addSource(new ClickSource())\n                   .assignTimestampsAndWatermarks(\n                          WatermarkStrategy.<Event>forMonotonousTimestamps()\n                          .withTimestampAssigner(new\n      SerializableTimestampAssigner<Event>() {\n      }) )\n      @Override\n      public long extractTimestamp(Event event, long l) {\n         return event.timestamp;\n      }\n                   .keyBy(r -> r.url)\n                   .window(TumblingEventTimeWindows.of(Time.seconds(10)))\n                   .trigger(new MyTrigger())\n                   .process(new WindowResult())\n                   .print();\n             env.execute();\n         }\n      public static class WindowResult extends ProcessWindowFunction<Event, UrlViewCount, String, TimeWindow> {\n      @Override\n      public void process(String s, Context context, Iterable<Event> iterable, Collector<UrlViewCount> collector) throws Exception {\n                collector.collect(\n                       new UrlViewCount(\n      ) );\n      } }\n      s,\n      // 获取迭代器中的元素个数 iterable.spliterator().getExactSizeIfKnown(), context.window().getStart(), context.window().getEnd()\n      171public static class MyTrigger extends Trigger<Event, TimeWindow> {\n             @Override\n      public TriggerResult onElement(Event event, long l, TimeWindow timeWindow, TriggerContext triggerContext) throws Exception {\n                ValueState<Boolean>                  isFirstEvent                  =\n      triggerContext.getPartitionedState(\n      Types.BOOLEAN)\n                );\n      new ValueStateDescriptor<Boolean>(\"first-event\", if (isFirstEvent.value() == null) {\n      i + 1000L) {\n      for (long i = timeWindow.getStart(); i < timeWindow.getEnd(); i =\n         triggerContext.registerEventTimeTimer(i);\n      }\n                   isFirstEvent.update(true);\n                }\n                return TriggerResult.CONTINUE;\n             }\n      @Override\n      public TriggerResult onEventTime(long l, TimeWindow timeWindow, TriggerContext triggerContext) throws Exception {\n                return TriggerResult.FIRE;\n             }\n      @Override\n      public TriggerResult onProcessingTime(long l, TimeWindow timeWindow, TriggerContext triggerContext) throws Exception {\n                return TriggerResult.CONTINUE;\n             }\n      @Override\n      public void clear(TimeWindow timeWindow, TriggerContext triggerContext)\n      throws Exception {\n                ValueState<Boolean>                  isFirstEvent                  =\n      triggerContext.getPartitionedState(\n      new ValueStateDescriptor<Boolean>(\"first-event\",\n      Types.BOOLEAN)\n                );\n                isFirstEvent.clear();\n             }\n      } }\n      ```\n\n2. **移除器(Evictor)**\n\n   1. 移除器主要用来定义移除􏰂些数据的逻辑。基于 WindowedStream 调用.evictor()方法，就 可以传入一个自定义的移除器(Evictor)。Evictor 是一个接口，不同的窗口类型都有各自预实 现的移除器。\n\n   2. ```java\n      stream.keyBy(...)\n            .window(...)\n            .evictor(new MyEvictor())\n      ```\n\n   3. Evictor 接口定义了两个方法:\n\n      1. evictBefore():定义执行窗口函数之前的移除数据操作\n      2. evictAfter():定义执行窗口函数之后的以处数据操作\n\n      默认情况下，预实现的移除器都是在执行窗口函数(window fucntions)之前移除数据的。\n\n3. **允许延迟(Allowed Lateness)**\n\n   1. 基于 WindowedStream 调用.allowedLateness()方法，传入一个 Time 类型的延迟时间，就可\n\n       以表示允许这段时间内的延迟数据。\n\n      1. ```\n         stream.keyBy(...)\n               .window(TumblingEventTimeWindows.of(Time.hours(1)))\n               .allowedLateness(Time.minutes(1))\n         ```\n\n      \t\t\t\t2.  从这里我们就可以看到，窗口的触发计算(Fire)和清除(Purge)操作确实可以分开。不过在默认情况下，允许的延迟是 0，这样一旦水位线到达了窗口结束时间就会触发计算并清除 窗口，两个操作看起来就是同时发生了。当窗口被清除(关闭)之后，再来的数据就会被丢弃。\n\n4. **将迟到的数据放入侧输出流**\n\n   1. 基于 WindowedStream 调用.sideOutputLateData() 方法，就可以实现这个功能。方法需要 传入一个“输出标签”(OutputTag)，用来标记分支的迟到数据流。因为保存的就是流中的原 始数据，所以 OutputTag 的类型与流中数据类型相同。\n\n      1. ```java\n         DataStream<Event> stream = env.addSource(...);\n         OutputTag<Event> outputTag = new OutputTag<Event>(\"late\") {};\n         stream.keyBy(...)\n               .window(TumblingEventTimeWindows.of(Time.hours(1)))\n              .sideOutputLateData(outputTag)\n         ```\n\n### 窗口的生命周期\n\n1. 窗口的创建\n\n   1. 窗口的类型和基本信息由窗口分配器(window assigners)指定，但窗口不会预先创建好，\n\n      而是由数据驱动创建。当第一个应该属于这个窗口的数据元素到达时，就会创建对应的窗口。\n\n2. 窗口计算的触发\n\n3. 窗口的销毁\n\n","slug":"王阁/技术/大数据/flink/2023/Flink_Time_Window","published":1,"updated":"2023-02-28T13:54:53.990Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cleozhbp80006vnpwbbyr73r6","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"0c01dc036d4b3ce95e053b64cd12df644d187d61986f98eb645ae360d31e1aed\">c0121ee19bbbe2f5c6ccb901dd53cde8b347db949a47b5b364cf48f3ac58fd9a4344bdd6fc609a29b9a7544dcd08649b85f814a27b525d90f7e01e31a1fea6bfdf03551c9bc2e1ca7ea0bb3f1186a952fa35fe3728fcb166164bb665e08a1af7f4b0402d02c6b980cde2fc9a5f16511065eeda5a1611577ab8fc449a02440308829abea3aeb5687d823d2368d331811e321bb660f328c1e5edb6ed3714c4ff5878c8979d9ae03d7939cdeac12503633e4a42c1a2b1c61a9f79ddd2b96fd8a73231fa5337d8814d908f3a6f54e8d66abb9fb8ed4d239dd4bac36a112cad7a50362451b571802bce71dcda2aa059dd6f917e4038684cddf4db08987fca8dbb22b8db74e88cdb6204d6cd9a3ddfc0f2ef81fd1658292d12d0af29cccc2c9a1e8f016136d7c376672512e8ab7b768dbf011e4f94569a350c7697350db17225736514ff795c7e5aada66ebefd3c8092fbcc74337a1dce5d1fb213b1081b1c3f0dcba7ebc3fab8c6f6c3330cc45c9dc6a2ce2d88262a02d945e927252e975baa375be713b29b006975f7ec5aaa53f99708f63dcec948e034a8f8a5b94faee3e4acb400090786a718491892f40cc8266729f655e513a50c6be3218837fdc7e9fc93e9fad89368406f5e0ddb816824e65deaa20902e7f32cf959f0a93dddf20b92683fc5f2e6bf1661673320fc1bb2b0564376f4483839e421282e05e07ad6d28ef25b2490d75d1acecae47cfa9d7c6acc79adb088fa00d4b06384b0a327ebda7167d99351b39f0a29012254092b17623447756189801e5939883ff5465180751649c864e8d36c4eed5f64571c6f44fbd92ad55e682ab2cdab6c7f17ca3a6ca995bb230abac33a0fb0deee15028543e52d136e56834133fde31c0dac34bcc819a01ed0020bb62540af39a6183f600cbc95d75a7fd523d5cdb26f90ef6966f134d534543f4aaa7c1294081feff9d8c531fef3ba417dc866033206f5295d888d75be36e8aa0d1efdc905da220fb683d56af5434279fd1e72f3afb0a4f948eb1ebf88fbb70ff3049ceecd4417505be3ccb52b96a7f55dd73ff63a510d2f235e7cfa08e86a3da232c8ac2df1a2364632885c14ea74242f0d7edb41bb3e535767ed31844dffbfe23dfd86ecf7d11565bb426fecb4e5fcb8066e6f9904e03dc2b4e057f39122dfb022782d35b132598abe4f7370ff1a73a19986b1dce864893012d605c7e78e440e6ecea1b5418f00b07e23fc5e80ee5fd0516339098add0cbb82ea89c339f39348f8150bb386d8ffb3a7650a390a1460c853d7b88573c7f789486c32d8e8265ca71e770ed5a5f6ed206ef9c3881d4afc9f853d85f6e7a618ede919e5caec2de96319c4aca2a102452267e2f967f4caab013f2ac911bac913fc06a9ef77ba1d583c90915e074b29c24ce5a511de397fbcd86e4485e2cd130081276fe23609010eddb4cb7cdf3e49831fec5c154fad077f564910b8d993edca9514fa526605c22f58c5f16f561eba5023578fd590dc327f61b9c7022c30bbb734c06e34ad90e7813d9c83ade0970f546e62f6688b5048d7b14d52346025930f097ad0ec517992a4bd2f8ac252a0c8e92c123cb099b59cd9a0fea019a9d8478442b6f12f8f9d0be54beea95da11725952ec2ee6e2b03c9b21a9d1f262b339d95b798ffbc3c895a1e702631f367bf2911cfe1b3d29fa58eb0ca77cc0d0b46ae69abd1d05e8e4be32df5d93a041c00540d09c858a3bc3258bc3f02407a691364a8ff10019ec699580917cfe32bba8fb5e25f6f59574e6b55672e3b21c1bb4e58f929de10eccebca29d7a4dff1f3a3687c8a870933f8cae76c52f79f8568b8ee630d21675d332af8665753fc9a33721c172ea61564448aa5dfd257ac88116dfceb3e66d5a8eef0c2341a7401b865d7919f80b6010bb360e53d45fa6c7fbb2ce6b47ee3b58ff6369d189c2ebd532de86f274bfe48d163d1d431a1842fccfcade0805dcae6fc96a6cd7a97995de479d2081439e9a840fda790527581604bd98781598733020a236c85be3129891f485b0daaa31d06d50e1437a3c5cad15e7522b9ee5d55f068132fc5df93d8473cf5b536493bb01bd66e54b81a45d57bdb2656ab23844bfec38c527175f676c8a6e52be8628ec0ca611368823381fc68f905754aaa141b0bbeca98af0b387e188cd008eae30b40faa8923243cb17bb46d932972bfd8755fcab1d620918eca1308e272cf92f11001666b448e643713ace7c0d704b33e2668fffda1cc2aaaaf66a2ddcab2e538b5d76f76c8225e2652ac41528f22db74ba50caa68570186f6a1e6e45d2770b6aa36d719a518dbcb403ac2f94b3fa95decca69c71c8d6b32e9bced2dd07d385485fd2ccca70a7e4d418e4a19cc3fdbceb5c03cb6e84b807ccdb5635b200703436063d730d79b715cdad3109e61cb6de60d22f72c536f1788a9737edf05fb33b1675defe902909b3f291a13688bc3e2f5b2b6e10b862ee30f3a57f4c52003c6892a7137dfcd8652b780cab60a5e64474ab93ef92e6c47cb8a0c2cf22400ac0875898eaa7236cfb98fe635b3eb7321635258590a5906674e45450460c7875f38f92773290b7958fe1c37675c90a22b2d047813165aac1fe07a9a74d6cc1cde41501ef36ab64e92940258f8e58c962bf4bf8ceb7863b78a76b39f133f771272e4edd62a916917e5a367dc6a2066897f4063bb825f5440db38022e5967ea6612ade2cd885d2be6ad13d9a3e183096cc9c0fa06ca33a89ad38401167b060c8ef9b23a7a0412c4667420663dae8e4839d1af280015a1f51df4e9543674af7f48d4f614d5120c3e5eb10deb634ad13e69f7a5b32600917358aca88069c04bed5416bac519ad3d2d7ae4a8407b11bb48cd4d9a889cf91b3de289d340febb749bd2a125f43b011b26fe8fd3ee15988493dd62c171fc27c5afbf8bdf7078cc270ce7db929f20cfc0342d2c2a603c6b78d263ba54bfb5575692c43a270392ac863f8397bdd04afa1c5a5649c95069d74a6051f911f21e6e263f7085ccc91997547fe93b3efc7cab7506dc4b0875ff24bdcd3cdb333db3b73fb02ec45439d2b6debb68960abfc8a236e837c32e9ffea4523fbf9409ca13ec27a82e6c9daacf67e6af8ae18b0b03089bb7c4875ee55aea8b478640914fb9d538ec2e88c9c5c5b95445643e9be9db42bfe3d4eb6ed7c573e76cfdd474308b8df90433fa5cf3fc197c6130de8296bfa0501381b895774a2d98cc2638440e9cad01ac167a357968875c819105f993ef7a9e72334cb2efb1baf4409f3a44baca64ec85215b7663623f5cf5baa7d53e0efd03895ddce85f72fde99fb4e9997a83b911ef998af4b07cd85950c0bf07b1ed3550b1a3a9c950e8e727900ba9b706f4a152bfcb7a975e76ae90550dfe31dc43994bdb3e1d7c34b75be04e7ea4009b40bb408aec47a9e64f42032702756b84cae8a6d3b466dc571d34671e405c9daabc19a63f85eeadbc39839eb155035abe4b513739275686596e0e57b8c464af50470dea10a8820128757b9b20aef6f76e3378f0fe58df6f19e7ad02f92fd0f2494eb3b55fe4934f4810368ec0d27b3b49f625ac626f979d416bbb2b88405209df61fc5997d74f1abc02475605b9b24a3a455c8e69843df0065bbd72a5c84835a9a9e33f9a449d9398365e1b0242cbb781839a02079701804fc6f840701a9b043b739db1dd85f851923f07d9d7a02fa4efde4f1fcf183ab143cb4cf440c386c69e4914148533bbc9f204e623a660d9484278367728e33e66618b5d3551ea3b8a2f14ebb29238e8e31a32958f1a336334e666b1b5c5fccd12fecb5daa7fc353842a6ce2444c011545a76cbc47ad8db5024a39f891fa7470ad2d0354aa3a0160fdec9f2a3d2a0670da0ec9740058f406414ea9a37d4f93b35cf38da08c4b9a3e79ccfe564551e986037957617e2e5d85583fbbb7fef3b2b0faf9bbd63696cb96f05d3b7a04622aadf056dafa8c69752e9f2faaf6053401f72a414086ba8f5da7087f945201d30c2215f3bcd8cf6fb96a73a7c919542e3ee865cf92c7abf8f14443039201a373ae653e59d22dff5e5274a2f5af6285d6eb0df3381292067aa0ac36fdf32ef12f54a19775b3ea3d40de320a7fb5dc2fc157f8a4a37a056c55fd2c28b43e952223b154592e3efeefbb453c987b0bb1b651d2fbfc673bf9e97e13706d7bbf2ee5b5c6e2caa516072c3a948a04baa335101c8eaa159384f91e429eb039895dced73322d29309308169d20b3fd7018e861ea3ddbab0dc33a445930c6e60b8dda329ee111eb8ee789a7c6816fb8a50c290723eaf966f5662cc03838d016efa633b84bad785bf13a3481a4476f8b1f355cd3e9050fee773876df7dd62cb396a5e7d3013873fe1d5c1f6af7c4ad16283e2012c02c8517c7b03876f717e77ac158f18c948a3e43d43dc02b422d38fadcd1e5cad3b07dd4b245bf402cc779780e6986e6277688083444f2b5031dac84f3d2c99a1be7997244fb7fd652835c67ca47176b2bb628510455697766611e1d0ae00c0f419e55927971ae24e67767ce689bdf25e77dd9f6b45010a2ee8950bb01dbcd7c95327f02629bbd07cbfb70a812e0eb44bef3b1cf344620bd200f765f1a0c7c48f713a18e86adc944681313479d00b7de57da0926a3d1e340c2e935248c819538282ed97bec3ca26ee9143030c50814cd9a4dbdd71efc361cefd1d8e26e4df64c1fe5b725deddc78072877c93db86305e1c0cc49a0a2486ae47bed75bd40effa09706bf7a4ac53644fe62faf8715acc9ac5b9149bf1ca21a4024f41987a2fa950b4d82fa220d6776de960b0d4267b283f4152ee8f81b89e4af1be53a1214443af0369d6f9523a7c1acc7556f18133b5f5a7723854d7e9f0dc6ddce896ce24febec232917cc35532d9a0763eea521c8c82a8526255f5304566f423b1934b0a0456fa9b2b5313be4d93e921a2194c1f9a63b2dba13138313164c9b191d59ee4f88f58e653fee27dbc35f94ddce3963ae596e0761bd2a0cc80f58abffdf5b6100a96cd923cea5bda5bc4591d23301bee5521031b73584334ba7964b13e1dcb9208a95158bb4cc3b83cc511cb86c4e790abea2d12aa91ba91c5f4fed10409116d261a91dfffa165e3540e079e0a006763412d6a6047ac654ff2ad2a9bf90ba23f792511a8b7edbd3f210adeb540e608e364b8ab0ac4f1a747be3623596762083a8902f53b3887277093eff8970f4ba2db80a0ca2608dbab6ed728830a37114ffbd6d1ccaf983f65794a5905dabc8ee4dc7959cbd3ff23974d09c2e14caad643bb7215e239a732864c9f8407ae3f9985781747dd762cfc935dc3ff3b2a00f692c35f51058bb8f49b767dd348b36b9cfc551c50c5825192e18a1d5eb79d23627f83f80ba2bf73f046b274fb4b04a8dcb0a81064f73b39bba090d9bdf32955d8807a9e7a572a9c5c5d59d4ff162bc60842a1c16bd956f8ca8d43ad8f216a2c505d568d0c6588d985dd1cb5ce7b69eaafe3aff4c535c11f17c274d4c8c56a91211371839673400cc8e184d9329bb0df45683f2a1d355c62c2579c0559159143b748623d938cc9a340fd9bc6d89342a44db6ea23c2133d256ecb9c9fb610669dd8a6e77300cd0ffe4d7d8ee086b9a0ac460c0ca7202b17f9e5c114af1964f7bc80feed7899a3abf4473d9265ee39954d13ef92ba6985812984bb32264705704768d46daa61e23313577c0e00c02c4c2766af6526ac701bfc6298b73eea8a9488cf3c135095fde2591772815ea45a4b2d9009e4aef2fa58d761d493babdf154b2b7cd446f058f28be73a7e37beceff03b3f6a2a1ef2a0848e59810f625bd7f514c91f03c53ce4c224c44aa4febca7cb8151cd1188fa581e49ff49c4e23854edfffd5fe1c97ad3692e608fad883a028b59c7bc56eedb560a47cee0459ad28669c990799c5654124fd25e08af7248c13f2f9569881abe91b09ba347dc350d8b61dae2473211a6a639e9d9bcae8f232b6b69c6600ef21db23c4572c269908f73ed0b547848856f01482c26c44d3141a59947912dc4b6deab1c7c6fe1f2a00c5102d8fae7039420b2f112f7a67ccf13d581c334ca75b8da1beaa8e30629bac6e4e30b90aa66eb697abd0ca37a604ee2a5a00122c29aa76cbdc6205de02494624408afe7a205b95f168680d3c0bd39d27395fdc7085529d19fb6696d9b46fe7e01891efab22e694dccbb644cf21d24dacd8e2c2ab2d5dcf339e719e7650d25d86d4d5e7b77d6a551a35505db11d2819952cbe2fffb74d602e1e52a5ae5e8af4ab18b6482a031c1b5e576575b23dd105194e416f75bcf681ce0b6ba2faf7a355b39d61a2b599e05b6c7e1689f0ae34d53bf93bea2da242b69108194146d9aad2c23352288b58d0d8747a5e4275738f39ee14c1f72e696ea806b2ae040de99b767a1be6aab96f7936157dc2bacc3ac1b4f76df47495d51f5e85d653dff58312eb28d7598f684804e087d1aaed772e0cf930df60a0e600163b60d03d3f8fb0e3e75704856d9fdca514fb3e2a09fddfb2891798b73377436704326bea62e95dc87070117f3c2db46a5f6afa6b2d2cdb387b6e5a45f30a4173e6a42b04838feab002fd3722d4a7909988ac166c3ebad22934dce5482570a45b2bfac299b99fa4d40bf25eebba251b6b18cd15af225934ab07930870fc95addc2208f9d886756bcf2e91b7c76d3fe2aa0c1689c62fb5eea6efffd85a74486c5f066dddbaedaa7b800b0e62aa37c658db79ac7f504e2e039623c24bc28ff724283b68a06dcc271920c781a12d703fb9222e020c7806ad804e24951d0cd09dc115a7b8b464c427bc00ab6dfd31eaee66f962c4dbea486b37939f171f9883aaccd34b3b3604dd98f730035c6824527696f0a7518b25dc32d16e068f3cd2c16b7f3be1366d502e8fae693db0bd802ac39e97d1583d1e9906dd7e06dec505ab52e5460eab02fd87f9ea228fffd5eeda545cdf3991ab2c1ad2acd864db189dc2298778b51811d8cfe8eec1d93e1df205afa1f9c5d1a1a3ff93999e9f9a5fe549f6bf01e45e96ac28b15004f237b057aaf0f66359a037ad6254450cf053f0bb440a005726deacc5b96cefac2fed64cb7ca95d6cc3b8d4129bfd5b67b22260bd12a00279e6c422f511a3322cca0ff5a1fc11112e911ef2f8df9249ce1fe2a8324579c2dd091e47afe39b3f9d9fd67716fb786e4cc4ab6108632994d887d7a4e80665f3ce8b9e0f2f8f487338777809795af75f02569e0514e40603a3237f8691b77807f58dfdedd271b481bab8e1bf6df26ac65f5ae86f05de49d2603bce74c07a6da552a660dee7e8ae0ea433e25d0bd7bcce7b021705cd808dbed3476112e839f59d8da87b0f1af93b08b850d3664826ea2a96347d5bcc9dd8662c5f85bf7c0cc1df6d0748cff3811bcd031082e20939c9ff8e6565ef4c7da9887928ac36673ff6ff20ec2f63025215d7ada05cfba071a208d120c12ce72d6ff87cc13f6b746ba08699ec6da561efee1cce6a176b8c0af0203b6bd89ba899f190625cfb8ce099cbc2e3fb1960b0f3fd72acbfcf480728a94c4f26c0c18b7fa8ef6edbfdffe640258f744079f2142ba2233d4a8b0c70f4a76d272a7663242fc3fcc842d270ede0843c31fde07d0bed9acc238fdfea485135b42e3145785c6076643ea8dc94f5e885e9e500f990fc2fb8d205700c5d7697546486610c1b9488acf69636c256d03fdcd7497b10a42493f6d038b0344ce027a692f814e59696ec5e2dff9dcf1e0337708b5f79430a94b36879a1f1dfa97658be68edba2cea4956ccbae0e1a1e57c83b17d735266281e2308355f6f9f3d3b0507f18f561936fcc5407d04edc4a0410fbfd331917f1b8f75a9be009cb650da5b73210cd9ccb2992aee1ad13cd97d69ab745b665a6dd2f9516681e18363ef1dc24bd509b46179f8a68e01b38c545c73d44280e489977fbe1bee481ee0400822f0f12eed01cff94da2f83c0e35ed8130f0dce34720811e0b73c7f6663b74f882af70aefc7382e40f0fa42ccbd770ae6e2f8ca4f42289e988f0b8797848fab8f8458d79189343e373304db43c3a2a1f77db85b57994620bd2f5b6f5b5b87fe0f32c5bd5b93ac9bd05cf18426e454eb6f61e5afbf5612c310bb3c18d82eae7119ecbbc35bcc9231b8a3f59599eaf02db7420f5c83c23e51bb22aed8f0f78e8b42e1ec109469a745b2740499e01681dc1a60295c42449060b40c8f3e7f7a88ed1882a71c4e050953a1c84e4b44688342101df3cdfe107976e3a5c1f432e2459bcbb8866cdcd9a9a783055a93b3ac4c6b1882cb501666ee1ba33470567b859d808626f4af5fd8c942dfd361c02c8016d370cbb3db48a10216973d10405417e46c28207d8e2c310f05ff64ddcf837254e055b8c3388946f9239ed51663077d0f9366e2e466c933b523ddc259e2202264a0df76172eecd09b1cee6d99779a193abff31401fbccb19871b477349302b27f21ca36fb35b8d2ac595015990b359b7412b1bdd5ef728665736ee9570348f3ce7a48c226e6d6b3de2afd8756e672d364de5cbe0818eca5c1da06d93e58c12b7b4310e7b998b8ce8291368b58a625ea9b61476538a3f510f9983b31b06b7afeb9d3b39e7832c83d5ac7074261359d0be1430221bf55cd004882b4b2e6eb1dbe07e82f5841c08c2e9c53a4048c1ffc696fee054c099dbd3ee7f1230b7edce6bb9e1ce70c6d4bfca143939ca05f0c1ab959dacdbc57bd9537cc918ad5fdcfd2ac1634873bff757a5ecf61690dc9e9da39f7c583407ecfba5b7820f1afbf8e12e96e94fa78be5ae5de53108db63970e486f372d6754320b0ebbbe22dfa7b41e743557135e3b6c732412af363391c7292af7b094ca5d1cc25dd23adc225fc58fa801a06ca7ac12cbf9b73b0643f07cd97d742431f919a8d9d9757ffbb13f69086dc3abe15d5e7b845a0e2e2ece65c5bea9ad8b4b9dcf60b6dd3449ae18960c465a9a41eb7dc390922a55de45a429764c2c33c468970db44a28f81cdaa922c946cac2acf9859aedce76062fb22e7179b61aa439db555ad7261e51b096f69feef54968fc7b5c126c1aa2d9ce98ea764aae41306fe99d3fa02fe9d7e505296480a630dc3c7bad90f536eec6359bf80e02aa9ba92bcaf4836fe77e2e9ca11b2f664cde4aa4e750fa4bf7876ef4c84de95d98cca69794cbe1a7233c7b2b74553f9048cbee93ab571d07ca791866517195adbb5f6433dee454c750c51512f5ce918163aa55cf010fd2ba8b88ee92c4697eae58e35fbf9bf7acd89e3353fab6d7f0fffad334baadfb51640a9f21c67477fdaa3dbd58a298ff1928e1ff0ad2c945b3a069044f1f96e7eda042fd6b1d714d2eaf2d56bfb2cfb30d5ddfc2800878da046730b197aae2f548e996d2b7c94c1be715cb6c7f7f084b0b6f23c4159ed16f44e00404aa503ac5e060b74e210fb868f20639b308f671a7240fd3df30f48d0747979389cea6599a000ac473c6b7e911f85a9a7be638ec53da1e7ebf692546f7b5ed553f0c6b16a5cadbf4f2fd18043bcb8e18fd069347fd45230b939fb8bfd22a341e783128d30780f551bd0461b9b58f8666de38dea944f5135766240129d9d81afd9d015f0150acb036782676ad94cf2870f480253ae4a92f1b5946379e003e88b3d22d2722b279844bed96703a5beb836d3b1738734a6d87b225ab9088510efa8f4ee6ca6088659acb0210deafcc7720ebd03789d81b1c6f23c92613e3d12cb43776a24edff9d8deae1d68e1b6e95b745fdd3e61f1d09755c3065a739ae7510e51d858ce36310916de8a61f54aefdbe869249b144d796a524af764e0efe8c1509efe6ba70a9519fd528908564033c3b927c2f782b50dd5ad498a0883cfa291c11f698dc130be4b433439ba347f16fb91d8b26487867e9f46630d97f0af0523a4a3dede2e06621ae9d725a1d5155610587e6003131bf5c4b29e9401926fb0b2bc06abf61345601cc14ccedcd0a85904468f7a38c1aa77677fde386c318d63db4eab5c2595f0e3491cf47dcac8761879f7209baa1e4c6e913b2e459256ca698399e98b68808f2fb6dc0f99ee77b1035edcf125494f19e2383f0d32d5f8e3e08b993fe9823e51fc3eab5185c2e77ddab2b9022031c2f2c316c298d858e042a7d0f5442ef9a80f640d19cd4499da454284ad09bbe1bf13012a33e8b1ec637108fca08ac534f5ffd1cb55d83dfa2ca2e60121def0912149bf041c431d5ef6dbe17d778a43a8c23f2b4cbce56bdfbc1c47f617a0b83fd34601d2b1ed6bf8cf4d60ac00a235954bb3595027b1ba97ceaf76eda28fac64bdfd4336d3335867aa807e8dbccd3617542c314bdc10a0974a1d0c8a8b421c3a6865aad416674c9ce097694b8943e7312ff7bd703b0d62aef81a499433911b3ee7a04bf9fdd3fa2b8413c17ffbc32b62a3a2f4dac124bba0c55bfb158cff6b4e3d90864eaf837805a97e4e2ae1fa9c7afddc79b88118a785190eb4ed10215b4dcf35bba4c34f85207c5785c2f5536b63c7dd31f743badb0ed7e7d338bd71a0430f3f446907a96ef8fca593da5bd025057e81484e66ba9c3a1793e177ad124899bf8b3ccf4a8333b9d647b585c10bcdcb1cbb938a9f384154b6f4be2db987a2c6ac1498b795befb21105a9d914d44b41bad132c6eac46394123793ec06b8b6392969c2b89d2b56490a963d8af70b0bbe9a0b3f30fba277e4937372a2774d021499f6111281851148218c36895650c4534ae816ab37ce928c3a323068e503d84e54611d51fc902114799d94daf11deeeb165f8955973356ac690e2c214912a5c37fb40df50c5ba6e085add7fddc9e41abac5ba5b9c6d570624ec37275a0e940929ba07c18fefcbf5d15387e96d8674e444c5fdb762a2f67a7e231e8c69a063a5a9c187a79049ec0136eebe980c7390a66cb682b1fd10eea594ddc96edfd3bc55ce85fea74ab6dc4ff9d9995f8234039f849f0a34283a104d0f2ed5ada18a4b4c4569abdc6d06fa78464da23832bb4b4ca11cb1483aa3639cd280614cc901005c341b00274bb1148e976dd8072293b64a70c68e6d0bdbbb18222f6cf7f8437a0d2847ed5546b2cae097369fa0edf6e28872935c8c0be9f0862fd08d141312faa371bbe42bf93f4015ce231d404bd09897d09295f5706ab39f749d6b5a547a026174a784e55c8272201b53e72ceb5b34b0afc3791ef779b1cec685b7f7c163c4195502ef96e4a3a6a85090802600ad58387dde6da63b26d9bd5ea9c6669be8b25acdad158a057232d5615f7f9ccd331d71c20f2e3a4ccd3c8a32daf4ff2334742fab3eda0d6efcd711a78adbc0dd75f90e62c3884e061129505a060f893848499d3a88da84c8c92e3efa204766e3c6e49977559b4ab8c70783e9d8da4eb4cf313530431bbc450c6ae15b6bf9f4aea543208fe03051a60fab3cdaf1da34191b0fd8b0cdf4a947726a7d60ac7ac249a577a290c34f455046e1ad224d21d840928f0bb873205dbdb113c8d2f546be21cb45911033a9286582be3e572a2b0956e20cb4c31f9f2488cdad4ae6c8fc18a07df00e497c2341927e3394acbd5a870afb19a322111c9dce33d5d90152957649c7918df2fd01f9a93dd456157c142ecdb1809d2655086decd9abbbebbfce57d7859eb640440e65b955e8110c8ef0493014d948d2a15f6e52d21200e3e97c3892cd912b3efe5c654ce01d5013daed85c20dc8683ef1c289d5fe574ddde597fd31a756126b1ca736380796c7eac4299d1514ae0902ab9dcb234803781865f570aaeed32e73f91c619392f5f98bc01b61d8d05aacda8344fb17c9ea58947540e9c9ec93f75a6565e64710204b77ef9736c8ce0b406db3581b66c16b82ee8feab22c60ae9b821d6d5badecf8eb73eb9f92d86a00669f1b0b7be28a18e24143da8cd43923b147527dd5c515134b873323c51bc6d728a3ae1b2101b8e5337ea74e7baa79e45efb7e85fd881d11939b8cfc43b490497e62ec8a6a8a8419d02d848159fb97ee6368000311f2a99707b2efe96347dd8f132e3879ecfa0c3216a53ca6b5ff267a83d722fafebfdd5fe3e1a3dafa9d0483704c2ad4631fc073ef5b5fd1bba4df16a908fc625d274b5c774ece06f4ecdcd63c46641da7e5381d3d157c905b4f39ca1f005b71373fcee05cec3105e9b51f8feddc1d00c2332eb1f0bbfa95c21bf72085088a5c0438dbe6d7935a5ccd4bce5aeefe947317eed512fee2fa91ba0ee0bf0a026e6e15054593df8173fe132c1ca586397496930f213da92019c1f380497cfcc94c54d606c3975f3930e04cf568e08004941d48b50ca791f6627ce41aafc249be96fbcf87b9055f3faccdc92dd6ed0e6caee1d54bd50032bbb1139c351d9302119a823412d906c34b24f4e3b816a1f3297841688d9df12a3e632a1c1386df3197965c1a3a40a93c84de8a6b080b74a49a6e8d8fbb203f0e9994cd020e4451375a355b8bc57fccc5cbf20a0075be46b4ca49142c55b2bad8d3800c4f0b99be25732dfb4ac35eea6757d07d03afaafba3f4b6af027457b25350a7ea2819b93654a6abec5044bbdac5eddd6c7d0bf9cb159ef17f0c738df747deef422cb9ac3052d9369e6b4e375f542760ac69978e566b497533cbbdaeaefab3234b079a6fcafa7b584e91be52f738aea2a2dcd1772d7163567bd025936a75e07d7fb3a757b28a17c32bf63e3a02a8502e92f0d240631a7bf75aefcd17bb7a584b466d5b3775f91c7b2e806b473683a49b5ac71510a3bd32fcaf0074be9901d47820f8c737ecdeb3533d61e254f20a10a236a6f428dec5a98b39ba0e9cccf99f310646b80265ff4426f26ef847c09c27a0d2fcdc8e9719c55a6908c52cad63cc934e41bc05f120eb488d738d0a1af13dfd46cab04754543e5972b1f152d0a56f1d9b71e325258e7adcfa2f5573dc26bf1e2eb5ec83ef7a3a63b043e98b0f0b711d2c060cf5baeec78bf3dad1ded2f37dd50819f8fc8adcd378c67a26a6319d4bba0d35c8819b92c9e4fee17739e08891a4caab6a7f286dac2afeb128978033445aecd1f7175b086389832ca414044513858f44ad9a1bc286d06407e4fdb4c8754a8192ccef5d59698486072e84f00bb79d163864a95c5bb8cda663829274e943fadc54c8d98f1f2c295206f9de0db125397e825085d3ad9539b82b309255625a74fd8622f9a313b558341d907d8eaaa362dce3be7c89f908bf5b05f89fb46ec0f214b381af3998d7c645baa25ba8a3663704216460c5ded2360fab794636406312981191e2d2839005b8c39ca7822fead45e1d582d5b6ce6cc79a6b6ec3973135e233fa65b4766eaac6ed2435fc78bac8db7660c6764c5d35b06cabb9523c745a16ceb5a6af483691ad944ddb32809ff3fd6e86a4e3f0de460749b61f165a9adaa3ceeb06d15c579a34c8753e5f0eaacb8f5fd88a17fe2378258b11b747231a015ca1ade9233a0f5bbca1d0e8e8c4c06157b57b201c0ea1b63526ee91279f2b4ce92aae282e249fb8590c2b1e93782127dde6fbb5ff2cacd156483b4f62a201561db82298f97ef9ca6dfbc96fb19e26eaf450907ac1d778ea473d19b7a06d2f0b46acae394f77b8b6631071c6f12cb1105cc8a522cca54b059b4b2d74705964af3c6951988a1f7ffe219d7c668a9b6f63787d4225f74ca229c865c3b3911142c559c34ccb2a536a02b373f88cdce90703355c98fb04e525ea87feec31b65df985fe112749a0bb9b60bb12df72699665d919f0215f5f0ab667b6e4d27cbe3d11e5926ccaeecdb5b6009a56bb3cadc62c5798b2b6d2864300690013c9dc1069c9fde94bfa85df3921c4b0fe787c48dbfe884bfdbed8417a4557ff5fb74791fa939a04dab35bd0f6084fe1424f5ac4b71de8089f6b901cc73d806a67fb1bf48a1077a8d335315f878cdcc8400238b18a3706131f4a9b2659c23e944be432f0a350050eb28e5d0ff06bc141e3da3e6d537ada072cd9272797f1d193c6deab6aaafa70a364ea8eb1b067d0f786f203247c2486fc1e6bba1cd722006bdd986a2d2ef3e50fca519ac9149a2041524c7ac81ab1838a5157925bc8f32ae6071e9ea85da35cc93d501704fcd70c0d9f1b1db2fbc85821a2223a305c526cefebad51654f7f5d38b6d8af895ce407d8cab000deccfaa79cace6ba7b27ab4f5a4bdec2f2d0f0a34391bfa411f65dd600a83dd89de9282b08f47c6811d6dbf8abe830fe87530f856f9ac1fff78fa21075340020553b5627161f74ec3bf08e7861cc9bbaed1b0a86828eebb3c2da8894b8522756b22db11bf9df08201a306e304f25f8da834f8ee0e8e9996f8ff3349a266ef7126ce4e90b406be381c96ca85b72dcb655cf56f44bdc17fb21d7659d61aec079bbc84f2c776259f90a57fa44550d74f9a8231fcd1d71a3fa83006147ef67ee03df573ca7e890b1444600d07facddb7cde8e02d156814dfb2d26137da038af361bcf032994cb769316fd1857d32f3845eadd4312765c0946aebb6aa19c0a401115f3698b5b60add306ff7b8e8cc39104ba44dd0f6499ce80676d001d0ece3291647d7b3ba729070786f85c4ad995e0cbc7ab78e59c35a2a6c8c413dbeca691ab32b869e8c9f39dc117757b895048780feedb4602a4406c7a496ae4aef20ad0c79184941adc842edb105034ad103cc8bc21e130d80a5ba8c811e3190404aeb686efd481bded998af801333415da7ce6a263b2c38e3c2d14eb265004a8fb82a50e5ac3bbe3618f947f38ebe6d3cd3bd42586c5f251c5360cf70fb3efb042e9992ba1bd02e588584d474129b7ede1988cf18b4fdb733c1facbc3010dc2a1d0f1fb7eadc68e18d96e7b7e1ea798dda188fefd51a51acf78c24b8cb04395d67e685285e34921549cf0982b164d542bb1355176a14ce950e9364b83961a656b10762c5c897f63e46dfc59cf85dda6bd921b577a1dbb966db42909001cfae9b18b81e5edf1d8f9e4d4f09f92dff9e41c77f3c7b2799b583f96004d46a756247b0bc03010915ff67e657802566db35ce478cbf359a72bf471dd557eb025fd290ff51128262bdc2eab380e84baaf211b84cf19184afa8c013954297f49f0f3fa6ebf876ec5d05b6d2ebd54563634f10930e1336af6d76117cfff7ad58f0f70d7160741bb842e4c49ea7dc9dda64b5f9b61e6f8a0b86741e144fa5c62179edbbd44ce0a7ecff2e050240c187a0a22747e1113105c4718caa2caf30ff8df6b75d6caab6a504fa3eca6223b693c2f31fd9ab3e175793d89138cdfa43eff7b43dc7b1a347faf9bb1d4f589ee6ba3ebb7c2d88adb60bbe5fef86c234ddc736462895d2cd2251ce14260f31397fa69fafc2b616df6fa94ea0ab63c0323bb4cb20e0490fc5a9f47b178b49955aa9c5877a768eaca864cfdc438f0d41ad562cc39f563a9edff8bb54ff250365938a66f2f1a661e207ec405beeb567e5418e890e724f5eea35efff10c7791a8cdae37bc1200bb751510f3a8245350d50544ab9f23619ba04a6c021be9a812a54f1b85e947a54411b93d4916f93b780b92a7e7c28a25371f582034a2a6b089eff56bbedfa48d05e1471bd18e5ccbf61a5e6c1eaa8f0d1f5fabef6de858630763b29722a4710a07ef7d86d7d40912b6ccb61bb03c940e7b00a92ec3a0671598d0a47b5935e040e3de13ff937771435aef207d4fb11634cbac40e537bbba2110129490cd16077ffbd8fab4ad23a1d0ad382de808a5b0a6240f76c12c0a8c33a09d571ecb5b3ebd743bfbe85c514435aeee7142026213334e615eb0b4b2e5e967c55126e01eb71d15986dbb215a0e9b1669c5a9c439edb64416bb8e4f09835c4606bcf67032a367c75d3160eca6874d4bd237fc8034182a88271a941ce14f095d7b9535bd6f34e09659096923001d2517ecdc073a63f426a0ed52dc8d14e5af9682b2768b25c7535f854e6c68f6cbfca70bc8a60446dfe37cea5c8f697e51f5569723f4493857ffc12c97a39031f07e33a717466a40331ca27f5f9ca282c7dabc4b3e76f4c9832834851088960ebe2d34e000bdfab4f38fe033f5faf5f8e0f7beb1dc88d54c7fa321008df0ca24559753fd8f98dd795c7f2fe4096eba8d06d8042a346540efdb29cc5e141f4ce30ede1db83db66c3ab5e8625932f2085c31882fba35b710100bfe059daf0c4302eac8a2dffaa9c3bf860ff87d72054b3911c1391be967566ac780c5925d0b2f9c025c54a43a49d0ed55b60dd61201b658f451bd61e8e8bd6ae3981a8b586ae8d9aca504d8d04bca469270cf0aecbd7125df17ac971b078832406e9b0b84e95b8c18dd3f44195d378345004e40f637b22f7616bc926cf31118c0589b5095866ca2e4b88d1f29f9abd6b64fcd5c9bbb7a81ee69a7d672f93f70bde6b98aeabd9a675e481cab40f7da4c0f2c23990753b5a6aefc964013200ac6b83b9580b76557776d77a7b7c9b456003d3bd4fed645a5e8487153d1593601f365ee189302b5ec37f8b76eca79238b475fc60be95d9bff28642413a8faf6e0f9d6161dfac43d5e86088c501b7a9a5b598cf83569134cc41a4d179a1b081e8f9d31e5cf361c1aba2d6817c6fe494d89bfcfba302a1bac039e3fe259f6800b2f169ccbb81f2f4e5392808fead38e2cba861beeebdc0164fe42908336e2bb4f7ed05b90946371370a4b4838e14ad54233d9873ac9ba4a1f05d065d16800d274ca2b6568ae96dc142410139059bff1b935d0d91efa2e8d45ff625e37cb4f4630ee5415bc02544a4b6591c76b6d37ab9d61f95a515c447fa1aafda953ceb6cf6eb38695da2f3fc2ac3c2355e15ac4851de7509f62e434e281c96bd5110e904a0553f44d06111dd4122aac5dfa0f93c6e3295e7681596df7b0e68871a73e23c7c7d7987f60c056a0c34966df7cc89911deb868d7999233d249c8cd861cd2dc71033c72f39755b33abd51f9556b0080d04664a67f90b2ed2200e65f1c34d6357b3f7a7973d1e256991072a33c88e2020db3f3ab2d094999449ef0cfb7f340e6b8b820256290557dc6bfe2571c3f6aca8a734d99c215bc140b94f2ed756bcd6290b76f0d8641937af2f767b557f4c53b5b4460f99f02c970f5c6742aab8ed822b1b88482f610ee026b430af8149b7f737f4440f23ca40907a4d50c287d8c3518e51a7d5ace311031d63d87b407f4d349d5fb24e322f6101e9cbf6299c7420bc24c848d643d71bdeecc2fce8f295931fa763fcaf4add015fec8ed64e28eff6ebf0e7e802f02094637bd478341abe3b270e2810c371a8496736f32afa22ec92b343095f476a2be46dfc635d1466e32e32820eb0389b4f7957ce5bd7f693ff3454c89e56f069c2ec52e7d91c19569bc85a28fd6825fa8958e2958369ca577929b255b8fedf9ae38e49fc87cf3ef51ec02ed6e7b754298d74cb6c2bb073b91a6188723ac82392d308555545ec8362ebbce5aa299f4fbbad1665d9acc7f5bd90bd7789e767ac0807c3ae6733e6a2f501e684eeff05122ad30aca109b48c957d49efe446cf0f928b4fd95db0f6f159e87915c4d49b68175299f59e4b2fe00f4650a4a58b59716c1c384b43d03202361decca694e7576efaf3b3112cabd0eb0382e69da2d1ae4a1915032ba55fbf8d7ca1e7c70c2de41b39546458759acd0ffda02777e0b12378a68640d7837a260a2e14c5df8b441204475b727426ca6eefeebe76f88dfb78c9375d0dff18aeadcdc1c1f2c9d2a92bf2c578baf06bb2d45185658d0c35bcc553e66d7fdb3699e16036001a60e5c028b745300d82ee8dcf3b2133f5842659556d8ba2f53550f061e6d2484df39e44fb52e0ae77a905ef540b112c069d31fd56ab84bf8f4cc7e5ae94da604f22b311bab2ec84b967ce1d04d06415106171b1aaf9af78f78b1effb3d50157770af3c20e78b3bb1c4293dd10fab50d4ae141b239f8756dd14567add861c9f0cb1dd025e5f85329679d4a8910bb344b9420dbbec767e83dcf811c2c877c2dc8dc8f895c29cd5e46e1e72cd173e818d548cc7841f7296176f9f67c346448424e052fd13b628c2a500619e014781226c22eaccc9bdaf0eb989f911c5075d7b4ba7a5335842ebd25a359bff70cc038395b15a440a917f3001ed70e9b73c071cbfb26b983204d491d8f407297dcf74968186fca373231109b1d10aecf103f2126fb5d6d52f4217425414d90d575c3a21f203b253491bb9acaff4e042d04daed7fb83d9a141fc22ecc83d746ccce43654ea786a09bd003eb483804ecf2087dba82ea2c78e9a958d66bea5426ff54188d6dd7c7390b355d5c2882b8d0c4346b25d75fa9bc6640e8eb8ad0bac7fd2575d4591a4ff86e2da2fbd582c1facfd66269515a96bb7e5e159c4654ede458b45e6f4b71deb021578589e843787fa631e795c47bdc504c926587abb6ef5ef6b49dace951b5b1bce67ff13ea388cbbd370d128dacf8a0ecf04292a8bebbfe8c9ce35f96bad61efd8835e880f56a1d5cc91e55b69cbf33d01a71b68acde00e9566773ee983ac4d51a9c3d487bf4e783e7cb846933067227d3028da727c28b84a1788fb1cbc93eb54296e0ed66d88e7bd9c395ec227e7c2d4734d5c2c832f38ffd5da9c00bf5aacde64a3d6946f5ebfb91b8fdb8d96c2d97029e4085e96f1c2fc2b91c0da464b19433f7fb5a19599a06e6746c4318c1bf33ff9a321bb0f6bc46b2adf395844da42eebb7b4d84e9140d8a38c876dc0180befb85fec8472836acea107aebdd999cf9ca50fbfd4b372aea55afd62998a39faa4d17ffea68ee7b556cc6d2155f49598ed9c66b4dce8497265c174b187113b8a57bfe69b8b3e361a0efd77a148aecc17d7500c2507370884ac52f1270bd9b706630c15fb3153375c0ded1f4e1d328619446dd83d18b07ba650baae9ec0b070b80fa027f38c4bbf6a5a4135a98e825fe649bca0dba033380d95adda43740af825316d0c0211212809f7fe764e3ec8b5d4f4499bc317e78a4ed30ad693c1b582589d5cfb255f8b3e55f8b626719dc95b05c067669d7a61dbb1669d226bdbe54d2ecd7c53354e647fc0506f35d6fe54608a34b18e8c5f3f45204ed13606dab54fe14b51f8c91ab6f210ef3aa2f59c38467d21d0071d6bc4f0c1a124113f7d165ea84af6263fa06e0d967cb662ad3e253643a618e4bda60b8fe64fe84778600c0e134d6c4ec388a88cc957fc31d09b2048732d8d22539655030311a2c0886d2b58b7a88cc2f1b58316d7dad262fbef08965a65860e240edb2c2ea4dfc2b04edc0eb1ece2934d7da339e19fe5a7045bd8740b5db663d1a268433b653823be6bb1b42e859c4e60256df166b142497b672ca323b9fb3e554294e27eb06324ae19f2039fbade2c7e696b8482881ec60ee603f548815bde6c684e47fd1b4796499fd6f8f99f6685a07f3bf60e88f69b3b3919ab1667d24c5cd35856a9f02756c576166914c970ab55b7196b09b152110f3d19c32a2d88702d5c0ffe101807d6774df7f4c66446fb9fb07a26f920d3652cfd5ddd91e9fc98a8a8ce5f3e9fad666fa3977f35656f225afb7b151123c71f0adafbea995a4a63b7dd6c30830aaaecf600baa3c475257fbf958b1c17bc0433a2ad4c7d668b5cb6c29fa80acb868970e096ed28d4a22c7d8bf699298cce6bd124c62bccb2b05f217cea3bd2bf53c48ef57389ccb4ae2d695dddb8a97693da46e413c9dfd3dbed056ab9f02de7490b8a88b018fec63dc4a9c0b055bd11902ba01830cbcd74f19c81e7c0cd65014803d877ec2cfcc7eccc14b5ed05f28f8d49cff8982c5e32452f4375db9fdcac350014eff13f36f4218c0fa762ae2969a144c57f62fd9c9a2b134636ffb695fc4fbfc7d3a5576f954f6fc4c149ca90b7359ed221a57f22bc00581188e6179194096f0b7372a5bfd5af345df8d3cee520c492c93779a5ba09299064e2d63a6b0c9a9cafdf09271e08212a706aed77e3c29ca2d739ef498e512d4a243fecba63da01650f634d8e4dbe6acd01d60562451d20543a0a3d54cf95caa9d25bfb6bf1c9a0789b0e08a278281ca3ca980ec0b9c87ad2da57d5aa48b677c257e042c0562f26872268add95f2d7cac36b42bc9b013ebe42a47e6a504c639c70dbe7a1bd8caa46ffd709c0c0aa394a77a83458f5f6d534147411cf7298a1088fa46265d192d5b748bad508ae592f8e007c36a609414e78d7d629a41f92fbad998fe0875d84ac5d98a4da7a471752e0dcb42866cc17c96d432407477cf009a746cd74f8755ab93296fa56c502270f171ff3d97b52273f8c25178303e3e82414e942fa0bd95a3adbdcd2171b551bfe8cfefb984b260bf8f50b20e264f63e41876f7da42ed1ead3fcb87e61f8e05618b7365cb7daf01f727be2a5b0371ea92e548e06784acbf7f84dda19d55491f8a2f50b5fe3596aed68c0240a5258ecadc945eedc8b2417e1c4c04167425699d8f1f3830cb06a367b7a0b6f2d33db3a4ae2785918a86f1d2f831bac6b38099ea6b17e4e4de512e7982acfd846336b77fc679a039a60260c640108beeab79fd8e5d3e4ec5d479125047e1ab14913a999d1d8213be76b5a8cb38849088b9d454d57e1d160b6569480fcb419997fbad7afab8ef0ed4076a90d5ca4f959dc3601cb1c453a2a4c2f0bacfe5c7122f8bb90b0e1008039030c5433194cf1890cd6f35177a25f43fbcdaafdc6abccee3ef784fd2cf11970d632dfea9f22ea02225258c615e9fd6bb2aa244cac6828f7f57189b2730db7ea6bda3549e200e166e35a89e45ac0bb1e32658803cb539d83dd1fe4444c2378e24182e09a31891dbfac60a3a8ed4ba2bcc1822a649d978f8de73b2de138f906430e91ec3bd8117c4bd8fd5eef4398d2993272853c2f62792cf2705cdfbbe8b604d73f9e0c3949090e20e618662938e70aa09158c1902828455e61012d65040e403ad2b49acde2991213291e31d832ce78acc2f4db439476804babc2c6b1b71e754416a755b8583f0641a59f91888e194ada1b5bccc508531766386a7edf9ba2859119f148943ea0c269f990d0b34672a36046f6ce3b9d1f51050affec7bb592a14ff4c4dfcdb13d78fba89afbfbb9a3605a711aa3961dd5c21531d58f79520cd1acf9aa6c7202913dee326ab06dcb4da5c046e768d9b6b086ef62159411015aa993896200f7eac8c928dcace4e5bda63cdb927995e54c06b6789c77cbf324822b4ceb76a1637064f13dcad59d153a091c9020c21814d7495b5ddcabca85becf8718e4e8f78c149481a07998dbb404d588540d23f0c9d33417bbba9e3b573c666b0ff2901ed9f4ca4d0e8bd99da4db893ce76c313f2f09676d484cabe9cad17e2bb687d7741447743996bd5d4d2391edc6e36266cbf1d2c83d8575f25c11f359fa57cf500740fe5fad473bb64f87b25c96ab32b38deba041fc7792c48d38a1ed0393dee02beec4330db102e0937f03f4ec86d8761ed409febe7efa6bd89cc67cb7074e49e47314d33ecc5b3d32087013cf8b05351124625395e8507787c8f310664265f339821c0cdd51c9d6c1f200b515921ec835e71f871449bb56953e385eab804da8b1e20a1657c3970dcce9879f3f782fabe52221996c79975ce4c125c53745090429b41d7f9af848ba49613ff1af92ebc99fb5ec75463e647929faa0bd579c6053ce91124007f0b65362ebe3db4425b5deda6d0e4e96609bb679ea89470b7a2214b3a69a483de8463592a10c5605a51f6ae3c99257dc1fc7119311088ccb367307f69b7a071b672830b3428ca642c23f6665201ee6d027af32b718a2e3706d235e0fb5c52df07491660b0264686aefc01ee31f466be598a4ec28dfd65effaff8c0f985ca4fdb4752961d8b011acea3ecc01092c1756690dc0141526979bbaebb1291212a5c4195f4c6cca96ae0f3d57b568d402df798a0607db3cb3e933c630e0686252130381354d17584132a00bf17217bc05c1fb58809e303d67b7f5eec216e7d39ab8bf5704e3b2a7aaa34a2f75cb85b1454a8d011d637952e7f367792c3d0db3d5b02a035efc1d21c0710d156c05fd7dae84db1d1c13be6d64ef0d22a5949ea1f4e19e76033a39eb0cfb7c7133bb9a664cd653fff4a39bd6f80546301b64473962b491d1880471387bf4e8da4bad13810203ded061b7f9d0734fe9b6a3fd06e0291f3e30b0e4cfe4ce53e7458bc8272662ca8593012632cb061af392887e2840a58380e0a2222c82c6e1bbb68f09dcd6c977e0ae41b2a11105fa3f0318f0cb4243060440cd507c6a2342ebeb98c9770d5c5a3e166bdcd8f2c2f0ebc26dafd110a62c485bc35204c688c5bb994115da0d4144010dbbca6ec29b43c1835861b0691d80af00d5da50def1033713f993d936b011be941e9e1e460418c9e542ab816e28bc56d8f957308a4ad32d2e2b3fb4678074c818b7a3573c4907109689774dfce0bac475d993e0175007a362c7c3d6a629d8e46e8047ec6d1d42abd14cc8219588bebe7fd9751416e4461af1e46eec76a3548faa511d3a84fe489b42224ec1fda22396c825668d17308243ef271100e070c143d2fa8dd23e9c6851382848f693c1d85f9076dac27b4420705dc4d438f68f10512e50b50b137df0ee4e60e46c0e053af5bf2338e6c84f1550d6f8fcb97b21e0f825c95895be191eb63f4a5f0bb99bcd72e4a2a5f172842930c6b37c492a8b09c976988cf8f6b760be1796bedabd76b84a5e0c4c8d076efa3a5d7801fc91fca488fd28c513cabd49eb9cffeb3d9fde666e5a46dfb0f0c031690a315c76cfcc6df9810a34f1faa8bb6ca48046848665c3695b067e352db820f6eb31dbbd76bd886e333eb06446121bd0a5a719156b89e53208a366f7d121d2439e859918d03a05423a74fcb99e7de71cafac20255c40c0174a548cdac9cf2c2d8014cb2841e3ec416da4cc6a8e5259cfe9a4513f58bbdbf66c6dffd7dfd846cb241f23271f2d8b89f28b9e9f35025f65ce0ee1b2d0504b6e901c46cc96caa4f8866b3117e29557f2812db180fa81d712927e225c34413bd3d63cc060afea243e6fea74eec04a5d8a8dbcb3dae7420a66ed7d2338eeef988f9169f7f2d60650aa5a880e3af9858b46b962bfb391319f1a6cffcfb5f2ff6395d47fb88c474fbe3c106d29d60d80696237f4a1747f0b8bebec0cae2a300a0b8ab43c9aa429767f890ef875f709e68a399e20ab6f7a281834f4cd28d08a6a3d1d6b8b1c9ef42a709e71c1d56654b5ebec631174a36927efaff20ed33a38b9e2a32aae9fd500952a41dbf69259725375f836ab5cd6840722ed29182d8cf120c6c88fb775a01885352ac9e2b21f9900c9d503b887c829282c310f962e28b8d280cef8a231789deea63a46543b4f93ef77116c0a31e744c54feec44286c19247cbdcc357fc8556357363ed49175cfa6346edb708316e27731d8d8530a575184b61c227d252e626abcb5eef3427683a38c90773a59b23787efc5407faad830e3ba3c53ba1a37695db79b7cfc3ba7af03d270f029a40d06883cb02b8ce55f3c4849404fe657f9bd87447c6d3c328f54880b50a17d52231068f0e35c6b3972690c70ab9cc801b64841b69624145ee3296f88bfb17576a7dd11e18bae262eabe447ddb6dce64611322e0476b4b927fc2ee918988e272a7f79e04977a02dca88c8f4d63a352d26e1b4f079442daa8f3d4cac5e74b4bbbfa51c76e7a6149f12bad7cebd571942c9446da54b54ddfde0ffde658f69f9f0e92769ed3e3e2ac4de72f2ab99fd9cb3bff770ad080596792169d6bc02335a28d63da6e35e284f3da80e9ac191d254ddfd14ab6d5b6bc1b8588800ca6bd34f7487f98540d44d834202670600be12f20ef47366c2fc79ff58ac3e3245781290e28266fa89692409be7a49359ed625cfdac636ce479db140a33b73d9be406e36485a7501c80b6ae490ab705dfcb7d967c8b30cc54099086371733333df1561fbd2472d5725dbe5fddce4d2ae8250dcb13ca7ecc363fed836d9c059e02a660a637afdd27e483f1d67d221fb51e1de8a883aea89850e5c5f6a15ff9e843d75116216a15d84a0810a41e605c82978707b020f124797ed83ef730f2e73f34635213e3dba80050607dadefe28bac357ad1fdc19047ddddae37db25175e7d2b557c671f71f967423fbb5342275ccf9271e58c16bffc3646793592ebe636a8a90af4703d63c85b21079c24ed6c111320855cfa1ae44565dfca55237f91cc23ca075ad79287872e86a38f80b221fc844bcca5a2a4346b131f92c81f07cbf74da3cb22505f6f0ebe2b29405c3ca6e1a13990eabba3c1dc1629adc8ea1882c85dad2f0c5ca02af74611191d607187a382d0150b0f03ff2d2caab0ebfb9b398cc397f0f2f497aea0138ad7f8ec0efa16ddac32f0814d2966a6c59944a38f449228c9bcb10faafad6fca93c9061abf5a7a18ea46273595f5ef2b6a5a40d0737a6dcdf1513ed42b0c4e2afb74b0cbda48d5447610bd3557f1e3acb0ff145f34a4b59c65f5dd4486ea2684668211554afda21027a21f953787dbd50427b4f987f2a49f66ffada967f8a31b9a82ae49f43189e49526e764be238217ebccfddadceafc9e131813b61ef24f93699fc861f1ed4edea690880626fc6427909cc73f505603cfc584772d6dcf0e41ebef9c83fbe4fd30c5e6580373da7ff487acbff285136918bc63421871b076e53fde44a45927cf6d04c436c1b75a13f737d7882b2f650b0d1bb8e21b4e6942060b143af4074cca79eebfb7711e62c82c445a69c4aa60874b1672e754bced28a7709fe94b409a0bdf8a22618e0e4e9664d5c20025000c303d434af4f0a4380fdeb454dd4e01841df91bb8b7b6a63ede9372d1addcfe2ae36da78af3dd4d19999e37b81f202dde2864f50a71af56853e598eac3d8ab36f833cf341ef78c5fc94c15d84b9241467904ce1a2715acd2dc24eaee3ba0b6f557367a4af0a84ecc348c04c75213f877a92911e94f0e0bd9b0ea55cf3645358a8c2c43701550f7486075a39876d752c4de254aa44e679781ef7ffd9a450840fa4e79f9dfa261cddc1efee81605579e06574100465b1c6da6943132cfdccae3118a84a58cffdaddfb79b5b9a31a8206694475e9d1ba16446f6d11916d97fe9ba1193ce4de9772808028f763ad38e99440173f619c66a00fa9bffd1e234a1a55c3367ac9e70d64e4ee7e46bad986932d6e6b3bf14395b9ab1f7f0beadfcd8031049d410f6de401e728ad95510f1bb82b9b45bbd128ade8eab9433806d2b55b5b67a0de864177c16afdb46a465141cab7c6b79b771116acbbe5496422d7950b99716de2b5c090115bdf861923671ca1b5f9ea7a1f5f089980b7c9ee8b432e261c5b947d7f49cae259bce22f71a5ec17745329c22614274a8b33be85611cf3ec2f6e9da5ee5da5a0455fd76eb1635fa1d16116a371be699304519529cc9d0a946088353a8362ad4db274ebdae187a3ad787716ec901b7237b653518f84a95cf2ef4b25ad72da8c03dab114ded3ad59a4b04a7c1fc9225e40c93fe301961235ed665a0a90324d86e7577634a092e2dc1c8450acb4228f3c22f42f0bda2f9ce385c06fd3228b96de7a5ab147a5dc0c363260c498c1af97fd05c47d32cd40f0ba2d710fab0005ab4115ece6e492ecfe1dbe8afd319ac1a381276053b1b49878168a7c29bec5dbe1f408988bbf5ca9d034aae1a93956ed28dbe02c975f4b3320a9f394891aac6ef4926a1d8a8b93291af15603edeb7b1466675bdd09706f4251337d2862efe678d85172289222b0a3af065dd80d563f7d9367c6b3c84fd29cc12211e860f72b04ecd41d13aa1385bc285e251414ee23f4efdeb6f9e01bdd3c31a51d3c3f7fe67c09cd0aff84a224ddcfb3bf72504d0048d56aa7d6cbc5a4a55564a1000ddd1981a69504fd37aba603238f2ed11b0a6fb30d94d747ca3fe56ce3d75fecac427c14875d74c40d7f847303539ad366da13b23ee4717fbba6391386e83592a67c69054755abe44523fc021d20f87612d59601163efc819244fbb6190853afd8d822c008f597c919d56998864bcb7524add85233ee6372d3f47adedee064cbaab70873ecc38645e3bf49a01e3a4c5ac87666a7b32661e534a81359bc9d1a5f7cc2b8bc7b07bee2cb4db042d425bc5c91bb59060a0a4fae3965220a105d1d1c17e12b552c5bdad3f1905ea7bb836df8c7e6f699fb52788c4919f07aff601987c87382c8e579e51b588a030e4cdb6b9ea8220d6eebec604f90035f389bfb4757eefa81a8785f02e1a825e23be282d648d1228c29c78aa89ef807df333bc2670e01a8d2b33bfbad2043e3092657a54a361d6140583a29a00c083f45a3763b26a522c16e2c2b2eac1c2bd442813aafba9f03cb9c19bb185dc575ab530736ff22ee261d6a32d2cbe4721f7368d9fdf16eabc8895f43177aed52617e5e46c5c5ed6d64efbb5cd5643c8efd6c161dc515656002533f9ac2f695ce3035e33648e5093632659d1736f32a834e0a7123baacb9136477a293dad33d17c74e78e2a2e2728a5f471608cf41a1cb608f395052c57ec6c14cc625027ebaea2f197c55d5233ceceebc0de4d1d2d278ecbec1c4e6961f342e91f45d27c4409c4b76eccadcf436e85ba647a7ff9bb2ff7f92f423ad37024343fa69e250a4e8476ba503276c47a00d401b26fc2c17008c97cb21e68e2914355f3feac451fb86dba311193b8beb49cebd2e33000097645a381d750c759d90bd34d27248e626d1cdf0aa420251c32ea96554d52d9e0755a8e54d02c2a964f9b05264ebd092da31f751f4aeb55a618fe3dd19d34fe345a8024f0a5cb7218b707852e7855ceacc0495f228a6a7910fde573c012b4c7e96e5f25ad6157063c9d497f3d6fbed66d45627878a2e1e73ace3e5baf952f9e304dce596ec15b7852f12b6c5a8811f8dd860382a725a8f528e53307c7b65b573fe0dab466caf34c30d4277f99115d08f1667fe156d57d34c0036e171c033bec4db45c92120f4316535dc6319e0f318ed987ec834ec5cbd40a784eedeb66ae686a5097d81267d18a8853e1aa1d360f05f5a51a559243d1762d2667c856316f9338290babe288d4c86dddcdc40a1dfd685268eafad44a28c5fa29186a1dbfc9633d8cbc3c8b4917e6da38e7374f3b893e1ca63491c76903701878407f1246086f2a87396758fa67bf49848feafef2492a4904c79b19b7a9e75eecd29dbe0ea3d58b1ae3a20d77a7ef679a455ad0ece77e46a9884e2bf63a8d975123f8fcde8185ef00388b03831dc157667d2ae87ae5503475a37736b539068add08e01c2a0d616a7d1488f9be7ea9e0040c5bae089af1ca4db7dcc91e311fbf1a71c5d558c3714ab73ff03bf1213b2e8689b506894eaa5d90f0c3bc4c384cfa1d3844db9c5d5192c477ac4f67e4f2af1851a279a0fb7012982a53cde33ac828e8406a3aa0d5aea3aa0eabdc7e34336ff6d839317e3b109449f37b19965d446f448f6642312df875996e1a78e60fa9b9ab0201f583074258d851222df87ff2aac38d483a9b963ebad62d31072d52b9d729a3700ad05cc0f3f0c1f9c0d32dc95a362cb5230f5f93f0703311425f47e893fc36061a3ceb3bad4939a13777f54f15f4eb186fd7fe22acd44c97ce0ad66bbd0c91fe36827cb1abb1761940f2c063b8042d6a4ddc7169efba9a3774149c03e48317b36a2f0333a5ac97b73879db81129f8598fc58d3e05059c029314da2ddbc9ec17ccff0f9473363e4615c644f244d283cee816613907ad9eacfd8e77bebbc8da093a12bb99c5372a11c10adcd89f959579bb456d461fe13c7141c5aa8efda8eee64c4cfe570cb6796c21f19fd0238cfaa2d01db005a8bd21fd0cbb354517c58770c9f746640490b33d85dcd50471f1c05bde2b263533f470ec86e011bb212c3918eb1e1b69c7093d35313394ca492b1f867532efc7779709bec8ee9b902c4bff2de1aa1b80c9856a8e84ae7d5f0b6dcf0ca187eff38b9f5191a01eeb74b036985be235971b60e79cd8fb977e99f62aac738119b2b6867827687be456fb92aeb4e3e7636a01711ef2c551c1865c8ca71f806580650a5e843a0f16ebec3221f1d80977f4f26e7fe9fca7193443dcfa7cb418efba76ba79070490cac13de28ca4a83e19563eb10474c8cf9aa2e397b67c27fae650659ea7a8062e22fdcf8d2aed2cc41182a08d4aa29431d5c1197c0af04bbea25664b707998e23695927d8d1a6a01bc0be70408a9b412fde30ac829df455c744bf9456ea1b09eab565544c76d7d87442dac027f730d7285efc0895bb492a302c46b6e57e751998155c05054a977db19067911e84f15a0769b93c565bd8ba19ef9071fe887afcab2edd91693d2bf61d6490445179f41149d24479fc6abb187bb51bfd52a290aeb2312921a6e05d354611842c849134682b3dd40cc664c0518fcb73f69847ff715f02a18442e5a060debf8f49985500a0e27709b92cca18dac92680f641f2cd9e08ba18805a1b179526100e366af7aac2d13d79b1e4cbebf0bb995211c10dd0896160cd6b7d794afb5ffed20c302f94080a5631b96b83a7aa79e151a9289c58caaf67f87d2c1413b85a7201c40b7395126f51ecc3dfb729c2e5814c360703747677c0a157246fe036add8e47e3cbac9c67f733bf44559816e4e32a9620c966432bda712248cde8035cce280b05208371087b4a1115214c0a5c054cd0982bc1717097a0a252b71c1dcd7090f9b29fbab609b3a7f68979e933b258f4109e1fe3fccf33d15adcc01c2846196804ff7ee26fc1641b37829364ee0b9fbd82084b2ded1c51570c03d0500b272517c48159e6d8372a12ff751d62278dc8bf0413585ae3c6c8fb757d5ea0542e464fc6b4a49e29ad6a876b970833449b830159079d2f7e4ff6046ea6a11433a47dd5f5c6a75d36d32971a2700f8630a3a55ba75af655684c46a26b296b5ab2334ccd55943ca4821819569f6dc2427dd7736e731136b5b68b183811bba1c0d3ac40f166a2136c31fe6d114466dc5f97142fd9f3478f5b75f2d15a95c4927739926b5d92e894863dbb05c785f11d1ef537d93c8bb1594ccb87f4206e643a2b34eac863669132ed1ca441fbb4db2a8c4af429b16f49e529fbbe106a8ccee3a5c961d0b558083f2b3f79992ded7a0fa57fd6fc74471865410f7a5f12798d1227132da7665b79adc0d53fc066d5dbcdbead46f65744448d445fcf35d5bb026287e594ae652cd2ced1cb0643b1e0455fbbf1b2258bb37cf6d02853cd75746b5925f34b8d15d648c4e1a35596f2312adc87e9d7ce1bd1f5197e56304a178af03155824521223654fcd6865ec858c4c57ec1238bba3c7ca6022c2fd1acfa764cfb8023a394122b155fb7612dc21e52c4b711ae324b3de7807fb13b930391364c814b4299675afc9c82d08b55b298cea81e9049bb96b9f8c98e5d7231f596271edef391292b73f343bf22af0190a0bdfb2ea61e8940aa693ffdbef5ce53e5b847304a673079ef924adb75523cf976f70474a7636261d2b290dc25f401d811b2b73af5bfac89f267548b8f9f2be1786ab0085b3f92418e53d2946e22e08f2ac1e56eba9c4fbde00bf46d96611266b0a801c565eb7ff4374f188dbec438bbcbdeadbdcd7ddd0acbb84d565e2b520fdf4b7835bbd4f60ea6ab4176a9063cf80822dd481613f32bca365d006965f3c4a5897e3c18b8d274aced162ffaa82ffcf0221ee0e0d49481f0e671df9ca1a4a0083d889e615fb68d2ba67fc885f1d30afed5f3024115c8b9682a836086782d288ae72c75e42da2b6dc4ac0d8f094186f6e116da9c74f17fa8fc8ad5fca141c4beec2bfa31bfce65033139d3ed0dfb5416b07a39735d76839dadf0f9a3a6a90ac5e70bd685017c1def681b882eeab8732a71e7911e718814f1aed70b111e55a5d2b2095e86266e6fe5fc3a884b73da2fa1e50fc34bb0cfc7944086432a6c0b4f494a65be44ad9c41c55907aab5930e7d5db87e17b8bddcd1eadd76a3ab55658607105a766ee5cabb7c2c192eca9568933e2ea9db0b943ccd9e4d738c739bcef2117b64eab90b8706f2c9377d397d4e53aad1a63f78b741c754f7ce623da5f6910cc32ea37ced103315a7684af3af9b3947231573cfe607d57a895c9459b668b68f80ac40897ac683d8572fcd315849dbfa1f5feaa6c6f7b9dae6f4dd1843613c0548da34f63369b6acf2422597e0ff81a6abf016ea573afaa72402b652551853473fa0cb1e2aa959a1073ffa5e9b9d32626f3adff22023191ac2e6a674df2dc7d84aef6e740357a3941a7ab7d73b67380fe63ec7069c20e2f324ad71f0dfeaf5a46477ee12a1fe2cd638a2ccd5b81528a386f4ac2012644e2394892d1712afe02defc3406d706e0829f4ebc992fa95169caa2c0d5f9a07952e17df08bf869518f312759f402d312d81b2bbfcdbe6ad66fa08526c0d2ce6ccdd8a31e3e69b8d019c346ff9c70bb2f59a08c136bd9f6254055d10d1d85d10be75e2baaa4e1564c9b4f6e1bc57e326210fa36011acc8ff3364c7ae0c59fd07d0ae9d23cf161a3bf15fa14b379c5d789adea3212957aef43204383cd5dbc6d72f167697c651dbd629e7a8f673e6b2c52b46465d8c096a965e6d0ba873936506931c3f7362c3be11cf69d8191e7fdf4c89c751b38dc87b18676b81fef2e5472ee96eac49ee7ff21e219d2f85064a237a7408022dfe03f557471b74954b37835028c96ddfa93d05c9d98d8be5a65994b2fdb3991e091d8ff1f8cb54b9e19e7677fcb030e1d04ad47b5143461258767ee4a2023b500ae2acdac813f51ea9e55bc849a005bf7ba471b6f89ff6634c23b62f34329815e87cf5608a93487c5b252d043a268e4f59655d2e2a28fc57c79e1841db8c7956605edda0acbe8a3bb3a8893e0982541f45e17007c476abe1da728e86b6993cd60f1627eb06d12389bc7f1b5c895912bd825ea127c82a761328efe122da2e0a308e94d22411f81e7e051cffc66252090b548b7d074ed41197d46e841ef93f539083d259aaa77497e80156264354788c8f8dfdca18c87d2bc68c0fa37faac14f2ac78b647ff373de7a3b06e4e614e47085cc1e41f6faefa18ae7af9ce6dfeeb65dc67f51c7c0c5966bfed969a2890fd30f3204e37d4ecbcb6d970b64c60890f31b9ec1bcf3b9080c3e3033a361afac3aa3797deb6abc446b97e041ed63210c46b6c7dd8aa5262e8e10ee3dad693dca579a08292141dd0ec5268c2d1a171181cbc3122b2d9c68bd6690b0e9031f99e538ec5bb59d7f472097daf34ea25854ecd2f01ef555bef74461c66d40185ec11e7b6a8b6086421cc492b14205a89ac5e86203f53ad31fe8f2420d59aaa6df9fbfac85772688b965f2f68a78e777a8920a311ad560639e6aac9e7aaaff8756df7881a9bc5016b5f00411fb75d7ce676b0a64b5eda03cd240921e99fefcdcd4622f81cc4e2fab1e5703d41c1b21dcec393552728847ed34156053f4247ae8b98bdc8c6bed5bb37fc86297ba7db72b2cde1d65ea68f8de4fec5b3af5cf145166493c0e83962a1f85f526b6dccac5b9dd94113d80e18441b4059e2ef215f525549d4aaaa7be4e903c44818decf355c3a25241dfebb02eab94590c58a07dd8cda077389959917f3ca3b24db39751a5a5b85673613490eccd7ebc6ecc8519c15052d26b2dede7db2858b71554fb45b62fddadfab3e0dc5179946852a6caaa618875f160d463acc47197d971e3b2b2a7fdf595551d4d8635df0fd46d0bef48f1b87053d0a98865c1c1dab257cd41523660b59336eacc95cc77cf5adec7c62e4fc576effd447572f3a6aba1a31d0bbe99a41194c9d5d21666e8b8580be637eae1ebc3630b0b71816f4f7673e95c6244b4e39c20ca40599c8567d8c2373255ad884b30d6d58a12a542031b6e9bc8c7496d5a88f6177ac0a0b00633e9c12e17dff6253d15da8ff9552f65a5824b1d9e02b82603aad1cc25a22a0b99b28123618f18d76c36d9143df3afa10ac3b9b49a950ae6c31642d0993f930daa7a4d0d701755979e9631bb1199af71936104ce461acba82c3fee9e89cd32f3647b310358630ddc25fd2a3a9f07a53c76f7ba61213f2485e2a722a4db5881c143cf5bfb8796e1f7cbeaed7d082cc306f9f8b9a7a29f4a19701ad2bd49170a86c5dd4e4acd56ec8274d5e9464670097c2a903101c9eae51de723f5ff582bb4b867b6f98f9f78e7f3a8492275c66ef27ea29d66db7e511525f9e7024b330f768a59f013ad74c6653550cb73c00d53d9cacfe6025cd59c26700a45e3af3557445d2d5cc8895ec06227c4de6e21f8a156d75ebfbe85f3a584791b0ff899dc576761127a6fec504da2417ff0fcf26a2031dc4b7cfe67b9ce886024adefaf1d2919c9d7381ce57c450fe6b8c72fd8d3b1f8f380f830c66a69718595f51cc58e0c62b3db701b59807159d489c1f35c93b723f8e4f4922ec79b1fa0eb42193725b80fb24518c8433b925e4c9792a17daf7734a6b1cfd4571bcd46bfe9ca06ab2b1cb2e0766bd79c6905515c121cac99a2be1fdf5ba2b0c49f2148c0dde1f0f5c15fd76f6eb602775b90e2be86e442c003ecc1f002891fcdacb26e9c9e3b5c8ac8dc48020ec7004f70a2d57bf2386f75b11576a3663cbb0087ad243bd551df41c95fbc855c13e6cab806a53671291d1d2f51a1304746223bd2076b2cb31370c3c682156b1bac55d86168ad09827a595f49445ccf06d815dd866921fa1f402cce0c592e1c136d95a0d22219ab1ae46968983c8fcb6dbdc0018bce449d832cc10d9426d562a988e35bf49fb6dee3992cb019e3731e4b95cc354d373d4212f4d715b7e3f1167415a23806ccdad636492d854e23a6c5fcc0b4cc44135a2864ec21495e5a4c9e3d2d53a67ac2688d819662571ff09e9a8a09508cf00d07c32101a460d5cf66222cc8c82e0204b0f8bcf73b0e2100b92f366c7144d44db2db20ee0986e233005f9f5f63fbff997bf55d6cabad80f79fc3ceffe4fb87130aa7d9e21537e800db0efb64c224e841788d1af28249db620958d3e9fc42ce33f805875103205eb7c4b7fef315367538268d706f336221c2bc3234a5ac0a6858f7864f0d426226dea9fe0c9963d8107bd281577e7e81dafaeae6faf879aca211985e590172da2f2261876e211c3f484a94f5ca625006efd943e424b2bf8787982ceab38041346b75452ee28836484f8a4ff284c2bfd76be031b372175dc26fc1ceba371a7a5b2ffdf0efa4e3363db5b4a14b9e7f3bc113dfde175a269dc753b044b3029898b84489315eb2d9da0164063663821c76c1cfdd43ca9c6a59ba95f3dc5eca66701d302fa1077bcfe23c7d1588ea602922026bbc1a878a0f7519d92d8a2ab007082e05d42d57c7ad6dd5d3e499eb80a00eee766f16af1ba0f856f18c9984d334bc91083db2bbe7b8ee9f265358e9f25bb6bfa4f70e9198f2f7d0ba14e7d2b63a8859e7b4184ccb0fee23fae7d45ac386aaf5827e36b402d3dc9349ea4781280ef73fcd15d4a25f4c11ec95f7de9b3503e383c5fe313287c5561b48149c91bdf17e354b6a14afd7c1f335a11b3566de42c62e7b5f150c9791253b21717c96ba53b094da150be2b82a1c787fd5e02ff68ed586c6fe8d0c5319210c19e50153da23e6b514071fa8b8758a6bf05982ea47bbb625824cd9bfbe3ada37c7cba140852ed95a6d4901e6842c7710a1c05de7c9d9c2676647929888b2e72e8f06d2afb62724abf469e7de78298b3b2c8f77362b3af126ba3e1375773449fb80eb87139bdb598c45a57e14ae102078fc098f6a81ed456cbf247da63c0a40944cf63e17bc8e637808a6acfc98c9c05f47b3ffe15c626a7570ffe19fc9490ac0a63cbb4c84146d740c361e203b7c117f45983be9e002a593613801a59c044e284ea8460c659ae79015b43d4bed81c347e4682485d0b57c3b921075db1c155d260acee882bb0303efd17226ab5db065b85ee530b8363fc9bde54c891a6b545ad8f476b5fc674ac0fe340fa172745cea0817a8385c4fdd3dc5d86edc1bb190c18c017be8fbfede32d27947ebf0513dfd455e7d343640fbee56142dbfe50d7ba523973464b622a17b707f4f91b1dfce896880132e2646695fcb5426d0aa31e4ffdc898510ce8ebfcb8b9a31ffcf4b79e3400cd71f89a156d8b66dc015e75cee13a18c6238334cbdd789714ba25dc49e79bc1f79b3aa94c216e59249fe4b0578504d2e3f76f0fdb4ab8e596bd56fa482fa2c08e503d04a5f518dc4c29f1c360fa3ab9a8d7e8552f0f5930f1b84fdb694b546e72c15e3a895556c84b079caac79d966af35051a7daf98c313908b9cfb3e7b4a085b3841b95547aa60d15f278af3f327408a9fb2bbc722ccfcc279a2c0e0e5758c4ef84db51184b47ad32317ff6599e37c1c1bd52393ee8115942020bb14808e2bbe1c339de1dd1cedee4cc1bd3035b6ec62647c4df94656495bc03052bb6fd1bc843605af266a1050c3cadff816b0061a981f7aace1a656b80e3df331c94480fcde536f09a24e3369e4f2506498eb8c5cb9d479ff481f724c5e41235f093cdb31ca47dafb60327400515575746685c41df1201d87c8c1b156cefc3240e0d814d612f0ece201060c84a04e39cc0934aa3ff12aedf9e73cedb5ef56ca305dce52d6553fdb76181efa53b5b2c70896ec843689169798ca7ae84ef43fde48b5e4d0093f0e33ad510329e0443a628922b153db2dc7b90d956eb54b401416dab56483146e168a6fe2d1ebac11ba429d38c0dee6416113c4e60b0410be9c54318808f9643fc3864f04bb1b509c0597f50ef8635a172ca4fbc0e673944ed6e53a5c116eed578f34769ff062db3c1aed6a0a42ef83e63eee37f000633636db226282577243f026280b4e253af6dc5fc37c7096aee7a70cdbc75ffd5ae6ebc271f090431bca544ff95a9437b6ae479d7da7612d1b5528ee0fc065fd4488505ffca5fbe935c8f9d52a7f4c67aab364d8b31553156c264e7bc77ed2d68a8c512e527555dfadd6d80a6b20ef14ad7cc204dc6e58b329f86657bbf68268b38aaab0fe1d68766fd1e224dd74681bd6ab76a02768614cd7af6e0d38af8bb034b5e7b67747d25acc050dd042da9580776e690010c090a02ff43319d0c6e6355c5918c42c9741d4e52f444c36382d44686508d47123250b81ce4987514ca8d36af3304ff8c6e223edc751a2445cb7d2781eb4c8224b1ab1bde708e781b5b91dca4249b1d65b026c2f1ee70098ac6eb215a46e12f1b52048b8225930189c1f2b25c3cc0a1816737a430338bad5052054d84c9fc88d244f254c2e31735a099ef97663225696959028288ca30b02c19ea17adab63626150476bf0b0a963dba74359aa12b97d3572b9e59348fd485b948728b58c692b56f25293b6713b05d42a953e5c883dbe77230a2642476cd9656f306f7966977a5d7062de945e93ef71e4302be6bc33593fa12abd8750a962b4ae6fd75b63b3b0958f2f5d5f14757ade4eb98bb45f9dc1ea7257319dc5ddb58850d546c54acc9ad643944c0aa629b671336be13d6096fa9b8681f6da60620f9ed2c91bfb5c38fd8e0855892cad38884e22817fac16e647b77bd63e71e1ee8de158f9f1c053d03f738a708d9c223719c94205232647e95a06c442f6b2d3b820b9975e47bb7a1d3a2d06384555090ea04648d7485a25e2af0b4d856a5f4c62de415855be625e1eb96f12cdf3228b92abb8a8b5d1e7a8e6b5300ccb6f2cebffe59fca9bc5d9c69cbd3d9c93b4ac5546b9fa62d2f79a5478c2f5ba55a7fbc91cf66d4296245da8048d3f280b65e26c9c5258eb9c495cc078a85840087c55e0cf459fd3415b0c78700058422ec16990adc98282adf67f14cb7012b5e0dc15bbf6026b6c26682d7a5bb60ae94b444e2ba87ccb1ecbd73700ee2add279d01ddf5ba20bb851d80eb47b14c4a7f8177c707b8811f7be73eee4affc168b8c05d803daa0f9d0085c19ebd6df82f4ac031bc2f92c5275eb179edf88bbbb3724e167c2a8309a355fbecfb6f138f5ce9f83dc39897d689f3e0cb3a1abd0f3e2872aef3768e8a926a6ba05dea12068b4530fd59478fd230b1e2275499232852a6151e18ca324dfd48596e07fd0a9350f56c1ed03aafc3d4ac26e5c0cb24cd678ef8bca68ab2c9820329e9315570925fe32f1953565fc32f260de5b1acb05a05c4319beeedcc02abc6ebd53b37400fbd39d575f47a411849cce45cab9443992ce9f90106b257fe7a616c91617cdb633da5f66df342969953a2b5a48e9c66e62c733f08e0c30c1c59e5a029f5696862753887ccdf29d154d17a150967c09b97825fbc9a51ba9e1be595bc7b72ad4166e2be1376fbed2f1103104156a58ac28158eb7dcf8f56e23fa998937886033c5f48dba2ebf14053c7bac7c8f423df354922f701ce153d037b9ccbc26152780481013544711807051f67caf8d1efba5242b84bf3aaac1df163103f92b59c6afff6052350ccf28d3c14f8422cbd5072c811892d282229221e07d22f64ecc29c0d2f7b0ff0dd4fdafeddda4f5ab9a5615ea967458948b9db489ad69f2e9ecb2b52384f5f29f7dfbfb33321734f1ebb51c02d4b30a84d832b8fc237ba86a1291d9cb04ba8f197cb6ebc72bf74b00116a73d798ad01caa9eeba5e5afa446ed3b338209c299804456605e32b6e17ef7d45fc905da8c350476587bb911231c1b3d563af86cb61b19f5847261850752ee2f8971f69b5c41736a7ba90f98ed483d4940c1dbd7e06367041fcff2f4dd73de9a94512d5e2cb2c77f9104a00b2b4e9ef0b81fbb5f428fe47932e2e7f162c555cd2248da8d7c9fa06eb15e5b6366193e2e56a186f23e33e28aa8dbb542a32c812461609bb779bd35dc7c699e835bce0d2be68f778e7a6a0ec46697a863e3353806b132dcf311e90abd7e70669c8ce46e4f1b219c08f91ba0a736072d350095dee2a02334e56e6d47ba904fee7952a7afecfde21771b377d354a7bb5f7fd8860d9d2fb572e397d5913de55f475938a19499516d162934e836ea590ec8aef289d6b35e6b774f94c5f4b265f730eaed6a01e746ea08c57121454406261c78da8133895401e88024cce8bf6e41e9e17f9a09f8a370e65ae031ee09d6830d6c3b7e22c50760003edcbfc1dd214bae5fc2c728af716dd9304cc4a8faa886681db230025798b8881845df3f478a521903494c3ee7b76319e3300e65b67ffdda28426b73935284f5dd6b5646f2092ab732b1ccd025afba8b282bca022f84a99e24c321444903fc7444e5499814732c6a79059601bcba79f3537ddc1124c64e26da513fd45e77a2056133ce22159382767108b8d4706bf5e1ccfef763324e2937c060f721b7ae267b96feadf9e3be2bb640b817043d72d026a6837e97ed0900dc827e1f4d34cd29e8520b0dd1d820e342152e0d966a0ea7976ca8a5d586938b4e3a7f8f8a0d24048509f844f968747c9618cb94d0739814ac26ff3293438bd12a1c3117cb9b3caabf4797ba47114ae457db8c6f4d7e4bbbcfa4199b5a7fa7f36b88e0c8d69b4e480292f2ae08408061f987b638ac1d7f99a408ab4e2ee15c244601914e05feba8a81a1eac01c502512c17b4592185ab7b4d648dfb6fcc29210eba3449a427e6f5759abdc2dec16e26c38f77f55945d2e363347244794c80e9d812c28f5b6c1f0e02f997718e09635f20d69e04e06b470305482017e6210f1010302cf2fd79b32081948d8097ce792f0fcf0613aa1dc33cfa991f3f065cbd22f88e4cc11176b096b28d3ea63a1fcf84b50138f5d79c5141987aa30da550a34fa9d12f9f3f5c2c84b54b55fc1f09461ffc5972aa4c7b3dd6903dd80bd6c2c9b489e4344299356aa4664571bf058b0f5179728d1d1e1d607f41bf53d088f7c7c06c077a8a744f87b878251ca7fcc77b3bf2664b15ca0c131e303d1233c3bece6032c75c615283b992921b662efea1e462c7a239733ddfe9f57ddeab9999b7231ea531198484e475e64193169b4e755c32785d9a7da35a6beeed4402370bb4e490f5060ad7b9045491a9387d26046c51c627675721a7a56033c068818b53d8d107e1aec04738af48c3ea3734d18f4fdf5e836096e0293efac75034df7b6b277468fa71f1106aa064229cb856af6a213da75c1bd3b50ddc3a6328996140af4e556aa4c40cdc14d11f74069b14912bb197ff20632140baddaa737712aec585b98b29490025e843878b7d11e63b6ad23110e853ddc1ec0182f9f4273c9112f34057862cc4b2c177693b016973ff5db25e6cd12b272d5245dbe01675d7cc800e3fe2ee28ec4096ad020ac4c2274cdceb4ee0f78eef554ffccbe7245c5c142aaa15825979b1b2b6b611d8dbcc86d17abc1d7cfd563d2461e487e670f10963eab499da0dc54e1b7fdc7249ba46fa965152e1bcb78495028fe7b7e728438b828fe9950d4a50f89ec0f1a9ef7ea8151f3e6a39e43b8092280dacbb282ca8419850abd785fdb9c85d9b0d7f352df3250f22580d4fd8bdeadd0586e4e2249f6c0e27e29a282900b1356ccc5c2979b6902150945f59ba65132bf956c2c018732f4690a96dfc4c180c08c73f9dfc9f8cbac3bc0a88d2da2faa2ba8d07f1547c3bdef02a696e3f13ef5bd614002329b41871f043938af7e99b0bcd22648fbd2075829ee8b1f5b39c9550b5a2d991063e219925f054a01c46c648f38da8de93bca2fb1ad0dcf5a3e2d2960d892ddaf0616b651e77b488058553689022af3c5e6b1748edf783cd22e5050e69e79bcf8366250e8f64679018ba7241588492972bf12c949a37a909b87837a2839e76d97a2e7114c0922e782e62684d81b3a554461e9eb9fb12359272f5c9782f359fadbe0e61ade2819008811315348599fb441fec06909e3c3b59651ad33c7055aae43f617219575b0506807178f809f6c3172ad67aaf56ab0daa1a9af94a43fd1282b0176d7db220b1d71ab5088f6e6eb32763b96d67c24bab7600d55827629368969e717c5ce9e0336bbe370644cf697dab50a8ffe34629523ecfc0b0de034d6a2dd7cdc2fdd6d880a998c427e89401b19a03337299cca26666d31852c07b8680cdf96d31bf37bae8143f8697d91712d30e6705d7812e066d97e7e98eb2f5cecf30525ac7aadd062a6086585ac29078c31d2d8951fa8e42d60d90c843bf295898b78245a069bd3a6bc846b2954ae931c61a177ca26f5c5ba10e9c810db597b9a6be149ff066725892f46f5bf53ad8e2f8ef52072577c6f3114de1638cc31803e352cb403c3899186a6724baa74e2311ec40983216dcba8bac9cc752c67662463a7381568a3101c8b69d6969580c057d83cf94bd3fd232b189dcc33b9cfb88a205b19d9223c9532bb5abb840f49dc7c6f8ab973bfc114c81ef59d92451215613c1aae42ced26370b9aaa65525e6eeda67db0e0c0bda7fde545c6de8ed8137664ea1834af5cbdd2463aa89540c446aad8733af94da22605e695c63be9601b0657526707b3048da2ca756e4f9015cb513251436aba219973b7cc308bbe8b6a8d653f210d4c22685faa2265b8dfd30b69414e5824f36a22519c6fdb1c1cc4e6ff6daac3081149c4c6982bcbcc3a24d07790f200204808894dfab635aadfcff6c04614a414202f211bc460b821423483f0ef3151675e1196c98978087f91c1249f4d722e78fc754c437dd3706730a49009838f0bfe8a1fc6ee277ccc97165cb9d045e736b16fe370c0bf96bbc9d288897cdb10bb216359da318f24389ab2a9f3f5ba40ebf684cbd528d0d41951306515cf3189af1c641d8b858435c4a679fc2786bfb768a7397bc71948bd43ebaaebfffee856315289267011ca6b3147b4aa5ad7891a89817bea8eb1be009437ba1fc472a737f1841067965945cd46e3e3bca56167a5a5d1ab4ac166d5d2b5fb3a23e333430574c09cd468776e757fe398c46246b5fb2d3caae70162c4f315c940d747f80d50415f6a0fd34abc46e771532fd3e60a643ddaeb61a4749d56a232d08a870f6fbaefe32a40965d28f4b8eadc35852d3d8562ee3c37357d85e4a89b138439a818cc48c7cba913bd3bfe7012bc79593d90e884bc32cd60d442c7c46d1c0cdcd84f4571859dd1ac7845de094e668bfa1ebb00caf10b6186da3a1067c22ad94f15f1b1c23fee1558a9b7194c55f31d2d91a70ad5596e9a2c24a5fa98b4b6c078033eda2e8ef07c8f82e7b806bc24a50bca3e75223654907c3f85a7f53c367d3262eb90d98323531d52555ecbbd43c59400af9070f2ed44302511d60f603d251e5df0059bf1680e3a23f9715561cdaf920cee9730fac138633c129c1c3e7ccb96f0a14dec941f66a7384ee408c11fad8422fe322bf5cb873e927fb302fafd1c66bbcd723e5601fd629e5ee9ec73ad8d7c32f8048b4d49ad3058f92056cee804573dc965200f4f468796a6ad491913cb3e92ac12fed6c6701d39d7a99c9f322ad2d51974e6dc4b26ad47db473d247a0979796c4448e2e2a7cc620e10fbfc79666d41840d33f0d9fbe7ecebf6f776a928e9d317db0139bd348269523556cdcd47aa9e8c8ab6dfa37368e519ada28916627051fb2c1f58813b45b9e5a10ea8dcffeceb45ec2e38a6cb5a53be77c2fa33c0edce802fe4253b7f8ecd85439e8109acdb2020f4b7f448b7f07213691908aa6200bdd1574c459f2dc79ef6dc17a1addcc833d1edbd2c794a9538ecea8f8c89512f0305069ac7bf3597ab27cece3741a07dabe7362d5c76d30f6b322e332268ec382b0333c2c6551d576538dbd0755defc2f56adf75edb6f93c560d7230c198840b06223ea17b26b726133d7692c7b27a728e0944878cef61de5c07831871f2dd15be5fd61766edabb831c7c854c898b3f7f2935b70042c52843097a0c0b9155a1d8b9888e0f42579c26c3f268039438a6c90765abc0cc83a43fee1464b2dac2ee322a41b078e45a7300334cd9732bed84fbd6c25144dc1dba6f4dae62285f7362be39941cdcac70dad72e3df24397d4ed5ecc702926ff6cec7970ed38bf600714f9bd83bf0908ed1f894fdb27ffcbb1ffa7d37926249b2e2b73e9ce12e988aebe4409019b21932043b167a0c89263d788d059770065c6662b90bc70335547eb7d39bc7dabc366bb7d9cf1591b01bafa55d42302929ce16358830a7ba9e21bd4e6824cf69faa70418594b10ad976963653ef606e5d3625d0a2ddd5a76234e1a20551331f7040df36ee0908169eec1d9b260830785536b999e4f9d945796b1c4aef90d49b3b7563be837dadc21ebe5af2705fcd300434d2882d285c17d195f3e7ce6e31f14b0ae6dc53d13927507c3a1b6c44d1002d85537504f8c9083a985b0c975d36d54dd679b137167c6d67a9511135106837220ecd6d65e8b46de6a32aa53ac630a24805e285108ea02a9215d26af16cc09da66b72f93f6be60f409821c35e6967b8aca2c6cdd096e3116e79574004253305243f1184cf6d97b2ba0b21d6cf58e8fe798c27432755d3ef95be1748cc413d8db434a5a6e426b819813897be5d9af8e809a7c605120d541ef7b061207a1802eadb5b2235bc774bdcbceaed4146686804d21d1c296e0f7f698911a0f3c9b6ffd0a36497b2d60c26d211873a7c4ae8a8102690e04ff10aac8e15f6a45af88dd943ac5f0402de5cdb2863f3eb5d9172d3890bb5f41661ae2a539f241320aa7667c74244e7492edd4d2f7e80cc9a2ad1bfc3c0dc0a3e413aca37e856b1bf96c570672f754ae7c1dcb4fe4785d1854aa30a07a8996fdaa947538bd62624ccf120bc38abca42042f4db5e7cbf469a4086242e3a29fa64b9787f1bd8736e9425d2387759cdfa1f8b8dd9951f710b67f2bdb6bcc2260442c3c76caa21a840f1a41fe201f2fdc16feddd9cbd0a5cdfa871cd32a6cc04d781be2cb44b0ae063cba8af3bcc3cd688e63d3e4a97e9aa16bf706cf0f7fd61c560a315412cf98adad8040af705b84efde19b4adaafb1656448044d6c019f9735ab0e316df83b9aeb70480c02ec4f0189fca43575745708744329223d0d561e6255c38fd0130e8d56901c4aa5ff9b9df10cfa3127ca2c1ea95d6fe94c23a69a3f12637bb0719b1d8f87d5a9d5c0f4b6e89af93a6ff34cc3701f6f7e19e99af2dc7a533e54fe0224e35436f68e69691595aad0ae913d81230d2200468327f55034125a829d8d2d10746996684c8c5e42bfd61e3a8e8c5b145b832daf4fbc29516cc3f82e135e34e0d1359540117705122df67ecd3825763c7e324ec21faf717d9cbc4958e8042d7011d8404abee7f394dd64aff344aa095b86c16c647d8fc054c2ad026a7c555851febaae25c57b19c1a82c371303fc4428c55e4d335007848deb1511da7827bd12a0fbe2797374e229e24187ba1f88c86826f217f24da1beb869f7da7d1b17265c33230dcb0dfe60178ca14da0830aff64e923f6536cc51af4526ebc30fa3337c608cf1473ca0fc4155b30bfd14288be909616479005ae1537276dc003fad2638e1727848c3e1c53f2358dbcb19a2eb0d9a4693c7ba61c982fc03bf65f026a68711af55458251d617b27ce4a254895edb26fab575a2cd8fa280baaf97daab869290d1b13385acfb9d027397a619b09252cac7e8c29a2862293530b2f808d9e7667350f773f53905f1765c65e6e4d7191acfef0aa175a544b87a722236aa1f237205d8ac31561903eb76bcf212e82c0ac9555406d41812b3855d14bb0a45747548efdc6f95cffceee310c1e00e2b06b2213fb74634607313ac43e8cb85543af6e626ff8bde7b7a4ea34e855fefbb0913fe61b0195fe48e9a135ed3e53feae7aeb1f745dddd9235a57972ddd292b080bdf80e33725c3b2877279967629c081cb59e4363be404904124faf95d55855111ef1c45e951686b7693d6484d39168885cbad1eef828a15ffcc0f1aae585d565a0789abb51ea22e971d0843cc4bf292b56332bfe92a347e3e9325ba49b69b84dd126bed087676678ae6548ef20a2ff990f01acc25653b0fee5ad705dad9717f3309bc5eb6da178d3ad4c0c6f204d01afa63d1308b6bec05012a73ce9a0cd3c7051480e5b6106c9a4cb0e05e361c368069674b35f616c37ca8db4989eb1d42b6ca2c29a91ba1d1121dcfaa3ee3fc6cd204e51b08f4c6dfaa27563cfcbee3a2b50cffa63f566f58ba6578e8cb9747182bb9ef5a2cc75db35d3e8df60327c5a8a4de2d448be8b942c439554a7944bfa08689e6f030b1d42e8a44e762f3395c16f52f04cde21ef7664babb94253c937a9a40cbfaf4e9b95af17b48c25efbf11be2d4a971f1642e42670c72ddaa63ab4cac7c2631e27d145870ed29ebf32d3fe3954de0dcc87deb45e3d81edc049215ea27af281d71a1d98fd2be8af8213970e51c1393c21409cb68191c7a6bcd0c5bb20a7b2f90fc6c48eb4445a58616506d64ed31fb9b90db30dad4b200ffbca35e74d01879bcceabc5ecabec12729002fd223bdd880745f48b8b3bf4d1f291c78d3d020df68d7ed7327e4e8d709492f3bb40462da560a0aec7a53021ecf184709c037b79af038b8d2fdc06511601d976d28646877577e90fe7c10edc3745b788194dcd321d92bdea15f51bed0620700ced1b5d64bb9b97e247cdd45432d6b0fab76e29f68af7fbbe449f7921e1a572154edbd08c2e4cf3120f819a1cd20c2fe0824b7d60bc24fa06be4fc4b285ac4d96ea64595d1a4dcca6a743333a3f264e4e3346c95cdc792af1c82dd9cca11c4df1ba1c5b4a59e6475b9fcae3b20d4c0911d6371bd9f1143afc4528ceea6621f7582e7a7f4e67a19ef58396edd85d7aaf59a3a675fbf781b2526372a69ffe1370873c4f83ed50f46b65f43baeca0f048c42bf2514aaa1521a5240eac7b31b6521938d34a65f6e535c61326fb67e17cd4c5b42f16978b46d892dab439646c22b244122909295a65c3f6d02dc303431eff593a64f4ef2485e42976783a9468e53e506da67fa8f8f8c8663c8ad728c125a4f1d8bf71004e791b95f7d53481a36cd9cab089d9956e2b6876875df4cc1a20c0729e1f58f99e5de66817941b55b6b026a91f94d606d83683f0c28eadec665e6c1efec543aec858ce98a425bebfefd4abb8802cbdf1f129a834647c20fcefb27cbcfff727d2405d58a18b13bb5dd8e2719c00b3eaa7d0f1bbef3e5672a7a52c5d1bffcf0a7bd5cbcd8997343e22d68863e0e08d17777cd6683b6f7eb7c7f5e8809a3f5a8df6cedf3a79c4c481c79b8034f2ca167e2ae50fc917510e6e0f563f7daaa2f224e7996635cccca75c31329ca028789e651cd552ffd732cd5eaeaba0e50405735f61f7002fdea26cbaa257fff141b9fae6bf02491a57ff4b071a4c5c97e292e7e6366d78b099617229bd12ce6b3abf7b48f7f539b68bdfeb800a4adea252b40a065bdb524bb405dd8135b8cf797c7bc3994a38304c2ccfc026568838b9a42f795edf3d9936a7e0019b7623c0b49d39e9e015c028219bcc6e008dbe2c3fa34df79caf8286114499fc73590febe01acc42a5e387a3968be9a15e282f40d9ca4af875813e367d2dbe52ad636259a4cde97c7b6d8660856d175d5430ecab3626fdaa0db8ff68f2fbef9c53f8f569a97f66e77ab9b486ca26465fc3486b05f0ffe9ff44bf031ad5cc9748bb8c9f8a7f17e8663f541558398f7e199be45d68e00cc7e5f7e72684eeba75e6659940a14ca11b8a501de3175ecdda37354abaff8ada6ad2f30bbf315f45abdae78464364bdc860603b4bf24edd20eb6359e1549cf193a328b0fe3f98690fbc4c261fb30ea95ac61c3cbe2fd1984bae88d6ffe94ed09ef9257e026752f868dd09c7e8240e3e1bb3ba77428558b1c93b739cf1a5c66086d10b0a93aa01581995a73ee566c2f18ae95d3f2823a77e1cee0a055c383af7f6e3575a2b87d8cd0f37b577e8409689c3d7eecfbd11491040a0b3fc41a65d9c9dc405473a767af9e491e61ae57d17285685994c50131a767183aa62bbc81370024f84aad6db1b04a0dbe89b328f7c659be79a7c31ca1aad164edc60ef2e7b3825f390043c64a70b5fb8b9b6ccc455d7bd85724042786f8c1d3998ee8fa7a158439be1cf9ebd5acaec9a05ea0ea8e737c1a6429e61052fbe198f45d27287e50a8a3722dd40cd0f9cc70ffcc868110c832fefa7af0fd4e60586438e304fcfc378ac1b435bd2bece8a1756fc3a64b82ba933c3520e72b71074aa63040ad9e9a68de274a847bba43edf5627439cd0caf454e3b6f9eacef412a05a8bd47f10a4ccc8d9666f73d64689674dd48336b9497d94ad1bc7923606331d62a197e33e79aaf6576303d486b6129b5f9693a83b0a133f76279b4d618f5d6a5427ac3884494aab6e2b94bd98d3754e1481d31fbafa9a3ecc4d61856c16ee2a5478765139f17d7057d3607f6f037c3e8b1bb6cb3e480f31d5f2d220c195e55d0e782fc2b8939162fbbd80a96fdbdb923208b9c4d4e97855c9c588c79cecee385343d94cd203a1127cab7548471bd0159e558061caa8b830f7fc621209f1fb89bbef72a1ed568c45ae1f373accf7d9f483326e7d71512633d5c58b34b0094ab031741c9fcd832100eb806552d9b693fcc422b6df39fdaebf5dfa86e6525d5244e257752e57348b20da28d44a1a723002675b1cb7273906a6d0bcb5ad86f0c0bdd02f4d0ebd47066836b37c2a45d080c7110571f8ae7083ae9a8eb95add324c0c5178571a4269800d6f43b18c80299296e46265677bb6d74b19826265f723d8f33f439966fdad73f82752b61673278af1527f8591da0386196d4c72e1790761b169d47b00c132783b4aad8463c64bbecf7c31305fa96aca23e688bf2c007171ead185c50ce58217855aaa0462ed85633600ce01734f56a15a1299b499d4c12580a77f4e523d97da7f805a86d216b4862c5e6d268a3b89d134a9b38be3682a79b5dd32728e1cc198d01c9cf85aea893c6eb7ce254b7921bdcecdaf31c55dedf5a1de6bd4d448f3d08e40577b181906f6a0d0dc1d73fd4b9beb1aaf42337fb06e99125486da8be8758ae86522f130bb3b682cf4620516a0f23285fb698b14080a1f7acbf2617f2a88abad5fd06de0678323df88dd8c721d99705675f7afa8cf0561e3dc5cf182bbd45c805a9a28479d56df4a902db6af1f6c531f9c711e179aeb8ee7e96a79185528ef35a8fec8093307440256f0efcfeec4a4fb3650201e191ca0b1a115ddd3ad5d7f3e76d627dc3aa00d75b362e790d1eb05dbca829fdc48e6e5a89761b5496ba3fa3e299dbb07b1a1077647426803e26e23db012c084b30af9115f89bf28a17e42fa103864279c280adc53f95f6cf8054b727592527e5af750b51f4827bf321d3653b808d6ee5823adaf4437da7d1ca0fe69f3fc22a88e7366aafc5ff8ca6922c1c4b5de81af14f759d1a77e6c24a8fee0d2a22d72a914b52c891ce3a7b6f9c332a4cd0a9f44fabf955788f769be41df4cb5641eb4487801f29939edaf044092c374b57a17e8d14dfef3140630c6c9891f855bcc3ad359e27a8ba86962ff175622414530800217614d5a2c082ffe8585dd42f2aaeb29296660076af233917702fb18371cb48b6e14810107f5ccb55d65dc2c8f13e55664f0acdfbda3f4715b616af70abf60df72cd039ae53f38e98ff763853a10c4c0d952b905da2c3a21199a9c400e5493e83db327a64ca76ca3cd4810e12505cd5e4579de1a2c916970371b8b795239f9f328443ad75ba4d036e11e13f07fe5d6f3f55c80898d7df26252023e5831cec1d4a1262f9510154c81c6017b71d5420f4c124a49f9da29dc235a26d99489df652e88be793fe2c51ccbd22575f601723581458633a78cce8cc82dba5d1fff8d32feb3d286a5571123036afb3dc620ce98dce0d1630712895154e654ea26726a1a09191f25da8f5be10d83d5b147c0ca663e7b85c1bc72834c3beda69c55b0f381208744464e1023bcb7376e5c6b53d05e7729c5a1954c008a23f24e631c75b80865d7bdcc44918d296e6c6fca6110bda92198da78f1cbc8f0a78604527ba4995b2aa340462a7f7590c05f9a75b7e073be471870bf120f0b4c1375b3de839921bafd69d9187f043ef95eb70eed13ac7ed3e1ceba1447f3f3577d83fea5d31b80b821c97701d7b4d5a2429521e836a6d12b2411ae5c222477993662f200c263803db86dd3ee54669a37a86eae09b1fb987af671bc61cd5ff464ae742bc28e51d905f8858b013b737809c010c1a302baddffbe8d748d9bb11328fb7fb1ac08945a7537c5fb0ba4aef30ebf9b31ad46bbcce1c96666ff079daa774195bb9468ad2c1ba4c31f677bf82b0d740cede5528237dc4419b6a5caa10f60a39e960dc37e6d3634332b65aa4ca94bab03c84ae071637ed2897d6ec39100728973fc51169e92e2655322dc94da4055d6505342c459a825c3f94e86703ba470bb870153c8a96090042472947ab2e5034c08f234044cdaaf0684116540e9bdf3cca0c2158208b72dcfa28722325c5e3a9d3d48e45416822e611892e9bfc6b3638963e50ba9c01bc9a03f65e06487ccf2b116a14569c04af310d69a7672ab7838a1fc6cc7f1e898a09e3a18d941346ad1ffdc3f221d70fcf7fc15b6210f5636f67c195d23683f7a3c9a370558a62ce32548ac907f4255789025af034b2ba8161b37e58afa7df432a07f2a4ea32678c730fadd0b326bf67d624c7ffc791be64060e05bb82f970ef2a3b5cd92cfb12f329fead045c156b2bf2c4ebecf18c6950875bfd4b010ae22589eaa591a3db3cca25e1fc6bb92e6b5f54e99f468a4ae51d532dbccd748911e118a5f9ac12e3455fe08409b75ab887c682580a69105fd6db13f84d1059074d6517909f4dbab02e2b0097ef76e839b1db6d9d3981a4c70b4af93d19bafa0f3fb9a297eb1d1e1102d4a71fdc72e6e3d007d6181e7cab5226db80484845047a0d64cb73b1c816a1a67ad3de70e588c545fa3f542093f47593e045bdfcac94b5d28e20e9562584d1af75ac5d83dd450f9902df593dbe6c1ea0a3f4583b19b27242f3f3b6be986f6a626253d6c6bec70ba1e3e8ac4f309f28499759c5d87feb7bd7d97438b2a60e920af042e35c5d66e0263a27f825db24e1e46a7230224aa820c5fe71a560903378108655a50733a7b9df4260a3ba3a8380eee6b21f957381a1fdf9e652b7f9ec6800dfa4d8c4cd5daff5306ffbe945fc232cfe5aaa90a27b8a0049621f435ce97bda624c6099c317acb7f421134fc8f049416539745ea33f4cbde4d04e2df83cea34027ec0b6d3db09676739ec4264dfd59c366c9024033da49497414dc22c2d116ce99d19935e1820efb178135cf69090dc1f3b01a470723f8e505b5ded1081f1403316a9c8ecc745d6b572970617ff8354cf8ad1e23eeaf74950e0a0214b831a5b39b50c607fbb46079af688c16e5efdf1224bcba72fc0a8ee037dc5cda64eb2129fb5e718abcc7a145df70840ac71e86ed200fcea37e5ecc864a94967590af881af2a8f9a0de77a843dd046fbf8d6df348bd32465ac28c010e887e79548e8d268937fc4ba8eb950e9614e9ccb3ca468364e4ee4f35e3820a76d5147f5a61231f10cbe5f1aec97e51d7ae2b8352d8e0d2cf72568c6f21ab00a2d798c76d222302441942521e685482a0a4f6d14e4e5b18ebe723410c28ff7c760a27f3b05b27e9da9bfe72b7bc5550910bb969a7882d3974cf1abacc7f6d244c8924b14036f50e4317cc227de4f98c15e55bf6f6f14c694f82d56a531cb9eb1c2f8cbda8e1047b27bde143304b66b693f9f4ca1fa2a99367a2328fcdc1fa11e5b5edacab2ea5b9f267c398a4bff3e6754958a65fc3be4172cc45b58d3feed2b3463028c40cc17c163a5fadb3a897453caa14d72ad3d8596d6b10ce1da59ae86454e1bc943b2673e4372043d37332a1253c865ff179ef6647885d230a93dfa4a8beda01808659c7d8353fdca1421b4165f6ce539079d5934f34353fff15fe2bef843c2bee636e80309556b826c5ef5420822c371b5a44f544f497842df8314d78cff4fd7613dc31f05f9e78afa9da43c174869409f22c98b3d11b99fe848a55b82675fa8430ee89ca7aa4c5387571deb7cfda91a883b24b9617ab0b8f7e9d637d912ae78301a126f3f82cedb2622d7b6fc4338093796dd5a92e18de08c10438b7ea539326b11b28294a429b684484c7f90a89668ef93e81e84e670e019c56499219409ee5a38702bbdfe49f68975504c74ea8fb3756a16c0d3dd42549fedcb0249de5b2a237d5f9b3d54a954cd1f85b104be61113076857b9d8065261bb685d446667c44cdec47f08aa6c2f7078a8c031b20032bf940225f66cbfabbe0970c8df667920541c644710141315391db2c9c11a57b8a618a75505be30a3f2095a00fc28a20bbea08b66fae005cdb08fe1e9b413652c189321ea8f0ffd7bd390ba1db00a5256c1d548643b61f5e7d9f4e69b67fa0d1303953d424e131c856f195fb0a87496291cbfe43631caf201519722db63f39ed3b07b215755e0855e0a8dbf7e9e4825eaf0d9b2bbff095ed886bc504ae3cd78761dc37932a79afe5144429289138f42a02e3a3fc5815e39f0cecc52ffede052eecf649cb0d3025e082c2aa3e8f4bd89cfd529411c0dda99d936a7ca2c111b3319849141b4675c62563ecd9fb1d501ce77461768ac8132df1c4cd342d3f1e0518a79af241e4ee743f5b640bc0c2b38665f623a5dd22e5b2dbdc68ba5304eaa18005785fcff96f58cf395415799e52c9d3e05911b71096435a53a9f38cf71f67bcd85b907eeb93eecc9e0cf43724be5d0216fa9a606d11966d3f59c18d95bad87e5a2d31e35e8e35f56164ba11bda83143c2fdebf4e431f65e0d1ec32aa89dd886edc709eb0eb1f2f51f4f5f3325b4749a432450956e95ab5caf31f2ccd5b09c81954a7413a6d5c11ebf775ebc780b20761ec14dbda2a79d5ab7a70a3e8c64d19b599c5287f28a6ce59504c89e3804a80d0dab32e6094a83789cbccb758f8df7f206b6cc3ceee4dbb11d663f66ccb0f612f59b2d141d4a17b702f3d59b8dd88d1d79e893cf748021114fc0dd0648ee3fad0fb3ce1f6b7db1da85c1b4ae9f4e8f4c92ca9351979eff930b0ad6d49a2da48e55a745fcd910b20955becf5cff8beedf61d042607e1aadddbf6617c1ded2058646fa7b33f4473c91882acff5184aa526c5a84259b8bf8c56df6317f43e54e6a9273c4db70a0c4e1ff5b18c5da8ee3438fa496d9897caaa4ed4d864753f91407a56385e825743f35322c5d1fef35b59cb73f5e4ae7f162bff89e9bc8b15376ece5f5ef3fcc3c9d4d4932cd8b1fd43c602dded52b06c9dc0efdeb80ebe6ca163d374990429bc1c44efaa59e6ddb7714730352a10b61b1688ab287babfb3d2b240a00aed623b15fc5b631093ab370b214cede6b627b02fc4aa54dee4fdf4cdc089ddd87d7984ed14cd3bd6d24c8f5cd6d7352447deed983bfe72b6c10505026bb7c2daa35b7d9132876d41b7790d7ba6dc02b851a0c1259f69c010153b3faa12f1cff98a25a47cf98e0f5e393f464aa80a421df76220b4b067f082ece124e0a0a7258e78d91c7eca52d37dc0a832e9fd47c26ccb203de5b8e903df49769efd3e3e8407f086bfef921efb32773b08f91f6600fd2f5adba9df384120c60706ed6cb454184f662f085a209ed29c59abf7f16853a1d273b63de85349758e6c3ac639aa7b4b7d656bb1820abdd6939c27171f13c0c21c2aaef6c398eb26547d640174461589492dee3e5dcb9672e7fe4f0e122aaa7f0e09b377dbe0aa4fc7821b6b226f23989ec3e6c07b0bd40a6621e66ae982858428838d7302e59d15b1a0c5ead45731e4df752c6fd3155bafb048c6a56bb0e002c9b0d76b3a1b4210b31004da94e66f1ee3544df8fe4aca3efee6fad0cd86cb8a917f785bc8e9c3fc90b63d8d4cb6fe3f85679b611d4f5d4f24f09408a038f6434e024c8974e69554548750db28b747c7277aab34eae59a898fb3df1bea39014d049323daafa9d7f7fdd215d55b1e5964e41cd4c8b1b1bdef3a511894797425f93a5dfd780366e69726ec11bfbc365de865469ab5d65cb8a82b68b87f28b97b37d55d828c87473120df9e6f8bfd10c75fecd4d99ad6991401e3931cbf0001a7536501e7bb5ce02d59559f9c8345382215594f477a757c638b1d9e64baa833cfa353bb555abbb321f9decc61da80089324630105bd46d9fb9e230b04397208c128cd44bc4ec33365e41443de2df5a0c319251072bef5b4efa796cf2f585a3309fc09c3d0414cdfb2787531f8bcde01033178a09e648ff7965cb2433bb577b1f41e555905a80a06b6dc7b2b7863257a5f639733c46d15b93d1e0d304e6043c664d7a9466cfefcc8c2b0c8987996b500ffb420149c3086e05ea7349ebd6317b059a740910d248d99318cca9a19ba900bfdb7e1eba35b482bf9f45d118fec572363468b76c4b2d4d159105617dc13e3a933662debf70f143c392f897c367dc27b2f6152422b5f7b98c6238bf2f08badc74ea0050ec4d3b830fb809d9c825271d29388d75e416b4e92f090a70cacaed1b314721efeb887ce213cfbc167eae0ed3b61739d9188368e4aa672f1eacab2cb58c08c87f1286b51bd7e7a97ee69f5a432a3851dfde4b1d9711110b96d6020eacc33be2fe7bb18acb4f78350087ece6b00b4acb628d79a63a752ecd5807b6ea75ae9f30c50d0d4758fa5ac665a757f963675db22ead60d99de8869d38421091629690c7d0bce8b8d425c2b096b04fe77ac22456194b26bc33db17c1241849dcd5bdb26df3efc57113eb4d9948b1b2ee156825f0c050e61174c710ff0da426406f9ada12bf9bef521c2427323916ebe1bdd997e7fea3144047fa2694ef513c6b0ac2289403c8a38b241fd0307514cf532a0fc585bcaf5fae0d5755f309bc1f2cd7a29d38d53062fae3a4570c4e98037a7d96b0e702ed700428b85317ab6b4abef03f01ba3361f1903ea411fec0b992e02b556f54d37396a8d711ba8130cfcfbe9332db7dd160418b3ba92795b57428297e93b0dc8b71e168a5d7486ca4e9c4e57306daca68bfb2d0a7ce4fa62a6e8a0bfcfc74aa2b2edb155984b75c8ae62acb2f103708a83011938158454842e934e1e2d56d43d949bbf54399d6ed66350b521c07b86c3901c75870547860f138ecd5ebbe344a07e64e281216f88e5acb535d836f21605b4eaea04758d0ca9134afe246bca044c72394aa736dae782e414d24e0f47d342e823e15c2c26e3850bbae4129284083490b65fa80cd316904d1c47b36fe43e02278bd03c131df6a25c54b8b0d800202cbba3945d79d38c1bd37f084aeed5311f243593c076320c728a1399a3284f10758c32454fd2e697a36b09f45a0cfd167ff3b9ad73ad153849a2e43ee49a3c1180ad8d7fedaded5825bf513f3a2277bb0abca96ca35eb59cc39790f54f8f297faf7a9eceaafb73bd0d152abca3bcebf82660171ec55a8ae5baa28bfe69668d28666b76366e21cf2c9f8ecb54043f52579a077c53283f471b897dee737aaf4fc45aa27a66a3ce3fa174d2b7ac32c7198e9d7087cd0f593a8e969f95532a4f2a67afb45b5b56e7a7d2371ff3bb9d6c765074674868d3f5f61ca17643eb7d3346455f8661e10cec2fd57c1a79d63035f86a0a8ab7c40188475a9a4c2e98a01ea8027a2dcfaa09c2c42834bc7fd71766abc87dc9ba891691588d97c9218e3cffdcf33ca72cbe797607f3646a4d21e0366bf0ad3873816f0c522b417995e5a61a162802e3cd237f07966de7d3ab2cae733c919e3b22aea37805dde0faffd56edb146d9a39351d3126b7dee7ec315ec5b220db45bd907eebdcb3bcb4b5d995c77d6e0789690e136f7b22ef290c5d84343d372a43ad062eb044c54738ffaae7e53e1989f940cbd1e4027553bd25129dbcceee6bfe9d598b8aab0ef80f93f10624fa6791677ccedfe469aac7ac1a3065f7acf463518382eb4e5b5ecd6545b1020dba10c0bf74372e7bd84d5d8139fe9ce632139b7ee497802567bb8b127f3c97a5bb11cd1f3f399b651d4282bcbd4327010a883db081fdc3f4da53c240e674f2570773ffe885ad4bc65994d63e25f6acb194546e71b67765ba40c5d3ecf2a08ddeae206a268fedd60b941a4ddbecbf9c63104dc2c7ae5f3e39fa43d3be0af8c6ecd58c01374c5a521bb3f9f9b5222720e9b667d55b4ab226b8bf8709bd023c149a8139ec70e79a502014a06eb7b5592c6b2f254b1c9c9f4c1d75eed66fc5c8356bc78ded91c0796b57709cf47dc1eb53ae74ecc05e01b650e33cecda311d9ce8b98418ab696ffa00f9fe6dde6db9440eb4a1755fc5302159dcf9a76f7cf67f0b17f9c5d8b7a88fc59df7e14ca28ea01f7974b7a592f4cb01ecc16fae957d1ac557a289691c6e65d1d0367ac042b04e692174f57628905b3a46005e87ce0127a58f5ae4b04ed48499540c2425c37ddfb02e287f0f80f3b9f1f8f09618d997d8e8930e506ae5a138e4210e577957a8c5f9bdce8975ba7b6a2c40669c70c8e23ca9df77248738d53617ef38df8a2e1cd8d9df10fc03643a9b2645bb99ae947c11c6aa4ed8f9c9904470c9339301360d82dcce879acbac6261835a2224c5426b4bc9cb8e96b7818f2e2bd3bf4a58a967071dff56d185d1fc199777449922dcea0a46ea524e36307d3822a9e64e8f803974a4409e4f2554060df05c685730b99974a9bad304292c74991f4efadfb0709058a7634018669d6731d8d1984d09e98a5e650412cc32b688251b68e03dae9803f351a969353d2cd27fc53d6edcab6777219ac26d31baf990eb53bbaceb02ed2471811473bd9823dfbe1a487bb675e515c800e9d616b15ca823c1f6764e8dac5904fa00dcb9157e875b2087377a7c80626109890bd0110871357fa3a3883c959d87ec3df9ba914784b45950a1534583702704f6b496cfc48e43d5e3f65e8698eb8b60dd89869623395adb17d193ca8bba73b528198c9f730474f4a16956a9256798d02014d0597eb116d368fa9523c566e7fdb7d5681d874aefc746e810c994231ef84a9c389e1156bc038680e24e934acf7641cfd1b1cefc6a5aed7c1a376339143bb3c87d6661085f7bb51ca560f8ff1395c24f5edb3ae260cc4d790adc911d52a94b8cacf4b90b5f2efc27217fffa2cac8632f5e1f127bfb6ba3631fa681c28e7b7360e26c08b14307707eb1713f778ed62a55813436a90d8beeee2f3190d3b7842324f62af9d4857785b1093d45004ee1db576f1b2ddf6938645d6e9a4e1710888acc1f43c7132f54388f5a84a841d8c4dcb5d4106a23fbb128f71b0077670e0d4ef4adfb1ac399622e547bbee8234a1b9bb1d8e1c6a4ea82932a4fa9772afde1f190595893940a356347d2dec3ddfa9f0511c8dac4092eebaba6a6f95b4c98b7f896a19e05556e3f9d6523271556fefade8355c07d88a587850a02539358158f367051c02c6972021a84d645afde47aab60a4903d973fba1e20976234e74000d635112eb39d8fcdf2ee47847a348d727228bff1408e1f9e79e32d1ebf56ba93d6b879ecb2679064580d4e45197d5e1713e1b8956c8bae8a43065b054b626b4f4dca773c3c50d8eef3a387f65673c6932966a27be017cf3cb49b187905e39cf88c2f06555a24af7e5e4569d54aecc4591882a5aabadf7725ff3cec9dad160d0727695d0d5ae48c9cdfc7626ff5fdcad024ac366c079de482e2344e101aea0ec1d5cd06c0e21985677e49f8850f088d71d7aad8a884cec5c6ca55b526c91fb4976a9898df212ea0c96cbe37220e69989870762fb0dbbb8fee9b21b265f35b55a514548d4789bd8cd15ba9cdc72d6662cb2bd0a2e9562259a47911e68999f9fb9fba0515ff1393aa34c8136246d7382f366f1067a08d3167201e805b3b32a0f9a8982a402f3cd337ff553bf7089f7aa5ea584e281c5f079c8cf02dd22b347a8f7463e75a3e4229cad1380fc7dc63a2ef09e6c6d572b5439734386866a0e80144c0e7ebbd122d448203764a49f6fd753e12386b5288cb3c9e498caa110245171ab3125f74adfd247a6d8183236429044dff2daaa5fd512aa42a1405a4c79684e91faab9eadd2a80bad05711efc747f4c1c60137d8b031a320292407d354a197fc7351d8814287583f1ef22559d804518e6eb24545175300d863e2aaa002a190f64f95a40fd023ff157000ed7cb2030f145a6ebe02183c2b8e2a2ea14d91e3666d7c6c4368122197672313b1c4f6ced61a945a07241b128156c9307a344ce4d56d5402b259d6b0b9baeb76d94fc2002e39b7b1a5c82903f7c64e71aeeec5d81912a9c08d0ea563a9a9c6bda2748e49a57e8c71aec1e935be3b83efc5207015589c4d899b0a3a8c7e3cf2e8c8ec89fbd166a7fe4984a5b2a77b55770927ea9d8f192d304999c1dc9e74bfe0ef91d154d2be3ab25aee3bad53d9026acdd7f44a2009cd828a95485ecc06925bc75a1c993ffa41f3f0878fc73e201f222f639dd2739b5e1d19135ed3cfb8b1881355683f4c4eedb7dc7255175dabcfaf5c7df29c87f71f1f25349c3c712ac368a1f4aee0e77e298b0167af56477f927e36b12b767d8c3fd6d2269f7f666a21e8f649c8d42d673c519f88bc9e4f8f12e39394a107037b1a1094bfc1b9d2e63b38db341c3a86e5c486ba7f610f3ecd675a9ab0c72bf1601b3aca8f8e00176f984f58faa53d6525715f98a20f43fb445120264b6ecce4b4444b492cf40907984d29fa3ce3783a94dacc4d4e45ca2c59b8e55f9dffdbf5b7dbedbbb5920b16d8a73acb34f8d4da5d9e7b4c37cbbaf5fd3561b1356b95f9881438447e25600cea8e7ee2266c181f57190a7184a6150ab758d4ba3611ef9e85170aa0891ec55a8ac5596a2557c745270775d09f60dc2cda452c42bf57deef97506e56b9bdf4b5447d7b34ba0382c36019018f0fadf6dad3700ce7be651ce61926a498c0ced5258f932c0062b795c3aeffd6df1acd70e2ff99173db93f97d379054b71578e0c769ae3b5e74199de9c3cf5ef0c409965cddd876f45d5e4e306c28b499dca88bcc9ad0bdc2d1359592aa2a85806a409998eced6993ada177a3ffec912c4ef8784084de822036874cfb4e8a59f7d07e0681fc1125e449df6557daaf2ccaaedf5b8b5662903f7e07defa8710b4af2e49374e151fab0ae69992261bcbfe9bbfa43563fb8074386096a8d17785857c5c7330b61493943821c814f44d494c8c5c619b2caea2966a1d19bada809517a5cb82cd578ea7e0b52c3cb9169a502dda7315fcaf8270e902da9952f3eda554ca79c604fe35edaeb9a32a5c9654a9094dda458c13ddb7ecf1b005f6d73582109ef143829322099e7ed3e521e6ebc91e39f118f04c44f635c106204ba3fb2a0b99f9ed23abeed36f6cccbda6d45e44054e34e7d7b9b69300bddb14a14240f3d86b67348f78aa5a8b46a2946a5e2cadf341535cbac69852152220480f3e7ce8c9f3a3aa6b70b8a9b6beed28ccc32864cd68064f7f88145b43d941a79e32a4c6d361f2e872a8811dae8dc5f81424da3ea3daac9bcf8e9cf8629b2cd3631f48a6c510b82e849b290713cc542c5d7f3ae9aeb57298ffc6849d74e6dd19e2937314adca4219414612c8450da715f327f661be16092b5790134424d705f169443d473c478efe4efe711d3a78c6cf02d55886e886e11ae63f273049e19bf58ffdb35543371ef8d40aee8971a9533044142b5fc1a3e2a647c2253e9449e8cf3caf805c97cf09907751282986d8538f5b5ed1f11cf37f1bc174f6f203cd88de1531d62d645cb8f9f0e5c40f848cf08ec3c58230d6bffd6c8cd41fe1abb19a647960bc56837d17862970021becaa72b8eabdc3efc573e3780a83057b05d5f592d5417e4c697272600ec10cf038050ffa64520973e1e602144a601b0f2302443e2afb5f1d1f75e7910277d5f8fb528ba3b567cda66d82b2cb5a80d172d9f6b2d14e84f792415001022ab8a18615588b998b4595f9548df0f624cb66b06a684af307da3927cf511a0c2e7e72684539674b48deeafb93beb95831c256fd6f66733d07d78f217e5a55d51017e82128170cfc4dd869aee7b7fa51b74913ee3b20827ec1b1a3642dfaa7b45a6c5c1e3cea96f0b6a5a9b031a2ab414e8013ce63c97be29560cc28f0397902ef372267800a57d585a0cfb555ec8f9395a77ee01b99b3a24db23ddeb1d9205e6d9e70c3fb85580a6cac46ff2390d77c51b536375c2df3bf26b47abe49ae7ff4f8de8633b063f8436a6a78b0be91b161ec9448c87bd91d89d42dbdcfc79c22f53bd2342f61a73b95f1e7fe2be58a3f0db6037169060c12b53c06c8ff6c3713fa1e8f2eb897b37fb18c4bdf21d4373b73bc491663f869750439d62dcfba25bd274154146893bb3b4dff3888e6677eace08235cdc1ea73f0ae52169cdcc68c0ae284484483f42372193a8ab67b0a4cc97ec02776f67f2fefcc75bb55a58cfe10ca3a3f96b5558d020d07507daf83a84aa32390da77298230c77b7f83016ec817c88675c132265df331205feb21944d9de505769ca0c46d13d563064929d3eb791d940f7d105d6c500febb54e768bb9c2f10c5b898fd8afb77f3e35647ebad5146fde675ad10eef85d3bf4514427d34d2da7b79ac28d03c4083892d2fc24469fb17e56655888345c0642c9a97f0898c92950e6ac63b19c8b866ba879a31d593f26d98cd1249fb6554e757887cefb9c41649b6ae6818f47bcdb2ce7c57af20cbda5ff932bd5806e148729e8b08d80b8725c66b87e0fb3b6440b403279081c287996aa0c5f057cecb29206420c2b5a4e785c8faa80a87f186475b978bfd313d8f6fada6a0b644decbf47af83334b13f484ae2528436027f8bf4d867b5c25e0db17ab99aabfd995aa8282178f7cfff261e37c7453b01c87ae3082e1e28ba48904141238a4f84dbabb2b8a504874574c023f58bdd69aa10e160ed1185823f5472d1812fdd7e83c8444f56df76a27ca8752514643e13db511ffd69fd7381c84a86a5e615c403765face59daef549a803eb4b0699a48dbba291540448810aaba551652cecaadff8436ad0e707919b5e84c4a08665bf0bf24604c76c389306f15300289d92aaf0f3723ba94de311b216e62e29456756d4f3f94bc5783c757c4c64bd1783b7eeef173e3f5d4706a2ea10e8123b9d8bc7342747516a6c03fbc23a23c7b11348d6eafe2d60caad97d8af46a7b951332bf6654b1ac151893f109e54f99368944c167fb8731ee33f6ae8a80dcabfcd931fcf5557d59a3beb959274a5ebb2cfc1024ea7947d76d25edecaaacf88feac084dd1e09a5d885e25460e84bc9362db4cae260293f64d332321ee30f79da9d4520567aa508dc2f59707d0d5e014a15ad3b6b9302b537a988473dc25059acbee9bf1b13b94eef59bd6830678d3587f79618a54f773041bcee818131654257529a4785e424f22c4db7e52a6183c168c2661948cbe5547c3c85aa5f316d9c46b4989352f7cd47bf44aa84987671b8a5ad5f500ce6c17b5f9905209d221eb7404893cbdb07d2bde27f3b8cbcec16f06dd8c44f92ea899ae1ad090eece2b6419ac3d9798d66141166e102ac28cafe9d35cae2aaffeda6a8784159b34987bf5e468ff0f75840c349679ededd7c8ee417c137d45df22b61d9dafce5d9ebb05b1c11f78756158d976704237a7a79e861b92c37974f437c8fd70edb08551ebfcec00956226bb2649713aff90cb716e13351c62f4b32d1a3aaa70574f9ac4c91a2ce25695bed7db2b45bb7a7f8cbc8a003519148dd69f1d14b5d8ec3bfaa94b61110698ce2d4add5037e7f3cce8cef9cc2056de1beb0ca05642171d2db07642bbcd9676964af0a15d0e27d5ca1bc36dd3a95e45f07dac1fded63b0f0356f908e079ac9a06e3e5441fadc34a6602d354c018ab1d433fffe3659fcdfc142c05e74ad9db7ddeb09a6de03ce3df527399d4feddc879293d18355a01fd0a22a6d57228d65e023309101c695ee198eda169e6a9af89d1c5fb5d3604c3e68a1805c475e606ba0a74599067addf39e05f53114819a7927526a3136988694dfd1adf8b44716f7d3b2bfedda50ada762fd80c841356adb5df849d1efbfbaaf3571c9c7c5395f67d7ef26c9087a6525bdf1792955981d71050a65cea9739070a92ad68569a76794be680793c095d14eb5d6048b1ea5311cd81b047316ab8cb8ecb3796d00c5fedb88c0bcaad47c5b1833ca9867395b8e04bef5d5edf45dee8a5256c8dfdb7aac605c74504be3f31465d66bd2fbb539c3c385dd2b5e778403dd5e8992c387351663c2035c7df81166a532d50ca3d97488a8b522fbcc55edf22375d8e6c54a9ca09a016933f4b14e036b9e6de5a4bae347a6732bc275a0ac268b648442cd5eac868f7e883bcaa2942d818ccf326194c28fb626b16b0e1d0c85ea6c76d0b3b8e202af57b12910e14d1bbc81a3e98e783dbaac32b58d6bc757e26a789b0131f76ad340d4d20e62d327f8ca8b9ad99a859403e499c4015e4b4fda216afd4fc674551b2b1c228440a029f98c32538b5651616d2d9a06a9e1ccf89e7bfe699d1c7b215d97e6f02207fe40b2db9d8e6b8f2971ab040dd6a0260a3e03ba0a7b2126346b36b119e13201dd97102a1b9d9398d7aae59db1881d29861f37b9a86006b2ba599a60a3e7f0a3315a86562f7f3637b914f7801e86599d46ca7c2f4147dd7340bae61ff196a82644051e76b170461e7691679c6ee48d89ecacdf4976e48e84b73d34e90b772680880970f11c9ed61ba4f670d4a6b9dc7a40457365ee48bff180778180ecf62236d02a3a5c2a4f9b12c60862901a4ca0f358b5859f2aa2d038e563e2cb8852907aede4cc6aca2e64817c1760f8868cd2739ac297776209cc93869975b904c853c26f7c11a427903b28cf8aee74c8f680d73942c52fb27596ebe5db18bbe2d70194e8302d901ab7494c08d9f78c1614100446a19bc8af8038961e17047b24ca58f59143696b163633e9569c29d20146168ad354d2151fe099a454e8dc1c87c2a07bf6e0282bc39eb6ecdc42a78d982f056ad833cf19982ba72d583b16f6d81452a93ce91b19b3dd34759cc83c0204a48033d9418e97b2c7b7ec1f9bbaa4b586f915b584565de8668e394c34dd009167b9a9edb88548e44fbbd9dc2dbccf8d5b23a7cf85444ca00c9a04ed548c7dd3ab771120a8a59eb645b9e85523b8c2d472f5ccebec709e97e4746929d67803c6adbee4fab1139d6249601da5414b968ff96b7a7d9a929a97821ca1de2184151aa6fa204e394611584d497b37d4574fb69aab69eadc8ae89ef5807e1692e81fc32c6b5c497a903ea63d958f4be11d6e896e892a763cf107360c0f95b9ba1e38dcaa360b6236cd085d1434640df0ea6d588a76d7c0a7c59e1754b3c1ea50b4acbad656252f0fe2102e1f41f084ce09697bdfa2cbd65413cd99a1824fdbd78e02af483d587dd6ac952f95141675cd411adbf980a491d0dd140d0afbd951ef9c58b9f8d9741007f122a855cb5a5ea1ccb8450d314648dada8a008bbd0819d3fb6cf0bc4b325853dfc85765cbbea366fc996d7224653e42832ff5527cbe13394f4869a1e2be131e313d22811346c709cc57c3996dc89c4de14d01d66f162641bee7d03673c8821dd8a24d93870168d8f65cf3c30db376a528d9495a370a14e8b1dbc08620aedb4c417fef71ca69edc80205df71404b477a8a53427c9a52859c0fc604f24e9e3af4e0cb9897c14e53e7236a50f6339142e4cb1ff2713e6b148b79e0b4a58f0e88db79a9e4f4fb3939e348d9928aa9373d438f14ac0004a267da7a9e784a94fb1ba3bb0b5410db2aacfaeb61aa0e69b5fbfa9e666585dfbae2bf71fc460c6e915cdb9c6ea8b4c40496bc7b0554a01d6f4c2c5fb2b25d476f1c2b34f6862d2a731b0828545cb3ac2f3a3d73c0b9dab93de5ec8ce5a77cc5965ece2b6d40ebeda11dcbbbee4c2bff243e5bf5882e4573effff4ed2e70bc6cd526999194c64d8dea9af18ad95af54593e21c42bec23847ce463b2e519b7bc3a68426664f934eea0f4d93f469820c3421de513a9c4faaec2809b01b42a3e44705f744a43189d0f5f1ef9bf714dd355d720e1a199317f46624e8db65ce977150a27c0ea4d9687483ada37ed55586432e28c3d206b640de03fec3a7350e5c8a0e721bce854fd0de23338984a4cafdb68abd364a9ab25e5883d8ceb9a0afb523c4f605683bc3d3555a5a762fffdc28dafa7786a76c02a91ba8a72acb29bb0d87134d9f2dffdd8892931b3f979176a46b4f0f21557cf0bf77d32a827662cc7038d396631cbf1f79761afc81688eb38fc900291f2a22dfe50fa234f9f8627353b4d0ba0c7291c54c7d9246fba0e22fac895771f3e773b4811cdb544db95f6161d930a29a7472caca32a81bdf865062944eb1f427d99bd4e09aa3bbb5163fa89cb48617b9e5ff2e7706c7b3c8d1a4d3fcd223b0e0d5b7079d7c656999b76469379c735337542e2d40341f</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":"<p>Flink 中 Time 和window</p>\n <a id=\"more\"></a>\n\n<h1 id=\"Flink-Time-amp-Window\"><a href=\"#Flink-Time-amp-Window\" class=\"headerlink\" title=\"Flink Time&amp;Window\"></a>Flink Time&amp;Window</h1><blockquote>\n<p>Flink擅长的是有状态的无界流的计算，无界流的计算与有界数据的计算的区别就在于，无界流因为没有终止点，所以它的运算也没有终止点，而有界流因为有终止边界，所以运算会有终止点。但无界流可以通过时间等参数进行窗口划分进行计算。所以这里就有了Flink两个重要的概念Time 与Window</p>\n</blockquote>\n<h2 id=\"1、Time\"><a href=\"#1、Time\" class=\"headerlink\" title=\"1、Time\"></a>1、Time</h2><h3 id=\"1-1-Flink中时间语义与水位线\"><a href=\"#1-1-Flink中时间语义与水位线\" class=\"headerlink\" title=\"1.1 Flink中时间语义与水位线\"></a>1.1 Flink中时间语义与水位线</h3><ol>\n<li>处理时间(Processing Time)<ol>\n<li>窗口任务处理这条数据时，当前的系统时间</li>\n</ol>\n</li>\n<li>事件时间(Event Time)<ol>\n<li>事件时间，是指每个事件在对应的设备上发生的时间，也就是数据生成的时间。</li>\n</ol>\n</li>\n<li>水位线(Watermarks)<ol>\n<li>由于分布式系统中网络传输延迟的不确定性，实际应用中我们要面对的 数据流往往是乱序的。在这种情况下，就不能简单地把数据自带的时间戳当作时钟了，而需要 用另外的标志来表示事件时间进展，在 Flink 中把它叫作事件时间的“水位线”(Watermarks)。</li>\n<li><strong>一般会采用事件时间语义。而水位线，就是基于事件时间􏰀出的概念.</strong></li>\n<li>用来衡量事 件时间(Event Time)进展的标记，就被称作“水位线”(Watermark)。</li>\n<li>具体实现上，水位线可以看作一条特殊的数据记录，它是插入到数据流中的一个标记点， 主要内容就是一个时间戳，用来指示当前的事件时间。而它插入流中的位置，就应该是在􏰁个 数据到来之后;这样就可以从这个数据中􏰀取时间戳，作为当前水位线的时间戳了。</li>\n<li>这里的思路其实跟TCP实现中的水位线原理相似，会专门对此进行一个对比。</li>\n</ol>\n</li>\n<li>摄入时间(Ingestion Time)<ol>\n<li>它是指数据进入 Flink 数据流的时间，也就是 Source 算子读入数据的时间。摄入时间相当于是 事件时间和处理时间的一个中和，它是把 Source 任务的处理时间，当作了数据的产生时间添 加到数据里。</li>\n<li>这样一来，水位线(watermark)也就基于这个时间直接生成，不需要单独指定 了。这种时间语义可以保证比较好的正确性，同时又不会引入太大的延迟。它的具体行为跟事 件时间非常像，可以当作特殊的事件时间来处理。</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"1-2-水位线\"><a href=\"#1-2-水位线\" class=\"headerlink\" title=\"1.2 水位线\"></a>1.2 水位线</h3><ol>\n<li><p><strong>有序流中的水位线</strong></p>\n<ol>\n<li>在理想状态下，数据应该按照它们生成的先后顺序、排好队进入流中;也就是说，它们处 理的过程会保持原先的顺序不变，遵守先来后到的原则。这样的话我们从每个数据中提取时间戳，就可以保证总是从小到大增长的，从而插入的水位线也会不断增长、事件时钟不断向前推 进。</li>\n</ol>\n</li>\n<li><p><strong>乱序流中的水位线</strong></p>\n</li>\n<li><p><strong>水位线的特性</strong></p>\n<ol>\n<li>水位线是插入到数据流中的一个标记，可以认为是一个特殊的数据</li>\n<li>水位线主要的内容是一个时间戳，用来表示当前事件时间的进展</li>\n<li>水位线是基于数据的时间戳生成的</li>\n<li>水位线的时间戳必须单调递增，以确保任务的事件时间时钟一直向前推进</li>\n<li>水位线可以通过设置延迟，来保证正确处理乱序数据</li>\n<li>一个水位线 Watermark(t)，表示在当前流中事件时间已经达到了时间戳 t, 这代表 t 之 前的所有数据都到齐了，之后流中不会出现时间戳 t’ ≤ t 的数据</li>\n</ol>\n</li>\n<li><p><strong>如何生成水位线</strong></p>\n<ol>\n<li><p>生成水位线的总体原则</p>\n</li>\n<li><p>水位线生成策略(Watermark Strategies)</p>\n<ol>\n<li><p>.assignTimestampsAndWatermarks()</p>\n<ol>\n<li><pre><code class=\"java\"><span class=\"function\"><span class=\"keyword\">public</span> SingleOutputStreamOperator&lt;T&gt; <span class=\"title\">assignTimestampsAndWatermarks</span><span class=\"params\">(</span></span>\n<span class=\"function\"><span class=\"params\">       WatermarkStrategy&lt;T&gt; watermarkStrategy)</span></span>\n<span class=\"function\"><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">2. &#96;&#96;&#96;java</span><br><span class=\"line\">   DataStream&lt;Event&gt; stream &#x3D; env.addSource(new ClickSource());</span><br><span class=\"line\">   DataStream&lt;Event&gt; withTimestampsAndWatermarks &#x3D;</span><br><span class=\"line\">   stream.assignTimestampsAndWatermarks(&lt;watermark strategy&gt;);</span><br></pre></td></tr></table></figure></span></code></pre>\n</li>\n<li><p>.assignTimestampsAndWatermarks()方法需要传入一个 WatermarkStrategy 作为参数,这就是所谓的“水位线生成策略”。WatermarkStrategy 中包含了一个“时间戳分配 器”TimestampAssigner 和一个“水位线生成器”WatermarkGenerator。</p>\n<ol>\n<li><pre><code class=\"java\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">WatermarkStrategy</span>&lt;<span class=\"title\">T</span>&gt;</span>\n<span class=\"class\">   <span class=\"keyword\">extends</span> <span class=\"title\">TimestampAssignerSupplier</span>&lt;<span class=\"title\">T</span>&gt;,</span>\n<span class=\"class\">          <span class=\"title\">WatermarkGeneratorSupplier</span>&lt;<span class=\"title\">T</span>&gt;</span>{\n<span class=\"meta\">@Override</span>\n   TimestampAssigner&lt;T&gt;\ncreateTimestampAssigner(TimestampAssignerSupplier.Context context);\n<span class=\"meta\">@Override</span>\nWatermarkGenerator&lt;T&gt;\ncreateWatermarkGenerator(WatermarkGeneratorSupplier.Context context);\n}\n&lt;!--￼<span class=\"number\">1</span>--&gt;\n\n<span class=\"number\">3</span>. 这里需要注意的是，时间戳和水位线的单位，必须都是毫秒。</code></pre>\n</li>\n<li><p>乱序流</p>\n<ol>\n<li><p>由于乱序流中需要等待迟到数据到齐，所以必须设置一个固定量的延迟时间(Fixed Amount of Lateness)。这时生成水位线的时间戳，就是当前数据流中最大的时间戳减去延迟的 结果，相当于把表调慢，当前时钟会滞后于数据的最大时间戳。调用 WatermarkStrategy. forBoundedOutOfOrderness()方法就可以实现。这个方法需要传入一个 maxOutOfOrderness 参 数，表示“最大乱序程度”，它表示数据流中乱序数据时间戳的最大差值;如果我们能确定乱序 程度，那么设置对应时间长度的延迟，就可以等到所有的乱序数据了</p>\n</li>\n<li><pre><code class=\"java\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WatermarkTest</span> </span>{\n   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>{\nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(<span class=\"number\">1</span>);\n       env\n.addSource(<span class=\"keyword\">new</span> ClickSource()) <span class=\"comment\">// 插入水位线的逻辑 .assignTimestampsAndWatermarks(</span>\n<span class=\"comment\">// 针对乱序流插入水位线，延迟时间设置为 5s</span>\nWatermarkStrategy.&lt;Event&gt;forBoundedOutOfOrderness(Duration.ofSeconds(<span class=\"number\">5</span>))\n                           .withTimestampAssigner(<span class=\"keyword\">new</span>\nSerializableTimestampAssigner&lt;Event&gt;() {\n<span class=\"comment\">// 抽取时间戳的逻辑</span>\nrecordTimestamp) {\n}) .print();\n       env.execute();\n   }\n}\n<span class=\"meta\">@Override</span>\n<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Event element, <span class=\"keyword\">long</span></span></span>\n<span class=\"function\"><span class=\"params\">   return element.timestamp;</span></span>\n<span class=\"function\"><span class=\"params\">}</span></span>\n<span class=\"function\"><span class=\"params\">&lt;!--￼<span class=\"number\">2</span>--&gt;</span></span></code></pre>\n</li>\n</ol>\n</li>\n<li><p><strong>自定义水位线策略</strong></p>\n<ol>\n<li><p>Flink 有两种不同的生成水位线的方式</p>\n<ol>\n<li>一种是周期性的(Periodic)</li>\n<li>另一种是断点式的(Punctuated)</li>\n<li>前者是在每个事件到来时调用，而后者由框架周期性调用。周期性调用的方法中发出水位线，自 然就是周期性生成水位线;而在事件触发的方法中发出水位线，自然就是断点式生成了</li>\n</ol>\n</li>\n<li><p>周期性水位线生成器(Periodic Generator)</p>\n<ol>\n<li><pre><code class=\"java\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> WatermarkStrategy&lt;Event&gt; {\n<span class=\"meta\">@Override</span>\n<span class=\"class\"><span class=\"keyword\">class</span></span>\n<span class=\"class\"><span class=\"title\">CustomWatermarkStrategy</span></span>\n<span class=\"class\"><span class=\"keyword\">implements</span></span>\n<span class=\"class\">.<span class=\"title\">assignTimestampsAndWatermarks</span>(<span class=\"title\">new</span> <span class=\"title\">CustomWatermarkStrategy</span>())</span>\n<span class=\"class\">.<span class=\"title\">print</span>()</span>;\n       <span class=\"keyword\">public</span>\ncreateTimestampAssigner(TimestampAssignerSupplier.Context context) {\n          <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SerializableTimestampAssigner&lt;Event&gt;() {\n             <span class=\"meta\">@Override</span>\nTimestampAssigner&lt;Event&gt;\n<span class=\"number\">135</span>{\n<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Event element, <span class=\"keyword\">long</span> recordTimestamp)</span></span>\n<span class=\"function\">return element.timestamp</span>; <span class=\"comment\">// 告诉程序数据源里的时间戳是哪一个字段 }</span>\n}; }\n<span class=\"meta\">@Override</span>\n       <span class=\"keyword\">public</span>\ncreateWatermarkGenerator(WatermarkGeneratorSupplier.Context context) {\n          <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> CustomPeriodicGenerator();\nWatermarkGenerator&lt;Event&gt;\n} }\n<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CustomPeriodicGenerator</span> <span class=\"keyword\">implements</span> <span class=\"title\">WatermarkGenerator</span>&lt;<span class=\"title\">Event</span>&gt; </span>{\n<span class=\"keyword\">private</span> Long delayTime = <span class=\"number\">5000L</span>; <span class=\"comment\">// 延迟时间</span>\n<span class=\"keyword\">private</span> Long maxTs = Long.MIN_VALUE + delayTime + <span class=\"number\">1L</span>; <span class=\"comment\">// 观察到的最大时间戳</span>\n<span class=\"meta\">@Override</span>\n<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onEvent</span><span class=\"params\">(Event event, <span class=\"keyword\">long</span> eventTimestamp, WatermarkOutput output)</span> </span>{\n<span class=\"comment\">// 每来一条数据就调用一次</span>\nmaxTs = Math.max(event.timestamp, maxTs); <span class=\"comment\">// 更新最大时间戳 }</span>\n       <span class=\"meta\">@Override</span>\n       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPeriodicEmit</span><span class=\"params\">(WatermarkOutput output)</span> </span>{\n<span class=\"comment\">// 发射水位线，默认 200ms 调用一次</span>\n          output.emitWatermark(<span class=\"keyword\">new</span> Watermark(maxTs - delayTime - <span class=\"number\">1L</span>));\n       }\n} }\n&lt;!--￼<span class=\"number\">3</span>--&gt;\n   <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CustomPunctuatedGenerator</span> <span class=\"keyword\">implements</span> <span class=\"title\">WatermarkGenerator</span>&lt;<span class=\"title\">Event</span>&gt; </span>{\n   <span class=\"number\">136</span><span class=\"meta\">@Override</span>\n   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onEvent</span><span class=\"params\">(Event r, <span class=\"keyword\">long</span> eventTimestamp, WatermarkOutput output)</span> </span>{\n   <span class=\"comment\">// 只有在遇到特定的 itemId 时，才发出水位线 if (r.user.equals(\"Mary\")) {</span>\n          output.emitWatermark(<span class=\"keyword\">new</span> Watermark(r.timestamp - <span class=\"number\">1</span>));\n      }\n   }\n   <span class=\"meta\">@Override</span>\n   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPeriodicEmit</span><span class=\"params\">(WatermarkOutput output)</span> </span>{\n   <span class=\"comment\">// 不需要做任何事情，因为我们在 onEvent 方法中发射了水位线</span>\n   } }\n   &lt;!--￼<span class=\"number\">4</span>--&gt;\n\n                         <span class=\"number\">5</span>. **水位线的传递**\n\n                                      <span class=\"number\">1</span>. 简而言之，向左取最小\n\n                         <span class=\"number\">6</span>. **水位线的总结**\n</code></pre>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"1-3-窗口\"><a href=\"#1-3-窗口\" class=\"headerlink\" title=\"1.3 窗口\"></a>1.3 窗口</h4><ol>\n<li><p><strong>窗口分类</strong></p>\n<ol>\n<li><p><strong>按照驱动类型分类</strong></p>\n<ol>\n<li><p>时间窗口(<strong>Time Window</strong>)</p>\n<ol>\n<li><p>时间窗口以时间点来定义窗口的开始(start)和结束(end)，所以截取出的就是􏰂一时间</p>\n<p>段的数据。到达结束时间时，窗口不再收集数据，触发计算输出结果，并将窗口关闭销毁。所 以可以说基本思路就是“定点发车”。</p>\n</li>\n<li><p>Flink 中有一个专门的类来表示时间窗口，名称就叫作 TimeWindow。这个类只有两个私 有属性:start 和 end，表示窗口的开始和结束的时间戳，单位为毫秒。</p>\n</li>\n<li><pre><code>public long maxTimestamp() {\n  return end - 1;\n}\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">          4. 如上有一个问题，为什么要 减1 ，后面专项分析解答。</span><br><span class=\"line\"></span><br><span class=\"line\">       2. 计数窗口(**Count Window**)</span><br><span class=\"line\"></span><br><span class=\"line\">          1. 计数窗口基于元素的个数来截取数据，到达固定的个数时就触发计算并关闭窗口。这相当</span><br><span class=\"line\"></span><br><span class=\"line\">             于座位有限、“人满就发车”，是否发车与时间无关。每个窗口截取数据的个数，就是窗口的大 小。</span><br><span class=\"line\"></span><br><span class=\"line\">2. **按照窗口分配数据的规则分类**</span><br><span class=\"line\"></span><br><span class=\"line\">   1. 滚动窗口(Tumbling Window)</span><br><span class=\"line\">   2. 滑动窗口(Sliding Window)</span><br><span class=\"line\">   3. 会话窗口(Session Window)</span><br><span class=\"line\">   4. 全局窗口(Global Window)</span><br><span class=\"line\"></span><br><span class=\"line\">3. window 使用API</span><br><span class=\"line\"></span><br><span class=\"line\">   1. 按键分区(Keyed)和非按键分区(Non-Keyed)</span><br><span class=\"line\"></span><br><span class=\"line\">      1. 在调用窗口算子之前， 是否有 keyBy 操作.</span><br><span class=\"line\"></span><br><span class=\"line\">         1. 按键分区窗口(Keyed Windows)</span><br><span class=\"line\"></span><br><span class=\"line\">         2. 经过按键分区 keyBy 操作后，数据流会按照 key 被分为多条逻辑流(logical streams)，这就是 KeyedStream。基于 KeyedStream 进行窗口操作时, 窗口计算会在多个并行子任务上同时 执行。相同 key 的数据会被发送到同一个并行子任务，而窗口操作会基于每个 key 进行单独的 处理。所以可以认为，每个 key 上都定义了一组窗口，各自独立地进行统计计算。</span><br><span class=\"line\"></span><br><span class=\"line\">         3. &#96;&#96;&#96;java</span><br><span class=\"line\">            stream.keyBy(...)</span><br><span class=\"line\">                  .window(...)</span><br></pre></td></tr></table></figure></code></pre></li>\n</ol>\n</li>\n<li><p>非按键分区(Non-Keyed Windows)</p>\n<ol>\n<li><p>如果没有进行 keyBy，那么原始的 DataStream 就不会分成多条逻辑流。这时窗口逻辑只</p>\n<p>能在一个任务(task)上执行，就相当于并行度变成了 1。所以在实际应用中一般不推荐使用 这种方式。</p>\n</li>\n<li><pre><code class=\"java\">stream.windowAll(...)\n&lt;!--￼<span class=\"number\">6</span>--&gt;\n\n                         <span class=\"number\">2</span>. ```\n                .window(TumblingProcessingTimeWindows.of(Time.days(<span class=\"number\">1</span>), Time.hours(-<span class=\"number\">8</span>)))\n                &lt;!--￼<span class=\"number\">7</span>--&gt;\n\n                  <span class=\"number\">3</span>. 处理时间会话窗口\n\n                         <span class=\"number\">1</span>. ```java\n                stream.keyBy(...)\n                .window(ProcessingTimeSessionWindows.withGap(Time.seconds(<span class=\"number\">10</span>)))\n                .aggregate(...)\n                &lt;!--￼<span class=\"number\">8</span>--&gt;\n\n                  <span class=\"number\">4</span>. 滚动事件时间窗口\n\n                         <span class=\"number\">1</span>. ```java\n                stream.keyBy(...)\n                .window(TumblingEventTimeWindows.of(Time.seconds(<span class=\"number\">5</span>)))\n                .aggregate(...)\n\n                &lt;!--￼<span class=\"number\">9</span>--&gt;\n\n                  <span class=\"number\">6</span>. 事件时间会话窗口\n\n                         <span class=\"number\">1</span>. ```java\n                stream.keyBy(...)\n                  .window(EventTimeSessionWindows.withGap(Time.seconds(<span class=\"number\">10</span>)))\n                  .aggregate(...)\n                &lt;!--￼<span class=\"number\">10</span>--&gt;\n\n                  <span class=\"number\">2</span>. 滑动计数窗口\n\n                         <span class=\"number\">1</span>. ```java\n                stream.keyBy(...) .countWindow(<span class=\"number\">10</span>，<span class=\"number\">3</span>)\n                &lt;!--￼<span class=\"number\">11</span>--&gt;\n                stream.keyBy(...)\n                     .window(GlobalWindows.create());\n                &lt;!--￼<span class=\"number\">12</span>--&gt;\n</code></pre>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"窗口函数\"><a href=\"#窗口函数\" class=\"headerlink\" title=\"窗口函数\"></a>窗口函数</h4><ol>\n<li><p>归约函数(<strong>ReduceFunction</strong>)</p>\n<ol>\n<li><p>窗口的归约聚合也非常类似，就是将窗口中收集到的数据两两进行归约。当我们进行流处 理时，就是要保存一个状态;每来一个新的数据，就和之前的聚合状态做归约，这样就实现了 增量式的聚合。</p>\n</li>\n<li><p>窗口函数中也􏰀供了 ReduceFunction:只要基于 WindowedStream 调用.reduce()方法，然 后传入 ReduceFunction 作为参数，就可以指定以归约两个元素的方式去对窗口中数据进行聚 合了。这里的 ReduceFunction 其实与简单聚合时用到的 ReduceFunction 是同一个函数类接口， 所以使用方式也是完全一样的。</p>\n</li>\n<li><pre><code class=\"java\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WindowReduceExample</span> </span>{\n   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>{\nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(<span class=\"number\">1</span>);\n<span class=\"comment\">// 从自定义数据源读取数据，并提取时间戳、生成水位线 SingleOutputStreamOperator&lt;Event&gt; stream = env.addSource(new</span>\nClickSource())\n               .assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forBoun\ndedOutOfOrderness(Duration.ZERO)\n{\n{\nLong&gt;&gt;() {\n.withTimestampAssigner(<span class=\"keyword\">new</span> SerializableTimestampAssigner&lt;Event&gt;()\n<span class=\"meta\">@Override</span>\n<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Event element, <span class=\"keyword\">long</span> recordTimestamp)</span></span>\n<span class=\"function\">       return element.timestamp</span>;\n   }\n})); stream.map(<span class=\"keyword\">new</span> MapFunction&lt;Event, Tuple2&lt;String,\n<span class=\"meta\">@Override</span>\n<span class=\"function\"><span class=\"keyword\">public</span> Tuple2&lt;String, Long&gt; <span class=\"title\">map</span><span class=\"params\">(Event value)</span> <span class=\"keyword\">throws</span> Exception </span>{\n<span class=\"comment\">// 将数据转换成二元组，方便计算</span>\n       <span class=\"keyword\">return</span> Tuple2.of(value.user, <span class=\"number\">1L</span>);\n   }\n})\n             .keyBy(r -&gt; r.f0)\n<span class=\"comment\">// 设置滚动事件时间窗口 .window(TumblingEventTimeWindows.of(Time.seconds(5))) .reduce(new ReduceFunction&lt;Tuple2&lt;String, Long&gt;&gt;() {</span>\n<span class=\"meta\">@Override</span>\n<span class=\"function\"><span class=\"keyword\">public</span> Tuple2&lt;String, Long&gt; <span class=\"title\">reduce</span><span class=\"params\">(Tuple2&lt;String, Long&gt; value1, Tuple2&lt;String, Long&gt; value2)</span> <span class=\"keyword\">throws</span> Exception </span>{\n<span class=\"comment\">// 定义累加规则，窗口闭合时，向下游发送累加结果</span>\n                    <span class=\"keyword\">return</span> Tuple2.of(value1.f0, value1.f1 + value2.f1);\n                 }\n})\n<span class=\"number\">154</span>.print();\n       env.execute();\n   }\n}\n&lt;!--￼<span class=\"number\">13</span>--&gt;</code></pre>\n</li>\n<li><p>AggregateFunction 可以看作是 ReduceFunction 的通用版本，这里有三种类型:输入类型 (IN)、累加器类型(ACC)和输出类型(OUT)。输入类型 IN 就是输入流中元素的数据类型;累加器类型 ACC 则是我们进行聚合的中间状态类型;而输出类型当然就是最终计算结果的类 型了。</p>\n</li>\n<li><p>接口中有四个方法:</p>\n<ol>\n<li>createAccumulator():创建一个累加器，这就是为聚合创建了一个初始状态，每个聚 合任务只会调用一次。</li>\n<li>add():将输入的元素添加到累加器中。这就是基于聚合状态，对新来的数据进行进 一步聚合的过程。方法传入两个参数:当前新到的数据 value，和当前的累加器 accumulator;返回一个新的累加器值，也就是对聚合状态进行更新。每条数据到来之 后都会调用这个方法。</li>\n<li>add():将输入的元素添加到累加器中。这就是基于聚合状态，对新来的数据进行进 一步聚合的过程。方法传入两个参数:当前新到的数据 value，和当前的累加器 accumulator;返回一个新的累加器值，也就是对聚合状态进行更新。每条数据到来之 后都会调用这个方法。</li>\n<li>merge():合并两个累加器，并将合并后的状态作为一个累加器返回。这个方法只在 需要合并窗口的场景下才会被调用;最常见的合并窗口(Merging Window)的场景 就是会话窗口(Session Windows)。</li>\n</ol>\n</li>\n<li><p>AggregateFunction 的工作原理是:首先调用 createAccumulator()为任务初 始化一个状态(累加器);而后每来一个数据就调用一次 add()方法，对数据进行聚合，得到的 结果保存在状态中;等到了窗口需要输出时，再调用 getResult()方法得到计算结果。很明显， 与 ReduceFunction 相同，AggregateFunction 也是增量式的聚合;而由于输入、中间状态、输 出的类型可以不同，使得应用更加灵活方便</p>\n<ol>\n<li><pre><code class=\"java\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WindowAggregateFunctionExample</span> </span>{\n   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>{\nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(<span class=\"number\">1</span>);\nSingleOutputStreamOperator&lt;Event&gt; stream = env.addSource(<span class=\"keyword\">new</span> ClickSource())\n               .assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forMono\ntonousTimestamps()\n{\n{\n.withTimestampAssigner(<span class=\"keyword\">new</span> SerializableTimestampAssigner&lt;Event&gt;()\n<span class=\"meta\">@Override</span>\n<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Event element, <span class=\"keyword\">long</span> recordTimestamp)</span></span>\n<span class=\"function\">             return element.timestamp</span>;\n          }\n}));\n<span class=\"comment\">// 所有数据设置相同的 key，发送到同一个分区统计 PV 和 UV，再相除 stream.keyBy(data -&gt; true)</span>\n       .window(SlidingEventTimeWindows.of(Time.seconds(<span class=\"number\">10</span>),\nTime.seconds(<span class=\"number\">2</span>)))\n             .aggregate(<span class=\"keyword\">new</span> AvgPv())\n.print();\n       env.execute();\n   }\n<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AvgPv</span> <span class=\"keyword\">implements</span> <span class=\"title\">AggregateFunction</span>&lt;<span class=\"title\">Event</span>, <span class=\"title\">Tuple2</span>&lt;<span class=\"title\">HashSet</span>&lt;<span class=\"title\">String</span>&gt;, <span class=\"title\">Long</span>&gt;, <span class=\"title\">Double</span>&gt; </span>{\n       <span class=\"meta\">@Override</span>\n       <span class=\"keyword\">public</span> Tuple2&lt;HashSet&lt;String&gt;, Long&gt; createAccumulator() {\n<span class=\"number\">157</span><span class=\"comment\">// 创建累加器</span>\n          <span class=\"keyword\">return</span> Tuple2.of(<span class=\"keyword\">new</span> HashSet&lt;String&gt;(), <span class=\"number\">0L</span>);\n       }\n<span class=\"meta\">@Override</span>\n<span class=\"keyword\">public</span> Tuple2&lt;HashSet&lt;String&gt;, Long&gt; add(Event value, Tuple2&lt;HashSet&lt;String&gt;, Long&gt; accumulator) {\n<span class=\"comment\">// 属于本窗口的数据来一条累加一次，并返回累加器 accumulator.f0.add(value.user);</span>\n<span class=\"keyword\">return</span> Tuple2.of(accumulator.f0, accumulator.f1 + <span class=\"number\">1L</span>);\n}\n       <span class=\"meta\">@Override</span>\n       <span class=\"function\"><span class=\"keyword\">public</span> Double <span class=\"title\">getResult</span><span class=\"params\">(Tuple2&lt;HashSet&lt;String&gt;, Long&gt; accumulator)</span> </span>{\n<span class=\"comment\">// 窗口闭合时，增量聚合结束，将计算结果发送到下游</span>\n          <span class=\"keyword\">return</span> (<span class=\"keyword\">double</span>) accumulator.f1 / accumulator.f0.size();\n       }\n<span class=\"meta\">@Override</span>\n<span class=\"keyword\">public</span> Tuple2&lt;HashSet&lt;String&gt;, Long&gt; merge(Tuple2&lt;HashSet&lt;String&gt;, Long&gt; a, Tuple2&lt;HashSet&lt;String&gt;, Long&gt; b) {\n          <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;\n       }\n} }\n&lt;!--￼<span class=\"number\">14</span>--&gt;\n\n<span class=\"number\">3</span>. 这个类中可以获取到包含窗口所有数据的可迭代集合(Iterable)，还可以拿到窗口 (Window)本身的信息。WindowFunction 接口在源码中实现如下:\n\n<span class=\"number\">4</span>. ```java\n   <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">WindowFunction</span>&lt;<span class=\"title\">IN</span>, <span class=\"title\">OUT</span>, <span class=\"title\">KEY</span>, <span class=\"title\">W</span> <span class=\"keyword\">extends</span> <span class=\"title\">Window</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Function</span>, <span class=\"title\">Serializable</span> </span>{\n   <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">(KEY key, W window, Iterable&lt;IN&gt; input, Collector&lt;OUT&gt; out)</span> <span class=\"keyword\">throws</span> Exception</span>;\n   }\n   &lt;!--￼<span class=\"number\">15</span>--&gt;\n\n<span class=\"number\">5</span>. 这里我们使用的是事件时间语义。定义 <span class=\"number\">10</span> 秒钟的滚动事件窗口后，直接使用 ProcessWindowFunction 来定义处理的逻辑。我们可以创建一个 HashSet，将窗口所有数据的 userId 写入实现去重，最终得到 HashSet 的元素个数就是 UV 值。\n\n   当然，这里我们并没有用到上下文中其他信息，所以其实没有必要使用 ProcessWindowFunction。全窗口函数因为运行效率较低，很少直接单独使用，往往会和增量 聚合函数结合在一起，共同实现窗口的处理计算。</code></pre>\n</li>\n<li><p><strong>增量聚合和全窗口函数的结合使用</strong></p>\n<ol>\n<li><p>增量聚合函数处理计算会更高效。举一个最简单的例子，对一组数据求和。大量的数据连 续不断到来，全窗口函数只是把它们收集缓存起来，并没有处理;到了窗口要关闭、输出结果 的时候，再遍历所有数据依次叠加，得到最终结果。而如果我们采用增量聚合的方式，那么只 需要保存一个当前和的状态，每个数据到来时就会做一次加法，更新状态;到了要输出结果的 时候，只要将当前状态直接拿出来就可以了。增量聚合相当于把计算量“均摊”到了窗口收集 数据的过程中，自然就会比全窗口聚合更加高效、输出更加实时。</p>\n</li>\n<li><p>而全窗口函数的优势在于􏰀供了更多的信息，可以认为是更加“通用”的窗口操作。它只 负责收集数据、提供上下文相关信息，把所有的原材料都准备好，至于拿来做什么我们完全可 以任意发挥。这就使得窗口计算更加灵活，功能更加强大。</p>\n</li>\n<li><p>我们之前在调用 WindowedStream 的.reduce()和.aggregate()方法时，只是简单地直接传入 了一个 ReduceFunction 或 AggregateFunction 进行增量聚合。除此之外，其实还可以传入第二 个参数:一个全窗口函数，可以是 WindowFunction 或者 ProcessWindowFunction。</p>\n</li>\n<li><pre><code class=\"java\"><span class=\"comment\">// ReduceFunction 与 WindowFunction 结合</span>\n<span class=\"keyword\">public</span> &lt;R&gt; <span class=\"function\">SingleOutputStreamOperator&lt;R&gt; <span class=\"title\">reduce</span><span class=\"params\">(</span></span>\n<span class=\"function\"><span class=\"params\">       ReduceFunction&lt;T&gt; reduceFunction, WindowFunction&lt;T, R, K, W&gt; function)</span></span>\n<span class=\"function\"><span class=\"comment\">// ReduceFunction 与 ProcessWindowFunction 结合</span></span>\n<span class=\"function\"><span class=\"keyword\">public</span> &lt;R&gt; SingleOutputStreamOperator&lt;R&gt; <span class=\"title\">reduce</span><span class=\"params\">(</span></span>\n<span class=\"function\"><span class=\"params\">ReduceFunction&lt;T&gt; reduceFunction, ProcessWindowFunction&lt;T, R, K, W&gt;</span></span>\n<span class=\"function\"><span class=\"params\">function)</span></span>\n<span class=\"function\"><span class=\"comment\">// AggregateFunction 与 WindowFunction 结合</span></span>\n<span class=\"function\"><span class=\"keyword\">public</span> &lt;ACC, V, R&gt; SingleOutputStreamOperator&lt;R&gt; <span class=\"title\">aggregate</span><span class=\"params\">(</span></span>\n<span class=\"function\"><span class=\"params\"><span class=\"number\">162</span>AggregateFunction&lt;T, ACC, V&gt; aggFunction, WindowFunction&lt;V, R, K, W&gt; windowFunction)</span></span>\n<span class=\"function\"><span class=\"comment\">// AggregateFunction 与 ProcessWindowFunction 结合</span></span>\n<span class=\"function\"><span class=\"keyword\">public</span> &lt;ACC, V, R&gt; SingleOutputStreamOperator&lt;R&gt; <span class=\"title\">aggregate</span><span class=\"params\">(</span></span>\n<span class=\"function\"><span class=\"params\">       AggregateFunction&lt;T, ACC, V&gt; aggFunction,</span></span>\n<span class=\"function\"><span class=\"params\">       ProcessWindowFunction&lt;V, R, K, W&gt; windowFunction)</span></span>\n<span class=\"function\"><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">5. &#96;&#96;&#96;java</span><br><span class=\"line\">   public class UrlViewCountExample &#123;</span><br><span class=\"line\">      public static void main(String[] args) throws Exception &#123;</span><br><span class=\"line\">   StreamExecutionEnvironment env &#x3D; StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\">          env.setParallelism(1);</span><br><span class=\"line\">   SingleOutputStreamOperator&lt;Event&gt; stream &#x3D; env.addSource(new ClickSource())</span><br><span class=\"line\">                .assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forMonot</span><br><span class=\"line\">   onousTimestamps()</span><br><span class=\"line\">   163                     .withTimestampAssigner(new</span><br><span class=\"line\">   SerializableTimestampAssigner&lt;Event&gt;() &#123;</span><br><span class=\"line\">   recordTimestamp) &#123;</span><br><span class=\"line\">   @Override</span><br><span class=\"line\">   public long extractTimestamp(Event element, long</span><br><span class=\"line\">          return element.timestamp;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;));</span><br><span class=\"line\">    &#x2F;&#x2F; 需要按照 url 分组，开滑动窗口统计 stream.keyBy(data -&gt; data.url)</span><br><span class=\"line\">                .window(SlidingEventTimeWindows.of(Time.seconds(10),</span><br><span class=\"line\">   Time.seconds(5)))</span><br><span class=\"line\">   &#x2F;&#x2F; 同时传入增量聚合函数和全窗口函数</span><br><span class=\"line\">   .aggregate(new UrlViewCountAgg(), new UrlViewCountResult()) .print();</span><br><span class=\"line\">          env.execute();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#x2F;&#x2F; 自定义增量聚合函数，来一条数据就加一</span><br><span class=\"line\">   public static class UrlViewCountAgg implements AggregateFunction&lt;Event, Long,</span><br><span class=\"line\">   Long&gt; &#123;</span><br><span class=\"line\">          @Override</span><br><span class=\"line\">          public Long createAccumulator() &#123;</span><br><span class=\"line\">    return 0L; &#125;</span><br><span class=\"line\">   @Override</span><br><span class=\"line\">   public Long add(Event value, Long accumulator) &#123;</span><br><span class=\"line\">      return accumulator + 1;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   @Override</span><br><span class=\"line\">   164</span><br><span class=\"line\">   public Long getResult(Long accumulator) &#123;</span><br><span class=\"line\">      return accumulator;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   @Override</span><br><span class=\"line\">   public Long merge(Long a, Long b) &#123;</span><br><span class=\"line\">      return null;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   &#x2F;&#x2F; 自定义窗口处理函数，只需要包装窗口信息</span><br><span class=\"line\">   public static class UrlViewCountResult extends ProcessWindowFunction&lt;Long,</span><br><span class=\"line\">   UrlViewCount, String, TimeWindow&gt; &#123;</span><br><span class=\"line\">   @Override</span><br><span class=\"line\">   public void process(String url, Context context, Iterable&lt;Long&gt; elements, Collector&lt;UrlViewCount&gt; out) throws Exception &#123;</span><br><span class=\"line\">   end)); &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   &#x2F;&#x2F; 结合窗口信息，包装输出内容</span><br><span class=\"line\">   Long start &#x3D; context.window().getStart();</span><br><span class=\"line\">   Long end &#x3D; context.window().getEnd();</span><br><span class=\"line\">   &#x2F;&#x2F; 迭代器中只有一个元素，就是增量聚合函数的计算结果</span><br><span class=\"line\">   out.collect(new UrlViewCount(url, elements.iterator().next(), start,</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></span>\n<span class=\"function\"></span></code></pre>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"其他API\"><a href=\"#其他API\" class=\"headerlink\" title=\"其他API\"></a>其他API</h3><p><strong>1. 触发器(Trigger)</strong></p>\n<ol>\n<li><p>触发器主要是用来控制窗口什么时候触发计算。所谓的“触发计算”，本质上就是执行窗 口函数，所以可以认为是计算得到结果并输出的过程</p>\n</li>\n<li><p>基于 WindowedStream 调用.trigger()方法，就可以传入一个自定义的窗口触发器(Trigger)。</p>\n</li>\n<li><pre><code class=\"java\">stream.keyBy(...)\n      .window(...)\n      .trigger(<span class=\"keyword\">new</span> MyTrigger())\n&lt;!--￼<span class=\"number\">17</span>--&gt;</code></pre>\n</li>\n<li><p><strong>移除器(Evictor)</strong></p>\n<ol>\n<li><p>移除器主要用来定义移除􏰂些数据的逻辑。基于 WindowedStream 调用.evictor()方法，就 可以传入一个自定义的移除器(Evictor)。Evictor 是一个接口，不同的窗口类型都有各自预实 现的移除器。</p>\n</li>\n<li><pre><code class=\"java\">stream.keyBy(...)\n      .window(...)\n      .evictor(<span class=\"keyword\">new</span> MyEvictor())\n&lt;!--￼<span class=\"number\">18</span>--&gt;\n   stream.keyBy(...)\n         .window(TumblingEventTimeWindows.of(Time.hours(<span class=\"number\">1</span>)))\n         .allowedLateness(Time.minutes(<span class=\"number\">1</span>))\n   &lt;!--￼<span class=\"number\">19</span>--&gt;\n</code></pre>\n</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"窗口的生命周期\"><a href=\"#窗口的生命周期\" class=\"headerlink\" title=\"窗口的生命周期\"></a>窗口的生命周期</h3><ol>\n<li><p>窗口的创建</p>\n<ol>\n<li><p>窗口的类型和基本信息由窗口分配器(window assigners)指定，但窗口不会预先创建好，</p>\n<p>而是由数据驱动创建。当第一个应该属于这个窗口的数据元素到达时，就会创建对应的窗口。</p>\n</li>\n</ol>\n</li>\n<li><p>窗口计算的触发</p>\n</li>\n<li><p>窗口的销毁</p>\n</li>\n</ol>\n","encrypt":true},{"title":"Flink_Process_Function","date":"2023-02-28T08:24:56.347Z","password":"7FKBKZrTTTPG2LnC","_content":"\n本文讲解的是Flink 分层api中低层的api， process函数的使用\n\n <!--more-->\n\n# 处理函数\n\n\n\n> 在分层的底层，我们可以不定义任何具体的算子，如map、filter、或者window。只是提炼出了一个处理操作(process)。它是所有转换算子的一个概括性的表达，可以自定义处理逻辑，所以这一层接口就被叫作“处理函数”(process function)\n\n## 1、基本处理函数\n\n### 1.1 处理函数的功能和使用\n\n处理函数􏰀供了一个“定时服务” (TimerService)，我们可以通过它访问流中的事件(event)、时间戳(timestamp)、水位线 (watermark)，甚至可以注册“定时事件”。而且处理函数继承了 AbstractRichFunction 抽象类，所以拥有富函数类的所有特性，同样可以访问状态(state)和其他运行时信息。此外，处理函 数还可以直接将数据输出到侧输出流(side output)中。所以，处理函数是最为灵活的处理方 法，可以实现各种自定义的业务逻辑;同时也是整个 DataStream API 的底层基础。\n\n处理函数的使用与基本的转换操作类似，只需要直接基于 DataStream 调用.process()方法 就可以了。方法需要传入一个 ProcessFunction 作为参数，用来定义处理逻辑。\n\n```\n stream.process(new MyProcessFunction())\n```\n\n这里 ProcessFunction 不是接口，而是一个抽象类，继承了 AbstractRichFunction; MyProcessFunction 是它的一个具体实现。所以所有的处理函数，都是富函数(RichFunction)， 富函数可以调用的东西这里同样都可以调用。\n```java\npackage sunrise.demo.function.process;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.flink.streaming.api.functions.ProcessFunction;\nimport org.apache.flink.util.Collector;\nimport sunrise.demo.pojo.CarInfo;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2023/2/16\n * @desc\n */\n@Slf4j\npublic class ProcessFunctionDemo extends ProcessFunction<CarInfo,CarInfo> {\n    @Override\n    public void processElement(CarInfo carinfo, ProcessFunction<CarInfo, CarInfo>.Context context, Collector<CarInfo> collector) throws Exception {\n        String carNumber = carinfo.getCarNumber();\n        Integer number = Integer.valueOf(carNumber.replace(\"carNo-\", \"\"));\n        Integer speed = Integer.valueOf(carinfo.getCarSpeed());\n        if (number > 55 && speed > 80) {\n            //限定了车牌和车速\n            collector.collect(carinfo);\n        }\n    }\n}\n\n```\n\n### ProcessFunction 解析\n\n内部单独定义了两个方法:一个是必须要实现的抽象方法.processElement();另一个是非 抽象方法.onTimer()。\n\n1. 抽象方法.processElement()\n   1. 用于“处理元素”，定义了处理的核心逻辑。这个方法对于流中的每个元素都会调用一次， 参数包括三个:输入数据值 value，上下文 ctx，以及“收集器”(Collector)out。方法没有返 回值，处理之后的输出数据是通过收集器 out 来定义的。\n   2. value:当前流中的输入元素，也就是正在处理的数据，类型与流中数据类 型一致。\n   3. ctx:类型是ProcessFunction中定义的内部抽象类Context，表示当前运行的 上下文，可以获取到当前的时间戳，并􏰀供了用于查询时间和注册定时器的“定时服 务”(TimerService)，以及可以将数据发送到“侧输出流”(side output)的方法.output()。\n   4. out:“收集器”(类型为Collector)，用于返回输出数据。使用方式与flatMap 算子中的收集器完全一样，直接调用 out.collect()方法就可以向下游发出一个数据。 这个方法可以多次调用，也可以不调用。\n   5. 而通过富函数􏰀供的获取上下文方法.getRuntimeContext()， 也可以自定义状态(state)进行处理，\n2. 非抽象方法.onTimer()\n   1. 用于定义定时触发的操作，这是一个非常强大、也非常有趣的功能。这个方法只有在注册 好的定时器触发的时候才会调用，而定时器是通过“定时服务”TimerService 来注册的\n   2. 打个 比方，注册定时器(timer)就是设了一个闹钟，到了设定时间就会响;而.onTimer()中定义的， 就是闹钟响的时候要做的事。所以它本质上是一个基于时间的“回调”(callback)方法，通过 时间的进展来触发\n   3. 定时方法.onTimer()也有三个参数:时间戳(timestamp)，上下 文(ctx)，以及收集器(out)。这里的 timestamp 是指设定好的触发时间，事件时间语义下当然就是水位线了。另外这里同样有上下文和收集器，所以也可以调用定时服务(TimerService)， 以及任意输出处理之后的数据。\n   4. 我们也可以看到，处理函数都是基于事件触发的。水位线就如同插入流中的一条数据一样; 只不过处理真正的数据事件调用的是.processElement()方法，而处理水位线事件调用的 是.onTimer()。\n   5. 我们也可以看到，处理函数都是基于事件触发的。水位线就如同插入流中的一条数据一样; 只不过处理真正的数据事件调用的是.processElement()方法，而处理水位线事件调用的 是.onTimer()。\n\n### 处理函数的分类\n\n我们知道，DataStream 在调用一些转换方法之后，有可能生成新的流类型;例如调 用.keyBy()之后得到 KeyedStream，进而再调用.window()之后得到 WindowedStream。对于不同 类型的流，其实都可以直接调用.process()方法进行自定义处理，这时传入的参数就都叫作处理 函数\n\nFlink 提供了 8 个不同的处理函数\n\n1. ProcessFunction\n\n   1. ```java\n      最基本的处理函数，基于 DataStream 直接调用.process()时作为参数传入。\n      ```\n\n2. KeyedProcessFunction\n\n   1. 对流按键分区后的处理函数，基于 KeyedStream 调用.process()时作为参数传入。要想使用 定时器，比如基于 KeyedStream。\n\n3. ProcessWindowFunction\n\n   1. 开窗之后的处理函数，也是全窗口函数的代表。基于 WindowedStream 调用.process()时作 为参数传入。\n\n4. ProcessAllWindowFunction\n\n   1. 同样是开窗之后的处理函数，基于 AllWindowedStream 调用.process()时作为参数传入。\n\n5. CoProcessFunction\n\n   1. 合并(connect)两条流之后的处理函数，基于 ConnectedStreams 调用.process()时作为参 数传入。关于流的连接合并操作\n\n6. ProcessJoinFunction\n\n   1. 间隔连接(interval join)两条流之后的处理函数，基于 IntervalJoined 调用.process()时作为 参数传入。\n\n7. BroadcastProcessFunction\n\n   1. 广播连接流处理函数，基于 BroadcastConnectedStream 调用.process()时作为参数传入。这 里的“广播连接流”BroadcastConnectedStream，是一个未 keyBy 的普通 DataStream 与一个广 播流(BroadcastStream)做连接(conncet)之后的产物。\n\n8. KeyedBroadcastProcessFunction\n\n   1. 按键分区的广播连接流处理函数，同样是基于 BroadcastConnectedStream 调用.process()时 作为参数传入。与 BroadcastProcessFunction 不同的是，这时的广播连接流，是一个 KeyedStream 与广播流(BroadcastStream)做连接之后的产物。\n\n## 2、按键分区处理函数\n\n### 2.1 定时器(Timer)和定时服务(TimerService)\n\nKeyedProcessFunction 的一个特色，就是可以灵活地使用定时器。\n\n定时器(timers)是处理函数中进行时间相关操作的主要机制。注册定时器的功能，是通过上下文中􏰀供的“定时服务”(TimerService)来实现的\n\nTimerService 是 Flink 关于时间和定时器的基础服务接口,定时服务与当前运行的环境有关。前面已经介绍过，ProcessFunction 的上下文(Context)中提供了.timerService()方法，可以直接返回一个 TimerService 对象\n\n```\npublic abstract TimerService timerService();\n```\n\n**TimerService**\n\n```java\n// 获取当前的处理时间\nlong currentProcessingTime();\n// 获取当前的水位线(事件时间) long currentWatermark();\n// 注册处理时间定时器，当处理时间超过 time 时触发 void registerProcessingTimeTimer(long time);\n// 注册事件时间定时器，当水位线超过 time 时触发 void registerEventTimeTimer(long time);\n// 删除触发时间为 time 的处理时间定时器\nvoid deleteProcessingTimeTimer(long time);\n// 删除触发时间为 time 的处理时间定时器 void deleteEventTimeTimer(long time);\n```\n\n基于处理时间和基于事件时间。而对应的操作主要有三个:获 取当前时间，注册定时器，以及删除定时器。\n\n**要注意，尽管处理函数中都可以直接访问 TimerService，不过只有基于 KeyedStream 的处理函数，才能去调用注册和删除定时器的方法; 未作按键分区的 DataStream 不支持定时器操作，只能获取当前时间**\n\n一个时间戳上的定时器只会触发一次。\n\n基于 KeyedStream 注册定时器时，会传入一个定时器触发的时间戳，这个时间戳的定时器 对于每个 key 都是有效的。这样，我们的代码并不需要做额外的处理，底层就可以直接对不同 key 进行独立的处理操作了。\n\n利用这个特性，有时我们可以故意降低时间戳的精度，来减少定时器的数量，从而􏰀高处 理性能。比如我们可以在设置定时器时只保留整秒数，那么定时器的触发频率就是最多 1 秒一 次。\n\n```\nlong coalescedTime = time / 1000 * 1000;\nctx.timerService().registerProcessingTimeTimer(coalescedTime);\n```\n\nFlink 的定时器同样具有容错性，它和状态一起都会被保存到一致性检查点(checkpoint) 中。当发生故障时，Flink 会重启并读取检查点中的状态，恢复定时器。如果是处理时间的定 时器，有可能会出现已经“过期”的情况，这时它们会在重启时被立刻触发。\n\n\n\n### KeyedProcessFunction的使用\n\nKeyedProcessFunction 可以说是处理函数中的“嫡系部队”，可以认为是 ProcessFunction 的 一个扩展。我们只要基于 keyBy 之后的 KeyedStream，直接调用.process()方法，这时需要传入 的参数就是 KeyedProcessFunction 的实现类。\n\n```java\nstream.keyBy( t -> t.f0 )\n       .process(new MyKeyedProcessFunction())\n```\n\n```java\npackage sunrise.demo.window;\n\nimport org.apache.flink.api.common.eventtime.SerializableTimestampAssigner;\nimport org.apache.flink.api.common.eventtime.WatermarkStrategy;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.streaming.api.functions.KeyedProcessFunction;\nimport org.apache.flink.util.Collector;\nimport sunrise.demo.function.process.KeyedProcessFunctionDemo;\nimport sunrise.demo.pojo.Event;\nimport sunrise.demo.stream.api.source.CustomSource;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2023/2/16\n * @desc\n */\npublic class KeyedProcessDemo {\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        env.addSource(new CustomSource()).assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forMonotonousTimestamps().withTimestampAssigner(new SerializableTimestampAssigner<Event>() {\n            @Override\n            public long extractTimestamp(Event event, long l) {\n                return event.getTimestamp();\n            }\n        })).keyBy(Event::getUser).process(new KeyedProcessFunction<String, Event, String>() {\n\n            @Override\n            public void processElement(Event event, KeyedProcessFunction<String, Event, String>.Context context, Collector<String> collector) throws Exception {\n                collector.collect(\"数据到达，时间戳为:\" + context.timestamp());\n                collector.collect(\" 数 据 到 达 ， 水 位 线 为 : \" + context.timerService().currentWatermark() + \"\\n -------分割线-------\");\n                context.timerService().registerEventTimeTimer(context.timestamp() + 10 * 1000L);\n            }\n\n            @Override\n            public void onTimer(long timestamp, KeyedProcessFunction<String, Event, String>.OnTimerContext ctx, Collector<String> out) throws Exception {\n                super.onTimer(timestamp, ctx, out);\n                out.collect(\"定时器触发，触发时间:\" + timestamp);\n            }\n        }).print();\n        env.execute();\n    }\n}\n\n```\n\n\n\n## 3. 窗口处理函数\n\n#### 窗口处理函数的使用\n\n窗口处理函数 ProcessWindowFunction 的使用与其他窗口函数类似，也是基于 WindowedStream 直接调用方法就可以\n\n```java\nstream.keyBy( t -> t.f0 )\n       .window( TumblingEventTimeWindows.of(Time.seconds(10)) )\n       .process(new MyProcessWindowFunction())\n```\n\n#### ProcessWindowFunction 解析\n\n```java\npackage sunrise.demo.function.window;\n\nimport org.apache.commons.net.ntp.TimeStamp;\nimport org.apache.flink.streaming.api.functions.windowing.ProcessWindowFunction;\nimport org.apache.flink.streaming.api.windowing.windows.TimeWindow;\nimport org.apache.flink.util.Collector;\nimport scala.collection.Iterable;\nimport scala.collection.immutable.List;\nimport sunrise.demo.pojo.CarInfo;\n\nimport java.sql.Timestamp;\nimport java.util.HashSet;\nimport java.util.Set;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2023/2/16\n * @desc\n */\npublic class CarCountProcessWindowFunction extends ProcessWindowFunction<CarInfo,String,String, TimeWindow> {\n\n\n    @Override\n    public void process(String s, ProcessWindowFunction<CarInfo, String, String, TimeWindow>.Context context, java.lang.Iterable<CarInfo> iterable, Collector<String> collector) throws Exception {\n        Set<String> carSet = new HashSet<String>();\n        for (CarInfo car : iterable) {\n            carSet.add(car.getCarNumber());\n        }\n        long start = context.window().getStart();\n        long end = context.window().getEnd();\n\n        collector.collect(\"窗口:\" + new Timestamp(start) + \"~\" + new Timestamp(end) + \"的过车数是：\" + carSet.size());\n\n    }\n}\n\n```\n\n```java\npublic abstract class ProcessWindowFunction<IN, OUT, KEY, W extends Window>\n       extends AbstractRichFunction {\n...\npublic abstract void process(\nKEY key, Context context, Iterable<IN> elements, Collector<OUT> out) throws\nException;\npublic void clear(Context context) throws Exception {}\n   public abstract class Context implements java.io.Serializable {...}\n}\n```\n\nProcessWindowFunction 依然是一个继承了 AbstractRichFunction 的抽象类，它有四个类型 参数:\n\n1. IN:input，数据流中窗口任务的输入数据类型。\n\n2. OUT:output，窗口任务进行计算之后的输出数据类型。\n\n3. OUT:output，窗口任务进行计算之后的输出数据类型。\n\n4. W:窗口的类型，是Window的子类型。一般情况下我们定义时间窗口，W 就是 TimeWindow。\n\n   \n\n```\npublic abstract class Context implements java.io.Serializable {\n   public abstract W window();\n   public abstract long currentProcessingTime();\n   public abstract long currentWatermark();\n   public abstract KeyedStateStore windowState();\n   public abstract KeyedStateStore globalState();\n   public abstract <X> void output(OutputTag<X> outputTag, X value);\n}\n```\n\n### 侧输出流(Side Output)\n\n```java\nDataStream<Integer> stream = env.addSource(...);\nSingleOutputStreamOperator<Long> longStream = stream.process(new ProcessFunction<Integer, Long>() {\n@Override\npublic void processElement( Integer value, Context ctx, Collector<Integer> out) throws Exception {\n// 转换成 Long，输出到主流中\nout.collect(Long.valueOf(value));\n// 转换成 String，输出到侧输出流中\nctx.output(outputTag, \"side-output: \" + String.valueOf(value));\n} });\nDataStream<String> stringStream = longStream.getSideOutput(outputTag);\n```\n\n\n\n\n\n\n\n\n\n","source":"_posts/王阁/技术/大数据/flink/2023/Flink_Process_Function.md","raw":"title:  Flink_Process_Function\ndate:  2023年 2月22日\ntags: [flink、transform、process]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n本文讲解的是Flink 分层api中低层的api， process函数的使用\n\n <!--more-->\n\n# 处理函数\n\n\n\n> 在分层的底层，我们可以不定义任何具体的算子，如map、filter、或者window。只是提炼出了一个处理操作(process)。它是所有转换算子的一个概括性的表达，可以自定义处理逻辑，所以这一层接口就被叫作“处理函数”(process function)\n\n## 1、基本处理函数\n\n### 1.1 处理函数的功能和使用\n\n处理函数􏰀供了一个“定时服务” (TimerService)，我们可以通过它访问流中的事件(event)、时间戳(timestamp)、水位线 (watermark)，甚至可以注册“定时事件”。而且处理函数继承了 AbstractRichFunction 抽象类，所以拥有富函数类的所有特性，同样可以访问状态(state)和其他运行时信息。此外，处理函 数还可以直接将数据输出到侧输出流(side output)中。所以，处理函数是最为灵活的处理方 法，可以实现各种自定义的业务逻辑;同时也是整个 DataStream API 的底层基础。\n\n处理函数的使用与基本的转换操作类似，只需要直接基于 DataStream 调用.process()方法 就可以了。方法需要传入一个 ProcessFunction 作为参数，用来定义处理逻辑。\n\n```\n stream.process(new MyProcessFunction())\n```\n\n这里 ProcessFunction 不是接口，而是一个抽象类，继承了 AbstractRichFunction; MyProcessFunction 是它的一个具体实现。所以所有的处理函数，都是富函数(RichFunction)， 富函数可以调用的东西这里同样都可以调用。\n```java\npackage sunrise.demo.function.process;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.flink.streaming.api.functions.ProcessFunction;\nimport org.apache.flink.util.Collector;\nimport sunrise.demo.pojo.CarInfo;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2023/2/16\n * @desc\n */\n@Slf4j\npublic class ProcessFunctionDemo extends ProcessFunction<CarInfo,CarInfo> {\n    @Override\n    public void processElement(CarInfo carinfo, ProcessFunction<CarInfo, CarInfo>.Context context, Collector<CarInfo> collector) throws Exception {\n        String carNumber = carinfo.getCarNumber();\n        Integer number = Integer.valueOf(carNumber.replace(\"carNo-\", \"\"));\n        Integer speed = Integer.valueOf(carinfo.getCarSpeed());\n        if (number > 55 && speed > 80) {\n            //限定了车牌和车速\n            collector.collect(carinfo);\n        }\n    }\n}\n\n```\n\n### ProcessFunction 解析\n\n内部单独定义了两个方法:一个是必须要实现的抽象方法.processElement();另一个是非 抽象方法.onTimer()。\n\n1. 抽象方法.processElement()\n   1. 用于“处理元素”，定义了处理的核心逻辑。这个方法对于流中的每个元素都会调用一次， 参数包括三个:输入数据值 value，上下文 ctx，以及“收集器”(Collector)out。方法没有返 回值，处理之后的输出数据是通过收集器 out 来定义的。\n   2. value:当前流中的输入元素，也就是正在处理的数据，类型与流中数据类 型一致。\n   3. ctx:类型是ProcessFunction中定义的内部抽象类Context，表示当前运行的 上下文，可以获取到当前的时间戳，并􏰀供了用于查询时间和注册定时器的“定时服 务”(TimerService)，以及可以将数据发送到“侧输出流”(side output)的方法.output()。\n   4. out:“收集器”(类型为Collector)，用于返回输出数据。使用方式与flatMap 算子中的收集器完全一样，直接调用 out.collect()方法就可以向下游发出一个数据。 这个方法可以多次调用，也可以不调用。\n   5. 而通过富函数􏰀供的获取上下文方法.getRuntimeContext()， 也可以自定义状态(state)进行处理，\n2. 非抽象方法.onTimer()\n   1. 用于定义定时触发的操作，这是一个非常强大、也非常有趣的功能。这个方法只有在注册 好的定时器触发的时候才会调用，而定时器是通过“定时服务”TimerService 来注册的\n   2. 打个 比方，注册定时器(timer)就是设了一个闹钟，到了设定时间就会响;而.onTimer()中定义的， 就是闹钟响的时候要做的事。所以它本质上是一个基于时间的“回调”(callback)方法，通过 时间的进展来触发\n   3. 定时方法.onTimer()也有三个参数:时间戳(timestamp)，上下 文(ctx)，以及收集器(out)。这里的 timestamp 是指设定好的触发时间，事件时间语义下当然就是水位线了。另外这里同样有上下文和收集器，所以也可以调用定时服务(TimerService)， 以及任意输出处理之后的数据。\n   4. 我们也可以看到，处理函数都是基于事件触发的。水位线就如同插入流中的一条数据一样; 只不过处理真正的数据事件调用的是.processElement()方法，而处理水位线事件调用的 是.onTimer()。\n   5. 我们也可以看到，处理函数都是基于事件触发的。水位线就如同插入流中的一条数据一样; 只不过处理真正的数据事件调用的是.processElement()方法，而处理水位线事件调用的 是.onTimer()。\n\n### 处理函数的分类\n\n我们知道，DataStream 在调用一些转换方法之后，有可能生成新的流类型;例如调 用.keyBy()之后得到 KeyedStream，进而再调用.window()之后得到 WindowedStream。对于不同 类型的流，其实都可以直接调用.process()方法进行自定义处理，这时传入的参数就都叫作处理 函数\n\nFlink 提供了 8 个不同的处理函数\n\n1. ProcessFunction\n\n   1. ```java\n      最基本的处理函数，基于 DataStream 直接调用.process()时作为参数传入。\n      ```\n\n2. KeyedProcessFunction\n\n   1. 对流按键分区后的处理函数，基于 KeyedStream 调用.process()时作为参数传入。要想使用 定时器，比如基于 KeyedStream。\n\n3. ProcessWindowFunction\n\n   1. 开窗之后的处理函数，也是全窗口函数的代表。基于 WindowedStream 调用.process()时作 为参数传入。\n\n4. ProcessAllWindowFunction\n\n   1. 同样是开窗之后的处理函数，基于 AllWindowedStream 调用.process()时作为参数传入。\n\n5. CoProcessFunction\n\n   1. 合并(connect)两条流之后的处理函数，基于 ConnectedStreams 调用.process()时作为参 数传入。关于流的连接合并操作\n\n6. ProcessJoinFunction\n\n   1. 间隔连接(interval join)两条流之后的处理函数，基于 IntervalJoined 调用.process()时作为 参数传入。\n\n7. BroadcastProcessFunction\n\n   1. 广播连接流处理函数，基于 BroadcastConnectedStream 调用.process()时作为参数传入。这 里的“广播连接流”BroadcastConnectedStream，是一个未 keyBy 的普通 DataStream 与一个广 播流(BroadcastStream)做连接(conncet)之后的产物。\n\n8. KeyedBroadcastProcessFunction\n\n   1. 按键分区的广播连接流处理函数，同样是基于 BroadcastConnectedStream 调用.process()时 作为参数传入。与 BroadcastProcessFunction 不同的是，这时的广播连接流，是一个 KeyedStream 与广播流(BroadcastStream)做连接之后的产物。\n\n## 2、按键分区处理函数\n\n### 2.1 定时器(Timer)和定时服务(TimerService)\n\nKeyedProcessFunction 的一个特色，就是可以灵活地使用定时器。\n\n定时器(timers)是处理函数中进行时间相关操作的主要机制。注册定时器的功能，是通过上下文中􏰀供的“定时服务”(TimerService)来实现的\n\nTimerService 是 Flink 关于时间和定时器的基础服务接口,定时服务与当前运行的环境有关。前面已经介绍过，ProcessFunction 的上下文(Context)中提供了.timerService()方法，可以直接返回一个 TimerService 对象\n\n```\npublic abstract TimerService timerService();\n```\n\n**TimerService**\n\n```java\n// 获取当前的处理时间\nlong currentProcessingTime();\n// 获取当前的水位线(事件时间) long currentWatermark();\n// 注册处理时间定时器，当处理时间超过 time 时触发 void registerProcessingTimeTimer(long time);\n// 注册事件时间定时器，当水位线超过 time 时触发 void registerEventTimeTimer(long time);\n// 删除触发时间为 time 的处理时间定时器\nvoid deleteProcessingTimeTimer(long time);\n// 删除触发时间为 time 的处理时间定时器 void deleteEventTimeTimer(long time);\n```\n\n基于处理时间和基于事件时间。而对应的操作主要有三个:获 取当前时间，注册定时器，以及删除定时器。\n\n**要注意，尽管处理函数中都可以直接访问 TimerService，不过只有基于 KeyedStream 的处理函数，才能去调用注册和删除定时器的方法; 未作按键分区的 DataStream 不支持定时器操作，只能获取当前时间**\n\n一个时间戳上的定时器只会触发一次。\n\n基于 KeyedStream 注册定时器时，会传入一个定时器触发的时间戳，这个时间戳的定时器 对于每个 key 都是有效的。这样，我们的代码并不需要做额外的处理，底层就可以直接对不同 key 进行独立的处理操作了。\n\n利用这个特性，有时我们可以故意降低时间戳的精度，来减少定时器的数量，从而􏰀高处 理性能。比如我们可以在设置定时器时只保留整秒数，那么定时器的触发频率就是最多 1 秒一 次。\n\n```\nlong coalescedTime = time / 1000 * 1000;\nctx.timerService().registerProcessingTimeTimer(coalescedTime);\n```\n\nFlink 的定时器同样具有容错性，它和状态一起都会被保存到一致性检查点(checkpoint) 中。当发生故障时，Flink 会重启并读取检查点中的状态，恢复定时器。如果是处理时间的定 时器，有可能会出现已经“过期”的情况，这时它们会在重启时被立刻触发。\n\n\n\n### KeyedProcessFunction的使用\n\nKeyedProcessFunction 可以说是处理函数中的“嫡系部队”，可以认为是 ProcessFunction 的 一个扩展。我们只要基于 keyBy 之后的 KeyedStream，直接调用.process()方法，这时需要传入 的参数就是 KeyedProcessFunction 的实现类。\n\n```java\nstream.keyBy( t -> t.f0 )\n       .process(new MyKeyedProcessFunction())\n```\n\n```java\npackage sunrise.demo.window;\n\nimport org.apache.flink.api.common.eventtime.SerializableTimestampAssigner;\nimport org.apache.flink.api.common.eventtime.WatermarkStrategy;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.streaming.api.functions.KeyedProcessFunction;\nimport org.apache.flink.util.Collector;\nimport sunrise.demo.function.process.KeyedProcessFunctionDemo;\nimport sunrise.demo.pojo.Event;\nimport sunrise.demo.stream.api.source.CustomSource;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2023/2/16\n * @desc\n */\npublic class KeyedProcessDemo {\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        env.addSource(new CustomSource()).assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forMonotonousTimestamps().withTimestampAssigner(new SerializableTimestampAssigner<Event>() {\n            @Override\n            public long extractTimestamp(Event event, long l) {\n                return event.getTimestamp();\n            }\n        })).keyBy(Event::getUser).process(new KeyedProcessFunction<String, Event, String>() {\n\n            @Override\n            public void processElement(Event event, KeyedProcessFunction<String, Event, String>.Context context, Collector<String> collector) throws Exception {\n                collector.collect(\"数据到达，时间戳为:\" + context.timestamp());\n                collector.collect(\" 数 据 到 达 ， 水 位 线 为 : \" + context.timerService().currentWatermark() + \"\\n -------分割线-------\");\n                context.timerService().registerEventTimeTimer(context.timestamp() + 10 * 1000L);\n            }\n\n            @Override\n            public void onTimer(long timestamp, KeyedProcessFunction<String, Event, String>.OnTimerContext ctx, Collector<String> out) throws Exception {\n                super.onTimer(timestamp, ctx, out);\n                out.collect(\"定时器触发，触发时间:\" + timestamp);\n            }\n        }).print();\n        env.execute();\n    }\n}\n\n```\n\n\n\n## 3. 窗口处理函数\n\n#### 窗口处理函数的使用\n\n窗口处理函数 ProcessWindowFunction 的使用与其他窗口函数类似，也是基于 WindowedStream 直接调用方法就可以\n\n```java\nstream.keyBy( t -> t.f0 )\n       .window( TumblingEventTimeWindows.of(Time.seconds(10)) )\n       .process(new MyProcessWindowFunction())\n```\n\n#### ProcessWindowFunction 解析\n\n```java\npackage sunrise.demo.function.window;\n\nimport org.apache.commons.net.ntp.TimeStamp;\nimport org.apache.flink.streaming.api.functions.windowing.ProcessWindowFunction;\nimport org.apache.flink.streaming.api.windowing.windows.TimeWindow;\nimport org.apache.flink.util.Collector;\nimport scala.collection.Iterable;\nimport scala.collection.immutable.List;\nimport sunrise.demo.pojo.CarInfo;\n\nimport java.sql.Timestamp;\nimport java.util.HashSet;\nimport java.util.Set;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2023/2/16\n * @desc\n */\npublic class CarCountProcessWindowFunction extends ProcessWindowFunction<CarInfo,String,String, TimeWindow> {\n\n\n    @Override\n    public void process(String s, ProcessWindowFunction<CarInfo, String, String, TimeWindow>.Context context, java.lang.Iterable<CarInfo> iterable, Collector<String> collector) throws Exception {\n        Set<String> carSet = new HashSet<String>();\n        for (CarInfo car : iterable) {\n            carSet.add(car.getCarNumber());\n        }\n        long start = context.window().getStart();\n        long end = context.window().getEnd();\n\n        collector.collect(\"窗口:\" + new Timestamp(start) + \"~\" + new Timestamp(end) + \"的过车数是：\" + carSet.size());\n\n    }\n}\n\n```\n\n```java\npublic abstract class ProcessWindowFunction<IN, OUT, KEY, W extends Window>\n       extends AbstractRichFunction {\n...\npublic abstract void process(\nKEY key, Context context, Iterable<IN> elements, Collector<OUT> out) throws\nException;\npublic void clear(Context context) throws Exception {}\n   public abstract class Context implements java.io.Serializable {...}\n}\n```\n\nProcessWindowFunction 依然是一个继承了 AbstractRichFunction 的抽象类，它有四个类型 参数:\n\n1. IN:input，数据流中窗口任务的输入数据类型。\n\n2. OUT:output，窗口任务进行计算之后的输出数据类型。\n\n3. OUT:output，窗口任务进行计算之后的输出数据类型。\n\n4. W:窗口的类型，是Window的子类型。一般情况下我们定义时间窗口，W 就是 TimeWindow。\n\n   \n\n```\npublic abstract class Context implements java.io.Serializable {\n   public abstract W window();\n   public abstract long currentProcessingTime();\n   public abstract long currentWatermark();\n   public abstract KeyedStateStore windowState();\n   public abstract KeyedStateStore globalState();\n   public abstract <X> void output(OutputTag<X> outputTag, X value);\n}\n```\n\n### 侧输出流(Side Output)\n\n```java\nDataStream<Integer> stream = env.addSource(...);\nSingleOutputStreamOperator<Long> longStream = stream.process(new ProcessFunction<Integer, Long>() {\n@Override\npublic void processElement( Integer value, Context ctx, Collector<Integer> out) throws Exception {\n// 转换成 Long，输出到主流中\nout.collect(Long.valueOf(value));\n// 转换成 String，输出到侧输出流中\nctx.output(outputTag, \"side-output: \" + String.valueOf(value));\n} });\nDataStream<String> stringStream = longStream.getSideOutput(outputTag);\n```\n\n\n\n\n\n\n\n\n\n","slug":"王阁/技术/大数据/flink/2023/Flink_Process_Function","published":1,"updated":"2023-02-28T14:45:12.075Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cleozhbp90007vnpw1u1bep89","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"e56344f857bf2544fd428cd4ede3f5aeaf304abee9f3182be559ba98f7831ec4\">d051ffe5ae513ddca868edf80495449631bab7bbec4411833ed7edd39d2e114488761634b50e9b60e0c3b370d39e6b2296f5f1a085b1906e5357eecfe8f86c50bc8ff06557e4b416d5f6b035eba25fbd675cdab814d09ea2af3278278a3fa8a9c4d9c090e1ae7c61f5469f49ec267f7d0f16b6ee4f7df5f129836bf06cacd30995cfb5d6cddec7e477f77c137dccf4f1e92b114d453bfeb5741edeee045e2c9b8a78554009f9ee9f16fe21f020b0cf773ba9309206955949c2607e109eccdd23db352f22d74cd123a942406db91263758cc85406d8b0f19e26c608fadc30383c4bc44cdc4bf0fa9cded04e5b9a3fc07266c9f12e10b36501aa55eb53b91c6e9dcf75a0992a5bbfcfd9beb203660af9db7c38397da23c1be4cb2d14904abc713a87faa015b9aaa7c7678548b82b02e9614245478f93563fde5e73c495cdfd04198cf55b881dbdde465d36b8d3d71388aeb0c024e336d7efe285f5e59b7b56607463d0e1338d3033d92990a1860f5d8d0db35ee481987bbbd4448a6246e80af18af581aebc824e96a33e3dac2c0fcdf0439621a59685c85a8f635745082a10002509a7d7988d8b66eec9844857cf0f8e1cd68cd88a2f7942f01aacf34de0c17c8529832d59c1b6833339c58443b74bf771effe9465ec7697fbc72ad2896f45b0256e2e2a165672f2729bd03f5c5cb91f1125ad35523597c4cedfcea881b902318ceb180d8dcb8defe71f4df5db7d24834553207561ec06f4f2f70c791003ce813962054cf89f08121547f40a3c2a77389e0b118feed867803713453fc5062fad8d58f5bddc80751d1a5fa83cbe95954b714f619486fd6e608c8cc4a695e09e404c9c8fb4de51d996d65a0cc6b982e84867b33592452dc6f92ccc2aa109bdecbaac286c08b2014c8d2181bce69b3aab0c6a9330bde29d66e5cfdc01a0ff7651b40d7cb16dac6f8d8b73c174b7d9a482fe54589f39d1c928507d67d8aee1491d3838a75b1b8748cc08bb9d3f4da337f95f43fa626952aef31df388edaaad9425e07f308276e77ab236595affc6118878f085b547254620186eac7c8f43050b0812724f8bcee2ca3088efdfc7d9883829c27e04396a0ff116c478b54d68a1c2b3a7a956660361c5083718a90adc4e006445a5344838e6e6d84d8f0666f4b5eb56cedb9a09626d0bed3b398258cecf996a647a9055cc7591b5fff315ecbc3f59bf7ed9041e2f8ccf0cc34ef1c74ac7fdabedc428ec6d0c3cd01aa9f10605556fba628d766f5fde0bad2ba810cc06c87203db39d0f2fbb9e658c4963dcf994582cf7057afb2c1ae420d7f8d1f714f1249d0b320fee278bc60e152780feade5fe94edcbfdeca0c728fab0cbfab2688e73c9f0fb09caa76421cba1c224eb0420548d10f2aaf900c5415f66060f76643027db3edea0f6f256f05689fcab0e82bd9aa85f2e9b376d2e8fbb3766d2fcb0f0a49670c02e472d9a404b67f38cc6c63f136b53b9353dc2b74da8f5879deb548397c7e81b3eb18848e56c13c409c991c6f1f7099cc9830cc1de8335fb32c9f42c7cab0bef6bd2c467e4c4e3e0eb2226f25cc9a22988c4b0f09463a5fc2108d485e608e49c8d3e8c028603907587b01db070b12af1a307ea6cddec75d5e27b27f81b32b6af27d9dd817de133a95e228d5ca376635e36758552243bbccd07cf1131e28e8f6887d51083dfa20981ee3295d7c1f4b99397d0840384159e44b85c994d41ec46e06c2ca00ae02b1a11a348ae80a5b6073aa843031c1f3c09c6dfdc8f035baf505e163d0a0d736173735e31864ae73e1fef122d6d69710f2c9b2994458b89ab9b2c096b7c2b7ab5fed151bca628c34c207c3e6a14a18982b579629e0cc355824d0ea3b76effb77fa9b797e6cb6ecafd65639ec7c74ffd780bc303c1aff178687bf35b7b826e0350c34761d766b18167f809efb62d950fb272a6c2562d988f4e33298a0b6bf341e9fdb1a87d10cc4113e45ea07e358ebf740c39d64f90a52cd501e9ea8ba1fb7c1882952dfccbf9203b3542f4735fa4052b1c4e985f4e74baa88b25a8e9742eb5170ec4e1f3058d5ca38f3eec9bf126d5cdf94b2475c6bdfa1d049e4f2292e12b0972e47f2ea5506b4c719344396259f5e679a6c5d175ac4fa1390d4ce9d203abbe1fbfd4e7c9920b62d5b5ed3a3dc9d2a2fae0d03de69bb683328d3917eb4999edbf42d47199b91a8c51b239b50bb9b23d20d729709cf9932056e19b6897b49ed739f31a635c82000188b36ae2487b4b80a55dfcefaf4acf5da640e993b557583aaf3359dcd12e3a1e49a92c31c6ca705429a37e343d199016f684f94ab89adca01e7bc721805d5ffe103ed60965e6faecb8baec183dcdfa241b3ed8af99e8a0447c86b953989e675f74bfd5b7838c42811927c610896637e6ee023c01235a1b202a3fb74dacb151500afdd27b08200a5790d3514394bd4b478c86ec663607a968ee50aa866d2252bda2e33db990759e9c5e33b99efa8e7e8d4f6f047516fcb9cf23af9d94f1533772b958d85b757e8b8a7dd9383d0f64fd366a47dc0c7d1a6af7d4893fffacdb09fba8418fbd2b2fd8c2308e8cee57ded88a8d89d8a5ca692890d77063b47b64689443b0abd377baad393458396c0bcc93b3f6d22651b50dea90b7a4c579b5d48d0f58c944612d0ded9659cf744b668f4eb723d40f1558a47893550a4b84c1240097e687161284385cd4fad8eb1f7ec02e241277f91281cb51673c9d694f3b48001bc0a008d81b212ac66869ec39090172035321b1fdf3223f77337e460c9fed9fbee0e84cb8d73d7d75392b80214cb7c1d11f490fcbda3f2a6151d13fd6291a46a7de0e68352fe126dba8797db1afa6e39d319b16547d819520e38e2d80a77ba612060f13aef92f80c67c809a573b925d842d3619c65e7f0b4dc1387dca48747946034b53a2cffb8c42cb9096a21e4f2167b2e7ec61fdd84dff994d1f7e6b87c3f8d213f3b06c5a08df8e7d6c99a6c4a30a27b801165064306add99e22c33abb3f92c8a1ec7ecf59863dfba7c0462cce0f52d32459d815ce27436e893cb3ece22ee0a4e2b0244f8f0a7dc5fad2869b370d499087c668aece41575ff3ebbc2d0a74c346aaaabfb5241ebfde88605dd1566086877f1b76a8cb52094edaf84e68c1b6f91a575335d8cbec9af48532efaceff7fd459198423a47fa5ffeab8cc604470df27111400a1fd6755cc0939cdd584461157f9a215b0568dd55f0620057acc5f3d6b90166d2ae0456fd8756fe0cab029efa284cf852cecfca92448cbc26365fde29d2887f68d1ada21957a752d6d989e1990d1f2438557054164b963a0d90804b61089f736bb11369d58680ddba66cde4d61bbb54183585061b493ef3496e3feccfa0226f6cc233fd1b43d6472d97e38528dd96b6e20883b5f29dbc6597ee02e9e00471d9d32248281305c9ac29a92fbc594db3157cc34ea845a739c09cdd9d87840f8e9a8ee9ae40656c3bcf397061a88ed907b751790d59a2e38c5ac1603750b884b727f8ea85b89888996d0e79dc56a6e5b4c6e5ca86c603356c51df2dad9e91a99de126caad52ec39969184244e9fe971640bc42d1e76758d32283d7e9827f442ab2c93c1b3c6975c23357c19b6df995d46ef33ff77b04212a8810c7f0dc46ae18f99f8c640946a1310b8327d7d00ab49d9a7a84fe229f3f86bd140ac813eb4bae271d5bafaa8dd67bce953a893570c333c4f5b0cccb9ebf0bca3dc89c6ec19a8a49d804350a824a0092214ebc9fca7149b30aaa61aea2ec3983a9798191879c6b39ddad09fb167962f86b68bc42b193323ac00fbdbf3a8dff34a03d0d8eecffb2d774ae7a8c67cdc418f00a44b37e5c2423c0e6e62ee6cc8ff6c28f57532009788a08c8521d2b8899f9890d1536178933b32420c5d9555072a458675b04ae10521927224acc09c8a7a9ec715f83fced765695aeb9e4f01df1a32677a4d494c791e32efa86483adb05282ce1055871b8d6e723a84fe47e3e582a34f40e59fca536e519c34815e5f8a7907be9c9cfb8a9ea2dad8282a51cc5be38ec20321175a5ab49f140cf2e1b08fe5d22cbcf85e094320d38cebfc20a2caaabdc5cd5cd22a5468734f725d57b9ae1c3444a765453a0184864a1df384964b1970b123e33eb44a5b09c32367ef25c8240223d3c16299065d87ac1a4e51679279b1f0bb5342c5c746df2e02b0fad32def835d51cf15afcb74fd168eb883601cf5976c15baeb0153da1f5d36dffb757e550618d1fa7167d43247964cfc3e115e3463d67f97493d7a9062105429b1a486fc5568878bb757e7a150720bb0e59b982a4c678098028ba5af74d7eaf0df927ac2488a858a9cc185f7af838bf397a92560406a7e856cc8c37f92f85724a5239e7436e12df32e08ad292f6c9d8ec69584108a70f0c675399d29ab9a137582acafdd56917a45bd059817badcd3d2b316bdfc38feb8007b76251250ae0c9789d84e9afabae7dc333fe182d38fbd10d5ba4fc539b343dac7245b834395d2832321251f8b9a7cb8cfc2677fc54ee0c4709780b282c0efe6ffa092f734ff9bd40950f51cfba68d3e1ea7ad5708fefb68920c3db7f78dbac8d99c8047f14749ec6b2a4f01e677eb636d4ba866fca0edb276845b5794790d557c23844553ae765451f6bab231e7a0de439dacba3b818d1d904592ee6e2a9a9ad70fe1b13b6db348bcb78eae8efa5651d7431d4446d52c701bc79b0efcf7783628975d1e56448b4548b86b1136bac366d83d7a026f54aaec50f6d2f4cf5546099a0457df3df3cd5014d030026457f7a2242d2b17aabb05f46e56d3af95cfdabb3e77aa3804e44e60f6b86aa06f84065ccb09ccd69bd9c5915e82491b07459e86ddd7c7f79c9cc829486a047be73a5ced224b837179d3e2f66f6e34cefecc45dbd69d3a1389d0abab9215f0dfaeedebededc4bcc3d1b7bdc7f2532a59ca8621eabc26126f48f27498ea905ba95cec199bd1ea29a45daed8ee71b61ed5f0f901c4a6bd8212d2cbdba759bb356383eb581eb6b226624e03c5522b72ae5eb4a11b1f26597db07ccdc33d82c655f134911c7dd16f1547719339371611f3318383f4638b3715d50bdc917f6d77bc14ec1ba5581298ddf0c01213df9bcc87da5df6f5f52efa5c2dc67edc4c0a055c7b3a6f463f69a8940c967e635e7d502d4baf908c3e8e6e8545cbb005b67376a3482e71d66c56b51bb96420aceb94bb57c79e513200aadb5d51c73d63de192dea893c9828887f182c3c445a14b2781e873e6f13f2ddd4d5bdcc934d92b6c6c7b4a429a9ec222f67c2dc89b9358a3bf4e1bc56d3714550b365fdba420949b38b2257ab49fb5579245eb5d78adbea0232071ef13f99fda2dd27e8cc8dd24c009a729861420ef165f40eaba556c3ac1335a0b52b9521753fab1bf66054bc84cd466657a90d679f69334222fdb1701d020dcc64c3f460b7767d9942f08f7e4a50b43be6864be6b91d421218c7376e3d15bb7b61492b0f9e8baa41bec512256fd60bdb936ae7a0e3336134575a5d74885bf0ede0ea7366ad7e9262fcb594720070bed2fea5d07939800c486e067c4ebc029ab6d1b5aec8a5275d18308b2f1276da7eb0a7e236a8c4c7588389f7e5b36de0e2efd9b9bbb8f9bff10799baaba8f0c5bef4c98ee0d782fd3ff918fcdc193427a88fb6a6e4d2ba1c3679322b49292fff6558d91210780ad9937a1a8394cf59f837bb1ca2bb2bdd7d71b147d1c1a39f5af17fafc7a413a4ba267283c5bae8cf6e167a67094fbd62447a38b186c65184c13c25e435b1eb23aa8b0292f3a1d7b4ff5e62f62540b4e2400c322a07e9b760d19b0bc20f053b8aa1ff6414f880d4ab217a9e8962c41bb72803d413d1b3e6403729b0a6e3ed702453c694240ae71a5e02056de60208499bef921221feac3b1102b112ccc83fd216cee271626b6dd2b990597b5464f0e419ec3ca89ebefec186e6e3942cd9f9771759bd14ae4fc7b478133110adfd6a732d21c78244a2208ec86e64e0c90301e3c5952ef88ef565738638240b748a2a893c63d5903a265b7dade4d206b6defc3194210caea42629305e51434ac6f29fa61b677415fe60278644b480e37797c4bb04539e5f57022a21b2177061901ef4721ea4e64c3228d3826224290b635ccf1515ed1e2c71590f3ed88ad0ed5ea524eb771330b757882287e8942d9023799c88a92bc0d9bf3f1ac4b43bae2b65d46f15f5c9635bc93020ebe006662370d61ddd38eb92cbae4c099c018d3f3be15d093b7f6e992e95356f56769b0fc1e5e1d4cd74083b677dc51611b8e698c70ec6e900231e891f189ff2017f104496137d3249f3b49d210552fec25dc91d0b7b09c8bb6704840652e82b4880ce8a43b9602f5af95f02b2dc81875e5174f09c7f7ebd3a58ca6e753b5fe9d04150246a480311a3d1776b65599a6e2cd3b1aa88ad232cb0921163ae6db87af722f42af184d5c6e34ce513de35e8110c1db5843bebb62abb82a719a082f9f5cbb7831d623e273c97c599532eb36b65a335a8edf7838260352b2016bcdbe9b51d4199cf79266f57870086660311e40693a06937f1731a2f0a2506ca9905cdad0a97bd65b9ad4ee5ceeb0cd634d3fd4424264e9d4e5166f4041daa7f052d805a2257ff1036760a7823610b73a74fe7c16507fc2614a54c0f642898fcfaf96ba3cb9754ec8bf022e7690d17e26bb5c578ed0d313a886e8ead37b749c0e912d2e96dc2037de147b4ea1bb00f34588096903eba5553be3aff6dc200e773130912f6c51967b895056863aeeb237ab63fc249a239685fbabdfdd803dad203e51298383deea1dd39f3473565236ad79a96c1a16b7e2b091355cb8244cad5ef68bf421ccf054bb6c3204b771b0fa334b0552a5f20dda2597a36e08cc3acc5430a50b7856b8afb946311f8a02af2698571d75a30299eaaa7a3eed0994008a735a43baa1a6e6e818abfa175e6e6175d45c37a43380d7f6a0adf0f13893ba75347d7a70f3bc14be45e2f948c24c1195d63ee156c2d6788b20488984fc8dd37a459b9e1ec4d1f0878a8afa77c8d54bf727ba2fa2df26615cec257f379029e6855bbcfefd43b0c1ae7d848cc2faa911a51ec50738621a51e99ad10ec1ee07d09905345ead401507d0f247efae7f3b61c9ae06eb8e91041fd26776ea7c2e3b08558640e34201bde42d4bbdcbb32cbfcff0e245487dd9649428a2ae01847d89f87d15e4f416386e7d4174bdae50579461acae3801fe602c958483efca0e1a8b4d8da65038145a0e8ba1a495cceb089ce254bc726f2f16fc78f88b74eb31078bb8caa49707c4c39bdc4a6475142575db6308601e3064bbb20c5b886d8aeeb17389e752ee86d772d0833d5d996bbd4de43d603a4343efdc8e287c89db882e82779703d4c21b16905465838735501614584987dec867d93cb126a0d33f3f7127d1c81d1159eed909ce6b3272df847a3aa2d324d4b1b1ee7597bdb335cc3e43524456a6ec819d948161de104b326aa9b69c099f1b068b94435ac644bb77f0787a349d5bfb073ebf76fd1c13547a7d8d779e91fa6e9b254ef0ee0c4cf81ec3e5e0fcd0366a9a347309b3cfbe5593815b3114888f65ac69007741a8a7509644f34779ebf0ee0fe3b9fd3c7feb811e0c9257e708eef2445534cbc15b95c673c16d9ca45f6db26d9913162a2d1e8a5c16b27b9143c72aa86ce371665cce17d0d9995a7bd430152cef1d563dc895094799a4568fe1d5fd20f8cce508dedc3c4227967ed55414efbabd90998a323e2db4ebe1b6fc5c3484a951fc889d1fee7ce7a31561b24b1fe8f2afa9728a30fcc9f7326684711f7142b319d6a71ade27d3ca060b9ff44b6b3cbc814082928b5bb60efd7f8f688e53e2b7f9edc8c563417530c6c2b23b46c69954a495281c2325100338b1135edd2614d5e4e06ecfc4c89722fe91943492ed171fea38e8b38f0115389a1bb759268e0b25355679478b3b6a73bf1634e3bd6789c73fa8941a8d470a927dcc871616560d08ab02f3f1147177e918470e6df46b706c4f51fd1b439d20395f069b2f57fa0041b1780193079b9b9a33e007d01512bb62fdca3dd7bb8855cf36bc6c8162758b08737e9a2869ef8dc3aaad98712f8e29ada942b06a8bc10474a8ac119a6d2a3705e2b1f17c61a3956f4d0c1123f433a4972dc2ef0b00dae2bf8f44f570c8753a8db313ab541462a78b31ffed0e93c2a268c5439568e7bf2dff8ead4d39678d9b607552f4fbf398bcd4a20c522d5be4ac2e56c75ddb2c56b8f8ef3eae7c170e287149e27ae673fad1c69eaaab9fccc4610e3b8cfc6663140baeeb1688f81422e77268b63ca76f9b1ade62a0de6ba166bd0c7378e0b128474a14fd8c8bb4ff4af59e93271b7736dc350a6ccc0224505d3c3a382aaf5f484bc47a5b305951ecf2313d1cab7e4c76f32b63bd564b278d9570c342d43ecb8baf257c963435dc289dbc9e118eddfc850711e3e501ef8428f696739dd8bc417cf5a15baabee3d0b02dfe0851c898719e61c1e3e33a75f40797e8d597ca53a0f315a4b98ab97a6f9f4099c3b5e4a7a4052d831a2792882bd4458d75c0ced5f6f2ed8d7ec80c815306d4b92d38626b3945bc2b24b0d8dcbeccc14dd7ef18fef3029bd8233627abca289091e58c93eca8639d17b4bad96cf555ded0c65a346c249678045a4053b7d4c35b38f46b64920bb5749d3e2bb2cbf23dfd0cbc78dd4b14c6d83bca273377f829ff2915ee5bcc6a26f89b3bc95b44dc92a8290605b7e34c0ab397dc13ccd131b87885cad9393c208a6db05be2992545ee8ddb4c25fecef134ac086ef807ae0137dd479c64780ab88803a059c51713a55054f89d200da82775fe72d6f3eb790686560b12dd171c8a52a40490046384c5f531e63cf680b1e9102f4595e8afeb2e40a0e159d0974204e845f2f30800b7388a1bd1e0468d4c0dd3c279799b3cfd52e74e91e2a33650457fca74edb22c9ae49dc42b349e412cbca16ad555e5ef3f058e69ea3feabfa2c8072b891591f7e99a4854d9c4af50fbc9176f5a5d27d849fead7ce431cee26cd9cfcc7626da47f40e41ccd89cc0bd5880c33b25ff6508b2159317a70641742e6f31c9ccbd42094026488646c92827fafb353008d8fd2d255903dbd0d955430c020e570ba4647c8d951b2788d3fd5495e52ec6f3bf652c290a9a8c16e52d969cab6009cec947145a369651a1db573505b02ef55c657c7982401f7518e2ca4e81ef88521af76374bb713299449fd52638e44e698e860992c789df8f11b1ca0c542a22b170b7163a3ed3c53fdb9a166aac21c3a98513d807755e75d0ea8b964e0b46f19a18a34bb9f95d85f1e33b5db19476bd14a5ba1600742f6422a19a495a4bc79e791f051334d01bb6a1e6c1b76da48fb16f67cd77dfc3551444a65cf950ea2c0862cea10308269b7e4a7a0d1cba42ad2db83a999956bed2ce18545f70934d34f7cc2318296b6bb24aaa943988f475e898ef0db0d90dcb50fb68a7fc4e1c27d73f7f4c6fc9866b08caa3111e1119e081dca9555570a675c7effdd8b2a52e945efbd637853d694d520f0d80124073aa21ac5f11487da3191fe40356bacd9a4129dc9d155657e936033d3bd0967efb473503e2e91926c878b15ddc1d6527bc3d9fc85f06c369da96ac1f897ac28946aeb39ec6890fc5a4b94c4fcab15589e91330738da5621753732eeece45bfd4c6958c54427254d94e67157025ee9e29e0e8bd04a7cfdec3ac30ea424fe5a26afe9fec9643b2bba58fa35502e434b41daab93ca03bb5e68b835e4fa1e5cc4534224755451c34f5082469f6d1f1ab3a8242b00e2b5f26fd05b0961717fe8acc48e9fb2eb651ea7001d1a53cbc284634d00eba447eb17769089b81fd73458d98a3fdae51a19a3adcaddfddc53a7f609c96b78879bb617114153e508a7dedfa96d9a7a0a4a47eead4e277d8257e9e61672ea0c3b3e676566f14c1a56b4451b9ba1191863900be56c2ed942183615806bebb44689e86ee79d38333865773529734c1dd9c6d01d9f667a2a464299930cb9ce4d624f7de2b96f563e7d656fcea704108a4695ed12d034b73b450061d8bbf4f4598cf95d45011c5c007e72967104e7a320df5b6cd3655048684e1c7ab0a97ff030cf6903bf3a24e27eb3874d8c6515eb3567c4cc6ddcb0d974807ac5aa4ae63689ddba82e71833ec25ceeeaf6425ea3883afa80626d52898a1704e1250e02a5cdd7a22d51c29fe0fdbb202e8e08fbe59c488c02c4a7701f7bceb09a9346a1f00f6708500b60d4960f80db339305d8830a7dbacdc24d4acdd1c2894dd2aa8fd8ad64c4f94f5a18924072a02aa8f19182680fc8b8064b8319ae28061f41bcfd285ff1f7db7eb727f48823bb1d47162626896b3fae2178bcc95ffeeabb204da5bf6c1101a518b8f8ee69dbf056255c913d493a14671b5d7917cc9eaa7574e40fae55ab4e180ec9a9df768ec9d61c728c1dd1d6b7e5811013b96517c952a85c9b162a1de60722a5858ed5e624144967b165b2c2532334c8aa90a6f8101ceddf8523e6619077777f624964f06d88da9f23868117630c3bda076376249dc6889fe84bede59177a1779f636ed40dd3ce3f47f079b149f00af5c44790a293899093d18a5373e85883f459120f38ea28b38b807ba9f3807f864b594d855d89dc6fe77d35ce5552d097f8270089158a14ea330ea3a77443436656ca1f3c4271f1604d55669a82f12912b3a28193e16b64eec8d737a25300745d08da9f35ad102cab016de7e279dd26c3193a4a6460bce8a1f4668f33a6e335a1cbfb3248dfb01d62179c5a9193b79f66b9e9162501d138afc6c7c28ed571109ab961a05d9df32855a71fa45be83bae5dedf2becca359e8426e423655f6cec36c3bf539d0d517db0d0cb6d161cfe72b60d9b1ceb604287570692a06757477d43aebfa87253c2bd44972d1278b6faff8bb16ba48454ba54c0e1dc913f495992517b3597fc87c69e661fad3c319f1940f150906df796cbccd132513efe9000fbb4b002dfac5af4a83ce9664264cc15520b87b0af5adfd156633da4a90b8005c4c747778b7370e4d2c968669341925a94f086135fecaeef2e243a7742754ecca5fd4fcfc80471c1e24bc181463841828e5caa4e6379765ea4397b7a25a93fa00c0abb00c53060aab638fb2399c10883dc9d617e757918045c179034b40f4458282557d5766ffe07e4142d3701cce900b24787207fe6bf767a24a560bfb4de43222fe0f6c2f159c2b105df3af4191ee1647c968d2662f046cb1895069d95a007392349d8b41dd2f157246131bb5cb32706b6ea3a1c28d3b62d275cf5f171e8dba57f69bbdc0d3376272900170a14ef65e437b05783fc9223ed11d81275cd9b1e6a127b000b37d22940b46e6b07e3238ce0a7f955ba2b498d159f59859a6c5d0341577f1ce74499008aefab4341d2302edcd4f3129b06bf3ffe549391d50e742ff65420427712942d10ccd9828996db01bcb09e192883f23a1a64b2ca47cf4dbffae6104572fcba11b76568b81883d105121f867604d58de5192d7a0ebcf8874eb30780266984b650ea1fd26c5ed90ebb25f9ad1c51fefcc763aad312623811635cf77d1e8c53741e31ad8b078778da2af4342982765d97258f44a8f4b47197dd285fee0f703b3149217bee81daf72b3b1541b8f48bbf87dc8d68ce1b2deff00a78bc075177e65ab4dc4898371900517644972f8922d46d749cc4c404ab88754ff5e5de7c7039ed8d90951096ffa01a9a0f9b1880e5a64ffff02428e74db6f1fdbe3c53b24672bade8aa1e767beae14231a2229c4afb127406afdfd4bda0ad5645c7966de6d8d62cbdc6376e0113380b721d101159ffd806fdee0d4773b242bf27ed15511285e52c7434b61f35881aae587774fb50a15d1ccf81405d09f92c930e1397072186c6ed6cb98a213213a3fee1ba4e018dc126102f1771632fee06e94672c8534022970f17f8b2df907c1490819c94c993c1b1656f3ffb798f0e9de08f1a47c28e75c58cb6f67dda121e0046e2769ac2a8aa882a789587f90daf4bd87a1af3001fae51bee979caab071923595cb4b91ca59c7bbbee296e8011f862398bb0d4cfbf4550baefee611446f6132f15ecd51a1e38a9f80b4a6fea2804bbe764f3e8c2b8f38fa9b495678e96496e24f7b4cb405cbf8f84e5a1c8676c19157e177939292aaee968e5fd3dc63cae98bddd02851a979256e3d3546c3242a7e0ad89eb8087d4f8d3204479197be3dbf50d2262ab34e560748acd221b0b840d6d597f4dbe7d33e4570ad5734acfb583c2843195a8c9fd7520b83db688b1a34a9db346b4090a474492c392790cddd15f7b74ea4aec59c17a3e000381ec09f4cbac8db01692493b98ea89d07ed4f6f55bed6ca80a6e75227a017bc4d21512914a2428b3ff631c0102ad2ee00943cf2c4fb898dd369b88e6d31e7f99e3c9f878f3c6aa542ed59df21237970e24f140e35d18f1cdc34d70e0aeb287d0120771b682296631eeba3a3a8e7aee28bedf8297945039f36df87c5fa28c59fcaef36099ab4de81f1481d0174b10a6ae3287763bf85f217daf5d3f243e269138634122ff96b60c9c8f9b0a5f1ff07a01534b1765d66cfa6e0420285d6ba376c253bf2ce0611636ed1b3fa030e15522916d2cd2a982e9511bebaf14432b5c2926ff4b9035148b708e276a1ec928e8db9925b9eecd83a0cf94a6fcb1f190a060fa47f8738f29828689b5a5c7c29f190cf190029935af3afe0a0e79a9762f688beef3c4d66a58a01321df33ca9e8b4a16283d9c8dfc37e11ab00e5d516b71c890b0345a3c61dc42408fe4562fbfd5f41b794053d919802caba05ef53aa11c23834b7363ab14cc4a35920d97911052610982ccb0c4f7723b3313e6c5862a4b9e868cb920ef0ce72337cf0301c1215cab82c00835b61b7b14665fe7636e5cdfc0e42b891eb806ea665955b33cb186126f3d0754813e57a8628a9aed8338dd5c537384a00fd1c573975f5efdac44c001570cad0bd83fff69d6384037e8ca4f8b2f5f1523b44b31cbceb6c2784463ae0fa7d944642f5d66876674e41cd4eaacd54e8f5ff0e712f994445c75bd9a85aabc2cd0aedb90880a67beaf02d1342fdaec741617f8b2364798f2adbd30abb1c41fbcdcd1307c845c805d87169301ad167feb6f3a8f9373ee22a343ab38b4e4902e18c70003afa23a4d8743155999502cea92e541a81af59f4a7272c12ab162ebd548488643240a935a936aafb618a8b5992e47f53b38f776599e19a0f1fba388474944a4d927140e4fe540d94dcf4af18fdb752bde66b870768fdb79cd99ed49d52acab495f94ec5ef7b254e06e5ffbf8b0418b2a91b6b3ce2390bbbbed7f84686dfcd7765725d23e681a2dba33c946c8c0bbe38b788c705a1bb66bd4dd8e52be5dbb0e46b0e51269f3cc02047e39b8b7d9aed8ee92b56e240be9152ba830f758b96fb115c0b3d02422135b93e73ca4a31bcda6e27dc067a9aa47d2f8b8b1780479b23ef6f5696be62823d243785030a06051dacc3b5e3cb8b2df23a354a464bd0aa862b6a690872fc133fafdacc6c66efcc0e5f5b9150a15e8f63fd914ff8db5435cabd26e7820d44616fb250ed1f8c0c132e3da29c658c2b5d3aa38fcdb429461c50e6bf69882b35a584897e92eaa924b9c709f56431c4b159b0fc9c909e3ec990c9882cf54a096e243e735860f3e8030c545c2df39fcc48a8e2be8174e06c79078dc1fe133861fe347ad555595fd4e16f83d275179d2132eeb0e49c9afead32b9b7410ff3681efec4898c7061af696bbbb051ee94d773822ae50f265fca59c58bba9793534c4ba0a548415b3271ec7d937d5348870cdfd1e3fac633a61d2ad6668bbaae2961f58b585c618f8fe2a1c6217bb2f029aebe62378d2d8cfac805ad56b0a75febcde0ddaa2c656a4c4eae9764f4d117472a32562f8faa2d59db03752b282e5064d111d52ad22a0903f532920e641044c94c7e747737294b23409242ae507afefe4a4cd5ea36667fbe83f3d2ce88523378abf29660112ca7aef47c51ace089abd52dd38d30110c30e53b9ad30e1d9b48b933615de7d3c37230fc582781876a433e8599288b10fe42b7da0d4b24f6e644bc05e449102fa992b659cf853b2df6d147a923ea71898d588938cbd6619f6123015c0e26c26ef6ad607b9b16723eff953edc9888bf4b512aa7c32d434aa859d6133e0ad4d0ff00ec1ae68821b6f090663d51e1876b10a126547aef20de583a2b55e9899b439d513c005f7e4c04e023bca287250cf03fc51fc0e67046f9fd0b98f76c283a205f7acc25da257cb16ccd9369f3cf0dacd4395a58aa8a447b5ac46bba34ee498736cb4743ed558e79aac2889aaabd3acf01bbdef8d3567f4979c3752dc5e50e3eb9fcb7ad5c19456d5f98afb79be905c6a5e3625016dd807ea151c549c904b7f7decb5072cd84a5688e7a3a1e21bdf07c437428c72872bebe3958b89db4bb8fa04de88240499906d206dac9265b1832f53e61653176364be66496aac4eebf8cc51715bebcdd58f4eee880e832e75f79c7706c467e07df5df968a9c4d454c0efe949f572dc0cb9168f7a041308213663877611dead3633fc40c4370aabf38eb2e855fe9ba4f62f0c832a30dae3579c8e462e1ca34e379176c521f5efc5e3850020fe2488e7d417449048fa5de1e1973cdb27e00385563c80ee2023852698e158d31c0bcd0668b6de740fa3884a8a2419910722a1368a47ef8e33152c14b895156622397c54e18a9f6a9a67fedf8fef571be832c6fd7a0195268e5099f8695d64ce692adffe6581acd7d36ba5fa1ddf8c07fd4b009330201c6f1fed134e230a7de65e980ee23517e4049f885f2d59ea84ceb80b7a6670bd33d7c91871c26d2b2942e9e91502f263524784c841762d25dbc2518768ec53d25b557f84003b23985bd7ec75e67ae57267cfdd8acbf49483e11ce942aae8861e396c2c06bfd46239dcfcd7bf5ded71604c4913c8ad697b10020d274a703bd6e723da6e41864b3584e1eb3db6cfa62d258c22b7db1823e1587d99870513d1ca06db61bad3ae42edc6253ede9d01af27cb6d507dc3f2a03869b5484d4ef32e2f90717541fcc3428ad99515abff36b1577a5c2361899ca0940b40de20a8e0602351c41f8b83a5d516a595ff8e7275cffa0de23c656ef6edfd164ab6d56924cc0155c2192965ea5bde0f83f6768a68df74e862f4f981a24a5ebbb14d1f068d272565abb40207ca6488a3b590014ada70e1a1a41925226d4eb53763277dc3fca385d96c11007a70dec3f70ee9c3f200c526368dcd23d439d88f9dca73e642730c75cb4b93942fc2c2e3df0b31c941f21e02f0cc45ccc2f52688310feda167a8fbf946ff721cbd64772edd68a3202300b971c07533dc4fcb207f3b8d0d44081f6c0a01eb80248a934cd801ec5642c3498cdcd0758cc949366b23bcc2b1dc6f754050c4c10c2864551f80a532fcd0d57da91b186ec6841269a1c1ed2b62b9ea0c23b5c283eb1f17dbabc2108a3cf22f6c99271d74f73d3b80c1bcb0f8c3361d3bfa20e82644490c9e60ad68198048e7713b738dfd1c8099bbaa5c5ab61542331a4aecaed246b09f0cb713e2cf561b552fe842da41ba4bee421809d3a11e6fcb79c7622dec2ed79cb2d9d1bc259e5f2a17851101aed83bb3c4ce81b827c1b710894f7a54f4face3710edb4211ecc64d464c3df820515ed5df507ae1cf2052eaf5a8be51e78c23e65915602860c0de91b2f3ff5b7f665a7a13c9018b2f2b958f13cb58931c319d08c81d9b50b4371f9ef71c90ffc4707287f2bac5570e6e827446001454ab3baf2c606ec5f993ed420e904a01701dd4e97fc37fe74979dcc3235f12bc89fb0b721f4ef3bf96e729a584cfd47caf8cffdced7ed31290876dab850c5fbce03175607febe5e10a8368c07ebbfe5f0a5d8941f8d7552ae936c8b79fe4d6f09ce8f32a5541de13fdeb8a8382a9b510cf7f5b1d4c14df5a620c89ea872285b65a677b432f3c038cef3304e06cb84b936fad41cac5e3bcd87b787ded8dbce910c2d9591034dd838fbb316e4c790dc51fb5b44149bedbbe3f7b521cf552717c2ab08e2af7b6b534046f794faa668a7f51394efa1864e27a6cde83706a9fa09883ebd0dd6d1bb60ded5f6f146b69ac319b2dbaf90ffe11eb8a2966cef505c3028add1ffd33e63d056b26b70b6cab3b047ce04b5865b71a31d2273ba8e68ec9af45b50efe9cc3019ecdbd081b834cdddb727c9e7ac43bf28d365d7909b15207b2bf5a2ada01c350de7f59c2154ff3bb36341d5c156b3e45ba566780a9ddeface5e1507f4dd5a5b92c9cb122b2170012357b88b6624cc0a069076004905cecac6961df90ae32a8e5a74080c561de2af0778c8cb3416aa29de8ad3fdfeeeb7ced98cd630e8891b4712b4397cfe4f1fb78812d81bb1b472403944710cbdaf8c8e11aa99955e8d60b95643e7be829f349846455041b69650a1fbf911b5ba0fc5f5d9b2c1c6253f5c5529445fd688697ba1ee0b77a6129996c6f1fa64eb73f116aeba0b2146e3b31d3ef394a4673e67769851d0597a2efa116942b83214dd093d6fb86ee75beb365abcad8a23e5b4df99670d4af89ce4fa2194808991bf4b9eb869675b7bb65615526f813c6b7bc4b5f22c47a7455a9ec6f3ec0676f052376b9f9410855e16179a6a2ad003471daf1bda71fe049a35530c74858b785693a9f87b95c226457eda3e6498468e7be7e4e37da87450c3df11d3ddbccd3570b0aebdc1c5d441cde0102f90446a329790e86215ae1733924ca5d01e08f61cc98ae54fab1f452f4c85d7d36482705f52900d49dbc7fff57ad21b18141f98c57b426bd1d0becf2062fd76e2ce4c5e569d9b262b78fbeb00a82114cd4c444bf81e634a685c9a8edb09d606d923864787b5091411ea1ac644f5cdded38516953cb672fb081f48096faaf741ecaea3790c537807c42a00b059debc1f74a747e7ae03457cad08a3cd14ccda906b01b4c660933a2368b9c5943721085590037214d5d4498ee064e0db7af4e1b8cf4c9d679be181121e65e0fcf9dbfff835b487c6ce2fc6fb96036f8f3cf8f0fc099afb2b54d0fdb4f7e66411ec701c25cd29ecd3b89e64ac00c9a5b1868f49f89bf6c391f164895d683de2c99f732e5f2e442a4e5efa6dd2e2a6e986392ea2c2de2dca823635fd8d4198808ffb7e64d10370d13fe3f7124af8da35c67e1057d73346ef7d3a41a8d3da383d20c504e93fd8d859cff9765b90e6f37036a11fc12c2d9f90285315e9e2423fe9a9cf820d772ca5412bd151d986f2274a0e73c407e099de577e693f299e46c7ca1c7c022431911364799575bf3ff5bb2ba00a07f40e7b64424df8c9725c99b5f040219d8aedb8984a7d876daf2c1837aede7068c81039bb3d6829893cacbcac786a493d12d4b7335ad37f645fbaf24841810bdabc99e8a3fd52b190d2902d76b4be9155d52218bcf9049c375070f6b2449258ef3d86c623de5b368af3b51a6c39f8ef625b7d8714b2d1c76956a038850ac8f7d0ef6ea20d6b76256318acee819bde01f603564aa73ef4f2fd4d014e2d17ba0431779e2b939259d3fc87cd87f084832a6cbd66832bae18cb826239dd6466356410d3164f15f47ebed0961666276472c188e2a8dfed486fe8a4f035db41ac28a4cd18ecee9e38b827b7095e96e46d2a38e620da70812176847ae8a6dc014372457544fb5d6f91ec133b0f69cebbf24a093659ef802f659a1cfabfcdf9cae339b56dcf44e588536e02dcfdab90dd95888ba81ec21a6de29181299300439ae8dabd5950a1f9a5940ba12ab2d333fe98e1751de78f955730f741db968eaae0454da9c001da7efa58fe80405ff5063def8cf58fc6a84647324b2eab6aa2e8537024b9a6ca4884d467d8f53ff8a578787480f87382d413668cad3c9d6bd739b7a865f1962d1e32a97cde6433c9d3eeb077ca345f016c0c142c6c794c4967a15918a9f6e58e86faa74d02d316402d6378e6d4978a1adcc33316d3ce511a52fd11f30735a2337abb3862110607ab2452ae4486b04222da36c875a4847e1d94e8100fe4f71acef26098fb35ae08fb4b138d8a482e156f0ab660cd04079786d2a78891ba48169ea264849e9ab5fdf354d3994b2ca7f8ab5337a8c54298548bc2dda845f4c33cc3c810e2921dec2891085893bbbeb90811bcec36505d9751ade84bbba5b8144e3aed4bc4cec7da7717695ec7f8da77105e63542870749bc3e34709c0e3b831585f94f8f747a72d4ef5aea7dd49e8c2f59b03ba3f6e0adbe0be25b420688687a79341cc77fd4929835901cc8bb38ee44a5c2037e2bd3ace4b8dbb81a46ed6b3de38878ebb6449f6cdbc3442c99ba895f3e3e09e21a79bdb914e48be0debe532c8d10983a98ef26a78bbf7b8097658234f024272d6b197d1acc910735cf6033edd798b98be80c90a33d101c1e07239bab05f87c2b04d6e1d04eb258af40d73d8ca17494dd47961f05ff6a2908f1f0c4e2230428ce3e581c85b8bbf0b8b934bfd792aa8ee7b15b82e6d451570465c8498020cb5d9b56e8588ec344c0da2606074175d387565230f58940b7fba2faf0c966736a0ac10db9d194cdca6240b34f1f96960bd2dd0775b68e828b409a53c111999df99ab42b6e2a8891c537458cce5a02cd21d131b7af85208c2863f4bbe6ec390f6c18a9aa76687c1c0fdc54760bef6239682058cc5a2e13a2928e4b01f44332a7a0da4521e9b54fdb60f5975a11a355e088baa5fa2e4371a428fbb42a108da6e29ca24ec3a592aad9820baaa256b0211f1f027ae29c9658808fbed801c6b75a569a1cc6a14b32c13e45b843b37cfb41f6f219580b3c443972e637be1d6eaeb5dbd229d868d0935699565df9050e7686206ac5f966866dad15c52a208d87287bb379d01c930e578145a25a1c020d055749f6e9cf8353ba1ee3285aae6ed2938f5e46405955996d9be23806c4162fddf59ce825cbfeb3260283fd633f855882ec2a657f746d6e418324e7c55e89457dcd290dd0fac5f2ce8b81b79af29da4204126d576cc1d20e3f723663bf6585e212f16c52face77156c51d42c5566b110ef333e03f4f45ab9f73aa093907e4ad4075cc57ac7e8eed5540a693360f19fdaebce42766aae0ec86599b1c09347342de0266f6501b2224ceb479665eb0259f754a31536cf7d44f2a5511f6316a7837cdc9020b27818099cf2d99d3c2a7e9a51ae4482880a90b29c971d599845d9d6a6c36a91a2ebc2375016874db382372b26223bf977b905c906eb1d335f0d170865137878126fcdc7802bbc303b83d6dc5d08ba908ab734afa10f1545cd1ee836f5841d7ededb6a103bba6159aaacf364854ca255e8b082d5e9b47071542e5a292886aed29c63e8debeff2f81ecdf70386826171589bb87df4548265ee01ea15b76ebb562360215041020c6a47db38bd60245455e774256d1b50a5ca1594a0387794d4508b0a2371bff52a7e227f135f076b8105541b2c366a6eab524124a89de70173d8dec7b451b550fe1c1cd52dfc19060ec94b9a5695da99d4e07e1cc1f4a4b5d66b3ae2cd5c3115665afc081aa3c327be0d6f7fb16a966df94e6f4e43f56fb85a4d027c74f7ffff89c24745172539fdb8e31223624b026b3c1102d41a3c54e76d9e1fa58933052b7f68b4d3776bcdd79bde41cb9865bf4ca5d97e60b95daa8eb3a9555937a0a6e5806d50960710e7df70ec65163e61c3a11ac7731dd50501a88c79ac2040210b279b008dd81188fad3471fd09a99e2bf0e977d2c311a31f7486586310be3869d801292b8f5e893eed56f3eb33569cef5c32efc0747ae413969268a0c3b504695d66ba7f316ec53b8fb803855b0f4ac1d84d02dbc8ab705a3c19c8b16cf1b1ade196981c52a1147556986c9da7514b6c6b68b2fb957a65c35e4b1e3a93599f16eac0c753954fe1636b94e0f47691a02822749f87542fe627e42d489701a1faca39c88f2dc4b6f90a2ba50518c54df962e805d9858ed00c70dcaf6282c215fdea6946cdd46e6cb237c4a1f99f54428fc8dd415eda57194fc3b1915f6206103a6b4bb43b20132a7422197bb559052d6d40c683a1385e2af934267473abf96d27672b8519ec0958ca76b925f0c6be5bde0b92e5d10e8170d207d447f8e3d4fe7f594fb110998c4722531e623d8e5cbb7920e6b496b6a6ea6401a324b7816a0b888dbe3df436a9d031784c11419215b10690cce23863eae8af0f9c0b9b983098275d139ac9d051bd393661d27dbbf76214d0259773fc945fb6b072c6be33ed7f739737b572f2cb5f567296c77bf2993e0ae85ec143f0e124845ddf572485580daeabf08810a13aa22928b449664fe625dd0196c782d323876037a4609ed4e312693099fc7dc257d5d705c62a0f3be75b48043c33f4707d2003fcf55ee2ea22c53ad262713c18c3a570012ee88428613b36086a30f87fe47d76c838bb63dcf702abd9cb480480209ccc3f2ab97c7612afc77478bd3b60ff2619f5942636033719f0ac314108af9d22f67ca4ec03b348ab8da89a4d1ef679ce66de6369a6a25ddb705278e7502b933ccaf57d2976bb31f674ccf3425f24fe742f8ab2fadee5a1ecf893ee7882af55f75ce0864b64e838f7eb281417d8cab4817e9d1d35e82e69b583aabbc0b2c57c647123c4e5e9cd939888a321d282fba40441c9ac52c4f94f9bdae6341f9f05663b12f835eb3294f82a352c92c6e9c170d1995cd4dbcbcd25fe3f687cad9e5ee2219d19530b32a583786efd966215f448ed89b7f2dd875cda3d69ca307c124833818c003fb04f298ae63e681655a69aabdf485a7de94bd9c8bed907f072d28933b488e5c3ed1c2bcf471b46236364c49c0220143c927066b55e25d8c865dba377bc5ba8808f0379abc6d8cfdcabc3e64b87c4e12b3099f9b79a51452e06c0f372c89b32f8462d9ac444f04d172b6169833d8f99970072a9d669faf58afc232775f6709d5e8df7a9548620f7ab7d53ad70e8167de52438379c87a161aa24dcc0eac7204c584120ea61dae120eafe4719aa53ecc29235408465e8291b91c8e320594ec802ef5981a1ce15074f0cc71e058d0f1b7d69bd0a80e2d16c943af80975ab154a58a3c797a84b3820429acdb74f676de5badaeed0008275d1224f809cb83f6449ce8b4097b45d1bfd6ea56d776cc292f183a7079e5b66b2dfd6296ba0822e83f314f5bb1d09128c7ee22065f49ac01e476c2e6b36bfeaa16bd8c4bbf59da38603b7d10ed5de1347642939d1438021062c1483da1d388d490e04642b03405760c1a210d68925d1a670a8f72ed1a2a100953d40d8191d460069175406a71dd6ca2a8989afd39c40bd0d4cc500a8db144e34160a12ed6e6703a34fd9d0ffe902fcf85c299e83c99d7a110d6aa7f136634abdcd998078630d9baf3ad37607ae8d8551ebee3c2e52610167f7a3d2023d82f16e1117fb644e92c3d9ca6ab592dc7d0749294486f0920bcaf0c5e16f87e5df605eaa6de360bf7ed8e991b6a6b1ba74e01152a5e1ca11ff6aa121eb26c27277c7db7c9494363a8efc524be79d01e9501dd3545fe20dc46342d7c5574ab5a3e5fad8a9c0c340fa58debdc1d0f454218bd26ad53e9de6d9abb963ea552f132cf5147a2e8e5ee089a5b1cd5b60e97b6093e38754a59f837d1ecf8554d5b1fd00034a421d1150cbb916ded398184d989eed83906f034e8a680cb7d930c59359a97873458e018d13fcf83f4466d5765bf3aa356d3ec8e45b3dadfb5bb1a816c4448ae5db5ec0aa01d06054e1316d058478560865e0abc98ddfadedfd7b40be7d32c2ce127ec236b788c25476bbdc6fae2cc2a9f20a85375176ce8745592ed33f0346e47f17d8998109eecafd409a78a05907550b2b38a99cc93b444a7ed4be082b8286b22704c8765110236c845cb8913b5fed8d3c9d3e3fb1861059aa9ab857a45a04cf4f4ce55195576b1afdd4d1a1801c9cb07c30a9e4c5465c156b9b84a1712b584b3189f09899a8bd66179e10c32b2be7290bf7358d2c7d8b419f060e46c61441e5a22cb6cf77fc34077e820f3d314352eff49bce82aa16f1d92f5d8b845854115d4b5a4c1eb533c536fabe28cd81d8a9319ebb16ea196e9473510e0ca30e3ade960edda15d08c0f70d1a8302025611d95052269253755765c244396030b66cbffedfcb07c8fc62d33051ebe412a82955674735ba5bf48d70463cc883bf8bcc88087366114675df75315ba46eced426b961b03d7d52c50f50892e76611a2768dd0ebe458f288149c7710070ba5796d47b77f589ee7833aa618ec57c23d50e2758313a24b8eaaa9e0305df12f16f4eea22979a8b49a9532b1666878b1643862ca950527ebaee30d92badaae06a1362009a63da858b1cdf3b49f2b650a251d2c8bce0c882ac7cfba72bd31c0c64ac69b0e8717cf906c315771cdd9694f72b7f327ec6c98b4e8475ca8a0d8de487d0edfd99d27e3d7ce67f3a2cbfc8069305011818732d38b54c83008dc576cf67c39513304b8fe639d5e619609ec654612eb736ad68fc875136c7c57a0656d87413ee2fa8eab4e284192aefa1b8803b2a753b64c3a5103313636b17c09f70c3c422065569dec5c80b9cde038e641259d8a9a085247151558701bb5f58fdf77db3a63064bd3ed439bb940a544a1a4c6d5eb8696bd055404607d921bb666b6d2fad4e42435184a60985f233552e3d92ac86261e17f1e8e2724a9b0f93dec9f6452414fc5a08464b3bc638eb259dbcbb2d4d1153e41d3c2287fe8163923631cba04b3070138de293ccc5992d759952c984978eb0ea9471d0050911e47688f1bca34fa5aaead5d1672d076ac671df15ce613db12ad521317676181d406b89c2275fcc332e06a584216dd34e923594be790ba87a2305616ef810c5c456f4d0b8ef9da244f29bb2144a26b9f2c8d8f20dde6836e8efcc27471691d9253a7e064f5e113ae445dfb7ff3c5aa8e350952752ab528a848091a2b02e29aa299c6ead6e0b146bf73a78c77a2be8f94cb768a1b42810908f776b5a7bcc1b6af6d3a782073d5333f552e5b8ad57b9628654e70e9f55dbbcc52171e082f567b102e9c2bc75d357d3aa7e5eb7ecf94013adbb97fa0f1f8997f1bf07662a8ac90f08fde88c8e3ce99ab3c43255e212eeec2eab092127f4fa152cb6028b2129e5dc473f00d24d214c469740e54575f871bf5a21a36c6b6814904f536cd8101ab1d54b7d0b6396d07847093f694b0bdd342874ae0a5ae653da7f5803ca1121a81231d088a4fee4d8d0b6e5353ef2710d822cef2c9b7e1df3c1ac2ee943c37bd6db0174aa22f2bfa6e58b0e4de2233f0dea5c1fb8cf81210f6d3d2a06d763a420de8cc92f09cf61f52cc1e00451fcd5496d6ab151a510335dcbb6aed4fca7142baa8acab9bb269db9e3255dd928516df2ec989a0a84356a7c5925ec2f00903b4441df3e25aead13f259336abb6aadb39a481c783db69c0d567245a08fb59f84cf6da46ab96db88a7af4f4be2e08260eade34cba395eb770945b38b4b2fd67b5aeb796892647608e247f0c5cb1b9f2852cc91778bca4eb63c2125ea0d13e2b707ec2f7ef2bee7cbc8b6ff961d1f2741de1fabcbb427b2181bef884b604f3636db4cabc16bf4ccb6487a5bf456044422eb3c4842c4b941ccb0e159b48e7eec9dae3401ff8855c0605d89a87fd20dcf0a5db6b3dfacd45380919646220a4522f3024f67926e407353a084368366ee7e87391ab1e7e23972a1780c0e590f47916adb4d5e41efec9c85315a33b31c1136bbae4cadfd177eb839d69ce0b14cbda930e7f98a4dccf8a31a4bd2867aa85e26e5b52c39792755c3a0211c7cdc9fb563ae8c3d0ccad6ef62b78320167ae0b75b5444517709029b272d07c865d239acc0554aee066833abb4ba7cd29b45a3c0bed6732f4002d34d7c777aedea02f42c75f458d539d3a6ccc9110485908d809eec2327bc2217c63f082e07a499d0cbcac260f2455d4c7996ed920bb3babdcae353619e6bfa8d1c31ddbd01891fedc21883eb67b03631338b18d2379aac280b25d1841b9ca3664e766cd788bbb9c9d61f5d795e0c4f0da6e8268adf0d8e90f5349cc9e68e906bfe36f86944ea3aae0bb7d50056dbf78fdaba2ba79ddc9ad8f941abb16781be6f5dfbe4a861b621d4a313e090693dfa2bbc2da3905b2f1868a7dc96dd1643e9452966a515b141d0f6025b93052d85413ad7cddec939d3afc9953d1ecdb1ea1adfa47113ff82bafac38a9efba021942aeccc50ed55c04a43f352a5eeabc406558d50499a6938c92b3aef70b29d160a607fced5f7f9fac54eb53047a07212cb7ed220dcf64ed7b29e44f5b6088b40a3aafa0646502b4646cc2c81794c2c5832242881a01eea939934682a4383fc1ba23615d70a7dd718a5d38c219a208f86df1bafe776a8a88e8fbcbb11ec2a94261f1f007ddecc7a44988919f12ec889f819040c1f4fed6001ba6a58f7d965d44746e7e27b1929d8d382084bbfe3bcc4cec082c873d206e06290fd8108c1b9b3546e7f4df4294db89faec3341813358d9a19aa9bee69bc82b0df49b888360c28dc255575b6b0dbcf972a7995538c43e5ba705c7bace75e60a36e74c720bbfb6b26d14dd0949f3cdf14985eabeee5a4ed0ec23737edd3381343971bd40c5a3997fa83005d837a96901553782f523928265505a010e0b9ee22dff993c4ac87b4e9d4222c566a433058870fe86cbf926a1444ac002b89b822fa80c5ffce8635b9181b5d523d0f74e322209d7e07af0603339456fdc21e79a7e1d2b337631b5dcc03c67ec2e6a00f295ea392a9593ca97a788cc0c77dc8aba89943be878322c33911f2dbf25a485c4afac1ce9248ba9ebd4781c3f798955c689730c89b3c890a3d16ae62f5f0419845a77ec13975a7fb7130a7f9557969789d562dce09652330b0b93a563eea9e6689635d5899892632b88c149c74cc5b765df05099ce05ab0023b9d1805942f1fbb5fc2c8eb6dded863cd2039b5972617887324f4380da06ace21fa97ee48b82887a6e57bd6bddc3e6addf91ccce16bbdbce9899ce81b2887d95fd2f5f08dc93f98c58ed3f861686e47164c08b3d1dfded075a5791daa6eceb41b45cbc670231c51045ae2fe40abce5cb34192762a0c827c10f49543e82ab8c46c456267d42a06a3e63cc27d133af26243f0975363525ce626943287994b5b3b46c9449622b74ab2d54e5cc98e8b241b144a1da0672476cc5bab8092317fe6ee7d35d3485760f85168369fdd8a1246ec3db3c4c3a8d214081b2048735bbce0e02e31a9b3ffb9a9dd3f1365e15d6fe8ff720f86ee8d6de12655379375712d911624898c5e71693cdb03e041e8aaec1c246822d0c7d2e5c54fe6bd0b4e8d0e15c75654f5d61c3a4c667539804a17923adbc43a3f8b7fa4c2d50eb945642207df6fa68be2091d7cf75dbb95941f91445e6621dc9f9b0473e6b3cf4da885c207ec3768b7bd325c5e0ac9f6c65b7c74cc0ca1aeead6301972715b44df1816e01e3464425b37eb5fea1e068b23ec1e9dea78cc1675faba9236255de51d53efd306d0b6262fb7c4611fcdcc13d4dc347a9a5cc8ef500770ab5a63fcdac6515a9be54b145ad66c1db8b43c1321194dbb337d1fc51d9935875ad541f470eccad22d7239f8f65e7a8d5378d3de60439ab353ae86677235e8270f0491484b36905fb8f8039a13acd4a0c3e1fcd22b773d2d45e7cf349c85efc76b0d38bc27a144818b24c978148b3f9a196e0d96c97e4463fa68b59ed37dfc6b41b213b72aebedadab4e0665456da4ad3056e1d007d7304a07ea24f69863c8517f2d06d85c8180e388612397bb08d046d2f4d7836f917a002eceebc19e8f862a3034277930f261b9ccaa92a59f4147374319030b0728eff722c1174b0fede3cc1cb779c25bde66fae1f7a26a658330254fb9d08bde1e867e3fd4910a77efa5d914c33c5f23f433dd6810bb7d8b67170a2f36d1bdb5196dd829dddd634e0a39d73468441bf6011477f020bea09162601d4abc75ae5f4935edbe7fa3ce883b2dbbc83ae486da8cd33ba0853966e663200383d1be2f290cc6448807985c56feffc573b8617a2615a059cc028b49a9be018f75e045d795a72f0c92723d31d6afe06a85f43309e7c7583a1de4f8d599da1346312a6ea19ef7ae63daa7649c219b5ba221b6225d128593186d2fe8b49ea295b0bfcf074b66920182f4afbc2d196edd500240af8357c935a8dc3e8424ba31f9cdf06bb805f56ecb368b1801e53c11f980619d62e1539c28f5823fd5a8ce5bf0642f9a9e830ed4fdbf9a1ea10225ee2774cbd932c734f380e1574885dd99c3e8b5ac8a73eb5efe4c7881ef63084591dc8b8f6c6f2329661bbe2a2d41639c40eff896f788a0acfdad91b1553ca962813461e3d94815ecf982585a20a0ae79414edb9b66a738350a88761acfbed8d9006fdc4723f44718c77693598af7d936f9938003ab397293b8b0f8aa2a3156713907aa1dd58b3ba26bbb2da1ba58e5c5fcf79e4f069859a9ff1a5d42edac2697f776b35a637fd52730452428ca7b8ae1522026a1cd8f1451e65024eee436f2b5a7ee4c1f02af6540410b698bcff5106cb6cba7851dab2631d473745b88b3170c44d830de6db6e5691d0f41a3d7bc8ed4e206ce611b81bd9ae832a9118b63344af64c3c30d8286f6da304881aef86f1cde5d44b6c8a3b5bad6c6ba5af5a70d680a7e7208107d98a6fba2dac2a0d0b9c244e57e36ce3a54a8310eec15584a45e4e4e6a7f33e4d382f8c5724ba3585f1fd7d38fe6a476d68cd36e765b517fb0d91da76f9c4d5db0d551dc23f2a93d69eb6c0179949bb045b3a1dd90d6ce208af670e7fe68e831d99412d0bc394746ede0ec69eca5578a9f75d5212ccdca3b60e6861582b9b641d52703834c479fb63458d4e23a8698cf4fd0ce4fdda9ce6fa8db4e7c84ff00945a0504759967821bd21536914b272fb196521416e3d0127896018f6b169fb3168b5d260515333f74b609337c3b6d0a221ed4d57960c084d0df9f269799f551e89550ece0db616ac35d01bfe03ba4bd4241dc5739973de2e3c839cf35246b568f874f7068b813d8acc22a5bac08db76e9ac958159788f7ec5eeb23a8566bbdc8de4da5f2b34efa3fe3988f7ae6f1575a68e51c296f229652b3343ecf4f4beb929600f4942ab1c1d9f51c191253821d7bc705c1773b3317c921fd17ad530cb753de8cc348b990c260dba337761f5d94ce66ac2b6d55630f0d666f01ee146ab97695c51b0ef62d9cf31b0661d3e612168a758c2ceb12e2ae65c02ec94199643131db36cfaf1b808b928d4b15f8bac619f19b17b7bbe6fe3139bbb4aba62f0d3cd42d83c7b03d9a4379f3d415aaf0c0d41d63adbf18bb163af8fa3f99d72558935467484dfd067eb88a6ffd17cd8b1763e6c51ded5d12b107ded711dbcfa616b1bac79a9a08e4164a9655367f95abbec006f73c9ccc471709fc6e93158a162a80bd0342183eeea7f9496360bd2bcf3749e39fa656435063a97a5415a7a3a97e886d252ee8996f4e3b00369070711f8273ba0efe3ca02a36c60735e71063db65d7c3a4d445853cbf56dd8a27c3a4c37f39ef27fc6e5f66fe8f7ff68d3cc75b9321b54b1350b73820b2f96ca4c6594df587bbd7859d29ac51e7a36e4a8c7bb15d4f852edc0287163207cef98662024dc3bc994c2ce5b8afc7bee8566bacdaf245a545b13b4eb970ae48860a2607fd4254c6e77b92c0a0da296316da1421a348c231c8a043c219347709bd887a827ccb0c55faa8c608a914e1482a060826200d9e70d53a642f5523bb6f250dc34061c640bc6b41f9c93ed3eec6f63f95acc03fa2ab37494a273a76fa5025e39b2a9070f12d5c51dea87fe2d005b970d9f843d3bd29157eb51300f2903ec8f3906ad7c3183c170e400606501fd58302c80ee5664dcb92f9d305b63cb968bac02a1f1d35f52bbe1a4bbcb5f3f7e50e63d979e1882f15bce6c01b14cc11d15f3ee6a75f132b1360fc027fb48d07f54dc019760be19ed61fc7451e891c539265b83d3e5cbf18d51da279c0245d83ac4710a86ac0213caf48f52821dd8441780dac554db6ce6dda50e3eb7e71c680f591b4237b80d2c8ff83e19cb32abd47783b1acc18643af9537865b5bfa6d0b739d8186e9dc5032a41bbd3c84286ba9cee4cc55807206900a63fa06e565158a3ad52ef4b71d872804e19ea0acf1c1b1f1593cd4045504c0c4e8e6d6330376b37f718a017307d2ee9544acb6cdc55e19e0a67beddabd7b69aa61d9dcbbe5b452b9ea195eaf3f7610218a90e125bf4bfda552a9e73542514356b37378eafbc6bf8368a71ed5a68d20dc628db2d2026ab4c2e6889e4b9a681ec4ee9b43008b550f9a797fa314d357b64ff789a73f59f5a180a2e0ad3bb3144ea86fd281a94d220e2f304cfff1373a434b67cce99558586088dab8e032e243135ed22fe9f9a23a89783523f5f338891468c76e7e56ef1c33c962ca497cbcc99e84203c26c8480aa7fc8b8120229eca50974975b2ed9494ba9c8b8c53428a7d17aa61d7f601407f54d53822ce40e22bf4d621183cca0a9e2db2d0d32af59d6a5a07f81bcaf07377a1085085f2a6c4d958ca850095ced3daa559f1b14d06827528feb10727259a30f3f864253a790dc1a8324ff8452d9df9e41a916dbc6dcf75b289596cc3a6c284c3db53c5a980ea3adf59bf1b270fb18b54f2aee59a67d57507c9d042646e7a93360fb096f420477bea87f938e2ed8032e394c31c8fb890c562ec81d6c02c17fd1d6b6217cacff16134edfaddbec94ba8d24fac3fab4a3da71b0e03764b200c1d51c5b0d9021c99208929813052e8dc4f41fa5709ba2f435610895df7db4f17fd6eb8bd87a2434a802fff33ae5a998f4dc2ea54cea0e94db4d3996e3e43726e96984be84d6dd3b5e4820a9b06936ad4d185506830ad2a7da858dada71d748900420fd10fd797568846c5a30414733a3cfc2d54e15f8e466696751c65d5a64785b49fbe190da5f48f234ddf2e46979c6638a036d5f8a9c060b9c354f3e07144690eb7b6d6e9a00b8dfe405bbe118e2bebf122ea91426cba55bb97f6a14c9bd3e9dbfef7f13c5df3bf5eb2d505735fa4f6474f16a9d9f1f35a92915f9be46c7ae2ecc7949b651802a5bec1ba50f49de11c655cc5932e269d221eba2b01cbe2eeb3daea6df8151c9cec0319d73e8a87c04db15b4127527030c4a24a6a83ba4ad5eae4f8cb4e2c24cf0ecec981981d2c7f243424974146924cb929880253c38204750c4befbbdf3f125cc65e3257281657b3fd15e972622718c6f27964311363091702f3257ff35f55a0a5d09a35b62fd63ecff252bd3dadcba9557e8348b932752a8d4849e55b4d54f861b1e5eb9cf81ea3edd62d9f730de049218b2f9311aa944abf6b5b3e9c8d2e0fd8a5dc0ec8219127c2f8dffacee121ecba8e1b91177b29770628c9ca2acbcb678898d1124c81d96b694d375c888d70d3f9aa5331811a20aae660cc7bf197d26b9df733af8035a2d119fb63090b0662237655930aa71a87bdd34a45bebdd57d7c3dba1ab698ce295f6506b6cde491f26e889226bace4ce828004929a032880a492e86ed0cf5255a690119fd725c16d02556311c31db01c1f51b336162247a52c6df5776bebcb294d44440962ec24ba2bec8e7c8acb5783546e2a5b46bb0776ac585f45e0181b8cd89c4957ee0f9dc4a25b93e860c0c735253170bf75b6e33c964ca48d050d632bbf63f1772ed494af44439da6185f0234bb361ecf2a012d8c8a3791614f0113758c552b3f54aa69d548fdf161a746534b3763dbfe01b7593a6f9a34bb204f7a854ab7c8d602d159fb3e52994c30c76bf75023414b6e627e06ff90bc544ee829825e610a58d28c76e7970d2105b219b16f2aa0b915eeb9eb2c045c38d90736f7ec78bb0e9e0b3441959ba0b415b53145a10c1b358f54700afe0312f9a1e6d62f09ce405f7f4f241a4211edd801e2de17f41e2292b34f8a3ca57bc03909b92b5d791d060f05a3ce6f06987ecb612a3cedb1e810eb33d998e19c996217d3b0cf9828d3e6b3cbf2d7951231094261cfe0cb6243ad3a66a6842114fc9b941997c4e6830106b0c9d23f926a274106fed46630c2956ade899a6df9cbfda2700b4b200af319f11bc9c4f4513642878828a8c97f8321c0eaa9b6e9d470e04b7ab1a151179d893be272e4de4074d8a22ef1280ce56c0e2a56cd16055e8f32657a956c930f3b4f484dea725d18dcb487232e90d075931dd816b7ed8830b951321fc303e2b1f69693d346bd0fd65d032c57b9200f4d117f7b2af970c779c225734ac07bc6ac93a04ae6d5a23fe2be7651782518944bdd24997c61bd44862756600e054e96c8a299485730e1e42e63005cd76a7353716a932ddd9cf0973a9f41d8dc39e07079bafc307c159efbc095de30c5a1523d0effb2fe024eecb593a25e6e8033063ff2f40d377878e50ca6b53dcf910bc926be7411c64148b371e03231162af3566bc99264d50db7f266582a421d19f4574fc53b8a9ed01d5b21163d88ea19320d9df5b2ad1ac376f3adfb1b3cdaab451fc6fc9c99f2068573f8f373ed40e135b38cb076d6c98e614df8be84ac17432401ea3e9eccdf1bbc5f2c7f142231ab8bab7ad3bbd0f452a48ab6f162876f23b367282b6546f402d0473bc76c7e832eb5017bbf6c8f6de163d38f7d6456325fd7dd25dd2c062e9d2031b571738cdeb13e5ef26138e2d8be7a604e6b5b91ae6eb82d92f28f4721912a2baf41ddbe1ae711db0941e9513bcd5f3ce62d0eac57a80f5247d81f811ff9e49ebee252b839b75ed60a782b6cf7492b0ef597c50a03ace0747e35be73fbc6d417f851113a86e5a597aa52d06d28ab02eea20f1abdfb16ffc07f9edfffb56b80c08dd5a995a44ae24ca8141e395b76519bd9b88c00d83f09b5e795a586c421377677e5294c2553703eb4c0ea5dec6db803ebaa576d2dde8881c7c1096700e43f0420bc0deaec3a545ec0272f98b04ae073b879bcfc282cfbcbdd7e65d46d0c84d7ac5ce1ebf4a93fdbe4e43bae4a80acccca5e5d4c467cec3ea5c3335531f9fac07bfb7babaa1d6869a38bc473cff8415bdb6b5d5cc2b7c6e2924782f11e0c7aa8838d45ea1d8a3eea4aaf454d287255a913b20ddca69c6f9263f28e2f27f294e2a8389376223af73ed42f244a6de98eb92ab62b63003ae0b04b07de8556ecf3ca9d7d65190a2f0423eca0967e7e0a7d5fdeb16254803d3559ea7c634b56ff4b517fbde630a6445657ec907c6876ce8118ddfba4fdf57bab19444b7ebaa0558d0c14a241b2d45f3098483d264bfe25a14b0fd936575ec52be5d948962307b0e3eec60f506b0d03ad44dc9681f9db218c98aca983623ba2e69de9288f625e5a003c5000144ede8c8ce7c6a9715183fe84d4751d227ae03afbd5e822bcd6d9c7760820729ad4e052197e1573b27d479c1fdd85d63fd6ad56081d217d6cd35c55559b8c28ff9a2b1caffe7bdbfaa56451357366d8bb8d713834b41646c4b45bd629d65b0e9cae2af3b56c086d632caaac5b90c167ca4e2e7602125a18d1c549be28de0ead7cb4aff1bf8009750202e174e806c06ed6e0ee138b6e48bc39e2fa6bd2eb6756a6f834373b409ee32113c6870a865131f6256d98a30980f31fdcd82a1308d00377885236d83f70bc064d23af2b0625e41e5985790be5dd8455322d0723d7d41955ce57b605057ca23975e0b7f43900d48c60cf934c5207e9c8640374053cc7c08d07350c81b9a4343a13eca076d444344ff7daa7475a4e2302fb0afad87e82d403e81d72111cfa4af01f8ea9df26de7152f1195ac4d0d2022af4dcbeccc2e708e73316f205418a2ef1d717869ea82c4de6dfa57d5049e8b38f4a87bf2791d5c58811d644630f26c3f1bf8cb41bc667f810f9e0daa391d8ace98f5af500cdc1c5aa5558972b9a1d93292e091a01da64fb941e023a4a91855d04cd6bc17b1a6d85e80a8862bcf4a9df46ac57a13c80be0d34f14f8402fa41b40cf83703feccf389f0d16b24379ed0246307e0a3b0c19df4cc524ab4a0f029e67e2192b4db9c217faa1ec6d0dcd904f7b970514b3ee275413d370d2b9086b7e6df3a4a344e7d390b56d13b2b9d0b3a608702c0d07f299d647de18aa0c6fa5e60461fb60934bf47f28fa6f2bfc3f4e231e539602435cf3173f99cf5d74472424a85ea961680765cc4794b301a36d018aac6336cbdb0d11406eba511efdf4fc6fed5c4ce6f08aa1625403d303c31ab5662885d6c64d415f95896e132f2a14ad5cafdd374bd328cc7d29bc5a898b1965330258d614a936a0248e60c95bdce68ec9ae8ce9bde8cf373264b1c4a51ae29d11ed093e942254b798eb0c1f50ca19281881d7b17bed555a1dc1ebed6844799df6a7201dca4fa3d9ff342d88a94ced70bfb6cc297625d690c95790b6d49c5b0a149bce2c4e4eca0f76a4f198aaa49c124b86b9d62b71080c976c35cc10a8a82610e2cc6ede32563f166a2b2e084b6d2e5c72acdb932192ae8d69f0a690c3855239e233bf67bf5d797cc082b1a301188d4521dba541c69508016b27327830f995a42a3185f4aa5dcd95c318689e0296aa031e265caa025339bf6839e71a7cf46b298a7363997b78b0ee4cb957c890621568f5bc80f321de38869df95926e2a1a16424a08ee5669e6489ca6d62a57a4c36ad1f31a7a2f2f688541c64e9912ad8c8c7601b732be10c23b36df6fdf6df92d641c1e33d4651b3bfcc1b3700171398d58b0c3ab36a9b4dc20ea0c8f0e6158d92ca632749f1ee89b0f888988d2220f614f5ac40477eb987e59886c64a42946e3c7e5b42a315b164354c4fca56692bd9e4a99732fe174dfd1687aba9a55d4cbb95ea8ade4b6dc09702dcc62116536401c63046ac8c0c271e9c1fc229f7e96b99c08d7ecef4b1f66bf478f1df098afcb89a016fea67455f23d929e73e309d7dfa364d4847da40dacbd0fed8fe4dbbb0d4d5bc71c3878c4c819617b6bd10fca38edcad604d6daf380485207a3ff3a4f1c94a7f33b3c8499fca4d94428c08bd512a3123827d2efa5d0ce9b01f50ec347c2683472c99e6bb269dbf9e0a647536a714a4c3e32159a0d46084703e950efbe32852957e70d489f32d721f3264462e040001d32ea5cfd44b35428170bd694019e646d33f9ce3406ece6afa1e9189557f715765ce5b4a306087c7c8617ea8c0344e2d73b007a513848b4895aefb33130de12a26b94ebc00cc658b9ff686b1bb4196ff6bede459ed3c524a608362b7ed8427e7108845a84983ebebe1ceb256242844da770fe237656a7bd74ebb8487b46e5b6f8708dc39739baa6e27679a9fbb93ab3f43d56aaa33270eae8a3d3cf145e863451d818d452fe1a1de4942a8feb008d21dea0ef44fe364808a450e2db422af47778fb175bc6d7a45942a8d2ed928c97ffdfea8f512ab4cea0cfadac449d1e9832471cd00bd59b3e6cc1ef93b2a3445c6962f16568a1d7f95cbefa37c25cc26d53efe44e99c2888e4900f4e1709e1ce507c654811ea08b08f2dce12ceab220bc3a297ce8d1e9f9e45f3590e726c7683476e23a554dc1b454b41fdd807aad9e63a90f73282a55efe243591487ce51f8c0b2f400558334c2740bcd0e0a0a1976a2deb4bf94bab668629f213e3b909664e471b655aabb441ad7d5f7c07af93919189cb5fa770cdac7bb7aa08d694eb1c404f6d2981cab56b10962d061551064847b83388c3a7ba8cebbac746c799cb56adda066d6728882a1e12f7f10cd0761b2c99b5c91ae698b0865dfe0b89e1b1487bb7696f4b23914d5ff5ffba721adf38c16a2f153be16b1dbf6128db7d763027746eb2ebaf5f9121b9d47f45bb6a7fe819606dad59378d143d1f1d94cb2dc1138fd45ee2c7be08a60948d2bf45c004d84a3206b753cb424cdcf73bcf2d582121f2629350a67a7f6e376fa3f3e2b16ad2862967adbc8f5cff40598fe8dda9b0a059b2de1691f678fcdb7a02c599bb897f464ec15f0efb3c622253fdd75f436420f3b8b9c0e8b9b879dc3761b45851cb01462d06f70db364451b421dcae4419aa5424ef69d6b34d3f2a8fbe3016e1f5ba49828fffbb45c3857467cb148ec5d124628227f1063dc35adee00faf48032da91fb25442bb0846281baa3921963d504c310aabeda2fed77a544ad4b846e54b3a9566460b1f27e4bfda6c4066793d3a1c065b4453b3409dc0599f4b4a553bd4dccd412ade7202d0c36b071ad9372327415c71cf76a16124063cb79c06012c9cb1db609ce25fd5e7aa72f7e0566e2a1ff66c1022185b9acaa9ba117a858905e5ee200ec9f6f5b467c2bf27f45e95568242a7fc6322c5a19d9647d05b37e5748fa4ac9d8f929c9072eb214b3f1465acdd4ed0cc6f93ea0d33836b385d2beadbcea4001595470a7c4cc638d08e601cc068b92d0b7283ea9699d1939f0e63c20bf062ab28ec65335b05c4dd5523cb3b2d4bf7f4d293c89e83b41963966afabcd1244f5ebcc4ca0e5ddbd37c11428480d8748ef07294a4caafc5497266c38991b188d96acbff3558a250f90cc620922d734cfa7beb6a3b20ca7bda7799635dd8fd6ba32b42d16485b6627a815463e87bbbaae1d2c38a8fe135b54b71b2a217dc74432f4882f4224790c9416b9d4dce90d696e6514954ca9c3e439e512fd80e2ecfcbefa377091410e8b220c1eff563b2b12f51ac49bd754d4de4c0d7b81b585ea529f82bbf5147fab2a8e18bde31a8177455c4b60e30652e091af0bc059cf7e879608b0142062b2f815fb0847b2fdc749a7fae246a6c5ffe5afa2c65de3457c201159bb457031ebc49a8718d7b4f5057f2ca7eed7bfab3d7eb1399985f58825d7dd785d1a40d374751f0ce1c27c528b30adbce99fc416e216093f12f949485813fcc138013f1b3bb344996e62ed92bf69e873655384cd8a02b137828a6f8b5299214bcd23057a48382f1e032e2a81b2ba1ebbcd7b8d2cf1023f618a9da9084760a871c1872e48a8a2f4ac7823a5ce7c0f2c4855d9f8237b20c6e67ae67fd85ed43376baea9d8aae9c508f6ead64f66310940cf1de6a8e03abb8fd8f9bb1c87988fa194235191917b1a6a04bfa795fa2bae5c915ce68bcb9555d0d18ae78efc8af7f07ad8f2b60d3b25b7df4fae8a6904bb11bbf5e4535f3e9a8601a5866780b019123de59aabcad89452cb679b65c5cf70ec7cb12e7ff399dfbc83f52d643a1ac87feb2cc10c8d75fdf8b9294352cba24e8ddd1a9523e4b836cbe6ffb4191c693ea37dc4a5d9e9dae768d8dc78d313ea418fe154cf8a82c561da656d85c42079a00ef735a961296e014f57f5ce622b649e3cc2f9addf89d11bfd5ad90081a02ce89963aa348ec2e19a6dce0b1ff0ed6581500edf441e28fd0339f2c34524a247d8efb6be9fd4cf50d1453c55f8f4b72343c27f0524ee13b472553636d7d9f47b407e9a572f504a7b34e11a5a75cb921d9343aad004d1cd76e8562d784482957ca774380d80c1085ba75f0b7e613612be612fb5b12402d3439e7a0128dd6325c634ffa1bb3ad982880a2bc3c423487ae8184bb99aee07ec098e2af1b304e8b51d00706338484cdc33f222cae837ce1c9d65b539bfcc64f4fe5d23a30c536b25ac4dd8a4791e149de34f82cad7abc8e91a8845b8208b965ff3a0beaccea8f765db304995d03ff37059490c4087188581ed8e9074b79d5c3e8596161f04ea714b27b5c75ec55c0cff8c5a3080f1d17d611a453f1663baf294f94de91b99ef37915919e0e71f26c6efd9260b53f4ba69159fd6006499b286d7b65f0e40d8f043f96033cbd3da10869fccd4a87777b6f7684248bc9ed3be9418cab8bd077bcb3dfe2e7947c81cb62b6c62ffc317ae5d513729d366d12558b425ef47b636c287060f9d87d41e5b175dd31e68ef2e60a000976405da616547df4768ea7fdd6f07473bf8af4a33e38dd3c1bffdca95ab7bcb5f2e0272035ca8eead44fa7f65360219c758c8291cfded7757092d72a56b3f79a41e781c2722c4b776612b535ba74073df17e926f8d1a6ac9a785b04e1306057b9df1b332368a8680978c4927f6e4b5ca338ed603c3a383884122ec2593a61cb07374b455a5161ac56725308a361beaed77cf4205bf45868fdae12dc5735d527252a49e7d54308542cc4cedcfd0c01c406992a322c81c7f287d5674f2d995249fe15272d3f9a5b4fb9156ed6cbfed4a4ec22a5e383ae027f20d5626911ca661d07857b15a4f43795c5df9684a585f566b8e94f849a9952f071af903c5170de988f6c816f0d52b97632a1c60e491409b4f4f5453d49a537c955dd8f0d064f2af42aaa482134e1d29c8ff88fa337ebb23218a69f2aee7a762f329e749940af37191f73ed8cc9a4ce2100e450cdbb5b68dfda121af072997fed219ef957286cef158a24f793e53f0e90a4c68bf47ee4e0e11a2afbbcf6baf0cc14740bc861c1615662b78a16841707ce5673ddc9208dcd91dfb23a3b43e5230670cd3c7ce6249ba9b6b257f1e66c4b7fd767564333160814643fefc4e2d0a61c61fd20198ac16365b97b5d3224ef213e3e0d301f348518c5764fd3014f59ffe32cae748207d1d0327287679bbc70c3d8e02d409ef51831eb62d10aeb558c570695c4bffd6f2f5959a93aef5868e4a591324a8e88b6590422cdfb6620d40c26ff5723d88615b75a73a1aa64fdb6d2131e472679233362200ef8b9fd6dda748e0fef934fc0469f503b47876f7f057ee1a5a36a0e579ff9686b9256fcffe2accfc9f5a51c1a4a51ce691394544fce4483145974335ee552e0b8a83dfc3e1a65f4bcf4a568abc1cd6fb6d7c92b10475af063a100245024132fe95961f13669771a849252a9eb69f1fc33f1395cdf36a3b7898a4725bea52b697754dfac3e988946acfd7b2f84a2cb294db81b8256738b0b9b893534d1197646512b80fd2567d5ccdf587a1cc3aed344cc3a9d6d7c0f0e117750ce9b275cf75f4ce582181fd59924fedabf7782de147005cfc09fc554c5ec10ff443974b3d0817e4d6ca68812b21714e4e56983b0cbbeaa6a4f270b69ee3e03e516fe3620bcb8fd29d6cb6b32b040eff77d6f9a15acd452565bca61e1bde75705d8dd2145bd8bd1ab0883c8881691bccef18cafea69fc4485474c296fb011f4e35f4946c27be5291591e9f5516d17235bd82709680822c482e0a1dfab3fc1afeda16d878892039e31030e14d0435d9771176dd7fbf57e01af7daaac98608542aae3626f3d32cb922e1c57862888ef19ece1d219208b683c77fd7f3bc7084b10df63118d4cf83d405c6c53007cac5fea68b4669ca32ba0d4e866cf112e722b5c12c6cf9bef5f14fc51eaf10d5e0d0507770f1ef5a3b8314f49488f86ac2d04abf660d0c81fe649036161dfeaf89de1a80e8dd8a26b5ccd07d4e7de63a12710c6e783c4b1473f3e84b4a5207c93d78b83b1e6ded9f11014f6377618698dcb095701982be0ce929939379f2cc64ecbbcd598981a43ae28975e63c8ec8ed19f292540ebfd1b87d6a46a001253f7a69d42ed6ef16db067187a0c1c565fd8d9cd1f8ba5fa40c153e526836584ee88c5b01d374237d52cc1916aa9a24814ef7cc04d4123a6ddfc6fa4bc07bc5eb437d56ac464eab97c88f21880c912d4d37bb468c2339b597c2f0df2394b68c25071684ce01d13431ea634a611b4ef3cc01783f5ddf5a0a9c2510e0dfc23ad886dda97dfe18cb48d7a52c705bb89469099e6f6fcffb0cc313767602501d3d3c8736d2b1741235c8ca114bb0611421c46c135da04b6f80315650a71794c6b3e621e018755257eaa5f4118de26df046f414220aaec678358488a53b8d7856a68112d6892f5b53ed1bbb034fd59b7b7ae784d91043ae348436888f13e5de3bb86d98c135a55b132850973dc85d91a2c91e955298a09a1786be3c49301e8f2765ab87903b8c89d329d6016f522273345ea705d18cde71b0f5cc649328fe3f870b24f0a8a1320ba08f13ecdac0bc29ce9d06a3ee511dcc08adbcdd04d8ff02fe56783d8fad9bba024cabc654d4b9150e1f0917e1a8b9fc24377a1ac2c499973d771690858b3a06a2223d34eae6b582bcb775b21cc21084e575d678cfe7ec0f5c8a885ed6cfe9b5d9fa117ef7bd58e3d332f5a7aa20b312e202dd8115d2e2430bd232956572f20c17ab1a3b2d79c57b8721e109deed0473f2e18e8053fe9883cdb7f9dace62d0669345b79667f1dcb5e6d29657c3a11955bba6dd55d9334c5e87e176c4362fbdf2ccd085617bdc6b128b282e6a993b51548750f6802d1719e76d757ea17deb355fc908a7429198d9cae1392d4b9c65be6a67bedec9f06b84427711e4e81b60053f00e900f5f7056d1f82c05c70a59678f7420c23fb2880fb5e15cf6a3daca03f93cef4dce1f3f9e19a753d877b2fc454e65a7216a282d580922b3efe1da4b7c951ee810fc9e089f9232404166dfaaff1a201c85429dbf2f660689c02042db46d7f615c81371b8c6144d7e118613c16ed096d06a938ecd0fb90923b24f848bfb7f9eee98b4cacb5d8f4b2146b9821ee355d59bbff613314ffa1d3fda14d293512422048b6a2756325860f413fed2a8b29c96ace2e39a5f27e4f3a008715db17dd7d559931e40d36412c23cbeb004225de14d6b372ca2971db3dd0429b2edfbce5b567546d25099e3e07a1277ec11f0bd95a75e41bf831f7066d336943b5ff81d95f252d50fb581497722bbebf22104a949643f0aab64c6e307202af634993bba020e03a2e65af3c1bd7aa59cc2b1cf854fc7938bb3f6e5db5956d6cf8c0f2b6bbc4da9e1170f342ad229b6b7bb4132dc5d3b51be9bc92abaa03614f57f0c78d25eb255953ec1ac5d22765aadf661e983a6c2dc5c810a15523a56c955a3c953562bd8898bfee7c234933f78aa46b962cb232b432e2531757640e0f4c4498e04789c0c3950c32e9a68054872a6307f57114c1fa7b24738ddc1365b6c8fe0bd6d2021e7aeea48575dd07b9e470d6e0cb9784ef1ddbf5fec01e04a0f585f5bb0de246b90f9aaf0df737d06e56d6d5c7999df82b585d552ed4683678f12dca054cac5f575b4a5d79abc20a14755a80933a9a8ec7fcee44abc0f5d2eaedc9277cff239a73d520973384090fc500627cb0b4ad25e69721139c0cbae731cef26c82789ad8d5c06a911d8f7f05e62fd762ff51308a2bd8824671d2f2499455f2584e39257100db046c9f78a473c1539a84eb070e3298af95573401c5aea3cc701f450fa6187c612bd4acaaa85b3b1f30529b61c62c43ae560bb3b1dd077523c493a3afe3b0e603cb9700e489126dcd285f22006714f76a2a1c734897e32cff63bd8ae5f7f8a709df49e75b0e173b194fd7d1dbc33db8134df2c4894d621f4d7df31db504a2476083f61dc9ea5d9e642244eadf710eac5ad409dff82d13ab7784740f943c3911e9dbfb471a8a716d73d6aaaad2ade7df7deef8183d735965173ce89b6445b128700dc318526afda1579b81675eb00e38f5f427578f958c13550ce519abdbd2d66655e79c04f4f8c974841e29554ba533a6185160ec7aef91d9a0b7e10a24d0d289a9ecbb030cd52b3375cc95f2045105910c7ee17c5e33f579ac5b33634113a337f063c0f081910cbb5b7cf7d1d8202450f787c9ca1b6928ce359ec311a9de9495d3573af10fb8e89caaba5f8e09c957ec1a85a0d39faa1b86d3c82c7bc1908d983b967aa07b846603d127a514879c611a660bd2db2922df58b3c9fca89bfd85f7ef4d887526cd0ea7f02cce44f1800777ddc3559510bcd0549dc15baa02128ba778dd740ad1192168be60c5eea988f66c8c70344f83bc268591659e655da4507d8656cfcbeed138bb2d969f4ad29c7d6fce844ed382afab78fd9489ac25712f0d30b1cf2bc3f05c951d16a9f7e2919ce83b6a3c534ec0f70ae7bf1b5a1040e33111ec51c8d01d754b5ce243998133be704608c245f9247aa48bfe71ea4444b6b9a10015ade1cbce0f006d9883b8ac38a3bec7347e94912c3bb7814bbfa4b2e3656c35692cdd41c70fb056e13e75e9fcc095a8933eca06606ed391ee95fd234deb847c258783931f196a54f8ac12f7e6a0ae00ff4e97bac79b182a9e14a4345d6b53c9987a2ed897d043ef373aa3697dbfdef87aff416d797a518f4cba3c6d18208927395ff5118ed9d81938270723a2e43a5a47814a69778a3ac53b41ebf304945a6de22dbf074e9fd790edd6bc6adecd96a195a51e71dace9fd08efe4baa76c6d17cd73e1864de07f268521503829e596e669afddd20f2bfd8eb34b3add431f6278b2d562c656363e04b5e817d1f628e68c1faf777240312b2dfbc02af2897dd61e4c179529886d0924226852a0347eaf6ddbb2d32a0167319490476576d66ed323378511972f19c5d72743ea0fa6daffe8642d1d2b9c600918f4b380229f1d127bd064dea999dd478709468f75abbf9e0f3bc3ea65b9cc68742f06fcc6f2aa89d8f78c09c82559791881062cb213f5de04574896becc9a0c028adb2346ebf0930b6ac954d1f5a24a01a775b4ad9a73803e753a9689594b236f07473881fa14e643ae2013752a3ab3b1902554db84110df5909cb79b6248f9dceca5c5586647e6352baf3aa7e7605c0f3dc88cf48efd58386eb1e2f324d0cf8bcdf46af85f26b94efa3be50be6dcbef02d0dc6c00669adfa4628e94e0e824de6e3ecd0218de8f611df9823f8e7a4945f3d7f3f8f8673e89e976f95b31431771ed4f912a6079fd25ba03c7bb4448664ee24b8b1ba54ae995ade76e7c0a3c5403d6b2dbc4da7f91c39f0e183722b777c20a7c2cc90e00a43b748ace58e4f5e6d24d05a50636ad408af166491bded0b70233ccf10d02ec824578ab0805aac4bd3b10d165d8a1ddb1d9f0b2da30f07eea142da07bdd694ca099b8e380b6f556e348a4f6e47cf89386c883984416506c653dae376375c7aac9ae9acbbf5cd71f9353ed6f7971a9d297c3e2ab49dfa600ec80511c7f04469f3700ec465138bb64cb393b803f514a0bfda29e5d27ac5ab4c169eea10d5d3eac10d524331a8585ac89a809f52e6f3187ee24e463ac66837a49010ef3eead9ab2c444fd11471166ff827cc7090e53a137f2c2345cd6393526667926e6e6784c5dad5278594e5214bda3e226bcb284ccf68dfdc4d813e03b58b3f533b8cc870127f7d3275dc19fb6e7eeda96ac995d2b10bc05b14ab15274ee32eb1c5622e52536f2f60cade7d2f88c5b951801942958f35bad3761b08242d60324de681a84af888d1feaa615e3acace945aba58bf494d85310fca56d6a68f6529918d25b3d324bb5279f43e9ed57dd5755983a4f85eaa93465914512e6f954a913bc36d5a7dfd329c27f967ba88b5432896cd625da1a1436ed1e6ef40480ed22be2b3d14dee70e2b6513c445a4ff06fc3be3d7df5673d36d8e350f5a4a6ac5bb6aebd9c25159c40821f09535762ca5f8ae929faf42572ddaebce226289ef82e656b904db7a65d7d888794eb91d6ec009bc7d6adff762b70319b35d6379b6f7396059641750656a3ff71571efda551725aead6396b66206bf7ae2054adb4e645cf9585a4f4be00e6ee34d82af170a85909ecf771f41d0696d3b8918229a2b5b67400e9e77334ceda796e614c78b4c69d7f11e9b6c1b4ac82680ddfceb50c350e88036ce68269f028d3b0997f9c06aa67c53c5e7640af4e17ef2a167ea039743d8ef9637eefa25aea1306ca76e61ef7db500221f6daea885faf3fed9848617b0e25e6e38eba4d0b65c668dbd911c9af65b2b276f4a4b51d2cde93ca1947478caa82437acb77cede6a926e34c94fcebf6199875734cf63b5e5898cb8290f6aa325f30322b1fd6b2c6df0124a5a6076e2030d7cedc19f70365b81643545bc94c8e75417828525ab113d8414188938cae537edaaba13c8f19c3c13c619d9505bebbbce4296b214324894ebfa36035b039f81da17141e6d4a2e36edd612b555f13eb216e38c7d15e1cd926c677a35ae8770cc5db02e50ee81325cb77137043d98c5cde1216cf0ec7ffced22657b1c4a2f85a5ea0a973d203dcafa4ffd7f0982211657f52f57e5d11d282afe2163964ea06ceb78e6c9df1c5bd3014b980fc7f56cc3bfdd83a13aedd9a1d1f9d8304767403e0bc496455b380972c30de5be0bec6a3ac8396541f9d808a022854e826bee2de42c6f534f4fd4bcc4c70a7c365da76117badf415d0b5722b41a745e47270448f042b73c9a0463a28a7e6962bc7048091b9061163f55d736db8f665311ccb5be949f397701d8258b929960adf333e21c80e0a3dc68bad57ca1667c2a77c8364258ebb6e236726e3f08f77c38bf420b7d44605f25b5c397c82b92d3f8a1ab7989f4ae8766b24b0203095cbbbce974d286b38d6882f24cf45fed6a0b27ed8241d970ead70b103bf4dd96b289b1dc2845773ad0c3d9a60be1f4759f4877b44bddd6d6533a3be95e8af034e66022f6a389c3b90b918eaa1ebae987b129de163cca093bbe8cf5057177bd5fb8e0cebb885d01c4618c6e7f453119010866c616f7392373bdaaf2a4b92971455799d3ce08db1d5fb168445ae8ee3e03ca1a781ba1e09850c0c08b04827d5bcd68ca272790ef980f5806fd8f2c005cb15d6566226f2fd9043a616bce890a128556e9182c8de6de25944f26e0b236a6c7ecc53135fa479741baf2bc1f7009fe688f96992b4b16265c905bc434982fac36a5633498230f4ebe471fd20d2d816ce058a9a140dcfbba0c739e2b60071fb269a1ee92ee7643077cf1830b9563d2b933b978348102dac3a67b0445b468c0f57c4193e3201a0f919c766d455547a9fc88a0d0490b908aa564cead2dc1df63580cd5ab06c5fd65122db01f4c7fa545ea6f83f985d61c9e88ac88f118979d9fa58094fe0764085d0193691c6cc8bbbd82fa61c694757aeb8db76345af013e194ab074f763c62413fa29d59a9649053b3637ad238c26af23ac543da58a3611f5114b38412e3d09977e59cdda3e5a15510c318ddb30d47e736e08a771a003e1197a7a74b89c8ba54c95ab1a950c75ad49cfe781c32852c158df98f5d3caf993e474b5b69018057999df6b6fa105df78d9507a29e46c935f1d9bc119719aee5ff7ceb286d192ccffdb0d7451286ce691053ce496ec304fddb3f0477ed1ee59865c6b1e745c22efeb3c3c89c2a1a7c6564c4d6ed552020d4fc062af4770e89d0a97da629ec385f33ff616382a37830ff569004de642fd923e97a071ca3183c6c7db59de5282d888a6e485458b82605a33391d7856078994b5cfb5350f6a8900d1f74fdd52d647d8546d10527a0f626c133222807e122b91c65fcf245eda878fa6bdd</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":"<p>本文讲解的是Flink 分层api中低层的api， process函数的使用</p>\n <a id=\"more\"></a>\n\n<h1 id=\"处理函数\"><a href=\"#处理函数\" class=\"headerlink\" title=\"处理函数\"></a>处理函数</h1><blockquote>\n<p>在分层的底层，我们可以不定义任何具体的算子，如map、filter、或者window。只是提炼出了一个处理操作(process)。它是所有转换算子的一个概括性的表达，可以自定义处理逻辑，所以这一层接口就被叫作“处理函数”(process function)</p>\n</blockquote>\n<h2 id=\"1、基本处理函数\"><a href=\"#1、基本处理函数\" class=\"headerlink\" title=\"1、基本处理函数\"></a>1、基本处理函数</h2><h3 id=\"1-1-处理函数的功能和使用\"><a href=\"#1-1-处理函数的功能和使用\" class=\"headerlink\" title=\"1.1 处理函数的功能和使用\"></a>1.1 处理函数的功能和使用</h3><p>处理函数􏰀供了一个“定时服务” (TimerService)，我们可以通过它访问流中的事件(event)、时间戳(timestamp)、水位线 (watermark)，甚至可以注册“定时事件”。而且处理函数继承了 AbstractRichFunction 抽象类，所以拥有富函数类的所有特性，同样可以访问状态(state)和其他运行时信息。此外，处理函 数还可以直接将数据输出到侧输出流(side output)中。所以，处理函数是最为灵活的处理方 法，可以实现各种自定义的业务逻辑;同时也是整个 DataStream API 的底层基础。</p>\n<p>处理函数的使用与基本的转换操作类似，只需要直接基于 DataStream 调用.process()方法 就可以了。方法需要传入一个 ProcessFunction 作为参数，用来定义处理逻辑。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stream.process(new MyProcessFunction())</span><br></pre></td></tr></table></figure>\n\n<p>这里 ProcessFunction 不是接口，而是一个抽象类，继承了 AbstractRichFunction; MyProcessFunction 是它的一个具体实现。所以所有的处理函数，都是富函数(RichFunction)， 富函数可以调用的东西这里同样都可以调用。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> sunrise.demo.function.process;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.functions.ProcessFunction;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.util.Collector;</span><br><span class=\"line\"><span class=\"keyword\">import</span> sunrise.demo.pojo.CarInfo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> kuiqwang</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@emai</span> wqkenqingto@163.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@time</span> 2023/2/16</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@desc</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Slf</span>4j</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProcessFunctionDemo</span> <span class=\"keyword\">extends</span> <span class=\"title\">ProcessFunction</span>&lt;<span class=\"title\">CarInfo</span>,<span class=\"title\">CarInfo</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">processElement</span><span class=\"params\">(CarInfo carinfo, ProcessFunction&lt;CarInfo, CarInfo&gt;.Context context, Collector&lt;CarInfo&gt; collector)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        String carNumber = carinfo.getCarNumber();</span><br><span class=\"line\">        Integer number = Integer.valueOf(carNumber.replace(<span class=\"string\">\"carNo-\"</span>, <span class=\"string\">\"\"</span>));</span><br><span class=\"line\">        Integer speed = Integer.valueOf(carinfo.getCarSpeed());</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (number &gt; <span class=\"number\">55</span> &amp;&amp; speed &gt; <span class=\"number\">80</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//限定了车牌和车速</span></span><br><span class=\"line\">            collector.collect(carinfo);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ProcessFunction-解析\"><a href=\"#ProcessFunction-解析\" class=\"headerlink\" title=\"ProcessFunction 解析\"></a>ProcessFunction 解析</h3><p>内部单独定义了两个方法:一个是必须要实现的抽象方法.processElement();另一个是非 抽象方法.onTimer()。</p>\n<ol>\n<li>抽象方法.processElement()<ol>\n<li>用于“处理元素”，定义了处理的核心逻辑。这个方法对于流中的每个元素都会调用一次， 参数包括三个:输入数据值 value，上下文 ctx，以及“收集器”(Collector)out。方法没有返 回值，处理之后的输出数据是通过收集器 out 来定义的。</li>\n<li>value:当前流中的输入元素，也就是正在处理的数据，类型与流中数据类 型一致。</li>\n<li>ctx:类型是ProcessFunction中定义的内部抽象类Context，表示当前运行的 上下文，可以获取到当前的时间戳，并􏰀供了用于查询时间和注册定时器的“定时服 务”(TimerService)，以及可以将数据发送到“侧输出流”(side output)的方法.output()。</li>\n<li>out:“收集器”(类型为Collector)，用于返回输出数据。使用方式与flatMap 算子中的收集器完全一样，直接调用 out.collect()方法就可以向下游发出一个数据。 这个方法可以多次调用，也可以不调用。</li>\n<li>而通过富函数􏰀供的获取上下文方法.getRuntimeContext()， 也可以自定义状态(state)进行处理，</li>\n</ol>\n</li>\n<li>非抽象方法.onTimer()<ol>\n<li>用于定义定时触发的操作，这是一个非常强大、也非常有趣的功能。这个方法只有在注册 好的定时器触发的时候才会调用，而定时器是通过“定时服务”TimerService 来注册的</li>\n<li>打个 比方，注册定时器(timer)就是设了一个闹钟，到了设定时间就会响;而.onTimer()中定义的， 就是闹钟响的时候要做的事。所以它本质上是一个基于时间的“回调”(callback)方法，通过 时间的进展来触发</li>\n<li>定时方法.onTimer()也有三个参数:时间戳(timestamp)，上下 文(ctx)，以及收集器(out)。这里的 timestamp 是指设定好的触发时间，事件时间语义下当然就是水位线了。另外这里同样有上下文和收集器，所以也可以调用定时服务(TimerService)， 以及任意输出处理之后的数据。</li>\n<li>我们也可以看到，处理函数都是基于事件触发的。水位线就如同插入流中的一条数据一样; 只不过处理真正的数据事件调用的是.processElement()方法，而处理水位线事件调用的 是.onTimer()。</li>\n<li>我们也可以看到，处理函数都是基于事件触发的。水位线就如同插入流中的一条数据一样; 只不过处理真正的数据事件调用的是.processElement()方法，而处理水位线事件调用的 是.onTimer()。</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"处理函数的分类\"><a href=\"#处理函数的分类\" class=\"headerlink\" title=\"处理函数的分类\"></a>处理函数的分类</h3><p>我们知道，DataStream 在调用一些转换方法之后，有可能生成新的流类型;例如调 用.keyBy()之后得到 KeyedStream，进而再调用.window()之后得到 WindowedStream。对于不同 类型的流，其实都可以直接调用.process()方法进行自定义处理，这时传入的参数就都叫作处理 函数</p>\n<p>Flink 提供了 8 个不同的处理函数</p>\n<ol>\n<li><p>ProcessFunction</p>\n<ol>\n<li><pre><code class=\"java\">最基本的处理函数，基于 DataStream 直接调用.process()时作为参数传入。\n&lt;!--￼<span class=\"number\">2</span>--&gt;\n<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> TimerService <span class=\"title\">timerService</span><span class=\"params\">()</span></span>;\n&lt;!--￼<span class=\"number\">3</span>--&gt;\n</code></pre>\n</li>\n</ol>\n</li>\n</ol>\n<p>基于处理时间和基于事件时间。而对应的操作主要有三个:获 取当前时间，注册定时器，以及删除定时器。</p>\n<p><strong>要注意，尽管处理函数中都可以直接访问 TimerService，不过只有基于 KeyedStream 的处理函数，才能去调用注册和删除定时器的方法; 未作按键分区的 DataStream 不支持定时器操作，只能获取当前时间</strong></p>\n<p>一个时间戳上的定时器只会触发一次。</p>\n<p>基于 KeyedStream 注册定时器时，会传入一个定时器触发的时间戳，这个时间戳的定时器 对于每个 key 都是有效的。这样，我们的代码并不需要做额外的处理，底层就可以直接对不同 key 进行独立的处理操作了。</p>\n<p>利用这个特性，有时我们可以故意降低时间戳的精度，来减少定时器的数量，从而􏰀高处 理性能。比如我们可以在设置定时器时只保留整秒数，那么定时器的触发频率就是最多 1 秒一 次。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">long coalescedTime &#x3D; time &#x2F; 1000 * 1000;</span><br><span class=\"line\">ctx.timerService().registerProcessingTimeTimer(coalescedTime);</span><br></pre></td></tr></table></figure>\n\n<p>Flink 的定时器同样具有容错性，它和状态一起都会被保存到一致性检查点(checkpoint) 中。当发生故障时，Flink 会重启并读取检查点中的状态，恢复定时器。如果是处理时间的定 时器，有可能会出现已经“过期”的情况，这时它们会在重启时被立刻触发。</p>\n<h3 id=\"KeyedProcessFunction的使用\"><a href=\"#KeyedProcessFunction的使用\" class=\"headerlink\" title=\"KeyedProcessFunction的使用\"></a>KeyedProcessFunction的使用</h3><p>KeyedProcessFunction 可以说是处理函数中的“嫡系部队”，可以认为是 ProcessFunction 的 一个扩展。我们只要基于 keyBy 之后的 KeyedStream，直接调用.process()方法，这时需要传入 的参数就是 KeyedProcessFunction 的实现类。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stream.keyBy( t -&gt; t.f0 )</span><br><span class=\"line\">       .process(<span class=\"keyword\">new</span> MyKeyedProcessFunction())</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> sunrise.demo.window;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.common.eventtime.SerializableTimestampAssigner;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.common.eventtime.WatermarkStrategy;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.functions.KeyedProcessFunction;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.util.Collector;</span><br><span class=\"line\"><span class=\"keyword\">import</span> sunrise.demo.function.process.KeyedProcessFunctionDemo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> sunrise.demo.pojo.Event;</span><br><span class=\"line\"><span class=\"keyword\">import</span> sunrise.demo.stream.api.source.CustomSource;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> kuiqwang</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@emai</span> wqkenqingto@163.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@time</span> 2023/2/16</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@desc</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">KeyedProcessDemo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\">        env.addSource(<span class=\"keyword\">new</span> CustomSource()).assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forMonotonousTimestamps().withTimestampAssigner(<span class=\"keyword\">new</span> SerializableTimestampAssigner&lt;Event&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Event event, <span class=\"keyword\">long</span> l)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> event.getTimestamp();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)).keyBy(Event::getUser).process(<span class=\"keyword\">new</span> KeyedProcessFunction&lt;String, Event, String&gt;() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">processElement</span><span class=\"params\">(Event event, KeyedProcessFunction&lt;String, Event, String&gt;.Context context, Collector&lt;String&gt; collector)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">                collector.collect(<span class=\"string\">\"数据到达，时间戳为:\"</span> + context.timestamp());</span><br><span class=\"line\">                collector.collect(<span class=\"string\">\" 数 据 到 达 ， 水 位 线 为 : \"</span> + context.timerService().currentWatermark() + <span class=\"string\">\"\\n -------分割线-------\"</span>);</span><br><span class=\"line\">                context.timerService().registerEventTimeTimer(context.timestamp() + <span class=\"number\">10</span> * <span class=\"number\">1000L</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onTimer</span><span class=\"params\">(<span class=\"keyword\">long</span> timestamp, KeyedProcessFunction&lt;String, Event, String&gt;.OnTimerContext ctx, Collector&lt;String&gt; out)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">super</span>.onTimer(timestamp, ctx, out);</span><br><span class=\"line\">                out.collect(<span class=\"string\">\"定时器触发，触发时间:\"</span> + timestamp);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).print();</span><br><span class=\"line\">        env.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"3-窗口处理函数\"><a href=\"#3-窗口处理函数\" class=\"headerlink\" title=\"3. 窗口处理函数\"></a>3. 窗口处理函数</h2><h4 id=\"窗口处理函数的使用\"><a href=\"#窗口处理函数的使用\" class=\"headerlink\" title=\"窗口处理函数的使用\"></a>窗口处理函数的使用</h4><p>窗口处理函数 ProcessWindowFunction 的使用与其他窗口函数类似，也是基于 WindowedStream 直接调用方法就可以</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stream.keyBy( t -&gt; t.f0 )</span><br><span class=\"line\">       .window( TumblingEventTimeWindows.of(Time.seconds(<span class=\"number\">10</span>)) )</span><br><span class=\"line\">       .process(<span class=\"keyword\">new</span> MyProcessWindowFunction())</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ProcessWindowFunction-解析\"><a href=\"#ProcessWindowFunction-解析\" class=\"headerlink\" title=\"ProcessWindowFunction 解析\"></a>ProcessWindowFunction 解析</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> sunrise.demo.function.window;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.net.ntp.TimeStamp;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.functions.windowing.ProcessWindowFunction;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.windowing.windows.TimeWindow;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.util.Collector;</span><br><span class=\"line\"><span class=\"keyword\">import</span> scala.collection.Iterable;</span><br><span class=\"line\"><span class=\"keyword\">import</span> scala.collection.immutable.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> sunrise.demo.pojo.CarInfo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Timestamp;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Set;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> kuiqwang</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@emai</span> wqkenqingto@163.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@time</span> 2023/2/16</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@desc</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CarCountProcessWindowFunction</span> <span class=\"keyword\">extends</span> <span class=\"title\">ProcessWindowFunction</span>&lt;<span class=\"title\">CarInfo</span>,<span class=\"title\">String</span>,<span class=\"title\">String</span>, <span class=\"title\">TimeWindow</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">process</span><span class=\"params\">(String s, ProcessWindowFunction&lt;CarInfo, String, String, TimeWindow&gt;.Context context, java.lang.Iterable&lt;CarInfo&gt; iterable, Collector&lt;String&gt; collector)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        Set&lt;String&gt; carSet = <span class=\"keyword\">new</span> HashSet&lt;String&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (CarInfo car : iterable) &#123;</span><br><span class=\"line\">            carSet.add(car.getCarNumber());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> start = context.window().getStart();</span><br><span class=\"line\">        <span class=\"keyword\">long</span> end = context.window().getEnd();</span><br><span class=\"line\"></span><br><span class=\"line\">        collector.collect(<span class=\"string\">\"窗口:\"</span> + <span class=\"keyword\">new</span> Timestamp(start) + <span class=\"string\">\"~\"</span> + <span class=\"keyword\">new</span> Timestamp(end) + <span class=\"string\">\"的过车数是：\"</span> + carSet.size());</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProcessWindowFunction</span>&lt;<span class=\"title\">IN</span>, <span class=\"title\">OUT</span>, <span class=\"title\">KEY</span>, <span class=\"title\">W</span> <span class=\"keyword\">extends</span> <span class=\"title\">Window</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">       <span class=\"keyword\">extends</span> <span class=\"title\">AbstractRichFunction</span> </span>&#123;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">process</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">KEY key, Context context, Iterable&lt;IN&gt; elements, Collector&lt;OUT&gt; out)</span> <span class=\"keyword\">throws</span></span></span><br><span class=\"line\"><span class=\"function\">Exception</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">(Context context)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;&#125;</span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span> <span class=\"keyword\">implements</span> <span class=\"title\">java</span>.<span class=\"title\">io</span>.<span class=\"title\">Serializable</span> </span>&#123;...&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ProcessWindowFunction 依然是一个继承了 AbstractRichFunction 的抽象类，它有四个类型 参数:</p>\n<ol>\n<li><p>IN:input，数据流中窗口任务的输入数据类型。</p>\n</li>\n<li><p>OUT:output，窗口任务进行计算之后的输出数据类型。</p>\n</li>\n<li><p>OUT:output，窗口任务进行计算之后的输出数据类型。</p>\n</li>\n<li><p>W:窗口的类型，是Window的子类型。一般情况下我们定义时间窗口，W 就是 TimeWindow。</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public abstract class Context implements java.io.Serializable &#123;</span><br><span class=\"line\">   public abstract W window();</span><br><span class=\"line\">   public abstract long currentProcessingTime();</span><br><span class=\"line\">   public abstract long currentWatermark();</span><br><span class=\"line\">   public abstract KeyedStateStore windowState();</span><br><span class=\"line\">   public abstract KeyedStateStore globalState();</span><br><span class=\"line\">   public abstract &lt;X&gt; void output(OutputTag&lt;X&gt; outputTag, X value);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"侧输出流-Side-Output\"><a href=\"#侧输出流-Side-Output\" class=\"headerlink\" title=\"侧输出流(Side Output)\"></a>侧输出流(Side Output)</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DataStream&lt;Integer&gt; stream = env.addSource(...);</span><br><span class=\"line\">SingleOutputStreamOperator&lt;Long&gt; longStream = stream.process(<span class=\"keyword\">new</span> ProcessFunction&lt;Integer, Long&gt;() &#123;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">processElement</span><span class=\"params\">( Integer value, Context ctx, Collector&lt;Integer&gt; out)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">// 转换成 Long，输出到主流中</span></span><br><span class=\"line\">out.collect(Long.valueOf(value));</span><br><span class=\"line\"><span class=\"comment\">// 转换成 String，输出到侧输出流中</span></span><br><span class=\"line\">ctx.output(outputTag, <span class=\"string\">\"side-output: \"</span> + String.valueOf(value));</span><br><span class=\"line\">&#125; &#125;);</span><br><span class=\"line\">DataStream&lt;String&gt; stringStream = longStream.getSideOutput(outputTag);</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n","encrypt":true},{"title":"Flink状态编程","date":"2023-03-01T08:14:12.465Z","password":"7FKBKZrTTTPG2LnC","_content":"\n <!--more-->\n\n# 状态编程\n\n## 1、托管状态\n\n1. 托管状态(Managed State)\n2. 原始状态(Raw State)\n\nFlink 的状态有两种:托管状态(Managed State)和原始状态(Raw State)。\n\n托管状态就是 由 Flink 统一管理的，状态的存储访问、故障恢复和重组等一系列问题都由 Flink 实现，我们只要调接口就可以;而原始状态则是自定义的，相当于就是开辟了一块内存，需要我们自己管理，实现状态的序列化和故障恢复。\n\n托管状态是由 Flink 的运行时(Runtime)来托管的;在配置容错机制后，状 态会自动持久化保存，并在发生故障时自动恢复。当应用发生横向扩展时，状态也会自动地重 组分配到所有的子任务实例上。对于具体的状态内容，Flink 也提供了\n\n1. 值状态(ValueState)\n2.  列表状态(ListState)\n3. 映射状态(MapState)\n4. 聚合状态(AggregateState)等多种结构，内部 支持各种数据类型。聚合、窗口等算子中内置的状态，就都是托管状态;我们也可以在富函数 类(RichFunction)中通过上下文来自定义状态，这些也都是托管状态。\n\n\n\n托管状态分为两类:算子状态和按键分区状态。\n\n(1)算子状态(Operator State)\n\n算子状态可以用在所有算子上，使用的时候其实就跟一个本地变量没什么区别——因为本 地变量的作用域也是当前任务实例。在使用时，我们还需进一步实现 CheckpointedFunction 接 口。\n\n(2)按键分区状态(Keyed State)\n\n状态是根据输入流中定义的键(key)来维护和访问的，所以只能定义在按键分区流(KeyedStream)中，也就 keyBy 之后才可以使用\n\n所以即使是 map、filter 这样无状态的基本转换算子，我们也可以通过富函数类给它们“追 加”Keyed State，或者实现 CheckpointedFunction 接口来定义 Operator State;从这个角度讲， Flink 中所有的算子都可以是有状态的，不愧是“有状态的流处理”。\n\n\n\n## 按键分区状态(Keyed State)\n\n我们还可以通过富函数类(Rich Function)对转换算子进行扩展、实现自定义功能， 比如 RichMapFunction、RichFilterFunction。在富函数中，我们可以调用.getRuntimeContext() 获取当前的运行时上下文(RuntimeContext)，进而获取到访问状态的句柄;这种富函数中自 定义的状态也是 Keyed State\n\n\n\n### 支持的结构类型\n\n1. 值状态(ValueState)\n\n```java\npublic interface ValueState<T> extends State {\n   T value() throws IOException;\n   void update(T value) throws IOException;\n}\n```\n\n这里的 T 是泛型，表示状态的数据内容可以是任何具体的数据类型。如果想要保存一个 长整型值作为状态，那么类型就是 ValueState<Long>。我们可以在代码中读写值状态，实现对于状态的访问和更新。\n\n1. T value():获取当前状态的值;\n2. update(Tvalue):对状态进行更新，传入的参数value就是要覆写的状态值。\n\n在具体使用时，为了让运行时上下文清楚到底是哪个状态，我们还需要创建一个“状态描述器”(StateDescriptor)来提供状态的基本信息。例如源码中，ValueState 的状态描述器构造 方法如下:\n\n```java\npublic ValueStateDescriptor(String name, Class<T> typeClass) {\n   super(name, typeClass, null);\n}\n```\n\n2. **列表状态(ListState)**\n\n将需要保存的数据，以列表(List)的形式组织起来。在 ListState<T>接口中同样有一个 类型参数 T，表示列表中数据的类型。ListState 也提供了一系列的方法来操作状态，使用方式 与一般的 List 非常相似。\n\n1. Iterable<T>get():获取当前的列表状态，返回的是一个可迭代类型Iterable<T>;\n2. update(List<T>values):传入一个列表values，直接对状态进行覆盖;\n3. add(Tvalue):在状态列表中添加一个元素value;\n4. addAll(List<T>values):向列表中添加多个元素，以列表values形式传入。\n\n类似地，ListState 的状态􏰂述器就叫作 ListStateDescriptor，用法跟 ValueStateDescriptor完全一致。\n\n3. **映射状态(MapState)**\n\n把一些键值对(key-value)作为状态整体保存起来，可以认为就是一组 key-value 映射的 列表。对应的 MapState<UK, UV>接口中，就会有 UK、UV 两个泛型，分别表示保存的 key 和 value 的类型。同样，MapState 提供了操作映射状态的方法，\n\n1. ![CleanShot 2023-03-01 at 16.47.40@2x](http://img.wqkenqing.ren/typora_img/CleanShot%202023-03-01%20at%2016.47.40@2x.png)\n\n4. 归约状态(ReducingState)\n5. 聚合状态(AggregatingState)\n\n\n\n## 算子状态(Operator State)\n\n算子状态(Operator State)就是一个算子并行实例上定义的状态，作用范围被限定为当前 算子任务。算子状态跟数据的 key 无关，所以不同 key 的数据只要被分发到同一个并行子任务， 就会访问到同一个 Operator State。\n\n算子状态的实际应用场景不如 Keyed State 多，一般用在 Source 或 Sink 等与外部系统连接 的算子上，或者完全没有 key 定义的场景。比如 Flink 的 Kafka 连接器中，就用到了算子状态。 在我们给 Source 算子设置并行度后，Kafka 消费者的每一个并行实例，都会为对应的主题(topic)分区维护一个偏移量， 作为算子状态保存起来。这在保证 Flink 应用“精确一次” (exactly-once)状态一致性时非常有用。关于状态一致性的内容，我们会在第十章详细展开。 当算子的并行度发生变化时，算子状态也支持在并行的算子任务实例之间做重组分配。根\n\n据状态的类型不同，重组分配的方案也会不同。\n\n**状态类型**\n\n主要有三种:\n\n1. ListState\n\n   1. 与 Keyed State 中的列表状态的区别是:在算子状态的上下文中，不会按键(key)分别处 理状态，所以每一个并行子任务上只会保留一个“列表”(list)，也就是当前并行子任务上所 有状态项的集合。列表中的状态项就是可以重新分配的最细粒度，彼此之间完全独立\n\n   2. 算子状态中不会存在“键组”(key group)这样的结构，所以为了方便重组分配，就把它 直接定义成了“列表”(list)。这也就解释了，为什么算子状态中没有最简单的值状态\n\n      (ValueState)。\n\n2. UnionListState \n\n   1. 与 ListState 类似，联合列表状态也会将状态表示为一个列表。它与常规列表状态的区别 在于，算子并行度进行缩放调整时对于状态的分配方式不同。\n\n3. 和 BroadcastState。\n\n   1. 广播状态(BroadcastState)\n      1. 因为广播状态在每个并行子任务上的实例都一样，所以在并行度调整的时候就比较简单， 只要复制一份到新的并行任务就可以实现扩展;而对于并行度缩小的情况，可以将多余的并行 子任务连同状态直接砍掉——因为状态都是复制出来的，并不会丢失。\n      2. 在底层，广播状态是以类似映射结构(map)的键值对(key-value)来保存的，必须基于 261一个“广播流”(BroadcastStream)来创建\n\n而对于 Operator State 来说就会有所不同。因为不存在 key，所有数据发往哪个分区是不可 预测的;也就是说，当发生故障重启之后，我们不能保证􏰂个数据跟之前一样，进入到同一个 并行子任务、访问同一个状态。所以 Flink 无法直接判断该怎样保存和恢复状态，而是􏰀供了 接口，让我们根据业务需求自行设计状态的快照保存(snapshot)和恢复(restore)逻辑\n\n\n\n1. **CheckpointedFunction 接口**\n\n   1. 在 Flink 中，对状态进行持久化保存的快照机制叫作“检查点”(Checkpoint)。于是使用 算子状态时，就需要对检查点的相关操作进行定义，实现一个 CheckpointedFunction 接口\n\n   \n\n   ```java\n   public interface CheckpointedFunction {\n   // 保存状态快照到检查点时，调用这个方法\n      void snapshotState(FunctionSnapshotContext context) throws Exception\n   // 初始化状态时调用这个方法，也会在恢复状态时调用\n   void initializeState(FunctionInitializationContext context) throws Exception;\n   }\n   ```\n\n   每次应用保存检查点做快照时，都会调用.snapshotState()方法，将状态进行外部持久化。\n\n    而在算子任务进行初始化时，会调用. initializeState()方法。这又有两种情况:一种是整个应用 第一次运行，这时状态会被初始化为一个默认值(default value);另一种是应用重启时，从检 查点(checkpoint)或者保存点(savepoint)中读取之前状态的快照，并赋给本地状态。所以， 接口中的.snapshotState()方法定义了检查点的快照保存逻辑，而. initializeState()方法不仅定义 了初始化逻辑，也定义了恢复逻辑。\n\n   这里需要注意，CheckpointedFunction 接口中的两个方法，分别传入了一个上下文(context) 作为参数。不同的是，.snapshotState()方法拿到的是快照的上下文 FunctionSnapshotContext， 它可以􏰀供检查点的相关信息，不过无法获取状态句柄;而. initializeState()方法拿到的是 FunctionInitializationContext，这是函数类进行初始化时的上下文，是真正的“运行时上下文”。 FunctionInitializationContext 中􏰀供了“算子状态存储”(OperatorStateStore)和“按键分区状态 存储(” KeyedStateStore)，在这两个存储对象中可以非常方便地获取当前任务实例中的Operator State 和 Keyed State\n\n   ```\n   ListStateDescriptor<String> descriptor =\n             new ListStateDescriptor<>(\n                \"buffered-elements\",\n                Types.of(String));\n   ListState<String> checkpointedState = context.getOperatorStateStore().getListState(descriptor);\n   ```\n\n   ```\n   对于不同类型的算子状态，需要调用不同的获取状态对象的接口，对应地也就会使用不同 的状态分配重组算法。比如获取列表状态时，调用.getListState() 会使用最简单的 平均分割重 组(even-split redistribution)算法;而获取联合列表状态时，调用的是.getUnionListState() ， 对应就会使用联合重组(union redistribution) 算法\n   ```\n\n   ## 广播状态(Broadcast State)\n\n\n\n```\nMapStateDescriptor<String, Rule> ruleStateDescriptor = new MapStateDescriptor<>(...);\nBroadcastStream<Rule> ruleBroadcastStream = ruleStream\n                    .broadcast(ruleStateDescriptor);\nDataStream<String> output = stream\n              .connect(ruleBroadcastStream)\n              .process( new BroadcastProcessFunction<>() {...} );\n```\n\n这里我们定义了一个“规则流”ruleStream，里面的数据表示了数据流 stream 处理的规则， 规则的数据类型定义为 Rule。于是需要先定义一个 MapStateDescriptor 来􏰁述广播状态，然后 传入 ruleStream.broadcast()得到广播流，接着用 stream 和广播流进行连接。这里状态􏰁述器中 的 key 类型为 String，就是为了区分不同的状态值而给定的 key 的名称。对于广播连接流调用 .process() 方法，可以传入“广播处理函数” KeyedBroadcastProcessFunction 或者 BroadcastProcessFunction 来进行处理计算。广播处理函数 里面有两个方法.processElement()和.processBroadcastElement()\n\n```java\npublic abstract class BroadcastProcessFunction<IN1, IN2, OUT> extends BaseBroadcastProcessFunction {\n...\npublic abstract void processElement(IN1 value, ReadOnlyContext ctx, Collector<OUT> out) throws Exception;\npublic abstract void processBroadcastElement(IN2 value, Context ctx, Collector<OUT> out) throws Exception;\n... }\n```\n\n这里的.processElement()方法，处理的是正常数据流，第一个参数 value 就是当前到来的流 数据;而.processBroadcastElement()方法就相当于是用来处理广播流的，它的第一个参数 value 就是广播流中的规则或者配置数据。两个方法第二个参数都是一个上下文 ctx，都可以通过调 用.getBroadcastState()方法获取到当前的广播状态;区别在于，.processElement()方法里的上下 文是“只读”的(ReadOnly)，因此获取到的广播状态也只能读取不能更改; 而.processBroadcastElement()方法里的 Context 则没有限制，可以根据当前广播流中的数据更新 状态。\n\n```java\nRule rule = ctx.getBroadcastState( new MapStateDescriptor<>(\"rules\", Types.String, Types.POJO(Rule.class))).get(\"my rule\");\n```\n\n通过调用 ctx.getBroadcastState()方法，传入一个 MapStateDescriptor，就可以得到当前的叫 作“rules”的广播状态;调用它的.get()方法，就可以取出其中“my rule”对应的值进行计算处理。\n\n```java\npublic class BroadcastStateExample {\n   public static void main(String[] args) throws Exception {\nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(1);\n// 读取用户行为事件流\nDataStreamSource<Action> actionStream = env.fromElements(\n             new Action(\"Alice\", \"login\"),\n             new Action(\"Alice\", \"pay\"),\n269 );\nnew Action(\"Bob\", \"login\"),\nnew Action(\"Bob\", \"buy\")\n// 定义行为模式流，代表了要检测的标准 DataStreamSource<Pattern> patternStream = env\n       .fromElements(\n );\nnew Pattern(\"login\", \"pay\"),\nnew Pattern(\"login\", \"buy\")\n// 定义广播状态的描述器，创建广播流\nMapStateDescriptor<Void, Pattern> bcStateDescriptor = new\nMapStateDescriptor<>(\n             \"patterns\", Types.VOID, Types.POJO(Pattern.class));\nBroadcastStream<Pattern> bcPatterns = patternStream.broadcast(bcStateDescriptor);\n// 将事件流和广播流连接起来，进行处理\nDataStream<Tuple2<String, Pattern>> matches = actionStream\n             .keyBy(data -> data.userId)\n             .connect(bcPatterns)\n           .process(new PatternEvaluator());\n   matches.print();\n   env.execute();\n}\npublic static class PatternEvaluator\n extends KeyedBroadcastProcessFunction<String, Action, Pattern, Tuple2<String, Pattern>> {\n// 定义一个值状态，保存上一次用户行为 ValueState<String> prevActionState;\n@Override\n        public void open(Configuration conf) {\n          prevActionState = getRuntimeContext().getState(\n                 new ValueStateDescriptor<>(\"lastAction\", Types.STRING));\n}\n       @Override\n       public void processBroadcastElement(\n             Pattern pattern,\n             Context ctx,\n             Collector<Tuple2<String, Pattern>> out) throws Exception {\n          BroadcastState<Void, Pattern> bcState = ctx.getBroadcastState(\nnew MapStateDescriptor<>(\"patterns\", Types.VOID, Types.POJO(Pattern.class)));\n Exception {\n// 将广播状态更新为当前的 pattern\n   bcState.put(null, pattern);\n}\n@Override\npublic void processElement(Action action, ReadOnlyContext ctx,\nCollector<Tuple2<String, Pattern>> out) throws Pattern pattern = ctx.getBroadcastState(\n new MapStateDescriptor<>(\"patterns\", Types.VOID, Types.POJO(Pattern.class))).get(null);\n          String prevAction = prevActionState.value();\n          if (pattern != null && prevAction != null) {\n// 如果前后两次行为都符合模式定义，输出一组匹配\nif (pattern.action1.equals(prevAction) && pattern.action2.equals(action.action)) {\n              out.collect(new Tuple2<>(ctx.getCurrentKey(), pattern));\n          }\n}\n// 更新状态 prevActionState.update(action.action);\n} }\n// 定义用户行为事件 POJO 类 public static class Action {\n   public String userId;\n   public String action;\n   public Action() {\n }\npublic Action(String userId, String action) {\n   this.userId = userId;\n   this.action = action;\n}\n@Override\n\n} }\npublic String toString() {\n   return \"Action{\" +\n\"userId=\" + userId +\n\", action='\" + action + '\\'' +\n'}';\n// 定义行为模式 POJO 类，包含先后发生的两个行为 public static class Pattern {\n   public String action1;\n   public String action2;\n   public Pattern() {\n   }\n   public Pattern(String action1, String action2) {\n       this.action1 = action1;\n       this.action2 = action2;\n}\n@Override\n}\n} }\npublic String toString() {\n   return \"Pattern{\" +\n\"action1='\" + action1 + '\\'' +\n\", action2='\" + action2 + '\\'' +\n'}';\n\n```\n\n","source":"_posts/王阁/技术/大数据/flink/2023/Flink 状态编程.md","raw":"title:  Flink状态编程\ndate:  2023年 3月 1日\ntags: [flink、状态、编程]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n <!--more-->\n\n# 状态编程\n\n## 1、托管状态\n\n1. 托管状态(Managed State)\n2. 原始状态(Raw State)\n\nFlink 的状态有两种:托管状态(Managed State)和原始状态(Raw State)。\n\n托管状态就是 由 Flink 统一管理的，状态的存储访问、故障恢复和重组等一系列问题都由 Flink 实现，我们只要调接口就可以;而原始状态则是自定义的，相当于就是开辟了一块内存，需要我们自己管理，实现状态的序列化和故障恢复。\n\n托管状态是由 Flink 的运行时(Runtime)来托管的;在配置容错机制后，状 态会自动持久化保存，并在发生故障时自动恢复。当应用发生横向扩展时，状态也会自动地重 组分配到所有的子任务实例上。对于具体的状态内容，Flink 也提供了\n\n1. 值状态(ValueState)\n2.  列表状态(ListState)\n3. 映射状态(MapState)\n4. 聚合状态(AggregateState)等多种结构，内部 支持各种数据类型。聚合、窗口等算子中内置的状态，就都是托管状态;我们也可以在富函数 类(RichFunction)中通过上下文来自定义状态，这些也都是托管状态。\n\n\n\n托管状态分为两类:算子状态和按键分区状态。\n\n(1)算子状态(Operator State)\n\n算子状态可以用在所有算子上，使用的时候其实就跟一个本地变量没什么区别——因为本 地变量的作用域也是当前任务实例。在使用时，我们还需进一步实现 CheckpointedFunction 接 口。\n\n(2)按键分区状态(Keyed State)\n\n状态是根据输入流中定义的键(key)来维护和访问的，所以只能定义在按键分区流(KeyedStream)中，也就 keyBy 之后才可以使用\n\n所以即使是 map、filter 这样无状态的基本转换算子，我们也可以通过富函数类给它们“追 加”Keyed State，或者实现 CheckpointedFunction 接口来定义 Operator State;从这个角度讲， Flink 中所有的算子都可以是有状态的，不愧是“有状态的流处理”。\n\n\n\n## 按键分区状态(Keyed State)\n\n我们还可以通过富函数类(Rich Function)对转换算子进行扩展、实现自定义功能， 比如 RichMapFunction、RichFilterFunction。在富函数中，我们可以调用.getRuntimeContext() 获取当前的运行时上下文(RuntimeContext)，进而获取到访问状态的句柄;这种富函数中自 定义的状态也是 Keyed State\n\n\n\n### 支持的结构类型\n\n1. 值状态(ValueState)\n\n```java\npublic interface ValueState<T> extends State {\n   T value() throws IOException;\n   void update(T value) throws IOException;\n}\n```\n\n这里的 T 是泛型，表示状态的数据内容可以是任何具体的数据类型。如果想要保存一个 长整型值作为状态，那么类型就是 ValueState<Long>。我们可以在代码中读写值状态，实现对于状态的访问和更新。\n\n1. T value():获取当前状态的值;\n2. update(Tvalue):对状态进行更新，传入的参数value就是要覆写的状态值。\n\n在具体使用时，为了让运行时上下文清楚到底是哪个状态，我们还需要创建一个“状态描述器”(StateDescriptor)来提供状态的基本信息。例如源码中，ValueState 的状态描述器构造 方法如下:\n\n```java\npublic ValueStateDescriptor(String name, Class<T> typeClass) {\n   super(name, typeClass, null);\n}\n```\n\n2. **列表状态(ListState)**\n\n将需要保存的数据，以列表(List)的形式组织起来。在 ListState<T>接口中同样有一个 类型参数 T，表示列表中数据的类型。ListState 也提供了一系列的方法来操作状态，使用方式 与一般的 List 非常相似。\n\n1. Iterable<T>get():获取当前的列表状态，返回的是一个可迭代类型Iterable<T>;\n2. update(List<T>values):传入一个列表values，直接对状态进行覆盖;\n3. add(Tvalue):在状态列表中添加一个元素value;\n4. addAll(List<T>values):向列表中添加多个元素，以列表values形式传入。\n\n类似地，ListState 的状态􏰂述器就叫作 ListStateDescriptor，用法跟 ValueStateDescriptor完全一致。\n\n3. **映射状态(MapState)**\n\n把一些键值对(key-value)作为状态整体保存起来，可以认为就是一组 key-value 映射的 列表。对应的 MapState<UK, UV>接口中，就会有 UK、UV 两个泛型，分别表示保存的 key 和 value 的类型。同样，MapState 提供了操作映射状态的方法，\n\n1. ![CleanShot 2023-03-01 at 16.47.40@2x](http://img.wqkenqing.ren/typora_img/CleanShot%202023-03-01%20at%2016.47.40@2x.png)\n\n4. 归约状态(ReducingState)\n5. 聚合状态(AggregatingState)\n\n\n\n## 算子状态(Operator State)\n\n算子状态(Operator State)就是一个算子并行实例上定义的状态，作用范围被限定为当前 算子任务。算子状态跟数据的 key 无关，所以不同 key 的数据只要被分发到同一个并行子任务， 就会访问到同一个 Operator State。\n\n算子状态的实际应用场景不如 Keyed State 多，一般用在 Source 或 Sink 等与外部系统连接 的算子上，或者完全没有 key 定义的场景。比如 Flink 的 Kafka 连接器中，就用到了算子状态。 在我们给 Source 算子设置并行度后，Kafka 消费者的每一个并行实例，都会为对应的主题(topic)分区维护一个偏移量， 作为算子状态保存起来。这在保证 Flink 应用“精确一次” (exactly-once)状态一致性时非常有用。关于状态一致性的内容，我们会在第十章详细展开。 当算子的并行度发生变化时，算子状态也支持在并行的算子任务实例之间做重组分配。根\n\n据状态的类型不同，重组分配的方案也会不同。\n\n**状态类型**\n\n主要有三种:\n\n1. ListState\n\n   1. 与 Keyed State 中的列表状态的区别是:在算子状态的上下文中，不会按键(key)分别处 理状态，所以每一个并行子任务上只会保留一个“列表”(list)，也就是当前并行子任务上所 有状态项的集合。列表中的状态项就是可以重新分配的最细粒度，彼此之间完全独立\n\n   2. 算子状态中不会存在“键组”(key group)这样的结构，所以为了方便重组分配，就把它 直接定义成了“列表”(list)。这也就解释了，为什么算子状态中没有最简单的值状态\n\n      (ValueState)。\n\n2. UnionListState \n\n   1. 与 ListState 类似，联合列表状态也会将状态表示为一个列表。它与常规列表状态的区别 在于，算子并行度进行缩放调整时对于状态的分配方式不同。\n\n3. 和 BroadcastState。\n\n   1. 广播状态(BroadcastState)\n      1. 因为广播状态在每个并行子任务上的实例都一样，所以在并行度调整的时候就比较简单， 只要复制一份到新的并行任务就可以实现扩展;而对于并行度缩小的情况，可以将多余的并行 子任务连同状态直接砍掉——因为状态都是复制出来的，并不会丢失。\n      2. 在底层，广播状态是以类似映射结构(map)的键值对(key-value)来保存的，必须基于 261一个“广播流”(BroadcastStream)来创建\n\n而对于 Operator State 来说就会有所不同。因为不存在 key，所有数据发往哪个分区是不可 预测的;也就是说，当发生故障重启之后，我们不能保证􏰂个数据跟之前一样，进入到同一个 并行子任务、访问同一个状态。所以 Flink 无法直接判断该怎样保存和恢复状态，而是􏰀供了 接口，让我们根据业务需求自行设计状态的快照保存(snapshot)和恢复(restore)逻辑\n\n\n\n1. **CheckpointedFunction 接口**\n\n   1. 在 Flink 中，对状态进行持久化保存的快照机制叫作“检查点”(Checkpoint)。于是使用 算子状态时，就需要对检查点的相关操作进行定义，实现一个 CheckpointedFunction 接口\n\n   \n\n   ```java\n   public interface CheckpointedFunction {\n   // 保存状态快照到检查点时，调用这个方法\n      void snapshotState(FunctionSnapshotContext context) throws Exception\n   // 初始化状态时调用这个方法，也会在恢复状态时调用\n   void initializeState(FunctionInitializationContext context) throws Exception;\n   }\n   ```\n\n   每次应用保存检查点做快照时，都会调用.snapshotState()方法，将状态进行外部持久化。\n\n    而在算子任务进行初始化时，会调用. initializeState()方法。这又有两种情况:一种是整个应用 第一次运行，这时状态会被初始化为一个默认值(default value);另一种是应用重启时，从检 查点(checkpoint)或者保存点(savepoint)中读取之前状态的快照，并赋给本地状态。所以， 接口中的.snapshotState()方法定义了检查点的快照保存逻辑，而. initializeState()方法不仅定义 了初始化逻辑，也定义了恢复逻辑。\n\n   这里需要注意，CheckpointedFunction 接口中的两个方法，分别传入了一个上下文(context) 作为参数。不同的是，.snapshotState()方法拿到的是快照的上下文 FunctionSnapshotContext， 它可以􏰀供检查点的相关信息，不过无法获取状态句柄;而. initializeState()方法拿到的是 FunctionInitializationContext，这是函数类进行初始化时的上下文，是真正的“运行时上下文”。 FunctionInitializationContext 中􏰀供了“算子状态存储”(OperatorStateStore)和“按键分区状态 存储(” KeyedStateStore)，在这两个存储对象中可以非常方便地获取当前任务实例中的Operator State 和 Keyed State\n\n   ```\n   ListStateDescriptor<String> descriptor =\n             new ListStateDescriptor<>(\n                \"buffered-elements\",\n                Types.of(String));\n   ListState<String> checkpointedState = context.getOperatorStateStore().getListState(descriptor);\n   ```\n\n   ```\n   对于不同类型的算子状态，需要调用不同的获取状态对象的接口，对应地也就会使用不同 的状态分配重组算法。比如获取列表状态时，调用.getListState() 会使用最简单的 平均分割重 组(even-split redistribution)算法;而获取联合列表状态时，调用的是.getUnionListState() ， 对应就会使用联合重组(union redistribution) 算法\n   ```\n\n   ## 广播状态(Broadcast State)\n\n\n\n```\nMapStateDescriptor<String, Rule> ruleStateDescriptor = new MapStateDescriptor<>(...);\nBroadcastStream<Rule> ruleBroadcastStream = ruleStream\n                    .broadcast(ruleStateDescriptor);\nDataStream<String> output = stream\n              .connect(ruleBroadcastStream)\n              .process( new BroadcastProcessFunction<>() {...} );\n```\n\n这里我们定义了一个“规则流”ruleStream，里面的数据表示了数据流 stream 处理的规则， 规则的数据类型定义为 Rule。于是需要先定义一个 MapStateDescriptor 来􏰁述广播状态，然后 传入 ruleStream.broadcast()得到广播流，接着用 stream 和广播流进行连接。这里状态􏰁述器中 的 key 类型为 String，就是为了区分不同的状态值而给定的 key 的名称。对于广播连接流调用 .process() 方法，可以传入“广播处理函数” KeyedBroadcastProcessFunction 或者 BroadcastProcessFunction 来进行处理计算。广播处理函数 里面有两个方法.processElement()和.processBroadcastElement()\n\n```java\npublic abstract class BroadcastProcessFunction<IN1, IN2, OUT> extends BaseBroadcastProcessFunction {\n...\npublic abstract void processElement(IN1 value, ReadOnlyContext ctx, Collector<OUT> out) throws Exception;\npublic abstract void processBroadcastElement(IN2 value, Context ctx, Collector<OUT> out) throws Exception;\n... }\n```\n\n这里的.processElement()方法，处理的是正常数据流，第一个参数 value 就是当前到来的流 数据;而.processBroadcastElement()方法就相当于是用来处理广播流的，它的第一个参数 value 就是广播流中的规则或者配置数据。两个方法第二个参数都是一个上下文 ctx，都可以通过调 用.getBroadcastState()方法获取到当前的广播状态;区别在于，.processElement()方法里的上下 文是“只读”的(ReadOnly)，因此获取到的广播状态也只能读取不能更改; 而.processBroadcastElement()方法里的 Context 则没有限制，可以根据当前广播流中的数据更新 状态。\n\n```java\nRule rule = ctx.getBroadcastState( new MapStateDescriptor<>(\"rules\", Types.String, Types.POJO(Rule.class))).get(\"my rule\");\n```\n\n通过调用 ctx.getBroadcastState()方法，传入一个 MapStateDescriptor，就可以得到当前的叫 作“rules”的广播状态;调用它的.get()方法，就可以取出其中“my rule”对应的值进行计算处理。\n\n```java\npublic class BroadcastStateExample {\n   public static void main(String[] args) throws Exception {\nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(1);\n// 读取用户行为事件流\nDataStreamSource<Action> actionStream = env.fromElements(\n             new Action(\"Alice\", \"login\"),\n             new Action(\"Alice\", \"pay\"),\n269 );\nnew Action(\"Bob\", \"login\"),\nnew Action(\"Bob\", \"buy\")\n// 定义行为模式流，代表了要检测的标准 DataStreamSource<Pattern> patternStream = env\n       .fromElements(\n );\nnew Pattern(\"login\", \"pay\"),\nnew Pattern(\"login\", \"buy\")\n// 定义广播状态的描述器，创建广播流\nMapStateDescriptor<Void, Pattern> bcStateDescriptor = new\nMapStateDescriptor<>(\n             \"patterns\", Types.VOID, Types.POJO(Pattern.class));\nBroadcastStream<Pattern> bcPatterns = patternStream.broadcast(bcStateDescriptor);\n// 将事件流和广播流连接起来，进行处理\nDataStream<Tuple2<String, Pattern>> matches = actionStream\n             .keyBy(data -> data.userId)\n             .connect(bcPatterns)\n           .process(new PatternEvaluator());\n   matches.print();\n   env.execute();\n}\npublic static class PatternEvaluator\n extends KeyedBroadcastProcessFunction<String, Action, Pattern, Tuple2<String, Pattern>> {\n// 定义一个值状态，保存上一次用户行为 ValueState<String> prevActionState;\n@Override\n        public void open(Configuration conf) {\n          prevActionState = getRuntimeContext().getState(\n                 new ValueStateDescriptor<>(\"lastAction\", Types.STRING));\n}\n       @Override\n       public void processBroadcastElement(\n             Pattern pattern,\n             Context ctx,\n             Collector<Tuple2<String, Pattern>> out) throws Exception {\n          BroadcastState<Void, Pattern> bcState = ctx.getBroadcastState(\nnew MapStateDescriptor<>(\"patterns\", Types.VOID, Types.POJO(Pattern.class)));\n Exception {\n// 将广播状态更新为当前的 pattern\n   bcState.put(null, pattern);\n}\n@Override\npublic void processElement(Action action, ReadOnlyContext ctx,\nCollector<Tuple2<String, Pattern>> out) throws Pattern pattern = ctx.getBroadcastState(\n new MapStateDescriptor<>(\"patterns\", Types.VOID, Types.POJO(Pattern.class))).get(null);\n          String prevAction = prevActionState.value();\n          if (pattern != null && prevAction != null) {\n// 如果前后两次行为都符合模式定义，输出一组匹配\nif (pattern.action1.equals(prevAction) && pattern.action2.equals(action.action)) {\n              out.collect(new Tuple2<>(ctx.getCurrentKey(), pattern));\n          }\n}\n// 更新状态 prevActionState.update(action.action);\n} }\n// 定义用户行为事件 POJO 类 public static class Action {\n   public String userId;\n   public String action;\n   public Action() {\n }\npublic Action(String userId, String action) {\n   this.userId = userId;\n   this.action = action;\n}\n@Override\n\n} }\npublic String toString() {\n   return \"Action{\" +\n\"userId=\" + userId +\n\", action='\" + action + '\\'' +\n'}';\n// 定义行为模式 POJO 类，包含先后发生的两个行为 public static class Pattern {\n   public String action1;\n   public String action2;\n   public Pattern() {\n   }\n   public Pattern(String action1, String action2) {\n       this.action1 = action1;\n       this.action2 = action2;\n}\n@Override\n}\n} }\npublic String toString() {\n   return \"Pattern{\" +\n\"action1='\" + action1 + '\\'' +\n\", action2='\" + action2 + '\\'' +\n'}';\n\n```\n\n","slug":"王阁/技术/大数据/flink/2023/Flink 状态编程","published":1,"updated":"2023-03-01T09:03:42.146Z","_id":"clepeku0v0000qrpwep08cnne","comments":1,"layout":"post","photos":[],"link":"","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"ec9284272d9a55aebfc29f531991980e2784793826aa8b74138baf3aa1d67707\">f29c680708acd02cbb1b6cceaba0619213a3d4e50d7a5d24101e264a5eb831cbaa79b67db3bf836f0891d3e75869f8c7cc1a6247321a6569ba68303c33ca4a8795d71407f5dbfb742fb3f51cb7735f5b7ac1db4c808cef0c43206b5c7bf8a4f2e2190e7a56b8d61ad4706a39e273e0686acb9b79642f57dbf78ed46cf2e538113e7581f1309085a7ee67628154a5c4bde8e065401b4bb1f0411989fdf319e181eca4399e1db4ddf69738489383975f0dd06affccdfb313ff07105a1268691b1d41ba80ed7b69ce37a77d730c5862d6866be4bc07e00f10a4ee4e90f4b2af83fd47b4e2d96061c6c20b2a73b153b4455010ca787d7dd4b9043b7152ee37cce3c3db3c5ae537e289530fe5631d7fa1d3b09cd98ecca8361a1351e725d704e7eb62182fb5eee2a21bfef0446f636584a4b34bcd08afe073ee9823371b3681d5faacd3228bd4026019ac80dc0c9648ab88b8803f3b4ae2172856bfe1de29951a132b0bf16f3969f0a5890182e9fc6d257e8d87b6ae5852e143290893c71e2b3c345c16ae3b8fd3be5fbd7a526b87c3d35c7e86f61c08f5d2dc23c9f8d9673628e40c86482bd00bf7b6fd20811e666cbf6698bdb0dcc0e6444072b7a25b4e4a9a21fef17198de85797179f8d53117f9484afe941b4300eba6eabeddb5bf7dfe469aa7fb38832fe5c360eb647794c3b8286d53aad8346c3bbc7e9bcc34ba523ba589ce37fba83caaed7f0fec1137ba1a95922880f0966d6c0ffdf714601c4ef9c7d5d659cd79b27255402dbed7a0abed0ac2a85a810222d7bfc85fbb1d2ab215c53c975d484c81c4b0df1179cc727bd377185fc2f3cc8ae64edbcfba0189c7c90cfd6a89ccbd89d9d6c748a85ade76fe995c37c12b3e9010b34040cb118971dd62292389fdc5ac6133ee40c9c359c572f5d51144bef839ef431fa3ce728cd01f4878aa460b3b6cc9ace0260605ac5d2caf563f7af561b37bcb1856896926989156276616e78d177412c56a8e418afc9bbe93ee8048bd161d82a16da63bb56909c27937201d023266864f20ff1aaf11dd53279832003aef4bb9e36e8762e01ff13bbb5bc8d00e8c8ca489b4cd022d3a3ea36f12aeed1e8881e6487a742b9def93edf42e61151e56ea2e220854f172a96ab66c216e2ac472536e8cfccbd3f6262ffa051d81f12512d6482c964b080934a49d7e2e6489ea8a07a8c5a976d59d7955b9e97daba04adf41dc2412b84b443317d6cd2265fe2d82f3cbdf017bd4ec494dc001b0aa99eddac7028c660ca560f495ba296b6d241ba5212d5721e9b4e5e3d2d7a3365cf89ce7aed8ff8e5091ad7600d1c8ccffa7f75e42b56f597f2753e1c1fd8b977d5da4f0d44321ab8f2dadaf68577ed5b2c72d6ef3cb089cfa30ff7d581cbbd442a6e42a5bb93b799a99b8fd4877bd601c61070e11591c15609c74b8a0f3d2ca3ada76e83caaf7f9ab26f76a342def16cc3b674b04833b1c9624dfccc475f964945e6ebbd54f87e85f5236b2232184d69f01448d0ed7c753ad91ba01c19e08cdca1203aabbba02eeda1c2d6ed7cab13a605aa9a5bc69b0d0e05bc4674b0a3f88ca0db488006be7311e5a5a98dff6b8038a69a963278798710cf2123610cb7372bd3b1e1dbb248197dc0566fff776a056e98c39587e247e9efa58dbbc1d33fade73742a0ab96dc345a203d7df74b506bdcc295719c52b7e12f24c6e4aa6564cc58630bf7e71799059fbe13c6154dd9b271c8f1664613e7eec2e3bdd7db4584d70fd5d422979ff433e34b8a1bda26a7e3d7e00c1e12d89135de1ec0500635a905c701f01fc9da399ac456a9c98be8d4bdd9307e4cba127dbfd4873751606b441579899a4413a6ff916f9130987367752b5715ecf871c420b867f1f4f82cd3758ff336e5bb81721691359b9cda74d65f3c58d9354fbb4fad191a7736e39989c12677ed112ce38607108d8772e60b260ecea85c39cf6299b4caf7bc711f9f3623a42954b5d7a6f294b4cf8c02444224558ab15f816877b0d2dcdde52880358db0587e1dd20fc11501b4f772e8f1a4c6b7449a250e0f18a1cfc05e4813c08336ba7d2df7dc89bedbf8b8e0994e29d7ca6fc08ab02c9307f00da7ef156c4ae4c14e1f7e7db5774c4370625e56bc1f16a903be6e6591eb25f0b8771d7c106b8e1729370d1374575c969cea2e57f9d7bc1cfe98a3f645a1c6f61e9762a0f767753f84bb46ee935e1071e3a7a1840a428a6be5f658d14703065cc4fb801405c5c9322737f4bb9f8004737272ff1917a12cf155ff7c6ccfe1ce9c9046376d98e46dc9035d66e1baae21cee3693300fc847a89704980f1b8478166a7958b5f85006f5171782548e893d4d6d802cb8e4bae749ac60d35da8e46225b91fa35e8e67d972bb779bf5e080557f7a99a0c65accf4cc8041780850c79525e9e2366b095789ababbdfc6bba0cf0122d21a4df9c6ead3546642009667bc199f4b1d59dc6d42a3ee029792ec3d34b17a27694776b5afaded9c999d7650d8fc58e2a1bc3ecbf994c673081061eabfd7eed21da9ce3dc2eddd6a4171b33b17e8beea94467b73264932f71e6b1d6c542ef045c068051d06c84c4979a7f296f286981abd3b32fbb25f941453d5bdb55cac386e9eace5fa788e9c24f0e3ffe6049f64e5098597f65dcd11d1270f14864c1322bbd7d62ba97141ce1fde1d47c89bf54d62136119a3004e6bf5476adcc1d6f1726b261efa6bdbd56743218ed00d123b4d790cb927bec20d56cca93f8c52a65140f7857c6d47dc7fbfb8a895bcea22c785c45ce5173ebc69bd1c6cf13cc09631736f4bce6112b67b9533eb01340de061bae17eb606b923e6a2ab68a713224c89f5e08740132a6d5d72a696c4647d3050d88b9f3b7770e0e92bdaa4cd141c57aec50625fb31e39391ed794e237b19cc096b976d7fab1b6e60057a5b55c69ffc77a9a2f2f84b525ce97e6f5325a7db6a4f71917bec0d2b11ab1aa7d8922f7a7b3875c802562592ce218861fb07424f58488586eea31bcff7ca4730db9109da0aee6fb9e84490c7c3f89451faecbdb2349e198f44a2f855d41d552e12bc1c38029ed8e6d8aa52a1e939293390e5c3302da1f514850d56a2cd757fdee6cae630c1ad5ecd58595ee11e90f92f7ee3a14ec38f73132d96c995ecc40b87be95b608ce0ee80da6f9c7100219d4461323f129ecbd5204800182c52d0cb7834ccc49800462c214c3e897b8304943e44261230bb7a854afa285635141d4f87c4d4085486ed77676111ae1ee0eed838b2cf18d8717cc10f090d741b28b9d367e9cb3dad8c6c7e081d2f80efa699d17e6490649e119a672d7016e64397069c01eb1c57f6c0f48b0c155a8327226de0737f746c6af97f28455c087cdbef8a787011ee519334d11273f030c303ca4209860069bdf54b97ad6c4bb6be021f0be4746c85ae29002031e92608656f6bf33817839b63306c186fc4b7366d5bc9d64b132370d4162ab4b7cfbfc023f95b3857626e15c3600ce8e07e81d80a2d136900662f8de6c00eb190415dddb63a4f612c4c06c2b53c86e577e20f1713d80502fa35ac3f3bf97004f37ba379f6e7a1675cc3472ff4c25075187e5306db1dc93b661e4f55af5760e9d5e3a73dedbc6189d0b384197c3b1d39e661a0ddff4b35a7cf71df21eaaae200b942b95f8d403722b8d8cce2d043e3233e65271bfacae8d4d3da49354ad3e65043a7cda29a0356a3f199c558a2b8db415adae254bc81ee4f918631176058b2fd7d87c3ebe60e1aa137e334002084f488086e2d3b9ca8566a625a4364f8f50bfe3320dbd650f50a381f4af2cb91bc85b20f7329b9442ff8bc9806f0d95abda6b41663449031402a7e0da098f6dc64d34e0be3818dda617323752e5e1bdab6f9e752d8336335a5842d4e7679abc1993bb89374643ce4086d162068c31e423616e3fb03abb97193b68fe0964320506e27f1ecd562bb5b4b4af4502799cd1b1f31ffe9396ed6cc61ba6555b898bd9a52075265c6ede07239d17904e2405d3f73e0d6a8aa6b1152b31b102170e913490c44f167f2a591b90ea5294697669074ee14fcad20677bb6e165e7f669152b8a2da7723f59d775d62002cfc6fa89c7bf4ce3e2acfcbdd2e894065501c7cf572b9437026cf4f5ceba6b4dd45f2f1ecad2d4bee177f5e67fa43a5905a4a4fb78419b9249d40472a97a48ebf8129d7ce2f9bb5446a27ff8bb0b653593b4cd732a0207065b59fcdb8427469e48acb373a3a6c67bae27e6852c05c816a10ccfbece361e266c6784dae998da7c17bc07a3fab512d99d095cef3f77c4ebe55516b43208e90b074b23e5b46a8b49ecd9fd49e93850236eccf486ae94346e1b8d9cf1555059183f0f8b6b4e7bf207c90f9e3b1b797976c2b4354cf3be0247b8ecd48818a602a09d5b3089c0d1961ff71827edfdaf07a8a831ce77b22a6309fc6de9affa1c3c2c088a500c2725c630e774175d2c6e2c93bc6243935a779e26b84fe8094aebba21d89be9563b0d943fb930cd9fd8448677d9971aad0eb0249d5d2ab2c96bfbf061462e5fd29013b1c400694419596ccb84b67057c31fe0503d7b6a39c16d8a9515cee60d61231758a65b3bea8570ede8f3c59057ebe16583d2db2ab0db1b6449700681592dca5d52a0a376b9f2131dd8dead46e508a492fcfac9de6d85d4fb98ab83dc8393edc882dd21744623964fd2f454de90213e54ff655740d9d083f32c472f91dfd0633cb101b1aad307263c1f86f951d79f53abc7f340648466759c45b643324ba2041646567241d5c671243a39d7b2693a171c67e907dc473df10f47e300dab90c1e06b3aa4e291a804fdbc9da1e3bc7500579ae73be20e4de872c67737372d72bc3e86c363586cdccc9e86bfb08ed8ddd45eae31a91552a94eab773d7bf23ab0a107dfe04e58ea384f5341d5758e2e9db2f36ed6aca3b69ea1e1d1036c6b9891f8cbfee52008ef0b26dd1b5db363796e47ef17cc224a20f22cc8d3f24dd3ceb8bb8582a2edbb129da59084d9a84fde7ab8cf31a9a6da51b69eaabff72fd8da2d1a54d23d3b12f82a09087f8825beb2db0a08ea09ac70fcd6c78f4b54114bdcffbd9e9bedfba935a66a84b7aa35f5e0456c0a1c83bfa6b8ec8a553dcd4bd580a56ded4659964fa0b723ef8455a3ba6a992eb441edeef606b25d976f20eabc5f44381fc98831ac2aa086dd387ccc468a0906745a87c6ba7b4fbc4f961a1e88b68634a15b29cfe757e034634cdbc9f1438a684353c3d1aba302b92e0caa34a8f858ea818114efcba2d52872d54d45b7373483854aa878fa8209dfe77417aee20deba3023901e4d2d9dd44e3fa2ba566306f3cfcfd8309aaa58631b99514a2c8ab4480817f96e998f07f728b00cd9f29a0e2f32791c9e607b0ef118d58ef05a6dde546d3d154c70cda7b6c614fcb8c84ef03f31f7071f85526f39c8259bbe8149fbd44328afbe48753ef141c8423af97dd45a5cad6c892224dae3f88c9c0695defaf2deeaf8101ddf846d4687d87ab5cdba565cadef9541aef192b12ae28b66fd8b7a26cde26365c470cff99b779b3d564d2351bbca0e97a35b5d5bf55245c3b6d8b2dd43b3b10ee4e969785b7fe6f67c7068bc7e18cc6a4a464a487c608a0a137ce8bc3e0da94b374bb81c90f4cbbe8da540c891f2363dc8eb8f1d12ad392434f1642ed433140af9ddf7a4bbcfcffc646026f90c0d4b8bc4c79b9f42f5cb24128e5c50f30b1f13c9ed005d42b100c4e26f54895aeae8c81da3f20c0babbbbabbaf03dbcb17ef0f2c4ab830881c65b0d6d395d74f940285440da7ccb54f64370194ad41f5507959785c8cba835c750de15f49e2f86fa2e4a779df7043ac909cfb050457dfe583f4190a5b12215286cec10145486c193a933dc0e1f224206f27b847de241f551332072f0f142c39ec47e5a58609678d04f6865906e9b1ad6fa34e8ac082652fdd646c60245322f3d6799762a2c83920609d612cf37f3e4586b3ab9689717669d79b53aad008e9d1e673b6cb469da6be4352eb3618ca335d15a7c990fb55f6b00c743a1ebfa220dd5fbcf58c95e7360001e9ccfac32fa93b1e22d226d8fa76712bdab004e91e6c96e6e9807ad2af1fa9dfbc2187f25664ce690d06a2c0cea1c6fabcb2e25f04c43a9c64553bac5c0a6066b47fa7642075ddac7e618817a069b8db285131c44775523777c7bfd6c55b40865232b4621ae64f0860d975f98e93ea2340c343f4e7e404fddcc6b11135efa0fceaf25301bc7b8086f745dcb743f8ccceaea28a8527bffb0ba769822aaf625f57d963480e3cde90714a150aff0e374493ed41e0b5c970c59f75ca52075f5d1ba1b665c64c331ddb1aacaac787f260904f2fc300ba79851f46695f22d8733215bba8e6e160666bf31497b53145e9c1aa4ea00e9f0b47326f18b5a2e05ddad94d796d83cadd734b838087bf390eabea4a2f69d83e9066a2bb2e6ad191b64226ace3f9c1286aa60ca69ce2fc0a08c26805b0f90f3556520858fb4fd920782daee1895313e0e8b8f7cf37e1c8483838237ad35f5937dcd1ce1cb572195eadfe029843676f121ae9b632d20a3837851011e315301d7c63e503f0fe40b74d66a53e4b5cdba225c7782e073c780d1637a22b2bda51a6bd43c2d3fa5c9f092eac21688d5a318aa4901d1595a93c7560f839cd82031165a2bf1df0b764cbab4affbc65cee456b2ef0ed50a658aef99e3cb55f331ea3de813f3907613fba073cca40149abe9317341663b935383bb370e533eff35e4df3b7a7215fb6aad1f6156d58d82d2ecabf900c2141ff48cd43e243001ddde0bbc05b5e44732dc842828d55fecaf433980a688dde1cd5f700a3cdffbfbe519ae28554ef467fb7c03dd471c7717e41ac67a4df7a51c3c91259dd852842fc8527d89465fbf8f306b42dc6d930b239f9aa4e953d4e2142b7cb82985a7e682dbdb16c7bdaf6f84178fad608c1b8fb4c4102ed6bd0017a6bbc2ad8c5f046f4a975216c132bfdb85505890c5788d295c574844308a907c216263f824844a00256de02aad0651c1217cf23d388c39c8a9a9a595b0a8d74d0d1e5d89ec743207d5080491e02087ed3d666c2f0e9eb5a98bcd992faa82204e178388e5bc03a95992c454b60f554413512e9c84ed4a7298c07be8083859460857a39cffba65970314deeeb412a0cbded68f0c145f460389bc46243d84b9e4db56509350b9c88e7cf9751b33505017dadcf94df420d7682eb3110decc0552eaed1716a8c40a9f7ff9aa8bb4aefd0b564c1ed7773723f3a0fe47d387a77c782beb1c8e1c1af6766142cae845372b7b77d6ee9e41617365973ea87a6e4a888c664baf63f2ee32f4d2a2c8b014694b15501d61c8ed8abebbcea357ace9a5586f96830276d11adb186a8887f78b3dde61ffc0350b8123dabb947435887ef10e005544829a7cf6388fd9ed82f9d4f4a5954796f7bfda2e8880bc02b543c700c735a687f43dbfb405492e12381356bb0f2965f5371480d80d463f5dc244d38e898803b18fde06ed5095ea0dc9a64279a5c6017f409dd2721378084f95523806ce515df10cedbe2e6dd3c2375ee7dd933f71c158fbc2dea2681607189798721f8ee7cbd6b2eb9503dac5d1bb31368015a63a5b8b3e7705e86d2d45bc9329ed30e231f72e58b1ea94808e84b19e073c537f21120b40a6200095b038bd883a4d97b76e38a8594ca9d112b0a439c54306af6726e1b0adbf60cfab93e6a01e75cfd7d5fae2d33c548fab2f108a450bd1de8289caae2d09ab57e9ae7e2a804fa267b14af9dcf92c14664252a7882d6752d3494f80bb8e8e4b1197ebf082bfd9ca623387ea442ae7fbc27b35c68cf8ba23f7311bb12c0e10a670e6928dadd9640c30d8bda74bdf67231e16b0e9cddffc897645ec0cbb6bf210cfa1a62204b3dfcbf4ce5dffc22c97446dbceb7c0858ae6b2f9102afe3d1e05a56a31e6ee0856e0dd35a936fafadce9377d1108cdfe51b617d85be3bceca71fa1310dd484c3d3538cff8d772229ed54735c535132b3d5cd4e22fb64d20ac6dbf3c0da6c2c06c63043dcf2f504251512271648ebe8ae57ea53d49e007e163abc15d0771013d461a586012aaae104ce37a93c7d1b59402f95e5487831d677eaf423baaed886bb3c4be43d4e24be567d12076f2b1d7f312e465554fe8739733995d93814110b6a9f946b45d0a92695c3080e0ba08f715884b00035ab4e5c0d5ffe8750465a5b2679698710df274bad81ca2497ec0b8cbeede72d59bb360a1f6838324df934b9e3757d62b500b270ecddc91e615cc74142cbaf3af2bdf35fa90fbab6118c5ea3cbe4f9a0336e584f3a898ec7c054f10bdb77ce1b9158fe056199dd5a49d939f123fa34c39e07e1b93dad2bce7879c0296776e9a6568449d20dc2e9685997809c284385f3b7ffa1613a374af88c248afb1de742a9c596950c0a772dface12f98c19110fd9f48112f54340f560920d0c12c171371e2e4cc3ab14ea0e97517b0d135d1cc498e659c6dd66161acf16abf1588f74082f82e264a281fee64839f05fd7fc64272b37eef07128677c6cd60c30cc95068e69e8a6c5ea5ef3eb0d6266d76bb821ce069eccdfd9b5eab27fd67d54e022475461d6587f666da9260a441d2d634b55e588335419d88a084aeb3c38ce498a62a7802ab3137b7668dadd058eba28aa9566829b88a857d09b1a8d90ccacd60b7676384673609bfc03cafd3db33fccc0b34ac9da3d3127a3e917f25d85d110f9085396c19d1771cb11c0de53a0e4f5cf098e3c00945a9864ac6a3c7465e2500923a6b00257d5fecff029d0afaa5a16e4eb3d3ba07d6e98e3cd33b83cd99c763532ddb27028709820fd4709fe8950200a6673ae7955fee7992a1fe596875dfdb76e4117119d12008ba56c636be8f8a4e85bf505d494d830f64d046d4c25f17ef1e305d1cdb517cde93423b63a84169e9e9fea2c1b1811b894795aa48318f9470b6f95c6fa37e2ffa86e8d99b6cbae81b5969cc36a1543446c79da6a8e2083e7e2db14186157f590230ab15a66ad0e17cb364deb026ede529bc6d1dd95ac67680dc0f49a8fdbdd0d2164f5f9de32b938ecde64b27494d966664ede659db8d1c83f83227347626e9cc4dbacd9833b83d18be4efc1999e147a21655c36e1c0bd24d2e9c86c3b0a0e42b69dad131af637464623eea439ec81739fd7c85cb54661dbba2b708ccdaa993abe50567a420591f44c4fed0b5c1593557f533fc66c07cfce0f12be410f8550b76aafbe561bdaf9bc6349a4f49b6d9e03db3693fefe863491325b1a86e43b477d4031051e32120312897974354bbc53f322416c1d69edf97f3aeb8c515bd4d09c92ff3e0ccbe225ef539554767cc3b92d24ad3a25331cc9ed9df9c05a91786c68c594eef7ac1df5113a927464fa4bb8bf0e1267680be9154bb4cc7f6c2bf2abcbb791f31d139a195db49c5b7930018bb47ad32b419c46eb3a3a674853e99d77e642cca4c2affb61cf18027a32a79db06238f47e180e72182d42d1ce9fa985b629ccd2863a51e55721721ab8ea98e1ca2bb2e312c29bcffd5ff053f894356eac8f48fc354fd3e283fb5a533aa914b2e9828dbce6bad9818530bc2e056130fb716dc6783d12f3f24897f2913ac5a6b553bdb11ed0948d0a5fcc4191208ef1888658d1f12d5b07dc8f4aab6924b54c27534f1d2437032314415dbf79b0b7431609efe46a32bb9328f05db1458a6d895b26f195c197519769a7111e53309edd9865fb6059d6328e26402fa95728c9e883cb9b077c47bc0980c05078637ce63edbd5cf859f4d90da358a0f6dabc1ad400a21af7986ce5145267e8646c292832d4beb8d7fbd65eda87c18edb4e79cf5d0363ea7993e2bcd3e7d81339833418775fc691a6931fefee4ba2b43138292794c33a590c3ec3d7410b34216a270c1c64a71aea87c4b9fd96d632691110e33aad86560937c4cc1b056e4750523a277c3c7194a4f630fcfcc3295dd97805a6e84b063970d1f2ecf0786995cf285f0454c016be32e102b18f1525410c56e57a408b6ef33d15f993b56cbfde8e8c8bdcb66c2ccabb26a713aa602e0dc3600da862c81de23c5cff2b350fd149602b185c80db47d1abaa7da598af8a462ab507d202351ab5ccf1f1fce78e57f80e40133e0414d9f7b3b11394c2529dced243c662cc2e6738ed3142ba28505dccad352702b5dcad8840057f510a0f0a1cc9b5ef98a514c96f539cde15b20a6cf0416cd0c4da72e4835392b4ab13c3cdfbcd82e09dedd27c077a049844a165f5699449a3190dd3ea06e5b7fae1f8d25be28dcc7c4cfa66a91e2896ad84696249728c7b1cb7d769c55fd3792812eaabd7161088b014e5e3e9beaad868b55402ba4ace97ac2b7b09aaa6ea9c22d9430bf1a528e54c9e3c2b45f8adaa75750037e45057ce981dbe7dca1ed8dc230af3fe767a540e0d88b14a05cc5a0c276d899ccb1dd17d48953a2a1a8570e52cf293dcc79d75d0025aecd0fdba3b223014fa8bd03f2f4caa2739ffa9eb2ef5730d4bbf4eeb8b0fb09bc4b10af5c535a084ce6c520052d2dcb874eb18ac136c8d077648a8837000c4e36008dd8037d3bf7189b055f13f681ba1ffcc446e89759118b18ec866aea69200b359e96be4b6b004dc1f462340391d9f76f50321b3aafdc1fb1d30130a1d9df42677b4260a0851802d3d80d63b903f77a8dc088ad1ca2c266bb929e3568c860c292716893ff2a6fffc58875f9f3c6a3f7a649bf1517dfc5e1b6a547eedea1b55769722d6e11e8295a22ffedefe639ba8f09a8d10ebc6767aeab7a4f78725827775e65455fb9a182eb3ddfa2e0cd7d5d53712354aa4b852f15da0aac90da328177f0ad38b0771804ff718d89b3d2c05d51d4ed72ee41b437ba07fdb3cc6c88eca3580d9390635966fa996a643371526a70c10bed4df773064bbbc32c4c04ffa2a15fb2b30420e88c1c8a66bce8c5e9e41fc2a8631fa6be5b8aae216b931a4452bb4b6dfe3e3bc974dc1204f54f4b678bd8c8f616ff584bd61925c45014bd7a99ba0f9562178fdbd5275c35f1336192f8293c564bd33e6a2656780091c9a961b0421ee15e823f38d926af4b73075a333985edc664f0c587744d52832287f8fa435979f7ea54b77758174ff6ce4e190024d2a98407d1ffe68a7cc718b084eecd0b699ce5c631078640989bec98894fe62ca106ffde314633ac1ebb96c13da7ecd7c4205c94c88d3f3a4a16edf9520745068f5d9a74df4d3eaf459c02d1c691ef992d03bc14ea3c49e9f7a87c88132d6f3a551d23d7b19b8de79e00efc64294fbb3aea543c2a2c0264fbc30305ea30e45eaebc8d9485406b92c7cbf82131493b7bdea6674b3bdd3c9f0ed1eca126eeb0176d8f40f5a2771eb39de551e2a6ebd8c98a17af30dc62ade618f2b08bba700fd284225b708b73e91b94a8842350a1a0d6290e1ca84cf22d57e57915541fd4274a86301168bd11b73fef51bb027a9862e8e839b0156c086b32003fd10eed82dea96eb6888b6eca2e516d4f60081cff25c1288ec2691fc0432aa10880117b0b3a3de692aef23015bf1c62ba7bb9f76f1bc31bd35b2de3c2223b05c49733e232492884602699258067c0f6b25112cce0725a5fd788d0f5d06fb24a87b9fdcd959be6a5595ec5f00362c6183a7b819d1edbb104705d83203ceaea860a967b143b29216d3c9c3b599f8a6f9701d355c22c9c1332119f6b0157e23393277e19b9771600699c86ebd25fc6a89cd8cf14e0907c77c9a68b6426a881074d7f78f24c4224df5d2b2f877c1784f73e648ec9b72608a635c333e1835d714f27bd9543bb1e67451ea1790427460161ea975d29aeac1b7b9a2c87064add2f1d99039fc4662305141f508976561c94e381568ba89494c6e3d3b630eeea5696aa1990adf5d47b8ad1e74f788b03012f1e2adc72f43dfeb0d02020ccdf69464ee4e98dc41f5d110305acfc87c2090e19db1ffc78c41ec0ddc02cd8dc7cb6bd2ceb70784c693b4801f53b448f12586b4bcacbe7542599eef82e37a8683203eb708548c82f69ef6c90fe1f9cff5324b43b2f7c6bb2dfe7a33629709a362dc10cc61e396b617f2eca3a6d79984e74cff4626e9fa11aef0ca219e6461b1c5a6d19cb07e6e51a230194c5fea713417c328de84d901ebbde407dad6e783798bf06c2e280c422afb56b89f2ad1722a76454353b3569129059481b5c06268b6ace5c34f7fe426db47eba2a98f8192fc567c9e4c2ef347d7d98ada1ee51327aaede63c4c244bf3672ff6588dc651b41e1741ce42079f7998a753362d9b05d5999f1709e878a6327385684db30bb34955d4a6f8176ea9e2b8b3ef8bd718ab9ad2cb24ab8332c46d1ee4a9246a73a95113dc89a2db2dce13494ac3f53e297df1b45cd9551a8f00ccab8e19eae535b9f0b8bfaeaa9f95065ef229433c6b2a866627c46c6a5abf6b1c37d1abef597e7bd883d9073510c125ec60a7c784079081acf9ae6d524c1e146108540f7b4ecfe9fb3a7f760106b303ae8ce4d0f264b8c99f23781cf13eb11ae490b7714c5c0402147a1e8d33c46a79e4c0fc1492a09319b5fd0bf91c15025e64dcb96954a180f62cba0864e7688f1e4a70d7e2f68d96812a200e82bb99bbabbc7c7106662224135499eb64c6af3e5cce79c63a026715f5282f35518380d059696215d62271362b4e3c8f7de1ca06ffe1d42f0258acc1b43fcd19dfe4d417a396448af2f9a1da3c637b7b90346ee63fcef12f0c25f05b122342910a1715c58cdadbd6394499af5f28fcadcdf4fe6d70eb46c363151594bc59fc4ec124067992e0a11347df5991ac1b113f7bc2bf92e5923a6b261a2e160bf20f95efa1067fdc6b27cc17bada56f209f83df0729ff726e016fbe1276685dfcef9b49d43149b1dddeaaa1904ad50f589b65e605b6536ad3c08b48238b291831d5389690af029733cc8c76af952ba663b6fbeea6766b32ffd36475c93c31183e6e79fad35e4cd35ba4609c3cba4ad5f36da67171701c37e595a7c70231ff7a112452668c4e69ad57d395e223e85ff7cdcc36c8a0c68b8151327bdde8cd2697da6c55e72f476e78f64826a5e03fb4d4e466d8f3ec92506d7bcddcb9a9b317a08ae7da2f0e58725e8f38fbbacffd775adf5c5e55e6ceda2a063610393f5d8eee373776426b391a163c29ab8d1d68a8a8f47a0b5d58a635c1907ac2a2b6d2e506eea5836b5f0a2cd75ec8efba0f9dfa50563bc0bf8b3cd718d1edc328b0e0161f3a40835b7cf0963c5eafe2202152a2953742acc837d33d01528b3e069a4c030db77037ed616061dd75932c6db0862b1439889b5313ca8cd06718a70a7953cee07085b93379ae0920e01f8d87edb66b60ef6f623d4588efd752d29edb6876659c7900d78908d8d7dce8648a3f929205faa2da85cf1dfabecdcdd752ed9fe66a4f534b431cbf19b5db0faec69c0f74079c9013dc74c46813600496c03d6b8e90fa6ec710dfc1119163187ee70862f3037089876aae213a41a17152c739ea7d0bf0db398f8afb59cf0fcfc2b7593ac2a4d4cb85df23f5a05c693fc47b4294145a6303b2302f283a0b731c4e84321cc57acad5e44376c171197ceba2b9977937fda9ab53462026959b63d1cd75d0f55b5dd73556835f981a11678eba87d0644e34c01f5c0b1264ae05b1dcc5217802b068129ace7687938702dbfd42644a13f288447675f27cd64920fd1e10c58bf7182652d1cf7f30e8cb0aa9ea57a559970e4f1d251e50499f8c7a1a5a6d12aec24048c5e3ea69fe655a5c41f394844bdde050cdee2be79d2219f1c3ab39928a9a4d6db6d3d8f17437e1676e1c6373b9342b8d27a1bb489bef111667ddd947ad15d91ac031e9491055b90fa44ebd9d6b3ac392ab5da4681e88b1088781f32b367a40eace36526a313f9f587da4a50bb5b9adad486cce0b08d9840c40774157f172ed54056c78fee3f5b35d535296f4245ea1995ccdcd82f98ab43cab4c84abdd96a33e394ce4f33fa4e8968eb758818ab47dfd4efc4d8dac7927b891b43de95f59889add1eff612f4d67ff661a64c098637a6b78489e4e40970b254bfb0a037a7182ccb4f5462a2daad04d9bdf2da48cff2b2fd96ad0835916dc446bef5e5e4b67de2ce173304b10046fc1910f9a28a22aa250e6b5f4cf1f6118b66a3b7d3cb4579fd3cde3e2dbd34d56328da85fcc855332b8d7d78b3ef92393a8f99a42dc37b2d01fa73f6bfa63234296591c36bb7a10a34a1e6459912e074b26051ca375c335fe8767fc45423f26bcdc4d7b4754f269aa0065e1b7cd29e9d287ec61d203d18dc958a99b3a2fbc2abacea27d131f3db336705c448bc38c6ccea2ac44ff0f69296f82471c5152618116522bf363c92f99adfc8d9ed27312d107511b9b9a4cb5a0728e0a24653d0bdb92ceb400677bdf12b3f35c46494dff0b38e381f7011af819bfa6579f8d3ecf2eb1ba8408d37ab844027ce403c781fee436f06e94670f7c4cc4aef23f627005a9ff263f0083a3970b26d77b70309856ac239d7ab0d2b42eb53de1ddfaff4e4c793dede2326fcb21b8398c1496bf6d475e71d86fb36a846789f74c5de362c34d0383a34bf60cda7eaceafb2ffa08349fb29592cfe7cc8323ce02a1015f8cdcddd02c2804e2e4133a20521e02253aaa084d7cdea5080a4c86c31cfc0fdd65bfa4941da19978608eb2082059f0ea89c499f9c56e21aa020326afcac678bd3ce0e29a9f742d034c973f987eef8441aad1d094d1ef835f1d8f193431c3a7449746bfe0018eecdf7ebba013470101b56783578885ca93442360081e9b8f430c835565b15a439b890ca93594a8b1acdd22b56c7f1121da663487b26fd1fa36618c1c533476a74e2809ca1fc5bbacf8430c6ae9edc24e9d5709bbc9744783e1b71a18d22527dbbc772356a431705485d06a200461711ba3338cfa89a2174ab97bb47fb83cffa3b800ac84eb7d417f09635eed7af474bf0c9ee399db0ef65a4f0ac05189a6f5a9e9ac145d45660a2aedb39539c474a7cff4350e198658356f69b391209eab2071303010321fe58ad04b3a3497341be110f57b92bb65529b2bc1d2c3b775acc3f35d8754eb6e1e44ea34de711144f30275413f92715eb0f7560de091b630117b297142f8a4eb78cd1156135b3266777769cac445ec760722be8df8bb107352208198be4b0118b4057f0814621122117a3df3141511ac362dda95d8b36ef75dfe8cd51001c96e0fe6e3e21b33be530672be8ed80a12b6004ab16fefd2e18b551c99437222f621a529d90f10eb92b4c614626ff1386db5e853c4540c7cff59a3a1c64794a7cdab85253a9f7351705accc28ee04c96009950d3f27b1985d8d86a08a9a91781a00e59b79fcede6b6da7cced816c0cb79eec640ce6ab39d026b51fba9fbebeebebe29d66ff5daf3e5f739785325def978cf5e7bc3a5b9ff3feb8256aeff46617c328f0c6a31252c879286c11c2b99a435feb0ba79e13f785d643e26ecb8a8d5a4753e4c1055cca561f98c1b588b7cf351dd50126adb121735a962ad8ff3f485543d4f54ed101ea967fc7a8494a72a3185c7a64cc047d4820cc8506e9e0df7bef8b6d2519af336f6dfc9cb92c4bbda3c73ac7b41101004a584b1993322e851aa7046f60ac8fc67a8c85583f07c3e125fe82227d20550232737f6fed46dc188550b495679765587d4f157b96ba09a8927359da05a7e730a9cef01d1bfaa5cb46518ed587a9125e2a9fcc5a34612c7ef07496f99bf6b5de768de944f167a457d441ae7b8b864c556c34eb9662a3bcd24fbb8e2993881c49d45db4ed99d91b3ce1f74f913a7e5118bf3a93f80673ef34d6d1769d8665bccc2fa43f8273a7f392312f7336cc0d5df16d0bb1d3509a7597c2a8c8970ce2e54404389e8d0fd3cfdb3ab2a5652ba63fbd962a1409063d4d515fdbfed7a2f08ff4d26f5a691de15957ca7589e5fa4ee331b8a01bff93bd7a26964ea60d46d72bb221e13ad1a02c6f02c0b857d44dfeb6dd8dbf1e17f2a9344cd58f810fddc413dd810bcab4fb0cf55bd8796f547cdcebb101fca81a312b5e9d3cd467b46f1ca7d2976604bd1875c466263ade8449f6b87f99d1f5b2d29e51ca5ad36dc606af1567f38880d1845ac8255bcd440b8321516940bd10dbc341200e297f06f0cc08f7802022484b30e013f024e723b3879d55ebfd99029cc72b7841025ed9b309d59bb9e564eb0d0401af8b8969f11384894cb807cb542dcb7996dcfde982bffadd8a43e62f49bef41619a5be6a93a7ade444629cb7d425dd7db822a33ebbc4a52e055226604684e353436cc9a88530c8377dc6f139d3447b27d31bc68c12785a5813ae778e05f7adcb26ee4756bed3e621d26d8e0baa72e6c35afaf4dec1f99cfe0d09dc49f116562f8552dc4ec79eaea1ad6a13ff8600d41814fec99de95880defea056e0f27577588790d517f3011a7586fa1eb4e3e505480ec01d4c81d07f1c9e1b727100b35bb47d270d93a84760903bcac9573630e35fc0ed2931247a807cabe63bb77b12a35d8d1dfa4640763b29fa47b96e35af6c568f56afd0e15292af84db6b06c63e3390fa99ba57e2a7df6c05bcc6479269c1cad4c38261c4bfaf4a5019560bde5a4a4577d14bcf4fc901775d248def6cdd26d7c29fc7e68fa7b984c77e171388b7e424191c76c5e86093e41452ff1e834c637a357d3260b814e0fc56d1db52a3d9c6e2d3935bd0b7339168a2c61fecbe9f1633acdc19617aacf8a29e543623782d369dbd7a9ca0a7bdfa8300aa48fdac7faa7b53cfca1392d41425994055b76fafdf9ddad865a805415b6bb755ca2224c558e5409458b55f3b91fe8d81d4fa93144c9324607a72c346fa3d641034c892d64a3e9a985beb0e29a23d971975bf0eea219c578a6f37690ea13d7f52721855a90f1c6588e45ee68e7cd404cca9e9c4d4c399a3cd94fa5526dc4d42aa206fe64bb7a87a43cd6e236ef4748a419de65ba0b225c411e1bd67f622d643fb0b3d3774d4d843ebf6803adb23ce009329713ac98a1b9a1e338d88b5c1dd2b983a5433652875eb537f9e76c9f64baae99e7bee57f2a68a8118fd698f4ef0b071e5473ffea67ec33c61d47b9145bab0ba9fd9c26723d8ed30ad0ef21e75c12d72d19485dd3e4d9f1563351033ad9f56af01c5d5f1afa4e7158ae887380911a0503129cdab1ec94e4bc2876c11a5771752757819e3c659a497d09ea5f2269b7079f57327e457ab672d025eefdb9f8e696a2ea58d35af39531ad67e1eb263aa6486f33d5f5550a6ca1e0a0d06df47b165587f01d15de68811d27d4524965871a19012f0e008dd32588164683c1cc572e3cdeae855526e0becced09832e28bc60d79ba02c5dbbff6c5f4e5072603da01954c3f4dcfcbac2e37f3339cd96d8c14085522975b0a66cd19c1050a86d36c3ae9ade52068c4f8db2dfd7499ee927d61c49a8fc5f0bdc70008c1facfa6cdd6eb410246389ff7750eee4e07a60cc1514b0645e9adb5a54672bac970b12b80ff052a90d8498fee0fca8380d6de769ba10c152d21d2c7f229a9dabf77f40959686ae09db8d3d2624c1e6cfa2ea9e094a1a43c109baaf8549195b5420bb22a20bad894b151817a76044f71bf11f44c62f7acd298dc72b8dbb94e7d2c1e06d1ffde674d44a28996fea37e962bcbc343e7db1d826390b54296e84483bdb2b53c799d618a9461292b2e1cea0f9381d09c9ca190f0556160fdce834c8e6deafcca222f5715eb8d46217ddc46edfc5ed28f91d91279b4f1597adbacef920844ae4cec9a08a22d918fc9f0a1aaea2adee11e816416aa06035dbef1630d04227ea64eca433e208059c2a0c06de966e09c483368facac667ba6175edc2747d84f3911de323d7017bf6a32b356e03d4008a067a0084d1f5b38fa7e900612fa2e7d33e27da125bbce53419a8e38e59cce80fb0d9a71767304b74027f2e16f0769f249fd3dadd9afaaec12dc47a2f65481cf3915c1f7a7710c4c6b9d65de8f2e28a6df4518e4b8a3a4eef9cadcff19ec82c55b620628c39c358817d775b62ea5c7ca7159c94313b1fe6704ca3152e900453d9383fc15dece463f93655f36f83e864c3a98a126471dd9c1b0903cffe62fddce464352f86afe68fbbcf329a843baa64c1d68186453b45e323954902a31713da7c6c8d9a31f1a2d09837ae0d1cc2e8e2c0d9f95a48a73e0b788e97c55f8738c2cd0a6306e858d3e639250cceecc20632ddbfd7054971431d61bdcf5fb0c3869de41f3dc00ba60715a3fb8a901684b296d6cc512fd84e7c520a9d82fe59e6d47a91bd8e7ec7d7dcec1e5f8e0fd7ec270be0f817f23839c8784f40dcbcbd27715e776c407b0508b7ddddbc98556a111a0d76d297076984d490bdd2de65cb70537525f1906d6df822c72639ca9612c7f4a2076ea84baffb7b152492852f9766a5ad3832dbf2106a6dc6fa3742afec27c461e345f730a1851ad3f2d43f2e9faabc326a5a1bdb85ca1cd275278aa67604e8c2bb279d1c5bbfca5c7490e5db619ee8c20d9358e0ca116867b2c8592ac378c668448749d3dfcfd8b67dedae13201e985c3245aad1655f23df14cd3e839fbf0c42f4ccd24eb2486dbdcb51e9d6f32998db38215d6a4d16bef03b5541d92ed5f7daa2cce5e6a53e6655ffc9d6154438c86d512e87f4ff0dd938462aa82a3de816f072cee37e67bfbaf43a1a6f7a5a5d49976d7d14a828e5e57019f82b4c8cda28a40e44820063ef20eb634e3754d7bb07578cdc03e78e68043bf37f265efa8aeffb47a2daa28f720c2429bc6112ed99c5e7cf97db59ec0ce86aed3e7f5abf76cc5f1e3d9460c988c0549b252e30765495c7642e05ef2cecb4a85e99239aed193d7f16b9f1bedfcca3280fd888851d376a8aba2855975fb0bf45bae6c1f80bcab1dc8c6dc1c3c65082d19b2827fe0653bc8cffe9e7243eb9e145867b802de2f90a4bc95e77b382b8d02b54f74f2cf8d44b0bc53b06d0a411579fec21a094588807f67842c0e7cfceea59f1b83f91217ee9597787d43d23805964577fd48c9949b963a719a4f434208955eceedf45d8edc48edefa98f4d36fdecf33492ea5fcdf0540ed55b6142ebdcef5f013e14814896cff945152f7388b05f147a2dd24c8554eb1fef58c2f97ee018602ca95dcd383b128374f020a6ceb84bbd4cb09d78ac408d396ca8dd6e7f4ad07c134460bea9dae0a7a98c1fff6ac3e0b1905cba56a15fb94a514d1b9a932f4da496cb52a30290d3f25d678fda3e69bcf07dda3219e8eaa3c4969f6843f64c9d920f5a982c0b12ca72710f2a89534ec052c7252c723356fdaf919f47327ca0d5f9247996846362529fea8d223570da0f679b0ff795f88e81412077f5278bbae67ea673c5015082dadc7e637fee70fb9ce3d7e1d9072c8df7c56cf7b3885ca90916374bb085efc0844ad4374f1a544298aecf1b94e49b4a7e5ee80cc8651694b7483d42b0758024cdc671120610d14485847e7322001696bbab27ddff9c60c62b206e9c9b41dce87852389fa345612d8c7915a6e8c177cd85d7a37673152fd7804bb757c4b8089db5ee30780858c2ed18d1b1b30cb2995e2346225b61ef5b10ea3eaefd3dfc08e0913c6d5b7662148f53218ce808b5a011ee7b227858776e4181b8e081fa043ba791cf71c7341b06d92276ae7eca3ed4a237a116d68cda029c22b595ed0c45f75df47f15b83123ca4da37476dda1010c2bb7409ed23661c593b97c09ca8d93f9b8f10ef0762f8dc65485f7a9191e4312d09fbfefc33cfdfec42411d09746751e0c4b04a325ded9ccdb92b314d62c1fdc0132a02e8c4ad2fbfcb8393f678327b05d00fbda7c9a8546b703fd4978c9fa755758f095d2649a884cceba419ac7fb0bf525f870887cd301f34a33e0c7a953ff91bbaa04910605c2ca77419f43cf3237a7dfb6240443a20e6749641e6a3833c5160286e052b82e9ee38a85998344ab2e2988c90e947d20d18e70c927f5d3283065d375ac979b7c47b9071c06f2e3e2fee4f28c2c6882bbd927cb54f10883c098199d7b256c3f5e25f131e95079175009647b6517de0ff96859962757ebc8637f44e8e79ca62b36508d7975bfaf98f4dd52a439c3570a5859c4a62d8e521302c984137a8cf3695fceccd6d05688433e147b1e06f6e35721b81f6b54629657ce531647d0e2586acb1ce4343e05b319e25c7dd5afcc611b4f0a56b1d88518cfc08b869874ed4065a767e8c98cab20fba6ecd6b223b7d14f2787e5902f5df946aae284b558c0f36c4068a147473f931040fefa11a5783dbfd755950d206b9e47a2a12a7b28b1bacd875476b3fb2e30e013fc25d04f2a01f80e32e0431c3a018e131b8c8e60e776f205d2a57c4bb9413513f9e6f96d0ed3ecd7c2b220bce2c976ca25c8811804bd0c487de258f79e1e9d985b1e58990b186063e72157248e19be31d4e85e01f3b6eb26f9e721d88cf9a3961dd9dff72abc94dc58e06ba171d36c6b277087219f9c42dcc427a13eaaebf4e082fd3264c1e0d36e0de8dd7d87850fcda16328182655005f68a5d00b208b1260ac2d461cb47558f501dd6b24b22b823455bad527b41adb10cb1bc50e0a19e3bb92721293a4492cd12b9198a6081177dcf6c3d5c5059fe39314eb7aa55d2f050bad468459e23b24d0a54144d1f009e5a74e2c6a2a9d4498938afb03025a86545a070a5712c6edee76e4f40b90ebda0d273672e341a4ee8e50b168b4f3decc394fdf1066434e8938a112006088fe54a59ac1f4f254a426778c0662ca184c5dc5f19d6fd589dd4823c7ac7b5e8531303c0a1867f171784a028b6c3811dce4ea903b821340a82b450604c24ee02c05bba450232fcc80e28e726efe66791663845e6ec083c8f450383f46580d961e13ce32aface68afa2cb2d7874f13115fd75bca710e5c7a503cabae9e053d5b939e439ee25bdc92e1efcd5095da5d68a848560e2db8277cd669abb2ffb0ec6fc9619e909f8f913c496afa0895467524cde90d71fc8c5a2c63dbcd38b5d0a320d534a2b8dae2828336eab2aadb06e731b686833356dcc1c48bf250d872ab81a840785b17582f04e79fe99d0d1e36acaafab0329e854b1befc48e4645f6faff7bbfd9430b4ae270ed08f16ff62b6c3248326b998f75222d9db3e346dc6f3ecf4db02f3b9abb5afeca3a90980222f4d566fb96981a8a8631c833ed3e68ff544bee663923bef11d73e64410689711eefcb209b06a691913609d4d946b2edb715a284f17057727ff23cae4408e22384910f4d751a8f945b29af1fefd2141bdf7c401b975fec4e3c7b20f8a44c1526a889e0f700bb486ca6efc191e332fadbb80954589c493f2d2cb7033b0d0608aad0177dc4f81c79457c6aba3ffaa1937803f6cc4cd1bd5fa248ac961a1c3b87dc0ac37eee6eeb3c7d70de15c0c1e96b60998b8446646a2c7e7ca1fa3f3af8849e6ba024aed2290781fe6f12c91ac84fac174c1096ffb932062b4cbd10375737bd9c554e4ce147dcdf1e550eab650190ae69888e31cf2fee35f7f5f74c77d7b31c2d2d015f27f5e0802383038b1ecc21eaa74c12f22ab310b8ac366da9a3f189e4513888e372b81acc7cbb7d156e29ae843c18e1fd7f79ca9f4b1b5fca8fd9adad9ef8283a546950c987244b12fa117dd73de52b847dc3e7790cdaf6b612cce7523fb07fff9c00dff6f04678cde0ea134a5064d1b82b5a5e8e43d074091b499d81c70dc37112f59f77567a57bfd02487cfa9f1bdc8cc9fd122ea5e650ac5ac0209301228ab83d63fb4ee0b7e9fa4afa762bf232f7d2fdc0eae3c4f88c5bdc6cee9ce7255cc926a3f3eb6e3a27abecac8981b2d089f13650cc68ce445bfbc128bde9e2e3c4e917f5fdca5418d53f11a3ae7a605b59f1a16054e2512bb9490f04cc3ff8410b35389afabc67406e96142b36dcf8216bee37b698e1a89c50688afb6fb72f820b080cf8ecff70c118d3e2f76fdfb2501aceb3acf65b2875fa57499e00db5c4bc9072db9758843f8e7c4e8f4aca38f89e473744d363a1f103348db416dc146776e778eb24353acca13cbc26766c0d3ce135e8caf01eabf2f1168cc6dcdf4a144d1dbdffb3df929f80c45c3fc47a33cc3a24b1204187f3d5a18b8e8fda7f641d80b60cd46b49abe08637eea861fb1a4e88515255c8e11f4e40491d6947c8de94068cca5d4d28e3c881e7eec864084c084d87aef1f0727f25cda381c42e30525e3fd094e273bd91f4652b2d473c7e01dd9ad43851af86fc59435453398f46ebee9a55a8ecc0e0a76956e6a9ea3ba657fdc4ac4fe0b85fc8ed4caadb4a9cc0e08a8e6a37d00f08d44cebcfeaa9ed6605bc4272eedce9bdb9617f8966d32c9c03f4a258884c1c2e4989eb5ec8cfed534f338cf95fe83fd16f7dae4eb83003a25474dff1f58aa961522846407575ea852f00d15441f2affb69a71ddf169808d6bf4904394fda34251321809ffbd4fa64f5469ec345f67ac61443e920af93f596b44e3933a5097a244ce2caa9376d95ebdd3411eb8c00e59d0a7b85de7b64dd41cedd01cbdd880753ec668cac533c40c6ac706eacb1664d1028cb9ab1589842c4d9c3eee3f7216c4ffe5c948ca1716f2be821fe3aac99dff236d392be8c830b2f2879a4e43ee8b41be93ebce64bfad21c0fb4a2fc162efcce3197d1476f01666ca70b615177cd35f2029f9afebbf1c5ff9bfdfef7268258aa3cb5013a0239f56d4c6eac36e8e44ccf8497687114d526d26fffcca3427c604539c8d2b4c0763d2b959e31b4004851a6ec12bacee0ca2ee5b38e7eb70bec90cb5af4f051cef461664d26d55fea8baf9e08d626dc14d6e923bd800c6aac1db50b6999bcdb3d038d863268d417c3e54d7542078960a2f8a5e3f0172093bf80bc13c9969a6e378fea8ce42719a9b9b274983e7ae5a9d55c349611c8dc6d16c7a86a0a7fc22c7cd57cdbdc2268afd51cb746aa2cd958db7f6112b731677025083f337f59743b7510647414d1ae3a7f72ec87d2ecb6eefc4add0c98f6a8b9512cb918868a6aa9671e9ada6615e57156efd3d63810dc2b0dbded274735e5b9f988614ae0d6e19ae5a763bba4c9371cfdb8f0d4c46f99dfdaffb9dbf796bc1825c9c186d34beefa3286dc8b3bbf25a1f00e0a4e65e3827c1511c21a672a2a7f665d8dcafe6440f82d6a66ae9020b20de4bf86fc801f76b2d8239d1f3e8b0c5f6ab5539ec9696eb8aab2863fe3fc34ed7fdb8fc46c3385b506ae620cf6738f4b4ecc38cceb33ecb0e04c93c75c9c8611ea344a6a9a504e42d690f005a10330172a12c2548d6fb05812eae7be114ffbb83dfcf7376350405e1ef222efc101f2ee541727dd1af4b2a35d57d6d67cdc5d5e40c42b17840b662290fb376311e5b881003b9b05eb44331ca94fe2802cdfe399219099b2fa4b7e5f5147790eddb32f17bc0a70fe62bd8276760f8b0a1a1650796c7ea0d860ac04894f7619c661be7f491bf8ccd3f981e1a2be7d5fa7891c6c2ce533837ec938954394134513e3729ce6c08f42d2008a4250478fa0ee35775a783ec024ae8887293f1b1a99cf7014918f6c3aa711a7ee102aca74f868586e34ed4ba40c315a719c70f4b02e024531b3708619e2442353b52362fe6608c27c22ecfd48d503079ecc75e6d17f4a17af9240af999ebb5cc99ae94823068a7f4f607fed8f15625ed123e5de167a07fea6db434f06f610cde37b10b270ce92aa7e75d63d0e2bddcff91c625977de5ea72d394ab64bbe668d22e64041858d29a7df9619f0f3dbfd27991f11565ef8d2bdee33542371c09570acece12f188e79136cbfb4f522546462d599e4bfd14cc31a8e5697533692700e3c2230e826f893a4ab09bab19d40e1bbf408b9efca9a29d91ecda247c5f34ffb790968e6e42c2aa6aa192582e3e386230fb8d9026c9dba7acec7989fbfb4930f171e5317e05ffd44f71969e6265c0fbd351363cde0bef72247e7824d21f2f73ec2998bf09de8ee2d69599272e7445fb5f814821e14938c113456643ff43a611fc5020a06b7e0fdc562bcd29617fcd152a27daa6d13509f37943cefc4254347f6930cb67f6f76affe8eb902b81f2942432f7de369ab8d28d87e1bd0c49cf0ab34c468ae94c1616495f68ea46613176c93de28fcc00023cb0fa655c55d9de9197c2abe92769182e53911ac93d12fb38f258418653fe863a051993e3aa48af501617eb7a8215983ac17f700a0a7631da2c480943c013449fa05a80fd34b28c053ef599f428c373a252d9fd6f9079d59e0ae9e04e9eab15f8b9be0ea3e1bf5cc740c0a84d690b93aa8c790c55399484e8cfef66e1d2f1f7bd0928ffcb74f7af042646b05cbf4ae265d774dfb0916e91d4c9a9c0772a0f38709db0b74e9170e0e6b7dc87f309bcb8b28bdd2012390df29ab2ae57ef8258a937c28a8bbd2513d1f0ee9eae4408ad037a3535721aa49c6acfa97cf3d0463bda56879da3e1a8b2cf477d88200823792ae64d1657954ba364600c47ee53db152313ac78b72e33b3d26fc70524d2d8763d2521962e8bb61af507fa706c101d2fe91893cfdb2cfb030a35192b67fe495488b3a3c9090e1fc5c8ed0f1293deccc14bcc715052b3e6c58adbbdcd9c7f278051aeaa089cc22552c7f4ce08dfb3877b8f0a209ffbe71716a62617956e593f41dce26cd543718442c0ecaa220eb631cd0686990997a24fbb7e2531b2630031f95bfc5d27c34818ae1e58dde0d975d47b8bf4c53e18da88f1248feb8d2023b902b1004fd2e872d0183d658e57ce5628347e2d503736691c9f48c0299b698a5b4205216107fa2548ec5b8794bf177387ea88a32dca3d4ffe116146b32eebe7b59544283b472c58609b7fc9f0643396671558601d319609643825191c8e42b35e53e4c8fd660b0d3924bcafb7c6c4f44e141a0d7e9bd48c7f586af3a5e32bdd8ce95e382e17b3a2d702378fdbc039dd0432cf69ec20e0698926a761cea8ab3c39138c628f8d6cebbb4f0caae7174efbf4e6643ebcbffbc592eadebf0d9f36e9c043747a69442e8ea137181e9fc59353bb5893d56af0958d293d3ccafa83719f06a624c743b44dd0a31bdda6d951fab8c22bff723aa9cbd2244ce526c1979acee903845d2c9f7742bb2a8797778494660adc7c50d633f8d839ddb9096c1799d1cee7f434406000d4025308aacd8b5b0c6a4455f68f0dcc991c2d93908cd3a2951c810b1985bf274a861266ed1bcf8336cd372923eb4911ffb8cea9fee5d74d395fa2b790d739a925a7b6efd7dd6ff7f54fd4be1f2527e0269ff9f8d543dd9c62ad14b8a3b2c32e01f9cbab877c48eacd6de0c4ff66693bbef54a092fa2b578510eb4bf6770fb417ca1f6f3730e82d5db38bdda437c68deba4ff8f9da519437f549b17f6afa1c1d40b479418053150aec3b6f80c0cefa08f9ce6681796dc0df432dee6afe076a9d08e40cdfbc37588499a1d012deaeb4015d47d61223f27bd913c1aee1df53bb6a728298c8a8633851391a267a81e0770871f4320bc9f3df5d6a81f9feb96bc814cbfcd49de0dc615f9c5ef5c497521295b065ec5efb39466a0d71eb025b4fac6c91e7a77528d25a454a90495e7b3525671401f2e427713eb9c4afc0ed0e567b1b774a617f8f126506fa0d3c5f07ead0804149c3025f8c46adce6d58fa618b7ba18bdb088fe1c5ab72e68b551bd37bddbfcce4b8bb421089ce58059fa8022f2e8228cc5076ccb7c1055daaee5b8af22b11bf0a88c2b54a023b72c9fc7d5aab725d304e97fd2c334ab96f77e29b1437cc74787ac9c9cbd01fade89152db7c19c2d6979105b58ea1f51f7c8dafce90678807da6ea51ceff5df4eea69340086c6ab0235cc3fce53cdb2efadf3ace12aaade375e1429d7bca2cb942e047e1b5efbb8a54f3e276d258f96c77b0245b333ce5f4e510a9da7bf602c9b20c1e27f5c750e13d92399d1187f0be3575f1fad8ca1bba0af3f6de78a4abde10e7a80096d408236a5befa55458994b4fd3b227e4808aa9b40d6642a517483c8bf42aff5dbca25b43f2f9d7decbf3f9ac23842191f1c0f7e34f54fe5b23b5e9c0d05d40453701b1a4a2396a5c0924b37f2939a4b5040ace337694cece2be2b273891333cde48288ca62fdf477967a75e56b2de7f8cbcfe2661c309814f25ec0de969af89b2b0b7581140b823a7470674c4ddcf1bfa6daac83db807b36427b1f3819a014b79d4eed6772c4bdba6b4839bbcdb2baf53eb318f42275fe8f4b820f663ecdd0ff7bea0176b111e619f94859470272e4d097aef40f1bf1532bb88720637b3862e0a57f042924c4bb27852620b78117e92a4aaa49953cb2f9a1ab6de01ec72c1917c4d560bafe68889d92bdef9597fc6072180618cd112cb2a0893ce3572e800d8212f556ea2589dbeb0dd5cef8d789c54961aab4421d205763a2a12b4d067ceebddecee0814619e27a2a2d177a47095852841c6adc1e18d080a54807baf6ea2c1052a8a434b32adf15c7d717d341659bcdcdda02e3c97da8d88f9c6cdf10f49c1c240853890ceb62f69d7b5e1ad34c3d838e39ed92721f2c26e126e1ea70c30dd9417fe6a70a1f7e656489d2b1804183303605920f7ff5447f965b332e26635029ee15cd190013e9b4628bd27723ca252b9f309d278003857a5a3eba60648e7380456d29224f7af9ce4edec6b4a9a7c0b2cfd0ad99dbab0373721a545fbeb55f139ce7172f41fb0abf6138a13fc79cbf8e4952f7347496241fe91dcd3b262b4aedda5c81b6e46fc6dba42a624f9df9eb4d4963ab672f9bbaffb6ea4349a22e206742e28b34cbc7a99278ad549eb49eb1643f928b0ad418f9c71840c933bc3a97d2629a3a5bed8ff1c0080e3643a4b329386b6c0e64b6ee1d5ebc6b8a54c54ceacbe105df020adc3bfbd037806df468a82098a6eef40276798e8b549063053cf9bced5a6b76711e97ac67e7189f0c6e0a7021d359e94e93fadc795317da81deed0004b12815e5c1c8dd82a7d6ba2f5a863cbdcce8dc3846e53fc79d8b07a111bf1f4041f9ab0fa64b952bdb83ad30f2317812c45f5914a4183c09832325784065f8957d152decdcada90d98ebff552c933f1abb530ef44f92cecf62c80238ead151cf324b62880733bd14ddcae230d6f7ce26f6b19c381aa9bc6322df3445e0eaf3700b28f74e8317f9de0c94e12e2fb40cc562e6eafbccebdc715e3ed55469d32c0f75a3bf2ea8b551e484b27522c4830b59ea868fb5478894dd8927a3babb0d888389e86eb739e9e9c083b22bb31ef00711818db6d082ace61639900d1ca07c5c85ff2ad29042167a291c3e494b2241cb4af29d144efba672c531dc8dc37ff0382d7658eee7315b9610f293b151930befc5fddae87224222871787e078c1a5fd6421b2bde6775834d67522ccc5ebad86de88d18c613a221885f954f58ff95f028c1f6acc227059f5cfaf043f4cd87f91fac502fa50eb2f06c44179dd7fb6adf905040721eff049f23c138c284e6baced3177f9f51355c079acd9104789d4685a0f248b16304902b266b6677729f66c63cf0f645d4a86cd05df382be7e08fca08131796abeed5a9eecefc5b587bd8a06e9d1c7b6b161279e639fb3b4e1ca5bf7d833505e67a0d4f16ef0725cccd7695ee08cbc396e50dd746083d462735a15a04c3007887a996858566f0212e0055b8a163783ddfc0f8a799add95af6f18e22837c3ed7cf1bf5a907263e6454b6b976adac127481722fd08ee43759df54738d6f6f4691e37dd1c03e4236c5ceb6970debeea1de074bc86a0ef0a88f38c0b35d00a92f614ad7f8aaaf57708bdd0c44efe47da0dea0bead660794f776ac59c38a31e06ea94ca436154dd185aa8c50310f651fe6586ce10c273562cad021dc5c43d38e9fb3387049ffdf9cdff7f270c819dc66bc4afd93bc17523cfc32317ae94a1555e9461d8bf83270fd403b7b79859c6be3434ea5d8171f1b1489ab38f7e4b7455aee4752e11d38c5760770cc197699f178a199413082d6c2b10a39f5ff50d77c970bf02a109b14a596c8ed262fb6200841ae1cf76d8766487513c371e81f168e73735b48b7a3b83d7804a4dd602a00a8b454903fa7c9b0ff14df78996cb07af52fc512d70952762f4dae3f6c7e28b2e3a01a5911c9b42489f99f755c783e6f9466772006c8b639234142d5116d351b65a8f324ceb733d5b27aaa8b2d1c3d56cf1ce8612817bd63f4ab1f309656e2984347d07464f47c728222c5cef9679663d602e6d5896bb9b29c13af04f6416cafeb65936dff7300315b0e47a1a51a53ba271d576f554575d6e63cfee8d7c7ac69fe6290b05cdbb9ae8ba26f670b56185f765ebebdd229c4ef5db1eb9bfd6dbff31d638a2ca4495a8431abedd38985bf7dc811ab082dcc2385a69059732398f537e397d03215b4f65deb5c987e3871c6fb1a5098180c73a18f3fc86f8f382308dd0948dbbb9368fde5afcff29003994d55cae1dfd15ea36c1556f361a2772e4847432f30930eff618b7097c74170dcc38cb2e3b9c160e524a9e0e7e29d19f33f73c00d234a93e2d1274ee2c2b3f0749105d4bac2d08d2a8aebbf8713ca8ed11fa9f9bcfcbdf897b35a344be5adb391dbcb2808195b172274e8475e959fd3a0dbff6896ec74d52b139f32e6422afed4e40c8e86719f83af7c8cadba305fdbb44341a4bbe8ea84a964649db164ebd5ced1024fa561a1d36f608af50be81061123585883a1948edfd9b8916f75649a180776bd019c2236f50ea3a15373d259665eacbdfec4199fe8b4799a2e08f7ddda28f63ade67156a6fa79181afc85f5a42ccb9aae03c9314731283cd2bc140f002b5e0610afe5913885d303a4444725a232bc101bd8ed7153125ea0620eb0acb937768567784feb7d7f7dfd4edaa5e941572cc1a8a362d1f5c4e6d39ad3d13f2774ce10c5a8961354888509079f0158cd2d20b818ec762274ae807d4a64552e76e2e3ad68ba3abc5f2a86b347e2de9e8bb30c32cca90789845339ad18f1ba297cf3248ed5f738c97d28a70260179a3c0acf347a848c650e338d2dddb0d4e87b8c6f7fe2d4414386f4528951baa21be2b2522a90593fd4a092b35b3325b03d5f1d12f43078aa9d788fd9d02354fb4068d3f11d1ef888e595125e10338b8e89746d1f34f4f8a672d26486287e1a71b4f51341815263b23b5f3d02b6b5fbb59b48c581303844871f03d34ce2bdb88f86a4cd44c41803101ba7c69e3e15a05bd67ef56586ce0ba28513122cc45d12d6db345c603f612ab6127f2c0094fb1c7c7c34982b6dab7dfeb3679667a3fd34bfc251b73fe7c0f7de2870b9039c999717ab16c3aabfabea0e99101bca7b63a86f29441b6f2861afe80ece7285d8430ff5be23ba8d9fd93bfd08de589431b94ca62b5444d131945d8ceab0aeb1658b87fb95181f60d09274a7cb9e9d068e9c02bb9052c286e2a2d44f5e63eec94e6b90c34d6a07c0765b36bc698e04f60c2882abba809028d6decf8c89663abb9bc6cc3ac74abb13ae978a9afdf85e55904d0c81f5795efd8715116dc1cf2eaa245a966c10a9f51124cc13243b11ddd9b0859b5fa1cd3dc21f170623a1e5d69926d682e96c3d029ce72392a98f0856acfa7db1e239b411cd840433b78caf95c7b56f46ae0e8f48b1b04d70696b63fd509e07087bffd08efd1184b561e113d5ff6dc6c7898f363b9dab13ff376a4ad0fe46c555d37605292a3c34c21c7ec08b91a29fe6c8e804105fdf93b2f027e2f32cbe5f61c1ab7c8c45e64573af49889db319d5afb4f861c4034c11c6d8f76bc622512310b3b4a9538a5c813c0c14ede3a8dfd3a1f4f2b8d3e2b969cb94a088309baba83a032157d334ecdde749b81b43f77010ed9997754ebfc498f270909759721cff123c1a3e4aab2a5c6c7f44af2b4908135d0ac7400771051e541af25e5744d484eda933b6facce162a916ff57618cf5a20a663955006181a661e3049b19f63b3ddf8308ac5f18b307287b1804adb26317ff3215cb77ae4b13b67338d57cc876f5060b49dc8669c233844bff83aa2f55e0e7c25d7440f9204e0c0a70a7fde86d2bc36e0f02334fd67b7a446cf9d64359c91366cca8f748f905228927ccb047e0716e38319e93d5a7cf5324c1a4a09985d500dcccd8e4fadbb8ede45f0b6bdd2e996193df5ac35984200c20f0ba93ce2e099962e591e32e107780835ade7100ca113819c9231edb2531d021a2018843dac9a7e573e9de5e4ec1d92758fc4baa295e3e7ca284469d7d5eb3308a7ea16e077c20ecf846713f6d00f57263ac38b36df59f4c668c556af16e590f8695fdc7f169fc59910ffba325a519f1af89561cb3c001be3c976e89ad8b83b5726a74d9011fffe4b299881542c66ae04c840abcf80b941e2003851c6e1db08271a0ace1472beca27e262e2fe1d369bf2cfc9378147735fb43f737c2e436127567ec98d1ea52a7d3f354c8636f91e7d3fa1c67967286d8841717dd7184567ff036b6c06876fcaa8db9de9d8b4ccd0981fdae7a357684c82dc2d00c8cde5f6e3c9caefcc6e22e0031e960322260985aa86bf896a6344c318199cfec9bfad9e2bf5134852d933cc850fc21cf55878fc9777bceb78e7deba2792f4a80e3c823ec16a1346f1ed3cdc8a2e39e78e30ff6a918edc23a07c278f5d627b69758518ad27c8015c09c622e217541214d205aafc4b98960eb8da51b85f670a99f7ee06b1ac2d2e9247d9f8c3fd1812021a4a216c7e40949be11fa5d7fc37d5e1807b4937ff00c62942ae47bb148601ef343c5c190c77de7e3114e17ea6434b5353305454052f3c0407db6fec11a15c862bfda74a4dbe43864deaedc077590ae547b36acce0e1a6ec9fc52d74426112ecbfb2cd1a5caead5788a63926b2f80c1826d5edf2db5a6c4c2925ddb940f6772259c5a70b635fc1e6cc857ad9d7cb5e8a6c1838ffbd12f299b2cad888f782b22cb02d4db899c68e6135bacbdf826a2853778cafd373637f7f6dea0365a27175c688e61974b3fdd3ecaa77d5f46cdbbb3a569bd8e2185fafa251fda036445ac30d51d0d8ed0cb7ae73023a4eac7dd3393c3bcdd2d249a83e875fadcc88beb39de21bcd529c499ee8e4f908d796ab29a737140c26fdecdcf8095c0822fea8965a5f4822e9fd079da69c596aff07ce28441096c2eeb2a1cdf3b199c53b5d812ada661d002e42e96222e07257b68b8092ed22a56aa57f4257eb6c01d920dfd404da1a7fcc212fc97587d9bcd4fc8e8aef0b5cfb99a29ec539c0816a9e13faca3c871073136d9ee5766543e0fcbbab1cea2fdbe67098efb3e1fe9c3c7ac0e606bc5b30323d594ca526e5cb7341046e5ecf2524986c186cc33609ba7742b81ec35f0d139fe9ea30e56e1093622e2c5bfb6f2e00b4502ea06cf4375a14090214b79d7343df221441b67cc3e8de532dbc29830f5d0097cc44964263ec82cfe647cb91e75c494b9c6368cc19deb6abc2a8c9b32e882a4c87c39c0adfd7cda4bd63a1b6f58bd045a3f39787d1103aabd85504941ebc7773219f9d8c7265a89bb62793f0b1a04ecc5c305e7e84e1eafbe8d75c83267c0c4f56ce453cfd30004da5a4dd208f57734dc603d989492889db9c5a63a4c3247980f7c9d0412314689a2f88c1fc46e7b5e31eab8163dfb2c754c79f6b19bb2353a46b99f28bf734588f37cd2963167d2a8cec2e045e9e90f3adf96faf3af80c4d9db64a46a7674fb6c7e92680a6f172d37a816f830492f17ac749c3ac437ef3c15b3d3e06b207fad2a01081613f34697f923cd5321db4212303ef21775cf68ef93cfd4d06ef0a7716da91802dddc5ccec9ea7fd1d1acc0962104fb581c860ebab20a3afc3a401e87a9addeb755e308825a4ce60a9981bdb8729d84b5035202eb40ed8273c1681eb02aa3457b7874ecbdbd6673ae70ce7520c6736c2c86170a3169379bf058913bf6eef994636d8b62179c9f325fa52618103351aabeaf5cea90d7ba8ee8ae7725bf09e153c864b11ee9b95265b6c27b2c11988e25cd6a4876f05fd0cfdeb2c5e397026846893696715045dbf181abf2c6476ea5c067ffc058e2165dd7e515aced142f605d23a9f08f4df89b396a52fdd210c577f5a9bd8b0e32ca8cd308e2f7f79e618caeee4b668c807a2812ed2849e7bd09f3da0e0842a44793e0f2cbc2e03220df9fc2216447b73fc64498af0013bc7eb1510ee23cc200f93e1d9352135339223afe1c3b41740a9d2f9063ce780bdc06772561936638e9258527bfbd178fb35b6777cb1fb233360f3b4fa59ed1a87fcd259afe12c261c033c2fe800d598b14cce151a8f1d7e80eeaba862d298b16d6eda83e35f37adc4183a1757644d89c97606e4e4567d769b467b75e957ee8da4e4a49540cdbc62c3e22b9fcc88a3fafbb54638a7926cdc73c7824f7f11850dc184bbd5d391b5f09b74707353ade72bc9c5ad59c4e0f930bb293bd43fbd44fa2ce9cd042d221c028a1875fd3bf402b49f866e102e9d539d0768e361760d2263211b58b1939707e24b9a776d26d60af212b74cc7b6da74c943007081c55da6e589fab52982ba32df85f7565433e5da9c12a5b57b02ed8cef1a31082e398c597fb611beb56e81378fa54e3a8a8f6924fc062d33da4eead6c71b98fcbe7d78149bd93f181211a6fcb84661660f9aa0483043ffcd4a139dda713f9553c2d3ef38865f3c0a173f9bf3adee44b86c3447cb97fc099361cb548e03b2c3b34a9ccf1699f3c7c73ea1f96b83fb06cdd81740f2b38e28c2841a1fb9cd21e8a5d6b06ee8b89b29fceeba2e737ed7cba1bd61c1f5119a3ec4c1e97557143c8ec9dac9b4d78ab0bad047133de2d90fd5004822393d5b7d3b7fdf5cfac6495ffad7902bd03bc49d166db0d8015e857f496a0984da17124019e65296b6b7263237c1e547e37aca4b7a65161ac9f90ee3d7ed9ce7828a9616f6eac2d5c42a2712412abe501273205bf7af1dd41fa3b1d11395d445f2bc5b21ce3eb41a254896522034502f3c10dd11b35e0a75c6ee0d8e37ef24b4e4c5079d8d879851493ea53771f53a985c201e3bdbd564d9df6847ae659a8c089415f0ecbf288aa16d7d6127cba9cc1a66efc8da247b7b739306574421822197b018028066930c75c48b689a0df2360242f791f25a7f25e5192acd7156c3187f8514dda70aba5bbe85c29ca5df4eda0c0a3d9c26f511c8e68f49a0e09edde8acb69c466110322a5a8cb46de1b7b7ab8d961f28898af8aabbe63197355a0870600ba367d84b219c05d4cfa8954ff5afbc9accf6118b67aa0da85fc155cb10d2704f3aeee9556b42e5fda389767dda0aeb69b6f6cb2959ece2c3c2460d5fb7c5435292be1a614bb50434eaab18311a433633628e54b6fda8481448287ab252251ac4759d7442a11d7a998e03e17b7b42eece4a5f04b1aad12be301593986b13f8851abb4e174290e2369721f1c80d122f4e7854afa9a4d08fe52e3a1301ee5cb981e771ae317f413a9c531bcd2139ff1a13e48a143880f078b06f92877c35224ff0f6b5227bcb786e7893fa81878fc381168076417c77166e7b3d2fc2fad5a03d5624d2159dead65d7ca57bcd58a917c4bb13a05e46214563a9f4f6b2e5786e22729a73ad3b4d255d2bdad380cdb32f0aaa5bf096c1d3478c0ab6d1d3f24350634830fbaea6e2b68942bf58a7739acdabdbc76f808f7f951999abe292029ab5642f77170220e549e5160c8bae94e9e3081b4dbf7c02d6c8a01864a85ce6ddbcdf4f537168b1a90f31109790b3cc0098e65ae37d24654a579e38ffdbda1de3e0e685226ee4b37efb3801799ca5681c22d0e5301229c5d820b09cf6d784e3b5ac058b5de2aa584cf7823ff39839f66c04ac2b543ddc7c9aef456534f6b259d141d31dbf2a0f3a11e405a0879bebf295a52acd97b63a769d89f7d3a4b0f577acfc5ab4731ae0c8e4016eb6ad3dcf652b6de9eed7fca281f7402f29feee5f1de1332b60860a0d35a0d1c737974b8844948689f133590af705a6c354f93e09b7d6aad0e39fc2e2c903de84133dd0a8fe080c265c32ab51775617be827409ab34c17781ab15a0d566754659997925392447f04e65130005970341c2e30f18df2af1fc050d07dd7a5472a507c28f08a70183427c3416f5c21739210ad663ca38b782bfde3d8bb684141019f84e2398780784475df8a240fbc101b74117930a447d685fc97c9ae1a4a13b630b62ff137d03fea294c268e6a4aee35845009ff893424cb2f96fdbea106fb2780a53e28bafd26e754c8bfe75f7124c4fd4f8904ca9c9f10101c9db94779137d623ae5ee951ea107abe2dc8914ececbc40a494915d4f2ef11f595f486794d2b713e8802c4ab3b2eec4804bfa80170855170ead73db4b8b7e2e53f52e85e208ec716a212f6dbbe79ec4ab4d41c026d7e1d5cb1e5d32c9dcb44a6689464d30caf25f9c2d38b53845621a60adb7deb02506d9222a602dd2ad57c9cd372d8452e0c6c5f42f40f87beabe5faad2b75ba78f596353fc6cc86e96b025ba2d5afabb07dbc08d398acf5dab0f6e8e12e9086223f95089c63e887b405df5d7ded72bf4645e5bea0887643e4d900bfdc4e05c97897b35bc47b6eafe2adcbd31ad2d27669dbadf0dc04178e2fdcb7ab3895282b21d8dc3f6065c9a92f5b55c13df8838f839cfade378f07a89ec9864fb6864172f4da51c4db5198dcf12c0cc43b53e283e8e29eb9354df119ec638a967bb3040d1a54c9f8085899acaf54174e3228b3302e965bcb90259a81fb25ed8eee693234a00cf6c25a86df13d625cedff02bbe25e03ad6f8dbaf93b5fbd4aa96048fd7d2cdb5335ab9b5712a25304083b4a781bd4e7116c769d8e0a7c44cfb6408fe209d216fee83771b4501ebafdb380791176166764e2082155bcfa952feb2050231194f3ff91a386e7f25c9fdbcdf05285d44c442080224d5b8a4ceb10b2c7020a1f3e370368dec61ee96ad29490fa2f9bafb022849fe463855476c6d9f42d8504a109189cad87eadb971d304bcae59c876b9b237af082310f7bdd72bd399691803260eb162216013f5866100997c86ff97eb8e2ddf63dc3f94f76b87d55f46b7eebe4a080def48dd12eeed36e5b7b824ea032f4f914bb6b788b36da130e275993b6daf167e0e3aca15ee696d3dccdab5abfd6ae21319cb6a52444468cdf4abb1e779bfabda29dcbe57149558a44f7f4f978d25194ba803525996bf8d4cc747ca7c24679f6b638301d19bbc857335caf435f8e0257f41dcbfc866c79b8466f2c0430c45e19512b3c45b9923aa01e48d6e47b0865059ade050fd419dfd4e08469322b38f851e84f655c6e2ea17125b39e83ea8d3f13ccce55ccc31eed86ba20e1e95b7de92c1c5e0f305d0403c9fb627d68d99432ab35b4a512c639b0c6f86edf8381cf4e6b498e006da4859f299f9c5e55b758c91e8ae93c6bc01ddf8f8edf6945fbd32f3330d76761ba4f8973590cd8e2a8b00299e11c015523ec09f688ea043ebf725cce21392cb56fd026bd4ad0586d5b3645c9e3c55b2e4dd090f1e9ac2e1e14a96028d59cd9f20ed28e27a38bde922b58e835ebaed9c9b9246006d1cf249b176ba81109ce0eb7baa76a405d1af3bcc3753f7f20a0bc22ac10ca7b218fe8ea626c32c729efa78b04fbfc84be28d957d3284263832ea402d647704c6075353855b2f1ac80175f332ea197d4f22e7143aea73e2ace7b256800c19d4851edb2b7bff4a87ca5ec557c6343ce7394fa137fe0a7c775b5ac3e62561e0801a9740d7db3f9587cbeb6174efacc8cfe57e3170227c4eb3b1c3a4e39f9856de9bf5e7f4e3391d4676f9377a978d49dd19e898d61c0110ad23d7639d0afc3e8983dfdec09398e2c225716ce1e57a55ae31eed309483e3219a516cc574f675cb02218613b95114608c45d4a1cf71a33ddd984b3a452e972cb69ce815920dd787bd2b65940cca362060f501345767e45d5417350d413914b1ce3f7346b1055110b97f9bdae66695db8154d30256e294316f34190c7e30144b187797bdf644a40c1be801b9c19843a56d5e572bbcca92b451a39c8bad4c39bcf8381bc1a143e2e2dde7bc72c52a5edd9c33a1e9c2b992c0e0aa4bfcbd5bfbd827d050ff4e5343d694901102d2154919d24504dca7c92368d5dbe77f68a707dc0f43d56662caf8cc547497eb77c71106db846ffa934c685193342b4abb9e6eecfdca3ae5ef38bc1e980b86fb03d657b4add361c95c81e7823c47772fd8ebd2ab330a0255d7c2d1be3c345acfe74dcb24582da1c0c2b7cd0b519770f42667e6327db1fe640d3cab32b1cc958e05d10b5105c95e2369a266ef37f9113b6f40f4ea93ddeb2eacf69ebf26052ad012da76c31515ed6086a20b820143d0f70ef753edf8518e1480d00cc9e2dbe28fd313b66a366e74ac19a5d7ce702b8960aed2e7d6340de626afb77296f6b42778a829f406f0b9a31c2bac8e66181d6efe683ff0ffad2a23beab436322ead32e31590133e1c7aa82d99f0d42ce3cf7a58ee82213df8b73f9447cfee62f5f2ab71027532d2f8a8207dfdd3fb2cecfa0542d7041a439516088b6ca0aa2d2ebcc64ef6538fa47c71a8659cf881710b945a5d88d9ef8556a3115b673d2b7dda0b8eb42027cb65083f09fb4bafb73953a3ef7313bfc6ce8981b1a82612ff16b7f6cb28a6ed7d05b3726815e6c1aad7f38e2495591dbee0e37c5d72eb209a136ce4f91abb0d22f07007d9ead8009d593278c7b584433b82c7cfec3eb675102932a300e438bbd85dee28a2098baf6f043575fa78fc381dfb51bd8b33ad6a43f036b43758d76fa9bd07483ed1192190a2b6354e73cee79f16171853363271c4ae285f225beda50350ca371a4023471c83ff145ae25329be39024deb7e8acb726382e49b24b3a3d0baab03c49e28ee4c9bd0a4cee20442bb04d860144241116fe2dbdc75c6a2c919fe702921ee82a8a160486f3c700e697a08d84edbf53511b3cbdffa754beb80b84015afa7ccd445eea2f7c4edf28d3b0e987c96019803d3108ededaa8eb3dd934fbd2a745cabf48279355cab0b7267ae43b3f013ae56b89a83e89ab5f996863fc166b6aee0a16340a55a4a4fb6a77fa16f1194d9d8d49f224907c7fa7bb297e28d9f0263462f6ceeb91052f064b2e71bb50a031fd342bde29465b98fdf4d32cdf1551a900c21b5116f197a07886ae527f9659f89ef3d6af666b58da46aa8b5459c11629e7e8d188aeed5fd85aa18d8430636ac913b4dd12c01c75c5e07df2453d56dbdca3cae377a873686c4715023537edb727e6d19c766aceac5076459818a3e8ef0780de1987dc1f4d96c07b5db36646718cded8aa00a9e2ac3fe5bb15a2502ec4ca7b82ea8e210570845dc93a203dc7c560a68ca9b59c253b2f40a1ec072746a809297a9875cc7b7603db7549751f3bdccfec1d21c59430d8da6b60097573f5c2f804616671eabfe7661b6b6f7487551507aef7e4061b09f1b0eb726553f0283eaa57df4b83d5a93a89111fb95d3b6992d0cffe9100344532cb9c7bb7561cb8204c00e1664c85ecf2d0a3c1bf9643b1d14e20140837bb10807a603340aabe380d50d64ac597f037bb130ffb33c10e04b3b7c00aaaac571ff1f5577a3f955c51884819e0ee4b7b88b5942fa6a6fcf93568d66abd568067d0f7b73a622502297cfa660c4b2d58e45439b516ebe2a2a12e32d969e28f66f7d5b5f95c215f4bb8409b01666d09950d565d81e657bcbc4152705dd9b34117e72025baa811e7985cd763c50c1457b500c5ceee9b75f9edc63fc4b5899c47c057c72c79154116a7b65f57742bcf521515098846ec908531d559ba41ea6b8a01f632b8670489fcc59d056426b966c1bcfbe4eff02765acf0112d42eeb4a8cb9bc3bf99428188a9e9414979539bd9eaedb168b5470dc42d15955e440cf110d72ee84c57a8f84d66c70182971e7a449af2996f3cf4e9750756bd6de380dbecfe37dacd277fe9c1227bad4a02c5ba2b41341cf9949d17b25714f8739345f116e9eeca160f7355bd3e188ba32d5e098d4bc5acf86e10db93b2c889b7495f551654c1283c9a351d91798b6359e6ddf422da80e4e9c33b8b2a9f26f8441b8d6218f703390729cc44d392defec4720e4378dce601b16e78ae991b135251505cd9978854e66034f1bc46f430a8381e6acb5b4c24ccb31af14286af2bf2d0670fa5ff33861b43bf98d48b4336f9f33e2836742180bed6db971a2efdee3431f7a4b83485c6e9d8f8e7cd15f3c6ee70103efa4ac34578fd8e7fa903c9696e99a39b6ccb44a38e2985fe7b042a972cc7fa1954f969bee42317faa6ddff9dc57a6e3b4f60ad1d8a992b5cddcacc5a345396d99fb02813c1e49502483dfe57c180c31b56f17a95a6262e148d00b2a2888782fc68d72d9afea8ca04f8997d667a50eb52ff8aec1135cbfb43b52aaffdda3e648420790026d41cc14029065b385ef7d5b9547149e8d8a521b292894360633537d95b8ab6769b0518c60e6973338eb423e19453f861423f18fe6a6b4edb5e55e4be5160e6b58f7c989834eb0066f5705e919f1bc7df8ed39ca20e9ceb40ff41c7f5354b9b3a81459ea52474d1e2a11c5b4b38d765cf40a4545b2f85508eb678faa2822cd26274a9ceec05556e560075f72f244c76fe48f9fbcbfdbc0af86da62b02d4ada27fb7a6842a463c0f4962f05f496b755132435f2efd22d62b564c397f25c0891828e53f662df224f2d8584166b9b5acae84f45880d034bec81ed7761a60e0255b812afd2abe7edffdafd55e7a9e7fcade47a5007b47942789a058c6f1a34ab51f74e05c0681eb941b29aa65bd57935bb7a5ad0e03dcc36ac61228c3ecd94311f0530725eb651297b3273580cce3ccb804221a5f9efc5ef1659937dcb17b1628bb45f968f9183fd6e80e17811c041e3d97d421b95eb7c377ccf609f226993f49120a2a07fce6805567a71c381a6e93c3c3b499632d2028a500025b0d3b1893cbd2cc243caa5853a2eee6db2e48b7684cbe189cb67662cd7625feb339f5bc2c3fb0652c72e8d9c68acd10c85545aca1fa068bf0e22ecf22c92358ce3d06eca346ef490dfa99337adc57449bec2c81bc85df838f9cd7a7b9dab303c8965eb827de041a1c7d4cae387a770fdfabd396380b20d760d18a9566a357bb27fe338b54cb3bc2d7222027ace7f8bf0a1b22d1a1b5abe71217e2366a494e4e20b9b7dfba93ddcee9bbae77eae024ff8da3925f234532d1f32b3403c353869a60e2643b9ee2776ea67ef5770a709aac53ee5dc3bdcc9a95703ddc29b765c573db265734d5399d467710b7d8792561e13b6dccd995472c6d7f08e86f4f83f9aedc32afdca9076975b535b0a2e8ee86f7021fae17a3ff249d74c7440cfb80039a8686693362e3e50bc544e94ffdfa66e5bcfdde4426caf8079a33cf2cb1977023f77f1c03f4a413b4f01095f0b1ff8988f123659de855fcdc1c965aa72adcf9d216a3f7739ea1275b91c859eec2cc1bb8f2cdf1442a9456365b632d8111cb52b6cca10c4e68be5882962b79871cff8a8e3bd8d542e88ed3b98dac1ff97b352a8532cf30e8b290a3917c75c06acf72d0fa29f284152bd0246b54f6ada5ed9c84253b501703f98feccf0418a6dfc95143aeb0df1fd0b85d7d4e1d7e32ec1cbb17f66e4a201030d921143456aa89ced7eb0c2a5a44c0b6492de88bd1a189c4473d11a8b56cd3a689ed3bacf846efbcd8025ad4fc8894da58180b25e125b1fa8b4b92d998584b4da2bd37e4883bb3af6674f18d79e273279b5d07fc54ce3ced6c4eda5034adb3cfe6f73a0ed14b68599a5d3cfac70b3da9ab7da05d7fa0436cc7fd0a2788b1d8d9a937ccd99332b32883496e7fd9ae6d5f72b7858ca2220f24345be6149f7cddd6f81b2d1cbad4e37f2e2cc4446355fef2113507efd43e84e6f3efbe85f243114b13c621b6e784d37838eec04a0a3988711ac0aedc3948561a22c9a476933d68106addec153d8a48568a7670232842197b300d3d51023d7d864a9e560cbc12bcd992ca7972dd7e426f6f9fbfa0fd48dcee3f51662b96a80c2b7ed0d95eec43943c8041a0592c6b2dcd4bd4614308738e30ffc84aedb589e0699dce21f1d49f145d0d027f7099a9ad24806e0110189ee63ea94fcea7e77b9171463f50e9f416928a194091426d77ddb0acdd6ab0570f3350c2ae22e290deab638e8ff5a11826c8b1533a824aa0e8b7c2b410dd3d4398f700eb708c0b58ddd88b144d11003127b01e7d94c54d4f8403fc8bd2eee673f03ccfa6387e9c26b7ad2db09574016fda29f47f110c68e46285f39f79282ae6179d9bc2f0423b1b2bc0d9ca4cd9a20bc69586986290375dcd1bd5750d71d4ffb65cafedfba3bac89cf266ac97f0a9c79be3f54c2a288e95c032fe125bd8a25622462306cd7d067b6fd4f0be08595338e1456e570856d89de6b23de143cb10665eede8e0fceec5611d9d2cb9cf76eba85c783964776d4d725227ac9db4d2d0d7b33eb680e6ed604b2572d96d7048dc322742a84aafaf37044d0ac344144e33a6b6aea39d154b0f26b62e9f59fae9ee1235a2caeed7ce467cf9ed264d92ecd627f7672960139cbd8ae1452f6a1b236b53174726703a4984a45e04be46130537ba4d74125499a995a3f80ba9f459620c179d1ba4c7e7ce3959b45dfd72c503cbb0c65476269bb2f9ec679d877ebdfa1b959539bc1d8bca952457950de0be083b894231a6734296ecb62ddd9e56ad56b6f8d572bfea52ddc2aaa4486a777e63078d2b7c56448c095d160221380ba3183da3a0e5d16c3f8d14f332bb1a270de10f9e113f186fee95a0f2563251329469d9305bf9c964cc2c252b93a770c4d8d0c20c45e4cc5955a58cbfde24936b38ce5c859b4d147b3c3adc57b76563dd5f0b92e02fd897797fd654e7f2f01f88088e2cf04074220a0039f0d9a90b0293d07dedcb48a787a4cb620f3e1b12c5d5ee6c4d76adf59238ded58e3398a53abed3633eec32b49fcf12483d9302a4626e7b80136122ce513eabe897ecc4ebf31adfbda03eb24b55347ade75425a181e16a935265321f5f281f8bf9785b896d1fa87726c4a37d95755dbbf9d0ba670df259f8202579882a23bc34a2c51072017c0fca31a610a128e23c902af27d60f858015d4fbcc1fd354ea37ad315c36c150a0d2632f65e91a8c2638608e71282d1659a74bd7fb94f70e48651753e695e30e872e8298b14f6f505eca24e99df0b5ad69b3282c05e4694c72165f2b51e10449adbed942eb9cf0104048194d9d94a12bb101bd8b5a7a5cfa1a4d2e490bfd76a8c8f0bf440c9d8e9ab8be783f8937793b91a7c380d2c3911655fc7aa8c7b224547f66c56b57586284e5a18757ce36fd429100627c5a59a3b7eb5e57df5543542c30b7809b03efa936288ff06da2910ba1b801e1f6a3e0c8c05fceb0f0a6b912ef14d900966370de3f1d6d431c938f6dc2a8d80ceb83c2384fc66c0f3c94dd967d7bd4c6678fbf240094359823c4769a85d592722f4ece4074483c2c2000c47138cfe4b639cf988a1c16b4d8ba4823404e084f69984e85238a178637c34427533dd9671c4a0f57cd59befa27c294b7224100ba5be69cdea1babe2ad8f3783d7070dd4bc8d5c0692fbc1cfc9aaf8690db7ef59e4af306a715c00adf1679bbd8b4c65de9432b680e1fe7adc29030eb97cb7cb14f387f978e5fcc5941773c46043db95cc28f6d859521b27f6593ca77431d3455f5695b1a1587e05c2b8e144ece97325d4e6fcc6bafdeb744dea3af6c50c16ef2b6df39ab5c9377915a8415c4da133ffe4b53edf9645a72f589e9ce768296e292be7633d01bf1db753c7fd6f03cd47cc1e79c1d1151e658a91263bc8e0177cf64bd19f1e43ab3a4d5540112f1c427658e2dd8b260c9bc6ee710a48577ebaa709094e678f8b4b54934e91e70369169bee0154aa09b7e28a0d086f1843575e872a044202558eb694ded0cb58288ace3b390d3e600c56cb6aa53503d119da8e5daf05c25c1279ea1c338557b41ffa2b1235ac44dcff734960a2f85b6211120e83672ab34594de09f352105f04df196618cb908aa306e388f399e97f46ec50f374fdf2660466a303a2e8a87dba5e69de2a11a75399e62b9b7dd3b5ed8db6c6ef054eb28aa5117f73609444bcb139cad983e444339a15637492466789c58553f3a2e06a16fc444a330b12b7e91450ecbe805b5e5b38a9cf8346d4005edabca0e62ac5c27b5535d5268a04c52b9a6036f893f6a3ae9950722d4d855fe0a87312a2ba1de90e1d078bdc8eb18149ceb0a4b275286f00bdff39eb86af09f669cc2d9a92284f7e8a6ff1b2194c3d902cedc5b5e41a6b4fd805bb20c8eabb82ac069b14ff41b2c86c156e8ff2110c0e0c0956bcfb3a9d8573922c6003ec80a37fd2ac986a2233b0f3d6784364f396f7d1d5e7e420f19abc41fa72d57dca3549c936cfba7f4a6c73b04608cedc1b01c35e04c953cabee62d37e131fb4c079267197220f74bd15bf407d88fba0695ec1585828e9a0b4a9cd92ffaf831be118898710b9c765c057641e6681faa2fc0eb20f064810ef9ae03b54b4f0bec511f24aebcdfb287511e00957c13a44feffecf0425c2374114f96f0d2270e77b479831e8b8095c41070182aff64f833444874241a873637468cbc079a55837e13bb5be8f1f27bcb676698760b1167bfdd6205fcfbc89a2240af20cbfdd2cfa7f4cc8adf2038c7e136be341d324e7fbb93a011e23a343ed873e4cfea5af287e317f6f0c4881681acfb417a1d0d3999d26fa407a57b92f4aa5db4552af12b1e2c92aaf4a8056f3e6ba4e393987d5058a7df22004bd9e97419489b639fbbcf9081b997abf2d6c573fc6c8baca77e880797f943ad53fa1bf425994c2929b9409da22445e369bd8f9863c5a73b8f239d0579eaff654666ac2498a34f044d3893c0819c4cb4496df515a18bcf967fe1ba243682a356919ad9582a2f817dc3c075000432af4550a56b5734b5e55d282aedeebd882bcfd38f5261e594d8290f73f9f3f23b50dec9126e4cf84568735312ac5049ee8e3a720515d179dc982c9fb0636482378fe802e0e343f4ef1b527f877120249598ffc3dff55eff20f30c6338d5266429190cadfb74348301000c304dd42ece721721f67cbf3529d8139deb5bb1b305e2414610d59b50cf00b98254cd7f525c96f086d801cf315e71367f5ab84131cb356f3d4321bd8bf36d3c9e5418a5bd95fc435eee9978d470db9be13e0d4ca6da0290fa92d09b5fe2a3dcaac050b22537530796cbbd7bfa31ed8a4dd3e1aef058a36315ef00b2943d6a194e82f2b569ef15ccb7ef35a15b9eadcbbbe06d9eaed9a0e0b1006855f0588d254727aa7bcf5a841f67c7fc5ae6a7218cec23b3c02c375e33529f2328d6db3082f9f0658f877829cbfb9c747911c67ebf9668a135aa6fa1897e955e0f6d52df3a65d179aa8dca878f78b26adbbdded075082ee1d95f753bf25b8799c2a9cbbaab3eb6883699480da42e6d4871af6d3cb99f0e6fd0d6e9e29c807303893cb3e333bb1c8debad8304643cf2517e2f5c314e4612d13e1e5c370465c5f38c86e669fff766d4c2a63278a3dee91402bce0fa72771f51071dd8f4b3199e5ab3cdbcfab429564bef823e4b15bd0996ebdebc02fc925a7ed4d7d48ca4085430e6228a4690d3dd24876c996cbb9356a2d9293b4a39001b4e6a54819b43093f48423283c4060bf006a6bb4fe33fa13ae27656c9740a1002bd3a2c500a0883a2953e40d7eaba591eaa6e39a2e30fe2f40b0243dcbd59f13a134f21272c699068b4a1227d5e4264cd314c9a81a0e809da034d01da7de9af1525919e608354709fa6ec7261a6bf9c6fc50a6498120ac3c9d445ce109dee9134c4c5e60e406253a2581b099c229793de8727bc34b4ded4a2c593cf6fdd072e341573e80c3b1e08190fc7105a8aed7ee589173524919a440871c36dcf0e150edacab1dfc158a8de3d23bd57371fcd6898b0e25b15c29f096f739fc447207fefa18208648d1538690bc9125c1cf9b17159949aad247c9b98d78d9d46a9e1ae401eb8df22bee4f3c82e890f6a6fe4db0599a9871b7c145971ceefda491328f04a5fe4542010cc68ab03ab9875485fdcbf35e74453623b0feca3c4ff793b21f1927c389f2ada5a5bf9b072c0bd0f89f3421913fc15aaebb30cd3bb244aa4f27807908935139f1da75756d561cdaefc062ae75e5bc681c3dae84d9e4d659f3b14ff1721a51338c1cde64df64e678253a46a9f6d3548fc20aac14c9a94b53633bbc72b2b7e3297ac55a77560fe6da4502c1b5e7b10523a72df4542eeba00e6a9b27528bb128325e32a05eaa1cbf9c3689e6ec8e017cd2348e1b807e5174a21cafd518769ffbbdb0a06074dc6d1bf6c615b347fdda2693e06542e200cfdde6e70353ec5838848183f57131a59dc8367be148e3947d93477ccd37bd7d596b847d76800af32cd540c0a231bc1ebe3244bc096f0c3fb20b6a8fc594e6ed2cf175b55dc83a7bce97afd2b738559781e766d4e4c98d9b0d8f6731714458ed581716a542b9e81b440f53b30e3f2ea0c0a0824c3345e393bfe6e590e291e9175a737fbedb37acc1b5a6b4734a361b485eaf4c6be8dab156dee04a0121bd856d20c8cf86703f7a222d95d1ace68f546bbf20b8e2be0ca8b6223eec2e39e03a7905cd17728fe4faabc6beeed9efa998366a6a17076d7429f249d421adc06624f238dbd8b0717af318c1c55ed940ed6599adeda491f757e481fa4564638a76936c976f6e8deb8ba37b3b0e48226f0a3e958df05b2b9e1b572c53b264e3a1da1eec50c8267462a0796d013b58d13f9b16f429ada4b391c99130eba3cf6835c22c88fee7b90bf92c49e1f6f365d344eef2c45a6b45fe08da98524f04da182b6ea6c937dfd31f0de8706492ef70b811397ad3fc4851caa11bfa890eb4c8a14f0075f29462dd3f8447e180681f2cc643d14be244a0f6eb5464645c45d4c97b73c6ef94af865b850b313038749d648afa932ad978bfffd8832e095f9886b11626cb2a4a65d354c1b1e906f25ee85b66114357c7704aa3c9d1bf2dd83deeff8b40b878a725e232bb776f883701fc92ac3aa494f3e2bc63393f7fd6bb5c03bd1bab41859d5700c0fccb0a463a318a20f0c58ea13121d83628782e5f423900884097bd394b3e1bfd41f214a11905cbe41f233ad858d7cfa2aa129b9308d9c6839630ceeaa806ba9b18352a55f85e63c6c019e43ae7b3d80259e2ec913c29c9655fd6eca3e9312b42215d448e8e28b409f2ffc2a7c5daee50051b91c6c27984b9a8ada9344a3604f0be289772f66680035d117fb8bbaea5d3e5da3e1aa069d7bb4681fd968d13967eae4ef77def4562fedee234d3a36ee5d4fe753d8a03c76fb40f7d6dc55b34a84bad08a2367ae72c4a9824d4024112f0957e2ee8bc400f0a9d6ca1cced2b2a1296308afeb3538604661597bad6415cadaab5d5605e52e51c1facdb5bfccbbc9bea9d2d1109128f33595f0a09ec0a2de79ca5ec8076c239eed93f51d7bfee5af9185941a7e8e65c2d6ce31d90bd93c2f08badaae05c8bc8f4cc39df6797309b4be6a8e81d6733af67c634d5dd35b0c11012c36e8ebac2a6aa424e04e8f0d02868a614f58b73005096f0f49cf67bcbda9c843d6162d62e13731c610234c1f41433db61f121d832043db006cf39c2e4cc546c8f1d1f30c17350ff88089195262ff0f57702d6eff561495d83f7de51d1bf3b115ea972b16171ca692146b167de7f92e725b079223f10912f269f4459779604e33bc67b373e0b5eff7737a7e127dbb4de1c9801fb8903d04d6271874e6c5f7003a0161c2c8dc15baed893d8cd2f08a2dbbe5bdb5e8acad54a38c1fa2d9179637a1450318a1502f22d2bd31754faca64c19ffc48746705843831a043e6dd449f6004d3d4b656103be22044dc84a06f2fa6b23b99b6477acd2f1415b4e5ec2872ebbf5df00e9ef726bf5f66d4d11e0d30dca604bb40753067689fe58d115d86a8d71b12babafd9e85a64d3b3cfd0502fdb4f664f9eaa20c98f9d336b7b040d2feb6ce9f3c7e0ca03a51692a65d6b11ec84b67c81d3db085eed39986c4f1db8b6512406321eb01ffb4e434c227930ab00d85829839dd90a7f8437846a7ef6037450a601b6aee0bf796888162f1e0851037ddb913c8c2e917bdca023915b76387ffa1447d73b9aa600f0099c5f66bc79ef977751a83d830e1f4a8527cbfcab685013698f51a2fa7f25c6aadaee9ab5e16368561ee0478642638e0f8347d74bb0ff50793dae515d0d2b08f7deb2aeccda0717b35097557a3e6b818cc503c4b5c07b9093072382d64df1bd70abec59c933dca41b87852a4a39e572235a423a333009c6712d65ac1bcc634a5c21388bb91641c84d07547a994047f634241af94577a2dd09b87c01c6c861220fe86ea9a22d508dc22d34</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":" <a id=\"more\"></a>\n\n<h1 id=\"状态编程\"><a href=\"#状态编程\" class=\"headerlink\" title=\"状态编程\"></a>状态编程</h1><h2 id=\"1、托管状态\"><a href=\"#1、托管状态\" class=\"headerlink\" title=\"1、托管状态\"></a>1、托管状态</h2><ol>\n<li>托管状态(Managed State)</li>\n<li>原始状态(Raw State)</li>\n</ol>\n<p>Flink 的状态有两种:托管状态(Managed State)和原始状态(Raw State)。</p>\n<p>托管状态就是 由 Flink 统一管理的，状态的存储访问、故障恢复和重组等一系列问题都由 Flink 实现，我们只要调接口就可以;而原始状态则是自定义的，相当于就是开辟了一块内存，需要我们自己管理，实现状态的序列化和故障恢复。</p>\n<p>托管状态是由 Flink 的运行时(Runtime)来托管的;在配置容错机制后，状 态会自动持久化保存，并在发生故障时自动恢复。当应用发生横向扩展时，状态也会自动地重 组分配到所有的子任务实例上。对于具体的状态内容，Flink 也提供了</p>\n<ol>\n<li>值状态(ValueState)</li>\n<li>列表状态(ListState)</li>\n<li>映射状态(MapState)</li>\n<li>聚合状态(AggregateState)等多种结构，内部 支持各种数据类型。聚合、窗口等算子中内置的状态，就都是托管状态;我们也可以在富函数 类(RichFunction)中通过上下文来自定义状态，这些也都是托管状态。</li>\n</ol>\n<p>托管状态分为两类:算子状态和按键分区状态。</p>\n<p>(1)算子状态(Operator State)</p>\n<p>算子状态可以用在所有算子上，使用的时候其实就跟一个本地变量没什么区别——因为本 地变量的作用域也是当前任务实例。在使用时，我们还需进一步实现 CheckpointedFunction 接 口。</p>\n<p>(2)按键分区状态(Keyed State)</p>\n<p>状态是根据输入流中定义的键(key)来维护和访问的，所以只能定义在按键分区流(KeyedStream)中，也就 keyBy 之后才可以使用</p>\n<p>所以即使是 map、filter 这样无状态的基本转换算子，我们也可以通过富函数类给它们“追 加”Keyed State，或者实现 CheckpointedFunction 接口来定义 Operator State;从这个角度讲， Flink 中所有的算子都可以是有状态的，不愧是“有状态的流处理”。</p>\n<h2 id=\"按键分区状态-Keyed-State\"><a href=\"#按键分区状态-Keyed-State\" class=\"headerlink\" title=\"按键分区状态(Keyed State)\"></a>按键分区状态(Keyed State)</h2><p>我们还可以通过富函数类(Rich Function)对转换算子进行扩展、实现自定义功能， 比如 RichMapFunction、RichFilterFunction。在富函数中，我们可以调用.getRuntimeContext() 获取当前的运行时上下文(RuntimeContext)，进而获取到访问状态的句柄;这种富函数中自 定义的状态也是 Keyed State</p>\n<h3 id=\"支持的结构类型\"><a href=\"#支持的结构类型\" class=\"headerlink\" title=\"支持的结构类型\"></a>支持的结构类型</h3><ol>\n<li>值状态(ValueState)</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ValueState</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">State</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\">T <span class=\"title\">value</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException</span>;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(T value)</span> <span class=\"keyword\">throws</span> IOException</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里的 T 是泛型，表示状态的数据内容可以是任何具体的数据类型。如果想要保存一个 长整型值作为状态，那么类型就是 ValueState<Long>。我们可以在代码中读写值状态，实现对于状态的访问和更新。</p>\n<ol>\n<li>T value():获取当前状态的值;</li>\n<li>update(Tvalue):对状态进行更新，传入的参数value就是要覆写的状态值。</li>\n</ol>\n<p>在具体使用时，为了让运行时上下文清楚到底是哪个状态，我们还需要创建一个“状态描述器”(StateDescriptor)来提供状态的基本信息。例如源码中，ValueState 的状态描述器构造 方法如下:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ValueStateDescriptor</span><span class=\"params\">(String name, Class&lt;T&gt; typeClass)</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">super</span>(name, typeClass, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><strong>列表状态(ListState)</strong></li>\n</ol>\n<p>将需要保存的数据，以列表(List)的形式组织起来。在 ListState<T>接口中同样有一个 类型参数 T，表示列表中数据的类型。ListState 也提供了一系列的方法来操作状态，使用方式 与一般的 List 非常相似。</p>\n<ol>\n<li>Iterable<T>get():获取当前的列表状态，返回的是一个可迭代类型Iterable<T>;</li>\n<li>update(List<T>values):传入一个列表values，直接对状态进行覆盖;</li>\n<li>add(Tvalue):在状态列表中添加一个元素value;</li>\n<li>addAll(List<T>values):向列表中添加多个元素，以列表values形式传入。</li>\n</ol>\n<p>类似地，ListState 的状态􏰂述器就叫作 ListStateDescriptor，用法跟 ValueStateDescriptor完全一致。</p>\n<ol start=\"3\">\n<li><strong>映射状态(MapState)</strong></li>\n</ol>\n<p>把一些键值对(key-value)作为状态整体保存起来，可以认为就是一组 key-value 映射的 列表。对应的 MapState&lt;UK, UV&gt;接口中，就会有 UK、UV 两个泛型，分别表示保存的 key 和 value 的类型。同样，MapState 提供了操作映射状态的方法，</p>\n<ol>\n<li><p><img src=\"http://img.wqkenqing.ren/typora_img/CleanShot%202023-03-01%20at%2016.47.40@2x.png\" alt=\"CleanShot 2023-03-01 at 16.47.40@2x\"></p>\n</li>\n<li><p>归约状态(ReducingState)</p>\n</li>\n<li><p>聚合状态(AggregatingState)</p>\n</li>\n</ol>\n<h2 id=\"算子状态-Operator-State\"><a href=\"#算子状态-Operator-State\" class=\"headerlink\" title=\"算子状态(Operator State)\"></a>算子状态(Operator State)</h2><p>算子状态(Operator State)就是一个算子并行实例上定义的状态，作用范围被限定为当前 算子任务。算子状态跟数据的 key 无关，所以不同 key 的数据只要被分发到同一个并行子任务， 就会访问到同一个 Operator State。</p>\n<p>算子状态的实际应用场景不如 Keyed State 多，一般用在 Source 或 Sink 等与外部系统连接 的算子上，或者完全没有 key 定义的场景。比如 Flink 的 Kafka 连接器中，就用到了算子状态。 在我们给 Source 算子设置并行度后，Kafka 消费者的每一个并行实例，都会为对应的主题(topic)分区维护一个偏移量， 作为算子状态保存起来。这在保证 Flink 应用“精确一次” (exactly-once)状态一致性时非常有用。关于状态一致性的内容，我们会在第十章详细展开。 当算子的并行度发生变化时，算子状态也支持在并行的算子任务实例之间做重组分配。根</p>\n<p>据状态的类型不同，重组分配的方案也会不同。</p>\n<p><strong>状态类型</strong></p>\n<p>主要有三种:</p>\n<ol>\n<li><p>ListState</p>\n<ol>\n<li><p>与 Keyed State 中的列表状态的区别是:在算子状态的上下文中，不会按键(key)分别处 理状态，所以每一个并行子任务上只会保留一个“列表”(list)，也就是当前并行子任务上所 有状态项的集合。列表中的状态项就是可以重新分配的最细粒度，彼此之间完全独立</p>\n</li>\n<li><p>算子状态中不会存在“键组”(key group)这样的结构，所以为了方便重组分配，就把它 直接定义成了“列表”(list)。这也就解释了，为什么算子状态中没有最简单的值状态</p>\n<p>(ValueState)。</p>\n</li>\n</ol>\n</li>\n<li><p>UnionListState </p>\n<ol>\n<li>与 ListState 类似，联合列表状态也会将状态表示为一个列表。它与常规列表状态的区别 在于，算子并行度进行缩放调整时对于状态的分配方式不同。</li>\n</ol>\n</li>\n<li><p>和 BroadcastState。</p>\n<ol>\n<li>广播状态(BroadcastState)<ol>\n<li>因为广播状态在每个并行子任务上的实例都一样，所以在并行度调整的时候就比较简单， 只要复制一份到新的并行任务就可以实现扩展;而对于并行度缩小的情况，可以将多余的并行 子任务连同状态直接砍掉——因为状态都是复制出来的，并不会丢失。</li>\n<li>在底层，广播状态是以类似映射结构(map)的键值对(key-value)来保存的，必须基于 261一个“广播流”(BroadcastStream)来创建</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<p>而对于 Operator State 来说就会有所不同。因为不存在 key，所有数据发往哪个分区是不可 预测的;也就是说，当发生故障重启之后，我们不能保证􏰂个数据跟之前一样，进入到同一个 并行子任务、访问同一个状态。所以 Flink 无法直接判断该怎样保存和恢复状态，而是􏰀供了 接口，让我们根据业务需求自行设计状态的快照保存(snapshot)和恢复(restore)逻辑</p>\n<ol>\n<li><p><strong>CheckpointedFunction 接口</strong></p>\n<ol>\n<li>在 Flink 中，对状态进行持久化保存的快照机制叫作“检查点”(Checkpoint)。于是使用 算子状态时，就需要对检查点的相关操作进行定义，实现一个 CheckpointedFunction 接口</li>\n</ol>\n</li>\n</ol>\n   <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">CheckpointedFunction</span> </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">// 保存状态快照到检查点时，调用这个方法</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">snapshotState</span><span class=\"params\">(FunctionSnapshotContext context)</span> <span class=\"keyword\">throws</span> Exception</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"comment\">// 初始化状态时调用这个方法，也会在恢复状态时调用</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">initializeState</span><span class=\"params\">(FunctionInitializationContext context)</span> <span class=\"keyword\">throws</span> Exception</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   每次应用保存检查点做快照时，都会调用.snapshotState()方法，将状态进行外部持久化。</p>\n<pre><code>而在算子任务进行初始化时，会调用. initializeState()方法。这又有两种情况:一种是整个应用 第一次运行，这时状态会被初始化为一个默认值(default value);另一种是应用重启时，从检 查点(checkpoint)或者保存点(savepoint)中读取之前状态的快照，并赋给本地状态。所以， 接口中的.snapshotState()方法定义了检查点的快照保存逻辑，而. initializeState()方法不仅定义 了初始化逻辑，也定义了恢复逻辑。</code></pre><p>   这里需要注意，CheckpointedFunction 接口中的两个方法，分别传入了一个上下文(context) 作为参数。不同的是，.snapshotState()方法拿到的是快照的上下文 FunctionSnapshotContext， 它可以􏰀供检查点的相关信息，不过无法获取状态句柄;而. initializeState()方法拿到的是 FunctionInitializationContext，这是函数类进行初始化时的上下文，是真正的“运行时上下文”。 FunctionInitializationContext 中􏰀供了“算子状态存储”(OperatorStateStore)和“按键分区状态 存储(” KeyedStateStore)，在这两个存储对象中可以非常方便地获取当前任务实例中的Operator State 和 Keyed State</p>\n   <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ListStateDescriptor&lt;String&gt; descriptor &#x3D;</span><br><span class=\"line\">          new ListStateDescriptor&lt;&gt;(</span><br><span class=\"line\">             &quot;buffered-elements&quot;,</span><br><span class=\"line\">             Types.of(String));</span><br><span class=\"line\">ListState&lt;String&gt; checkpointedState &#x3D; context.getOperatorStateStore().getListState(descriptor);</span><br></pre></td></tr></table></figure>\n\n   <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对于不同类型的算子状态，需要调用不同的获取状态对象的接口，对应地也就会使用不同 的状态分配重组算法。比如获取列表状态时，调用.getListState() 会使用最简单的 平均分割重 组(even-split redistribution)算法;而获取联合列表状态时，调用的是.getUnionListState() ， 对应就会使用联合重组(union redistribution) 算法</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"广播状态-Broadcast-State\"><a href=\"#广播状态-Broadcast-State\" class=\"headerlink\" title=\"广播状态(Broadcast State)\"></a>广播状态(Broadcast State)</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MapStateDescriptor&lt;String, Rule&gt; ruleStateDescriptor &#x3D; new MapStateDescriptor&lt;&gt;(...);</span><br><span class=\"line\">BroadcastStream&lt;Rule&gt; ruleBroadcastStream &#x3D; ruleStream</span><br><span class=\"line\">                    .broadcast(ruleStateDescriptor);</span><br><span class=\"line\">DataStream&lt;String&gt; output &#x3D; stream</span><br><span class=\"line\">              .connect(ruleBroadcastStream)</span><br><span class=\"line\">              .process( new BroadcastProcessFunction&lt;&gt;() &#123;...&#125; );</span><br></pre></td></tr></table></figure>\n\n<p>这里我们定义了一个“规则流”ruleStream，里面的数据表示了数据流 stream 处理的规则， 规则的数据类型定义为 Rule。于是需要先定义一个 MapStateDescriptor 来􏰁述广播状态，然后 传入 ruleStream.broadcast()得到广播流，接着用 stream 和广播流进行连接。这里状态􏰁述器中 的 key 类型为 String，就是为了区分不同的状态值而给定的 key 的名称。对于广播连接流调用 .process() 方法，可以传入“广播处理函数” KeyedBroadcastProcessFunction 或者 BroadcastProcessFunction 来进行处理计算。广播处理函数 里面有两个方法.processElement()和.processBroadcastElement()</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BroadcastProcessFunction</span>&lt;<span class=\"title\">IN1</span>, <span class=\"title\">IN2</span>, <span class=\"title\">OUT</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">BaseBroadcastProcessFunction</span> </span>&#123;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">processElement</span><span class=\"params\">(IN1 value, ReadOnlyContext ctx, Collector&lt;OUT&gt; out)</span> <span class=\"keyword\">throws</span> Exception</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">processBroadcastElement</span><span class=\"params\">(IN2 value, Context ctx, Collector&lt;OUT&gt; out)</span> <span class=\"keyword\">throws</span> Exception</span>;</span><br><span class=\"line\">... &#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里的.processElement()方法，处理的是正常数据流，第一个参数 value 就是当前到来的流 数据;而.processBroadcastElement()方法就相当于是用来处理广播流的，它的第一个参数 value 就是广播流中的规则或者配置数据。两个方法第二个参数都是一个上下文 ctx，都可以通过调 用.getBroadcastState()方法获取到当前的广播状态;区别在于，.processElement()方法里的上下 文是“只读”的(ReadOnly)，因此获取到的广播状态也只能读取不能更改; 而.processBroadcastElement()方法里的 Context 则没有限制，可以根据当前广播流中的数据更新 状态。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Rule rule = ctx.getBroadcastState( new MapStateDescriptor&lt;&gt;(\"rules\", Types.String, Types.POJO(Rule.class))).get(\"my rule\");</span><br></pre></td></tr></table></figure>\n\n<p>通过调用 ctx.getBroadcastState()方法，传入一个 MapStateDescriptor，就可以得到当前的叫 作“rules”的广播状态;调用它的.get()方法，就可以取出其中“my rule”对应的值进行计算处理。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BroadcastStateExample</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\">       env.setParallelism(<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"comment\">// 读取用户行为事件流</span></span><br><span class=\"line\">DataStreamSource&lt;Action&gt; actionStream = env.fromElements(</span><br><span class=\"line\">             <span class=\"keyword\">new</span> Action(<span class=\"string\">\"Alice\"</span>, <span class=\"string\">\"login\"</span>),</span><br><span class=\"line\">             <span class=\"keyword\">new</span> Action(<span class=\"string\">\"Alice\"</span>, <span class=\"string\">\"pay\"</span>),</span><br><span class=\"line\"><span class=\"number\">269</span> );</span><br><span class=\"line\"><span class=\"keyword\">new</span> Action(<span class=\"string\">\"Bob\"</span>, <span class=\"string\">\"login\"</span>),</span><br><span class=\"line\"><span class=\"keyword\">new</span> Action(<span class=\"string\">\"Bob\"</span>, <span class=\"string\">\"buy\"</span>)</span><br><span class=\"line\"><span class=\"comment\">// 定义行为模式流，代表了要检测的标准 DataStreamSource&lt;Pattern&gt; patternStream = env</span></span><br><span class=\"line\">       .fromElements(</span><br><span class=\"line\"> );</span><br><span class=\"line\"><span class=\"keyword\">new</span> Pattern(<span class=\"string\">\"login\"</span>, <span class=\"string\">\"pay\"</span>),</span><br><span class=\"line\"><span class=\"keyword\">new</span> Pattern(<span class=\"string\">\"login\"</span>, <span class=\"string\">\"buy\"</span>)</span><br><span class=\"line\"><span class=\"comment\">// 定义广播状态的描述器，创建广播流</span></span><br><span class=\"line\">MapStateDescriptor&lt;Void, Pattern&gt; bcStateDescriptor = <span class=\"keyword\">new</span></span><br><span class=\"line\">MapStateDescriptor&lt;&gt;(</span><br><span class=\"line\">             <span class=\"string\">\"patterns\"</span>, Types.VOID, Types.POJO(Pattern<span class=\"class\">.<span class=\"keyword\">class</span>))</span>;</span><br><span class=\"line\">BroadcastStream&lt;Pattern&gt; bcPatterns = patternStream.broadcast(bcStateDescriptor);</span><br><span class=\"line\"><span class=\"comment\">// 将事件流和广播流连接起来，进行处理</span></span><br><span class=\"line\">DataStream&lt;Tuple2&lt;String, Pattern&gt;&gt; matches = actionStream</span><br><span class=\"line\">             .keyBy(data -&gt; data.userId)</span><br><span class=\"line\">             .connect(bcPatterns)</span><br><span class=\"line\">           .process(<span class=\"keyword\">new</span> PatternEvaluator());</span><br><span class=\"line\">   matches.print();</span><br><span class=\"line\">   env.execute();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PatternEvaluator</span></span></span><br><span class=\"line\"><span class=\"class\"> <span class=\"keyword\">extends</span> <span class=\"title\">KeyedBroadcastProcessFunction</span>&lt;<span class=\"title\">String</span>, <span class=\"title\">Action</span>, <span class=\"title\">Pattern</span>, <span class=\"title\">Tuple2</span>&lt;<span class=\"title\">String</span>, <span class=\"title\">Pattern</span>&gt;&gt; </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">// 定义一个值状态，保存上一次用户行为 ValueState&lt;String&gt; prevActionState;</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">open</span><span class=\"params\">(Configuration conf)</span> </span>&#123;</span><br><span class=\"line\">          prevActionState = getRuntimeContext().getState(</span><br><span class=\"line\">                 <span class=\"keyword\">new</span> ValueStateDescriptor&lt;&gt;(<span class=\"string\">\"lastAction\"</span>, Types.STRING));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">       <span class=\"meta\">@Override</span></span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">processBroadcastElement</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">             Pattern pattern,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">             Context ctx,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">             Collector&lt;Tuple2&lt;String, Pattern&gt;&gt; out)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">          BroadcastState&lt;Void, Pattern&gt; bcState = ctx.getBroadcastState(</span><br><span class=\"line\"><span class=\"keyword\">new</span> MapStateDescriptor&lt;&gt;(<span class=\"string\">\"patterns\"</span>, Types.VOID, Types.POJO(Pattern<span class=\"class\">.<span class=\"keyword\">class</span>)))</span>;</span><br><span class=\"line\"> Exception &#123;</span><br><span class=\"line\"><span class=\"comment\">// 将广播状态更新为当前的 pattern</span></span><br><span class=\"line\">   bcState.put(<span class=\"keyword\">null</span>, pattern);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">processElement</span><span class=\"params\">(Action action, ReadOnlyContext ctx,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">Collector&lt;Tuple2&lt;String, Pattern&gt;&gt; out)</span> <span class=\"keyword\">throws</span> Pattern pattern </span>= ctx.getBroadcastState(</span><br><span class=\"line\"> <span class=\"keyword\">new</span> MapStateDescriptor&lt;&gt;(<span class=\"string\">\"patterns\"</span>, Types.VOID, Types.POJO(Pattern<span class=\"class\">.<span class=\"keyword\">class</span>))).<span class=\"title\">get</span>(<span class=\"title\">null</span>)</span>;</span><br><span class=\"line\">          String prevAction = prevActionState.value();</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (pattern != <span class=\"keyword\">null</span> &amp;&amp; prevAction != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">// 如果前后两次行为都符合模式定义，输出一组匹配</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (pattern.action1.equals(prevAction) &amp;&amp; pattern.action2.equals(action.action)) &#123;</span><br><span class=\"line\">              out.collect(<span class=\"keyword\">new</span> Tuple2&lt;&gt;(ctx.getCurrentKey(), pattern));</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 更新状态 prevActionState.update(action.action);</span></span><br><span class=\"line\">&#125; &#125;</span><br><span class=\"line\"><span class=\"comment\">// 定义用户行为事件 POJO 类 public static class Action &#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> String userId;</span><br><span class=\"line\">   <span class=\"keyword\">public</span> String action;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Action</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Action</span><span class=\"params\">(String userId, String action)</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">this</span>.userId = userId;</span><br><span class=\"line\">   <span class=\"keyword\">this</span>.action = action;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125; &#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"string\">\"Action&#123;\"</span> +</span><br><span class=\"line\"><span class=\"string\">\"userId=\"</span> + userId +</span><br><span class=\"line\"><span class=\"string\">\", action='\"</span> + action + <span class=\"string\">'\\''</span> +</span><br><span class=\"line\"><span class=\"string\">'&#125;'</span>;</span><br><span class=\"line\"><span class=\"comment\">// 定义行为模式 POJO 类，包含先后发生的两个行为 public static class Pattern &#123;</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> String action1;</span><br><span class=\"line\">   <span class=\"keyword\">public</span> String action2;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Pattern</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Pattern</span><span class=\"params\">(String action1, String action2)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">this</span>.action1 = action1;</span><br><span class=\"line\">       <span class=\"keyword\">this</span>.action2 = action2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125; &#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"string\">\"Pattern&#123;\"</span> +</span><br><span class=\"line\"><span class=\"string\">\"action1='\"</span> + action1 + <span class=\"string\">'\\''</span> +</span><br><span class=\"line\"><span class=\"string\">\", action2='\"</span> + action2 + <span class=\"string\">'\\''</span> +</span><br><span class=\"line\"><span class=\"string\">'&#125;'</span>;</span><br></pre></td></tr></table></figure>\n\n","encrypt":true},{"title":"flink 多流转换","date":"2023-03-01T01:29:26.157Z","password":"7FKBKZrTTTPG2LnC","_content":"\n本文主要用于讲诉一条流怎么转变成多条流等，也比较实用\n\n\n <!--more-->\n\n# flink多流转换\n\n> 一般分为分流和合流两个操作\n\n涉及的算子主要有\n\n1. connect\n2. join\n3. union\n4. cogroup\n\n## 1、分流\n\n所谓“分流”，就是将一条数据流拆分成完全独立的两条、甚至多条流。也就是基于一个 DataStream，得到完全平等的多个子 DataStream\n\n实现方式：\n\n1. stream.filter\n   1. 缺点，相当于复制了三份流\n2. 早期版本有一个spilt()方法\n   1. 也可以切分流\n3. 侧路输出流\n   1. Flink 1.13 版本中，已经弃用了.split()方法，取而代之的是直接用处理函数(process function)的侧输出流(side output)。\n\n```java\npackage sunrise.demo.stream;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.apache.flink.api.common.typeinfo.TypeInformation;\nimport org.apache.flink.streaming.api.datastream.DataStreamSource;\nimport org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.streaming.api.functions.ProcessFunction;\nimport org.apache.flink.util.Collector;\nimport org.apache.flink.util.OutputTag;\nimport sunrise.demo.function.process.SideProcessFunctionDemo;\nimport sunrise.demo.pojo.CarInfo;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2023/2/16\n * @desc 测试旁路输出\n */\npublic class SideOutputStreamDemo {\n\n\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        DataStreamSource<String> carStream = env.socketTextStream(\"localhost\", 8883);\n        SingleOutputStreamOperator<CarInfo> sideCar= carStream.map(s -> {\n            ObjectMapper mapper = new ObjectMapper();\n            return mapper.readValue(s, CarInfo.class);\n        }).returns(TypeInformation.of(CarInfo.class)).process(new SideProcessFunctionDemo());\n        OutputTag<CarInfo> littleTag = new OutputTag<CarInfo>(\"little\") {\n\n        };\n        OutputTag<CarInfo> bigtag = new OutputTag<CarInfo>(\"big\") {\n        };\n//        sideCar.getSideOutput(littleTag).print(\"little-number\");\n//        sideCar.getSideOutput(bigtag).print(\"big-number\");\n        env.execute();\n    }\n}\n\n```\n\n## 2、合流操作\n\n### 1、联合\n\n最简单的合流操作，就是直接将多条流合在一起，叫作流的“联合”(union)。联合操作要求必须流中的数据类型必须相同，合并之后的新流会包括所有流中的元素， 数据类型不变。\n\n我们只要基于 DataStream 直接调用.union()方法，传入其他 DataStream 作为参数，就可以实现流的联合了;得到的依然是一个 DataStream。这跟sql中的union作用相似\n\n```java\nimport java.time.Duration;\npublic class UnionExample {\n   public static void main(String[] args) throws Exception {\nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(1);\n SingleOutputStreamOperator<Event> stream1 = env.socketTextStream(\"hadoop102\", 7777)\n.map(data -> {\nString[] field = data.split(\",\");\nreturn new Event(field[0].trim(), field[1].trim(),\nLong.valueOf(field[2].trim()));\n             })\n             .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forBound\nedOutOfOrderness(Duration.ofSeconds(2))\n                     .withTimestampAssigner(new\nSerializableTimestampAssigner<Event>() {\nrecordTimestamp) {\n}) );\n   return element.timestamp;\n}\n       stream1.print(\"stream1\");\n       SingleOutputStreamOperator<Event>\nenv.socketTextStream(\"hadoop103\", 7777)\nstream2 =\n@Override\npublic long extractTimestamp(Event element, long\n.map(data -> {\nString[] field = data.split(\",\");\nreturn new Event(field[0].trim(), field[1].trim(),\nLong.valueOf(field[2].trim()));\n             })\n             .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forBound\nedOutOfOrderness(Duration.ofSeconds(5))\n                    .withTimestampAssigner(new\nSerializableTimestampAssigner<Event>() {\n@Override\n recordTimestamp) {\n}) );\npublic long extractTimestamp(Event element, long\n   return element.timestamp;\n}\nstream2.print(\"stream2\");\n// 合并两条流 stream1.union(stream2)\n       .process(new ProcessFunction<Event, String>() {\n          @Override\npublic void processElement(Event value, Context ctx, Collector<String> out) throws Exception {\nout.collect(\" 水 位 线 : \" + ctx.timerService().currentWatermark());\n} })\n.print();\n       env.execute();\n   }\n}\n```\n\n**水位线也还是向左取最小。**\n\n### 连接(Connect)\n\n连接流(ConnectedStreams)\n\n首先基于一条 DataStream 调用.connect()方法，传入另外 一条 DataStream 作为参数，将两条流连接起来，得到一个 ConnectedStreams;然后再调用同处 理方法得到 DataStream。这里可以的调用的同处理方法有.map()/.flatMap()，以及.process()方法。\n\n```java\npackage sunrise.demo.stream.old;\n\nimport org.apache.flink.streaming.api.datastream.DataStreamSource;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.streaming.api.functions.co.CoMapFunction;\nimport org.apache.flink.streaming.api.functions.co.RichCoMapFunction;\nimport org.apache.flink.streaming.api.functions.source.FileProcessingMode;\n\nimport java.util.HashMap;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2023/2/8\n * @desc\n */\npublic class CoDemo {\n    final static HashMap carID = new HashMap();\n\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        DataStreamSource<String> carIdSource = env.readTextFile(\"/Users/kuiqwang/Desktop/gitfiles/study_record/study-flink/src/main/resources/carFlow_all_column_test.txt\").setParallelism(1);\n        DataStreamSource<String> socketSource = env.socketTextStream(\"0.0.0.0\", 8882).setParallelism(1);\n        CoMapFunction<String, String, String> carCoMapFunction = new RichCoMapFunction<String, String, String>() {\n            @Override\n            public String map1(String s) throws Exception {\n                System.out.printf(\"carID Map的长度是：\" + carID.size());\n\n                System.out.printf(\"this is res:\" + s);\n                if (carID.get(s) != null) {\n                    String result = (String) carID.get(s);\n                    System.out.println(\"result is : \" + result);\n                    return result;\n                }\n                return \"this is null\";\n            }\n\n            @Override\n            public String map2(String s) throws Exception {\n                String[] infos = s.split(\",\");\n                String carId = infos[2].replace(\"\\'\", \"\");\n                String res = infos[2];\n                carID.put(carId, res);\n                System.out.println(\"carId's size is :\" + carID.entrySet().size());\n                return res;\n            }\n\n        };\n        socketSource.connect(carIdSource).map(carCoMapFunction).broadcast().print();\n        env.execute();\n    }\n}\n\n```\n\nConnectedStreams 也可以直接调用.keyBy()进行按键分区的操作，得到的 还是一个 ConnectedStreams:\n\n```\nconnectedStreams.keyBy(keySelector1, keySelector2);\n```\n\n#### CoProcessFunction\n\n```\npublic class BillCheckExample {\n   public static void main(String[] args) throws Exception{\nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\nenv.setParallelism(1);\n// 来自 app 的支付日志\nSingleOutputStreamOperator<Tuple3<String, String, Long>> appStream =\nenv.fromElements(\n             Tuple3.of(\"order-1\", \"app\", 1000L),\n             Tuple3.of(\"order-2\", \"app\", 2000L)\n       ).assignTimestampsAndWatermarks(WatermarkStrategy.<Tuple3<String,\nString, Long>>forMonotonousTimestamps()\n             .withTimestampAssigner(new\nSerializableTimestampAssigner<Tuple3<String, String, Long>>() {\n@Override\npublic long extractTimestamp(Tuple3<String, String, Long> element, long recordTimestamp) {\n                    return element.f2;\n                 }\n})\n);\n// 来自第三方支付平台的支付日志\nSingleOutputStreamOperator<Tuple4<String, String, String, Long>>\nthirdpartStream = env.fromElements(\n             Tuple4.of(\"order-1\", \"third-party\", \"success\", 3000L),\n             Tuple4.of(\"order-3\", \"third-party\", \"success\", 4000L)\n       ).assignTimestampsAndWatermarks(WatermarkStrategy.<Tuple4<String,\n String, String, Long>>forMonotonousTimestamps()\n             .withTimestampAssigner(new\nSerializableTimestampAssigner<Tuple4<String, String, String, Long>>() {\n@Override\npublic long extractTimestamp(Tuple4<String, String, String, Long> element, long recordTimestamp) {\n                    return element.f3;\n                 }\n }) );\n// 检测同一支付单在两条流中是否匹配，不匹配就报警 appStream.connect(thirdpartStream)\n             .keyBy(data -> data.f0, data -> data.f0)\n             .process(new OrderMatchResult())\n             .print();\n       env.execute();\n   }\n// 自定义实现 CoProcessFunction\npublic static class OrderMatchResult extends CoProcessFunction<Tuple3<String, String, Long>, Tuple4<String, String, String, Long>, String>{\n // 定义状态变量，用来保存已经到达的事件\n       private ValueState<Tuple3<String, String, Long>> appEventState;\nprivate ValueState<Tuple4<String, String, String, Long>> thirdPartyEventState;\n       @Override\n       public void open(Configuration parameters) throws Exception {\n          appEventState = getRuntimeContext().getState(\n\n new ValueStateDescriptor<Tuple3<String, String, Long>>(\"app-event\", Types.TUPLE(Types.STRING, Types.STRING, Types.LONG))\n);\n          thirdPartyEventState = getRuntimeContext().getState(\nnew ValueStateDescriptor<Tuple4<String, String, String, Long>>(\"thirdparty-event\", Types.TUPLE(Types.STRING, Types.STRING, Types.STRING,Types.LONG))\n ); }\n@Override\npublic void processElement1(Tuple3<String, String, Long> value, Context ctx, Collector<String> out) throws Exception {\n// 看另一条流中事件是否来过\nif (thirdPartyEventState.value() != null){\nout.collect(\"对 账 成 功 :\"+value+\" \"+ thirdPartyEventState.value());\n// 清空状态\n             thirdPartyEventState.clear();\n          } else {\n// 更新状态 appEventState.update(value);\n // 注册一个 5 秒后的定时器，开始等待另一条流的事件\n             ctx.timerService().registerEventTimeTimer(value.f2 + 5000L);\n          }\n}\n@Override\npublic void processElement2(Tuple4<String, String, String, Long> value, Context ctx, Collector<String> out) throws Exception {\nif (appEventState.value() != null){\n out.collect(\"对账成功:\" + appEventState.value() + \" \" + value); // 清空状态\nappEventState.clear();\n} else {\n// 更新状态\nthirdPartyEventState.update(value);\n// 注册一个 5 秒后的定时器，开始等待另一条流的事件\n              ctx.timerService().registerEventTimeTimer(value.f3 + 5000L);\n          }\n}\n@Override\npublic void onTimer(long timestamp, OnTimerContext ctx, Collector<String> out) throws Exception {\n// 定时器触发，判断状态，如果某个状态不为空，说明另一条流中事件没来 if (appEventState.value() != null) {\nout.collect(\"对账失败:\" + appEventState.value() + \" \" + \"第三方支付\n平台信息未到\"); }\nif (thirdPartyEventState.value() != null) { out.collect(\"对账失败:\"+thirdPartyEventState.value()+\" \"+\"app\n信息未到\"); }\n        appEventState.clear();\n       thirdPartyEventState.clear();\n   }\n}}\n输出结果是:\n 对账成功:(order-1,app,1000) (order-1,third-party,success,3000) 对账失败:(order-2,app,2000) 第三方支付平台信息未到\n\n对账失败:(order-3,third-party,success,4000) app信息未到\n```\n\nTiips: 两个流连接后的业务使用。\n\n### 广播连接流(BroadcastConnectedStream)\n\n关于两条流的连接，还有一种比较特殊的用法: DataStream 调用.connect()方法时，传入的 参数也可以不是一个 DataStream，而是一个“广播流”(BroadcastStream)，这时合并两条流得 到的就变成了一个“广播连接流”(BroadcastConnectedStream)。\n\n这种连接方式往往用在需要动态定义􏰁些规则或配置的场景。因为规则是实时变动的，所 以我们可以用一个单独的流来获取规则数据;而这些规则或配置是对整个应用全局有效的，所 以不能只把这数据传递给一个下游并行子任务处理，而是要“广播”(broadcast)给所有的并 行子任务。而下游子任务收到广播出来的规则，会把它保存成一个状态，这就是所谓的“广播 状态”(broadcast state)\n\n广播状态底层是用一个“映射”(map)结构来保存的。在代码实现上，可以直接调用 DataStream 的.broadcast()方法，传入一个“映射状态􏰂述器”(MapStateDescriptor)说明状态 的名称和类型，就可以得到规则数据的“广播流”(BroadcastStream):\n\n```java\npublic abstract class BroadcastProcessFunction<IN1, IN2, OUT> extends BaseBroadcastProcessFunction {\n...\npublic abstract void processElement(IN1 value, ReadOnlyContext ctx, Collector<OUT> out) throws Exception;\npublic abstract void processBroadcastElement(IN2 value, Context ctx, Collector<OUT> out) throws Exception;\n...\n}\n```\n\n## 基于时间的合流——双流联结(Join)\n\n### 窗口联结(Window Join)\n\nFlink 为这种场景专门􏰀供了一个窗口联结(window join)算子，可以定义时间窗口，并将两条流中共享一个公共键(key)的数据放在窗口中进行配对处理。\n\n1. 窗口联结的调用\n\n```\n窗口联结在代码中的实现，首先需要调用 DataStream 的.join()方法来合并两条流，得到一 个 JoinedStreams;接着通过.where()和.equalTo()方法指定两条流中联结的 key;然后通 过.window()开窗口，并调用.apply()传入联结窗口函数进行处理计算。\n```\n\n```\nstream1.join(stream2)\n   .where(<KeySelector>)\n   .equalTo(<KeySelector>)\n.window(<WindowAssigner>)\n.apply(<JoinFunction>)\n```\n\n上面代码中.where()的参数是键选择器(KeySelector)，用来指定第一条流中的 key; 而.equalTo()传入的 KeySelector 则指定了第二条流中的 key。两者相同的元素，如果在同一窗 口中，就可以匹配起来，并通过一个“联结函数”(JoinFunction)进行处理了。\n\n这里.window()传入的就是窗口分配器，之前讲到的三种时间窗口都可以用在这里:滚动 窗口(tumbling window)、滑动窗口(sliding window)和会话窗口(session window)。\n\n而后面调用.apply()可以看作实现了一个特殊的窗口函数。注意这里只能调用.apply()，没有其他替代的方法。\n\n```java\npublic interface JoinFunction<IN1, IN2, OUT> extends Function, Serializable {\n   OUT join(IN1 first, IN2 second) throws Exception;\n}\n```\n\n**窗口联结的处理流程**\n\n\n\n\n\n### 间隔联结(Interval Join)\n\nFlink 提供了一种叫作“间隔联结”(interval join)的合流操作。顾 名思义，间隔联结的思路就是针对一条流的每个数据，开辟出其时间戳前后的一段时间间隔， 看这期间是否有来自另一条流的数据匹配。\n\n**间隔联结的原理**\n\n间隔联结具体的定义方式是，我们给定两个时间点，分别叫作间隔的“上界”(upperBound) 和“下界”(lowerBound);于是对于一条流(不妨叫作 A)中的任意一个数据元素 a，就可以 开辟一段时间间隔:[a.timestamp + lowerBound, a.timestamp + upperBound],即以 a 的时间戳为 中心，下至下界点、上至上界点的一个闭区间:我们就把这段时间作为可以匹配另一条流数据 的“窗口”范围。所以对于另一条流(不妨叫 B)中的数据元素 b，如果它的时间戳落在了这 个区间范围内，a 和 b 就可以成功配对，进而进行计算输出结果。所以匹配的条件为:\n\na.timestamp + lowerBound <= b.timestamp <= a.timestamp + upperBound\n\n这里需要注意，做间隔联结的两条流 A 和 B，也必须基于相同的 key;下界 lowerBound 应该小于等于上界 upperBound，两者都可正可负;间隔联结目前只支持事件时间语义。\n\n**间隔联结的调用**\n\n间隔联结在代码中，是基于 KeyedStream 的联结(join)操作。DataStream 在 keyBy 得到 KeyedStream 之后，可以调用.intervalJoin()来合并两条流，传入的参数同样是一个 KeyedStream， 两者的 key 类型应该一致;得到的是一个 IntervalJoin 类型。后续的操作同样是完全固定的: 先通过.between()方法指定间隔的上下界，再调用.process()方法，定义对匹配数据对的处理操 作。调用.process()需要传入一个处理函数，这是处理函数家族的最后一员:“处理联结函数”ProcessJoinFunction。\n\n```java\nstream1\n   .keyBy(<KeySelector>)\n   .intervalJoin(stream2.keyBy(<KeySelector>))\n   .between(Time.milliseconds(-2), Time.milliseconds(1))\n   .process (new ProcessJoinFunction<Integer, Integer, String(){\n@Override\npublic void processElement(Integer left, Integer right, Context ctx, Collector<String> out) {\n          out.collect(left + \",\" + right);\n       }\n})\n```\n\n**间隔联结实例**\n\n```java\n// 基于间隔的 join\npublic class IntervalJoinExample {\npublic static void main(String[] args) throws Exception {\n StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(1);\nSingleOutputStreamOperator<Tuple3<String, String, Long>> orderStream = env.fromElements(\n             Tuple3.of(\"Mary\", \"order-1\", 5000L),\n             Tuple3.of(\"Alice\", \"order-2\", 5000L),\n              Tuple3.of(\"Bob\", \"order-3\", 20000L),\n             Tuple3.of(\"Alice\", \"order-4\", 20000L),\n             Tuple3.of(\"Cary\", \"order-5\", 51000L)\n       ).assignTimestampsAndWatermarks(WatermarkStrategy.<Tuple3<String,\nString, Long>>forMonotonousTimestamps()\n             .withTimestampAssigner(new\nSerializableTimestampAssigner<Tuple3<String, String, Long>>() {\n@Override\npublic long extractTimestamp(Tuple3<String, String, Long> element, long recordTimestamp) {\n}) );\n   return element.f2;\n}\n SingleOutputStreamOperator<Event> clickStream = env.fromElements(\n       new Event(\"Bob\", \"./cart\", 2000L),\n       new Event(\"Alice\", \"./prod?id=100\", 3000L),\n       new Event(\"Alice\", \"./prod?id=200\", 3500L),\n       new Event(\"Bob\", \"./prod?id=2\", 2500L),\n       new Event(\"Alice\", \"./prod?id=300\", 36000L),\n       new Event(\"Bob\", \"./home\", 30000L),\n       new Event(\"Bob\", \"./prod?id=1\", 23000L),\n\nnew Event(\"Bob\", \"./prod?id=3\", 33000L)\n       ).assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forMonotonousT\nimestamps()\n{\n{\n@Override\npublic long extractTimestamp(Event element, long recordTimestamp)\n.withTimestampAssigner(new SerializableTimestampAssigner<Event>()\n}) );\n   return element.timestamp;\n}\n       orderStream.keyBy(data -> data.f0)\n             .intervalJoin(clickStream.keyBy(data -> data.user))\n             .between(Time.seconds(-5), Time.seconds(10))\n.process(new ProcessJoinFunction<Tuple3<String, String, Long>, Event, String>() {\n@Override\npublic void processElement(Tuple3<String, String, Long> left, Event right, Context ctx, Collector<String> out) throws Exception {\n                    out.collect(right + \" => \" + left);\n                 }\n}) .print();\n   env.execute();\n}}\n```\n\n### 窗口同组联结(Window CoGroup)\n\n与 window join 的区别在于，调用.apply()方法定义具体操作时，传入的是一个 CoGroupFunction。这也是一个函数类接口，源码中定义如下:\n\n```java\npublic interface CoGroupFunction<IN1, IN2, O> extends Function, Serializable { void coGroup(Iterable<IN1> first, Iterable<IN2> second, Collector<O> out)\nthrows Exception;\n}\n```\n\n内部的.coGroup()方法，有些类似于 FlatJoinFunction 中.join()的形式，同样有三个参数， 分别代表两条流中的数据以及用于输出的收集器(Collector)。不同的是，这里的前两个参数 不再是单独的每一组“配对”数据了，而是传入了可遍历的数据集合。也就是说，现在不会再 去计算窗口中两条流数据集的笛卡尔积，而是直接把收集到的所有数据一次性传入，至于要怎 样配对完全是自定义的。这样.coGroup()方法只会被调用一次，而且即使一条流的数据没有任 何另一条流的数据匹配，也可以出现在集合中、当然也可以定义输出结果了。\n\n所以能够看出，coGroup 操作比窗口的 join 更加通用，不仅可以实现类似 SQL 中的“内 连接”(inner join)，也可以实现左外连接(left outer join)、右外连接(right outer join)和全外 连接(full outer join)。事实上，窗口 join 的底层，也是通过 coGroup 来实现的。\n\n\n\n```java\n// 基于窗口的 join\npublic class CoGroupExample {\npublic static void main(String[] args) throws Exception { StreamExecutionEnvironment env =\nStreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(1);\nDataStream<Tuple2<String, Long>> stream1 = env\n             .fromElements(\n                    Tuple2.of(\"a\", 1000L),\n                    Tuple2.of(\"b\", 1000L),\n                    Tuple2.of(\"a\", 2000L),\n                    Tuple2.of(\"b\", 2000L)\n             )\n             .assignTimestampsAndWatermarks(\n                    WatermarkStrategy\n                           .<Tuple2<String, Long>>forMonotonousTimestamps()\n                           .withTimestampAssigner(\n                                 new\nSerializableTimestampAssigner<Tuple2<String, Long>>() {\nLong> stringLongTuple2, long l) {\n} )\n@Override\npublic long extractTimestamp(Tuple2<String,\n   return stringLongTuple2.f1;\n}\n       );\nDataStream<Tuple2<String, Long>> stream2 = env\n.fromElements(\n                    Tuple2.of(\"a\", 3000L),\n                    Tuple2.of(\"b\", 3000L),\n                    Tuple2.of(\"a\", 4000L),\n                    Tuple2.of(\"b\", 4000L)\n             )\n             .assignTimestampsAndWatermarks(\n                    WatermarkStrategy\n                           .<Tuple2<String, Long>>forMonotonousTimestamps()\n                           .withTimestampAssigner(\n                                 new\nSerializableTimestampAssigner<Tuple2<String, Long>>() {\n@Override\n\n  Long> stringLongTuple2, long l) {\n} )\n);\n       stream1\n             .coGroup(stream2)\n             .where(r -> r.f0)\npublic long extractTimestamp(Tuple2<String,\n   return stringLongTuple2.f1;\n}\n.equalTo(r -> r.f0) .window(TumblingEventTimeWindows.of(Time.seconds(5)))\n.apply(new CoGroupFunction<Tuple2<String, Long>, Tuple2<String,\nLong>, String>() {\n                 @Override\npublic void coGroup(Iterable<Tuple2<String, Long>> iter1, Iterable<Tuple2<String, Long>> iter2, Collector<String> collector) throws Exception {\n                    collector.collect(iter1 + \"=>\" + iter2);\n                 }\n}) .print();\n       env.execute();\n   }\n}\n```\n\n","source":"_posts/王阁/技术/大数据/flink/2023/Flink多流转换.md","raw":"title:  flink 多流转换\ndate:  2023年 3月 1日\ntags: [flink、stream、转换]\npassword: 7FKBKZrTTTPG2LnC\n\n---\n\n本文主要用于讲诉一条流怎么转变成多条流等，也比较实用\n\n\n <!--more-->\n\n# flink多流转换\n\n> 一般分为分流和合流两个操作\n\n涉及的算子主要有\n\n1. connect\n2. join\n3. union\n4. cogroup\n\n## 1、分流\n\n所谓“分流”，就是将一条数据流拆分成完全独立的两条、甚至多条流。也就是基于一个 DataStream，得到完全平等的多个子 DataStream\n\n实现方式：\n\n1. stream.filter\n   1. 缺点，相当于复制了三份流\n2. 早期版本有一个spilt()方法\n   1. 也可以切分流\n3. 侧路输出流\n   1. Flink 1.13 版本中，已经弃用了.split()方法，取而代之的是直接用处理函数(process function)的侧输出流(side output)。\n\n```java\npackage sunrise.demo.stream;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.apache.flink.api.common.typeinfo.TypeInformation;\nimport org.apache.flink.streaming.api.datastream.DataStreamSource;\nimport org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.streaming.api.functions.ProcessFunction;\nimport org.apache.flink.util.Collector;\nimport org.apache.flink.util.OutputTag;\nimport sunrise.demo.function.process.SideProcessFunctionDemo;\nimport sunrise.demo.pojo.CarInfo;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2023/2/16\n * @desc 测试旁路输出\n */\npublic class SideOutputStreamDemo {\n\n\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        DataStreamSource<String> carStream = env.socketTextStream(\"localhost\", 8883);\n        SingleOutputStreamOperator<CarInfo> sideCar= carStream.map(s -> {\n            ObjectMapper mapper = new ObjectMapper();\n            return mapper.readValue(s, CarInfo.class);\n        }).returns(TypeInformation.of(CarInfo.class)).process(new SideProcessFunctionDemo());\n        OutputTag<CarInfo> littleTag = new OutputTag<CarInfo>(\"little\") {\n\n        };\n        OutputTag<CarInfo> bigtag = new OutputTag<CarInfo>(\"big\") {\n        };\n//        sideCar.getSideOutput(littleTag).print(\"little-number\");\n//        sideCar.getSideOutput(bigtag).print(\"big-number\");\n        env.execute();\n    }\n}\n\n```\n\n## 2、合流操作\n\n### 1、联合\n\n最简单的合流操作，就是直接将多条流合在一起，叫作流的“联合”(union)。联合操作要求必须流中的数据类型必须相同，合并之后的新流会包括所有流中的元素， 数据类型不变。\n\n我们只要基于 DataStream 直接调用.union()方法，传入其他 DataStream 作为参数，就可以实现流的联合了;得到的依然是一个 DataStream。这跟sql中的union作用相似\n\n```java\nimport java.time.Duration;\npublic class UnionExample {\n   public static void main(String[] args) throws Exception {\nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(1);\n SingleOutputStreamOperator<Event> stream1 = env.socketTextStream(\"hadoop102\", 7777)\n.map(data -> {\nString[] field = data.split(\",\");\nreturn new Event(field[0].trim(), field[1].trim(),\nLong.valueOf(field[2].trim()));\n             })\n             .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forBound\nedOutOfOrderness(Duration.ofSeconds(2))\n                     .withTimestampAssigner(new\nSerializableTimestampAssigner<Event>() {\nrecordTimestamp) {\n}) );\n   return element.timestamp;\n}\n       stream1.print(\"stream1\");\n       SingleOutputStreamOperator<Event>\nenv.socketTextStream(\"hadoop103\", 7777)\nstream2 =\n@Override\npublic long extractTimestamp(Event element, long\n.map(data -> {\nString[] field = data.split(\",\");\nreturn new Event(field[0].trim(), field[1].trim(),\nLong.valueOf(field[2].trim()));\n             })\n             .assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forBound\nedOutOfOrderness(Duration.ofSeconds(5))\n                    .withTimestampAssigner(new\nSerializableTimestampAssigner<Event>() {\n@Override\n recordTimestamp) {\n}) );\npublic long extractTimestamp(Event element, long\n   return element.timestamp;\n}\nstream2.print(\"stream2\");\n// 合并两条流 stream1.union(stream2)\n       .process(new ProcessFunction<Event, String>() {\n          @Override\npublic void processElement(Event value, Context ctx, Collector<String> out) throws Exception {\nout.collect(\" 水 位 线 : \" + ctx.timerService().currentWatermark());\n} })\n.print();\n       env.execute();\n   }\n}\n```\n\n**水位线也还是向左取最小。**\n\n### 连接(Connect)\n\n连接流(ConnectedStreams)\n\n首先基于一条 DataStream 调用.connect()方法，传入另外 一条 DataStream 作为参数，将两条流连接起来，得到一个 ConnectedStreams;然后再调用同处 理方法得到 DataStream。这里可以的调用的同处理方法有.map()/.flatMap()，以及.process()方法。\n\n```java\npackage sunrise.demo.stream.old;\n\nimport org.apache.flink.streaming.api.datastream.DataStreamSource;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.streaming.api.functions.co.CoMapFunction;\nimport org.apache.flink.streaming.api.functions.co.RichCoMapFunction;\nimport org.apache.flink.streaming.api.functions.source.FileProcessingMode;\n\nimport java.util.HashMap;\n\n/**\n * @author kuiqwang\n * @emai wqkenqingto@163.com\n * @time 2023/2/8\n * @desc\n */\npublic class CoDemo {\n    final static HashMap carID = new HashMap();\n\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n        DataStreamSource<String> carIdSource = env.readTextFile(\"/Users/kuiqwang/Desktop/gitfiles/study_record/study-flink/src/main/resources/carFlow_all_column_test.txt\").setParallelism(1);\n        DataStreamSource<String> socketSource = env.socketTextStream(\"0.0.0.0\", 8882).setParallelism(1);\n        CoMapFunction<String, String, String> carCoMapFunction = new RichCoMapFunction<String, String, String>() {\n            @Override\n            public String map1(String s) throws Exception {\n                System.out.printf(\"carID Map的长度是：\" + carID.size());\n\n                System.out.printf(\"this is res:\" + s);\n                if (carID.get(s) != null) {\n                    String result = (String) carID.get(s);\n                    System.out.println(\"result is : \" + result);\n                    return result;\n                }\n                return \"this is null\";\n            }\n\n            @Override\n            public String map2(String s) throws Exception {\n                String[] infos = s.split(\",\");\n                String carId = infos[2].replace(\"\\'\", \"\");\n                String res = infos[2];\n                carID.put(carId, res);\n                System.out.println(\"carId's size is :\" + carID.entrySet().size());\n                return res;\n            }\n\n        };\n        socketSource.connect(carIdSource).map(carCoMapFunction).broadcast().print();\n        env.execute();\n    }\n}\n\n```\n\nConnectedStreams 也可以直接调用.keyBy()进行按键分区的操作，得到的 还是一个 ConnectedStreams:\n\n```\nconnectedStreams.keyBy(keySelector1, keySelector2);\n```\n\n#### CoProcessFunction\n\n```\npublic class BillCheckExample {\n   public static void main(String[] args) throws Exception{\nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\nenv.setParallelism(1);\n// 来自 app 的支付日志\nSingleOutputStreamOperator<Tuple3<String, String, Long>> appStream =\nenv.fromElements(\n             Tuple3.of(\"order-1\", \"app\", 1000L),\n             Tuple3.of(\"order-2\", \"app\", 2000L)\n       ).assignTimestampsAndWatermarks(WatermarkStrategy.<Tuple3<String,\nString, Long>>forMonotonousTimestamps()\n             .withTimestampAssigner(new\nSerializableTimestampAssigner<Tuple3<String, String, Long>>() {\n@Override\npublic long extractTimestamp(Tuple3<String, String, Long> element, long recordTimestamp) {\n                    return element.f2;\n                 }\n})\n);\n// 来自第三方支付平台的支付日志\nSingleOutputStreamOperator<Tuple4<String, String, String, Long>>\nthirdpartStream = env.fromElements(\n             Tuple4.of(\"order-1\", \"third-party\", \"success\", 3000L),\n             Tuple4.of(\"order-3\", \"third-party\", \"success\", 4000L)\n       ).assignTimestampsAndWatermarks(WatermarkStrategy.<Tuple4<String,\n String, String, Long>>forMonotonousTimestamps()\n             .withTimestampAssigner(new\nSerializableTimestampAssigner<Tuple4<String, String, String, Long>>() {\n@Override\npublic long extractTimestamp(Tuple4<String, String, String, Long> element, long recordTimestamp) {\n                    return element.f3;\n                 }\n }) );\n// 检测同一支付单在两条流中是否匹配，不匹配就报警 appStream.connect(thirdpartStream)\n             .keyBy(data -> data.f0, data -> data.f0)\n             .process(new OrderMatchResult())\n             .print();\n       env.execute();\n   }\n// 自定义实现 CoProcessFunction\npublic static class OrderMatchResult extends CoProcessFunction<Tuple3<String, String, Long>, Tuple4<String, String, String, Long>, String>{\n // 定义状态变量，用来保存已经到达的事件\n       private ValueState<Tuple3<String, String, Long>> appEventState;\nprivate ValueState<Tuple4<String, String, String, Long>> thirdPartyEventState;\n       @Override\n       public void open(Configuration parameters) throws Exception {\n          appEventState = getRuntimeContext().getState(\n\n new ValueStateDescriptor<Tuple3<String, String, Long>>(\"app-event\", Types.TUPLE(Types.STRING, Types.STRING, Types.LONG))\n);\n          thirdPartyEventState = getRuntimeContext().getState(\nnew ValueStateDescriptor<Tuple4<String, String, String, Long>>(\"thirdparty-event\", Types.TUPLE(Types.STRING, Types.STRING, Types.STRING,Types.LONG))\n ); }\n@Override\npublic void processElement1(Tuple3<String, String, Long> value, Context ctx, Collector<String> out) throws Exception {\n// 看另一条流中事件是否来过\nif (thirdPartyEventState.value() != null){\nout.collect(\"对 账 成 功 :\"+value+\" \"+ thirdPartyEventState.value());\n// 清空状态\n             thirdPartyEventState.clear();\n          } else {\n// 更新状态 appEventState.update(value);\n // 注册一个 5 秒后的定时器，开始等待另一条流的事件\n             ctx.timerService().registerEventTimeTimer(value.f2 + 5000L);\n          }\n}\n@Override\npublic void processElement2(Tuple4<String, String, String, Long> value, Context ctx, Collector<String> out) throws Exception {\nif (appEventState.value() != null){\n out.collect(\"对账成功:\" + appEventState.value() + \" \" + value); // 清空状态\nappEventState.clear();\n} else {\n// 更新状态\nthirdPartyEventState.update(value);\n// 注册一个 5 秒后的定时器，开始等待另一条流的事件\n              ctx.timerService().registerEventTimeTimer(value.f3 + 5000L);\n          }\n}\n@Override\npublic void onTimer(long timestamp, OnTimerContext ctx, Collector<String> out) throws Exception {\n// 定时器触发，判断状态，如果某个状态不为空，说明另一条流中事件没来 if (appEventState.value() != null) {\nout.collect(\"对账失败:\" + appEventState.value() + \" \" + \"第三方支付\n平台信息未到\"); }\nif (thirdPartyEventState.value() != null) { out.collect(\"对账失败:\"+thirdPartyEventState.value()+\" \"+\"app\n信息未到\"); }\n        appEventState.clear();\n       thirdPartyEventState.clear();\n   }\n}}\n输出结果是:\n 对账成功:(order-1,app,1000) (order-1,third-party,success,3000) 对账失败:(order-2,app,2000) 第三方支付平台信息未到\n\n对账失败:(order-3,third-party,success,4000) app信息未到\n```\n\nTiips: 两个流连接后的业务使用。\n\n### 广播连接流(BroadcastConnectedStream)\n\n关于两条流的连接，还有一种比较特殊的用法: DataStream 调用.connect()方法时，传入的 参数也可以不是一个 DataStream，而是一个“广播流”(BroadcastStream)，这时合并两条流得 到的就变成了一个“广播连接流”(BroadcastConnectedStream)。\n\n这种连接方式往往用在需要动态定义􏰁些规则或配置的场景。因为规则是实时变动的，所 以我们可以用一个单独的流来获取规则数据;而这些规则或配置是对整个应用全局有效的，所 以不能只把这数据传递给一个下游并行子任务处理，而是要“广播”(broadcast)给所有的并 行子任务。而下游子任务收到广播出来的规则，会把它保存成一个状态，这就是所谓的“广播 状态”(broadcast state)\n\n广播状态底层是用一个“映射”(map)结构来保存的。在代码实现上，可以直接调用 DataStream 的.broadcast()方法，传入一个“映射状态􏰂述器”(MapStateDescriptor)说明状态 的名称和类型，就可以得到规则数据的“广播流”(BroadcastStream):\n\n```java\npublic abstract class BroadcastProcessFunction<IN1, IN2, OUT> extends BaseBroadcastProcessFunction {\n...\npublic abstract void processElement(IN1 value, ReadOnlyContext ctx, Collector<OUT> out) throws Exception;\npublic abstract void processBroadcastElement(IN2 value, Context ctx, Collector<OUT> out) throws Exception;\n...\n}\n```\n\n## 基于时间的合流——双流联结(Join)\n\n### 窗口联结(Window Join)\n\nFlink 为这种场景专门􏰀供了一个窗口联结(window join)算子，可以定义时间窗口，并将两条流中共享一个公共键(key)的数据放在窗口中进行配对处理。\n\n1. 窗口联结的调用\n\n```\n窗口联结在代码中的实现，首先需要调用 DataStream 的.join()方法来合并两条流，得到一 个 JoinedStreams;接着通过.where()和.equalTo()方法指定两条流中联结的 key;然后通 过.window()开窗口，并调用.apply()传入联结窗口函数进行处理计算。\n```\n\n```\nstream1.join(stream2)\n   .where(<KeySelector>)\n   .equalTo(<KeySelector>)\n.window(<WindowAssigner>)\n.apply(<JoinFunction>)\n```\n\n上面代码中.where()的参数是键选择器(KeySelector)，用来指定第一条流中的 key; 而.equalTo()传入的 KeySelector 则指定了第二条流中的 key。两者相同的元素，如果在同一窗 口中，就可以匹配起来，并通过一个“联结函数”(JoinFunction)进行处理了。\n\n这里.window()传入的就是窗口分配器，之前讲到的三种时间窗口都可以用在这里:滚动 窗口(tumbling window)、滑动窗口(sliding window)和会话窗口(session window)。\n\n而后面调用.apply()可以看作实现了一个特殊的窗口函数。注意这里只能调用.apply()，没有其他替代的方法。\n\n```java\npublic interface JoinFunction<IN1, IN2, OUT> extends Function, Serializable {\n   OUT join(IN1 first, IN2 second) throws Exception;\n}\n```\n\n**窗口联结的处理流程**\n\n\n\n\n\n### 间隔联结(Interval Join)\n\nFlink 提供了一种叫作“间隔联结”(interval join)的合流操作。顾 名思义，间隔联结的思路就是针对一条流的每个数据，开辟出其时间戳前后的一段时间间隔， 看这期间是否有来自另一条流的数据匹配。\n\n**间隔联结的原理**\n\n间隔联结具体的定义方式是，我们给定两个时间点，分别叫作间隔的“上界”(upperBound) 和“下界”(lowerBound);于是对于一条流(不妨叫作 A)中的任意一个数据元素 a，就可以 开辟一段时间间隔:[a.timestamp + lowerBound, a.timestamp + upperBound],即以 a 的时间戳为 中心，下至下界点、上至上界点的一个闭区间:我们就把这段时间作为可以匹配另一条流数据 的“窗口”范围。所以对于另一条流(不妨叫 B)中的数据元素 b，如果它的时间戳落在了这 个区间范围内，a 和 b 就可以成功配对，进而进行计算输出结果。所以匹配的条件为:\n\na.timestamp + lowerBound <= b.timestamp <= a.timestamp + upperBound\n\n这里需要注意，做间隔联结的两条流 A 和 B，也必须基于相同的 key;下界 lowerBound 应该小于等于上界 upperBound，两者都可正可负;间隔联结目前只支持事件时间语义。\n\n**间隔联结的调用**\n\n间隔联结在代码中，是基于 KeyedStream 的联结(join)操作。DataStream 在 keyBy 得到 KeyedStream 之后，可以调用.intervalJoin()来合并两条流，传入的参数同样是一个 KeyedStream， 两者的 key 类型应该一致;得到的是一个 IntervalJoin 类型。后续的操作同样是完全固定的: 先通过.between()方法指定间隔的上下界，再调用.process()方法，定义对匹配数据对的处理操 作。调用.process()需要传入一个处理函数，这是处理函数家族的最后一员:“处理联结函数”ProcessJoinFunction。\n\n```java\nstream1\n   .keyBy(<KeySelector>)\n   .intervalJoin(stream2.keyBy(<KeySelector>))\n   .between(Time.milliseconds(-2), Time.milliseconds(1))\n   .process (new ProcessJoinFunction<Integer, Integer, String(){\n@Override\npublic void processElement(Integer left, Integer right, Context ctx, Collector<String> out) {\n          out.collect(left + \",\" + right);\n       }\n})\n```\n\n**间隔联结实例**\n\n```java\n// 基于间隔的 join\npublic class IntervalJoinExample {\npublic static void main(String[] args) throws Exception {\n StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(1);\nSingleOutputStreamOperator<Tuple3<String, String, Long>> orderStream = env.fromElements(\n             Tuple3.of(\"Mary\", \"order-1\", 5000L),\n             Tuple3.of(\"Alice\", \"order-2\", 5000L),\n              Tuple3.of(\"Bob\", \"order-3\", 20000L),\n             Tuple3.of(\"Alice\", \"order-4\", 20000L),\n             Tuple3.of(\"Cary\", \"order-5\", 51000L)\n       ).assignTimestampsAndWatermarks(WatermarkStrategy.<Tuple3<String,\nString, Long>>forMonotonousTimestamps()\n             .withTimestampAssigner(new\nSerializableTimestampAssigner<Tuple3<String, String, Long>>() {\n@Override\npublic long extractTimestamp(Tuple3<String, String, Long> element, long recordTimestamp) {\n}) );\n   return element.f2;\n}\n SingleOutputStreamOperator<Event> clickStream = env.fromElements(\n       new Event(\"Bob\", \"./cart\", 2000L),\n       new Event(\"Alice\", \"./prod?id=100\", 3000L),\n       new Event(\"Alice\", \"./prod?id=200\", 3500L),\n       new Event(\"Bob\", \"./prod?id=2\", 2500L),\n       new Event(\"Alice\", \"./prod?id=300\", 36000L),\n       new Event(\"Bob\", \"./home\", 30000L),\n       new Event(\"Bob\", \"./prod?id=1\", 23000L),\n\nnew Event(\"Bob\", \"./prod?id=3\", 33000L)\n       ).assignTimestampsAndWatermarks(WatermarkStrategy.<Event>forMonotonousT\nimestamps()\n{\n{\n@Override\npublic long extractTimestamp(Event element, long recordTimestamp)\n.withTimestampAssigner(new SerializableTimestampAssigner<Event>()\n}) );\n   return element.timestamp;\n}\n       orderStream.keyBy(data -> data.f0)\n             .intervalJoin(clickStream.keyBy(data -> data.user))\n             .between(Time.seconds(-5), Time.seconds(10))\n.process(new ProcessJoinFunction<Tuple3<String, String, Long>, Event, String>() {\n@Override\npublic void processElement(Tuple3<String, String, Long> left, Event right, Context ctx, Collector<String> out) throws Exception {\n                    out.collect(right + \" => \" + left);\n                 }\n}) .print();\n   env.execute();\n}}\n```\n\n### 窗口同组联结(Window CoGroup)\n\n与 window join 的区别在于，调用.apply()方法定义具体操作时，传入的是一个 CoGroupFunction。这也是一个函数类接口，源码中定义如下:\n\n```java\npublic interface CoGroupFunction<IN1, IN2, O> extends Function, Serializable { void coGroup(Iterable<IN1> first, Iterable<IN2> second, Collector<O> out)\nthrows Exception;\n}\n```\n\n内部的.coGroup()方法，有些类似于 FlatJoinFunction 中.join()的形式，同样有三个参数， 分别代表两条流中的数据以及用于输出的收集器(Collector)。不同的是，这里的前两个参数 不再是单独的每一组“配对”数据了，而是传入了可遍历的数据集合。也就是说，现在不会再 去计算窗口中两条流数据集的笛卡尔积，而是直接把收集到的所有数据一次性传入，至于要怎 样配对完全是自定义的。这样.coGroup()方法只会被调用一次，而且即使一条流的数据没有任 何另一条流的数据匹配，也可以出现在集合中、当然也可以定义输出结果了。\n\n所以能够看出，coGroup 操作比窗口的 join 更加通用，不仅可以实现类似 SQL 中的“内 连接”(inner join)，也可以实现左外连接(left outer join)、右外连接(right outer join)和全外 连接(full outer join)。事实上，窗口 join 的底层，也是通过 coGroup 来实现的。\n\n\n\n```java\n// 基于窗口的 join\npublic class CoGroupExample {\npublic static void main(String[] args) throws Exception { StreamExecutionEnvironment env =\nStreamExecutionEnvironment.getExecutionEnvironment();\n       env.setParallelism(1);\nDataStream<Tuple2<String, Long>> stream1 = env\n             .fromElements(\n                    Tuple2.of(\"a\", 1000L),\n                    Tuple2.of(\"b\", 1000L),\n                    Tuple2.of(\"a\", 2000L),\n                    Tuple2.of(\"b\", 2000L)\n             )\n             .assignTimestampsAndWatermarks(\n                    WatermarkStrategy\n                           .<Tuple2<String, Long>>forMonotonousTimestamps()\n                           .withTimestampAssigner(\n                                 new\nSerializableTimestampAssigner<Tuple2<String, Long>>() {\nLong> stringLongTuple2, long l) {\n} )\n@Override\npublic long extractTimestamp(Tuple2<String,\n   return stringLongTuple2.f1;\n}\n       );\nDataStream<Tuple2<String, Long>> stream2 = env\n.fromElements(\n                    Tuple2.of(\"a\", 3000L),\n                    Tuple2.of(\"b\", 3000L),\n                    Tuple2.of(\"a\", 4000L),\n                    Tuple2.of(\"b\", 4000L)\n             )\n             .assignTimestampsAndWatermarks(\n                    WatermarkStrategy\n                           .<Tuple2<String, Long>>forMonotonousTimestamps()\n                           .withTimestampAssigner(\n                                 new\nSerializableTimestampAssigner<Tuple2<String, Long>>() {\n@Override\n\n  Long> stringLongTuple2, long l) {\n} )\n);\n       stream1\n             .coGroup(stream2)\n             .where(r -> r.f0)\npublic long extractTimestamp(Tuple2<String,\n   return stringLongTuple2.f1;\n}\n.equalTo(r -> r.f0) .window(TumblingEventTimeWindows.of(Time.seconds(5)))\n.apply(new CoGroupFunction<Tuple2<String, Long>, Tuple2<String,\nLong>, String>() {\n                 @Override\npublic void coGroup(Iterable<Tuple2<String, Long>> iter1, Iterable<Tuple2<String, Long>> iter2, Collector<String> collector) throws Exception {\n                    collector.collect(iter1 + \"=>\" + iter2);\n                 }\n}) .print();\n       env.execute();\n   }\n}\n```\n\n","slug":"王阁/技术/大数据/flink/2023/Flink多流转换","published":1,"updated":"2023-03-01T05:58:45.592Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clepeku1f0001qrpw2pvzg91i","content":"<div id=\"hexo-blog-encrypt\" data-wpm=\"Oh, this is an invalid password. Check and try again, please.\" data-whm=\"OOPS, these decrypted content may changed, but you can still have a look.\">\n  <div class=\"hbe-input-container\">\n  <input type=\"password\" id=\"hbePass\" placeholder=\"\" />\n    <label for=\"hbePass\">Hey, password is required here.</label>\n    <div class=\"bottom-line\"></div>\n  </div>\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"38795f2de663fc7f65a52d67a99e00f91e3a6e29ddc1056c0c917c12d5ea545f\">ce7de7a530441c1258fc46b01efb07288416b3f9bec89a089bcdd07eeb6268128d1f64c4f68c2ded0973c0505598d474674a84e7d9627ec8134b8009272270eed8ea9ef1b8c007e3b7e3c7af61bf23c429944ca14b4ae03daa11c81b074ced55421f4793e5ab5cb1cd048e595bfb19d5ac5d6436ae668749de50362b9bb18df517ea156075b2eceae69a6b9bb006178cf30fe8b71b05d65982fab11b9992a976a19bb5b7135856797f47c2c0330fca2b315996aa74491eaa94e1ded1f62ee59b1ee4db7c4879d11372f794351bf281404360dc117d41191f7ee103166a8c3dd6463ca10bf2f3dafae1babe58cc0c92bfd7aca4895ca36b853b18b689ca6321d7c8f7b5f5c61d9e960b9953615bc70dda1616b0188dfff77d733f6d972415067da7bad3e22b761fd3e476c13425455fe297f364fe91801f7ef93b88f73f64dafb926faf3553f73985f3d1c9fa5222384d0695b6937b704b2da23d5b4f2e8acf6fc8b137b6df4479f361ff8ddde47c8b30d1fca0d3585ab925fe50ad45b68290a18c00e38e1b499c9493b6e771870e9336e30d801fddcfd34bdf897d00fda07b9828bf41fd48d468c314030483fc513e1cba2d3b55674167216809f581081948eeec11f3c964437b62efb5fa3efdaf20155e591a798ca05a3ef510b1672c562663248194e503cd198c9c0c0f97cb65133ba3a97ea6eeb2b26e77f7fa2d092ce248150143d6690ae1e756d73e617ce1baeb0c5882d9b5ad3a9ae824ceec424ea82e5c8fab7d688fe209cd87e084b514e38af40a6483b3822e70a86bfd59179d1c384a95251b1dfe1915ad2f27fcdb1fffbacf95e30744765fdec82b4c71c4bdf43482038f6b66782b407282f29c7698b54883b37c36f6845a4b616f7ba0870f1b68bc565f8d1689867e6ff251922b81f79855996983dfbe479aaa97eef2ec470fe3cd644a8900cfef131289f19a0ae225af90a0a17c3322beae36572410f36f16f778d7d2859b0f380b186ef5f49e0dd2a1e0fc6e1ef41d398fd9c63d35a0088132dbb480ed77eacfd14addad7b8b9b99139b6926a72ecbe3eb108e52e595d395b77f6a7ca8194bad6daebeb069c14f74a768a3173d11981c3c8559a88cb5724ddeaa0fc9778b444050d234d38485f76cb4a8fa6d10f03cc842df927df9065652357790cc16169cbb47dd93e1b0beb94832f0d7df9811b50a2de2254e4ed3f1a9427feb6fd7cac39d7514e44301df8165ba3cdf979f5a5cf340da045b12af82fe9b220e1f0f6a3525e220ce499d827238932197551150e6302022fe112380d2b447ea88a2b2b3fcd0106c4aad33849122373b49dedda0f0e1e54c87312018ccf9f09e427da21d17990097666b061001eecf6d37e51923c544688ba6a1e9df0a56e04e1bcc1f3de6d2474bb99b21637f66eb57f6cc40d4131d51b85f8fd5596e22c29cdc511d299021504c81be7ccf0af08f45030c574bfaf09aeab85642aeb83c03ea357a8f8b33cf55cffde3a5582d5aa691735e7b97e205ee14bac32b36fc6083699a5c0b50970d08b706bc4ef2b7862b2dfab919fdf1e3f3b991a64fef8e402a80d9c2d478fa2baf470de844df897bc70ea195fe11c276db7c65297fd1ce4431622a3f35ecf7b777933166d4136f22b5373d047dac8657c5bf4e9742640c60fc1364f445f4bc82099faa1b60f33628bbfb65b48f9a77ac0e5fb04f7d0e021d91e92b77bc379897aa4ea7789d1c0de8e04674200a6facc60ed563e801340ef862b26b38cc66274b53b7b313a15a7d1a0b03a031699910dd8ecb1b5a0911fbbcf9035ac64e0640116ff347f6c199331ebdbfe2ad2906149d5215353729b06e97b1774b21db4258dbb0be80ac314946afda8d20cd84eac0aedc6d6c1c411eb58234b9ae51e3299974a969c603f4a1b2a391bef6836b762578c8f9dfd3ea471be0bfca730889c3dc111ea23732c1f179e976438314d09475dfbca6b86c4f01dc873cd47196e3f63dcf9e505801760bf89ee9f69a8cad661e20cf204ea9cd444c5a881327b821e4c3564df085afd3f72043f497420258188f5353a09be1df9d6da8c315ace408499f074e8b26788e3249843fc416f12412c90d0e1b9645e0c0017402793c5861d90e8ff5f68babe693a5950451ea714d51d0f98fe024ac4df09a1aa1acd9a54de2e06b04b08f446d0250a5dc1a7639b57bd197f61ebb44667e1ce19eb76d0dc81586adb354c584e904cca22576f7c6d9c1ca3928bca3cf7bf72f9a5b95f5feaa6afa70518b230310372dc17f115fc64d50093aa20459f2a2f3442a88c3e0098b95d479c12010bab0de85049b7775dc5f8d78d790563179729d038491d85fe0497b6da76d25be7a8c3e1c8f5b731aa0da82e3f610d92c18a4debd88572e99725175c1ca0e6c79e6a3df191ab428ec1324781c3c2da628fbecdb88b3699088cebcc91280c3be4c2940be53a71ef233c23ad9f702b300c83a1a6fe47a33b59d7699475d8e1bf85418c17089605951fb1cbd4a871ea64fa536edc35e4d627edbe0a5190e44cacb734aa250342a5a50b0a28de7404157236d0a76a8101f0130342c8bae2324c8b828be7022fea445a17695112394cb9f3577e08ce19167283448fc56b315473fa06e7aa585372947375f916b2fa4a37532dbe9b7bee16113f0e558223f7ee3f5b66a00ba8e4c3c89815ac83fad50b42c59298b00aa671feb5764d7e684c221b5e85f1eda5f2ade698b9ff0d2be4a93c357c1684b7e295a8d291bfd57af1f0a0a6fd11be55f615727c864d421ab0913bcb5a73e5ff9a7fb2603eda7db8276e08a6fa561f0467d17d8ef4bef7098e326501a73fa30d0ba9a0f2fc6be572f37251d9d1555bac6ea345c56f3deef9546cd9fee128f8b847f8477e445f5315bdd19eea8bd4a38102eeca4926690864ddce95e6ccfe889f665e5c8d280bb545ae16bef472a56071b7936ae296c046a86578975363212cf4a125c3f7c6b42d303185edba9d50c56ebff6d50a74a034c58e915c34a711f10c948631db54926ecc58266aec00dc1480cdb8e3f0c366769ab844232ec49b8b1e11af44a04348e4e738224acdc0558314c2165083b9271961d70a8a2b1102eb20a230e8da09f07746b8c298b7d488ab5ea56dced8cb9588c5111b994d1f6f108ca4fee9f0587a8335cb5c0b03833d95d8da13480d102963b66f3a774d6fd008c0dd4ee062ea1d270fffd9da73d7d8e56302731f995f1f1c4c01067015cbbbffb20a17fa36fbf14d256f65207cfb2484a24359cfdc1256ca00957d4d05ac9606ff361a6a0b95e6d0109bccd0f412c5bf2310ba6ddc011bb1cb2f5959d9455ff4d47024b9d4308d45f9327a677d4b8e65956a96de78d0b13e021bbde63eff0497346011b6819d9f46982dd171c0b522ef57b3a86e984d7724bf215db7f07834581f9c26294be74a18a7760c8500ba0213f63d424db1e4e9073592524df16f4b325c9c79029f90bdbf9ec93c9a94f3c89f8c97d2829073564b05a40366ed885cd600c249b861df82eeddf6c787d4570b8e50e9b914b570fa6467006ed40b0e8a3f8f2c0529f1cce3c0e24aa9cde5adb7f57cb150645f3d499428d06f152e48089b2655ff9824202b0937d69f3307aa3631cfc277b2d2ca4e6fea2204cf15c21f6614d1fa86f92c4db920167494f61ed702f2073b28e680862921bd9dac28f3678bfe53ebc32f49d1ca41946df20adba507beb4966df488c92b5c424c5fcd5b5f113fd41947ab725ffc991280b1d0aa2d4abfda630973467256d3866b8f9d6d745fc80c4776e414136ba8f2e66ea3c1279e33a308d1e72813205da81ad6f8292c36c39166999c0d95e7a8cd82aedc88d6d91b1f9d154b4656a3eff4051c25757b838d81a196f04419bbe2eb521456359426d27e2eebdc52d8b2ea8823692019f7c0b318b7bdc5ca9af53d9de8744d4aa4ce5861d84c7117bd37986ff6581f28f012c639963938cf5c01a60d95b9b6834a860fe455755aad5cf550e81b8918495340ad739e164e955abd1f686974ec9cdee11ee2cda1ffa8af699985da093f32fe0bb072b8e41cc23885210b9f6f2d6205ea6916bd17271ecbfe3d182a3f01bf1d7f90c3aaefe9125b576aa47783c33256650f3d667b5d07310bead02dc8ef676abf11ecdcdda77367525ec82b1bd29df798b6f2e302a2c3c740ddc7e129a281485ab6dc1656c0643100b555e6dcf1a9c1b54c47b7da1a28d71231d49b1012425af7199c0dcdef60c6c06d763829148dd44d48b5be19da4cbc698e09299a783c70a55738a4ccfe9d830b205eff9435d9ae753d34c64a0c543b1bbc18a04937c7f3cb89d327a1eed3bdec2c6e2620617ae0770d81c520db7cdb599cb2228e7fa49f67ce1e972799fa55734c682a3c966751dc36a7a801d8e0e86d22a75c782e7db9dca65306058b0b5e5493a85b0693cc496a3a7eee57b2d888f97dda0ab4d295799027dd124bc1adc4aff3200bc9c8a14f1b3b7a31a9d2d76ffa1f983af8d8ebdaced1d961c12e11bb74e60b36e8caa21433dedd915278718138599f7954ea188596bcf45cd2a72c1db0b657d9dba48724c32ac2cc9c3efd395ed20b52e0ebeec439026508827f1dcf428610e142633aef81e8c4047328c825f1f0a17f9e21ee820e1fa8dd58fcfe85294e5e05ed4e3407c1f515d075e5e07dd969f61a32de51b13c84cd33a0b13f2aff5f89897ca3183c0e38a0b2bfdeea8a0973afc390f7bcb8915ce879e1c5788f8ef10f360fff7a4751882aab08b7a75f30b4250566eb43e8bb922426c57565b5fc6d93eb6219caf7c0a8c7b982efa5dd7958b8d74d402c49cdd1df5c4afe71221ddf68d2618bc5dafdf9b14a4b5b92bb4bb24fc4d66061afdeac33bec687ec88d7fd0a579f9ebc77eaaba6123546f4d2f7cc35d4c647bf7544ded8a7cd65a09b77b5f1fcf86a82398c20f18914781dd7d4fddf09249c56473d46333d49d6704768f611113a001d5414b65b3a4e1156b9011ce93d98fe0cd4f0d5a1f790ee85b1e824fe139eae69f15ce6abb2f750dbc70498e757dabb235968089ec0a4273bf64e4e75b71ffcc7c6b693012e88b4fb562f9d25939c36c46ba10193237ab7a293676e06cc3b906f42f710b7c876c6683ab32739ecf127d9f5ad36c820bed0b49cfddbd219dda96a4b1be91e9aecf23c1ceb0b23c06483e04aa82c84882fa85436c64118035588f8e1796a8daf3c5e553de0cb825506c7bd3492ca996a93ef5a87618793872bf3a60f7c10af48bdb30b1d6c155888511b09d5ddb313fcf343026565e96e4e70c59490b2ed599b74c4d9cf66ba72b99da10f983855da11f83f7bcb005628eb507c1ac2052ff85fd5f042744f0d8b4229cdd48bc8717b1238ce3d027b664bc928ac9bc6cbc6165ec4a23a7ca4dc631b83f8051e8bec15f498775025ecfe8a94a3348a6aa0aced92f5d238771b67c5d4b2ffc84819bc493fd0ee6441e5050477d57a07903c88df8fe44548679018384c8b9d06bd651624aa9b2466c46338209a62082a754b29287b779cd9ade3bfce58acbbe6f51feba5abcfcbe22539a6ef26c9ba950605a6f767c5f14bdd5c47502d0f0be26555fa0cb738e23ff457b6d4cef1a6274347bd18ee183292ef4fabee98ed28d8d22960b62240922d296619d899eefebafd19d5143b23dc8453ca3f28b8dd729c9e45f18c182c364fc77e86a98f9c7d9e1011dd0286995a007ef7c8252eb2ef027abd25e139e88caa1a7b633ad029a11e3fd0b86ab27e266b37f29ee70114e56940f8663aaf9a608b441bf844e354e54dff6a0c411716cc71ded78e6126cd0576da786d913fa97ba3af60f74107e4c4a4498e4a1ae78243722b0d0c0c14a5bc18fc3f892cf528e41f6e9089a5deedc866f547fdd2d5506d76d1dc2a36b81c0939c9bd56681d6bde0806c22e2bb11fba8946b29e155c68fc1973dad2da0547125b5347217b87f2eaaf693079c924662f35134950d43e7e8f9e67df1dcd4f182aaf5e6471e21ebb46d6f64b18f1187e07a757809fbb70d5f7b44981445a83c8e07dc6ad3bedab62432728b232008724d86bc24d6cc4b0fba475e9eb5bb116f06dfa81b6d4173e85ae2499c099cfc9417d038c91c9542d701c585865836c82e2942cb38087830109a02ad0a7678f01630daa266b7d361606f38cb3ac5c843f821acaa3285d7593da84e222702ea4d2919ee899a6fe26006636c05ce8d453b7e2a277421b712cd0370b5853e026e7282a9f6a74224333d1c55a7d257db3ed06984707f78c4bf2e1805f4a88acb4cda368bd797846b729c7ac6da31dcaf9ec04e27426d77573e130d86b74b7da64164b3de066a32d688d3ce97938e3e5431a7ad6d04585d00f806b4acfc40b3f6fa6e35d0b760655149060f374c8c67f1d0eedc87186b5336766bad6d001264cff6c64e26f4fa9de29a3c4735aae917634f2a8cd70b9a7fec3956c3feebd9a5ccace7d1864939ca379345f0ced84e7be485eecaf287c2f73b82307e93df759ccc04c952c9debb10bd97247b89b4018b9b6fcf28c4ac1968412137421cbd36c779c087daedafeb3854b4c2836bbd0ad082d9538f35960e79f90c0cefbbcac5ec8871163e76be4dcc4b03120ceb235708481829d04eea1392b7913d59e89b0a4acf22eddb29923d2bc2aa936ec2287edb1873ee62eed9b5c4734f7678446ab814a5c91b8d0e359fafb06e0f7421b6908f2833ba4aca03ba77f5598650c545d4a1cc575400ef839486a84bedb30d38343b9d1b2ddb6c83058e1be8edca86ae991aa43c4927635b56ad003e1b5688cc2d9d8b44261ead3a4b56da954b97429d93f939bdf88ede859bc72cf68758049360e9a315b02fc5eabac368eafbcafff74c891d9441cf3156d7cee87ef9de7a4654dd4421262173eabcd5ba3d3d95b11393751a1787bd5348609b129d5770eb707b15e6a5d30fd525663d9ab6138d37a8d9d4698f97f1b73297ae8a9ca5b673ed3c5af6dc602bd52d694ee7a98d3cae1f3a24bf3aaff5ed89459c344feccc9df2b77cf32fa900bd49ed26cd393376d3892f90a9152c8230bf0555c0418a53f8571161167041ff35f41c83648520e909947d454f0e03e69d9e42ea2b50e83e3366f998b7880ee33bafe2d1b8f4264b7c20d3ac8b2c658ce251fca8b5dd705478bae377720aa057d6789f0e9a27fa0085b13f4788f77a3327cfa57632330bdd9433ce97413c1a07e69cc28938d68f9f8cea08ec67b31f8213e9ca2513d8b1431ba12048dff928664e4be13c732a09aa5e9ee1ee86d24ce44cb47c55ad5e1515860dd3ac70349867853a2593130b12de5a93d48721a98554f04168c02de61b6026149b1dcd6a62b832da22cea69aaa00da0edfbd1c5b9f60a8ff7361433f1acfb9b5d2e46166ce19667f587e7e15f5e017655315ac63877c13b10955a24a7870d2ec68606f0b8a0571f4906110ec8da48288adb8790d245a9df1cb388257fe197e1a9c67efddfddb70639977d7d6245e2fa859f12d575a156a15abd0f3e378f0f90fa49fe29d2d4f0d68b99ef29b68d1e3c5dff1b6c0092906e0ca61f4022bdfe3e06672a973bdb698e9c54fe3aa14f3bb8e8f1d13d2db1ccd92fca825628ec221b3fd6ee2e48ffdeee4547f20a54959f2fbb72dc4ceb2105d503c58fada60e61aa233a20e33140b48665a084c963c4b0938a70091ed2b44f574d6eb17b5c63c65c3bc489a30a15f8a9577fa25757002ea7b90e05c24b88b349ac089acc57fc40b9073da3c0070aeb07c0a21afb31f72a4319ecf1dc7458a46a57af2e6b7cde5baacab46fced685a5841071beafea01d7f41f0d22862629fe6689cf1eea9c1ef40f9ac4be215de742120210c16266bb43f972c2a4eb3c2ad82e6ce2941d8fa4c5a03c30762a68221de92a496758637dea29820a8184b1d9849891e133d1be10101264a125bdf6b7c62cb77eb56a125800d49725b3207daadb09f3e5883545a5d8c04a1ed578d5440508e8ad13f3da473eb302d1eeafa736e8dd93c41a662fdf601ee31f91541126bc46b53fb482b95b697137f62a580d60c501eb5068d4c2ca484cf207eefc62a62259e03829ff9121f66d6d790c1c91a677755583b7cc57e12d0f776425d7260cffc91e19fdf656f794d6c9e62f02e655eebe28a1229d230f81d783710312cbf9c702d63cf3cfc228c3acccdbafa3cb495d724869a8c548a2434c27089da7518f628e877e12650059cc690e2e962b24d2868d50522086ce87426e5be998af5aab0fc1f55c36391a2a7cd9da2aadc9d3f889471d6e83c43ed4b40e303d37cb41acaade4ac73f086a231bc79601caab960a201c4a966484ea0199011439e02a90268462522231413ccc8f2ef05e2d3d935b42b45f265528e00839439651f937bbabc03125b651c8c6de7c63ce633dd902d834f60e5ab1df4aa7063b3c82ceaeef519dc9d27b38b30869b2aa185f1556c9da948824f095c7862af062684531cc8a1618169870d3fe5c3ed05cc977b45fdde51b010a14e982e02d5ad2ca374b736c39df1771da198598fb3107fe15d0ab1f8303f500f848137c3e801d83a920ed2f5a3940972a07b0c608de69696986218b290426c8735241a8a661d26624b47014e4daa2d7426855087c7da75dcc522b9b4857c5fa81433657f9217953be6b92a7e8809e8c4e5a2f44518b560f6d5006df65132e74152358650abf2a2c622f0ee35c36d54e4457420bb850c40c1409fdce33d9455203d0a5020fecb560bdc9efbc4eb92a3aa6e90a6c10349e6278decfe7f7b99ba0c27a8b84111a1771f7948b92f746d0a6f67889c91962af07842ae9fd94a82ed85743acd7d9c702d9d28abad05b894c08a57a441f46d7dd558d8bfde2885cefcac96bb6eb02d4272112b4e4ced312d575d9c4cbe65a5ed4acba34283a43352e844760caed7bd93e751bb1daedaed039845347990fc1919beccaf2df29be922d477487b564a58c351943861390f9911fc0b39fa9a72337083a823f7f3e32c8bf1ab6e80e22b786fa1eb754476af35e406807c4126a5e406dd7b4f320cf1c527790a8a6754de2e0f34ad1c314e9241cef6cc96d6d71a59f2f110ea3349b85c799676092655d758d2a6fe933c0a81d1fcfd1613f453295f64ea8f65dbe52d21affaec1e3cba07d72dfae482ea1222084bd05f79ce5fd52cac142ee82e4452dc547e8fb157b3e8e213fdd6182f9c3b56023fda7e01316c42fbf8ffd9ae679725c0d55314b3c941c35dd04cb271fe18e51b52986498ef427c32ca9d597cb4a4a76525aa9a538673e0cc4d49c8f02cb400e41656897cb0f01dcefb6d40264ddc94faec610cd33b1d12d7c484b5df3b8a219a37a1c96bece0d66f1e85ff8c794a1d9032b38e7ee9fc2f581b49fbd2f3a0c8cdf78e9dd4d74f36863033b0d0046626968335ac48129f8d36ef7a7fd94d667b649768342920ea922ddc7ee6bb3d546675212ee3194459626368e218ef2307d503e36aed95d74d891a7d427e77017ed9bb561399b6dda449433a6b8b34e06962c77bf6acda85e061c1183c9c3ab09ecd0e5f9ea4f0a8e2ae288a0f2c5c60a4b4bdd820f200d31f696b54538699112e4b21a94945fc9330031b36827a6771d201dc108cdebf6ef88a6995eae4ed9a99a1899145cc5fbeb7a85f69366cccec8c9732da7ac2a8ac983740992ad0071b35588ca1b754601a2f7f3bbcaba298d93badbd2579d2cb70295088f2b3079625b4d173967bf8ab85b1b0ca77e0c3683f3aab24d54cb1b22d4017285d2e826169e3fa497fc283c94c80d9778438465b4a3b2835d3a3646bd1f10c9408e4adbc5d585e859e2889549fc8c15fa9a224a9fe6d7dd60a5cdfed529f2c3d9d30e4610c5736122981acc16bdac0120fce528ebf56745818d8ddd38ca9841aa4e9a2caadd8969cc7ed97e7b6cbc04cf4753ff1929cce3432918de6025bdda6fbb545baa286edd1665df293a6fa2dfe2978f88f6c35ae400dc7aca8b01283ee64259da092565247c1e738af91863eb8c77d302538c886ac1beda1a8b0831092b8ac8b8efd256a32c7a1b3ba229cd504834a8af313dac99c2dbe9fe4426acab76ada8a162fd56992a483ea6cd96ac9f68a35d1862dd61680444db094f3ce92dd13702529e2bb01c699037a89893ba55ad64d72bce6ce3f7fce9098d8e1155e377c3869f60f727382c113d0f08f11f5b345f5fb3cc88b167f1503c7a78fcd4d65d0bdc42214a05f0fc5a780f68fac1b3c27c6aa86469f08edda6bf3575d3c7812eca116703898fa2692610c87702bd32f931599f269b0e13b88b53d00236fa22c4011db7e52e9cfebca3bd105e180aa3d4b7d30c99de3746b29f3b3244cb0f8fd64316af06b24cd630feb21942f03450886cbb47600c835b178a4ef5af22dc742364eaa0efeeaa79600fb6cdf1a68f9dec184fe1cf5bbc488e639ae5af9e4f765779c08a2ac800fe36280c94f1714c37beda62cb20011a220a80b6d7bcea56a6bf07b55ce84efd29b579d78d45ce98e09feeb8a42393dead83bc028e5f5dd86b3b93f4ad8de039f620fe6383ac9f813c38816ad98ad70cd6ed2e8193cb057bc32ae2bdd8ab8209080f9d59997fafe9b2fe768d5e29e4bf3a4ab0780059ffc730849e7ed4aeffc0dd50563caaf018ff871af13014dc9dea01aa992908becfb23be0af8a81f4365b54fdbf71ecaf9da7fbf7ec640983b496016839cb83003f620b2d2f1ed61505c9d3291a09aee70b3b1e977c9b0a81ff9828c11fdcf18b6489f1c6b1d11ce4f03facc26ccf2cd5c2c7b57702fef6c280efa176026198c43cece2fb93b0463966b0840fbd0fd0078f12aed14ee5d4bee30c0f7c7f130aefe0079853c48554c5920c5ad5d83721c664bb70d5dbc678b95c9566c74e03352e3f2248849d24a359287919c031f69f33346f102549b6b57c4cadc3a48caa01f87a6cd99103c23b897b45caf462832d8cc2bee5f7e48b3c994c21cf2120bc73273ae5417f047f7b4989e8f2c2c0f334ef1ac025e6385787de48cb8e3018348c4129cd2cde31a0d4348e7a51eb86da53692b7e094ad8f3eba3df3faac5f5648a2ed374c2fbffe95436c7eb220ae5e145296e4463d48cf69231d16cd26161d2e744a230c63de5fbd1f78f064fd81e3f30b16f8748f3531a43eea7f6cca6504cc07c97907fc5adc8e0f94b71adf068eb77e172d14593c3ccf181897db1eb0ee435d8ebad93c6fc2efa3bed06b53a82ddd97c56967e1013ed1348f9f1f583d699be23c2babbefb8fcddbe2ae720e436ecd43a3ffd3abed5644e47d8120f7ee2c9f976db26831430def5e1c8598dfc42ac21bc47a5b8a9db39db7a941f589d6d7f17fdb17fd6f9dee9864bec61b881b435a815400ce745585ada54d5959588c34012df4468addf663e8cbf124f9f538472a8002f71ebc3bb17c9bb0f86405cf96caf5cc698b61a2418f9b5436c31fd82bcba79ffc6fc34ca6659910f32936969019bd8edbe88a93bf85852a23c257d2685cb96c91a7c9699339bb1cc4daccf0f03f2014f1aeea2cefbe926ad9bb50fb7c08b4ab0cff39ae7e2ab54a3c87c4ac74d4b5c0e5e04a76a70f84df97075fa849483a586d0d24c7353c754201cde17510f155227c57ae38db7424ee6018ae36753c6eff30bf60c1cc04478c7165a09f7e7963920ec695746df2393e9a9879fbe029ea45f30f08c9777698b22a99613075f7765d95ff5c56203a84de5653b3b79619f5296bbba1a205af96fab273629e09244c567f0bb4eb952dfd49c5c19b6512be02e0edc056eeb52293476067d3d9781e0f41a3bff24a694b9581307d4afcc9c6c5ca19daf97ed071c104edd283887174ef2756cc3d2467c0aa575fdc19000936e37de94cf55433daf514da12f4e5cbe2febed58ccf1886e00a7a3e1e378a0b6da4633432da46a19869d9aad5a3082c7e2bed1d33a968c0fa2164398e403c50595dbecf7ba94510d7df7d94f624aea2c6bc889429ef17a91320f77c09d7d91a75988b99c5082ebb3eca6838dd204791d69d8d198c37b387829a9e78988547f6267c0fde3c64509febb962ecfa22078d87882a20e067fad42352d9de18845b970345bee5678975e48d338629f7015aec7287d030fd468c79d960a0ee9db15201a7b82f946dd04fe77ff96aa42ffb9d9bcff35773ce6b99466fec1a69a6eab4d2eb1cb135ebb81fc8175319ce20231071939881123f080f923dd248a002cf523aea8a4eb4eb6000c61808d894d9c992a90c4d5e23ac2f6e5eddea65ee598d930df3a4f7049f6773b1c045473bf7e28620c1b6b6c2365666943c955eb288ffcd975049b6e3682034f154de4c2bbe7bcd6788c3dc14f56595d1d0844a452beae8ca6a91b03a21df976e4aae2de055761b5cee619bef9f411be4fbd8a12e49afd455736564dbd9b07700ae9bf0f1428ebbd0eff5a9aeb183043cee7b6afc4c50571d71b1bccf234851d0256005e6697786559456d527d8ee5595f6fb089400b15ee59f83149d9d46c2e5932c72d58b6d0d22c01423f80140c7332fd2f713853eada077593413793533b36cbd6ba6a0619ba035b074424b9b94308e21b7f58c4536762a95b9d315ed3a5790151ee751ba05ab735aa89bd207ba675bc13e72751ddbdc0a47dcc0b8afe0cba425246f12bd389bfea1dd0c89c346c0792350a6c598eb16e87bc9ce878f6cec8f59f367d2c64c25f5641a719035cef3a5cc3978226ca87331d23d0e85420e032803f0d04766354bfcb0f0cae22a5c7e04d5d621fe82cf37bac438ad4020ec449367937c94a175edbce12dd2282ad7dddac36ec8ec2471f3438ecec357a7da7af6191b1277186728f17340cc2d125d42f33774ef48e4ee9f128e3a1eae69eef04badc7994fbca5dd3060c66ed9fae19dac379298fde131e99931a904651b1bee1cb35a0cacad10ce5e28d801fd9cc2f7556737abaf107507ca89d46c245d78050491573702335e355573e74d75beeca63c3ff6f15b6337b265c3915cd30ce26fd780cf2c80368364df5aee4d153a4556612cc4083d626be38423ed547edb39d17cb40a7eb4e4c7f34343c0f9fe6d0ae6192ec1c7b2c55c33f32b39fe573316b91e032fad360576052e2f7a0e70d7a500d4d2cfc30a17e0b907b1e3326603cf613c5d0663dd020da329f4dde5369052c7a94cd088765f46c3c204cbe90fe169d300f7d1ba5652bdf273dd5b15df301f9fd75f11ad12da233a35f243f83e824b436bb2004a4df48ab3898ca43a996efdf24c843952fc4529f3d890f2568d7f855649b01114859716160d9d4dea041b971cd05ffbf59eed236d85cd9682708885a2bab52706cfe6b99ad2735fd895c20954eea8b5b516763a94dbf2e8fc72c9bbba281e581f327725c18304a70e13071f81e03abdf2019593ebe186b57ca4cf2a6ce1244a8c21dac8d23405482c0fb9166aa4da79dc3730023a25111a4daf64a2239fad6b29980da5bd1f37dcd8e06cc0593614f8b045835de8d0cb4bea2ed50361e855dc249b2d74b04d890417a6217e9f055da17f9eb24c37237b63ab83c75408c91add61b770de3a592d339e186be37f502667dcc88b5095306d40684f06593523f7ef1b54889427edd1427c151cfd8f2af51bd72040578feb01a5d00fd059adb5d9f9271d8e3b063ff76c52ec7abef354e1a533be15ea5700bfa5eebc57428fc46f5ed450efb9ab74258638034aa17f47d57e6739257fd4c17a20ad7901523d1cf03c68501173d8447cd4ac2480173f4209da09132433e3fe6ee685c4b54ff576a3b16994b230bd55c7fdb5413a4ab696f0f0dccf1737ff8efcce1fea9099908a15a54e2ccf3ce694c5120fcaa9fa9ea6f4479bdfe45a63d863e02d28564724f0f8f10c485c87ea084d0598a8a047254b3a35d07ca18c06c35392059aa4c21801395738af08409d20deaeeef62596ab27ac512e66dd4dc36572f77d636d09ad773e9deba2524a7d81d49614e58d5e568ed4c85dad697a7080736dc83cb8420d4b22e52be289a345b696042b96c7e7e11bcc5211b0eccc906264de35bc4938f84743b6eec90b745db8b4aed5802a29b22e066ad47cdbea25ccb7272712c65d807ca4bd7451c2be9d1d472c0a99f81e639392343bdf313a5f8d8797f153daa7aefd991c543b105096a5cd72d70575f66a07099349a0822799b79aa0c64068c0db3538a6360feef14c9513f00df9a85e63044c84de905c90e948d4aa30477ff174fa41cf8ad8bd8153cc3d15b62b1f1aea282916c1f053e24892d29d30f7d5e3966863e52639f9969cbf1eb94e8419e55c8cb20cda592ae2180bdcacaa5bcbd41f91c0e768b102e76f930df774e1da1a11006d5706f84d1bdb0e84327aa4f1747aa2419d99081b59e7139589d3160cc45343fe1b1409d2e1e22b764e5d0b8291aaa6670dd3f327c5974a84efecda8294d9cfcacecf580e89c17d1af0085718fe0b5fe29fc9d720a350928595792f5cebf94693ee189a45c36d3f07f0f5028ecdea758c594481a895590983641f88bb71f9469c7e06b07c1b4a3fff47e677a96dfe96a48b6c15b314a2683ad4e15a90f17ef22d2d6a6ace442caea56907284e2df98988a31604d9e6054b002799d1e26ada4531ca34affdcd4c67ef4deb7df13a25bf43deb137cc0803f9f0ea6b497bd2432e315a43c9741a868152459e19e09232c01565c70c9d1233a56a6c2aff2586ad299b2c3055282ce1210c093c2d89f5f3c0bfff5ea118dfa09b68d3d55f04de391ffbed24aa429ced4fd7f23c7c29f93de4508acc0718b9ebd5d1d3cb38a30651f82d4e8bed13333f2fd0c6a4c9ba07f3adae231003b59743a6fc6d306eb7e2ade0549a600892408ddfda4942e1df032da0c03eb1301e5191ed96f5824dc2eed5e00b6bff332edb2408aff2610cb90a9cd23ab3d744fe1d40ab7823d26e8d9d55e93dff229d05a3afcc118b0304427109d60301a2a95d7fe97be8e73943f93d0f31e8b92c4b866478a91871754b4408fb7282f98b8bd0e250212759dac7a5d7ddd1ddd7c46aa7b12a0e6aa46ebc2ef098c9cf72a7d52e1863acdb8197976eca19edacb2d400c819d85b8d22f7aa85ed051822958ec0906165c823b64c702294479024feade45f262786ca9db99d5126f6f24b54b02ff4c25bc40fe0465d65440a8fb1278e9374ec677c52499416083e4a6ac6120d75625e47e1c3d436a87251a4f85df98276ecca84aa2a8d2622b48aa1bc683c8494f0cb9b57e63770f428d5d4aad29155254453ed80c1e759d05dc8286f5ead9aad46fc5baf1217c91aadfc15571a6c0adb81e1b31741a846554491549b487c8efeca2f69da3361fb2984b30031abd0273c802077ba3c15844844b3bc44705e99d65f08da4a27af467295a1c140cd730a6056d753659b345aea87641a00b604a972bb60f248827e14fe340982c2a3d2a414f4fa882b7397314fd152b12b64156a3b7d490dfc5e08b313e199126984a0c7625da36a2f5ac20933e7fe039b476b781db4201523d1c66815fa5b2595aa80f6c844c3852c889e516e0d619538b2a8c789e64b94ee9cc015bb0a8f1684710b5ac63adee7166ce3cdbaa08d9f72fd7f8706dddc7d1432c463d72899e3d8f2bb10d3934e1b7db5d7279d26e441d090cbf1945453d7fd105774e38b0401e7489d7b39b8336d226a4b5c28b44496f8f57ee076fb1fe170a11a2b26f56e4d5150917e81550b3586ec8fa5be9edc1ed1e0c20832a038e0a2b2b5a68bc0f4d256230f961ba8cee1e19e650ccc0db264feaf85009e672ad5e39ed267ea5af728c06ea65fe739f8982c82662581e0fa22e97d17884202a437f6fedfab6d6604e0f1bc34a3b8115a102add579409e32b119c213d636ee9ae592a478b4a79755be49e136fce054584bb8cafcce805957dd701a935f8a83f6dd588bf81464ae920c945fe75d644a7f687773b78865e1396297011a4cf3366e24884ff53fbc992367c973c7171b0fa93c7effcd48d80abbd96523c1273254bf003c84fc1854321e2c07ed16f3cc9ce81a92d9bc3b7574ae3061dea150fdb9548937b7cd26ba025fffe81ab14d79c506c506d6a7022d9d1ca2a035d03881d6182bf981ddbe0ae954a26b0b7c9bbe3aab916f4987ba5b31db05ebb1be585c051ad3aa640c2b4190d647f0cf309d1a2f82d4160c240000b6809140c29c8ffe90df15f7f0f37d0f64f9585a79f5046d0efa2537da052477dc1b1d2bbf01d30e41e7464a6d804a8ac26395a6e33d205b4247c90df42bcd0c3ea57d9e8f83dc61cefa34455e5e8b7c6efa1c657b52653bb73bf29968a615d89471f65f8f47d7ae19a8d601ea313ce1209f1d3a97f803f70be33fbcdf93e9fc60a7cf0a1d3e035aae84392acc4c19113f5b96fa2dc533883fb7161d262231880d5a0cea44ad23d47c3f24d3c5d9e0c319a6b63ad735e0e19cf9506c265ec4a7584143fca07a1603f76d518bf3f995a35469443f2ab1db7f35d92f560b97d62b12f85951dd18f5c525665098ff759544b86981779a9f64ee48567e56336ec69a729c9f4becf3cce8280ce96ac4acf9adff1cc39c70efd2836d304d852817e4a469c48f291f4493e4bcaaf1c16a58e1fd01dd0c73a4683bd0cc39d8032b24bbef1726162d93ef736b9c7218bcf1fad84113ec981927fbfc85d7f886967c3f89bb37c828e7c66fd696f5352a5312bab97a3cfc6aeb964e5e02713366b8bea8a2c361b889b12058407671265cb20e3d2a3de08c7fb82a64cc867d5c7cc6ee2300080ff4eb9ee307159674661af6f43fbfd1a11bf98e7fb82eaa2c88c8b25c89523574ad21516a4edaac3f1a17b53cd5cb97a0a0285d55235e11affe7087d6ed5a4fea2ff97da156e3d30e0c070ab04cb49be130c413d5f7ed3fd46baa3f67d2d52b679066e7a6408ed1dbff7d5091b2a5fbecea9ec813bfb1095c5f67769af78fb892694ee2717b776cc8d67a5b4401d08dbf68dc7038c8cab7535e158ad3f7d49087f37af10094c9dddfdd4d5014c51327f4b3c4a687c8135657b0e6e88f5e58080b360808c8fd4c586455478d1ee5f7fe8fa18e52e6b4c17f9513488cc6880f3c7a106f2a43ac6c6ce72d96e8f136269b2875667ca0b94b815771e4129b8d955fe1b98734daa396f4053e40e03484d7efe356865ff12d04ce499343a443c3892f1b2411224bf0637c9ea58e5788e905f3097a05b432bbf3bdbe6db11922dd4274a5e3033f8f9abf45cbb37e74a6aa2daa6e831fef41859fb2598db3ab9b82adcbc42e061b4dd5abe05991d069589169b7b466864bba1c69a335be7e94606a9414cdc4e5a162ad73ba6a5048b12e7ecb8ba288885f67c428b8171d03f6b517459f351b3f9c6a9a3d902a95b23594002a1135f3c681aeb29d661e6921c3ce0c42c858379e0fe3b3abb153d48550cf8cbb53e84a966ed57c6a15bb4001c228e82a660e7c72e6e81746103052a4b80c240964fed334c3d6cb3e8bd5dcb7d99f737edfe695ebfd85dd7548bdb304a008ec009b074af8a9358289469813befd8ed133f119247d122419e901e0d2dfd17243a53ab4acfbb43fa0c3b00206a86dd956e8b06bc2c6ab645dbc6574df562c9dec74b4c405778507ca0647d6f0b62acf398c4dd341b68e0afdf02a37c865f7a412d493a513fafd9796702c56e7cc3306d90c7aa875bde572b452a9fecdd4740a3b4d26e77380b583f76cebddb4289f36d7a0abf036ca5879930f7d931d4d72d681827a04974b027776fd6b70c8ee2b71c27f2e82bf28e671809723e69d7a492026d52825a457b2ca3f8327c1914638743ee535b2caf57acc38895a04ea251f3683bfaf67dab7e857565460f31e62f89583cb65537c6739d24114e9ce90755cc04f897bd94358500a05bbe8e0a6d654bf14e9323df64ac228164eccfcaed560a262f0754ed57434de8ede37bdfec3927fe149151006ad4335f9a6d7c4b12fcec16cdf06eb3cf8ca180d0c4165b34452fc68e1168f7144bea516a5f19005417f0d279bbe8ccdf3c066b74846d83eb0819a57bb385d9ed069dac937403c47a312ce65251538910ff4af0486b08a82dbd7ab51125d06d1416cc5c247c1187c6f1cecc6b89bdc25fd05bb57451b50fa7dc7ca3da071abfb6c1f840f2f9b51641fdbb91de2c8030477fc96a54f56bdddbf4609c302e7171a92de86a1a144728a0f9259691c22b7254d758b19cc762cfef307a59eeaa08e1297befad56757893c578aee568b2b24ad2e181f84e733a887e3db9bd9f06ddf20bbafb6c23ea8280e2c6a3174ac35fa0a35e2b12ff50ec8fa7a0d4edb9dc44824fd59654fd93924ce1c634d1a14f175dbd5a81d726ce30696598b0bb22c241a473c68d42f3f24e391bf8548fb11f514971a4246915064a7def7f84bb73dd8668d99b879dc627d185964b9bf749a604dfc15a9360f7cae17d89c614fcf19a70b9816ca5216914c342f0f66ee134261e016760222a7f5db8329ad6f882e151a2d07567d9606f60a6e1d912245d1640d22ee2677ac3ba68057cf842d3d284636a807e8ec6722fe0805b4fd82bd1638d367aa78ac080bd489476b0e28a289d460dbaafce55df0661e70825439a3d95acf976cd5d84a632b2abac7790bd4284d13c473da57bf8c1fe4a8e64a9c989d8804543f149a3edd52dd8a852cc4c2989e3e2f0225ce3916eb4b40d31ab30b9dff9fd3c681398b39b8c46ff6023fcf520faf3899ce43631dafe7e0ae18d06e007d0a9980ac1c51018c38d79d33c646ba6d7315224de83c92e58aaadea62da1926b620d8f3ef0dace26d48f327b6263124542432e04a7c5c74f4a8520e0ceffc867212adbd90212db33fa2c61b2672501897fbabec30e8ec340ff342a5f07b65fb13e129a6fa34d18e1571e13da3025f118925864df2b2d6a9ba410c64069cec4b8c193070416ff29b0fedfb61fe5a10eae7371aa96bd1d80da4fa3761d00cedd2056025440886f5d437d55d7cecf6da994912447457d7d520166904af1cd0d20685fe140078b9792b2bb204ff8d174cc67d0d661a3c7cbf64d2a7b4a8ef5d9f7f49fe7a6e03e5b7a51eeab69b9007433bfa5151793f6404a8518587cf662f0a7047ecb647b64307795e0fab0ace9ba0a2d3e652505f43c6cbbbf4be8145d43453b434c74ee2db3275ccd4de7e995f96186a8e9196e29c49d97c8babc03538873a0e521d7daae4fc119f826ea076d53471043fc82ba8a1158f47a967c05cfcac044c3a20a50659a5cd6e06c4a04ef0813e2c55df8726b0ecdb49d5b1c0eae0ce5dd5196771599e20813fd49ea3df64d4a07d800928e44cc5fe684e81b77d6e319454cdbeb4a1bd89b1d63de8c789f38ee5e6cb8eeaf9233b9059f7cbaaeeba726fc488280a15dc9af6a150b892cef27ec60a4de83c27a43390aa4cb8445671748c80b21979c1135230b379f8bcb1a4c19efbbf08fd62b13296d1c589b04ed912f39e698416bcb539c90244ce8622984c635dd65e3f6b145fe86fb176f4f5186abd7d478bc564d70bc87658818eddd7b8c23b7e58b33d77f260acdb1cbda559605d4adfd19da0fdc8bb918360893dd8f4b9f647db19f5f9256e59f3599a10535b6c3f1048c3c927f45ff48c35c7843ab8f1695f2acb0091ec222450a6240f1f5fb77fc117fb3fa7ffd4372fccbeb9107c9e92dadac7bc7deffa229192af35e23ae865d950a363463a41f4e560c99a3e9872b2b62b1e3e7b586e4dd41aaa1ed4b21ac3f5803b60553ffb3e775cd5b2f0827f08cfe0cdf9ac769ff2dd684c3d985b2791d7bdd42e1b4087764d094f6d5f35c89258ec8e90c498ac2b42a12b276bfccc86294626f841deb97e2d6c42e082a98c8c338106a335bdf58f2b86e6c30b6eba35db22e9f272cc1c31834c6c6518582c53acea12ab9984424b340f7c644aaf6682b19903ceea42b892abe72f420702d62a6b1fff1f1f6ad0c90ec47505dceb88e3660e7ce85d06473aab6947023f777abd410e833e5eb3725277f3dae102274549424c92230b5085023784e6854b29890490f24f51c719ce43dc57f6c0d99cd142eadceec094f05eeb092b330f8559f31b80147303e23f914301b11d03db6f2e9e65f2c9b651271186015372667ff99f861ebabb128bcbded73606591f2f8d79b0be40672e00944632ef85980e959e10afe875925dcbc6acaa16df373d071be83ed2ec39e1969bc24f396ddcd9c4b3260c28965910e5a06ff19dccfdf23b0b461be13945378d4d9e8d3693fcdeff801beaee2fdadd7f226326fdd92e9c11a136f7de161b5c3e8de885438ad71eb33666784483c410be07313e3fd8d6ce6a07aa15569b2560c4845b0292a0904c9a15051f5036b33b02baf3bef54747fac9d9f596bc955588f634e1634e63fc202848c76c373aed11fa1cede4a9c07dcc4194244584a7ac5f6482c3b38ec317c35ff30021a3256db396982e0ea385645c8c75ed45e8b0b98e353ca137768f07836201c271ca558b61062cb78306f19f90913f9dd11fb474df902d59bc09f60c5d40a9892f207dc80abcad60f5ecc15ad53920b253b395dc64bfe65ba29733b471fcbbafb092734679504d7f97a4f7caa7425ef5343b3fc56751b89a9ba7511f0b28d90b8cd4681f85342c061174b53583dcce1e4227126326804803f67e0ff54ca832b4a80ba90a5df1673975c4859be0899797e22ebece7ee4ca8ca899c755ad9e762d608134c3c629a4741d3fab7901a8e8c76bffabf4f7e429e65d24a4f4958d95ae87b58109be2b3e5f3e54ec35de2f2188ae1e8a4e65c2d094c4a63a4e30e266333b8c94b71159d0ee5c1d6b0a43738bb69a3ebf8dc51cebd27679707733bf17e56d572b39492cb9e30bb85013afb129dd08a018919655a8ff1fd0abaf44c06b8bd8d04e8e73fded1674cca22cb3577ad3850cbb2e88999b5765279d9d41d11f80f7bfff5201f9071c9be7dd4f85f9d2456fcbbfd5814116789c6e329ab384e6aacb37223d319490cb032a4d1afa042e1ca24561eab4122314bdcdb67dba6a4abe342eda754a50c574d1e6164db4bf79dafc3f17740a6ee95336e7b4f5c39786de4ea7a66453167303418658c9a24da668cfab35579d82db3226c65d91df8d52fade69b35203c6f35adff6cfa008706114c74d644a7d714631b6d1c37c2cf276401116ed79ae5ba07d0ba2de51025133104e9be1f77ee2e7b03fa28449795fe7bdd68fd0c82946dd1d9b32a4fa67756d6dabe96dd9a03d87f8fc14e3ebb94a2b354deeeadf497c9c648d03373338c9b4d23a6d36807175f6f27e8513d5c5fbf8effe2d032e0b489cc2b5b50141df6ef61b32f747ad190e9e9e43b459b2e0dd399f102b0f3b6aa29e335e0d835fd3e10140c4b00edb3b34f1f3764719e1b1fd597b93f27df06a7afd94b46fea77c34ccc05b038aec22b06b8ee8ce5fa11f4352b21d44a30fc28d54daaacee3843f99bda267a7e66cd6e9d7a502e3f9b8c3f4103de595445784d9059ac54023cc59843d2f6e8f408863a083d497734ae5a45cb00632a9f1aa02cb6d31d2915d20ea0a6a022c46969d8f73157129cdc0036dbee947e64e95e6f45e1d0bcc668da1c569b36cf1b8f0db2b4c90d90fc7d7ffa23a39b9173b28bd349fd42d6e28fb1ca8852ec6a90dbc91fc265478e7d42779ab329fe92b9769059bdfdface8c0e5742d6b3672d9181e96c794ceb23f31cc80571924afe674b3674114229d4e22ec73688c59794117a76f80f96d460871538594b50585365603ea9dc46624799de3da9115d13c30920eb184fdd77925792e1b402716a97637faebbf8fd9ad414adf413f74af993e49da3ba3b6f9f21f04dd583c7e93bbcc87557f78a8370046926f47cb837f0bb3b7a03681bda179d25ea3599ec144cac4e6049174e1e4a4520ca6689764299bf73f3bf31a97ad5dd571e60d5a3792b07eced17eb73af96d632896c48586e6e24e04916ac97afb2dee0d0d2c7ccbccdd8402dd9c2b0c46fabb63e5ce7211977069221f8294b418e8235db7dba7e77567483b526264677eb59c75521d4b85a082ae31a5791f0baf3afb8327962afcdf8e36c36789b74fb58f126175ee3010bf864d5ed4509890723f0d7003c3e62f69d9e672532703655d1e62f92821f1efc220514c6526acc300f3f60e6bad4fa1149d8530ae76114a64a9616275100676ddf6c363ebf05c5e98c18fe814453656b49590b0e67c10b4ea068de980557ca81ba825d79cf5c852fbfe45b88793540b1c58adf862f9e44254c6935e795140aef957a268db4bb6c422c856af3a063b0fc664e4e92cc0fed2c8a363b425834a11d4bf3d17e93009989f8e5fb73b9624b2cd253d6d0076387b6dff9bf5f07431da05b71f7ef80f64e6debee924328f6b0b08f6d35a44ddd81881a57f3142fc05fc0f296962bc192b1483c58618eadb668370dd12fc5be7f2659cb12dcfd1739aacd4bc46fdb8f1a3ef648962e5b71037a3e57c72c3c68104d5531067b45dddfc9154bc9bc866b838ef0ec44c79fe795c5775ab20c6488ae76198e389536293a9c1164e954ee768abe54f359dcb4e317e51978f34e9755507f6588d75b5aeb612913177288d4a96ce9e2af2ec18b450472f727b398e93d153467ea23c583d933c4228b63acd2b3d9bdbad841b4512e4f0d1815ff267b5a2bea5f5baaefbfcfc4347a6f88b466509c0a49ef11d85472c58be3fb6f52fcc884cd6e76a3590f1c9fe5888182751dfb1f436119e213ba24eaecceb47c47d0f98cc56536a5cccf8feac54d593c553cbed907a9d8b04d7b720c4df254db48561b4c326a05b4c40a52147e320814b48b96a79385f4d5d09d0a2c3ef24f4f8013738cb13725dfb7f686c4e33d01b01bebc592c93784db69412afef7dd7c1e577ab8daef3cfb11c0172db5211e4fe3bdb617e9d7bf047e8768c1b352fb04912bdc5c536fe8c583b71b897fd2aca19c43e375463e1278999b3616aa3a42c701ff07968811b24a1c2b6ad401bfd0501b843cd0c27318f2c3d6b43d09e2805fa418a717eb75283678d93fcbd579304c8e8f9f454653f7a6dbb76be88b397dcc98a491af4bbb52c5410a6e4122f92b28b739c541e97f415ba8d9f2b5338cafcb7f6b1b264875b4b71a6360f9b7dcde376ea9b0abc98e582e96c72581e9bcf3ce5977d19dda9fbb42a0f6686473f2d9789f3f741f431ed702a09a0fea7c82f6b620065755cfc4a79c8c4d1d9046869e4ffcdd463c6cdb5f0acf838953350c9b999a798b3b9b1f8dba12a0129a6dd93664dae34c514bfdbfb4759362043a736f61e41951d7205bceedbf99f187e04cbf65a8d2294a8f89e12b21fe3a0fa1a407df06126a173a9929be809efc29bb98b4b07bf45fd6c0354d4c2f5a883e065783f413e7b9b14ad836ba63b42a8ad59754871d8b00fe1293f2d540987f9672d9bf7ee710feab44a569c17ace930e1ce8bcfd71b3e7e3d3dc117c8ff0a0daea67894d2a6bfe7c96c5a851296cefc3a39f2a052ae6c45e274712fc25a7e37c594740b914f5faf0dd57d6401a7519cc257cb686c8281cf590dde450bac03df6813a73b52a3c27394be7a749f4226e8da3a96bb2340fb5d9ecbba94cac07553a1eb495034d4f64cfe51bc4a94b2806230a0a4b26f877abe6594b84e906dd17716db22646c7f336b860d5f19e81416ac45c5d37b3efcd1605633097b3e243426ff7258c805183c64ce1310be2f629e688ff8a7d75d29c4ec4ca5628137f7c056ac22edcc653fc88b1e549fb419837cbdc10e888b4323466e51aecb6a62492a97a8963296623813ca8220c7af586627ecc31c534b1f751db2a4cba02ee7cbe11b1a84047ed346467051fc937d08a418bf24b19006da011a008206312c0aea8a3259e60191ea660531e232c1302fdc05d8b77e4936b6bc2d0da66f35d6011db53d77084dfb20388f9891d1099678bb5edf4d885caa7376a154ed385a59be92c2fdb9b6b07c8c74316cbf16c8d2ccfb537184446ac676cb55101a4e3965e443bc00ca7c346b5a6010b84fa17b73fdb33d6bd20b1c7ca4f75bf9b0745c5498320611fd285844c3cc563614e55f7cb51df10654991be2542145b2956acef74b9bc68e77dd05e9c1f957cdaa24af12fd34f7f6bd9c2feff0820a7ca4b0424524d238fd46e44890d8b8862a992106c614242993979b7186b433672b23ac7f28353c1f89a3765d855859ebbd4bf0f011e3332c5598d9347dc4f03fbca67cdd7d208cac04634160ab764e7bb30c3ea0b63c9416b2a1722c65e8a4506587bbd7cf69a381e408d920968760eb4e746a0e53a8af7e74b9eecad9bbe7e5c0bc98327b56f53028a9f7bfe66be9a688ef1e599d0c33b2ef29a5a48a4e1a05e104d4086d57241625f01f74f44dbf7b12328daf9fa1571d029959a0e0ee90975e485411c5b387328a648f7fa373e4d09e8837f788f2591f934f208164f4fb1a85b22f40cf00ff6317f0d1570af14888a1cd52b3d2068ed199469ba6be349a9db9a63fb47e9fc6bb8fbdec41889f7873ec0cbb950e497c26e06d19b9841d1a9dafb0fbafa141d16575deb009f4cf607067e820ceb0742dc7a5571dbc02a907c9a350350205f09c5a9056e4f6b5353300d397f4d5df7f02310ab97aa9473337654c8ea61fae1e6393214e0064cdf63590ab7b27d0bf0d4fb7aaf508a255feffa497fac078750486a2d3a38a149e8fc61faa04792bc34ced07c90111fe859c29f36b4de0351931c04a8bf9a98e0de816aeaf8ee19f228c26e4dbb5524a12019f06d908ce9be64a74a04f9686603f6343892c29c44cffd38872cd1a755104f12945ea4cac9b7c1b97643a8b591db9d0a67e341aecbf2ce8a64859d3c3f9d6774907c5c2b60f8bd408b859eb6069ae060f153ffcc81346628503014213c378553dcbe61cb1e9234791a61219d210ee82134951eebb95f749f5a675a3b51357f40c82d504cc6d93f4329ed9b5de8acaf9577a2bd85823c175e7a5b7405f15d228ddc31e09c009ab1a358ab86504b71d513f17ce9799a34d31d15e59b62406d81af604f7a7dda66d96c2e26a18ed8739db9beb8b108ca9be5a7009099cf66629d288122c4cbe17c2bf0651eea6f8109f6e2109205a36ad84cfe6dc99bb754693341a6ad2ee2ac4dfeabb5a435dbda737c9c7ed1a1c21ddd05c6d399bd244f270cc054a275e3a2c79f8b4bd354853180c2b4fc2d31326da200d453ddf15082ebc9801aad56970d957ff421519005578e5cc558d5fd8dedcc2b9455615d2098a7b122280e8193e3baa9344b32f0e7b67a3399c0d4fad111109b8580cfc6ee1e935f1071600694c8a7d881a83e177fadbd9ebdca2ecc183826d894f8bb5f4ebf264bcfcff03a92175a5ff9b7eb734ec8175bf9578a695aa0ac12b630645ab645fd78d88b47e4a448823768a220daf75fa437396f87bee0c4949dd1bc9ff025c1ba2efb0eb56f8a8d5452f6ca129d1744f90248ffc306e3de0c98a5056e8a2572928bc308ca7af09641d24f33e1abb9902e64f7c0d85e5173abe19ad708c4ab36d5f44536d20fe18e3a996db5cb48f1e145134295aa4070be9f94e9882642fdf9c1874ed5f468de5738f2c3c39e063ae8d39f420e823938821ae2a85ace3dbdb962a5d3ac8d73c5ece4cb5d7a88cdc422e9b7a74eeae31ba4aa269df8fd7fdfa2915dde37810c6eaed9d0e43afedc45000b19121594bb8c24ea41ce28f44cfefe03bf869def861fb631e30790cb31ee1d4f409864441f624fbeb6b0e1aeadde8a354d7288397f3d76fce6293351e5e7cdbdfdd46ef3eb078ca9bbb0e6a247c5b2706c8ee853235b4d84d808b778f1592a0c740acfd043abe34bdbb62278a86e7c99051011347361795caeebe90193d2c6c343daa2f449cc5a489d7d87d7abe15633671636911a6e2a5a766237404d75b90acd5d3e83cf5ee3ed58924a96d956f836c64eb87c5a1b8d71a68b58a93cc92e5b1845feb1645a9349b4a5d11d203a653ba409df6966ba2c2180e0ff3322aed9d74899dc0bcb68ba11f4e32de9db26a338b1643bac8b2e0b551997703ac2ba46854e83e7bd8103b9530f0476cb89b8b4ef47c074761f840cf1495e5c5c4f2bf2bfdfe450f70358161fd0fc0ddc401edf06683f7132ef612c36db7c3f38bf192ba6777d56d431900980d322d08a7705e90f189d456a1421e14f5ec874692af6bccad2693e8b4d7e5f2e304ffdbe91ec0799a635f78ea1279540b496b4c34fe7473d73e8b47c298a4bff8b6acb23e7f90260af37db3a9ae8d9a4710288cfd69601c0f832a6b8f3c4677ae2d2fa42c53217c9edef211e7bea52e9be9cdcc420438d532b8eb4f210feca083e3cea878b170c452ff7c76ff6d9d0e0ef13c5875e22e15ae18f53d47f2786e10dfd8e0d9ba1718ce09624b98c91856c50192c4350b0e4ad03de80c157a6ef1e801993282830112fe75d1de1cbb7cc9e13665331f38b3ee729d585048ca775bb47cdaf35ec720162cd88cb126b8c4c1c7ebd74d833eb79ed280372a654937a959e86af48a8181823ed2212ad1bfeecc5e21bb402de4cdb485cc14fbfc1859ae35cd01c4e30fab2d7a7c58b24a952705e2f358019014cac9f0995c4534a382638916bc8045bb1d288133e2312b844483f91b71c9d76b696aab27ef0dcee713a535f9f4fcf9f697fd8dc647f6a3b3369b33a82190773a4e5a033c4b7212df52bb2eaad0aedddd427b5b96753d0b7377c76eae6256ffcf2dfea5285b542b3199588d4b09f2dfa1b0d050e4555eb7d19b0d447eaf2ffe776827b3e1c498c098d985e6f537ff2610f2930c4b58fba5c9fc9dfa13c8ff0a3da412c0bdfdd0ed866558c7c90f4c3870f4cde6755048af1dcba529741f9696de651fce7ad1e4f4287000339de883ac44849ae010f6ce08bcc79b4d11ae6b3ec2305ffabd50f62b96f637d77bcbd57ab5230f1106df810f2c1dcb082e19a0f1cb4aaf85344bcfde351b07cb2a08d5a736fc91fe5dfd7a6e28c177fc8855afb1f75d9f75fc22df0147a8ce37b5be96e8156018a7bccb4138d790380f7db0ebaa0096a22a722af657567078413a015368b70b695aa2826cd5eb4d87106bc82924016469648556f377dbc7732aef5ebcbb45536e897d04752dc0e6979f898dfb0dd80aad1efe5bab81c8da1aea938a04a5baea0a9c4976bd05d8e28f804cb36406c9e9a055c8334174a4e83163dd2bbedf4cf986c8b0daf17db6031e7cdf293e11fa67669c7778650564d63189ac508b1e5facaaa1b153a5b42cf4fc64839a656d285d440a07e717790c4fa3e8cdecd36657ab5721e7233626c68040f79230e671763ae1f5f9cd02bf6bcf0318e04f735988e6813c1aa080477052b60496818de1fe93b1da610700a5d4fcfc1e37e2758700a144bacc16c4649ff0ebff6f455f7a5d931072779cfb835d1f17e6961357e4efa9f3737f3f96e79bcff96444cf828ea2345fc1902810da92fdf2bd6ea44326299eab5670320090d3d86a7df3ec3f9f6b26cc463ff77274afe4ded6928a5cb56114caf3865ecbb0637316ee54ddcc1e6472ac1bed23c700911b1f26ac8127bd131b631b06e356a1e549836a184b0993b40546125b12143c6c8046ac62d8b76c6b42427920343b2d12b8e29df2d6ae54e73e481024a125a05f23774cdf3d9151cbcbb926501a2120f31b036233c75621837efe6ef7752c5224d39dd473c0f3d079800714dbda29bba609d03d3496da97043e3f0daac6b50693094ba6a029fe6bf91ff57f1876e3ca176fccdee85842b1ddebf4b4d8eed5214ed8bf853724cc0a5c885bebafe80d95bf9bd0752d5899a9eb88e4092bf301eb5c85be481f8a05085f7a480ed54363286ca9877a577694292162159ff29b3318d3b1fba38b4c9338e42e3a6caa6940b0e98df74f9dfd47d1582485a957dad77fd4bd31e359714a779dd228a08c3b42cf1d7f00fc9813dc35e368beb72ae20d07b38b6e368b09a69f28ea3a0d563ee345ea55caaf12942e48ebb9f6c165d620fddf17679f65feb43c00f34c7d76b07b4401e63a2a16a8876251fda3485bbe896c4f59436c010a5a8db4d68084be5e7640aaaca17562c7760186bdad67123c00b1a2fd020a21b8bfc578a9c7e6d32821a63ee1b7bbedc473408a8d8b4ad046074664e234a5028c0b02ee6f0b23cb8461a9941aef82147aadfca74fe6182a24ebbbaf03f6a38b32a0a02ade0f37cf141644ce12bb67566fbb41bee0787f75e5dba4a79bad5af92de526c0c4fb54e568c8fd6533494aa55adb1d07e1714bc60120383442c89f4882252ba38a16ae88ac46cb1277f2f8cb67a1c44c0d9573d4cea5a9488d127ea005ee56f6ced254bc25b85d711c47e6a795641d08e3acfd669e89e0fd417f4a6c3dda260a61ba493cf616ffb3d6d927c923ab51597f99bcf772cced34ffe3fd5fca2afb57e619dcc11ca8aeeecc874ba7ab722350d6d37d03586a13db84beb7c187e0c3be7460c2df0b86a54e0787ad4c75bded186dada4f1dcdffd7c1ea0d751115ca935e32798da055b0c9dc0737375d2c783ea06689d3a1e3da7ef0ee6387e540578cbceab42fd4270aaac520f89a70db8a489440ebe91a92ff9815ff7775f347154d23a3aba003ecc8c6527047142a0bbe27be9e33960c768a0703fc3048ec96dbbbce170348810bdb818aebf4016b686d675a72ccd1eb82fbc1f2ea7beccb06525cf7edf1f3a8225d9c92bddfc198658de959d09d2da0d090f15978cf2bb070dabbe3efcc6f214da79f32f8ad2d46cc898f09ad6d080c9f8507ff62627f45cc523b9781234bd3bd13b8ca57b0864a03beb26c1d2529b5621e53a79d4ec390eddaf392166af14e7d38fb9fd9f23794f704cf6355c80c741b0bbcb49683702eb98eb3763c23a3899390231fb480cbd60e3d2fcc979ae36d7460bd53b223231a0a25a14bcdedb1e6422be01cec0dfc8cf3e3eb227da5f1d5de224f5eda4c46a332e6cf90e60802de7ba30023bb1525d2417601bb79beeaa8e8986c1cfe6409bb0b7de1064d77dbc9c8e1779d3011d249ac6c8c046dafffcfbf941276b1a5a442617c07798cb8c6de60f44ed704a356870c70f0eaddfa77a65e0b148ce68ef04ed585419fd1e7461afe1f00cd00e1e7ca6c8cf0114e1e3a19e61b3d00e68c57a10c00d819c90bb1bc9345e91992592d40bd77a0ecc8cf1cbb8cd4e697c2ec27695cc38b1eb812c3adcbf34d297449be9f9cc75ac10c39d15ae83f33308474c7d229113e987ce7bb5c040adbe366fb45012ac18308c5d132d485ded5e48c228fe4d411ef1a9dd0337456e9b43c4680b4677f209163e59ecb1e4ba41cf8de30b47307d84b24eb1492a4aa5de1ba9fcae2c1c256fd931d90c43300624b1cf2c1a7c2ed784f148db99a7730cb813b856a0dc06474bdaeba08f8643f716e411c6bf400d97d092dd2eb36449bc7dd4658c3f5eec4fa5253d1203179fe06ea0fcdb5214cdef34b89152b032979b3b742b5a9b607f174b57afde99c5b3eb9e785a2a80192de781e29fc66b95e80d8084bb0574fae9b96e56e41e24eea911abe4697135cce2c6affce445899db9fe0b7806464831e6402a90ef18d01c980d3ed4125f892deadb597eec043c8ca0b98e6865b0f21a4fef38e156831d1207ccab9b1ba905f54d1cfd786b2c82de8f909b97e3d2af750d13bb688aa9963f6095f3d3aa922cc0792f895602927f8972fa42fff2e92bf92d9b9e1f40879327b3e87d627fb192e5ea573b14c909c7401cf563d7ca85b85bda78a4a95fcd3769148f04af2f398d93932afba3d477a7cc418f1c7c9d1ff4e94063f749ab6670ed6f48fc4a52add6f42999858858de219ec88a3016567a729a665edea059846cec3769e383db33df9b8230bff2ebb57f67c66375e1b5f2d600cb1dfe426ec8157ce77f0c4dbe91ca1b17793e5d48c0b7cb091dea8a732f1e3b5719686f0e08273a8724b72b3621d45b2d3b1837bf0171ef6cf46d2f25925243f17009b9a4db37862e5cfbd2dbe9cc376a2dcec85a17e4f3bbddac921f9a634e25d5c35782a30a64a24888e595e11e1069d06e33fbeeb1c82a04316c6304add2e1e78de52d56234f97213c3f8205033c7357bab57e5e0414521133f1366439894ca2d9f8995f91dd4e0411532c13dd50f9c5be8613f93681b65602088e3ce946aff57a60c486542ca3eef9efb5cd2d420e1aaa67e3f57502d0a86f0fd7f90e791463c952e6a6b37a03a72b7bf43a7f70f0152f35bbc3a1c2191c44994f1c44d3c5ab6cd1f21386a2af076d45cc8d7c3245060a29291ad814414383bc30dd635b25e19d14dad339ccfa1e09a09d46ec38528875e0477ca666b34b360d011fe7d9b7cc38a0c5ef4215422a65b545376f1a2cafdc7e5341144128f3c59b960acd3f3f7151c755a43b8df305fe567db5275d9055c48ae12855fb65f6d63498cfafbb83d3ac02fa812e100dec2376ac8167f257bd6c7002aae9533d9a82380b3bf0aca361ec69b55f15d0af74a5e3d60e01bca75cab06c6acb870ebe5acb4326b12b0a9f5734758cd7bd45982afe20e6cff947d5a9281004086a641ab092f47e3605128257dcc9cb4ce8f23b51a4546d08ee5ff9bd2d48d65f050e094fd3b061c4f365c117cf8e413c486bd1f1a02bfe8433bc748209cf86adbf67207da81fd057586dbe3bbd317b16f52ce69066f3748812842c29c62524c0c64a29609f402d5c65abae167563e7ef7c281129f56cefdfaf5ca65c8c6a9b3af2bc49e6e07b35e8b9ebf5c7f1e3d7f822af7b2051d5961261d5d219c5f260edb314983c407a10715031e8c397b59d400749e54a04923aabed5eb68f23eccb360819a425821fca25c9baab561a7ff58462939c086e40dc096fd93b1334cb530118f7de2926ffa3df1ab11ce0534c55a6eb3970425f4d38017cfcb089a787a6d794ed396aae63aabc5a6c61a7ee73694dbfb1922bc034c1590a714918d46baf75443c32d3b2c9b365cfde43210688a371cc640df4619fb9e28d082061fca880372d5245500f96c0336e0fc668319212aea8ab5ba3ef2ef1c0bbe04e130fdcdf5731c2dd5f2b23b851e2a2862a4fa3274c8baca9879ca7ff376111e08a035b7da2ee509cd7e5cf2ea9ef5de6499c440c65078d90e58d56e7e2170de78318beac7c4969c369aae1dc71b107d3a3d374b5c01096fd2724d9cbea494964053c6f52d9ac7d48df272967d9b512eb41dfc3398849e0a870852331b42c8056c0c6979e67de1333e81104d3b8d71b805fdbd5d737e8763cf7ae26188f1b7b8d73e939382bba7fe266de6219673b9bffa9da5e110c568637ce538b587ccecd85834fd1f4010885b091de6b573972b66007dd60b2fd91e018d7dcec9e3ab7885ecdd21d811d617e43d9098a4abab0e3f2aaba804c0c10cac4cd364de25ce5a15396418f73b65517772e53dba90272e9dfd9a839ce7d12b6304dc40dc1cb8cd42d82085518b584e74c4f3655b18a5cdf938079a8f461266616b676c6e0eda61867fa9fe444a9fd412463e851e7cc8bf48fe8b76db282cc1e1a76f235f24e25a113bef8942a2540009dc477d37a70f279989447b73cc421c75a7e7896030acf904f8f8655686d60becd89b037d36af5bd969f5d1a5442565c9954701dcf5256b14b1e41b903051a915271a23362ed83a715af85851c46f6163674555a4c0d1156622f80a82c447d37a5574ee46d98e8b146c8c5022dcfbfd5a6b3da352bf123c2bd3d4ac30572038210e6c5b6e825eb6576f285db16005aceec042faffabd869d8d648ac787aadd2c281799d9fd87b6b06785c64863cd973901fc66d68883b4a7540b95a7a66d5273968aef77e23af18c49df9e3380160c76f5c9880f6246febb717d3a796a8a86001117bb344ee5f182c04fd93aa741603e5b889e358752e895efd7f4cee3d4e92fcae404d1c5dfc83543eadea5d35fbdd706d997b5ca696b3a7c47e33622c9c37a59e70dc26472ec8c1b768022930304fd431e48ba14714ffd124ef3a852fa59e3ea5a8d9429c300e919d4e68eeed9eb0c475dea23e50aab8df3b0b5df2fd59e2e5b818e9931e5c419f763ddbe59c01c5a61e4adff7cc0c181d47301720fcae05a4135a4f5b20a1216741aa035c36ce2996bf8a30651bd16d88d2456f5e861779145c3e8b26a1babd3f8e3329bbfd5e20086cd50f20e090056a2459bf2d01e312d0d7ba09cae63366ab78bac8f7a45d4d266169e13acf010dd5723725237ba27901d4551c0c198978e5925f9f5057272ffd49746d693ea5fb9f7ae3d4ef6df4c77bb756ad556a01a2936357580b8666b29e5b4a4825c65cbd7ca454148509cae774556832e031808c38cfcadc72cda4af2bba52c55c95f73c6dac378b3585e2b81a6a31b17ad7c4285026dd929e40b45b1abda01a4b0b4335fb51d2e2057b962a9ff24ae899f7b91ce33c49420c2462750a390daecd2e47348a97fcbf0eba1e832eb0423616366eb56b4da51ae22b91ccc7f6d2fdff79175c492108212564dd576768f7616d23d94eae451d799bed1473d6904d6281ebf1956832b48b7b6a56c23d52196a91d7b85180ba007e4b65a46f461a6f327da2f50edf05395631c9f6363dbf069e8ff9c735419cc6b5eed7279e6d4c5a0f6e60625cc2cdf9971f79e86619ddc46c1dc655b4de5f082afbf0c08c573ff19570aeb44da05ac660dec20fd408c18d951cb79c985809915475f99af0c070ef65f5c88ac1fd689e58742669399dd662bc25cbb92de98a3a70a0357de43301debaa0049708fea100e30e03fd0fb61f63c81d0b56f8d0fc49df70b26b68ad5e1f5b21314e7c1b10b1733a3454323807da6bca0a018fe0d21368cce7e8da44176c06ed7ce140ab6577d49b074ab528b9cac9197d4e092899d8f2fe1bfa4cc0a2ff1b43dd96a7474142461c23be747dce51b62f8e9054939d0fd86843e673857b2b2132de3666aac24ccd3a79cfb2fff533ca1d8e4c8faf14b754a66dd9cfee472f115d11116de93a8f7eed68961e646ec3f4abfd11aaec52b51d8f6773a08dbf665b5a430c77f658a5d0a5e6696c6812ff21a8ca20eb10d849cb7ea96333606772c78f5b51e9a463585c694108fd3a423320b0fd52cb6c9093a40bf2e21562dc9d12cf5fd46192944333a519d812c50e33659f9052f04b55745b0687998c285bdd38c57c724f5e3ef93110a3eaad9bfc5f9a757ceeed43cd5ec559e03b136e1a6740a4bbb0e959fd3801ee304f91c3915edee9a41ecf5f25335a3c21cfc494a499f5606c0b1b0a03caee438cd74598e14427413d27787edc65d4fe06df13f63c9b33fc7a71e4b76ec216df13e33a87ad56a0f3fad60a5fb7df5bacdde9d60c1c674c3fd447f07f29a2fa4fea71a1c7ef29447775d74e55d73481fa6f23dcb56f04944f200b812846410563013c01bcec6fd7b8363aa254de23016ad5db296f45306a0dd12c2de7c9cf130849a5756e6da0a866e58af3a0cfb0b583e1d77e72e93f0fbc05d64f60445f0e6ddfd643b25e0ab07d723066bd1c02c617f3b263bda60842d59d97a3f44746fb40a8cbb5e4c89db51a64070147587091739bdbadc18220f66f3e71e7062aee62ed8f267052014101fc8241e698d5a9e248a463663190db567062147d0b432982d924ec7762943f0b60603e467b285d9dc1ed0c6958a7b2978f8c041e16f1a8acf34fede27e846222e439d6e170275804342025cbb871d0903fc4434d30436609e948dcc350050e471f8bb4ac098d258c5f2e78a9fefa693a7a20e65c5d1d7ea4d07a8b4e02fc08e33897db273d7ecfbcc460ebec9c3ab6e9d92177a2da8455b6ef36f9f9d9055e0a5ca3ea0077a557f38e6ff6b990ba6635b1a7261296ad268bdb00f38c3ad2e2d44cf5ca036525761388834a4a7a5400f8da3fec719e7d062630298685727934b68564b884b1c85dbcb6fd0fb40d132332b08c8f481e32c2b94f32d22a9afbdd79a40ad70ef05c1ed7afea9624fab80fdb278d9063f4fb3a33879c046eb236abb2d16be0cc4a6d3e8807254753c9b35ea7f56bbd1ac1a071dc7c5a3377d01cdba1af4dcce3ae1fbc06070c67fdae902ac24dbba9bc61d065c4f2787a7aba7d3df4f2476c7306d45c1b469b4be13605f63e20dbb854f4a4d3dbce5a8975bacc783cb152aba709da3baac99af8c349c914b2862922200ba3bb09ceb31cfd23a34460489b80b3ea5802904cfb9e5cc58a08c6bd62ff549bf95982f21f13397aa375a921f2bded148d9cca8af82686b0d06438e5a0b031c742f879e8d18f2a79e67c76c795eb37dea6f63631f964ae271b12f5d06cfb42f9762805c83058441f1c808dfd4609cef5da57312d9874248850e3080f94b8cd783d0a1dfb3bfbe922cec3bda5f15dda264b3b20f9e859fba96dede3de97fcaf6b45c9de94544c2c4ff05b8177e550b9127a9e5264c2cf412a025509f3a26ff8128c2d300df6d24d5347e9b2ba53652d8e170e8968af3082a16d3c80588c96b1fe18adda9df2aaa3f8798c7ed2705f958fea38df587cd158a5b04c5bfbba5671a057cc2afa33c0900481f376a4eb1a288ff62363339481c445368ee32d3365019b4c749b5ad9fc52ade8704f446a6f0738df08447e67c44e68ab51d7f9df071ba10bb939f65dbeff569a3044544b7b3c7a3e7aea96ff4aa3665717d25f8e259247e01850aaf6eae9e7269571507973ad1d7cea85a1dec46aa4b4fc72269791c255ab4db4363c6a241eb4ebe4e66321d1507b75a9a20e3bed58c0f57d367e893652decb77322da5f27e4d81ec30b41a87e786309965580d6e727d43597389ae06ad8d163dfcbbed0f16359a8a2f510794392319ae5bdd66b2f12739510fa9e1170fb0b63817c384f1aab1306b816e2ba1027d63364a7ca373208be6b1bb556a7fde47b0d2a9450306281ca9c7b7de6398080673d1558556b85f300383bc95ea07c993d9d8a890d11300fbbfc2f6a8bcd5164ab3d528c4792dac3d4514f660f10d7ccb120982a2f3c5e0f242533210066038258103410cb776682342eb6dc0cca03ef46c44dde4b2af34528d645a5c5af3071b52915fe9a2fb424f3b9e7ad13c046a38483e27b0df3390c416772fe5ed76e71402e83d6a541d157b1b2a109b3c8b56a8686804180e5b8a3c9986d2a504391c154d1b51be0d3e10c9d25cad04bf16e73d976b9cfc45362321455697e3aadea14baec5065bba3287f1cffd4d63858a697f83bf6df6eb459d891e276c1f1cb83c2df212ac9d91376a7b1d6f6d9126748bd04c0331187336843ce75ed3fcbcfcab591626756d41c6cdb89a009b893e2efb34a9c0cb5faa624e9cc02261bf1e96267c486541aa3fc746bdfe85c25cd2aff46ade831b747dd6787da5e80cbf44776e8254cc6419a5b97853d0055bf5e55d0669a3e70789382b5e9cdeb76be7ef3782c1fad3ad69707252a8d7643640e058879e4922a48e7ef083dadf8e934ba795fde99a1aef4b225894f471726c10e705d8c8d3783bba7a96df71c3a549143aecb49a20b944738838df4686bc53e280fe7d1e566b621e6af9f1b98febfe77990dc56e3bc596c008864653d68d461482b29923e10c8b6e91dc2442eb6bc5390f4fee3a33efe6a54eebdf895c5edb9955df65a3db0a1fe366bf08d13ebd386fd39add2cec5f60b8ee811727d6d38846ceda1cf2d3084e69bb15d0b186c4b808e1b4e007e340c531ef61e84f1eed10173b0aac49013a37ea0a7efb72fddf144caabb2c4ac906f44d85407f96fde77ff0763f2459cded2e6dee35e8dc134da4eb867ebd46a1cc8499d41be8e9489e4d324da6a0fc14c0a11f8f305f3fb9aa383245bda0b70c44f20bacb73d64b565e856bbef645a94cc711e54a05002b7261fa125936782a341a1f4e50ad0f302e803f04aacbd05278c4ebebc656a5088c0cd04650a2e8a9bb5cc6ebb46c6e3a8e93ce413b02d040b53feae761d24ef764229d71a7ce05d9c51c6d446bed230307414b4a2eebd6edc75a8060615349cf2a7d7cf807c0d767d24ef8fc29861389e44caafc81cb68f542282c28f6b6f61e1d740ff98296c253f0a7d91b6ec53a7cf64c7e9bc53c057388029c41382dce8456ee90e82225eb13dd5e608937ae86dbd849824a419a0a46bb32041811fb13abe4490168056adac620e5256b88baa1a0dcf34ed7d57bc3893e03c38019dc28338b44e9ff77ba674a162cc690eb9139a14a1e485601c847c91caa95f88831f38015455b193914fa888a60ea862097578bdbdc57743c5a3ab09d49371d6702b0051a9e6a4b97b0d4be5aa81189b74b63e907e374393aed62c554c12c0b51872cfe6808d63804e3112eb3dc2874d70a41c5bbd6bd513ae953ce01c90e8dd5d049e42408ac0520d493faa84fc0805ed3d1f3937f7adfdf1874b25e1a7cdb722d36d7d56c0a6cba7329a31cbf61eee59cbad20f610e5ad3605e796d6b734e776c6fb1644ad3c4c56391c8879d25f714ae03731bc80a39304bf42e8a35f7b144a840954f8207c04813695c034df32f6f2f7b6480e5c909a7358f36c6b979caba573ef9891d5e37850fd26e8d89591c2cbeb33d2c674389c11b61d61866cdfe091bf4cd49458ad5cbf1c274975750f8a2f1801cfc1ee78f0f3078722130675d7f58418015e68f631b96761986d7d21c423015f2f810b3479e00ec1eceb1770966c44c7d16d096a4e238edf48579dff2f3f2d2f31ac514555f80747fd8aef46f767279705b0e0995ff424c3827c6b083491fc42e503333c7ab06fae3386f02c69a85e3abc768894851ce3b3f6fb4efe908fbb28259c9b1c8af3a4ba66c17e712e2af0188d960c9732b8f9020198e25aa71e07e6823ea988c1b2395d9d0179c2dc92bca11e9c366d324d8fef05b181cd702b505301e4cb21078cba3a5af691b5405e0e95f2689f8770951d2eace74dc913f718b32062f3a372eb68717e0320cac6dad41a6ede360a2a23f844b73606d6f4cb73a51698d042fc3b31a8e72245a6eabb344eb161be2101d0349808c01bbf889df245de769c609f4656a1ec58eb03cf2901c61ea721065f7a785eddd71aed4c2a4fba4cd8086f36a7d55a23a8e9ee26617b218a3e51722e36e4d9735e45538291983b599b20b254e4c7c21d284bffd51e1cb1d381dfcfc93efad1c9711e1922d7e68674468765778b89f8d10419f238ef9fff65138a5448c806941a0e13f24b5673366a164c3fee962abf7e36de547c49a18d287b2c45ed911d7cd62803cf8771dffc31ed10b695be3389aaa1baad9dfe0bcfbee06176e64465ed97e8f471e5c456b8129b1b8f0ee97a21dab90eaec677e5fd6a4f95a00c12a010b4c74c030bfefcfb5fa224cd4b8fdba837db9ae43d6a65d2ff0ba11a0517d0e3ba2e7a50211b846360bc9cbab5da50fe0427f1b880b9fc044ac0886c7b001c8cbb524b312701fbe5805109e723aea335bec294dbf2350551e63ddb7f282dc87ca016e0fd8af89730a4ea865291cd8fbbe01a7eea9e866cf24b8b21619bc4121f1e1afdf44c31f1956e0a7e6b552de8703f5651c834567b2ef0242554cfda83641c71181e5b23834287f93eae7cfee31ce9bc55adc4b9ed074f3861915aa79dd9f3c2a7e047b59212a542aa5ccdb9fc91151577028731cfb5acfb8e7f7fffc63bbedfc328d383f28bceefe195c1cc7e3febe41a8d478240e400e69726f47c2252610176b5cc995551d55cbef71048a175b80f36b66d1246b5220950df4016dcbda066b4706b97dcceb7dd76a27a5d8bc7dd2b874572903b54c8b783f19fdc629c6e62f6ee398f132a7e259016e61f1b601602c3625f60a1720adc0c19e518664bc48a69571d20e57423fca1e747ed865aa17570157d129d750a6a36ae590c4487a2aa14e1fbf7e9109ecb62fc9ea6bcd0d068085378eb8d345485d1f535643e068d2ae03ecc15311fc2f94d1086b66b7045595e2c4b062b44b5301a17cfca32c05f889647d550831179f26152a37061ba639b7ac9466bdfb3f7346f08f6bc8de955d5e2ea6e3fa452fa3ce1515ca1364925272941f41b42e7ed2f4ddb47520b2aa9e889d94b65c636506bcba41c583ed987d69cf39a7ddba3ecfc672eddac82cbffe34e00d8bb71d374c86373eec82efd2aeb0c7072cd077199a0d5eab63d2c39a3d68f519157566da4ed6f0030bd3859ccde7c630fdbf2433f29cbb6e185a1d5f858eec4b0cf49c4c7c8536a6b84dbea7e9a81b66a31f17de9c84b42bffbc8079d783ed7b56d207e1c23ccf11babae379b5e0214d5616ef1289c94e757226a56e1913bd2f968a3910446071b7b1885c673c16d06bece64bf6b20996ab911cc7ec77db835e7d69ea1afcd3961280b0afd233f5ca97ff5b95eb5d58b3ec51a7d6f243abc735854a92f1cdf6ccc537528856b6d5ee297da78e915559aeab79caab2806f352fc40c37a2947d52db834c3bee592d1e1ed8c33d1bc076c411434aca104a84810facab12c92cee1f492d6d3def1bb759f0894875c701b5c09c81243a8c950364bc76a84290ddd1127c3da3e8ad94c621a434ab4e2c4c8a9fcf1251c3a9e16e8aad308175f82e5134e0cf36679ed79825f5ddb02ae9f8312261d265df505c4d2d8f963cd80f021f39e23e74cede2000c2b0841be3fe9c05e0c05577fbe97d4a4efe952edd8e2fa1d13a19b31fafbda85a71ccfcb86de7a29bd936c2ff5c2add7dfd34e212b8fad93ada37b1f4672c8cb108ab4a18df6110d88321d0d021e028deb9b517418d05629ce4c9467cf818617bc9dba726e133dc429492b33ffce37713d54d01fd97104f62c08709587ee4d04caa0514241c6ff74c3431adbdb7c35eaf343462a64016f85125f85945944b12a11d3ee642954ecbfcad29f793b1bb07f7322d50260546c0bf1d1a0a22b29f22c7c6db659de2a0b8fefbdf46cb76c76d48cef84221345116ff4b134b38bc727aec334da7f91a149a3e2b10061317aacb7aa935f46cfef6d24fd7817f8a9b6c756c66243d849bb20fe538bfb6acbf4af2c11a65c7fa2963ea1542369c68fc08b169d550b084c36a25c1f2be5628878b20f204c4026aaa28c57c420850cfe6c6316a534df3c55a63076e12a5c9249a5f718232e5bc40696b660c3f67c0502c41499109b30a42469f5726af8ce2e4fa43e7b0d2144891b36d63ab6871124403236e3682601357628125053f8e66b53e971fdba01ceb474f941c728c194404d950cb5d7c5de44f3125a551eb267babec37383efc0296971112dea99c7a90ac4cf96a2d05d3e269e020f066c39aa08976bc21b7f7243dac31484c1f4fde0b872b6b6db2acd4a014a1c2da2b2c6f31df553aa6303d8792333ffd1fc8f3d106e04ad7354ba691097b06a49e48f84f9dc22cba41e2fd02b1bd6f50ae04a5bc1f3a119d814102ec15a39ee5601c36791d8adee28f8aba98f4bf94e08fe3e8378087cd070d988fcea6697c5f5a57be019ccefa2a5e7bbd76765a965aaf36371a5f3ee19ac9a4d50a2005e9c30a4b131268fd68ca7bf02b7ad914813db48948e58efd3f5272cc7b0479bf83e53c10019df8dd9e0cb8aed5562a3fbebe3819c92762430e4d3b27513e7064e111e5a0f20ee8fcd91f6379ee0c6612efb09146dcb4404bf08cd1ae6800f21233dd71cd305079a395cbadac260c8e163773ba34017e98aa61ffdc1d0e7cb7b5d58c9ce0cc80093a6094abe09c427f48531615fe6a21265260dfb953f95b2615d689fb5f811f17391ecffa7157dfb5db20906e74aeb437d32809740138b0d602ca47df9596b360fcf0f27a4d8b5a76465757ca71629ce187870b16d79337cdf2f7adf69ff7cba7c749fb02c219dac18d0b56b89f95d4e4ab76c4b775882de52393d0e95f1db21d3eeadbfefc68afaf81c1574fe1c1158ba789488d15b85b5feca88e9827b470318f46ce1994fea6e00163938f0a632624d43e529804d9e40c85bb98f9c934c14b4b3a99690023689bef5732d145434d40a54a67ff45b6464010f5599bef96b5290ad8359f29fe8fc54f7fa2cf664ab3fb1a2e1301ce9cf3276592d6b654a134b67b3e18cbdb63cbe6d1e3dea9f6d4b8507551402f8550366d90f4872d775464a29bbae3d407240e5f2cb26ac7b5db3da5fd1035f2b4c0faff8534dd1eca81402fa6e1b366c8d614bcc2d43bcaec4aef2739a31ff0ec5a1ab710f42ac7e0743e001b9169a03871bf94431a556180bdf84080fc75f15253e0f8d969a6f1045e0c0cd1454e8ef45515c39389de630e30d34fe51918f6a894e2caec7c10301d50e96c5c24d019b54c2472a2a820ec47cc0d53789525ff1dc626be5f71b9db8e9bba56cb2994db238330d2379151e23f63a2504e3de888a96818791630303e36563f1549b26b8b8be99f6dc04139447fe21b7119d8dfefffb568108f12762e986097b171b70c33e6b7e174dac02ddcb8212bda81581ec89e01b16bec94986b187ddd05d9ada912a9ffb983799665eea3163c5bf7f8b3e7d31d33127253711020a02405238dd05bb8d24ff99bc2660aa56b473298e57766b86ba757e1e4ef231774bcb196c995e9bceac5efc59b0acc4c79f14b2c191c3bc2ef16375434a4f9173de97a6c1a873d907763339a0a3044f27031193a41228296ecc34e50e19eea1199dab98c86e455898e550cedaa65e1b71f4f47900469620a2af555652b9cea10d55169ff8c8160e138c077bfffb1bcc089c2718bc38c54782ca1d29589340a9f73a737bba72cee435bc2633cded2df875073539ef74e38b5a9bac370e3f5bf50ccff16cdd79e617aed6eb1cbf955e467a4610a4285486a605f156faab2bd9c34ebc2afa82904d586337bbcd6a7d4f86776d72b48668defc119a187ac9000c098b47808004c24863b8ca4885cdd926a606763f76122b20f0f9499fd17a9d62ad2cef6ac177d7f079988119e1033e39d090f7657c9269508ea968fc9ba11c145e0458f3a3e721f3a5f97b955720150815b6681f5f8e148465a0cd4c698271fc31bd9950aba79cdf722b42fc1fba91c24df204ee46e9365fa31a6aef5ac046d9542249de8f477aee8d799b9cb24449d8c8ff4b5de58eae7cf3dfd1ff2f04d47ab5a4183f415395d51023bef1a989db3e65c853fbefc518bc7495e1459cfc74dc0e82f9fbec33d67f06edee36b406016e3d9a3020a686c4cb6977ff26466863f896723d961251da93d847121a976d9d35037f29ae762414026647f54d078287162c56d5b0b384111bd16e0b0e3e84309208ecafd3f47c8e06771934aa194fb82385c9d7d597f55e291e147d8d17177653625a468d2f63d426cd89278480e3190c0bc08a54de3c67abb8fa99fd8d3fdc8b87dfa906a1b171a14556d13fd955b97d641251b6b86ee8139b54f6386c4c8ed2aa33f9af5cd81d85f354df57a1f176fb86f7ec4651d320e35f7145ba82779c44648189ea2edefad874b445d6af93b5f49415c0634f660b7a0c8171fa1bebdeb0b0bfdc090396561ed9777ccc82cabac1f0057c6811fb10b82b4318248592e1afd425c6db0fdcc79b7d7269cb6ac3ab6704c3b4adf007f870cf68ca626171acd8a0e6eacd9ebb40707229ea9332aa49e1036937378ea53f7f5b7b2c6e63c1da57e290db288569f6d08821585f4f05385b9e7efad3476db5837b6759f49b55791406f10151bf6abffffd57595c8e0101a514c6d5fd5390ddec4bab2f058500764757c2b66f212d105cee0667fe0bba7aa08d8a0e2fd9faf5454357e98b71a327e9f22b356ce275743cbcd1335bdee9f067f38d9e3ef03ca8e37bd0a8dd6f24724c8f573e0bab829682e8a50091842db89bfabf379132c4696561e1c9d384df9228eaf274b16509871be32cf8d176cc47216ac00dd409b224b1a3cb5bb5b9d3aacdc5cd57732055c3f3f7101a63198370def98581bc0c6ae5c7c98cc4c66ca11864ebea6c3b2c847d171ac9c37c43372d183a4aa747b978c6cd3da103f69b689cd38a1973a2c92bb727f37969470e0336474b5f9c9f3a424f0f72ba65e51565c17d6846a496994b86ca8ab2a80aa01debacf9f1efb13e903f2fa12ca4a0b684acae5be09bff2c2c966f6a6c1c982a9eb1eaa36c66a114e951c5ee13bf59397934b6cf744ad618e0e21eb134e1248aeef0019ed3c0c8f115e0f9b7e8c87f6dfdabf18e6d5fef70afa23b3a581bb484efc7f75b6d0dda07da81ac997613ce3ce947da8d4d71093deeb132fb1848e2c11e0da93633eb5a0f3a1ad99c0df86b03b308f9a2bead4ae7fa746f3a87bf4170863cde50656366bb3761f85ffb93aa2bc7d3a46f74bb6bd8991e7c78bafbde4c54a79e488f0247c595174af995451ac988c8def6cda38c76ce32e7bebf5a7802a98fce6f75ab2aabe27bdaef33d7ec84766e4df9c2fc79874527b548ac31381e213329e2aac3ee9e21f1d6b51c12b97b6ec6573f4f2e3e76f64a9932668b0c6522d0a8db79d3ce6a5622ed46dfb1cfcd7e149a1329a213c9dd1954830120cfdd4c5a4e91dd59ca55252816ef7acc40396e872feabdfbd7886ba5c913972569cfba5e70ec3cf82f0264369aae4a42441aaf4ce53285a4932922f5ff449676954f8dd688e9c725faeb60b5aa6ae948d0baebe8c83391b77d123622cd6effc68ba53a77cf5bb4e6592b1d84c81c7bff94a7cdb248c3d224474ed849bda51cbb1cd05310805e8a59895ece97504a527560890a37eeaa61ec684026a9dc2b807a305495f82778695cecbcf92094e283680fdc5c363e1c7d9db992102e3df58a9eeda3ca3fbd5d593b02bdad770514536ef9e8ca4a21157723becf0a2d67902d9600b404c0e6e8f356fb444b7281ab5e66894535fabc4802786977eec559add88d3da44296863ecb6e2c799e3339654bd3b914fc8ef5005620169a0fbf184178fefb6106268202f19cf7341151b9bb855d1dd32fbd1b278fdda07aaa11d315f11b21fc851e5db08dc32673f1d16b4a6a740f58e1273041b2ac83e062ec5ec585fa1a784a7f36b6c2a9a183d7e99c71eec0550f48db56aac7d528ee60d7a71add495778f7fede01379ecb945103ccb7574c8d4f89975c9a805e33fe2a24d6ac534c1a2f04cf4e9fb45d44f0945872301c3819fd75c2f5482b59d3c1f82d2abd05b4ff857b30d058e2ca4c62d469a0a2308f39c18af81d3bf418f8a15e6fc326f8d38141761ea5627ee6f5a186a53c2a9a2b70789ec813c992fc098503cd5bf3be5295f0d82212c2a5d8001778471197ff93d2eb3398fb61b841e46917970aad061f33f682bb3c0d842b6d6e386d585a75936e95d9e0054304c20d87be5ce6a82232cb54bb72b29ec3f020239ec71dc92ab992f4ab42dc85e9d02af0775d948b373ffb429eb0180bf6baedf8adb48100bcec03f25d9a46de5688adef7900c6b884215ca3398f0981e4a844961e2b82733e9d5ae3be2659612d56aeff6ae44c3061fd4146b846aa3d7e43b5e6ef7187b30496735d7633035a99c2e599742b7cf4440825e70b1c820cd5ac2dff62f4e94b3560b08a5464640d42a7be6f884576fa7e315242b783281eb3aa5316d839eaef3f53668f2cde022ffc16a207b98317a9f2f422dfe4f567b6dd16098327eef3792f0f1351a5a6dd043ea607e0b2dc8e1d1a6240b15ad7f2543b8e347e6a9ff1b6e3b9924dde4315184f81239c1848ed5484a4b32a4d8bb1dc52c828df7c720383520936c2c7e9291f56dbdc47da36c0be90c4955a3168e607fcae15fbacf09101a6c7693d97c6cb6f7a6f813689a650fed8e12fba5db626c2ed933fd6cc9be3e064694132fd7d5a945509cfb3c0377a8ce0c95b9016500cd842847d73e637e3052b3d7e7fe93799ce8fa19be9af5324eea1358b2027b2951711a6f36de0ffc47f0857d7cdfc3291eb84705dc665f98f4f31fc7692e3b4e2a6ce3df2475b68d19d04704092542438e5293ee846b6c82e899318d9ed2014bd6cc75e6473c258e6259f328613a9f055e2588bf3e9db7bdd89f80763cfa1ae275b10e37c8599111981e0e1242bd9eff8fddc23e743da1d2316ab3f84b6ea513958f035d9ab65d0fd5a094cebbe6a8dd3e7497ed6112a3c0f4e58a87a886a24969ded374a2195ee3809b20388f6e86aec9eecbb6d17a5261f52585f4103c7bb72421792ef4c8b8a1cc24020b8dbaad195cb3d690c26c8f2dab558392f6ff4c80aa9207a18b5e94557d1533906b7dfd75ec0c165f63b63c71782a88dca50406cf3e4fc280c1b88d474aec218a8b8375c68802bbdacfe99f25d5e477a53a742c60bb4d865f7d904d0fc213eaa928f1e21b965c53c72c1bb53f9593a8052959b157a7cf07e2e9dd63cba458d09513acfbf2666c7e2e6cf22b59406db97e6e3a556a79c62f32940b6a48794c35993e2465149f2ff782d12ea50369144ced01b03f5675701101115cb6f31b33f9e5911ab146b57fd057b3a3d62740805ef37cfb51f2c0d0de46ad2ad9e15497dae8d8a51e38cb95d71af773be08a1974dbc98e3f3bafac8eecdbba714ae42824a16cb213e7f3486e657cb2a344a8b74bd3456f4bc77562c8740750db4801d8824326cacd96b8ad596258023d94cc97b89298375a735250f9b4f0cd017fb1d4231361d050e5ea91fa1f8e5881a2406641635f535a6b39cf8046f64c1494f2fa6d65f5c6051c2b04da2b8d4cf51c3ab7033dd660e2b4324d46a59cd48e387a33fb62810752c78b07a656aa0bbf01ce36d778cd5d036e709e6686e721351b798b94956dacccf4b3b75591412ba22b3af5ee27287b3f891c0cbc71b80d3762267137bda6ac46efda4c506fc97ebf3e6e4b52e98a61f23e5f5ffdc62f18c42f0f0b8968bfe7009489741a7f5ac26dc591e2afe8964561020da6733526a4d54620f0bde53bf12b708113a16333344de4d68733aceb4331afbd039d62a84967e9a456bd4ac5f7462b5a65f4bc0fb86802d34c8096be8369d6a373602f86d32a7cd773011bb9882ac70cf5a526e1558c37d8d670461b92e6e07b9d4aadc4b9f8a6f68f9d38e71a71f404e28c6886430157cf239ba94baa20288aa6e179b46224b21c1d1639949c5f2787621b54e298c37b09a9c648dc05316b33c7f70d3cbc9a95a87f23939391b0a8ed469a05eb18067f6416f8bfcf293991b7f5760b45899e0e6bfbb296d572f4308b4d93b167074480ac293d1fdf7696c63befb8ae41db0d2120790681289aa15069ee121c44b190f9d4d04960d09e20395947afabba964742def0958dfb941398ede32bfb1f598ee9d0fda132a93a8c6b4cb0e8c5e2453543309673319e76b2523079446c7cf1656f785c4622b1f412c4a309af59f5c827aba4be8a466cb56edb583fca4e22dcf1b2481f795086399957f0e68ed98bc47d726023b711a1f49ea4580e623708f7c4d1d33d0ae140953645846590d99070774eb1174b876b0d30525d5f20bd6d441bb248cc2f066212b8702f935d4a009ad34b5ebc8da19d61a03365271d3bb32d77ccd3076226afe6e4e7510d8dba790b02d586d112f0c1ef41ddc9d89982c84a3d7658ea7cf63d9087794210b25e51ad66c0a2682e498f7107c42beb2eb0e46448c4dea1a1ff5913eefd9815821fa7befd7c28d08d628476169cddedd9ed511d3150e8adddf5dd53c5f24c41b8c6df2e23dcda932d97340523802afa974a854d8daca75a3eeb9b322bc6184669b43b666cbffa4d567c3893e19ebbde00f11ccb6239d169fae4502e44f70f50acabf251b5c122ed7cbf6eb6a53701f2d824fe7af5ba31a94954835f5b3ad52364d0bb6aa5b21c2ac238c1b36c12e97d849c686952069e35897da7a980f7a0ec8332f56b47dae714f5123b0a7e866871359c338e861ad54839d0b0a35797ef900d4a468b500023cc2023dc21eb705e5c6819249e35679dd2754ff3dc315d6fdc7d12079eb33fbb1c4d31c554548c6bd087ad3d67328d566176cd237b0d6f564c02cd46e3987d5979dd0953509c76a432abee09479f779c4fd78ff4b366b8d5a16ac5c05ce9e45eda732ff0ebc9d13180a0fa9b2769d77bb1237e700beedb9b832bbaa3b1bbd80298c7c10aad488712b6813ac1c5b5374ea2c9373a5f0518ccc937cee60eb18b786cb7f362add599565991e2b29a12065b521e587be999813282a708498d999e41f7363706a3f5c4ea479d5511c0a512da0241bd6477850db53c52ad6c0c993750b387ecbcd9c70b9ea808e5fad683b0c16b8280407a81fef90d42fd330508ee205f443494485234a4b944875c0e0e1005a8d45fe4fbbbfdd6ef69b85b2ad190335042bb02ac8247d2ad166ba18de0525a4cc8f422b316c1dd9a8eb61c96c72ca2e6373928722c947259aced0eb8c14f2c2c124327a2d630cb14b1ee46a64e957314c90c77aea8725ec9ff9201a81ed6228e5c2de381aed38a38cf522cce395625a1f0e48692c41be00de8657085403562b98e16056390679c2cdda29de5bc803916147e786ca6b422f518aef73cbd6b578c9ac300520e3004d8472d52fecfbee869531a9041dcb88b30fc30b8e6d174426461c17d3e087bae2c417a879a86623d8df428ac1853958c39508522711b9c6123d2e30b0a1f5ae6d6473f932cf6b251f9b3a5714dc3bb4881c179a19a128d188aee1557a07919a6215a17c7296d20c948b0e600d15ceab57151cfd756673a6016ea21d623c17bf73d489fc9a5401fa75fd3a3d5d10bb1e2f216aa145818c823498e8e711cb8c914d03c00674c76833dc41d1f6046070589a4ee8cc14135f6eb01bf6c658577a0965391a80a557d606419e199ec9a3219ac6f148ba2f5892fe7fb58f0bf70ccdf4c7d325a33b94a9dd6e5d232135b29d7a436d1391158dda3f95fd8ee388e9975b5001487baaef70c1590c5e343abda5ea3c5d3aa2b44d5445f3f56ee4a8b8a0c4fe8613e3cff631c2cbc94ee168f4c802c411abc13fa87e4b60524d42c8974a9d504d94b8c72dc9497176c4678b551ef0f01c8e191ee385ec7686fd0972c36a5d2dfacee25bf8656716d84ee0f3dbb881f7a0b79fd442948984b399ee7df23b908f61d3c1000221289d10f711e77ae5853a0b58c35fc7cbbc79156c2f5798452c51b075eb5703f0672c42ce493c590025dbe895507645caf72a62d467608a53df351d04fcb9608f9486eed9367c8a424db89c591d2bc74fe8a849754424f784b645723b0b0e32d6b3d3414c1be307dfed18bfa94d0fcc1e29cae8dbb6889f8f679183ae6c38cb1593d519d3e2728dd94e72f9e6d9e7f7a7e6b1e7ef7110f60a6546999dcaa9a77049f1b273b5cbb69d673f6cb9a37684c592fd18ff4938f3c32c39680907118dcbec1f330c6e5565665e4924d5b37144a5bfeca022a2f4af1aeb096b31f2be49df4733e265ffd57ec7a0fcbf207cd77f5a0333b73adc1a100e03188118fb5116016ec3b7a835a0c80d5b4672e40365c63cb51a7748b231393b747891da345d9a2508cccacf5d21854da42cc99d4bfd2cfa9c560ddf33174197673cd660803c27bb2a7e7ac3cf66d70cd53fde47638e5b3b090d518fcc1b66caa500e9a8bc93774872657e7ea5a98e959d35c6934d30395711c4d4c9c9bd6cea53a7af4384c270cd0846d48051680a312658e5f389ad2a17ab65c18a2c978d527aa5dcc38c183a9450e70f123e4cdbcd1a5666831ecb8020e0c9edc44876b298cd5db685f1d25c775cd0a3af866fc8bf45a650eb1f98faaa5c2332728d748ea825a5af22abe7bef752e7c0550b10b24ba68982da61d222cfbe5a5622531bdf3bad95d9f4e8f81be120f90ff20d8a158d748dd11dc03c45713804de7ffce33d32ee4452e4825bf28c8e8d872ea59cbefdeb8b7fbc717d425525de66029b2ef1481bcd120f4562115fc03f03848cc8b94426af5785f2b6bfeecbc9c9bf67030102912bca54c8e3079fae77c75214acb6d0b412005f5b6ee67a3e01b41d3261b1e6168a27796d90ff313f6e38bfe961b2ef2e37567279f854387fd563fc269bc02ed1cbbbd88628195c2833fd068a7ac7a95d46c3c203330bbba8482bf12e4f8143363ef7773d4180267154b7327e8bddb27cebf67dbd154c5caa165e4a2b6e6f745a5e2c6d95e3ffdba472cf37313128232d28d552253fe334becc8b49e10a03b5c13b3597fe8a5442c6faca86c33094facc4bf49f1f0e930763c49fafb9ee9c0d1e1c337e60dde1cdb0623b4640ae5225a93300c1a6aa04f48734de0445a84c0da6b89e8439835c7430561e2b8904da0301baa999634b30ef7c954d526d1821400c5aceb6be86566d9e6d165eeb75ffd72aa0dbfa5ede9cec79e275ef1867347dde653951708a4b5eaa22aaf5975f31bf4c6c543bee21727156d166cf766c7f1a6a3e933dc3bae153978a385678040bfe037da5daac7e85be1232101d9aae5dc0ee63d73310921de79a2ff1ef912676e127776f5c8ae03b016701f282c562de618bcaae7eaba1dd410b36baa508ab396673745400afce615fc0aa32472963ccef97f65f1b8c18b2e36f28e8464cebf4387d0fb0e67f7d64298e993cd9bfd127a7f014da11d1fa053a7c19f857ef4e4f8c2e4408cb65c750a10f9a06a1b397a441331d2990425a92a1383b32ea1ad153c11e7082b600cc6b8b4945da1283ad1684b05f6f5d01b0ceba104651cd65487b099cccc213f03c6a02f2477d178fe12a91d3dfaac9a9383c1d05b83513233536ea32a0e653e20944719b99ef587a98721929edbaa8a64132c3a5b4ec997abb84c9503a46b8cced13916d1b34463a4a20b8ad3340698b4145d3621801358ed424482272b2d35878672ad1997ad059abfa72af68211d2ea67cd8c424b3780af08409678e586b7c667982807a6e9918ec30220c283d90704cd3694767ab528e80ec82e6347fd104353142520e9dd05d0dab13da9b44ae8ed44fbf54b1861b9d45b44f0a6ca59a0585f9d3c21dd40e2d15c971cd61f85087da381082340ebbc2d5dd3a2f9a1a8aeff8dd2ae16ca23f72463385bf1f4765ad1acadba74c35f7b9da58b64c47044f895371dc1659c302129ac38336c715f3d5825312bb8d847f32fd7dfd4a75a0bbedc58e95cf870401aa6f6b6783aee31ddc378b78221f5e9d3b2d9048a0587e11a3ae5769dcf18fe54df349d192ebd43bd4831df715744f1420fa015dcf162bc0b15499ad011b36cc80c6b045fd67be45dcec58a120dee69c4eabaf59f3fb0af249907c49a7e770b48dfe71721763c517479679f17078867f00b805d2291a035a4f0e29e223bde9b8cc7edab61de48c5671d5136b2b1cb71ac5f78ae1b2c00e657d7875e8009a7fed71c398216237b8949e6f3b1231c73456d85438a6fee08751dcd718452345ef48b566c4e6d0df74fbbeb151eec03845051b91047e8ba053aeeb8341eb6e180ab0fa41c22bdfd0eaa46a438844b9588f4ffb635a1e9c9db66266cb7b8a9c52d37b8b2320994cb7ecaf20837be89487a51df8ea5667a8d858a39a66c065301b1798aefa6127b1adda6cb06ec79ca747f1a31cbb37d7d13e6a7798372a927bbfd5e6a05733160c96ac20d01c31bb2c7de75863ef0ffb1d83c7446bab9fbeb7f240501b786587f0f9b0adcc9482151713d4a9ee727094cd31a17cad75716245adfdc5d8ef386f4696e26e69ee0c0af404f51f72b902ab9c6dfbf55e9c4a0d1f4effeebf1c3aa521d7a5df10e0da2d4d6875cf1d4e9e3ed9cbfffefb06f16f209bfb0f5907ae49ca33ab9799f3e6780f0caa62f73ad742dad015fc1e938330afd2d9424b76cfd1cb50d6f83f8dbf8fa2cea6cea36d0a26379ed65f84ba3ecbd1865667e6a8d60acbbf49efe3a625e408658df00fe322e5b617d501b0422bc0ffaeae598638e5ce5833c6170f06777f218d9c09c6ca5676bb8c892afc5cef3c7b60d0070c62a0220ff7ad7c1026ae4d10384243d8ab1ac2bffdaec160cc06c8c050575d88f4f93c517859a60774733dbfda0d1d058fe985464cba2cc8664d78df871433874165a279c6edf2d8214f60d2bc95fc3211152b4959903258d5949f4d803569e776da3602f550aa0c19f81c18c9e049f5e5a30a279b5fa3694f9ebf7ee4625283643c77beec8c6b6eeaace5a057ec73845b95234cb6de6f21ed162e6e65c4505b2c8dd56de993e8258983bc8d0030c153fd54c8be1a3065d5244e6b23041ce0461783ea2d8d130d8543879249380ab8cbd529811d6c1e0a718a4b1c5dc6d478c8e0962c984d6b5b726666e9928695222735ddd9394248514b7b15c04d66cc7acac150068ae7e354f120a01ae173e2e5812264d9368d1ae7e90951dd0738f9b11e56b9de3a78b750d2f50c2394e542f7a55d7f9299ce2e29756a6ccf33abea0d29c20a900b4ce100a8c93ec059b1dc61e3a56661d8f092d719a472b4f671a4dfbfb668f688b1b39d290534f51fa570868ba5a6fc0436650bae05d06097284ab2af458ab8c4807925d2f48b91cb0c6738ec4f2f4dba9249dc3f0b104f63357a3f4a0cecea4a171bc1edc52ddf397874dd40d41265a129e3a3029a5bda923df04d433a457577d573af4e096d17c90e5429fee2bf7cd56fc78537e340ce8eb65a31f755b9d396f61482230e2d0f9a61abfe2607ceecf726b17dc7e1d7b0e21dd735d31877bfaede747a915413ce21ebe31d93a58d109c997097f28b0bc4eab623839333b2458af3e088b2275abe2c303bdbd538a7243c745a5d8c7e481dcf7b73e2eeb231c5acfbec01818306b69756f58dcdeeb6d898c9ed39eba623c854ebe4b308245713b101f130e7724174424bdb0ce0a35d316424f16fe11c2e0b5806f947c760ae92444df5dff5e90db377ebfb6665dd30c48e69eaf35ed7298add748484ba97d85aab2d5162d4609c7e1ab9e03fed2ada507468dd957c90644e244798fa8f4eff34cbd9de0aa9cc85112cb4ba7e9193a2653a1d2e95aa0c44a3be578200fd64822f034e4706dd97414df1c63bc74a406618f378b18795f05bbbfb554219d5ce963d035188447e68786de92efa4b2b9f9f27c984b0334ec949bac1a6849f7479069710cd155babf345c04e97809f8dedf2994f05031a68f639dacd6ad1760bfcb19e834e42a1abb81eb1133b52dd7581d8b4466f8e586289126459d1cb9929b101aa108ec62acd2b26f95a2b18736c0c4d49f484c34ef10a511561843c743f61e171447e8cda8b930e52ce581d05c1d2772fbf85b272be3bee2093517bb283e3d13f90f4b6030dddd45c26831c6af1113d22678b666e58c73f22f6ae962ec4d6c3540368bd2cd2f6dca18f172d28e575f3d19bb783e8d5819f1179375b30f022451fc999951fe19b2b85b350c60bf18614d03b29894ff7f1b391590ca353c232c54be0bb1566af261f3c9b2d8a0dc64b35dd5aafd1faf939f8073dc813231ae2670c9fec6f1e423972e90e3afe5abecc3aea6238e1753217c7b1c65fab0a1f5ff4c54ec2806542dfbcefd899e1b44bd8d500415de820a69ac69dfc1940b8144da8c1bc86e14fcf594fb4f0534f0d2463916a56cd5c9880ba55eea82c5c136e0eefbb8063a9af8a75b0cd7b6440c8adea925385ad4412acf39bbc542fc3faed986d2446de14aa273f4e99444a71ed1373ecdc43b4f2dc85a92bb9565ca9c5b93dd45e3d3846591f24255e08b34fb431ba5fc5474ef0d8e3dcf8fb820b121a0892a5b54a1eff57a7ff03d458c667a14d31c8e0ff6c7675d28b7fa382b801363dd49ea7fc8961dcd6fd63331115836ebc417d0b6b70db4bd5fc0d9ec4e6c2c6a80db0842cc40e3f0acfea1f0e322af1b552a61ef8ba39633cab90b1809b8d6033f6daf08e8f7b824083e9c5354603a74809cfaea20c2089ecfb4b38ca4d8e2cdbc904acd61ff169da82e78e2c10f87823cc7f5afdf8b2580b9f7f5d34fb9b2404e857427a881050241650f76e3d7f866a548f2655efee518f5339652f0e41f9697ca0faeaf0acc5e438329d81b2aaf838a0485e6f015d66052bf1d2671abd6fbec9b399b69e1b0713fb158d19edd9273f97e85f044e6104d2814d53008930e1f2c2db396dc3bc10e3b598fd68c8286d268fba5de6c6b070e12f1cde36174edeab18bdfc1d9dd3d0f20160eed788a705293decf62d9f5235edfca7575cd93e6d5ae24217dbe1add21d1034e5a865fa78ae90f18037af60df226a4020a873d434af356e33dca4a8a177a514a5f760880ebbbbedf60f2b4e794d0466561c657422e653e5b3020599532bf07422dc940cdf994daa85fb0b3e28172a2506277f00c5f22954558e0059d58bc018ecabda2525a551b227ba1677bf0d558e1dedeeddd73d4a9641121d24d81d913d06afbec0301f78ef72024cb0abb98f030792df23d1a4f45e07fa4ff1a31e8e9680ca5dd679481e89b27797ede1f075191a2cff1f2a6600ab959cf8b47cfeee508eb4cfadc93f370639fe4e3bf14cbb57af0673a3b6fa620c59200e52bf2f16b4be1be359533a9aa4fb087c83264446e5b03f927259f80e1aef91e07cfccc58fea8f5ad5f59326784d6bcec313ff9585af329b02bdbea6539718436cf904dbcb55c5a11d4f0d1d03773bb0275e0b4ff428c291adc6b66f067dde584262d69bbe20f747f806e37116b111fd611e85fa7fcf164668cdc6d883ccd5c7ea18a4a26e6ae5bb72517a8185bf26db9ea4e20880824439e86415af883627de5cc9602f8ba76f845f3c8b9d17557f30bb09c4dfe7236c6bebc48824dcfc49bbde0c32f36d18fa6ec8aea7fcb57a1126c8a058c9818b651bdfb6adb0cf6b4c3ca0a4f816d5c0683cd259b9e750b76c181836d831d12cc1bc4b664ec96dcc9db0a5a78c7c9d9fd2a36e6f4def7f738fc64db95391281e718b355009464fcb3922666c130595015c5729c3743dc79aa272b64d438d89da1bed8b36fed30ad12e2463b1586799b8ceef92227647eff4124530d086f13569d85d1292d05814541a9c83fcc602bf434a2b99fd7d0475478618133d48a1f818ada249ae99050018f39a2e7e7059b0a29c388d4ae13b82a28d94fc9e9038075510d029741015aea64927cde00f498623193f6692edaf7a268e20b41b4c4ee31037cfe54f14d09c6506a021c78b382a0c3f8e93723a7575697bcef2f53d376bd0161f0a55729e0252490a06aa0abeb7b297282b9a0e1c60451bcea5f1dddd20ebb83bef85c467113875fe3811f08cadd0c35e0717e83c459b076a3e73f965c7bb8d30906694cfee36f772f27280bb9846b1a00dcaa5d21d987c3e563477465c9aedbb078c020865a063e38c824ec42e4f7747ac62657b298765461df64e7a1e968525f8dd1d95220e852e29abc302f32ba549f009d64ff9636c9a49f702afdc679d634282828d3edb1304a4c6c423d7d1159d9b936f265abf1f3c3098caef19abb4c982724d2d4dcc49267aa092808367649764bb8b3087bab99ded01759aa73e78fc548ddb3982acde30ccd6e16631dbe62376e130cd056f87bedc7393f3b3486407a1600c0c4c1d1be758f123700fe68d3cc60b19aceb29a22e0948c46d4457bc040149721c172a621f737ce184bcd2a90b8efb8240496b0ac73779bb294b6ba20c5ad1b26e490c80a2e13598e7a07e4165b3d4f00b8bffd583d2a53fd1fb7faf1a350358ef9d89b58255b9905bdfbe9bd28cd47b75123142d36e96f8ef28c23b826a81a8963ee70e686cb9e288531228f7f07b568068148b59b9adb2c8a107a90c32437707cdbdb502d48d9812f8b0a392a9b48d4b468a76709ba235d2d8f29d46cbf698c9958fcbcdaeb91cb7b5a77c347eff07222cea60b905b22d47f93b1204b839671e1fc3433f76093f14498e05c0b1b90f8bf4a8ec0a2b7d2092db751fb1247b1a3a0563cf5f9a849e6a84ef6d892b05632a3c6d16d8d086f7ea6087af527449333bc5133350a236d23809b129a3c2e0ef7eb99191292862ab6db9b4baeaeb17ac9a89bfe9f7897ca3671208178b5be8d6d2155615fe09105b3186ae5270a8bc5b8188abd8b7abb28b28463ca39bdfc9f73bc2723f387e313118e23bb939588368dde7b005e34dedef36dac9e8a338989982fa1007656aef4f6c0fafaf038b993692aff53c7c2189693abc2ccce647d088d0b84498542fecd32cf35e286f1053b8f909d449b407820133894e4587cf1614af79515b30473601a01349d3aac23cd7c5b8adf5e42a481016ebc87de46f0ecdccbf6256ae95334e3929bda43d7644d6afc628f6b63c083d96220e2bfae980556a038162b562a54bbb77ac5f68c1bd29eec5e7183ac057b2f1d841d35161cf80a03ede3a996075325d668766255868c60d237978b3a4bcd0599eed2293801e6197bb6207debe187cf2f985c2b3eb624107aace00120db915a96430d502b35b0e3cfd6ba4a91ef4e7dbf24f87ae5d6f8b7c9f992d8541e65c06158771abda59f654ec15898b8b8098e3ef63f26f169bf690bf6f1ce55565e80bf72fd65a81d28b568932b70b303521e79f1c2bea516c47647c433be298b9afcac73ba3222c1bdc08d24e47c83b826dbf3184f0c6be7414b4e3dbc559ff4d85b099276b5bcfa36ef797fb7eb75eda46eac7883bb8e085ba8a1e37983df0e220d54d623eec5fa5fa00125a1e2aa16fea2f646c9917a89be627dd3b2da504919978d6b094b65a8548a8fd8268ed94243622e657177e209a1573ca3f0b359fb8e6f85bf4bc28b020a8d144bdc249a6f777703d7497e26338b5680af252dabfd2d186320ca582ff6ba256e6c4589a4aa5929d444d4ab349ca9bb4701daeeba56bf1206abd7d69e66e022529b859fb80298e2a00acf6bf9a764d3e570d2dd5477a7d9f412bb309e7ea3fcb43025e999cad4b886619ca8cdcfbe64e06f1cf249528e2f93585e65146984f571521fbdac7aac1e0a175a5434c812e09d095b3a663c59d3f1938e0c62d70dc857d60b6aa6aa054c55f66000bcd205cbecce6eb17c9a564966ad177edebaa2905d104ac04eb0008152c2fef2455d3de4efec2d0862cc0210e6fbcae7013f6da8d2c794f2af2f16306d460b5e211513741e7407546ed573188dc99e7c93e8a9917f6669ba7f586b36e19cf32a7fec4b1cfde82d7ef55ef2b9f5e9cbc213d8535ed87b29b3cd1dc38b4c6bd92be98331de341a3432787c7495ee754b4bebf31a82d7882061f432029d1bcbdeb34e1a98ce62efbdb53c3282cf8a984e880c7cedc2f1e469135471c2818c7265022b0d3f46b88588902cb99d3486d7b7a3466b32c137516636015c2d737378696ec318f802e7e9d58711e859f9213b168ec7f36dc0748cff39441b3dee0a1d4836af8174eea5c16109f1c3769a123362d26a882b81505a454bbda11d5320c6858355570cd46a722b650cc4baafb5327d6327102b7720fed4dc166f4c5c85ed40c208af3dbb8dcabbfb1da8019a2c271e7085d7d1b55e3a14daa98ab0bc8a79ce2e0b99a8a5cd19f5bd7a33f17ca423a2a608f46b7b99b5abfdd4f05c2d9cc4bd4817c7d68bf09d6a1f4183804e37b042c75f2bc85ff9849129c2bd2ed600330db33eea6f7afec752b89b6e8b793db5eb71105e074f8e671fc0f46d51995ad50d551bd10828bd64a834d3e2a2c45196edc9e2bece665daf6466d027dd09d1a4ef1b1132ee0af4d1c3399fff8dd611b68667fdf2b60f554d43e029ca992bb169515edd77b09817dc386038fd1b97f48e45b0576f7b5fcea20923937dd2c0e628ddab903ffaaf6d2be226fb6c02b1e0084d2b6c925d95a386376db2de32749195e67c83b44230589fb9773b4518933860dd9172139f652d7ab5a3c707c862c9d6674848e49abf8674c1a2f478431f24ab876d4d65e7e8c3d8937aa7ee090a7843c943cbfc0a5393c197c1044998446e6dd74c03277774bf10f3d9f5433b2f5489c7321d750b1b96704e0c253e84fb23abcca96e38aa9cd3a25dfdc215c6d0e35f9a573fc00ea58725b9730c3dd6bb2e4422b99248896845d738f50259b09105d3ac192b26171c95982fb1ebb6bcde1792e82e0d2852449e14cb112d9be364eadd5474e5218fc0c760cc9c4721cbffc3d7b98e27396db17c47207a7b340cbd3f25cb8456b80e7730b700709947e2d0a76ec0e3469c6607d6572f5ddbd0932f088c107a66c500498ee8aa0925681cb34277b0bd822da977f491aa3c95e4bd8994e0b7be444979b84ff3c37701b4ab96e32c32229c7c1320da77f5f76a27ed6f0bbe10e2ac82f0119b888e3036084414ff2ae4588992775dcdbe2d5e6c632b987350511388226c9be73592432b4dc52cfbfc1e3d595573e97d95fb702588436bbe835f3a202bc5cd9e957e85ad8c149300ca2e89cc397de06d0f723e618e36868c76896d6a615524a68029c89ccc82d1d5d3855e924c82365b35b2d5a7e8c8092fc20accaa83c6844276728ff1ae95049b69a58a92d4be07e57cc0f1808bc7202eb168bb5b1b7751d640a6b9d8346c975882fe512fecc0c4e431bf4efad511e337fa718ea90fbb76f64bd363dd55aadd2d77d8433d3db0d8086b103d215b0568b2f37d73fbe01d27c1d68ec8717d9556fbcd2a5115d175f532af7c23f7f24b5edc86dd87368059f33d4201d359d3dbbac7c67c97cb3c0bed27491f83116ddfcc6a69afd6b96f6176e388799509289a808ce286f539d1b7ba63dc42de060f8e022fc9333acc1ea9eb468ab631e1e96b199a2ec77abab0f78a2ec560d214cbb51da09578b40d59caba94469ea44880ecd22728ab23e59e2e8d4344d8e4913812363ccd1f91fcf14d2a5da0b023fd7ce0d5e7dfd76d920ab3ced859413e8fdbe36f9e8dabae4309030cb00c78de19344a254050ca150d98b514cb0f40a32277adcce5b3eb9f0d187aa17951a17b13cb0a8a047b2c8356b9c00119ec69819923a12d5c670c7d2ca919e979c42b8540aee52be4e3e9f9e5558f2d194073a28fc4211061514fdc92b3bca8ca9002b40d3901a68a83cdf6880968532119b6750ac0000cb79238fc49b5584256fd909959451660ad1d09d3910ec99fbb81f94b0cd8ecb6ba39d1007d156a55a91d709e50d6656ae3fa7fea6e9762783478562254e51a8faed55f2685496b54a4889985692207bc0edf5ae27fc31ce71567dc73d3b30246628ba41caa95729bef00cc1cdd2571e378552218e0ee35239c5b54872282d9d7b88bacf5368b53175c2dea6c19a7c6521b82265eaa80fe76e5a9a08e641ceefe79ab8e4834b93b205308963b9c2a0ec0d1e8166167b9adb79889ad40f79412132ecdd246b292248ca67904f2a507d121066b95803ddf4dcc2aa2a2e5904407fe0130ed7626d5d87b5c0ef8b215b3d682afe216191ec17091bad0f21db9b234fa48d2b3d1ca772a4c56ff4265c27330e7fa9abf4d8b2e89b83aa9c2c5507fe2823140d069f5264fa3ea2561c869ff2a52e872234e5dbdcb4d90c8f265ce227d7ec9bfa0a59bbd13ecdd87c372d8b739d267a19c98f628415434731a88ec6d95b4ffc3a85e0e64fe358ea54681d46de10a56987d5f28a7f5ce1e89830a59274c2d51638cd2603de4fa4c15a4ff5b189e5b3d93fad838092a9ef7cd7696abcead0cd52818fbe4b8876f02959c1e0a1b0c4d6afd58c11d05be8c4d5f88f5929b3788ef853f8c233d15a5d222cbb321add2e3b425b08ca7ad9711fcd1996a6d9d3fb27ebccf6fe127c1c8730bd052fb23073cc411610ff1073bc72f06f4b2d9e3a483e696f89af0f5f7eaa67393744d933cc8b769e873f208a48fbf3adab39c3d6ba067c024ff35953fc1554b57ac9886b6a5d573b797050f8d9ee349090675761e1cd259c96bf1c90f01efca07cd3b33732bc65855e6cebb05bd7ba1d67943a52aa2ebc286c65cc7a11e5ae361514c8e2e33c44953723e3f8ef4f5f3cebb125b85e4311681bffb2ed51a9d7dc6e885240661025ee2d16505568c0157284619804f32aab565fafbcfa4a8cdc55238aa4a7a46e33da7cd82dc711bfd47a40ecba7626b52b8e2ec0bf9fc342d5fe3ce6e682b2cc0fc59224e66e1ca96c7b62db2e21b18fff745ed07568d2e4b24ae369e3fe78c4a6a83fa9d44a7b5e6f0cd600507e93c67ebbc56a8c60c8ade623d136e225c0e6ae165d186bfb98eac46130a35a229294f77ab7c307380b11ee92f15d34836a1a632e450f10d835d1415fae5567ff6dadaba55afba7de982e3fb4fb16e96344e539d5ab81793dc506c196d088d3feb8b8af109c11dda64d1384fabc0ba7a6549d0d8be44e58842c4070c9a04f67deaeb9d3cb1a422b2ed58a4e181c0148b5745f1455c8e8b1e73d10e1f5dc17bd329614ea972efec7c2b781039119072db7d14c8cf3ab3d4b139bf9dc9c5abac55a98b18abf843580fa9444353f195ed6c24548caf63a80360c85752e0ebb183e7bce91ea71999b89cfbbbe33ff543a01f9a43d687fc1c6907c0b13f5ec97151b1573a90581681fcd3d03daed9d8375a56b4d409dcfff952fe22b7436fda98a7619d5676b77a8a7f9bc9c0ce9e6df1c9e4f6e492dd4b84834120ed4936759d73947fc22e13c7b6bcaf414e8b5a18764b1d25a12fc0b84a592243bc58790b2c3d263533c01289ab2af72e0c22ae19fa5015bcde1ef253a6cbf4cb549217fecba1b709687a7b54b32f2b786199ed19a5d10c0fcdd90faae630733e9d9d906a2583df0adceef4f8267d586fbdb88b87a199d761d72cff50876fd2a65bb9ad8e4b6a9448e553bc035fe93fe9aa24603fb9efc3d268717b18fcd07b8ce58f7db3c685b005f3fd88272042f2e7c94afc25574e4afd0c6c244d0de8cab3f6dd9a28ea78c6a0b5ab9e80de485a1d75f2bc79261ad5d641f8be0da4f09360ed03d4bf6ac2c540e692ea4cb3974effc7f336923e95ed9df837ca764cfff9fd8f545a85c941d3347cafe072b00ce80031ffc85dcfcd7b847a3c531b0e49434bd13fa9c9d461b879f4597ebd0f196ece51accac08800cdb34dad0fe474d76c9ea73af467ff0e9f027c8575cddc6ee1c65e0cf9892d57ea3db09c569e396ffaa5d4435770a9b1fcd30a73cf6d9e9dea7655ddbfc7c4a57fe3f002b1fdb0579eb1278715f1b42c584aa880a8c7b36d4fcd2e830f0afa6a07d7dc49314f2d3f033ae15e6c64d87b8ab41dc8f75c73707882322ac56ca80a49d8ed9de4b4b4326775e82999a4a753a31d5f5f3201fd9d5299d77c7862c6819fb553944029a134a2b76602adb8d9a32d94b0cff969d33f05da3b465abd4b90b07082945e2ddece297c9d20b85ae8823c0ed96e60b0da7c467054ccea2e9d1ebc1bbe87fe3c80aa5a09e8fa527d0774bc5e7ee91b95865aa539ada0cb1dc0a329d06341b6e353a49ddd504e050ac65339482a37a3cc57e4679696843bb8bfc17e94bb739a1af3664ba98fe77e2b66be15e294a085ed79708faf18ab816819627e6dff99287dc38a46d6839c107e33d2fcbc605e1934bebc3e80e72124dd1b4ef9177f07048ef789b88d1db1b06470f3662248a359dabeab7351a805fb5c8a6d0eba60c9d2a8ccea537e4dab72d19916c5e0143176041637ecd1ad16c8c3043739962fcbd38713aa066488a1a71344862c51bd5902af96c9dacf11e764f207b63e14f33e83207bdda800e90a12d20e2779365e92b94d5329c27b050e1ef717df3cd7867d8f079da769b8cf52ffbc778071097880fd1ded4414316385c83fc6e1e8cc4fcf49013a1a301fe94dc651b55a61dc4b8cb505296520ec2fc632610741a7ffb3b0527987fc0631d7bf7eae2b458f80c37e6969c1495f09bd0127c9d9b84227de7230a3734924b31833da501baaf9073238b90360ecb2cea0f69ca5441f576d7fc8cdf580145e6d4335d3aafc066e27c3fdfed0e4a0e5801ba0e6465fcd6b8b40ebbca9a4233151dc13859621ed97de88c133a2739bac2e1d6c5c2fc14b4fd03f917da3b32200140c4697d3b5c862561342a608499f40b2a69618cb4d8eced2a230805b03d524779b67ab6da27c09f3ab6d07760625a37d0ac33300e840a73103b27fa76da31462e68e906c96886f25f465364f55c8f30c25b2e0b98e220b1797b329749206889dc07db8648cfc8886e25a0a778294f6df736aeb029891dbda53320faa97865aac0f488190ff0255b5672069067c340fd39074014e5948252e0208e6bd7d1c484ab729e917081be05aaa84ab0dced3aaaba364539cd966db2efcb3141220c1bdb04dd7f0119b86c70916a7c6efd0f563a5cfa208a9606a3a04f7b1c3468cd5632940d76c2175ca1625d8b5299617314baa44182a17e7f24da149664d75b59fd235901fe655356d48d2dfbe76316f12cefab75ce725b541c380fca1debbef313a04154298bfd9f7608656c4ecdc23ef41f22632311dac50fb569d05fe6d7df14266cf7216c287f149dde4348975c26fa7d7f74fc91628ecf105916da4c794073dc5eadc8cfd5b12b3a4ffe22d53393942b8890efc24d80632e158d16485d6f5d263d75edff727b078d7138698052b7718448fb0f6becdc6bd0d3cb6474b7fbc3e47ebaa8a77abc2fbe29208aecee5bfa7e167fb9c99727407a210463db0390c71ef90907cd93cfd4f71e82adf50bd6206902aec9f12dd161429ce30b56b46f5aa14e7b5e7d96490d2e8b0a9ccb0a4f257ec4a3cf1793e6ecdaa79d8f5497e9dc9813445fd99dff4b8fc7522732c5756fe967d349121aad40ec51c39f1620cae709c12b2d469199263d43abc644a13af3cf93e94efb54c7ac08bb840b32e05b85a155da04364b1cf9f078d08fdead197f86da7be721a548f0c86821269439492ecbc460aedc85428d416634b740137ce3a4379d853e251c76fffeeb8c048f238466ada8d52fe2a08ad3868dda3c422992cfbe95cf72d6690e95e051e24bfedf44e991816e28052d3d11e338750dcebbb21214f8dea5a47ae3fb400841628aa9e71a3fb348131779c700806f0bdca43bb06e1f7c34a2b1c9e0d5d6a1490f94ff9461276766af8b3e444347696b5539f7153d07fc59cfe5df3bf17101a6ef1ecbcd9724b2e8068339b580d1625b01df36c81835338e4c9c6496b2c3d5a96b1afcf2fc905c914363ecd4a7fbf47234d7c5624d4a2ac8443d06c28d78f66380b31b46cd60403cf7c0b4a8c161d139b4c3d13281ac166cddef81cdc1872d3f94462f6e16282d7ae71e9bb631f42086920d8c73e03df3a785c908cc190a1d9169ae5b545f19d1f8b417a1ab89bacc0108f927e66d76099be845ac624863e9c2921dfa1bfdf8ad139cb1f1ebf6b5a3f9f479c18223a25c306017781f6f9109c406f7a1eadb5abe3bf9ae801d4c14ce04f400fe7222115ef833993ce1f67d314bd8ec554a56d6d4d5341ccd48b5ed0f27d540a8b3b7c974931199cd397fa4307f16768b3d71e21beb4edb1f7a7d66140dda1af367d71f30f34ca938c42757a937227758002e1cfcf5db8d792f652fb25074c536d99cad99189a1b9aeb152a74513fd03f9e0dc3906550bf3c99608a57bb01b5f1432f644e4d8843d3067df11536580c9d1588766abc5cf86ac71b08f9cdadb9070c9c21830a3c93287a6304e937ad729f019821cefc80e52c2c78b452a33f61f7a5cde25e051b886e768fedd109668b46a35a74a1f7434c54efd60e0a0f3ababc8ca8b278c9a279fa70d1448a69bcd6a54ac465cd8316cf9cb90d8bbd514991073b9301600d46235f831ba94ce1c02cb76d5d2647641550c4ed27fb43dbc6534d5b76e9f75ea45fc1a0c194f8fa76825c05e9cd2dd6f94d0d5bd7fa31ed624851c350a04fa001b412d048bd8efc864e20009c52b385c9216ac61b5cb6fb5a36e027dce07e642b49c337954ecf3b44a44581ab138cf1f7fc346bb1cc6d23df7f3c56f0658c9e7bf5e658d0f96d631329ebabe9b47c3175550aa10154c9ba66dbcb191296a1061e92446d41117221b2165a1a2f417294081927e9d9f2909773b7c7a2738a3fbc8516742bd05f088b8c2057d52c1d84fa6c1cc6a07dfdad06139026e44b0751aca28748e5aeca4b6c795d840f2b6b18b965d7ee91e591c1d996685f15922725a8a6e8e3b25734ca49d2d7668ce389bbdb4182413bb7ef8a5aded681023727c8913506daf60f7b88bd0d240776c8ea74feb815d7b143de7fe5da85ce8d0f5116aaedd99d6267e33eaffa89fcad7aed45fc6f78ae690f73894fdc0b7ab2691dedfb28c9b68324791a0eae534c0937d7def67d76b3d183c34152df82e1f0e8186c2814b734f886bcd6a101fedec43cea663dbfa43bfbdc875a352f62a8eb8cf63a9163a3cc01eb5f8d6881554b8ffa33b5b334e6584e5ca43b3a884c11d20e41c914019c7966ab35af6178f2fed34a85fe256ce22371d15b79442e62100c50ee4417513aa74f9c5662b33a47d968743b602fb79a0dcf0a27c0f1e7d52882d373b6a0e11f28a8bac8afe365e15b28c2d8db576d95b01e1bf9f8c3545d9d4507bb0cffc11e0e0d90431764a84e53d37da87e2949e895c04435a00be61f1e04248d9ae32dce8474947df027b39640df114d4b09a8763479bb107b74cf05545921f9e8560a46617602f7aa3388fd012e6fb772523629f8b36969eb85ca008ac08ba94f170040fbe2a877b711b2b0a45514f0bd0262d796ace1de95e398f58472a3a36887eafbcbc06260e8c9a678d3540d29ef1bb831b6d5d68581685a8de79d33782046e6ff549bff58518cef2a4ae0c0e06c99336198d61015d3de9e2273721ccd490f672ad1739bfd15b7d6b65883fba9c013261043e84d0bf9ff9eb2fe7cbc143873adf130d6d477a1bca3514c3148a312205cc4dba217d8b905f9071b08ab6fdc3c56e1d035d04cba5233f7b6e71dadbfef1ed1ca584fe71157afb3780fe4ef9ee99e53a2528f5963c41a4580c0fb1aa804bde9136eb4ffb47d5b08f2f6038d546d95275c7cb9b42ebd22767697e17679c1ea7e5e26905b958c50aae1f4ae44928ea0185186f86fde50295bf1f894a9e1ab237a04c4d67ce2b2830354928fb3c0a07fbe9486eb688db975f689c50dde570127715b76dc18a363843792ce4046aadd1b6fb600aeb62a3636130879274775276cfd31196b555a940d92e0988c5319e9fe05e342b77b22f74ba901fc331cd3dbe6efe8aacaf4797583e76224875127597cc637d2ef210b0668e0a43322f65468905ea393f81243c2815b5a190efee8a816c3bb8765f8f2b22d6ee4a7d70a18a1eaa50809f83107212c48a963a4ef8034b278ca6a7b3b662ad653d5ffb96c9f69ccbb7642ebe749c82c47433707c623b3a7d9b467aa18b3b14697aea26cdba9131f6b07eadf512b6067bfbe021de15d09715f966e863bb810f4d3032ac574c521407695e7ae7569b4e2879dbfd2adf842786a8e9fd5b2081f42a45a563f19bc3da7e155d08c6095153314025b13a3d04004d5a1d4668dd4afe85d4e26993e96f672b452fbb418ba6c8c7287d6e52c045f14ec462400227ff9c7fececa627bf1b716378b0e4666aae72f8d02e6226cede3ab595c77d12811073a7d6cf8fa8f7a63e0f48ce470284ab406e29e09cba13af4603364b067c05b6dd5a7c1a959e164343b1438116b3b486834480b97f5a3cee168e46d466883e3a134a44c2877eae5d2566571437fd3fbe74b275bfb12be05a0576bb0c4dd743ab9422a9b47fb96c7050c8aad5febaa3b5d238c1c0e7564755594cf8f1a004bb163784b20ee5f91dfc62714e58694a0801813c80dc22861b34999dc656e9d714e20d9b13d9aee92deab307eacbeb614cd8c4b3d6c0672bcd1796ebe4df9624e4abe20676222eb672e37e1f24bd3b4897fe563d6b122a00fca7e109bc45cdb66736e4605f1fc7c0fefede4c20ab2bfc1bc159e1ec1e5f89e87fc65555c33663a9669f41e9a5a4230bcab8956e2f7963983e50d490981798525d178231a7ae4d1aec956bf84f375303bfc4b7ea924a9eddf11bee730ef2a91654bc30447edd7c0d5a00fc9e5de17ebab51f453b05a567a5774e39e518ecd21a1288a5bc6a7ba0d7182bd23ff510648c9f97dd5257aab393a6db42d5179f26d584cf2016aeb75fea9f4dd215c55f5848efc47b66c94d60eef413bc272cc875239abd2bf581f877de95a4aaefdefbed950a1d0f9bc7824eb062af5fbf7b57cbc72db2fdc5ca89187106f29993dd1144a0b69ee102b58e18fddb849ed8387acb56a6acc9d474178338891ebecf487fa87b805e6ed24a027ff22f2f1a29db0152268c7d4eaf3816b6be5e4dbcf5d061c826d24a708591c847cd9c1adc2a1c9ed7f0ac3db7a9f1bb760a0364375b16c169866319d5fc8245098cb1ac535e74657179c972691c3b3b37bb24f4ffdf8ab0292c4b6ea65ff1bce2e17750537757e945025a4f9950062b0d714d77c6bb29005c1b5b35094d870d5967b1ab62bc2ea603fd494ae4670c2630bc7639f2f589e52523b131cdcd8f569aebac16e3d98b3b70519aec39995dc9fcb02f7a34dc80c78be1177061ba316b8418d9827fbef9aa3f65e675567d8053f9f803f707ec970a1ad377cdf76c7176e97cbfe5aafc19a2004fa9076592b9a34335ec90d9bcd5d280e69f0b69872cdfc6dd3fdf143d2a0e170ca07ae2291ece51288c89adb3cf570f3f359763cdc16df8ee137fdeda1dd9e79ee0951505263120a4a797801d52f9ab439b0e24dd1b5f713bea836808c1d0f3c5b9e59471bb1436f35efd0a97d3a40adeec4b1c8489aea2440901a94af1342841414c6a7e0080a45e846df428bf0bbcc9e814270030c38c08c80776b8abd63de440059619c225ae7ab3d3868019ae0054d75a6df82d668a469a6e4929518ef65c457460acbb141b5bc94c9b3eb3f81171c0e1bb56916a1d96417fcb57ff28a46fae3e02b8d6ced6ee110e1d859b2826509b92ce6c525914940c86c85360a489c562bc20977d0f7a3e6e2f1828082b67bad9b76830908b9c227a2491c211d206fabdca250ebb3fe796c73ef67241c2a03c53d14c2fc09947dc662b3f09458a1f6d9982eeb523b4c5d1f24412b70d6f1460dfe96b8ce55887049ad7673f215b6af737dae29acbce7e5f9b0cc53eb466ac6c4696e93aa6ca42f8acf038abb6dd8e3cee551f899cbfbef83aed6a12796773616bd74e8c89d038eba7e2cab544e185c8d65d4ce9f6b5b30367da4293218dbd1bc973812d6acd778420d69664e1acf065138f03febf2fe1948d643e0c603c81f827ec1fc8e07c3d39c274f52d67912783334464fd4b8589ef6a331a1ccd9337cc297b107f91848caf9f10f168e91b64cbce4ab55d9256223269c35bdbf2d6fb2e4bebd4e9c168c1deea2ea83fbf34606c27cf5e5b076837e536a0de8bf3174f40a650705045a8d2ec882afb3762579c6c53978c3b5d4ff69f1dcf1f39a082d68eaad75ac1ceea1be2bb4888ae3e36c8a55d67338f2a3acfa69788f46cebf1ebb341ab61ec9e7099ef178f8c5eebf5734e462107f0bf7ec9f0cdd9d2a390044a8dc999c87e5809cbc8d48ed5b3c8a8696eed1884ff86ee2acb0ea1d3a605fea84ac894db4023d0e0b4527d28ad438bf832755d6fcc3fb52cdf779f6f7f7e1972729c5f7ce3f298815e405578fd8e7da7ef53720e56c11d0301ced23b3a26d638949766a170d5a3d4102132cc9d77ce05fa5e2b0cb3563c5d7571a74042097f3772307fdee61c4ce1655d6ce04f73db69cc7d5d0d7c6cfc823e4e1c1c7b354b964d4bb61f2927757bbeba8e691e20c5add86221cb16390987059949d4cc272bed4777aeb4502f1a7719aae261910473bb91c4f3faa37af8dbf3d73afc40a385536bb47aff5c2af5d01df314568b6a7ca1b241d6707101bfbe219f96246842263b413456c7bd8b220d88ce2b62b86ad299eac0dbcbb0f9459b8426288855ee921a4d7f03a589b46512a3a713a18b6de6362b1cb9c95a148c7b53c13d19d66cfaac5da41d9eaadf2b722501cff3b70078d44c9b249483122ed88b8c80a62670f6d54de2684fee4902ca6cdd2623299cf121aea00496f4aea62279dda91b242da990ced7c7f2c17665107857b805a8bb737e2bba983e77d180373bf9cb785a726f612221758a25ec03a71b0430d13f901c6d321f2fc4da7c19c9e134bd1c5c2ad4f6934fd7194276936906d1ef91d0012942900c81b574ecb3bb7b863a69f4456eecba85fd129d17572f3a5b699c452c9bd24f4336c7724bfaa4ec0cb4fdd7e4ab30b81c52af661552627bedeffe7b6ecc1a0660eb79e2912eb0422d6f19d90a347c0a1ea3ef1b2cd1a16d4fb80c673270e32b0920c6f7cb533ff976c6e26d4e0d83d77dd6c11deab400c06c441ffd24d0c172a1db6313561c0b8ccbe8d546b59235f7e197c26927b6bb23bfb66d09662782fa9c10bb7b7e0293f4ec89525a57fb2f09a1bbfba9ced4687371c94906174fec666f6fc57a283e9491cf5512fc3b9b31e728658a36dae9efb1c12744e41f7b7649669e76701f3b339ec39379ce8aa04539377de3779e674cc3e5a211616cb9173b659aa8f523300d3d82a13ab9e653a3f3579391cb8c373aba06496d9183398e8d58d642aa2dcdce83d0a48f65b9a0cd650628342cdab7399c48f8e2a143d04b78723425e11d062319c1632df64be16c165b73124c0dea5d4d8bc6a263fff71fb53b058c77149090389c2850007c1578cbcc6164ddc038ff47dd9219aa97a629093d1c3c247087e83a58a8cf99856394d11b1938921074881ebd5d6b9fbffd8329c4a2bc1e7722290adadd827c86d57e8d4d1020a7f3a564dccb64534f2eb6fd94e165600fbe064509bdabd86eda776b9299dab73b05ac1dbf3c0561d1f48608159b02161922206cf01e05004273d2238fa04b96d4c26e3cbfeb594b36f77c4dc806454ee53aeb666d0f90973d8e883fdc18bf753263b96f18be430a56af4fb2b29e9d83a1ab861502815b6c5e0e0fed1be028c52161e82a8e8bebde4af2cec8c4f45e6b743829ce85924bb8a35ebf9638ee7927bdf4341ac71cd41cd748ee60243b204fbb120a5e19aea7b8b6e209afc069e871e61c4a73576dd077fc24804f96fd61b2ff0156b39ee76e473d302e732a9ab17ccb5ddb3436197b75ac7115868e98dcc71b5057231de1f61f8b5cd4c4d67d424c14fd0fd8c63519fa252d9b01702a9b6f794e938be4400901a83e452d9602f3cd7314496efdd765d8714a9efa737908ab47fa5978e903ae3e49e8c6843ae055cdb1c2183eb2cc7c653121604a3ad2e4d0bff33a34505700f3199ee0a4d10d2d908928810c62cf28590247d14069e803315099496003207ecbcfb794f0b6db48868f37ed1191c25a67c5955db38d8263db11509ed94cfbe7d92cadb3809076a1b741930ff6a5ff18fdb33b9daa37b77989b34e4ff78e0510cdd484dadfa895f91a9efaa61bb3bdf7ebc719a65c83377116e464ffb56364b6a2631ab57f2f7ada49673838ff880d3dc3e08b461ee1438252d99f8264281bcbecff973774047b5ff099da6f8618534a10f2a649c4d73f5c14138b15efc667e000df18b27e3a7e0deb311f9f5c553c82d2aa63473f806d7e18b2e24bca438459b236bbfedcb329ba759d3bcd1b3c79fa43f572ceefcd0443e002e5e74fd8047bfae153b1075072a89f234270c4dbdcbede4f3a4b875953f729e2faf77da6ef3badd8201ea746801844663eae1bf5b8961e059683b3bb7a9fb4c8f295d3f0165ab3c802ee3584ea7f1982f9d15c8a418cb2a134cba835e449714578de39c8422febe9277d8c2ea78f53f44952132384ede3385232e56ba7e5a7354b39627d23b8c337ea91f22f8073660ea83c551002f03e703e91e51bb83067f8b85632a3b57847e099b0d06f966eecab615b3ef3df02405a4d474aaab5521d22ca2fe0a5d97f8c1f48486796d2d90858bd166975c40c89bd69cd653d834e7304bbdb2f6395dc6efdf8749fab813ed42090549618f691ea295858c905346317f9c50e4a7b1f8b98293de606437cdd8d4a5af182b1505f37ea358561942a1802eb03ecadd07c45cc9de61448bf54055fac99b738becceb4255a0c08fe7605258d092d711afd610a27968175bcd3895527fd84bcc6873b71da278b2314f58285b6bf02355230f9a2f306a1d611792d0f199aa3e9177246536b4cba08f15122ed71a4762e87445b3229b6cacc7558751a75c92b7b68c58769441c7ff55993b86b7cccd013eb56109ef84374c55695670f7fcf9818e5b8e2de82d22a5c647b342bb4bc172c23c0d4d9f3f61529c95d2447d31122ce742d4dcf09ee604840a2085cf371fa0091fc70035ab959659ca903eb96fc8875e1287fc48fde2c46ebbd1f1c022bcd806bc3f1e460de471f897ba32b29f684ef03913340c16ebf279ba1c94d36e3b64dd76b5934d72c06ebfa9c106f20b31e219d4f1566d50773ded2d5fc6ff4fbd664fd055203b0c6e8fbc2b0c527e22989ff009316c9d409f1cfc6911f7c464f0283685bff5a7e2ea300cc2ecbe00f709fa8a0624c24c83156d392de356c4272460a59bb50de7e3258219e92df0b3563082b4d43144beec959440ad02ffd4e72cf9f3f73c18ed310e13e195c3e26b926faf1bb4f55923314c615aef600579152b29473bcdaac728d04e187265ff58894a7923b2025c92a37c483b97b652c5e14b2164369bbba5153e026e5090a49603da95f801381fea846ee74014f73656ffadd6199500c46855ca499e0448431a7cdaabab7db1d22a402a23527132e10413357d40e3d77d960921343979dd5e66850a853ebab947c86cd8f91b695d568309b91e83e6b25645a3f12237b42e131a8b319b8d6613a16ba73822f8fd7f1c4ce533a2731156f2f086578d5b58249dcbe0f454fa4bed61217f8d38655e9901b129fa956e00a0856a92aa92e7f26ced0dfe4495622edbdbb0164b31b256d05cbd4b67b15b2d331404c668c4340bbea299da0c0b70e38344ca539fb978bdc6d3e473f3fe8bd8278ea85dab931d4d0c2f534ba4eeacdeae35385dd6fe3a5c2493a247e54bc6835eb0d6039cec55c03192a5f8783ea0ea4e5993dd045991b4c8808c9b96f5b4c3d3fdb2bf137aeb518fe4acc953d302ca9bf09be1f60c9cd74d352db0ab823c03169be32006c50953b5125438e541f899914e6a1a5b93f775d893b5a2259bf3e7ee175ed38fa1da0a89742702cda27a7f8d7676309c0452385c727ff9420c93aa6a6735fd6fbd74e6bca0a93ac3c83da3767e7f703d06c9420040412168ebe6dea38536a09e2eda5ede9e58ffb0c748863bdf566cd3028adefe77fe34e85527d00ed87414a01c3ea9ac93fc3a822f7c85552547efd9e01fc560deb63fda6c38bb60fbbd3ddb8fde3016fb663902a958260fc6be348e0408102fb6e664bad214c36c85fa6c300ca16df0ad9d35925c155b55659264cb18ad45d10b96ee44a15825f5534cd0f60b7cd71daa9b32a6c0612274a7235d45820a2baac9b0fe806687e7e1aa11871e26e929052070ea3b8bcc9062c16275c48acd5df5a4932c6841d1ab95080eab81207ed50f60a2fb6dc6313bd00da58a394710e421277fff71f240b79397877ad91a00753039886b657214277d1f1f1da3b858f5ab5ab4f098857b981a3c90475656af17e691d546e02e0b0544db1cf2f1036e71ff17262c7317b0d31ebf09b4824527190304180c606132a2f485f728c3a047b3cfffeebf5250c6571b9faceaccbbe785a9937c6667e16b7b50eccc18009b85e6a87722dd63b578bee2054849c579c4699d8f8766b671ea054cddd813111fbf123b76b04ecf9ace6e18000aba3a4aade7cdcddba33c01964acae5c8111e5763c9fa58dba33d43fff1bb2cf4cfbac69951ec816e5c800fd3309a22fabf1941d1e4112b9f4b7142eee8976e084797b4e381a8260056ee7fe507556c8e3903fa015a0866e38ebba959b8211dbd4853b76b8ce0dcda016b290b322032d2387448fa6d76fb23d9392df115f58a6719cba2d9f4d814439f90782c74f9299b5e4d371cb18315928fb193ec92d75eb6bfbdee773bad40f2d9c7fd9b2a1663bb69a133d8ef9ecce5ed4b78f527c3fb6fe8cbccc66e0e58263bebb37e2fa29e08af7d83602f25b4830a69fec550d73c3710148e44b2ba19afbab63542a6a755ed1033c8eb336964e24d6378db79cfadfcf9242d8dc00bcf6b575a0747916215878c6fdd4c2d69e0bc7e58a471734754a62742e32fc9ee7c4aa1f82bf6d627dc6a4316820b1a2b43a14550be35c9635b85114f62ce0f48763dcb95cfdef36cd8681a685c632e84178867e0562d4d59d94f8e5537591158f52e9069da9797626ab9495fbbc5fcf82c709955b6b35ab50cb4a88d59ebf18b1787bcb6db2ef9afa19f873cb83a695ba4dd76819ed4ccdb9ba085b4b7f193c1759d0f040d1dbb32bb4977a0c3f77acef4f422770e1f89f8a5b253d50d9317cdb6bcdd9fc75ce2dfd4f0b22cb359df4acd50e694b5e780278f7fbdfe2c2872116ef025e2dc41db260838b8168fe177761b97aa5289d3aa68074f0645908dab2b14cf0abfdd1bbc02828bbaed657d9e86c2d0622d70e5f0444c5a89e947ad6e06c4fbe2abf9fc3d2d5abffb391eff95081ab9deb70bc6922be5d26c5a86ca230875ab22564efb3693de745121c41480d510a009ed72a932b2b9bb387747f8df60e3763fdb41f5e4cecdce4d8579bf865c3edab0d5beaf21f499e006ede81a8ff4ca5bf8e36d3ccbd3d608c05d02c6100ddb9eda68430b46166f110e2c5ffc339952744db004688b95f7a15db46f8b6feaccd699c49ecfdb7e1703ab38c25ea4a12856d010d84ed67233bec36abf49b89924c1fbca6243f0ac0e3024287437bd6f17a68da917b375a7f9201e54991a66fb740822886ce6e4ea67f6e607a3dbb290a42f90512cb21ff55d61d1c1a17fc06d1f193407a05e6354b3d3d080685242bb66bccc38ca4423d96eced1d98b520acbe05fb13588e9a900592cd8784bc4011632e994a8f5c75ba0787d95f903c3a22de28a83d04ca40fea543585fe13d2fa80afbae1ab3c0d521d18b2923d7689d095c928a0023f179a0dfb15560a1463332d8b602f535bdd217dae3ec875acc518847af9747ce0a03cb7713c045545a47fbe63f56d043d341a6836b9d686e8d73bc5ef96b729bcb5440a48e68b4373acb1fb89ffa402a5b60a9879c36da8c2d6bafb450febc06988a0bfd22f4c942926657b10ca92e382e9bac5a9587b0be8f6c6b7c363ab048c9cd9bffc12a8f894097ff11345e26445a3bde5c71182b08b2ff1a6e6a886f71e2c001ae4f64a27cfe882cac77669c6b3424e956b53b5396b03e27cfbfac6a768ccc68aa0516b001e181a85830a0178724cb13e1ec2dbb215424cb14116aa58da6ab88534ec0c26d2dfca57c2131fd1bdcf5608008755666fa8697ff64556d95eeb1cedab2c6d19c7f1ebce5fc9d058bfdc93e90630f492a39c37cdb96ef4e321b4544c82a2a140fd15d4b07e4e4b58be62d9bb9cedda9759c3788cb5717d4e218b4e4b37560db1988854d1d74e66a11a89b15a06f74f1114fcbf6eafb53801a4c05276d9ea26e75766268d610fc2c45ef1293e19603b125a1aa702d1769ca2a03c90e5a257d2fd9fb201348495d4d3d2201780977d3309afd0c243872c30c0afbf8fbe113b0dddec7f5acb2fb19bbf5ec5d6fd0ead1b1e888b3097c6d4b120d5a0c0219ebdf554494e3eac837dcc13e955ff480b7bdfd67ac122afb633de3d238ea3dd968211f17edb2f7ddab17948fba375d5621c939bf94191a2e536230ae8f978fc52122dc5180febdab6022fe748be90da7953897019ec2431c68d136a35782283ef4c8718a66412be225d3e316bf06edf6bde5a8ab5a354fce3ced45aaaacb2869a84efd7056cf66c1f49b470cbae650cc1cbbc699780f74696404e70ec3a2ee855646319f5993c6755458b0df0055754ca8b9174f258b7e7346cfd9a65d98d970b629ddbe5e56c00abb444844f59606b5daf98a89b6a98a8c001ac5c4f305e3ead4e8e690816c10df818e1ee030079a753bc9a226d122c6fc9b5bef8520191044a96ee6163a78a0097af0556ecca264d44c41a0e62edf204ee9eb7002672c77235663e768064e20e8ae3bdaa5c7e201efd0b83d9df2b934d75416f8676fec1b84c3e2021beecc1dff539bddde1028d8e91c83492e7c124c886346b44620b1138d8cc374d4873539dfa67e956c303de84ac99aa2d5c9c3e93cc2e9704c630e0547a010db19062a141a2ab7cf86c724ec5002edbbe662abc8ae0c168f4c4d7dc250427d71283a6258ea4a8531d8720da4385c7ac528b6911458503a7dfed7e23a4ae7145f886f58c24e8ae9df39c273d25125d2dbedaa33ebdd1310f8ced7506c02e5a1c91fdffb828e26690bc70f196c466edd8b97dd974baa8e156ba15da03c30da95ff2cf496e2006e6f4a267daaaaf457ba9c14392231a477844c910f8b2c9789170745a99053364b3ce6cfb1e263174062b3f5180e2947e1b3bc273b763ce8f53cf089af4897e82a8586362fc06deb33c017b07900f6d23b1a7f4dc356bcde1f17e43eebeae2d9696b98511928aa5a4e7d7549bfe8281ecddade2dcf82a268807808b86b6c98aaf51081ec7f171fdd30e9af904804cc5ce273833075719f55ed92c41bd12f9b1a79b1d8e3b8f05427df3b55dc8f8163f307b1c6de4fb6ce69c79bc3a6f5143344b54f898e0b46a17793c7d2818cff3a2144dfb6e7a151d3d9fc3659ed9d9e65e2d6b0c19ea44b0213b482d92a718c9f21aaf58acd9213e48bfcccce58f7299582028f09d317fa60bdb7ce44786396fa9a6fe8429f99274f61d17f06e98aa3708dd51c30ba033a319fb943e3715fb3bef4154356d6925e970f548c02849b533a65c4bbd9eecd7b8e3e053aaa466a62b011b8f3bd635bc3f14f8bfcec1bda49df9a41ffef764a669e700efd0d1378bb6f3376abd99c2b6bde827d8e82c1c6101e9eec6826dddce011a2183617a916ed0a2f0b091749cbf01397a8efe448e41f49d1f7ebdb60ddf91684050fbbdc449422ce5fec744f84ddda76f9973364cd3b6efce252e0582b6a07f778fcb52b8970635581295be43c60990e4724482c93afcd5da8fbc0659ad4c37d9257dc4dc7e8a428125658a96f60e48f6144bd971a9c2d142b42a32b432ca095e75206040b1b2ffb1c565aefa48d486a3818ab5f42e3cc4acdac9a72b50d740c164ceee6f5ee0f00a79bb3ed17075c32963165542a55cab99171021313b0b9a8113be7660f3ef228712c6c8e06030438578e3e69203f189875b5a26c3d90bc56122d4ad078f70f86d47a30d58502bc842360d6ce4c1894fc5974859ba786b5a342cbd36b0e9653b6073d53547ef009975edd65f7712800bfd8ec2ed8e7a14acd22731f85876ad0c0843b4c2970fd6ce2a034bca9d7ab24a9c5508349f289c8dbfd721ec908a1db398fa995ea035b796d4b4ab88ee6fa3213c275e09b4dba2a02510de7f59e2b43a79ee5556ca5d2b357723d08fa691b62ceea270b6a1e91bab8fb34a63c37e98ba03e8659aa7dd5e5bb5f58f2646ff8085410d402cfa0683a74b8666e00c32ac1237ab06627203d0acc9352011b97a1d51c674f353121adde9076a3cda5ec551929080808c7007af2023ca38fe10f76312c5dc0a1022f39306d54daf941d9de704d250557cbece028ec97bc59e5d1f01d9b0271885caac642ba8003abd9672a0ccad2ec6ff903e11ae726fa8ccfca24b72cb46e07434a952435ebbec41e636a1b4b67828e30baf1d9e414a3a29f45f5ce6281a5c6888bad5c3e48a8724070c4b534667348746fa9f3c1c1cf7a99cd448371f6d3a4797fb940234a609573100bfd47883c908953f5ca86b6492fa092ed640b7811bff898f906a35b56429431d8677b160773561ba39735b77b3803b52e535bf6af835c6afe11398bda1fcb8851532185ea276bd18f8e1ce03b86f2a304388281f6d1fc079d3d6022c3a9633528b2cc3fb90c109684f69c210cfe12a7532e14ee473b7242fbb85a12164262f4d15c190a1e9f594c4480432fbba3ba2899acbee659d961f68328487df22d155a57d2706411e03d50bc4f4fa63501e72c41c8128e2df965863e2c7c24f58b31b3639c638aceef0acd03965a0bffea99802e5b8797e06d54e536c8cc790c9005c9b1b490e7bf6bf8d3434216c4c81ff700054ddb9c6b85fc9d73500800c033f97979c6122c4a7605731c96c22cec29ac631b781ef654a0a2c3966d8c01bcb1ef048fe8239ecc99a6c0046a82d82eb0f14c68c122b6f729b8c11ee709858f10f869b80759889be732626a36cd9afd2d0f40997b7621a48f2f631c8f5dbc411a014b431065c2bf4f8c7742bf48b3748c011c310e67d1635b68e2afc6b8599335996fcd22a2f0f937531791e37caf08b0495e686add17bd40662f46b5a2673bb7841bbb7fb1a1e94c665248296fcfb4219a492e634c292ba94cde66edda400ffc1274703821901dd6dc1fb432e92375297c3706fa11dd20257c9b4715d42dd146bf393f2607137fb9b2b546e3cfccbd4eb923ad6ba3a7c586a00a2c12f814d1c55199d40edc3b0d6c7bfc1ea4e248a9ef9f64586f1ea70074ac81729a2fde9cb4e74ac77876096a0af0f3c0b0d89ae84109161032dae909ba6b2ea7801f4fb47445011f32345043bc1cbdc7a2bc7b646f0fcc3cff5db612c5335e440b87ca98442bc641c24d18bd1e80817f1d9d68c349bd53927f990781537e3c9babd0dec1cce68d211b2045ff9c0a56a5b6ef5a463ee97c71c2e2aa784bfaebf67fef30395214fdfbba54461e5ad19d3ddbe46d8def5e4a3eb4ad9fe456b1e19b554134459c97edb45ece7976f9c2ba80b5694af7d544247dd64a4e60c8cee377d189ab6cdadd9a875988f5416152afab53f52945e5aa726c605534cce4e65ac471cac8e3f5d4cbbbe81f0db0361c2fb6ca7b3f09cbf010cfce24269172b76e94957d217d67bb20af9bf2da9446c1504326d54c212947d3662ebd5508cb38a52d07f0dba1d991641886d25ff4dc5fc3d987fb36a6f8c140bfb939811301f10fdec6c4936924b5b0f949b9404135d6fd01f0b979247b263db2dbd80fc82624a3c13c36d8db50946ece3bbef3828d3cc03c72858dbe921db73a57cc5ebc1cbb1edce8afcbe51250dd428cdf5b3ddacd2b52f634412da0d2a8efcb92d47e577fdfedb4bbb1a1fadbd29d7a1c8cdf85e113d33d9b4a3d1e4431b08f7b788e3f2a80f0eee5f1cfd04907710adb5f34feb2a7838b6dde5b2a2de77f318cafc89fe752f13d0fe95ca8aed5c883b2f975e6edfcb1efd1f2914882e592ea53640562b8bb9f2782dd0c52e2cac94422253ab5b7f91bea82775945b15da29d13f2d2e7a9f6efe1f8afa01a324c8f8510898f54ec9c8ba1faeedfbbfed9e9d99544a2d95b90632faacc93114ba96f3cf3022f4447bb9428369f9100479a1ffcf1c106f90eac8cbc55578c22a702fe343de39b2d308d946e92014ccd5c3d85a78a2bfb2769c0bd675700b1ade7f7af419ed1a1f8fb133e87d956862be57260c4b0090f86246aff9a54d6397b42649c81870f63b28431a6b59c37fe6b0245a151b06d175b1e19a3e3ac22c39847843569eb56c45a45b2dd7fd7838ca2d5fc34c1cb8fff0ca1f4039a750294a4609f6bd4772b809c165eddbaf019a3bb13ca8e43f7a69371b7c131bd77a97093c25c5776f0404bbb86644a1cec60cda85863a7120e8e78b5a01a718a3ccef62f3a9d7969722e30e4be839500be19b73e5da0bc372f6d67348ea2db68cd10c81d7d394a69f9731bdb4b04cc7019f7d6ef16308af022a280deda6f7a4930455354bf8d84dafaf952840f8898de325b6e7176351bbfe9d7adadd5b1b611c926119ee693d6e23a9b9187c4238e1129e0960d0a43d7ca1b84dd4f849e8337c7f2d85bbc383397d1f8673facfd8ee96acf1b72ab87baf6ed9ce94808d2712ba371aa73c6215010f24cbf83363a46034b1c9a15b72dd0d04de527cfefb79a9a7bd1a01ba22df6f38be84a1ae2363702ade9e4b5ee904ed124e9e22743c14f801ee51310aad8951f8e54d0b56e5ce8b478f2837a909de1d2567abe5b81deec3c9d8b2c6a9d5e91f58a5e2f7deda2566faf48fa264dca32fce3e189ed43845280f5fafd3cc0f84fa66551ce84fa6f21de3a88fb44002555c6fd9f8eb322591200dab822fbf490493350711f1ce0c32532159260567248880f58aa14e00670381acfa0f37b3b85bdc4009f527918685a3324a514051b82a80f950e7ba417678bccd939c12bae8ab3d22b40969dd2cb2af85bc79a035bde13d55c5f2471a355e8033f7ae04a62281d71e541e07e918299c0c0ec4cab5c7acdaee1e77b785d8bea29b35d5a99f099f06fe40718478c0087a2ad0e77c6c6bfcda7ab618c95f50c223fe168e980aacec893c77446ac4dd02f69d7149f4df9708ef865cab9941e3a88e0e1f3187e92ee1c636388d0ab37e5e081bfba8263fe15cdd81a798595737ab8a93a36c96ccc49a1fb34228aab9e4a35baf89aecaaebc245a53f17232a13b3f9965709e14951f23e1a303d44a9f56b214b45aef33d22f0d3ab3c977b3e8fc364d2fc1b3f6dbb94b2be1b2e302bbf46858a0f8cd3337a47992431b4d446b94329d7e3d0ff4d6491251908232f45c70c6e66ba1674e254606cc28d0c8a821be006a186ff5ff2bdf9bb1578e651602e88b0cae329c386567e81ca0799839e8cac404d66fd9e0e9231e55f047a88d517d9020c6936fe5d5cc2c564c6dff039fa67dea7078d023ba53155abbb7040f402143ad35f6ddccddebdce24990bf8c7ca15afab0f81f75837cbfcea5da127c7eed96c88e31f00fbc8eba20fe2197c5f5df3ed7cb310e6c94bae55cce3bfb21ae49aa7ec614a823835bd6470273d00ed1e248bdbfc9733d6a070c243d569919b7db472cc739b67bf7853c97af1de6b6f38c9961c6a29889a74d29efc05b84e8b33e856549a5277a1f463d612418061ed193ed899c3c9e5fa3dad09f82ede4a2d8afc6014ea2d607aaa953d38a5227cc8859a62b3b3a5cbcad27d6470d0013d9494dde46e11cc74db0a62571037078ef06f34ea0d5fcb01eee3eb499e7364319084b3d33570267a5793e9050ed85b051b96cf8188d60d3ee881127daec5087f1e501ede1663e4655422aab699d2175f55bb1bb42b464aa368aaae7ad1ff4cba2e1bb35bf6c4842f33ddec53dbba03f6fed00c873ffe0d824b70f696e0c7c7502671829ccad29d85c459027c09386450a773f867fd556cde77015c35311100c50a598b5b4728a89536d5e48aa9ed919df619ca908196ca660689a34761100ed4d80d6f551b159c735c3e1d2d95408efebea5b6f29d632223db1b9820cbc3b6e747d1a38510c03923d76679bced1bb252cb24d86871828c1273d7c5bbd1098c1fc6e7bcc42da9381b970f2911772b2b6b5319bc44801fae298f781c49dcfb5b4af53b0746adda9d85643ae39f4d59755f23b6a608cf4930284226f92e3672ff4f0489856502c0b6fc203fa8ac92707cc8d1cd88b7ad7c74fe73594f536b61004cf4a26851ecbea7c76128ae5cd00de613095631aa0115e2eb1ac59af408eae00215be5725b4858eda8a957f4931497dcb738f1d575bdc6c96e64d4242098c38306282d7fe4d3cb7339cb92acdcc69456a75fdca2ca1e8a73e32d78257afc329eb4f3c79a6e90dce2c6b17a21870f975e6f89b7693bb9bb0aef4a892a411d572e48a1f09676d50255313761c916a68258b84ef22c23db0f4a692d6c418040d361d663597ff5a166b68c72d274c9a9690af46ae0a1cf0f73e6f3d7281b3f385f8c9e719295f454203cad468851dec137ebebe61e684a5a4f8aad4e5e203e3f6b4f78e5a6308986f50ac302f7d83ef98da76145d9c7649eeff22c24110c54a1450df65c206f12f34f5c4a6e6a8da3d77642e6d25959ee82d2c0bc3937296b4a00c2d28142a6009eb96e00ca41d34070c51108c41d0bbfd8a61b5f9e27c0c4f2ce38c6052847a93044387e22fe47d52899bae0f7cab4013a34cc4b2ad717550f9536761ec67dfc7e6f466e8f4b12dabb00e496270d31409e9146720ea907027768e71e6d9a8792f8a449d59382e808ae01595fe470f462f2793a252d2d495631066c8dbe1284e0ab01d4ec219d6651dff20f9191f027b1cc6fe44f1b09fe1b9b2cd66c885c132994e1b818f51909142a3818951f870adc8e07aa260946b3c7797c6b59e83d006dc538a1dfc78c77bb6fd970762a275ec7672cbe9f5c7e849b7225c940b619c481998b9a3e3d7a53dca80d30cfaf4bd0ec98877b8fbbcd8e7c8d73af323f70ff0c4cdca1fe50e0da7c2afe921b6edb3e92b8b69d615081752a4761da7ab4272e8d46c08719b7107fbce404b32d01d97447ae30ca949975d86315a9651ee7adc0f6fca8b7ae7dc4ad6a0570807fb2759b30c498c7670ffeaf48d8bd3c7c36053b8e1389d5b31fde719444f97a0d909bbbc3e940d713e5f4782cf51a5c49615595e88df9dd8b4049b5def169898133249b7b25639fd8d19d49d3d0ced56d2362992be02b6e604c94a7c66af098d6b4dca885f286be36dd6c9b89288a5aaa2e46d2c5c450aaee462460f3247d394636ee64270dc9ace89c6a56834b6ec5669d75641e2b034465f35432370651c307bf1849ac08ea018086013e30e1306e032b57a4f4cce8a314ebac28ca0cbb7322979cd29485e5386d18b38b3e13c5df2edf0e4af4306e532f4c807184e69ad78e6e1a358d5e13ea203087ddc1db9c30475d5353b525305c27ca7158015b7821c9bca1833e379c96165d932beac1ea4f0987bae760071b5437aea1838d12a979c204db1fe7ad15e36210e78ba2822ceb468fcea5f2c2c6acac519de00cf059501211e7f34f722b44add9dc6608375ce527d89c1bb8e6af9e51a15ce98de7f01a0f7e08cc0696bf78893421805d9e969e690e513ea914af38b90a93afae855453ed17deb3902533cc11b106185eb77264b8e4f46cbfdb4d95b55d24660f3047045c289db6e6ac63ef10d88943e60a6f7894c2b92ce3362449dc481eb401962ec4cbebbf4c1da0d2414fe964089f97938a6296864a5da9ec8d31a4dc7a1719737eeaeefb7828b7075cc9dc75a2f39f74315553384ad1b6d9a903b113055b590d996ebfb065f552c4c78950588ec73ca87c027f867696dc6cb44bf5efcf4cdd2b8d138c7078bf2aeb0dfb215567d9a3f82e4c9c39910f72ac3ce0d331652185c65067fe7f3d5475668257090e1490bc898ab898d0e297ee3f4fbb66c7c8c6f023e9b36cf03fc4ef556aeb79fa31a9e2602af813ca9840ef09509b54fabea26888fcde39fd44bb3bc98c2e881fb0af6477c8cac5a4e1e59870aa0bf4ff422951fcaac0e4ecd089a71fd8c4de4aa58b5bd98904665d7e0f045a7a56231f2157f430d209afe38242eec0ecb66c80d1cee53c66d4bc0792b78832b64edab36bdb4c193f255d33b11574f490f9c2f6a43266495ac7b276f748973070418ea03feb1d7e4e8335f0552bd735578c2e0cb3ff47745eec5a23227cde40a63f01a8841af9cd0b2dcf83918ab9bf45b2b19d278a000a969dfb02259124aeeb9f54f3b89dc12c821ece0c65db8110235356eee0afbfe5cc080a51e9f3fe6302fe77c5ae07192456663a2d7972d9dfcf48a7036080bbeacacee852f161a46f4cc3e30ec4dee91d2fd9944b798f4a3e5af75a65dd8d53cba1b25ae5340d1606fe023679c83bd9f11ada7e4685b8ebde5a1a580e2ab4b491237cc8da7a3199f08e8aff5aa26e81853f946946b4d766438e1d7008a836d4c2bd29087bb9f8b276d54f9e6ca56910b0811740ea3e32e6839877450ad6273bfb24d506b828634c6fb9ba9a09d66e689a13bad14c28c9d33264c46b03566c92449fdd15f415894f822453868ca032c7658d6297b6aa59f74a9b65b58fec4e84b30ac55e830a96d3256c1e86f890bec840dbb5f262763dfc303d2056caeec7494da5538c0ce722a920503129dfb7153bf64af9db29cf8689391bbbd687697615527f77ae7d91245452b6010802c60bcae700e0d099eebbe63d01174cebd26e15c6023e0a79b92e0e940b42ccf6254fa3a6ee72a49c8e1095a93e0ba62ec0a89522a3574fc435e9365549baeb772e84db9294c04d6f4bad5c002578b822349a6e26eb68f05fb5f5e25e2d5fd843514a563114fe917f1d578bdf6181470a87b1c80fd191fbbe767b8291c9fc1501a64a07e917c840521f1deb43140e7609fe7899ecf1b8da43428e926a1dbb5c8af1d66f04c85dfd7d955d7187706d7e6d26d9c550f3cac3cce1a84a5cb97cfebb9267ee839abfbab5abc06ee3b4a7e0cf1e0aa777478e42ce757648b1ff5d44886e9d424997418ed3cfa34fea3b44633bbeef70289fdc70aab0f8428c47682d2729a3431aeaeb211b3b2cb6bb1ddab77fecea61f25e1a0d6782a9dd0fa81868e1c8eb4c046c5595162315b0940295267b65e5ab3be8b22befd1ba81bc72a8b6e1364d2e64753f63cb071193e687a8cf3ef25454a505f623d311780b73e562233c13ba8e35d833bbbd584b290e186ab0ed4cb585fb87b6f1bc4b11f673edf2915c97859b3fd79e21415ea0a46ac93de993963c0f901e4b2ecd37a1a23b4e39b4804fd4d8a5f18c9f852f316dc849286815619da6643a0e2bc38ccf0d911bf76bfd0f0e41fac2e28cdbc00f1848073bd3f83d008932890eaa59bed18ee5f2fe47b315591905753db671103eff41ca43c516dabf69c2fe0c8e80fd8d169d92f2d1d727fbe074735d25b90e2c0561f91044c564f696da88278dc731087eb5c6597894f87e4b779f0e95a91fcd5343666564e6cbbd6e11dc427960e745fd8338dd6b75ea7ef75d59f6b08d009f99541bdad53680dab8585b1ae796a9c060e71d4ef1be3b3d350ebf9680719949b7ef0d1bcca22f7a394ae6b1a30890736ec72428fa289ff8ca8d01872081b936ca8380a3af8971cedd79541e1f85ffa28b590947691957c1d239a686525f9b1b99d181280f1294637716712d5036c01615130e41f82a11f99d932ee148a873f1524f0c89a0d4e985ce133dc4834122da4f654f82d4be0e40fd37b95de9538697cb962a4e14c8651e08efaa6e77e24eb526392ab89d16ca9877bd45536201bd16b64ef9763e93b3db8f2dee62d2e6d6067567fde1e16e47575f25e2e0ed8c6b8c40261a6dac415841eebf0f761d7c9ea751e3b61f0ee4b90cb332d1aab5cc4a1f3b20f65df25e6c077707745fcce41ed8fe6ef3fb2d0bb86a99cb2eec1a0d5515151595480c8ddfe3fda06a0828305b9afd331c0c1c3d942a8716d5de4a11e749bcfc5b3954dd6f95a4b78f0a84eb74928200c3e67f9c1fb83d44e6d92ee33bf4a83674aec4897655a5efa83dad02d973910cda17af01fa9dfcfa6947e44117a845cb185d38e283e2d80b339e6d7c4f2b46d87b2f022d306aa5b407ae04d0dc40f6ba16f9b09963ec2709ac5f19d236ee8e43ac716b27c15104f2f0d1ac5e74a298506857f00eb222ed5dfdb7f9d12ae86c3bab055ec39422c0e296f83d675f59ab5d5ae1420145f0d971804f404a7cc6183049b390e3b3e62cbc0852557931b6d0113917f03cece822eccb8726175cee151823ee35305e9bb187352e5e211ef411307fc1e05af75cac4eccd18e5266c454ef22818d6360b52941a5cc9e005f21a2bbdde4758c8e2d71589cd30e5d0e90a7e77162a247941e6e74e9925fec5d679ea1e6a962622f6704713f4ca4381f52171764bdfa5ceb5905f65072ecdf52f4e85150ae82e0b19ea3b3d810d72220d5237cad800b1e2badd3acb999100509c10c62f21396087e37dc1b250f5b8124f0bfe8abd6556f3f4f85fff62f0f450b6a069ea67a44912e346ac50dd0e7eccc15fcc7b876ad81f17ae6297901e7dac0de71fc2c3de98b1533a6c32923be9400095c57ea7444ca65f662db65b5ffe97331a1c8cd55621108435ff6f0aef4cd7a4c1edd17eda15f6618c335865195b351619f708193a26ea9736a4c391804430b42c8ff7f3544bc46f2673b7b87405ebe730f7f969572888e2b88fade92063844c279693b7331a29578335aa7140d4f0d2e3af4ffa29880cf338bf426dc87e20fce7105a533a83c41a024e6256318542767a44709ca45a56233ce3a96bf81bdc616fec802aaa3ec0e15d094132de1d11a558b16fa57382826e3edb9ac6aba7eb0dcb851a011046e36d8c46e958c82d96905643cf7c0ab2763b8d5a8ab47d172b993669670d8495109d4cf242032023cbb3240b4417a7bfb57f37067191ea896329abb71015d8430bdbcb55c6a0c1bdcf1487749bbb05a59bdbdaa05b50945d0b7348e50dc219e6aa57e29e0ec96c8a20a94a93aac00e753231d8f35a0c2e44376f933c7a8afcc6f7c738595936e3b885ad4f4da95493cb5f785a57c2f83d7531262222e00a09a11733b3d1ac42df74ba07d2c207f0692fd04c39a3aaaaf2351f8d723b8f55194510c090a8413fd2aa0b13c975f22961605f874b7ef028455c171b326d3c16ba9a2b0121de9264985b3299f0b900325c84152d7e5d1f4358c4c1bf6c68d956d3144b068981db90bc54976e7d1ede9e48a95cbba0ddf8d0a08b7daa20a8ac42503f8f32179ec33128a1db7b7a7ed2a9690c3a456f284b36c6ab186b05d519b979a066a5438b9a177fe1a9a3a74369b115115221dbc4315499444e601eb8d88f72d20eaec0d97cab4aa4cd70191737b6c19d684835210e3b48e450bcfeb14215082082c02cbe4fb483058647519e94302a7752288a44e9178aa0fd9947b69799b49d3b7f3ba2da41783ec652bd960fbaa995d8bc7653c092e3f0714946b06f064ff028996e098bad1cc032ff277aa933dd8b4fada4bd93249d0cdf1a373162bb636d457fa732b40f1c51460dfc16ee2f711fd731396e46f50e997cedadc29fa4302f9027c5442d895eeae5fb7358ade55cab3f9e5dd7acc82095cea48f9ba11ef4973bac132ecbd9ffa2e542dde0ac332c8e5cc6b688a62552952376ef76996ac417411817c77e91b8838702d9f3511fcbf95d62a16f638789193cb88f4175c8267a2dc5249e67f1790510fa728cdf24a215c368929c0ffcde5cdc256ce1d177b26f50517e26ff8769e292b3650604e9f8d80dd1b8427482077340704807cb3b548e6d52f2afa1149a1edef29d98bb98d8213886c3d00bd20201dcce8231e9193092c3e8b996e304a27f61824579892326055ecd4d4d76b2fd081240e58b91158e2e0127229ce72f7cea49d54a064165f34725b6edb185437d4fa02a1c9310ca851d300fe1d6f62404ffe967cbde3bbd673ac58f7abeb02c5193347669825425733f6016bbedb62b9467cf65135bc129b451793b7b6bcd9a05cc5b55deea43d0e6957b5bd083eefe4e7e04c6b86d35ce36b6d332cf0d6028b3052e5c99e5b98a187b50eb79c9f9d75e7e1eda32ac88f465503f67a5864de8a188140f399421fe43c38bb7af89c468a180ca8dfe9f496c8284a1d69f2baa851d08eef53a826caaadff7ef50c76eb771e800ecb6ddb15e23b52f33fcf50cd4a5144b55a53b054273e8e6f2396a1c45ba2f4d90b16006b9136d0c63bc251c4a88158b5d3048c0be7a39bd1a815fb1062b001fff84f0637e4ef0837e2a0060dd2dab9999de680de745ef08ac4a1b29e8074aa9f4e13aaba70fa7b31ccc091784ea10dbbf55427fb04e3114032bebacd389202160d1646070fd9f619328623fdf75a8be8e22b7f0ea192dcf5ebab219deb6ec5ed75a65ba4a3f85001525e6cb148161d4c76df3916cbc2474d03c448c7be7e849c05d580ca1731fdb278a862b248b241c3cb14afc5958601dabb9a48802ef6a6424485091d9f31808c38ac294de1cfda6e909cab9d665669d38df234bd7b7c6e0ac23ff40f6f4bbe97c86100eef163631a2ebd39b5dfad2678365b8546cbb89075906e9b271deab9180324f8578a9919a3f84cab4d52e8012bfc02f136d0c8ac2afa653a9f22a67254fbd2dbd9fef33971c5504ac2a2073841f0b2b5b18987a12d350cb7fca087137a043ed23e934b430da7d19410cca14140a1f3f7a4ad297a3a403a29275419d46a9e616477fe0123fe8bb44190a3a53ce51d08efd466f6489be3c6a11b8e5fe5e58e99408133310ac5d7f76a7c88556b838b907b22a36e8a2d9e7bba4af9ee88d6fe6c892bb1ffe1dd1694dd72d22ccf5575e519644c401a8b033e5ce83166a81f74d991cbc894f928280ff13b0f4b2d86f24a63b5bd7d613ef55b80c758977c1ad4f74e7c6903eb61ef69aff552c09e2849a20e7af0f3e0baf2f8effee5cea87f4835c46db00ffa6729af0875b70e3ac7b8c8377a87d89503fee11fce6ba74410b784fc6324ed79b32173832b17342e4037b1d9f8e1a9a501a4f52c4861faf6dfee0a89dd1ef3cf5b1829986524057680be7ae7c6dab64a1c67607648608726bb648c7abc03acd57554fee232005c16df52e648f72b8b33f9ec98379bed337c82df7f16dae7f4352e4906a8956c8efa5ad495c837aaaf2835ecc7b3e35022a6dea332a459e71b48a2d43a173fbc6c138d1feafd0f61c246020c3ba06de9ba25bbe858fcd42624757e8b0c9a31bbc0372b701f2c7c11a113b3f1a11609a8af1ce311151c9d400df015bb62f95d44c9f6e520e4b43d44466d8f35583bdba3782352fcd30e25ff9559597bdd05c49a2b8c696c82e041abcd61ba1e3570116c30c9ef3a561a0d1bb5cbed71212016136fa65056980e6862ea570d99504e150e94ed8cb4b88d0e925ede2546cab2f36d1d79a0d9671771221c707bf01a12acd1632737104dfe813fdc0ba86683a1c3791e5a78d7c4936fb3523a762f7d8948ec2e758c15b62c550b5f0872fc6f65f9916d06d352aec6b2a51b0ca99949a74eaafeb22d92ecc20cf99aca4071bd5a3578d8cfd8447afb4b6e3499c0e08930b018dfa79044b93f24dd8f100b47720d8c0d5f3933bc37da3ebf9ee26a83d7cd330162ac47af97a33f6ea23434ff0ee08fb9793c7c7c7e6ff6bdc64604158960edc908c49c81e013e273b44299817f5c4511cdc802b4375ae017830941d4e1758e5c330843149b7d02442f3d80d3d3aeac1d55663abcea820130897c21689124538c087bc6c64321c07de558096b73b4528e40912cd0f8afc35d42065ab7de2e02d5167fd8c889add5e8c85967a2c8add82b64f92e68fbff972440ae5a56e78afdb4790e8fda1e335c428fa0e3c56820a4a935569dd2676258dc71d658e13c53342e202d59264751b13c78178b24d38138d418183dd6564ab5681c9537ba1220e9af69d1b189fde3843fa2bdb98f0fb9ebf8edf45cebef2fe1520874ebe483902821a245cbd9ef478b8058d34ba08f745fd150e3255f623764a17b3c09cd63a6ae4cc5101a337d41a88275934cd9edade1a7ccb78a901b8fa22b8c71692668cb71df2f111aba6c105d641410525228f03bf0fa1d84540107f03f7f07a7d51bd55cd2bab2b0596a8c0ab57207960ad1d916342f26cfc2c967fc384cf7d52be7b2a1f01cf265505cfcf7fc3441e7d35d01d606059e249bf9288e68197305e4adcdaf382a92c394931a61c1f568295277e198f8f13c193574a4881986d693f0e705dbaf173377837200134c95cbcda8a996e3741eb1f9dd5f80144441218e3e9ceda4a6238ff3abbb2498cfb1bc6d6ffd1fd8eb2ae8a3cc5527c2907bb0364522be98e11817e0c3871f3bbedcef9dd59f05b861b551695e3050a19b47577927b00f8d7d08f402463f6d959543baa274510ab4e1f587530702a955d5337c7dca4def42f610cc70c65f47c092592681f69b6400a7c837b051feed3031cbbd4c2cae18902e1fc69cd47a77c63f68eeb0fbc679194272a0877fc11d217ea7db8d8ec542dc08c3f3382aee22b820383822c7b4fb16ab5c85c0144c4504638f213703c4f0b9e5960c39d959aafcc76196be486d33e62421f85020f407a63211c9f8c2559ea98285dd282d491781cfa474d273669432d54cd967ea10473f21a7e4a75510c10048936faeccc95a2c83533c84fa94053170a66b49df61d60b63996108bc026fc91ac828a9429eb284d1e792a298dcef91cb7506bfe05e9e6a63aa8bccf3417ddcda009a91d3b661ca1dcfe5aaab28b6791e805ad6631ebd00f3d737f8176561af5fbfc2d967c741e9e5b4139922ceb0eda77b0ee40b5439a2c153baf338dd208833a73409de7743fc6d4a60215087689a318289dd7d652044c4bc13b2e7a1bc5034fc388b7517c2f087f75350818b58394ba18c777bf686870dd1edb691114830d3dabf35267c26c1a80d8f4d00578f094577a94fb71b8ab4e4d4e8076104ea02012fd74edd743dba1343f7ab5460850d0ac2ffa3ef5664d12b035726da0317d56f53caeeb23169105cef0cf45ced531764b638c9e6ce9fb9c3b63462185cb115d9f27d28ca6b4d93cb938b4698284f4a86f34fd64a82046e9950611de71bd49249ecbdbffaa52ee4bdb4fc87728e7ec55cfa6dbd4260bbac44fb9883f93176c0a00d7e36c8e5ecc6a753b9191189effc923855b5d05e2f93458525249c1d3d9a0fd5ced7e95a399ea5b5c57f1fb6f67735bf7627968245e07837f147c0d5a107fa9149b9b9db6f6c37a2795f4cc9c2a451f5d31cb25f3bbab76dd7ea66da4dc15c1e4d28e4713adbe4ecdbdbe4bfd7b0f562845b75634dcd85a8449c8dcaa0b8b11f55a480bc3c42467cc48d8e1cf4e5cfefd07615e263bf69ebdf5c1d9e7f935c27e83fad39ea755570529a16086f24f9304c40afcfe93d8e337d10b14f10393bf50d1f30cbe7520d0dd2cb537422461ace7c1b2f4f7aceabfd99324de58e045ee7f9461c4462ee72efb110f65483f17426fa4ff79b811647440f45bf639afc3e645644365d8ff196007ea2b74906f8698acf97e14322a3264c399caba122ba470edbd6713abee4c37c53921a401dd37e6317457f9b9216643140de772ecffc95b8d80535650a56afbee11a27b53a89a1eafa50eb054a63b6cb99411db1eb0ebe7b4e92e12d1e878f0f9302b936c8dcc69d6c48f12a5804ddb24f3baf89d0671bbf36c19f819bd2124d6437cdd40176ec52c9a7470fcc579360cfdc883b402806ef86f4b40f5b4c7635ac659f8600d5697fa5d1f1955a9c918a865fc0f694008ee69c4b45af9c89b2bac8c9b7fb0e70ba596b35fece39dd47c3dee3a95333e0935de2b16f8abab8ba668737c8d0393214ef73f5c668ca7fa5bbc976539a44185a5cc875e474292e65a089870f5e6cd935a352e23dc2017f993afe7662210bac3e9bcaa44b719241e936ad049631754c3a2ad853cf431d4f36ae4f5db0302419d764498163e07373ac31f41644f57fb461acb9bf232b0af847709fd2f945ab5707ed7e1e0e92067f686d14da185372f5820bb42ecc29f222a8604fff5356886ea7b06796aba3a1e193f2986004866234c632d67f9a615fe7e741b82dd787510d0cf04cf3bc83aa0643338334636f0725423cff4a999960a95b0fe3971d942f49097614716c4e3cf52560814dd77ce6d268cc8fc57e692bef1106e5423ec854a93b9957ec2f4f6c8ab6f7b81cc3f712191890d58b50c4a141c624dae95014e628b23a67b284b9be9bc2f20c300724008fe071af2fc4151cfd46a6a977ef4b5de78f5dcbcab830641b9727d93c2b9a490c7914757f64aed0eea419e5f68e40587661c6fc209e74d830b5aac60d07b544fc8caae0306fc1898f7eca924d08cc41624d30b844727d1d5e846f5d1655b7d066052aa5ddf7af328125455eb9efa6ea2f7585d9607cd6b9042852ca97cb5709b074b5f18ce3fe188faf67f9e08e4c074f25f6c65fcfc52ded79138e4ef771177918897fa5fd6a32b9abb918ba0aa08a537cb5559db6c88b8432559e64c3f269c9c2cd128e8a176419c0afeab86d2c07826f8210882e825357d335050e270f87bd1c9e03870ceedcbf731f1ae8a19ef296340ef31b893c07b4630327aa59184dbabfe0229ae9cf7fe926ee757b1337dd7c6eb20abc4b7ba46ff304a5622b7d40e7884d541b2005167f31692e2749004e859181e25494aa9dac975fb096a4ab0ae78b1f001620c99e2d0e5a8a820ed9046c26f702e6c5c036cd993cd5a866d1aabe226249f0b57176b2cb0cc50ebebe7288bb86069c69990e53df59299e7da70dfaf5cf7c491f76daefdf98feca294555698a52ee54f72256ff6ef41706df55dc5fee5d811c6442b670a991e9376238a4b0241b9aaf6faf509b948e0edd983518180634589ef07b33f16da10e97fed8d1bc0e103b3d68ea119773e0a5e2e63eeb077460889c9d9de352392588a32f03f3baf3dec4a7e420c1b2128c</script>\n</div>\n<script src=\"/daydoc/lib/blog-encrypt.js\"></script><link href=\"/daydoc/css/blog-encrypt.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{}},"excerpt":"Here's something encrypted, password is required to continue reading.","more":"Here's something encrypted, password is required to continue reading.","origin":"<p>本文主要用于讲诉一条流怎么转变成多条流等，也比较实用</p>\n <a id=\"more\"></a>\n\n<h1 id=\"flink多流转换\"><a href=\"#flink多流转换\" class=\"headerlink\" title=\"flink多流转换\"></a>flink多流转换</h1><blockquote>\n<p>一般分为分流和合流两个操作</p>\n</blockquote>\n<p>涉及的算子主要有</p>\n<ol>\n<li>connect</li>\n<li>join</li>\n<li>union</li>\n<li>cogroup</li>\n</ol>\n<h2 id=\"1、分流\"><a href=\"#1、分流\" class=\"headerlink\" title=\"1、分流\"></a>1、分流</h2><p>所谓“分流”，就是将一条数据流拆分成完全独立的两条、甚至多条流。也就是基于一个 DataStream，得到完全平等的多个子 DataStream</p>\n<p>实现方式：</p>\n<ol>\n<li>stream.filter<ol>\n<li>缺点，相当于复制了三份流</li>\n</ol>\n</li>\n<li>早期版本有一个spilt()方法<ol>\n<li>也可以切分流</li>\n</ol>\n</li>\n<li>侧路输出流<ol>\n<li>Flink 1.13 版本中，已经弃用了.split()方法，取而代之的是直接用处理函数(process function)的侧输出流(side output)。</li>\n</ol>\n</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> sunrise.demo.stream;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.common.typeinfo.TypeInformation;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.datastream.DataStreamSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.functions.ProcessFunction;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.util.Collector;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.util.OutputTag;</span><br><span class=\"line\"><span class=\"keyword\">import</span> sunrise.demo.function.process.SideProcessFunctionDemo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> sunrise.demo.pojo.CarInfo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> kuiqwang</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@emai</span> wqkenqingto@163.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@time</span> 2023/2/16</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@desc</span> 测试旁路输出</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SideOutputStreamDemo</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\">        DataStreamSource&lt;String&gt; carStream = env.socketTextStream(<span class=\"string\">\"localhost\"</span>, <span class=\"number\">8883</span>);</span><br><span class=\"line\">        SingleOutputStreamOperator&lt;CarInfo&gt; sideCar= carStream.map(s -&gt; &#123;</span><br><span class=\"line\">            ObjectMapper mapper = <span class=\"keyword\">new</span> ObjectMapper();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> mapper.readValue(s, CarInfo<span class=\"class\">.<span class=\"keyword\">class</span>)</span>;</span><br><span class=\"line\">        &#125;).returns(TypeInformation.of(CarInfo<span class=\"class\">.<span class=\"keyword\">class</span>)).<span class=\"title\">process</span>(<span class=\"title\">new</span> <span class=\"title\">SideProcessFunctionDemo</span>())</span>;</span><br><span class=\"line\">        OutputTag&lt;CarInfo&gt; littleTag = <span class=\"keyword\">new</span> OutputTag&lt;CarInfo&gt;(<span class=\"string\">\"little\"</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        OutputTag&lt;CarInfo&gt; bigtag = <span class=\"keyword\">new</span> OutputTag&lt;CarInfo&gt;(<span class=\"string\">\"big\"</span>) &#123;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"><span class=\"comment\">//        sideCar.getSideOutput(littleTag).print(\"little-number\");</span></span><br><span class=\"line\"><span class=\"comment\">//        sideCar.getSideOutput(bigtag).print(\"big-number\");</span></span><br><span class=\"line\">        env.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2、合流操作\"><a href=\"#2、合流操作\" class=\"headerlink\" title=\"2、合流操作\"></a>2、合流操作</h2><h3 id=\"1、联合\"><a href=\"#1、联合\" class=\"headerlink\" title=\"1、联合\"></a>1、联合</h3><p>最简单的合流操作，就是直接将多条流合在一起，叫作流的“联合”(union)。联合操作要求必须流中的数据类型必须相同，合并之后的新流会包括所有流中的元素， 数据类型不变。</p>\n<p>我们只要基于 DataStream 直接调用.union()方法，传入其他 DataStream 作为参数，就可以实现流的联合了;得到的依然是一个 DataStream。这跟sql中的union作用相似</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.time.Duration;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UnionExample</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\">       env.setParallelism(<span class=\"number\">1</span>);</span><br><span class=\"line\"> SingleOutputStreamOperator&lt;Event&gt; stream1 = env.socketTextStream(<span class=\"string\">\"hadoop102\"</span>, <span class=\"number\">7777</span>)</span><br><span class=\"line\">.map(data -&gt; &#123;</span><br><span class=\"line\">String[] field = data.split(<span class=\"string\">\",\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Event(field[<span class=\"number\">0</span>].trim(), field[<span class=\"number\">1</span>].trim(),</span><br><span class=\"line\">Long.valueOf(field[<span class=\"number\">2</span>].trim()));</span><br><span class=\"line\">             &#125;)</span><br><span class=\"line\">             .assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forBound</span><br><span class=\"line\">edOutOfOrderness(Duration.ofSeconds(<span class=\"number\">2</span>))</span><br><span class=\"line\">                     .withTimestampAssigner(<span class=\"keyword\">new</span></span><br><span class=\"line\">SerializableTimestampAssigner&lt;Event&gt;() &#123;</span><br><span class=\"line\">recordTimestamp) &#123;</span><br><span class=\"line\">&#125;) );</span><br><span class=\"line\">   <span class=\"keyword\">return</span> element.timestamp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">       stream1.print(<span class=\"string\">\"stream1\"</span>);</span><br><span class=\"line\">       SingleOutputStreamOperator&lt;Event&gt;</span><br><span class=\"line\">env.socketTextStream(<span class=\"string\">\"hadoop103\"</span>, <span class=\"number\">7777</span>)</span><br><span class=\"line\">stream2 =</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Event element, <span class=\"keyword\">long</span></span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">.map(data -&gt; &#123;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">String[] field = data.split(<span class=\"string\">\",\"</span>)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Event(field[<span class=\"number\">0</span>].trim(), field[<span class=\"number\">1</span>].trim(),</span><br><span class=\"line\">Long.valueOf(field[<span class=\"number\">2</span>].trim()));</span><br><span class=\"line\">             &#125;)</span><br><span class=\"line\">             .assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forBound</span><br><span class=\"line\">edOutOfOrderness(Duration.ofSeconds(<span class=\"number\">5</span>))</span><br><span class=\"line\">                    .withTimestampAssigner(<span class=\"keyword\">new</span></span><br><span class=\"line\">SerializableTimestampAssigner&lt;Event&gt;() &#123;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"> recordTimestamp) &#123;</span><br><span class=\"line\">&#125;) );</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Event element, <span class=\"keyword\">long</span></span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">   return element.timestamp;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">stream2.print(<span class=\"string\">\"stream2\"</span>)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 合并两条流 stream1.union(stream2)</span></span><br><span class=\"line\">       .process(<span class=\"keyword\">new</span> ProcessFunction&lt;Event, String&gt;() &#123;</span><br><span class=\"line\">          <span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">processElement</span><span class=\"params\">(Event value, Context ctx, Collector&lt;String&gt; out)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">out.collect(<span class=\"string\">\" 水 位 线 : \"</span> + ctx.timerService().currentWatermark());</span><br><span class=\"line\">&#125; &#125;)</span><br><span class=\"line\">.print();</span><br><span class=\"line\">       env.execute();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>水位线也还是向左取最小。</strong></p>\n<h3 id=\"连接-Connect\"><a href=\"#连接-Connect\" class=\"headerlink\" title=\"连接(Connect)\"></a>连接(Connect)</h3><p>连接流(ConnectedStreams)</p>\n<p>首先基于一条 DataStream 调用.connect()方法，传入另外 一条 DataStream 作为参数，将两条流连接起来，得到一个 ConnectedStreams;然后再调用同处 理方法得到 DataStream。这里可以的调用的同处理方法有.map()/.flatMap()，以及.process()方法。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> sunrise.demo.stream.old;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.datastream.DataStreamSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.functions.co.CoMapFunction;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.functions.co.RichCoMapFunction;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.functions.source.FileProcessingMode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> kuiqwang</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@emai</span> wqkenqingto@163.com</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@time</span> 2023/2/8</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@desc</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CoDemo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> HashMap carID = <span class=\"keyword\">new</span> HashMap();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\">        DataStreamSource&lt;String&gt; carIdSource = env.readTextFile(<span class=\"string\">\"/Users/kuiqwang/Desktop/gitfiles/study_record/study-flink/src/main/resources/carFlow_all_column_test.txt\"</span>).setParallelism(<span class=\"number\">1</span>);</span><br><span class=\"line\">        DataStreamSource&lt;String&gt; socketSource = env.socketTextStream(<span class=\"string\">\"0.0.0.0\"</span>, <span class=\"number\">8882</span>).setParallelism(<span class=\"number\">1</span>);</span><br><span class=\"line\">        CoMapFunction&lt;String, String, String&gt; carCoMapFunction = <span class=\"keyword\">new</span> RichCoMapFunction&lt;String, String, String&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">map1</span><span class=\"params\">(String s)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">                System.out.printf(<span class=\"string\">\"carID Map的长度是：\"</span> + carID.size());</span><br><span class=\"line\"></span><br><span class=\"line\">                System.out.printf(<span class=\"string\">\"this is res:\"</span> + s);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (carID.get(s) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    String result = (String) carID.get(s);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"result is : \"</span> + result);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">\"this is null\"</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">map2</span><span class=\"params\">(String s)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">                String[] infos = s.split(<span class=\"string\">\",\"</span>);</span><br><span class=\"line\">                String carId = infos[<span class=\"number\">2</span>].replace(<span class=\"string\">\"\\'\"</span>, <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">                String res = infos[<span class=\"number\">2</span>];</span><br><span class=\"line\">                carID.put(carId, res);</span><br><span class=\"line\">                System.out.println(<span class=\"string\">\"carId's size is :\"</span> + carID.entrySet().size());</span><br><span class=\"line\">                <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        socketSource.connect(carIdSource).map(carCoMapFunction).broadcast().print();</span><br><span class=\"line\">        env.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ConnectedStreams 也可以直接调用.keyBy()进行按键分区的操作，得到的 还是一个 ConnectedStreams:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">connectedStreams.keyBy(keySelector1, keySelector2);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"CoProcessFunction\"><a href=\"#CoProcessFunction\" class=\"headerlink\" title=\"CoProcessFunction\"></a>CoProcessFunction</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class BillCheckExample &#123;</span><br><span class=\"line\">   public static void main(String[] args) throws Exception&#123;</span><br><span class=\"line\">StreamExecutionEnvironment env &#x3D; StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\">env.setParallelism(1);</span><br><span class=\"line\">&#x2F;&#x2F; 来自 app 的支付日志</span><br><span class=\"line\">SingleOutputStreamOperator&lt;Tuple3&lt;String, String, Long&gt;&gt; appStream &#x3D;</span><br><span class=\"line\">env.fromElements(</span><br><span class=\"line\">             Tuple3.of(&quot;order-1&quot;, &quot;app&quot;, 1000L),</span><br><span class=\"line\">             Tuple3.of(&quot;order-2&quot;, &quot;app&quot;, 2000L)</span><br><span class=\"line\">       ).assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Tuple3&lt;String,</span><br><span class=\"line\">String, Long&gt;&gt;forMonotonousTimestamps()</span><br><span class=\"line\">             .withTimestampAssigner(new</span><br><span class=\"line\">SerializableTimestampAssigner&lt;Tuple3&lt;String, String, Long&gt;&gt;() &#123;</span><br><span class=\"line\">@Override</span><br><span class=\"line\">public long extractTimestamp(Tuple3&lt;String, String, Long&gt; element, long recordTimestamp) &#123;</span><br><span class=\"line\">                    return element.f2;</span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">);</span><br><span class=\"line\">&#x2F;&#x2F; 来自第三方支付平台的支付日志</span><br><span class=\"line\">SingleOutputStreamOperator&lt;Tuple4&lt;String, String, String, Long&gt;&gt;</span><br><span class=\"line\">thirdpartStream &#x3D; env.fromElements(</span><br><span class=\"line\">             Tuple4.of(&quot;order-1&quot;, &quot;third-party&quot;, &quot;success&quot;, 3000L),</span><br><span class=\"line\">             Tuple4.of(&quot;order-3&quot;, &quot;third-party&quot;, &quot;success&quot;, 4000L)</span><br><span class=\"line\">       ).assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Tuple4&lt;String,</span><br><span class=\"line\"> String, String, Long&gt;&gt;forMonotonousTimestamps()</span><br><span class=\"line\">             .withTimestampAssigner(new</span><br><span class=\"line\">SerializableTimestampAssigner&lt;Tuple4&lt;String, String, String, Long&gt;&gt;() &#123;</span><br><span class=\"line\">@Override</span><br><span class=\"line\">public long extractTimestamp(Tuple4&lt;String, String, String, Long&gt; element, long recordTimestamp) &#123;</span><br><span class=\"line\">                    return element.f3;</span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\"> &#125;) );</span><br><span class=\"line\">&#x2F;&#x2F; 检测同一支付单在两条流中是否匹配，不匹配就报警 appStream.connect(thirdpartStream)</span><br><span class=\"line\">             .keyBy(data -&gt; data.f0, data -&gt; data.f0)</span><br><span class=\"line\">             .process(new OrderMatchResult())</span><br><span class=\"line\">             .print();</span><br><span class=\"line\">       env.execute();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#x2F;&#x2F; 自定义实现 CoProcessFunction</span><br><span class=\"line\">public static class OrderMatchResult extends CoProcessFunction&lt;Tuple3&lt;String, String, Long&gt;, Tuple4&lt;String, String, String, Long&gt;, String&gt;&#123;</span><br><span class=\"line\"> &#x2F;&#x2F; 定义状态变量，用来保存已经到达的事件</span><br><span class=\"line\">       private ValueState&lt;Tuple3&lt;String, String, Long&gt;&gt; appEventState;</span><br><span class=\"line\">private ValueState&lt;Tuple4&lt;String, String, String, Long&gt;&gt; thirdPartyEventState;</span><br><span class=\"line\">       @Override</span><br><span class=\"line\">       public void open(Configuration parameters) throws Exception &#123;</span><br><span class=\"line\">          appEventState &#x3D; getRuntimeContext().getState(</span><br><span class=\"line\"></span><br><span class=\"line\"> new ValueStateDescriptor&lt;Tuple3&lt;String, String, Long&gt;&gt;(&quot;app-event&quot;, Types.TUPLE(Types.STRING, Types.STRING, Types.LONG))</span><br><span class=\"line\">);</span><br><span class=\"line\">          thirdPartyEventState &#x3D; getRuntimeContext().getState(</span><br><span class=\"line\">new ValueStateDescriptor&lt;Tuple4&lt;String, String, String, Long&gt;&gt;(&quot;thirdparty-event&quot;, Types.TUPLE(Types.STRING, Types.STRING, Types.STRING,Types.LONG))</span><br><span class=\"line\"> ); &#125;</span><br><span class=\"line\">@Override</span><br><span class=\"line\">public void processElement1(Tuple3&lt;String, String, Long&gt; value, Context ctx, Collector&lt;String&gt; out) throws Exception &#123;</span><br><span class=\"line\">&#x2F;&#x2F; 看另一条流中事件是否来过</span><br><span class=\"line\">if (thirdPartyEventState.value() !&#x3D; null)&#123;</span><br><span class=\"line\">out.collect(&quot;对 账 成 功 :&quot;+value+&quot; &quot;+ thirdPartyEventState.value());</span><br><span class=\"line\">&#x2F;&#x2F; 清空状态</span><br><span class=\"line\">             thirdPartyEventState.clear();</span><br><span class=\"line\">          &#125; else &#123;</span><br><span class=\"line\">&#x2F;&#x2F; 更新状态 appEventState.update(value);</span><br><span class=\"line\"> &#x2F;&#x2F; 注册一个 5 秒后的定时器，开始等待另一条流的事件</span><br><span class=\"line\">             ctx.timerService().registerEventTimeTimer(value.f2 + 5000L);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">@Override</span><br><span class=\"line\">public void processElement2(Tuple4&lt;String, String, String, Long&gt; value, Context ctx, Collector&lt;String&gt; out) throws Exception &#123;</span><br><span class=\"line\">if (appEventState.value() !&#x3D; null)&#123;</span><br><span class=\"line\"> out.collect(&quot;对账成功:&quot; + appEventState.value() + &quot; &quot; + value); &#x2F;&#x2F; 清空状态</span><br><span class=\"line\">appEventState.clear();</span><br><span class=\"line\">&#125; else &#123;</span><br><span class=\"line\">&#x2F;&#x2F; 更新状态</span><br><span class=\"line\">thirdPartyEventState.update(value);</span><br><span class=\"line\">&#x2F;&#x2F; 注册一个 5 秒后的定时器，开始等待另一条流的事件</span><br><span class=\"line\">              ctx.timerService().registerEventTimeTimer(value.f3 + 5000L);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">@Override</span><br><span class=\"line\">public void onTimer(long timestamp, OnTimerContext ctx, Collector&lt;String&gt; out) throws Exception &#123;</span><br><span class=\"line\">&#x2F;&#x2F; 定时器触发，判断状态，如果某个状态不为空，说明另一条流中事件没来 if (appEventState.value() !&#x3D; null) &#123;</span><br><span class=\"line\">out.collect(&quot;对账失败:&quot; + appEventState.value() + &quot; &quot; + &quot;第三方支付</span><br><span class=\"line\">平台信息未到&quot;); &#125;</span><br><span class=\"line\">if (thirdPartyEventState.value() !&#x3D; null) &#123; out.collect(&quot;对账失败:&quot;+thirdPartyEventState.value()+&quot; &quot;+&quot;app</span><br><span class=\"line\">信息未到&quot;); &#125;</span><br><span class=\"line\">        appEventState.clear();</span><br><span class=\"line\">       thirdPartyEventState.clear();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;&#125;</span><br><span class=\"line\">输出结果是:</span><br><span class=\"line\"> 对账成功:(order-1,app,1000) (order-1,third-party,success,3000) 对账失败:(order-2,app,2000) 第三方支付平台信息未到</span><br><span class=\"line\"></span><br><span class=\"line\">对账失败:(order-3,third-party,success,4000) app信息未到</span><br></pre></td></tr></table></figure>\n\n<p>Tiips: 两个流连接后的业务使用。</p>\n<h3 id=\"广播连接流-BroadcastConnectedStream\"><a href=\"#广播连接流-BroadcastConnectedStream\" class=\"headerlink\" title=\"广播连接流(BroadcastConnectedStream)\"></a>广播连接流(BroadcastConnectedStream)</h3><p>关于两条流的连接，还有一种比较特殊的用法: DataStream 调用.connect()方法时，传入的 参数也可以不是一个 DataStream，而是一个“广播流”(BroadcastStream)，这时合并两条流得 到的就变成了一个“广播连接流”(BroadcastConnectedStream)。</p>\n<p>这种连接方式往往用在需要动态定义􏰁些规则或配置的场景。因为规则是实时变动的，所 以我们可以用一个单独的流来获取规则数据;而这些规则或配置是对整个应用全局有效的，所 以不能只把这数据传递给一个下游并行子任务处理，而是要“广播”(broadcast)给所有的并 行子任务。而下游子任务收到广播出来的规则，会把它保存成一个状态，这就是所谓的“广播 状态”(broadcast state)</p>\n<p>广播状态底层是用一个“映射”(map)结构来保存的。在代码实现上，可以直接调用 DataStream 的.broadcast()方法，传入一个“映射状态􏰂述器”(MapStateDescriptor)说明状态 的名称和类型，就可以得到规则数据的“广播流”(BroadcastStream):</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BroadcastProcessFunction</span>&lt;<span class=\"title\">IN1</span>, <span class=\"title\">IN2</span>, <span class=\"title\">OUT</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">BaseBroadcastProcessFunction</span> </span>&#123;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">processElement</span><span class=\"params\">(IN1 value, ReadOnlyContext ctx, Collector&lt;OUT&gt; out)</span> <span class=\"keyword\">throws</span> Exception</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">processBroadcastElement</span><span class=\"params\">(IN2 value, Context ctx, Collector&lt;OUT&gt; out)</span> <span class=\"keyword\">throws</span> Exception</span>;</span><br><span class=\"line\">...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"基于时间的合流——双流联结-Join\"><a href=\"#基于时间的合流——双流联结-Join\" class=\"headerlink\" title=\"基于时间的合流——双流联结(Join)\"></a>基于时间的合流——双流联结(Join)</h2><h3 id=\"窗口联结-Window-Join\"><a href=\"#窗口联结-Window-Join\" class=\"headerlink\" title=\"窗口联结(Window Join)\"></a>窗口联结(Window Join)</h3><p>Flink 为这种场景专门􏰀供了一个窗口联结(window join)算子，可以定义时间窗口，并将两条流中共享一个公共键(key)的数据放在窗口中进行配对处理。</p>\n<ol>\n<li>窗口联结的调用</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">窗口联结在代码中的实现，首先需要调用 DataStream 的.join()方法来合并两条流，得到一 个 JoinedStreams;接着通过.where()和.equalTo()方法指定两条流中联结的 key;然后通 过.window()开窗口，并调用.apply()传入联结窗口函数进行处理计算。</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stream1.join(stream2)</span><br><span class=\"line\">   .where(&lt;KeySelector&gt;)</span><br><span class=\"line\">   .equalTo(&lt;KeySelector&gt;)</span><br><span class=\"line\">.window(&lt;WindowAssigner&gt;)</span><br><span class=\"line\">.apply(&lt;JoinFunction&gt;)</span><br></pre></td></tr></table></figure>\n\n<p>上面代码中.where()的参数是键选择器(KeySelector)，用来指定第一条流中的 key; 而.equalTo()传入的 KeySelector 则指定了第二条流中的 key。两者相同的元素，如果在同一窗 口中，就可以匹配起来，并通过一个“联结函数”(JoinFunction)进行处理了。</p>\n<p>这里.window()传入的就是窗口分配器，之前讲到的三种时间窗口都可以用在这里:滚动 窗口(tumbling window)、滑动窗口(sliding window)和会话窗口(session window)。</p>\n<p>而后面调用.apply()可以看作实现了一个特殊的窗口函数。注意这里只能调用.apply()，没有其他替代的方法。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">JoinFunction</span>&lt;<span class=\"title\">IN1</span>, <span class=\"title\">IN2</span>, <span class=\"title\">OUT</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Function</span>, <span class=\"title\">Serializable</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\">OUT <span class=\"title\">join</span><span class=\"params\">(IN1 first, IN2 second)</span> <span class=\"keyword\">throws</span> Exception</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>窗口联结的处理流程</strong></p>\n<h3 id=\"间隔联结-Interval-Join\"><a href=\"#间隔联结-Interval-Join\" class=\"headerlink\" title=\"间隔联结(Interval Join)\"></a>间隔联结(Interval Join)</h3><p>Flink 提供了一种叫作“间隔联结”(interval join)的合流操作。顾 名思义，间隔联结的思路就是针对一条流的每个数据，开辟出其时间戳前后的一段时间间隔， 看这期间是否有来自另一条流的数据匹配。</p>\n<p><strong>间隔联结的原理</strong></p>\n<p>间隔联结具体的定义方式是，我们给定两个时间点，分别叫作间隔的“上界”(upperBound) 和“下界”(lowerBound);于是对于一条流(不妨叫作 A)中的任意一个数据元素 a，就可以 开辟一段时间间隔:[a.timestamp + lowerBound, a.timestamp + upperBound],即以 a 的时间戳为 中心，下至下界点、上至上界点的一个闭区间:我们就把这段时间作为可以匹配另一条流数据 的“窗口”范围。所以对于另一条流(不妨叫 B)中的数据元素 b，如果它的时间戳落在了这 个区间范围内，a 和 b 就可以成功配对，进而进行计算输出结果。所以匹配的条件为:</p>\n<p>a.timestamp + lowerBound &lt;= b.timestamp &lt;= a.timestamp + upperBound</p>\n<p>这里需要注意，做间隔联结的两条流 A 和 B，也必须基于相同的 key;下界 lowerBound 应该小于等于上界 upperBound，两者都可正可负;间隔联结目前只支持事件时间语义。</p>\n<p><strong>间隔联结的调用</strong></p>\n<p>间隔联结在代码中，是基于 KeyedStream 的联结(join)操作。DataStream 在 keyBy 得到 KeyedStream 之后，可以调用.intervalJoin()来合并两条流，传入的参数同样是一个 KeyedStream， 两者的 key 类型应该一致;得到的是一个 IntervalJoin 类型。后续的操作同样是完全固定的: 先通过.between()方法指定间隔的上下界，再调用.process()方法，定义对匹配数据对的处理操 作。调用.process()需要传入一个处理函数，这是处理函数家族的最后一员:“处理联结函数”ProcessJoinFunction。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stream1</span><br><span class=\"line\">   .keyBy(&lt;KeySelector&gt;)</span><br><span class=\"line\">   .intervalJoin(stream2.keyBy(&lt;KeySelector&gt;))</span><br><span class=\"line\">   .between(Time.milliseconds(-<span class=\"number\">2</span>), Time.milliseconds(<span class=\"number\">1</span>))</span><br><span class=\"line\">   .process (<span class=\"keyword\">new</span> ProcessJoinFunction&lt;Integer, Integer, String()&#123;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">processElement</span><span class=\"params\">(Integer left, Integer right, Context ctx, Collector&lt;String&gt; out)</span> </span>&#123;</span><br><span class=\"line\">          out.collect(left + <span class=\"string\">\",\"</span> + right);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><strong>间隔联结实例</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 基于间隔的 join</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IntervalJoinExample</span> </span>&#123;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\"> StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\">       env.setParallelism(<span class=\"number\">1</span>);</span><br><span class=\"line\">SingleOutputStreamOperator&lt;Tuple3&lt;String, String, Long&gt;&gt; orderStream = env.fromElements(</span><br><span class=\"line\">             Tuple3.of(<span class=\"string\">\"Mary\"</span>, <span class=\"string\">\"order-1\"</span>, <span class=\"number\">5000L</span>),</span><br><span class=\"line\">             Tuple3.of(<span class=\"string\">\"Alice\"</span>, <span class=\"string\">\"order-2\"</span>, <span class=\"number\">5000L</span>),</span><br><span class=\"line\">              Tuple3.of(<span class=\"string\">\"Bob\"</span>, <span class=\"string\">\"order-3\"</span>, <span class=\"number\">20000L</span>),</span><br><span class=\"line\">             Tuple3.of(<span class=\"string\">\"Alice\"</span>, <span class=\"string\">\"order-4\"</span>, <span class=\"number\">20000L</span>),</span><br><span class=\"line\">             Tuple3.of(<span class=\"string\">\"Cary\"</span>, <span class=\"string\">\"order-5\"</span>, <span class=\"number\">51000L</span>)</span><br><span class=\"line\">       ).assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Tuple3&lt;String,</span><br><span class=\"line\">String, Long&gt;&gt;forMonotonousTimestamps()</span><br><span class=\"line\">             .withTimestampAssigner(<span class=\"keyword\">new</span></span><br><span class=\"line\">SerializableTimestampAssigner&lt;Tuple3&lt;String, String, Long&gt;&gt;() &#123;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Tuple3&lt;String, String, Long&gt; element, <span class=\"keyword\">long</span> recordTimestamp)</span> </span>&#123;</span><br><span class=\"line\">&#125;) );</span><br><span class=\"line\">   <span class=\"keyword\">return</span> element.f2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> SingleOutputStreamOperator&lt;Event&gt; clickStream = env.fromElements(</span><br><span class=\"line\">       <span class=\"keyword\">new</span> Event(<span class=\"string\">\"Bob\"</span>, <span class=\"string\">\"./cart\"</span>, <span class=\"number\">2000L</span>),</span><br><span class=\"line\">       <span class=\"keyword\">new</span> Event(<span class=\"string\">\"Alice\"</span>, <span class=\"string\">\"./prod?id=100\"</span>, <span class=\"number\">3000L</span>),</span><br><span class=\"line\">       <span class=\"keyword\">new</span> Event(<span class=\"string\">\"Alice\"</span>, <span class=\"string\">\"./prod?id=200\"</span>, <span class=\"number\">3500L</span>),</span><br><span class=\"line\">       <span class=\"keyword\">new</span> Event(<span class=\"string\">\"Bob\"</span>, <span class=\"string\">\"./prod?id=2\"</span>, <span class=\"number\">2500L</span>),</span><br><span class=\"line\">       <span class=\"keyword\">new</span> Event(<span class=\"string\">\"Alice\"</span>, <span class=\"string\">\"./prod?id=300\"</span>, <span class=\"number\">36000L</span>),</span><br><span class=\"line\">       <span class=\"keyword\">new</span> Event(<span class=\"string\">\"Bob\"</span>, <span class=\"string\">\"./home\"</span>, <span class=\"number\">30000L</span>),</span><br><span class=\"line\">       <span class=\"keyword\">new</span> Event(<span class=\"string\">\"Bob\"</span>, <span class=\"string\">\"./prod?id=1\"</span>, <span class=\"number\">23000L</span>),</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> Event(<span class=\"string\">\"Bob\"</span>, <span class=\"string\">\"./prod?id=3\"</span>, <span class=\"number\">33000L</span>)</span><br><span class=\"line\">       ).assignTimestampsAndWatermarks(WatermarkStrategy.&lt;Event&gt;forMonotonousT</span><br><span class=\"line\">imestamps()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Event element, <span class=\"keyword\">long</span> recordTimestamp)</span></span></span><br><span class=\"line\"><span class=\"function\">.<span class=\"title\">withTimestampAssigner</span><span class=\"params\">(new SerializableTimestampAssigner&lt;Event&gt;()</span></span></span><br><span class=\"line\"><span class=\"function\">&#125;) )</span>;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> element.timestamp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">       orderStream.keyBy(data -&gt; data.f0)</span><br><span class=\"line\">             .intervalJoin(clickStream.keyBy(data -&gt; data.user))</span><br><span class=\"line\">             .between(Time.seconds(-<span class=\"number\">5</span>), Time.seconds(<span class=\"number\">10</span>))</span><br><span class=\"line\">.process(<span class=\"keyword\">new</span> ProcessJoinFunction&lt;Tuple3&lt;String, String, Long&gt;, Event, String&gt;() &#123;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">processElement</span><span class=\"params\">(Tuple3&lt;String, String, Long&gt; left, Event right, Context ctx, Collector&lt;String&gt; out)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">                    out.collect(right + <span class=\"string\">\" =&gt; \"</span> + left);</span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\">&#125;) .print();</span><br><span class=\"line\">   env.execute();</span><br><span class=\"line\">&#125;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"窗口同组联结-Window-CoGroup\"><a href=\"#窗口同组联结-Window-CoGroup\" class=\"headerlink\" title=\"窗口同组联结(Window CoGroup)\"></a>窗口同组联结(Window CoGroup)</h3><p>与 window join 的区别在于，调用.apply()方法定义具体操作时，传入的是一个 CoGroupFunction。这也是一个函数类接口，源码中定义如下:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">CoGroupFunction</span>&lt;<span class=\"title\">IN1</span>, <span class=\"title\">IN2</span>, <span class=\"title\">O</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Function</span>, <span class=\"title\">Serializable</span> </span>&#123; <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">coGroup</span><span class=\"params\">(Iterable&lt;IN1&gt; first, Iterable&lt;IN2&gt; second, Collector&lt;O&gt; out)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">throws</span> Exception</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>内部的.coGroup()方法，有些类似于 FlatJoinFunction 中.join()的形式，同样有三个参数， 分别代表两条流中的数据以及用于输出的收集器(Collector)。不同的是，这里的前两个参数 不再是单独的每一组“配对”数据了，而是传入了可遍历的数据集合。也就是说，现在不会再 去计算窗口中两条流数据集的笛卡尔积，而是直接把收集到的所有数据一次性传入，至于要怎 样配对完全是自定义的。这样.coGroup()方法只会被调用一次，而且即使一条流的数据没有任 何另一条流的数据匹配，也可以出现在集合中、当然也可以定义输出结果了。</p>\n<p>所以能够看出，coGroup 操作比窗口的 join 更加通用，不仅可以实现类似 SQL 中的“内 连接”(inner join)，也可以实现左外连接(left outer join)、右外连接(right outer join)和全外 连接(full outer join)。事实上，窗口 join 的底层，也是通过 coGroup 来实现的。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 基于窗口的 join</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CoGroupExample</span> </span>&#123;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123; StreamExecutionEnvironment env =</span><br><span class=\"line\">StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\">       env.setParallelism(<span class=\"number\">1</span>);</span><br><span class=\"line\">DataStream&lt;Tuple2&lt;String, Long&gt;&gt; stream1 = env</span><br><span class=\"line\">             .fromElements(</span><br><span class=\"line\">                    Tuple2.of(<span class=\"string\">\"a\"</span>, <span class=\"number\">1000L</span>),</span><br><span class=\"line\">                    Tuple2.of(<span class=\"string\">\"b\"</span>, <span class=\"number\">1000L</span>),</span><br><span class=\"line\">                    Tuple2.of(<span class=\"string\">\"a\"</span>, <span class=\"number\">2000L</span>),</span><br><span class=\"line\">                    Tuple2.of(<span class=\"string\">\"b\"</span>, <span class=\"number\">2000L</span>)</span><br><span class=\"line\">             )</span><br><span class=\"line\">             .assignTimestampsAndWatermarks(</span><br><span class=\"line\">                    WatermarkStrategy</span><br><span class=\"line\">                           .&lt;Tuple2&lt;String, Long&gt;&gt;forMonotonousTimestamps()</span><br><span class=\"line\">                           .withTimestampAssigner(</span><br><span class=\"line\">                                 <span class=\"keyword\">new</span></span><br><span class=\"line\">SerializableTimestampAssigner&lt;Tuple2&lt;String, Long&gt;&gt;() &#123;</span><br><span class=\"line\">Long&gt; stringLongTuple2, <span class=\"keyword\">long</span> l) &#123;</span><br><span class=\"line\">&#125; )</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Tuple2&lt;String,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">   return stringLongTuple2.f1;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">       )</span></span>;</span><br><span class=\"line\">DataStream&lt;Tuple2&lt;String, Long&gt;&gt; stream2 = env</span><br><span class=\"line\">.fromElements(</span><br><span class=\"line\">                    Tuple2.of(<span class=\"string\">\"a\"</span>, <span class=\"number\">3000L</span>),</span><br><span class=\"line\">                    Tuple2.of(<span class=\"string\">\"b\"</span>, <span class=\"number\">3000L</span>),</span><br><span class=\"line\">                    Tuple2.of(<span class=\"string\">\"a\"</span>, <span class=\"number\">4000L</span>),</span><br><span class=\"line\">                    Tuple2.of(<span class=\"string\">\"b\"</span>, <span class=\"number\">4000L</span>)</span><br><span class=\"line\">             )</span><br><span class=\"line\">             .assignTimestampsAndWatermarks(</span><br><span class=\"line\">                    WatermarkStrategy</span><br><span class=\"line\">                           .&lt;Tuple2&lt;String, Long&gt;&gt;forMonotonousTimestamps()</span><br><span class=\"line\">                           .withTimestampAssigner(</span><br><span class=\"line\">                                 <span class=\"keyword\">new</span></span><br><span class=\"line\">SerializableTimestampAssigner&lt;Tuple2&lt;String, Long&gt;&gt;() &#123;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"></span><br><span class=\"line\">  Long&gt; stringLongTuple2, <span class=\"keyword\">long</span> l) &#123;</span><br><span class=\"line\">&#125; )</span><br><span class=\"line\">);</span><br><span class=\"line\">       stream1</span><br><span class=\"line\">             .coGroup(stream2)</span><br><span class=\"line\">             .where(r -&gt; r.f0)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">extractTimestamp</span><span class=\"params\">(Tuple2&lt;String,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">   return stringLongTuple2.f1;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">&#125;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">.equalTo(r -&gt; r.f0)</span> .<span class=\"title\">window</span><span class=\"params\">(TumblingEventTimeWindows.of(Time.seconds(<span class=\"number\">5</span>)</span>))</span></span><br><span class=\"line\"><span class=\"function\">.<span class=\"title\">apply</span><span class=\"params\">(new CoGroupFunction&lt;Tuple2&lt;String, Long&gt;, Tuple2&lt;String,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">Long&gt;, String&gt;()</span> </span>&#123;</span><br><span class=\"line\">                 <span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">coGroup</span><span class=\"params\">(Iterable&lt;Tuple2&lt;String, Long&gt;&gt; iter1, Iterable&lt;Tuple2&lt;String, Long&gt;&gt; iter2, Collector&lt;String&gt; collector)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">                    collector.collect(iter1 + <span class=\"string\">\"=&gt;\"</span> + iter2);</span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\">&#125;) .print();</span><br><span class=\"line\">       env.execute();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","encrypt":true},{"_content":"","source":"_posts/王阁/技术/大数据/flink/2023/FlinkTable&SQL.md","raw":"","slug":"王阁/技术/大数据/flink/2023/FlinkTable&SQL","published":1,"date":"2023-03-01T09:18:57.930Z","updated":"2023-03-01T09:19:09.330Z","title":"王阁/技术/大数据/flink/2023/FlinkTable&SQL","comments":1,"layout":"post","photos":[],"link":"","_id":"cleqib2a80000jfpwh5ri6qsu","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"","source":"_posts/王阁/技术/大数据/flink/2023/容错机制.md","raw":"","slug":"王阁/技术/大数据/flink/2023/容错机制","published":1,"date":"2023-03-01T09:18:50.688Z","updated":"2023-03-01T09:18:55.887Z","title":"王阁/技术/大数据/flink/2023/容错机制","comments":1,"layout":"post","photos":[],"link":"","_id":"cleqib2ap0001jfpw0www4ehf","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"王阁/技术/大数据/flink/2023/Flink Connector","date":"2023-03-02T02:32:16.887Z","_content":"\n这是主要是对常见的connector 进行一个梳理，日常使用时可以开箱即用\n\n <!--more-->\n # Flink Connector \n\n 主要分为\n 1. 预定义的 source 和 sink\n 2. Bundled Connectors\n 3. cdc Connector\n 4. 自定义connector \n\n##  预定义的 source 和 sink\n\n预定义的source和sink在 source中已经简绍不再缀述\n\n## Bundled Connectors\n\n","source":"_posts/王阁/技术/大数据/flink/2023/Flink Connector.md","raw":"title:  \ndate:  \ntags: []\n\n---\n\n这是主要是对常见的connector 进行一个梳理，日常使用时可以开箱即用\n\n <!--more-->\n # Flink Connector \n\n 主要分为\n 1. 预定义的 source 和 sink\n 2. Bundled Connectors\n 3. cdc Connector\n 4. 自定义connector \n\n##  预定义的 source 和 sink\n\n预定义的source和sink在 source中已经简绍不再缀述\n\n## Bundled Connectors\n\n","slug":"王阁/技术/大数据/flink/2023/Flink Connector","published":1,"updated":"2023-03-02T02:36:08.570Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cleqib2ar0002jfpw00q5h1j7","content":"<p>这是主要是对常见的connector 进行一个梳理，日常使用时可以开箱即用</p>\n <a id=\"more\"></a>\n<h1 id=\"Flink-Connector\"><a href=\"#Flink-Connector\" class=\"headerlink\" title=\"Flink Connector\"></a>Flink Connector</h1><p> 主要分为</p>\n<ol>\n<li>预定义的 source 和 sink</li>\n<li>Bundled Connectors</li>\n<li>cdc Connector</li>\n<li>自定义connector </li>\n</ol>\n<h2 id=\"预定义的-source-和-sink\"><a href=\"#预定义的-source-和-sink\" class=\"headerlink\" title=\"预定义的 source 和 sink\"></a>预定义的 source 和 sink</h2><p>预定义的source和sink在 source中已经简绍不再缀述</p>\n<h2 id=\"Bundled-Connectors\"><a href=\"#Bundled-Connectors\" class=\"headerlink\" title=\"Bundled Connectors\"></a>Bundled Connectors</h2>","site":{"data":{}},"excerpt":"<p>这是主要是对常见的connector 进行一个梳理，日常使用时可以开箱即用</p>","more":"<h1 id=\"Flink-Connector\"><a href=\"#Flink-Connector\" class=\"headerlink\" title=\"Flink Connector\"></a>Flink Connector</h1><p> 主要分为</p>\n<ol>\n<li>预定义的 source 和 sink</li>\n<li>Bundled Connectors</li>\n<li>cdc Connector</li>\n<li>自定义connector </li>\n</ol>\n<h2 id=\"预定义的-source-和-sink\"><a href=\"#预定义的-source-和-sink\" class=\"headerlink\" title=\"预定义的 source 和 sink\"></a>预定义的 source 和 sink</h2><p>预定义的source和sink在 source中已经简绍不再缀述</p>\n<h2 id=\"Bundled-Connectors\"><a href=\"#Bundled-Connectors\" class=\"headerlink\" title=\"Bundled Connectors\"></a>Bundled Connectors</h2>"}],"PostAsset":[],"PostCategory":[{"post_id":"clegiqsbv000uu6pw0lcz5m71","category_id":"clegiqsbx000xu6pw742f5f10","_id":"clegiqsbz0017u6pw910wek9r"}],"PostTag":[{"post_id":"clegiqs9y0003u6pw4laoecny","tag_id":"clegiqsa10004u6pw3erlajvp","_id":"clegiqsa20005u6pwd9fd6c7d"},{"post_id":"clegiqsbd000du6pw1gkc17b1","tag_id":"clegiqsbg000fu6pwfbdb9mon","_id":"clegiqsbn000ju6pw4isb9myj"},{"post_id":"clegiqsbp000mu6pw5s9u6rzu","tag_id":"clegiqsbr000ou6pw6yji0vix","_id":"clegiqsby0011u6pw5sgo7fkl"},{"post_id":"clegiqsbp000mu6pw5s9u6rzu","tag_id":"clegiqsbs000su6pwa0b5ftuj","_id":"clegiqsbz0013u6pwa9zm5y7a"},{"post_id":"clegiqsbp000mu6pw5s9u6rzu","tag_id":"clegiqsbw000vu6pw4vgedaff","_id":"clegiqsbz0016u6pwgevueoro"},{"post_id":"clegiqsbr000nu6pwhgqg175x","tag_id":"clegiqsbx000zu6pwgeqbdk4j","_id":"clegiqsc00019u6pw5qgshuo6"},{"post_id":"clegiqsbr000nu6pwhgqg175x","tag_id":"clegiqsbz0014u6pwfv443evg","_id":"clegiqsc0001au6pw472jeu2f"},{"post_id":"clegiqsbs000qu6pw5d3432l0","tag_id":"clegiqsc00018u6pwdk6q2zlk","_id":"clegiqsc0001cu6pwezj4605q"},{"post_id":"clegiqsbv000uu6pw0lcz5m71","tag_id":"clegiqsc0001bu6pw9nf7bvz0","_id":"clegiqscq001fu6pw3ogb75je"},{"post_id":"clegiqsbv000uu6pw0lcz5m71","tag_id":"clegiqsc9001du6pw08gv52w6","_id":"clegiqsct001gu6pw4crda4sl"},{"post_id":"clegiqsbv000uu6pw0lcz5m71","tag_id":"clegiqscg001eu6pwfr8h53ym","_id":"clegiqscv001hu6pw18oqgnig"},{"post_id":"clegiqse4001pu6pw9vbq73vs","tag_id":"clegiqsej001ru6pw5p7601ix","_id":"clegiqseq001wu6pw7vp443to"},{"post_id":"clegiqseb001qu6pw7afud8le","tag_id":"clegiqseq001vu6pwb066fx76","_id":"clegiqset0027u6pwcbiwd85e"},{"post_id":"clegiqseb001qu6pw7afud8le","tag_id":"clegiqser001zu6pwd62b0tby","_id":"clegiqseu0029u6pw4rjd7iup"},{"post_id":"clegiqseb001qu6pw7afud8le","tag_id":"clegiqses0022u6pw145mfip3","_id":"clegiqseu002cu6pw4nksaaf8"},{"post_id":"clegiqsek001su6pwakmc0ro0","tag_id":"clegiqset0025u6pwe27k4qci","_id":"clegiqseu002eu6pw4vlm7rcx"},{"post_id":"clegiqsen001tu6pw0yp68kqc","tag_id":"clegiqseu002bu6pwc9q12s4e","_id":"clegiqsez002ou6pw9fv4d6gh"},{"post_id":"clegiqsen001tu6pw0yp68kqc","tag_id":"clegiqsev002gu6pw9f0fbl0n","_id":"clegiqsf2002qu6pw7iczga7l"},{"post_id":"clegiqsen001tu6pw0yp68kqc","tag_id":"clegiqsev002ju6pw1kmd38l0","_id":"clegiqsf2002tu6pw1a083i7j"},{"post_id":"clegiqseq001uu6pwhldt9l4j","tag_id":"clegiqses0022u6pw145mfip3","_id":"clegiqsf3002vu6pw5tdrd4mh"},{"post_id":"clegiqseq001xu6pw9avz0o5l","tag_id":"clegiqsf2002ru6pwfljf5rbc","_id":"clegiqsf40032u6pw2cm409kd"},{"post_id":"clegiqseq001xu6pw9avz0o5l","tag_id":"clegiqsf3002xu6pw5yulag0j","_id":"clegiqsf50034u6pwaojxdegd"},{"post_id":"clegiqser0020u6pwdrn52v3s","tag_id":"clegiqsf40030u6pw1mpif6aa","_id":"clegiqsf9003du6pwfnto7oxl"},{"post_id":"clegiqser0020u6pwdrn52v3s","tag_id":"clegiqsf50035u6pw7p7a82e8","_id":"clegiqsfa003fu6pwhkowergi"},{"post_id":"clegiqser0020u6pwdrn52v3s","tag_id":"clegiqsf60038u6pw2bh4ft3b","_id":"clegiqsfa003iu6pw7mer5etj"},{"post_id":"clegiqses0021u6pw3p8qeljq","tag_id":"clegiqsf9003cu6pwbneb50cv","_id":"clegiqsfb003ku6pwa3uidpyb"},{"post_id":"clegiqses0023u6pweiex8ean","tag_id":"clegiqsfa003hu6pwex3k6lck","_id":"clegiqsfh003ru6pw1b8chhg3"},{"post_id":"clegiqses0023u6pweiex8ean","tag_id":"clegiqsfb003mu6pw0qzw91i2","_id":"clegiqsfj003tu6pw25e65i69"},{"post_id":"clegiqset0026u6pw8nnyg80t","tag_id":"clegiqsfc003pu6pw861c76xx","_id":"clegiqsfk003wu6pwae6vg8d6"},{"post_id":"clegiqset0028u6pwbx3qas7g","tag_id":"clegiqsfk003vu6pw4z3g6n2d","_id":"clegiqsfl0041u6pw44i004tf"},{"post_id":"clegiqseu002au6pw63snfyo4","tag_id":"clegiqsfk003zu6pw0y0bf0uu","_id":"clegiqsfm0045u6pwcnbgdbuf"},{"post_id":"clegiqseu002du6pwhbb1dsk2","tag_id":"clegiqsfl0043u6pwb7d24kbc","_id":"clegiqsfn0049u6pw59imgzvv"},{"post_id":"clegiqseu002fu6pw1qon3a2h","tag_id":"clegiqsfm0047u6pw05mr0day","_id":"clegiqsfo004du6pw17tr941x"},{"post_id":"clegiqsf0002pu6pw67qf9r65","tag_id":"clegiqsfo004cu6pwawdn5ks5","_id":"clegiqsfx004iu6pw5lhlfnjz"},{"post_id":"clegiqsf3002wu6pw8lw5eznj","tag_id":"clegiqsfa003hu6pwex3k6lck","_id":"clegiqsg0004mu6pwfwc12djm"},{"post_id":"clegiqsf4002zu6pw5rgx9811","tag_id":"clegiqsfy004ku6pwb5c7bdpn","_id":"clegiqsg3004qu6pw3unn6jd0"},{"post_id":"clegiqsf40033u6pw2ovsb0ta","tag_id":"clegiqsfy004ku6pwb5c7bdpn","_id":"clegiqsg4004uu6pw86sa68hk"},{"post_id":"clegiqsf50036u6pw3p0r18y5","tag_id":"clegiqsg3004su6pw4emw55e9","_id":"clegiqsg4004yu6pwg9ww6ftq"},{"post_id":"clegiqsf60039u6pw0t9w7skn","tag_id":"clegiqsfa003hu6pwex3k6lck","_id":"clegiqsg50052u6pw8f96eaxg"},{"post_id":"clegiqsf7003au6pw9yzt5wwy","tag_id":"clegiqsg50050u6pw7no4af7p","_id":"clegiqsg60056u6pw009244ay"},{"post_id":"clegiqsf8003bu6pw2jhf49pk","tag_id":"clegiqsg60055u6pw7gzq22nz","_id":"clegiqsg7005bu6pwht9f4i2t"},{"post_id":"clegiqsfa003eu6pw1oor2dgn","tag_id":"clegiqsg50050u6pw7no4af7p","_id":"clegiqsgc005fu6pw5z8h2yk1"},{"post_id":"clegiqsfa003gu6pwedel88f3","tag_id":"clegiqsg50050u6pw7no4af7p","_id":"clegiqsgd005ju6pwc5hnaapk"},{"post_id":"clegiqsfb003ju6pwfpzb0oo3","tag_id":"clegiqsgd005hu6pw2g6bbg5i","_id":"clegiqsge005nu6pw48nuhfo7"},{"post_id":"clegiqsfb003lu6pwew2l3gem","tag_id":"clegiqsgd005lu6pw788objx4","_id":"clegiqsgf005ru6pw2whd58k6"},{"post_id":"clegiqsfb003nu6pwe4ztfg61","tag_id":"clegiqsfy004ku6pwb5c7bdpn","_id":"clegiqsgg005vu6pw1w1xcwj4"},{"post_id":"clegiqsfc003ou6pw2s5h8l5h","tag_id":"clegiqsgf005tu6pwafvv9mh8","_id":"clegiqsgh005zu6pw0sla9trx"},{"post_id":"clegiqsfi003su6pwg48y1l28","tag_id":"clegiqsfy004ku6pwb5c7bdpn","_id":"clegiqsgh0063u6pw0tvhfr0f"},{"post_id":"clegiqsg60057u6pw5zp1ao3m","tag_id":"clegiqsgh0062u6pw59urcnt2","_id":"clegiqsgl0068u6pwf8k726op"},{"post_id":"clegiqsg60058u6pw7xmi3qvs","tag_id":"clegiqsgi0066u6pwek9i1m2i","_id":"clegiqsgq006cu6pwfqy80sca"},{"post_id":"clegiqsg7005au6pw165b71oo","tag_id":"clegiqsgn006au6pw7gv1a1nb","_id":"clegiqsgs006gu6pw78dg2fvf"},{"post_id":"clegiqsg8005eu6pw00iohuov","tag_id":"clegiqsgs006eu6pwccl70p57","_id":"clegiqsgt006ku6pw7w8xgxh7"},{"post_id":"clegiqsg8005eu6pw00iohuov","tag_id":"clegiqsev002gu6pw9f0fbl0n","_id":"clegiqsgt006mu6pwcl1i65yz"},{"post_id":"clegiqsgd005iu6pw7m569363","tag_id":"clegiqsgt006ju6pwg02k0m4v","_id":"clegiqsgv006tu6pwcf2gahde"},{"post_id":"clegiqsgd005iu6pw7m569363","tag_id":"clegiqsgu006ou6pw9pothec2","_id":"clegiqsgw006vu6pw173955iq"},{"post_id":"clegiqsgq006du6pw440524g7","tag_id":"clegiqsgu006ru6pwd434910x","_id":"clegiqsh20071u6pw8hx49ekz"},{"post_id":"clegiqsgq006du6pw440524g7","tag_id":"clegiqsgw006wu6pwckpth7he","_id":"clegiqsh20073u6pw6cb9h9ak"},{"post_id":"clegiqsgt006iu6pwdp7r8bn9","tag_id":"clegiqsh10070u6pw4zgphtuf","_id":"clegiqsh8007au6pw9d1k2ep3"},{"post_id":"clegiqsgt006iu6pwdp7r8bn9","tag_id":"clegiqsh30075u6pwe7f7ae9o","_id":"clegiqsh8007cu6pw3l5hhet4"},{"post_id":"clegiqsgv006uu6pw6iij9nu2","tag_id":"clegiqsh70078u6pwb8043gl7","_id":"clegiqshe007iu6pw41yc9lf2"},{"post_id":"clegiqsgv006uu6pw6iij9nu2","tag_id":"clegiqsh8007du6pwb78o408f","_id":"clegiqshf007ku6pwf6ou70hh"},{"post_id":"clegiqsgw006yu6pw06oifyc2","tag_id":"clegiqshe007hu6pwca767h41","_id":"clegiqshh007uu6pwaina9fdt"},{"post_id":"clegiqsgw006yu6pw06oifyc2","tag_id":"clegiqshf007mu6pwbmy99vx7","_id":"clegiqshh007wu6pwa2s327ut"},{"post_id":"clegiqsgw006yu6pw06oifyc2","tag_id":"clegiqshg007pu6pwasqv185t","_id":"clegiqshh007yu6pwbe4s32uy"},{"post_id":"clegiqsgy006zu6pw733i6xm8","tag_id":"clegiqshg007su6pwbjlb4qt0","_id":"clegiqshh007zu6pw408ofo1u"},{"post_id":"clegiqsh70079u6pw97698pj4","tag_id":"clegiqshe007hu6pwca767h41","_id":"clegiqshi0083u6pw8psx37s8"},{"post_id":"clegiqsh70079u6pw97698pj4","tag_id":"clegiqshh0080u6pw1lsph3rd","_id":"clegiqshi0084u6pw8vl8bi8i"},{"post_id":"clegiqsh70079u6pw97698pj4","tag_id":"clegiqshi0081u6pw8jv9e8qv","_id":"clegiqshi0085u6pw3zlpaqvu"},{"post_id":"clegiqshg007ru6pwcne61kcz","tag_id":"clegiqshi0082u6pw8c5tdsy1","_id":"clegiqshi0086u6pwe51jblkm"},{"post_id":"clegiqsi10088u6pw6c1pfzrs","tag_id":"clegiqsic008au6pw5rn1byeg","_id":"clegiqsiw008ju6pw4lcrb8yi"},{"post_id":"clegiqsi10088u6pw6c1pfzrs","tag_id":"clegiqsiu008eu6pw4ojbc63c","_id":"clegiqsiw008lu6pwbsc2ak1o"},{"post_id":"clegiqsiu008du6pw1onm94rr","tag_id":"clegiqsiv008hu6pwgjg60i1h","_id":"clegiqsiw008ou6pw0yzo737n"},{"post_id":"clegiqsiv008iu6pw8k3fheib","tag_id":"clegiqsiw008mu6pw0hk35308","_id":"clegiqsix008su6pw16wu4jq6"},{"post_id":"clegiqsiw008nu6pw9a44b2ie","tag_id":"clegiqsix008ru6pwdluuhtqj","_id":"clegiqsiz0093u6pw8fgh4q9n"},{"post_id":"clegiqsiw008nu6pw9a44b2ie","tag_id":"clegiqsiy008vu6pw6x0na740","_id":"clegiqsj00095u6pw42hb6bgb"},{"post_id":"clegiqsiw008nu6pw9a44b2ie","tag_id":"clegiqsiy008yu6pwcsrf6mxy","_id":"clegiqsj00098u6pw1ky0405a"},{"post_id":"clegiqsiy008wu6pwerft5w23","tag_id":"clegiqsiz0091u6pw1jo39aco","_id":"clegiqsj0009au6pw26wkbsc2"},{"post_id":"clegiqsj00096u6pwddzmdhsp","tag_id":"clegiqsev002gu6pw9f0fbl0n","_id":"clegiqsj1009du6pwfz61ac0b"},{"post_id":"clegiqsj1009eu6pwbimf5zlp","tag_id":"clegiqsj00097u6pw3vwihzd5","_id":"clegiqsj3009hu6pwbc4pe4cs"},{"post_id":"clegiqsiy008xu6pwh7u8hzan","tag_id":"clegiqsj00097u6pw3vwihzd5","_id":"clegiqsj3009iu6pwfk6p3y0o"},{"post_id":"clegiqsiy008xu6pwh7u8hzan","tag_id":"clegiqsj1009cu6pw546d040e","_id":"clegiqsj3009ku6pwcff97v5e"},{"post_id":"clegiqsiz0090u6pwe4b95orh","tag_id":"clegiqsj00097u6pw3vwihzd5","_id":"clegiqsj4009mu6pwfeds883e"},{"post_id":"clegiqsiz0090u6pwe4b95orh","tag_id":"clegiqsj3009ju6pwdhrzbmyk","_id":"clegiqsj4009nu6pwhiewe0zy"},{"post_id":"clegiqsiz0094u6pw9f9dd413","tag_id":"clegiqsj00097u6pw3vwihzd5","_id":"clegiqsj4009su6pw3wat3dvd"},{"post_id":"clegiqsiz0094u6pw9f9dd413","tag_id":"clegiqsj4009ou6pw1pms29dx","_id":"clegiqsj4009tu6pw055k05qy"},{"post_id":"clegiqsiz0094u6pw9f9dd413","tag_id":"clegiqsj4009pu6pw3b8ofn2o","_id":"clegiqsj4009uu6pw8gmfbj7p"},{"post_id":"clegiqsiz0094u6pw9f9dd413","tag_id":"clegiqsj4009qu6pw5yb99k1v","_id":"clegiqsj4009vu6pw3qvbbubq"},{"post_id":"clegiqsj00099u6pwe70w47nu","tag_id":"clegiqsgs006eu6pwccl70p57","_id":"clegiqsj4009wu6pw5fnk9u85"},{"post_id":"clegiqsj00099u6pwe70w47nu","tag_id":"clegiqsj4009ru6pwgzu059oa","_id":"clegiqsj5009xu6pwb4ttdaa5"},{"post_id":"cleozhbo40000vnpwgi7iay9o","tag_id":"cleozhbok0002vnpw2vp72un4","_id":"cleozhbp50004vnpwdate9lei"},{"post_id":"cleozhboh0001vnpw6t0u442r","tag_id":"cleozhbp40003vnpw3omxau3r","_id":"cleozhbp60005vnpw9gnndjnd"},{"post_id":"cleozhbp80006vnpwbbyr73r6","tag_id":"cleozhbp90008vnpwbjcq3rir","_id":"cleozhbpa000avnpwelzg177y"},{"post_id":"cleozhbp90007vnpw1u1bep89","tag_id":"cleozhbpa0009vnpwaaxjffvk","_id":"cleozhbpa000bvnpwbzg9g0eq"},{"post_id":"clepeku1f0001qrpw2pvzg91i","tag_id":"clepeku1h0002qrpwb7iuh435","_id":"clepeku240003qrpw4lam1yfj"},{"post_id":"clepeku0v0000qrpwep08cnne","tag_id":"cleqib2av0003jfpwbjvfbkto","_id":"cleqib2bg0004jfpwhqdifimn"}],"Tag":[{"name":"数据仓库","_id":"clegiqsa10004u6pw3erlajvp"},{"name":"sql","_id":"clegiqsbg000fu6pwfbdb9mon"},{"name":"mysql","_id":"clegiqsbr000ou6pw6yji0vix"},{"name":"docker","_id":"clegiqsbs000su6pwa0b5ftuj"},{"name":"运维","_id":"clegiqsbw000vu6pw4vgedaff"},{"name":"atlas","_id":"clegiqsbx000zu6pwgeqbdk4j"},{"name":"血缘管理","_id":"clegiqsbz0014u6pwfv443evg"},{"name":"mac python2 python3","_id":"clegiqsc00018u6pwdk6q2zlk"},{"name":"hive","_id":"clegiqsc0001bu6pw9nf7bvz0"},{"name":"DDL","_id":"clegiqsc9001du6pw08gv52w6"},{"name":"DML","_id":"clegiqscg001eu6pwfr8h53ym"},{"name":"flink、CDH","_id":"clegiqsej001ru6pw5p7601ix"},{"name":"cdh","_id":"clegiqseq001vu6pwb066fx76"},{"name":"cm","_id":"clegiqser001zu6pwd62b0tby"},{"name":"数据中心","_id":"clegiqses0022u6pw145mfip3"},{"name":"kerberos","_id":"clegiqset0025u6pwe27k4qci"},{"name":"flume","_id":"clegiqseu002bu6pwc9q12s4e"},{"name":"beats","_id":"clegiqsev002gu6pw9f0fbl0n"},{"name":"采集","_id":"clegiqsev002ju6pw1kmd38l0"},{"name":"数据中心，安全，kerberos","_id":"clegiqsf2002ru6pwfljf5rbc"},{"name":"sentry","_id":"clegiqsf3002xu6pw5yulag0j"},{"name":"服务器","_id":"clegiqsf40030u6pw1mpif6aa"},{"name":"ip","_id":"clegiqsf50035u6pw7p7a82e8"},{"name":"信息","_id":"clegiqsf60038u6pw2bh4ft3b"},{"name":"clickhouse、数仓","_id":"clegiqsf9003cu6pwbneb50cv"},{"name":"kafka","_id":"clegiqsfa003hu6pwex3k6lck"},{"name":"es","_id":"clegiqsfb003mu6pw0qzw91i2"},{"name":"dataworks","_id":"clegiqsfc003pu6pw861c76xx"},{"name":"数据运维","_id":"clegiqsfk003vu6pw4z3g6n2d"},{"name":"数据集成、数据采集、数据存储","_id":"clegiqsfk003zu6pw0y0bf0uu"},{"name":"数据应用","_id":"clegiqsfl0043u6pwb7d24kbc"},{"name":"数据治理","_id":"clegiqsfm0047u6pw05mr0day"},{"name":"数据管理","_id":"clegiqsfo004cu6pwawdn5ks5"},{"name":"日常总结","_id":"clegiqsfy004ku6pwb5c7bdpn"},{"name":"flink","_id":"clegiqsg3004su6pw4emw55e9"},{"name":"bigdata","_id":"clegiqsg50050u6pw7no4af7p"},{"name":"学习spark2","_id":"clegiqsg60055u6pw7gzq22nz"},{"name":"spark学习","_id":"clegiqsgd005hu6pw2g6bbg5i"},{"name":"学习spark","_id":"clegiqsgd005lu6pw788objx4"},{"name":"小结","_id":"clegiqsgf005tu6pwafvv9mh8"},{"name":"sparkstream","_id":"clegiqsgh0062u6pw59urcnt2"},{"name":"sparkstreaming","_id":"clegiqsgi0066u6pwek9i1m2i"},{"name":"spark dependency","_id":"clegiqsgn006au6pw7gv1a1nb"},{"name":"logstash","_id":"clegiqsgs006eu6pwccl70p57"},{"name":"dsl","_id":"clegiqsgt006ju6pwg02k0m4v"},{"name":"elasticsearch","_id":"clegiqsgu006ou6pw9pothec2"},{"name":"hbase","_id":"clegiqsgu006ru6pwd434910x"},{"name":"api升级","_id":"clegiqsgw006wu6pwckpth7he"},{"name":"spark-streaming","_id":"clegiqsh10070u6pw4zgphtuf"},{"name":"流式计算引擎","_id":"clegiqsh30075u6pwe7f7ae9o"},{"name":"kakfa","_id":"clegiqsh70078u6pwb8043gl7"},{"name":"极客时间","_id":"clegiqsh8007du6pwb78o408f"},{"name":"java","_id":"clegiqshe007hu6pwca767h41"},{"name":"math","_id":"clegiqshf007mu6pwbmy99vx7"},{"name":"BigDecimal","_id":"clegiqshg007pu6pwasqv185t"},{"name":"kibana","_id":"clegiqshg007su6pwbjlb4qt0"},{"name":"LocalDate","_id":"clegiqshh0080u6pw1lsph3rd"},{"name":"Duration","_id":"clegiqshi0081u6pw8jv9e8qv"},{"name":"flink、极客时间","_id":"clegiqshi0082u6pw8c5tdsy1"},{"name":"数据血缘管理","_id":"clegiqsic008au6pw5rn1byeg"},{"name":"altas","_id":"clegiqsiu008eu6pw4ojbc63c"},{"name":"数据仓库、架构设计","_id":"clegiqsiv008hu6pwgjg60i1h"},{"name":"hdfs","_id":"clegiqsiw008mu6pw0hk35308"},{"name":"spark","_id":"clegiqsix008ru6pwdluuhtqj"},{"name":"rdd","_id":"clegiqsiy008vu6pw6x0na740"},{"name":"算子","_id":"clegiqsiy008yu6pwcsrf6mxy"},{"name":"常规api封装","_id":"clegiqsiz0091u6pw1jo39aco"},{"name":"python","_id":"clegiqsj00097u6pw3vwihzd5"},{"name":"爬虫","_id":"clegiqsj1009cu6pw546d040e"},{"name":"connect","_id":"clegiqsj3009ju6pwdhrzbmyk"},{"name":"json","_id":"clegiqsj4009ou6pw1pms29dx"},{"name":"xml","_id":"clegiqsj4009pu6pw3b8ofn2o"},{"name":"poi","_id":"clegiqsj4009qu6pw5yb99k1v"},{"name":"log","_id":"clegiqsj4009ru6pwgzu059oa"},{"name":"flink、transform","_id":"cleozhbok0002vnpw2vp72un4"},{"name":"Flink、source","_id":"cleozhbp40003vnpw3omxau3r"},{"name":"flink、time、window","_id":"cleozhbp90008vnpwbjcq3rir"},{"name":"flink、transform、process","_id":"cleozhbpa0009vnpwaaxjffvk"},{"name":"flink、stream、转换","_id":"clepeku1h0002qrpwb7iuh435"},{"name":"flink、状态、编程","_id":"cleqib2av0003jfpwbjvfbkto"}]}}
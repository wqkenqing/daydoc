### 1、Hive数据倾斜

1. 空值引发的数据倾斜
2. 不同数据类型引发的数据倾斜
3. 不可拆分大文件引发的数据倾斜
4. 数据膨胀引发的数据倾斜
5. 表连接时引发的数据倾斜
6. 确实无法减少数据量引发的数据倾斜

---

### 2、hbase 数据热点与数据倾斜问题的处理

#### 2.1 数据热点

a. 什么是数据热点？

client访问的数据集中在某几个region上。局部region server的访问压力很大，与其它regionserver相比失衡严重

b. 怎么发生的呢?

这个问题的发生可能跟rowkey的设计有关。因为rowkey的变化较少，按字典排序时，rowkey过度集中到某几个region中了

c. 如何处理？

1. 反转
2. 加盐（Salting）
3. hash

hbase的数据倾斜问题与处理方式基本类似

### 3、hive小文件过多的情况处理

#### 3.1 小文件产生的原因

a.  直接向表中插入数据

```
insert into table demo values (round(),'lisi'),88)
```

b. 通过load方式加载数据

c. 通过查询方式加载数据

```
insert overwrite table demo select c_id,c_name from raw_user;
```

```
这种方式是生产环境中常用的，也是最容易产生小文件的方式

insert 导入数据时会启动 MR 任务，MR中 reduce 有多少个就输出多少个文件

所以， 文件数量=ReduceTask数量*分区数

也有很多简单任务没有reduce，只有map阶段，则

文件数量=MapTask数量*分区数

每执行一次 insert 时hive中至少产生一个文件，因为 insert 导入时至少会有一个MapTask。
像有的业务需要每10分钟就要把数据同步到 hive 中，这样产生的文件就会很多。
```

##  基础服务地址

| 数据库服务器 | 45.85.166.29 | 255.255.255.0 | 45.85.166.1 | 业务地址 | B4   | root | Yhgs123$%^ |
| ------------ | ------------ | ------------- | ----------- | -------- | ---- | ---- | ---------- |
|              | 45.85.166.56 | 255.255.255.0 | 45.85.166.1 | 管理地址 |      |      |            |
| 应用服务器1  | 45.85.166.27 | 255.255.255.0 | 45.85.166.1 | 业务地址 |      | root | Yhgs123$%^ |
|              | 45.85.166.54 | 255.255.255.0 | 45.85.166.1 | 管理地址 |      |      |            |
| 应用服务器2  | 45.85.166.28 | 255.255.255.0 | 45.85.166.1 | 业务地址 |      | root | Yhgs123$%^ |
|              | 45.85.166.55 | 255.255.255.0 | 45.85.166.1 | 管理地址 |      |      |            |



Yhgs!@#$%^



```shell
sudo route add 45.85.162.1/45.85.162.36
```

---

硬盘挂载

lsblk

sdb 未挂载

![CleanShot 2024-08-23 at 17.43.56@2x](http://img.wqkenqing.ren/typora_img/CleanShot%202024-08-23%20at%2017.43.56@2x.png)

---





export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890



export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890

```
sudo iptables -t nat -A POSTROUTING -o enx344b50000000 -j MASQUERADE
```

clickhouse-client  --host localhost --port 9000 -m -u yanggu --password yg123456

```
CREATE USER 'yanggu' IDENTIFIED WITH plaintext_password BY 'yg123456';
```







```
docker run -d --name zookeeper -p 2181:2181 -v /mnt/sdc/zookeeper/data:/opt/zookeeper-3.4.13/data -v /etc/localtime:/etc/localtime:ro -t wurstmeister/zookeeper

```





```
version: '3'

services:
  zookeeper:
    image: wurstmeister/zookeeper:latest
    container_name: zookeeper
    ports:
      - "2181:2181"
    volumes:
      - /data/colony/zookeeper/data:/opt/zookeeper/data
      - /etc/localtime:/etc/localtime:ro
    restart: always

  kafka:
    image: wurstmeister/kafka:zookeeper
    container_name: kafka
    ports:
      - "9092:9092"
    volumes:
      - /data/colony/kafka/logs:/opt/kafka/logs
      - /data/colony/kafka/kafka-logs:/kafka/kafka-logs
      - /etc/localtime:/etc/localtime:ro
    environment:
      KAFKA_BROKER_ID: 0
      KAFKA_ZOOKEEPER_CONNECT: 45.85.166.29:2181
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://45.85.166.29:9092
      KAFKA_LISTENERS: PLAINTEXT://0.0.0.0:9092
      KAFKA_LOG_DIRS: /kafka/kafka-logs
    depends_on:
      - zookeeper
    restart: always

```

mqtt docker-compose

---

```
version: '3'

services:
  cd_emqx:
    image: registry.lisong.pub:28500/hub/library/emqx:5.0
    restart: always  # 添加自启动
    environment:
    - "EMQX_NAME=emqx"
    - "EMQX_HOST=cd.emqx.io"
    - "EMQX_LOADED_PLUGINS=emqx_management,emqx_dashboard,emqx_auth_username emqx_plugin_kafka  # Load necessary plugins"
    healthcheck:
      test: ["CMD", "/opt/emqx/bin/emqx_ctl", "status"]
      interval: 5s
      timeout: 25s
      retries: 5
    volumes:
    - /data/services/mqtt/conf/data:/opt/emqx/data  # 添加卷映射
    - /data/services/mqtt/conf/etc:/opt/emqx/etc

    network_mode: host  # 使用宿主机网络
```


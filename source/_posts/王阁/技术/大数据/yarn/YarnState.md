# yarn相关参数提取

## rest web api
http://namenode:8088/ws/v1/cluster/apps

获得json对象

```json
{
  "apps":{
    "app":[
      {
        "applicationType":"MAPREDUCE",
        "finalStatus":"SUCCEEDED",
        "trackingUrl":"http:\/\/namenode:8088\/proxy\/application_1558964977321_0007\/",
        "runningContainers":-1,
        "clusterId":1558964977321,
        "vcoreSeconds":349,
        "preemptedResourceVCores":0,
        "numAMContainerPreempted":0,
        "allocatedMB":-1,
        "id":"application_1558964977321_0007",
        "state":"FINISHED",
        "amHostHttpAddress":"datanode2:8042",
        "memorySeconds":538321,
        "preemptedResourceMB":0,
        "applicationTags":"",
        "startedTime":1561963496299,
        "trackingUI":"History",
        "numNonAMContainerPreempted":0,
        "amContainerLogs":"http:\/\/datanode2:8042\/node\/containerlogs\/container_1558964977321_0007_01_000001\/hadoop",
        "allocatedVCores":-1,
        "diagnostics":"",
        "name":"componet_code-jar-with-dependencies.jar",
        "progress":100,
        "finishedTime":1561963577074,
        "user":"hadoop",
        "queue":"default",
        "elapsedTime":80775
      },
      {
        "applicationType":"MAPREDUCE",
        "finalStatus":"FAILED",
        "trackingUrl":"http:\/\/namenode:8088\/proxy\/application_1558964977321_0006\/",
        "runningContainers":-1,
        "clusterId":1558964977321,
        "vcoreSeconds":197,
        "preemptedResourceVCores":0,
        "numAMContainerPreempted":0,
        "allocatedMB":-1,
        "id":"application_1558964977321_0006",
        "state":"FINISHED",
        "amHostHttpAddress":"datanode1:8042",
        "memorySeconds":261004,
        "preemptedResourceMB":0,
        "applicationTags":"",
        "startedTime":1559543218059,
        "trackingUI":"History",
        "numNonAMContainerPreempted":0,
        "amContainerLogs":"http:\/\/datanode1:8042\/node\/containerlogs\/container_1558964977321_0006_01_000001\/hadoop",
        "allocatedVCores":-1,
        "diagnostics":"Task failed task_1558964977321_0006_m_000000\nJob failed as tasks failed. failedMaps:1 failedReduces:0\n",
        "name":"N\/A",
        "progress":100,
        "finishedTime":1559543260162,
        "user":"hadoop",
        "queue":"default",
        "elapsedTime":42103
      },
      {
        "applicationType":"MAPREDUCE",
        "finalStatus":"FAILED",
        "trackingUrl":"http:\/\/namenode:8088\/proxy\/application_1558964977321_0005\/",
        "runningContainers":-1,
        "clusterId":1558964977321,
        "vcoreSeconds":181,
        "preemptedResourceVCores":0,
        "numAMContainerPreempted":0,
        "allocatedMB":-1,
        "id":"application_1558964977321_0005",
        "state":"FINISHED",
        "amHostHttpAddress":"datanode1:8042",
        "memorySeconds":239683,
        "preemptedResourceMB":0,
        "applicationTags":"",
        "startedTime":1559543157210,
        "trackingUI":"History",
        "numNonAMContainerPreempted":0,
        "amContainerLogs":"http:\/\/datanode1:8042\/node\/containerlogs\/container_1558964977321_0005_01_000001\/hadoop",
        "allocatedVCores":-1,
        "diagnostics":"Task failed task_1558964977321_0005_m_000004\nJob failed as tasks failed. failedMaps:1 failedReduces:0\n",
        "name":"N\/A",
        "progress":100,
        "finishedTime":1559543203631,
        "user":"hadoop",
        "queue":"default",
        "elapsedTime":46421
      },
      {
        "applicationType":"MAPREDUCE",
        "finalStatus":"FAILED",
        "trackingUrl":"http:\/\/namenode:8088\/proxy\/application_1558964977321_0004\/",
        "runningContainers":-1,
        "clusterId":1558964977321,
        "vcoreSeconds":206,
        "preemptedResourceVCores":0,
        "numAMContainerPreempted":0,
        "allocatedMB":-1,
        "id":"application_1558964977321_0004",
        "state":"FINISHED",
        "amHostHttpAddress":"datanode2:8042",
        "memorySeconds":269329,
        "preemptedResourceMB":0,
        "applicationTags":"",
        "startedTime":1559543112981,
        "trackingUI":"History",
        "numNonAMContainerPreempted":0,
        "amContainerLogs":"http:\/\/datanode2:8042\/node\/containerlogs\/container_1558964977321_0004_01_000001\/hadoop",
        "allocatedVCores":-1,
        "diagnostics":"Task failed task_1558964977321_0004_m_000000\nJob failed as tasks failed. failedMaps:1 failedReduces:0\n",
        "name":"N\/A",
        "progress":100,
        "finishedTime":1559543159096,
        "user":"hadoop",
        "queue":"default",
        "elapsedTime":46115
      },
      {
        "applicationType":"MAPREDUCE",
        "finalStatus":"FAILED",
        "trackingUrl":"http:\/\/namenode:8088\/proxy\/application_1558964977321_0003\/",
        "runningContainers":-1,
        "clusterId":1558964977321,
        "vcoreSeconds":172,
        "preemptedResourceVCores":0,
        "numAMContainerPreempted":0,
        "allocatedMB":-1,
        "id":"application_1558964977321_0003",
        "state":"FINISHED",
        "amHostHttpAddress":"datanode1:8042",
        "memorySeconds":227366,
        "preemptedResourceMB":0,
        "applicationTags":"",
        "startedTime":1559543073374,
        "trackingUI":"History",
        "numNonAMContainerPreempted":0,
        "amContainerLogs":"http:\/\/datanode1:8042\/node\/containerlogs\/container_1558964977321_0003_01_000001\/hadoop",
        "allocatedVCores":-1,
        "diagnostics":"Task failed task_1558964977321_0003_m_000004\nJob failed as tasks failed. failedMaps:1 failedReduces:0\n",
        "name":"N\/A",
        "progress":100,
        "finishedTime":1559543111009,
        "user":"hadoop",
        "queue":"default",
        "elapsedTime":37635
      },
      {
        "applicationType":"MAPREDUCE",
        "finalStatus":"FAILED",
        "trackingUrl":"http:\/\/namenode:8088\/proxy\/application_1558964977321_0002\/",
        "runningContainers":-1,
        "clusterId":1558964977321,
        "vcoreSeconds":206,
        "preemptedResourceVCores":0,
        "numAMContainerPreempted":0,
        "allocatedMB":-1,
        "id":"application_1558964977321_0002",
        "state":"FINISHED",
        "amHostHttpAddress":"datanode2:8042",
        "memorySeconds":267663,
        "preemptedResourceMB":0,
        "applicationTags":"",
        "startedTime":1559543001391,
        "trackingUI":"History",
        "numNonAMContainerPreempted":0,
        "amContainerLogs":"http:\/\/datanode2:8042\/node\/containerlogs\/container_1558964977321_0002_01_000001\/hadoop",
        "allocatedVCores":-1,
        "diagnostics":"Task failed task_1558964977321_0002_m_000004\nJob failed as tasks failed. failedMaps:1 failedReduces:0\n",
        "name":"N\/A",
        "progress":100,
        "finishedTime":1559543043050,
        "user":"hadoop",
        "queue":"default",
        "elapsedTime":41659
      },
      {
        "applicationType":"MAPREDUCE",
        "finalStatus":"SUCCEEDED",
        "trackingUrl":"http:\/\/namenode:8088\/proxy\/application_1558964977321_0001\/",
        "runningContainers":-1,
        "clusterId":1558964977321,
        "vcoreSeconds":411,
        "preemptedResourceVCores":0,
        "numAMContainerPreempted":0,
        "allocatedMB":-1,
        "id":"application_1558964977321_0001",
        "state":"FINISHED",
        "amHostHttpAddress":"datanode1:8042",
        "memorySeconds":619025,
        "preemptedResourceMB":0,
        "applicationTags":"",
        "startedTime":1559197897433,
        "trackingUI":"History",
        "numNonAMContainerPreempted":0,
        "amContainerLogs":"http:\/\/datanode1:8042\/node\/containerlogs\/container_1558964977321_0001_01_000001\/hadoop",
        "allocatedVCores":-1,
        "diagnostics":"",
        "name":"componet_code-jar-with-dependencies.jar",
        "progress":100,
        "finishedTime":1559197986948,
        "user":"hadoop",
        "queue":"default",
        "elapsedTime":89515
      }
    ]
  }
}


```

对json对象分解后获得如下字段备用

| 字段名 | 含义 |
| :--- | :----: |
| applicationType|计算任务类型(mr spark)|
| finalStatus|最终状态|
| runningContainers   | 正在运行的容器    |

![](http://img.wqkenqing.ren/r7lvxr.png)
